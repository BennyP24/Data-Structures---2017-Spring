if (function(global, factory) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = global.document ? factory(global, !0) : function(w) {
        if (!w.document)
            throw new Error("jQuery requires a window with a document");
        return factory(w)
    }
    : factory(global)
}("undefined" != typeof window ? window : this, function(window, noGlobal) {
    function isArrayLike(obj) {
        var length = !!obj && "length"in obj && obj.length
          , type = jQuery.type(obj);
        return "function" === type || jQuery.isWindow(obj) ? !1 : "array" === type || 0 === length || "number" == typeof length && length > 0 && length - 1 in obj
    }
    function winnow(elements, qualifier, not) {
        if (jQuery.isFunction(qualifier))
            return jQuery.grep(elements, function(elem, i) {
                return !!qualifier.call(elem, i, elem) !== not
            });
        if (qualifier.nodeType)
            return jQuery.grep(elements, function(elem) {
                return elem === qualifier !== not
            });
        if ("string" == typeof qualifier) {
            if (risSimple.test(qualifier))
                return jQuery.filter(qualifier, elements, not);
            qualifier = jQuery.filter(qualifier, elements)
        }
        return jQuery.grep(elements, function(elem) {
            return jQuery.inArray(elem, qualifier) > -1 !== not
        })
    }
    function sibling(cur, dir) {
        do
            cur = cur[dir];
        while (cur && 1 !== cur.nodeType);
        return cur
    }
    function createOptions(options) {
        var object = {};
        return jQuery.each(options.match(rnotwhite) || [], function(_, flag) {
            object[flag] = !0
        }),
        object
    }
    function detach() {
        document.addEventListener ? (document.removeEventListener("DOMContentLoaded", completed),
        window.removeEventListener("load", completed)) : (document.detachEvent("onreadystatechange", completed),
        window.detachEvent("onload", completed))
    }
    function completed() {
        (document.addEventListener || "load" === window.event.type || "complete" === document.readyState) && (detach(),
        jQuery.ready())
    }
    function dataAttr(elem, key, data) {
        if (void 0 === data && 1 === elem.nodeType) {
            var name = "data-" + key.replace(rmultiDash, "-$1").toLowerCase();
            if (data = elem.getAttribute(name),
            "string" == typeof data) {
                try {
                    data = "true" === data ? !0 : "false" === data ? !1 : "null" === data ? null : +data + "" === data ? +data : rbrace.test(data) ? jQuery.parseJSON(data) : data
                } catch (e) {}
                jQuery.data(elem, key, data)
            } else
                data = void 0
        }
        return data
    }
    function isEmptyDataObject(obj) {
        var name;
        for (name in obj)
            if (("data" !== name || !jQuery.isEmptyObject(obj[name])) && "toJSON" !== name)
                return !1;
        return !0
    }
    function internalData(elem, name, data, pvt) {
        if (acceptData(elem)) {
            var ret, thisCache, internalKey = jQuery.expando, isNode = elem.nodeType, cache = isNode ? jQuery.cache : elem, id = isNode ? elem[internalKey] : elem[internalKey] && internalKey;
            if (id && cache[id] && (pvt || cache[id].data) || void 0 !== data || "string" != typeof name)
                return id || (id = isNode ? elem[internalKey] = deletedIds.pop() || jQuery.guid++ : internalKey),
                cache[id] || (cache[id] = isNode ? {} : {
                    toJSON: jQuery.noop
                }),
                "object" != typeof name && "function" != typeof name || (pvt ? cache[id] = jQuery.extend(cache[id], name) : cache[id].data = jQuery.extend(cache[id].data, name)),
                thisCache = cache[id],
                pvt || (thisCache.data || (thisCache.data = {}),
                thisCache = thisCache.data),
                void 0 !== data && (thisCache[jQuery.camelCase(name)] = data),
                "string" == typeof name ? (ret = thisCache[name],
                null == ret && (ret = thisCache[jQuery.camelCase(name)])) : ret = thisCache,
                ret
        }
    }
    function internalRemoveData(elem, name, pvt) {
        if (acceptData(elem)) {
            var thisCache, i, isNode = elem.nodeType, cache = isNode ? jQuery.cache : elem, id = isNode ? elem[jQuery.expando] : jQuery.expando;
            if (cache[id]) {
                if (name && (thisCache = pvt ? cache[id] : cache[id].data)) {
                    jQuery.isArray(name) ? name = name.concat(jQuery.map(name, jQuery.camelCase)) : name in thisCache ? name = [name] : (name = jQuery.camelCase(name),
                    name = name in thisCache ? [name] : name.split(" ")),
                    i = name.length;
                    for (; i--; )
                        delete thisCache[name[i]];
                    if (pvt ? !isEmptyDataObject(thisCache) : !jQuery.isEmptyObject(thisCache))
                        return
                }
                (pvt || (delete cache[id].data,
                isEmptyDataObject(cache[id]))) && (isNode ? jQuery.cleanData([elem], !0) : support.deleteExpando || cache != cache.window ? delete cache[id] : cache[id] = void 0)
            }
        }
    }
    function adjustCSS(elem, prop, valueParts, tween) {
        var adjusted, scale = 1, maxIterations = 20, currentValue = tween ? function() {
            return tween.cur()
        }
        : function() {
            return jQuery.css(elem, prop, "")
        }
        , initial = currentValue(), unit = valueParts && valueParts[3] || (jQuery.cssNumber[prop] ? "" : "px"), initialInUnit = (jQuery.cssNumber[prop] || "px" !== unit && +initial) && rcssNum.exec(jQuery.css(elem, prop));
        if (initialInUnit && initialInUnit[3] !== unit) {
            unit = unit || initialInUnit[3],
            valueParts = valueParts || [],
            initialInUnit = +initial || 1;
            do
                scale = scale || ".5",
                initialInUnit /= scale,
                jQuery.style(elem, prop, initialInUnit + unit);
            while (scale !== (scale = currentValue() / initial) && 1 !== scale && --maxIterations)
        }
        return valueParts && (initialInUnit = +initialInUnit || +initial || 0,
        adjusted = valueParts[1] ? initialInUnit + (valueParts[1] + 1) * valueParts[2] : +valueParts[2],
        tween && (tween.unit = unit,
        tween.start = initialInUnit,
        tween.end = adjusted)),
        adjusted
    }
    function createSafeFragment(document) {
        var list = nodeNames.split("|")
          , safeFrag = document.createDocumentFragment();
        if (safeFrag.createElement)
            for (; list.length; )
                safeFrag.createElement(list.pop());
        return safeFrag
    }
    function getAll(context, tag) {
        var elems, elem, i = 0, found = "undefined" != typeof context.getElementsByTagName ? context.getElementsByTagName(tag || "*") : "undefined" != typeof context.querySelectorAll ? context.querySelectorAll(tag || "*") : void 0;
        if (!found)
            for (found = [],
            elems = context.childNodes || context; null != (elem = elems[i]); i++)
                !tag || jQuery.nodeName(elem, tag) ? found.push(elem) : jQuery.merge(found, getAll(elem, tag));
        return void 0 === tag || tag && jQuery.nodeName(context, tag) ? jQuery.merge([context], found) : found
    }
    function setGlobalEval(elems, refElements) {
        for (var elem, i = 0; null != (elem = elems[i]); i++)
            jQuery._data(elem, "globalEval", !refElements || jQuery._data(refElements[i], "globalEval"))
    }
    function fixDefaultChecked(elem) {
        rcheckableType.test(elem.type) && (elem.defaultChecked = elem.checked)
    }
    function buildFragment(elems, context, scripts, selection, ignored) {
        for (var j, elem, contains, tmp, tag, tbody, wrap, l = elems.length, safe = createSafeFragment(context), nodes = [], i = 0; l > i; i++)
            if (elem = elems[i],
            elem || 0 === elem)
                if ("object" === jQuery.type(elem))
                    jQuery.merge(nodes, elem.nodeType ? [elem] : elem);
                else if (rhtml.test(elem)) {
                    for (tmp = tmp || safe.appendChild(context.createElement("div")),
                    tag = (rtagName.exec(elem) || ["", ""])[1].toLowerCase(),
                    wrap = wrapMap[tag] || wrapMap._default,
                    tmp.innerHTML = wrap[1] + jQuery.htmlPrefilter(elem) + wrap[2],
                    j = wrap[0]; j--; )
                        tmp = tmp.lastChild;
                    if (!support.leadingWhitespace && rleadingWhitespace.test(elem) && nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0])),
                    !support.tbody)
                        for (elem = "table" !== tag || rtbody.test(elem) ? "<table>" !== wrap[1] || rtbody.test(elem) ? 0 : tmp : tmp.firstChild,
                        j = elem && elem.childNodes.length; j--; )
                            jQuery.nodeName(tbody = elem.childNodes[j], "tbody") && !tbody.childNodes.length && elem.removeChild(tbody);
                    for (jQuery.merge(nodes, tmp.childNodes),
                    tmp.textContent = ""; tmp.firstChild; )
                        tmp.removeChild(tmp.firstChild);
                    tmp = safe.lastChild
                } else
                    nodes.push(context.createTextNode(elem));
        for (tmp && safe.removeChild(tmp),
        support.appendChecked || jQuery.grep(getAll(nodes, "input"), fixDefaultChecked),
        i = 0; elem = nodes[i++]; )
            if (selection && jQuery.inArray(elem, selection) > -1)
                ignored && ignored.push(elem);
            else if (contains = jQuery.contains(elem.ownerDocument, elem),
            tmp = getAll(safe.appendChild(elem), "script"),
            contains && setGlobalEval(tmp),
            scripts)
                for (j = 0; elem = tmp[j++]; )
                    rscriptType.test(elem.type || "") && scripts.push(elem);
        return tmp = null,
        safe
    }
    function returnTrue() {
        return !0
    }
    function returnFalse() {
        return !1
    }
    function safeActiveElement() {
        try {
            return document.activeElement
        } catch (err) {}
    }
    function on(elem, types, selector, data, fn, one) {
        var origFn, type;
        if ("object" == typeof types) {
            "string" != typeof selector && (data = data || selector,
            selector = void 0);
            for (type in types)
                on(elem, type, selector, data, types[type], one);
            return elem
        }
        if (null == data && null == fn ? (fn = selector,
        data = selector = void 0) : null == fn && ("string" == typeof selector ? (fn = data,
        data = void 0) : (fn = data,
        data = selector,
        selector = void 0)),
        fn === !1)
            fn = returnFalse;
        else if (!fn)
            return elem;
        return 1 === one && (origFn = fn,
        fn = function(event) {
            return jQuery().off(event),
            origFn.apply(this, arguments)
        }
        ,
        fn.guid = origFn.guid || (origFn.guid = jQuery.guid++)),
        elem.each(function() {
            jQuery.event.add(this, types, fn, data, selector)
        })
    }
    function manipulationTarget(elem, content) {
        return jQuery.nodeName(elem, "table") && jQuery.nodeName(11 !== content.nodeType ? content : content.firstChild, "tr") ? elem.getElementsByTagName("tbody")[0] || elem.appendChild(elem.ownerDocument.createElement("tbody")) : elem
    }
    function disableScript(elem) {
        return elem.type = (null !== jQuery.find.attr(elem, "type")) + "/" + elem.type,
        elem
    }
    function restoreScript(elem) {
        var match = rscriptTypeMasked.exec(elem.type);
        return match ? elem.type = match[1] : elem.removeAttribute("type"),
        elem
    }
    function cloneCopyEvent(src, dest) {
        if (1 === dest.nodeType && jQuery.hasData(src)) {
            var type, i, l, oldData = jQuery._data(src), curData = jQuery._data(dest, oldData), events = oldData.events;
            if (events) {
                delete curData.handle,
                curData.events = {};
                for (type in events)
                    for (i = 0,
                    l = events[type].length; l > i; i++)
                        jQuery.event.add(dest, type, events[type][i])
            }
            curData.data && (curData.data = jQuery.extend({}, curData.data))
        }
    }
    function fixCloneNodeIssues(src, dest) {
        var nodeName, e, data;
        if (1 === dest.nodeType) {
            if (nodeName = dest.nodeName.toLowerCase(),
            !support.noCloneEvent && dest[jQuery.expando]) {
                data = jQuery._data(dest);
                for (e in data.events)
                    jQuery.removeEvent(dest, e, data.handle);
                dest.removeAttribute(jQuery.expando)
            }
            "script" === nodeName && dest.text !== src.text ? (disableScript(dest).text = src.text,
            restoreScript(dest)) : "object" === nodeName ? (dest.parentNode && (dest.outerHTML = src.outerHTML),
            support.html5Clone && src.innerHTML && !jQuery.trim(dest.innerHTML) && (dest.innerHTML = src.innerHTML)) : "input" === nodeName && rcheckableType.test(src.type) ? (dest.defaultChecked = dest.checked = src.checked,
            dest.value !== src.value && (dest.value = src.value)) : "option" === nodeName ? dest.defaultSelected = dest.selected = src.defaultSelected : "input" !== nodeName && "textarea" !== nodeName || (dest.defaultValue = src.defaultValue)
        }
    }
    function domManip(collection, args, callback, ignored) {
        args = concat.apply([], args);
        var first, node, hasScripts, scripts, doc, fragment, i = 0, l = collection.length, iNoClone = l - 1, value = args[0], isFunction = jQuery.isFunction(value);
        if (isFunction || l > 1 && "string" == typeof value && !support.checkClone && rchecked.test(value))
            return collection.each(function(index) {
                var self = collection.eq(index);
                isFunction && (args[0] = value.call(this, index, self.html())),
                domManip(self, args, callback, ignored)
            });
        if (l && (fragment = buildFragment(args, collection[0].ownerDocument, !1, collection, ignored),
        first = fragment.firstChild,
        1 === fragment.childNodes.length && (fragment = first),
        first || ignored)) {
            for (scripts = jQuery.map(getAll(fragment, "script"), disableScript),
            hasScripts = scripts.length; l > i; i++)
                node = fragment,
                i !== iNoClone && (node = jQuery.clone(node, !0, !0),
                hasScripts && jQuery.merge(scripts, getAll(node, "script"))),
                callback.call(collection[i], node, i);
            if (hasScripts)
                for (doc = scripts[scripts.length - 1].ownerDocument,
                jQuery.map(scripts, restoreScript),
                i = 0; hasScripts > i; i++)
                    node = scripts[i],
                    rscriptType.test(node.type || "") && !jQuery._data(node, "globalEval") && jQuery.contains(doc, node) && (node.src ? jQuery._evalUrl && jQuery._evalUrl(node.src) : jQuery.globalEval((node.text || node.textContent || node.innerHTML || "").replace(rcleanScript, "")));
            fragment = first = null
        }
        return collection
    }
    function remove(elem, selector, keepData) {
        for (var node, elems = selector ? jQuery.filter(selector, elem) : elem, i = 0; null != (node = elems[i]); i++)
            keepData || 1 !== node.nodeType || jQuery.cleanData(getAll(node)),
            node.parentNode && (keepData && jQuery.contains(node.ownerDocument, node) && setGlobalEval(getAll(node, "script")),
            node.parentNode.removeChild(node));
        return elem
    }
    function actualDisplay(name, doc) {
        var elem = jQuery(doc.createElement(name)).appendTo(doc.body)
          , display = jQuery.css(elem[0], "display");
        return elem.detach(),
        display
    }
    function defaultDisplay(nodeName) {
        var doc = document
          , display = elemdisplay[nodeName];
        return display || (display = actualDisplay(nodeName, doc),
        "none" !== display && display || (iframe = (iframe || jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement),
        doc = (iframe[0].contentWindow || iframe[0].contentDocument).document,
        doc.write(),
        doc.close(),
        display = actualDisplay(nodeName, doc),
        iframe.detach()),
        elemdisplay[nodeName] = display),
        display
    }
    function addGetHookIf(conditionFn, hookFn) {
        return {
            get: function() {
                return conditionFn() ? void delete this.get : (this.get = hookFn).apply(this, arguments)
            }
        }
    }
    function vendorPropName(name) {
        if (name in emptyStyle)
            return name;
        for (var capName = name.charAt(0).toUpperCase() + name.slice(1), i = cssPrefixes.length; i--; )
            if (name = cssPrefixes[i] + capName,
            name in emptyStyle)
                return name
    }
    function showHide(elements, show) {
        for (var display, elem, hidden, values = [], index = 0, length = elements.length; length > index; index++)
            elem = elements[index],
            elem.style && (values[index] = jQuery._data(elem, "olddisplay"),
            display = elem.style.display,
            show ? (values[index] || "none" !== display || (elem.style.display = ""),
            "" === elem.style.display && isHidden(elem) && (values[index] = jQuery._data(elem, "olddisplay", defaultDisplay(elem.nodeName)))) : (hidden = isHidden(elem),
            (display && "none" !== display || !hidden) && jQuery._data(elem, "olddisplay", hidden ? display : jQuery.css(elem, "display"))));
        for (index = 0; length > index; index++)
            elem = elements[index],
            elem.style && (show && "none" !== elem.style.display && "" !== elem.style.display || (elem.style.display = show ? values[index] || "" : "none"));
        return elements
    }
    function setPositiveNumber(elem, value, subtract) {
        var matches = rnumsplit.exec(value);
        return matches ? Math.max(0, matches[1] - (subtract || 0)) + (matches[2] || "px") : value
    }
    function augmentWidthOrHeight(elem, name, extra, isBorderBox, styles) {
        for (var i = extra === (isBorderBox ? "border" : "content") ? 4 : "width" === name ? 1 : 0, val = 0; 4 > i; i += 2)
            "margin" === extra && (val += jQuery.css(elem, extra + cssExpand[i], !0, styles)),
            isBorderBox ? ("content" === extra && (val -= jQuery.css(elem, "padding" + cssExpand[i], !0, styles)),
            "margin" !== extra && (val -= jQuery.css(elem, "border" + cssExpand[i] + "Width", !0, styles))) : (val += jQuery.css(elem, "padding" + cssExpand[i], !0, styles),
            "padding" !== extra && (val += jQuery.css(elem, "border" + cssExpand[i] + "Width", !0, styles)));
        return val
    }
    function getWidthOrHeight(elem, name, extra) {
        var valueIsBorderBox = !0
          , val = "width" === name ? elem.offsetWidth : elem.offsetHeight
          , styles = getStyles(elem)
          , isBorderBox = support.boxSizing && "border-box" === jQuery.css(elem, "boxSizing", !1, styles);
        if (0 >= val || null == val) {
            if (val = curCSS(elem, name, styles),
            (0 > val || null == val) && (val = elem.style[name]),
            rnumnonpx.test(val))
                return val;
            valueIsBorderBox = isBorderBox && (support.boxSizingReliable() || val === elem.style[name]),
            val = parseFloat(val) || 0
        }
        return val + augmentWidthOrHeight(elem, name, extra || (isBorderBox ? "border" : "content"), valueIsBorderBox, styles) + "px"
    }
    function Tween(elem, options, prop, end, easing) {
        return new Tween.prototype.init(elem,options,prop,end,easing)
    }
    function createFxNow() {
        return window.setTimeout(function() {
            fxNow = void 0
        }),
        fxNow = jQuery.now()
    }
    function genFx(type, includeWidth) {
        var which, attrs = {
            height: type
        }, i = 0;
        for (includeWidth = includeWidth ? 1 : 0; 4 > i; i += 2 - includeWidth)
            which = cssExpand[i],
            attrs["margin" + which] = attrs["padding" + which] = type;
        return includeWidth && (attrs.opacity = attrs.width = type),
        attrs
    }
    function createTween(value, prop, animation) {
        for (var tween, collection = (Animation.tweeners[prop] || []).concat(Animation.tweeners["*"]), index = 0, length = collection.length; length > index; index++)
            if (tween = collection[index].call(animation, prop, value))
                return tween
    }
    function defaultPrefilter(elem, props, opts) {
        var prop, value, toggle, tween, hooks, oldfire, display, checkDisplay, anim = this, orig = {}, style = elem.style, hidden = elem.nodeType && isHidden(elem), dataShow = jQuery._data(elem, "fxshow");
        opts.queue || (hooks = jQuery._queueHooks(elem, "fx"),
        null == hooks.unqueued && (hooks.unqueued = 0,
        oldfire = hooks.empty.fire,
        hooks.empty.fire = function() {
            hooks.unqueued || oldfire()
        }
        ),
        hooks.unqueued++,
        anim.always(function() {
            anim.always(function() {
                hooks.unqueued--,
                jQuery.queue(elem, "fx").length || hooks.empty.fire()
            })
        })),
        1 === elem.nodeType && ("height"in props || "width"in props) && (opts.overflow = [style.overflow, style.overflowX, style.overflowY],
        display = jQuery.css(elem, "display"),
        checkDisplay = "none" === display ? jQuery._data(elem, "olddisplay") || defaultDisplay(elem.nodeName) : display,
        "inline" === checkDisplay && "none" === jQuery.css(elem, "float") && (support.inlineBlockNeedsLayout && "inline" !== defaultDisplay(elem.nodeName) ? style.zoom = 1 : style.display = "inline-block")),
        opts.overflow && (style.overflow = "hidden",
        support.shrinkWrapBlocks() || anim.always(function() {
            style.overflow = opts.overflow[0],
            style.overflowX = opts.overflow[1],
            style.overflowY = opts.overflow[2]
        }));
        for (prop in props)
            if (value = props[prop],
            rfxtypes.exec(value)) {
                if (delete props[prop],
                toggle = toggle || "toggle" === value,
                value === (hidden ? "hide" : "show")) {
                    if ("show" !== value || !dataShow || void 0 === dataShow[prop])
                        continue;
                    hidden = !0
                }
                orig[prop] = dataShow && dataShow[prop] || jQuery.style(elem, prop)
            } else
                display = void 0;
        if (jQuery.isEmptyObject(orig))
            "inline" === ("none" === display ? defaultDisplay(elem.nodeName) : display) && (style.display = display);
        else {
            dataShow ? "hidden"in dataShow && (hidden = dataShow.hidden) : dataShow = jQuery._data(elem, "fxshow", {}),
            toggle && (dataShow.hidden = !hidden),
            hidden ? jQuery(elem).show() : anim.done(function() {
                jQuery(elem).hide()
            }),
            anim.done(function() {
                var prop;
                jQuery._removeData(elem, "fxshow");
                for (prop in orig)
                    jQuery.style(elem, prop, orig[prop])
            });
            for (prop in orig)
                tween = createTween(hidden ? dataShow[prop] : 0, prop, anim),
                prop in dataShow || (dataShow[prop] = tween.start,
                hidden && (tween.end = tween.start,
                tween.start = "width" === prop || "height" === prop ? 1 : 0))
        }
    }
    function propFilter(props, specialEasing) {
        var index, name, easing, value, hooks;
        for (index in props)
            if (name = jQuery.camelCase(index),
            easing = specialEasing[name],
            value = props[index],
            jQuery.isArray(value) && (easing = value[1],
            value = props[index] = value[0]),
            index !== name && (props[name] = value,
            delete props[index]),
            hooks = jQuery.cssHooks[name],
            hooks && "expand"in hooks) {
                value = hooks.expand(value),
                delete props[name];
                for (index in value)
                    index in props || (props[index] = value[index],
                    specialEasing[index] = easing)
            } else
                specialEasing[name] = easing
    }
    function Animation(elem, properties, options) {
        var result, stopped, index = 0, length = Animation.prefilters.length, deferred = jQuery.Deferred().always(function() {
            delete tick.elem
        }), tick = function() {
            if (stopped)
                return !1;
            for (var currentTime = fxNow || createFxNow(), remaining = Math.max(0, animation.startTime + animation.duration - currentTime), temp = remaining / animation.duration || 0, percent = 1 - temp, index = 0, length = animation.tweens.length; length > index; index++)
                animation.tweens[index].run(percent);
            return deferred.notifyWith(elem, [animation, percent, remaining]),
            1 > percent && length ? remaining : (deferred.resolveWith(elem, [animation]),
            !1)
        }, animation = deferred.promise({
            elem: elem,
            props: jQuery.extend({}, properties),
            opts: jQuery.extend(!0, {
                specialEasing: {},
                easing: jQuery.easing._default
            }, options),
            originalProperties: properties,
            originalOptions: options,
            startTime: fxNow || createFxNow(),
            duration: options.duration,
            tweens: [],
            createTween: function(prop, end) {
                var tween = jQuery.Tween(elem, animation.opts, prop, end, animation.opts.specialEasing[prop] || animation.opts.easing);
                return animation.tweens.push(tween),
                tween
            },
            stop: function(gotoEnd) {
                var index = 0
                  , length = gotoEnd ? animation.tweens.length : 0;
                if (stopped)
                    return this;
                for (stopped = !0; length > index; index++)
                    animation.tweens[index].run(1);
                return gotoEnd ? (deferred.notifyWith(elem, [animation, 1, 0]),
                deferred.resolveWith(elem, [animation, gotoEnd])) : deferred.rejectWith(elem, [animation, gotoEnd]),
                this
            }
        }), props = animation.props;
        for (propFilter(props, animation.opts.specialEasing); length > index; index++)
            if (result = Animation.prefilters[index].call(animation, elem, props, animation.opts))
                return jQuery.isFunction(result.stop) && (jQuery._queueHooks(animation.elem, animation.opts.queue).stop = jQuery.proxy(result.stop, result)),
                result;
        return jQuery.map(props, createTween, animation),
        jQuery.isFunction(animation.opts.start) && animation.opts.start.call(elem, animation),
        jQuery.fx.timer(jQuery.extend(tick, {
            elem: elem,
            anim: animation,
            queue: animation.opts.queue
        })),
        animation.progress(animation.opts.progress).done(animation.opts.done, animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)
    }
    function getClass(elem) {
        return jQuery.attr(elem, "class") || ""
    }
    function addToPrefiltersOrTransports(structure) {
        return function(dataTypeExpression, func) {
            "string" != typeof dataTypeExpression && (func = dataTypeExpression,
            dataTypeExpression = "*");
            var dataType, i = 0, dataTypes = dataTypeExpression.toLowerCase().match(rnotwhite) || [];
            if (jQuery.isFunction(func))
                for (; dataType = dataTypes[i++]; )
                    "+" === dataType.charAt(0) ? (dataType = dataType.slice(1) || "*",
                    (structure[dataType] = structure[dataType] || []).unshift(func)) : (structure[dataType] = structure[dataType] || []).push(func)
        }
    }
    function inspectPrefiltersOrTransports(structure, options, originalOptions, jqXHR) {
        function inspect(dataType) {
            var selected;
            return inspected[dataType] = !0,
            jQuery.each(structure[dataType] || [], function(_, prefilterOrFactory) {
                var dataTypeOrTransport = prefilterOrFactory(options, originalOptions, jqXHR);
                return "string" != typeof dataTypeOrTransport || seekingTransport || inspected[dataTypeOrTransport] ? seekingTransport ? !(selected = dataTypeOrTransport) : void 0 : (options.dataTypes.unshift(dataTypeOrTransport),
                inspect(dataTypeOrTransport),
                !1)
            }),
            selected
        }
        var inspected = {}
          , seekingTransport = structure === transports;
        return inspect(options.dataTypes[0]) || !inspected["*"] && inspect("*")
    }
    function ajaxExtend(target, src) {
        var deep, key, flatOptions = jQuery.ajaxSettings.flatOptions || {};
        for (key in src)
            void 0 !== src[key] && ((flatOptions[key] ? target : deep || (deep = {}))[key] = src[key]);
        return deep && jQuery.extend(!0, target, deep),
        target
    }
    function ajaxHandleResponses(s, jqXHR, responses) {
        for (var firstDataType, ct, finalDataType, type, contents = s.contents, dataTypes = s.dataTypes; "*" === dataTypes[0]; )
            dataTypes.shift(),
            void 0 === ct && (ct = s.mimeType || jqXHR.getResponseHeader("Content-Type"));
        if (ct)
            for (type in contents)
                if (contents[type] && contents[type].test(ct)) {
                    dataTypes.unshift(type);
                    break
                }
        if (dataTypes[0]in responses)
            finalDataType = dataTypes[0];
        else {
            for (type in responses) {
                if (!dataTypes[0] || s.converters[type + " " + dataTypes[0]]) {
                    finalDataType = type;
                    break
                }
                firstDataType || (firstDataType = type)
            }
            finalDataType = finalDataType || firstDataType
        }
        return finalDataType ? (finalDataType !== dataTypes[0] && dataTypes.unshift(finalDataType),
        responses[finalDataType]) : void 0
    }
    function ajaxConvert(s, response, jqXHR, isSuccess) {
        var conv2, current, conv, tmp, prev, converters = {}, dataTypes = s.dataTypes.slice();
        if (dataTypes[1])
            for (conv in s.converters)
                converters[conv.toLowerCase()] = s.converters[conv];
        for (current = dataTypes.shift(); current; )
            if (s.responseFields[current] && (jqXHR[s.responseFields[current]] = response),
            !prev && isSuccess && s.dataFilter && (response = s.dataFilter(response, s.dataType)),
            prev = current,
            current = dataTypes.shift())
                if ("*" === current)
                    current = prev;
                else if ("*" !== prev && prev !== current) {
                    if (conv = converters[prev + " " + current] || converters["* " + current],
                    !conv)
                        for (conv2 in converters)
                            if (tmp = conv2.split(" "),
                            tmp[1] === current && (conv = converters[prev + " " + tmp[0]] || converters["* " + tmp[0]])) {
                                conv === !0 ? conv = converters[conv2] : converters[conv2] !== !0 && (current = tmp[0],
                                dataTypes.unshift(tmp[1]));
                                break
                            }
                    if (conv !== !0)
                        if (conv && s["throws"])
                            response = conv(response);
                        else
                            try {
                                response = conv(response)
                            } catch (e) {
                                return {
                                    state: "parsererror",
                                    error: conv ? e : "No conversion from " + prev + " to " + current
                                }
                            }
                }
        return {
            state: "success",
            data: response
        }
    }
    function getDisplay(elem) {
        return elem.style && elem.style.display || jQuery.css(elem, "display")
    }
    function filterHidden(elem) {
        if (!jQuery.contains(elem.ownerDocument || document, elem))
            return !0;
        for (; elem && 1 === elem.nodeType; ) {
            if ("none" === getDisplay(elem) || "hidden" === elem.type)
                return !0;
            elem = elem.parentNode
        }
        return !1
    }
    function buildParams(prefix, obj, traditional, add) {
        var name;
        if (jQuery.isArray(obj))
            jQuery.each(obj, function(i, v) {
                traditional || rbracket.test(prefix) ? add(prefix, v) : buildParams(prefix + "[" + ("object" == typeof v && null != v ? i : "") + "]", v, traditional, add)
            });
        else if (traditional || "object" !== jQuery.type(obj))
            add(prefix, obj);
        else
            for (name in obj)
                buildParams(prefix + "[" + name + "]", obj[name], traditional, add)
    }
    function createStandardXHR() {
        try {
            return new window.XMLHttpRequest
        } catch (e) {}
    }
    function createActiveXHR() {
        try {
            return new window.ActiveXObject("Microsoft.XMLHTTP")
        } catch (e) {}
    }
    function getWindow(elem) {
        return jQuery.isWindow(elem) ? elem : 9 === elem.nodeType ? elem.defaultView || elem.parentWindow : !1
    }
    var deletedIds = []
      , document = window.document
      , slice = deletedIds.slice
      , concat = deletedIds.concat
      , push = deletedIds.push
      , indexOf = deletedIds.indexOf
      , class2type = {}
      , toString = class2type.toString
      , hasOwn = class2type.hasOwnProperty
      , support = {}
      , version = "1.12.4"
      , jQuery = function(selector, context) {
        return new jQuery.fn.init(selector,context)
    }
      , rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g
      , rmsPrefix = /^-ms-/
      , rdashAlpha = /-([\da-z])/gi
      , fcamelCase = function(all, letter) {
        return letter.toUpperCase()
    };
    jQuery.fn = jQuery.prototype = {
        jquery: version,
        constructor: jQuery,
        selector: "",
        length: 0,
        toArray: function() {
            return slice.call(this)
        },
        get: function(num) {
            return null != num ? 0 > num ? this[num + this.length] : this[num] : slice.call(this)
        },
        pushStack: function(elems) {
            var ret = jQuery.merge(this.constructor(), elems);
            return ret.prevObject = this,
            ret.context = this.context,
            ret
        },
        each: function(callback) {
            return jQuery.each(this, callback)
        },
        map: function(callback) {
            return this.pushStack(jQuery.map(this, function(elem, i) {
                return callback.call(elem, i, elem)
            }))
        },
        slice: function() {
            return this.pushStack(slice.apply(this, arguments))
        },
        first: function() {
            return this.eq(0)
        },
        last: function() {
            return this.eq(-1)
        },
        eq: function(i) {
            var len = this.length
              , j = +i + (0 > i ? len : 0);
            return this.pushStack(j >= 0 && len > j ? [this[j]] : [])
        },
        end: function() {
            return this.prevObject || this.constructor()
        },
        push: push,
        sort: deletedIds.sort,
        splice: deletedIds.splice
    },
    jQuery.extend = jQuery.fn.extend = function() {
        var src, copyIsArray, copy, name, options, clone, target = arguments[0] || {}, i = 1, length = arguments.length, deep = !1;
        for ("boolean" == typeof target && (deep = target,
        target = arguments[i] || {},
        i++),
        "object" == typeof target || jQuery.isFunction(target) || (target = {}),
        i === length && (target = this,
        i--); length > i; i++)
            if (null != (options = arguments[i]))
                for (name in options)
                    src = target[name],
                    copy = options[name],
                    target !== copy && (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy))) ? (copyIsArray ? (copyIsArray = !1,
                    clone = src && jQuery.isArray(src) ? src : []) : clone = src && jQuery.isPlainObject(src) ? src : {},
                    target[name] = jQuery.extend(deep, clone, copy)) : void 0 !== copy && (target[name] = copy));
        return target
    }
    ,
    jQuery.extend({
        expando: "jQuery" + (version + Math.random()).replace(/\D/g, ""),
        isReady: !0,
        error: function(msg) {
            throw new Error(msg)
        },
        noop: function() {},
        isFunction: function(obj) {
            return "function" === jQuery.type(obj)
        },
        isArray: Array.isArray || function(obj) {
            return "array" === jQuery.type(obj)
        }
        ,
        isWindow: function(obj) {
            return null != obj && obj == obj.window
        },
        isNumeric: function(obj) {
            var realStringObj = obj && obj.toString();
            return !jQuery.isArray(obj) && realStringObj - parseFloat(realStringObj) + 1 >= 0
        },
        isEmptyObject: function(obj) {
            var name;
            for (name in obj)
                return !1;
            return !0
        },
        isPlainObject: function(obj) {
            var key;
            if (!obj || "object" !== jQuery.type(obj) || obj.nodeType || jQuery.isWindow(obj))
                return !1;
            try {
                if (obj.constructor && !hasOwn.call(obj, "constructor") && !hasOwn.call(obj.constructor.prototype, "isPrototypeOf"))
                    return !1
            } catch (e) {
                return !1
            }
            if (!support.ownFirst)
                for (key in obj)
                    return hasOwn.call(obj, key);
            for (key in obj)
                ;
            return void 0 === key || hasOwn.call(obj, key)
        },
        type: function(obj) {
            return null == obj ? obj + "" : "object" == typeof obj || "function" == typeof obj ? class2type[toString.call(obj)] || "object" : typeof obj
        },
        globalEval: function(data) {
            data && jQuery.trim(data) && (window.execScript || function(data) {
                window.eval.call(window, data)
            }
            )(data)
        },
        camelCase: function(string) {
            return string.replace(rmsPrefix, "ms-").replace(rdashAlpha, fcamelCase)
        },
        nodeName: function(elem, name) {
            return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase()
        },
        each: function(obj, callback) {
            var length, i = 0;
            if (isArrayLike(obj))
                for (length = obj.length; length > i && callback.call(obj[i], i, obj[i]) !== !1; i++)
                    ;
            else
                for (i in obj)
                    if (callback.call(obj[i], i, obj[i]) === !1)
                        break;
            return obj
        },
        trim: function(text) {
            return null == text ? "" : (text + "").replace(rtrim, "")
        },
        makeArray: function(arr, results) {
            var ret = results || [];
            return null != arr && (isArrayLike(Object(arr)) ? jQuery.merge(ret, "string" == typeof arr ? [arr] : arr) : push.call(ret, arr)),
            ret
        },
        inArray: function(elem, arr, i) {
            var len;
            if (arr) {
                if (indexOf)
                    return indexOf.call(arr, elem, i);
                for (len = arr.length,
                i = i ? 0 > i ? Math.max(0, len + i) : i : 0; len > i; i++)
                    if (i in arr && arr[i] === elem)
                        return i
            }
            return -1
        },
        merge: function(first, second) {
            for (var len = +second.length, j = 0, i = first.length; len > j; )
                first[i++] = second[j++];
            if (len !== len)
                for (; void 0 !== second[j]; )
                    first[i++] = second[j++];
            return first.length = i,
            first
        },
        grep: function(elems, callback, invert) {
            for (var callbackInverse, matches = [], i = 0, length = elems.length, callbackExpect = !invert; length > i; i++)
                callbackInverse = !callback(elems[i], i),
                callbackInverse !== callbackExpect && matches.push(elems[i]);
            return matches
        },
        map: function(elems, callback, arg) {
            var length, value, i = 0, ret = [];
            if (isArrayLike(elems))
                for (length = elems.length; length > i; i++)
                    value = callback(elems[i], i, arg),
                    null != value && ret.push(value);
            else
                for (i in elems)
                    value = callback(elems[i], i, arg),
                    null != value && ret.push(value);
            return concat.apply([], ret)
        },
        guid: 1,
        proxy: function(fn, context) {
            var args, proxy, tmp;
            return "string" == typeof context && (tmp = fn[context],
            context = fn,
            fn = tmp),
            jQuery.isFunction(fn) ? (args = slice.call(arguments, 2),
            proxy = function() {
                return fn.apply(context || this, args.concat(slice.call(arguments)))
            }
            ,
            proxy.guid = fn.guid = fn.guid || jQuery.guid++,
            proxy) : void 0
        },
        now: function() {
            return +new Date
        },
        support: support
    }),
    "function" == typeof Symbol && (jQuery.fn[Symbol.iterator] = deletedIds[Symbol.iterator]),
    jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), function(i, name) {
        class2type["[object " + name + "]"] = name.toLowerCase()
    });
    var Sizzle = function(window) {
        function Sizzle(selector, context, results, seed) {
            var m, i, elem, nid, nidselect, match, groups, newSelector, newContext = context && context.ownerDocument, nodeType = context ? context.nodeType : 9;
            if (results = results || [],
            "string" != typeof selector || !selector || 1 !== nodeType && 9 !== nodeType && 11 !== nodeType)
                return results;
            if (!seed && ((context ? context.ownerDocument || context : preferredDoc) !== document && setDocument(context),
            context = context || document,
            documentIsHTML)) {
                if (11 !== nodeType && (match = rquickExpr.exec(selector)))
                    if (m = match[1]) {
                        if (9 === nodeType) {
                            if (!(elem = context.getElementById(m)))
                                return results;
                            if (elem.id === m)
                                return results.push(elem),
                                results
                        } else if (newContext && (elem = newContext.getElementById(m)) && contains(context, elem) && elem.id === m)
                            return results.push(elem),
                            results
                    } else {
                        if (match[2])
                            return push.apply(results, context.getElementsByTagName(selector)),
                            results;
                        if ((m = match[3]) && support.getElementsByClassName && context.getElementsByClassName)
                            return push.apply(results, context.getElementsByClassName(m)),
                            results
                    }
                if (support.qsa && !compilerCache[selector + " "] && (!rbuggyQSA || !rbuggyQSA.test(selector))) {
                    if (1 !== nodeType)
                        newContext = context,
                        newSelector = selector;
                    else if ("object" !== context.nodeName.toLowerCase()) {
                        for ((nid = context.getAttribute("id")) ? nid = nid.replace(rescape, "\\$&") : context.setAttribute("id", nid = expando),
                        groups = tokenize(selector),
                        i = groups.length,
                        nidselect = ridentifier.test(nid) ? "#" + nid : "[id='" + nid + "']"; i--; )
                            groups[i] = nidselect + " " + toSelector(groups[i]);
                        newSelector = groups.join(","),
                        newContext = rsibling.test(selector) && testContext(context.parentNode) || context
                    }
                    if (newSelector)
                        try {
                            return push.apply(results, newContext.querySelectorAll(newSelector)),
                            results
                        } catch (qsaError) {} finally {
                            nid === expando && context.removeAttribute("id")
                        }
                }
            }
            return select(selector.replace(rtrim, "$1"), context, results, seed)
        }
        function createCache() {
            function cache(key, value) {
                return keys.push(key + " ") > Expr.cacheLength && delete cache[keys.shift()],
                cache[key + " "] = value
            }
            var keys = [];
            return cache
        }
        function markFunction(fn) {
            return fn[expando] = !0,
            fn
        }
        function assert(fn) {
            var div = document.createElement("div");
            try {
                return !!fn(div)
            } catch (e) {
                return !1
            } finally {
                div.parentNode && div.parentNode.removeChild(div),
                div = null
            }
        }
        function addHandle(attrs, handler) {
            for (var arr = attrs.split("|"), i = arr.length; i--; )
                Expr.attrHandle[arr[i]] = handler
        }
        function siblingCheck(a, b) {
            var cur = b && a
              , diff = cur && 1 === a.nodeType && 1 === b.nodeType && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);
            if (diff)
                return diff;
            if (cur)
                for (; cur = cur.nextSibling; )
                    if (cur === b)
                        return -1;
            return a ? 1 : -1
        }
        function createInputPseudo(type) {
            return function(elem) {
                var name = elem.nodeName.toLowerCase();
                return "input" === name && elem.type === type
            }
        }
        function createButtonPseudo(type) {
            return function(elem) {
                var name = elem.nodeName.toLowerCase();
                return ("input" === name || "button" === name) && elem.type === type
            }
        }
        function createPositionalPseudo(fn) {
            return markFunction(function(argument) {
                return argument = +argument,
                markFunction(function(seed, matches) {
                    for (var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length; i--; )
                        seed[j = matchIndexes[i]] && (seed[j] = !(matches[j] = seed[j]))
                })
            })
        }
        function testContext(context) {
            return context && "undefined" != typeof context.getElementsByTagName && context
        }
        function setFilters() {}
        function toSelector(tokens) {
            for (var i = 0, len = tokens.length, selector = ""; len > i; i++)
                selector += tokens[i].value;
            return selector
        }
        function addCombinator(matcher, combinator, base) {
            var dir = combinator.dir
              , checkNonElements = base && "parentNode" === dir
              , doneName = done++;
            return combinator.first ? function(elem, context, xml) {
                for (; elem = elem[dir]; )
                    if (1 === elem.nodeType || checkNonElements)
                        return matcher(elem, context, xml)
            }
            : function(elem, context, xml) {
                var oldCache, uniqueCache, outerCache, newCache = [dirruns, doneName];
                if (xml) {
                    for (; elem = elem[dir]; )
                        if ((1 === elem.nodeType || checkNonElements) && matcher(elem, context, xml))
                            return !0
                } else
                    for (; elem = elem[dir]; )
                        if (1 === elem.nodeType || checkNonElements) {
                            if (outerCache = elem[expando] || (elem[expando] = {}),
                            uniqueCache = outerCache[elem.uniqueID] || (outerCache[elem.uniqueID] = {}),
                            (oldCache = uniqueCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName)
                                return newCache[2] = oldCache[2];
                            if (uniqueCache[dir] = newCache,
                            newCache[2] = matcher(elem, context, xml))
                                return !0
                        }
            }
        }
        function elementMatcher(matchers) {
            return matchers.length > 1 ? function(elem, context, xml) {
                for (var i = matchers.length; i--; )
                    if (!matchers[i](elem, context, xml))
                        return !1;
                return !0
            }
            : matchers[0]
        }
        function multipleContexts(selector, contexts, results) {
            for (var i = 0, len = contexts.length; len > i; i++)
                Sizzle(selector, contexts[i], results);
            return results
        }
        function condense(unmatched, map, filter, context, xml) {
            for (var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = null != map; len > i; i++)
                (elem = unmatched[i]) && (filter && !filter(elem, context, xml) || (newUnmatched.push(elem),
                mapped && map.push(i)));
            return newUnmatched
        }
        function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {
            return postFilter && !postFilter[expando] && (postFilter = setMatcher(postFilter)),
            postFinder && !postFinder[expando] && (postFinder = setMatcher(postFinder, postSelector)),
            markFunction(function(seed, results, context, xml) {
                var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || "*", context.nodeType ? [context] : context, []), matcherIn = !preFilter || !seed && selector ? elems : condense(elems, preMap, preFilter, context, xml), matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;
                if (matcher && matcher(matcherIn, matcherOut, context, xml),
                postFilter)
                    for (temp = condense(matcherOut, postMap),
                    postFilter(temp, [], context, xml),
                    i = temp.length; i--; )
                        (elem = temp[i]) && (matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem));
                if (seed) {
                    if (postFinder || preFilter) {
                        if (postFinder) {
                            for (temp = [],
                            i = matcherOut.length; i--; )
                                (elem = matcherOut[i]) && temp.push(matcherIn[i] = elem);
                            postFinder(null, matcherOut = [], temp, xml)
                        }
                        for (i = matcherOut.length; i--; )
                            (elem = matcherOut[i]) && (temp = postFinder ? indexOf(seed, elem) : preMap[i]) > -1 && (seed[temp] = !(results[temp] = elem))
                    }
                } else
                    matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut),
                    postFinder ? postFinder(null, results, matcherOut, xml) : push.apply(results, matcherOut)
            })
        }
        function matcherFromTokens(tokens) {
            for (var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[" "], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function(elem) {
                return elem === checkContext
            }, implicitRelative, !0), matchAnyContext = addCombinator(function(elem) {
                return indexOf(checkContext, elem) > -1
            }, implicitRelative, !0), matchers = [function(elem, context, xml) {
                var ret = !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));
                return checkContext = null,
                ret
            }
            ]; len > i; i++)
                if (matcher = Expr.relative[tokens[i].type])
                    matchers = [addCombinator(elementMatcher(matchers), matcher)];
                else {
                    if (matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches),
                    matcher[expando]) {
                        for (j = ++i; len > j && !Expr.relative[tokens[j].type]; j++)
                            ;
                        return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({
                            value: " " === tokens[i - 2].type ? "*" : ""
                        })).replace(rtrim, "$1"), matcher, j > i && matcherFromTokens(tokens.slice(i, j)), len > j && matcherFromTokens(tokens = tokens.slice(j)), len > j && toSelector(tokens))
                    }
                    matchers.push(matcher)
                }
            return elementMatcher(matchers)
        }
        function matcherFromGroupMatchers(elementMatchers, setMatchers) {
            var bySet = setMatchers.length > 0
              , byElement = elementMatchers.length > 0
              , superMatcher = function(seed, context, xml, results, outermost) {
                var elem, j, matcher, matchedCount = 0, i = "0", unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find.TAG("*", outermost), dirrunsUnique = dirruns += null == contextBackup ? 1 : Math.random() || .1, len = elems.length;
                for (outermost && (outermostContext = context === document || context || outermost); i !== len && null != (elem = elems[i]); i++) {
                    if (byElement && elem) {
                        for (j = 0,
                        context || elem.ownerDocument === document || (setDocument(elem),
                        xml = !documentIsHTML); matcher = elementMatchers[j++]; )
                            if (matcher(elem, context || document, xml)) {
                                results.push(elem);
                                break
                            }
                        outermost && (dirruns = dirrunsUnique)
                    }
                    bySet && ((elem = !matcher && elem) && matchedCount--,
                    seed && unmatched.push(elem))
                }
                if (matchedCount += i,
                bySet && i !== matchedCount) {
                    for (j = 0; matcher = setMatchers[j++]; )
                        matcher(unmatched, setMatched, context, xml);
                    if (seed) {
                        if (matchedCount > 0)
                            for (; i--; )
                                unmatched[i] || setMatched[i] || (setMatched[i] = pop.call(results));
                        setMatched = condense(setMatched)
                    }
                    push.apply(results, setMatched),
                    outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1 && Sizzle.uniqueSort(results)
                }
                return outermost && (dirruns = dirrunsUnique,
                outermostContext = contextBackup),
                unmatched
            };
            return bySet ? markFunction(superMatcher) : superMatcher
        }
        var i, support, Expr, getText, isXML, tokenize, compile, select, outermostContext, sortInput, hasDuplicate, setDocument, document, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains, expando = "sizzle" + 1 * new Date, preferredDoc = window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function(a, b) {
            return a === b && (hasDuplicate = !0),
            0
        }, MAX_NEGATIVE = 1 << 31, hasOwn = {}.hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push = arr.push, slice = arr.slice, indexOf = function(list, elem) {
            for (var i = 0, len = list.length; len > i; i++)
                if (list[i] === elem)
                    return i;
            return -1
        }, booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", whitespace = "[\\x20\\t\\r\\n\\f]", identifier = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", attributes = "\\[" + whitespace + "*(" + identifier + ")(?:" + whitespace + "*([*^$|!~]?=)" + whitespace + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace + "*\\]", pseudos = ":(" + identifier + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|.*)\\)|)", rwhitespace = new RegExp(whitespace + "+","g"), rtrim = new RegExp("^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$","g"), rcomma = new RegExp("^" + whitespace + "*," + whitespace + "*"), rcombinators = new RegExp("^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*"), rattributeQuotes = new RegExp("=" + whitespace + "*([^\\]'\"]*?)" + whitespace + "*\\]","g"), rpseudo = new RegExp(pseudos), ridentifier = new RegExp("^" + identifier + "$"), matchExpr = {
            ID: new RegExp("^#(" + identifier + ")"),
            CLASS: new RegExp("^\\.(" + identifier + ")"),
            TAG: new RegExp("^(" + identifier + "|[*])"),
            ATTR: new RegExp("^" + attributes),
            PSEUDO: new RegExp("^" + pseudos),
            CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace + "*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace + "*(\\d+)|))" + whitespace + "*\\)|)","i"),
            bool: new RegExp("^(?:" + booleans + ")$","i"),
            needsContext: new RegExp("^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)","i")
        }, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\d$/i, rnative = /^[^{]+\{\s*\[native \w/, rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\/g, runescape = new RegExp("\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)","ig"), funescape = function(_, escaped, escapedWhitespace) {
            var high = "0x" + escaped - 65536;
            return high !== high || escapedWhitespace ? escaped : 0 > high ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, 1023 & high | 56320)
        }, unloadHandler = function() {
            setDocument()
        };
        try {
            push.apply(arr = slice.call(preferredDoc.childNodes), preferredDoc.childNodes),
            arr[preferredDoc.childNodes.length].nodeType
        } catch (e) {
            push = {
                apply: arr.length ? function(target, els) {
                    push_native.apply(target, slice.call(els))
                }
                : function(target, els) {
                    for (var j = target.length, i = 0; target[j++] = els[i++]; )
                        ;
                    target.length = j - 1
                }
            }
        }
        support = Sizzle.support = {},
        isXML = Sizzle.isXML = function(elem) {
            var documentElement = elem && (elem.ownerDocument || elem).documentElement;
            return documentElement ? "HTML" !== documentElement.nodeName : !1
        }
        ,
        setDocument = Sizzle.setDocument = function(node) {
            var hasCompare, parent, doc = node ? node.ownerDocument || node : preferredDoc;
            return doc !== document && 9 === doc.nodeType && doc.documentElement ? (document = doc,
            docElem = document.documentElement,
            documentIsHTML = !isXML(document),
            (parent = document.defaultView) && parent.top !== parent && (parent.addEventListener ? parent.addEventListener("unload", unloadHandler, !1) : parent.attachEvent && parent.attachEvent("onunload", unloadHandler)),
            support.attributes = assert(function(div) {
                return div.className = "i",
                !div.getAttribute("className")
            }),
            support.getElementsByTagName = assert(function(div) {
                return div.appendChild(document.createComment("")),
                !div.getElementsByTagName("*").length
            }),
            support.getElementsByClassName = rnative.test(document.getElementsByClassName),
            support.getById = assert(function(div) {
                return docElem.appendChild(div).id = expando,
                !document.getElementsByName || !document.getElementsByName(expando).length
            }),
            support.getById ? (Expr.find.ID = function(id, context) {
                if ("undefined" != typeof context.getElementById && documentIsHTML) {
                    var m = context.getElementById(id);
                    return m ? [m] : []
                }
            }
            ,
            Expr.filter.ID = function(id) {
                var attrId = id.replace(runescape, funescape);
                return function(elem) {
                    return elem.getAttribute("id") === attrId
                }
            }
            ) : (delete Expr.find.ID,
            Expr.filter.ID = function(id) {
                var attrId = id.replace(runescape, funescape);
                return function(elem) {
                    var node = "undefined" != typeof elem.getAttributeNode && elem.getAttributeNode("id");
                    return node && node.value === attrId
                }
            }
            ),
            Expr.find.TAG = support.getElementsByTagName ? function(tag, context) {
                return "undefined" != typeof context.getElementsByTagName ? context.getElementsByTagName(tag) : support.qsa ? context.querySelectorAll(tag) : void 0
            }
            : function(tag, context) {
                var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);
                if ("*" === tag) {
                    for (; elem = results[i++]; )
                        1 === elem.nodeType && tmp.push(elem);
                    return tmp
                }
                return results
            }
            ,
            Expr.find.CLASS = support.getElementsByClassName && function(className, context) {
                return "undefined" != typeof context.getElementsByClassName && documentIsHTML ? context.getElementsByClassName(className) : void 0
            }
            ,
            rbuggyMatches = [],
            rbuggyQSA = [],
            (support.qsa = rnative.test(document.querySelectorAll)) && (assert(function(div) {
                docElem.appendChild(div).innerHTML = "<a id='" + expando + "'></a><select id='" + expando + "-\r\\' msallowcapture=''><option selected=''></option></select>",
                div.querySelectorAll("[msallowcapture^='']").length && rbuggyQSA.push("[*^$]=" + whitespace + "*(?:''|\"\")"),
                div.querySelectorAll("[selected]").length || rbuggyQSA.push("\\[" + whitespace + "*(?:value|" + booleans + ")"),
                div.querySelectorAll("[id~=" + expando + "-]").length || rbuggyQSA.push("~="),
                div.querySelectorAll(":checked").length || rbuggyQSA.push(":checked"),
                div.querySelectorAll("a#" + expando + "+*").length || rbuggyQSA.push(".#.+[+~]")
            }),
            assert(function(div) {
                var input = document.createElement("input");
                input.setAttribute("type", "hidden"),
                div.appendChild(input).setAttribute("name", "D"),
                div.querySelectorAll("[name=d]").length && rbuggyQSA.push("name" + whitespace + "*[*^$|!~]?="),
                div.querySelectorAll(":enabled").length || rbuggyQSA.push(":enabled", ":disabled"),
                div.querySelectorAll("*,:x"),
                rbuggyQSA.push(",.*:")
            })),
            (support.matchesSelector = rnative.test(matches = docElem.matches || docElem.webkitMatchesSelector || docElem.mozMatchesSelector || docElem.oMatchesSelector || docElem.msMatchesSelector)) && assert(function(div) {
                support.disconnectedMatch = matches.call(div, "div"),
                matches.call(div, "[s!='']:x"),
                rbuggyMatches.push("!=", pseudos)
            }),
            rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join("|")),
            rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join("|")),
            hasCompare = rnative.test(docElem.compareDocumentPosition),
            contains = hasCompare || rnative.test(docElem.contains) ? function(a, b) {
                var adown = 9 === a.nodeType ? a.documentElement : a
                  , bup = b && b.parentNode;
                return a === bup || !(!bup || 1 !== bup.nodeType || !(adown.contains ? adown.contains(bup) : a.compareDocumentPosition && 16 & a.compareDocumentPosition(bup)))
            }
            : function(a, b) {
                if (b)
                    for (; b = b.parentNode; )
                        if (b === a)
                            return !0;
                return !1
            }
            ,
            sortOrder = hasCompare ? function(a, b) {
                if (a === b)
                    return hasDuplicate = !0,
                    0;
                var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
                return compare ? compare : (compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1,
                1 & compare || !support.sortDetached && b.compareDocumentPosition(a) === compare ? a === document || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ? -1 : b === document || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ? 1 : sortInput ? indexOf(sortInput, a) - indexOf(sortInput, b) : 0 : 4 & compare ? -1 : 1)
            }
            : function(a, b) {
                if (a === b)
                    return hasDuplicate = !0,
                    0;
                var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [a], bp = [b];
                if (!aup || !bup)
                    return a === document ? -1 : b === document ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf(sortInput, a) - indexOf(sortInput, b) : 0;
                if (aup === bup)
                    return siblingCheck(a, b);
                for (cur = a; cur = cur.parentNode; )
                    ap.unshift(cur);
                for (cur = b; cur = cur.parentNode; )
                    bp.unshift(cur);
                for (; ap[i] === bp[i]; )
                    i++;
                return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0
            }
            ,
            document) : document
        }
        ,
        Sizzle.matches = function(expr, elements) {
            return Sizzle(expr, null, null, elements)
        }
        ,
        Sizzle.matchesSelector = function(elem, expr) {
            if ((elem.ownerDocument || elem) !== document && setDocument(elem),
            expr = expr.replace(rattributeQuotes, "='$1']"),
            support.matchesSelector && documentIsHTML && !compilerCache[expr + " "] && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr)))
                try {
                    var ret = matches.call(elem, expr);
                    if (ret || support.disconnectedMatch || elem.document && 11 !== elem.document.nodeType)
                        return ret
                } catch (e) {}
            return Sizzle(expr, document, null, [elem]).length > 0
        }
        ,
        Sizzle.contains = function(context, elem) {
            return (context.ownerDocument || context) !== document && setDocument(context),
            contains(context, elem)
        }
        ,
        Sizzle.attr = function(elem, name) {
            (elem.ownerDocument || elem) !== document && setDocument(elem);
            var fn = Expr.attrHandle[name.toLowerCase()]
              , val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : void 0;
            return void 0 !== val ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null
        }
        ,
        Sizzle.error = function(msg) {
            throw new Error("Syntax error, unrecognized expression: " + msg)
        }
        ,
        Sizzle.uniqueSort = function(results) {
            var elem, duplicates = [], j = 0, i = 0;
            if (hasDuplicate = !support.detectDuplicates,
            sortInput = !support.sortStable && results.slice(0),
            results.sort(sortOrder),
            hasDuplicate) {
                for (; elem = results[i++]; )
                    elem === results[i] && (j = duplicates.push(i));
                for (; j--; )
                    results.splice(duplicates[j], 1)
            }
            return sortInput = null,
            results
        }
        ,
        getText = Sizzle.getText = function(elem) {
            var node, ret = "", i = 0, nodeType = elem.nodeType;
            if (nodeType) {
                if (1 === nodeType || 9 === nodeType || 11 === nodeType) {
                    if ("string" == typeof elem.textContent)
                        return elem.textContent;
                    for (elem = elem.firstChild; elem; elem = elem.nextSibling)
                        ret += getText(elem)
                } else if (3 === nodeType || 4 === nodeType)
                    return elem.nodeValue
            } else
                for (; node = elem[i++]; )
                    ret += getText(node);
            return ret
        }
        ,
        Expr = Sizzle.selectors = {
            cacheLength: 50,
            createPseudo: markFunction,
            match: matchExpr,
            attrHandle: {},
            find: {},
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function(match) {
                    return match[1] = match[1].replace(runescape, funescape),
                    match[3] = (match[3] || match[4] || match[5] || "").replace(runescape, funescape),
                    "~=" === match[2] && (match[3] = " " + match[3] + " "),
                    match.slice(0, 4)
                },
                CHILD: function(match) {
                    return match[1] = match[1].toLowerCase(),
                    "nth" === match[1].slice(0, 3) ? (match[3] || Sizzle.error(match[0]),
                    match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * ("even" === match[3] || "odd" === match[3])),
                    match[5] = +(match[7] + match[8] || "odd" === match[3])) : match[3] && Sizzle.error(match[0]),
                    match
                },
                PSEUDO: function(match) {
                    var excess, unquoted = !match[6] && match[2];
                    return matchExpr.CHILD.test(match[0]) ? null : (match[3] ? match[2] = match[4] || match[5] || "" : unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, !0)) && (excess = unquoted.indexOf(")", unquoted.length - excess) - unquoted.length) && (match[0] = match[0].slice(0, excess),
                    match[2] = unquoted.slice(0, excess)),
                    match.slice(0, 3))
                }
            },
            filter: {
                TAG: function(nodeNameSelector) {
                    var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();
                    return "*" === nodeNameSelector ? function() {
                        return !0
                    }
                    : function(elem) {
                        return elem.nodeName && elem.nodeName.toLowerCase() === nodeName
                    }
                },
                CLASS: function(className) {
                    var pattern = classCache[className + " "];
                    return pattern || (pattern = new RegExp("(^|" + whitespace + ")" + className + "(" + whitespace + "|$)")) && classCache(className, function(elem) {
                        return pattern.test("string" == typeof elem.className && elem.className || "undefined" != typeof elem.getAttribute && elem.getAttribute("class") || "")
                    })
                },
                ATTR: function(name, operator, check) {
                    return function(elem) {
                        var result = Sizzle.attr(elem, name);
                        return null == result ? "!=" === operator : operator ? (result += "",
                        "=" === operator ? result === check : "!=" === operator ? result !== check : "^=" === operator ? check && 0 === result.indexOf(check) : "*=" === operator ? check && result.indexOf(check) > -1 : "$=" === operator ? check && result.slice(-check.length) === check : "~=" === operator ? (" " + result.replace(rwhitespace, " ") + " ").indexOf(check) > -1 : "|=" === operator ? result === check || result.slice(0, check.length + 1) === check + "-" : !1) : !0
                    }
                },
                CHILD: function(type, what, argument, first, last) {
                    var simple = "nth" !== type.slice(0, 3)
                      , forward = "last" !== type.slice(-4)
                      , ofType = "of-type" === what;
                    return 1 === first && 0 === last ? function(elem) {
                        return !!elem.parentNode
                    }
                    : function(elem, context, xml) {
                        var cache, uniqueCache, outerCache, node, nodeIndex, start, dir = simple !== forward ? "nextSibling" : "previousSibling", parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType, diff = !1;
                        if (parent) {
                            if (simple) {
                                for (; dir; ) {
                                    for (node = elem; node = node[dir]; )
                                        if (ofType ? node.nodeName.toLowerCase() === name : 1 === node.nodeType)
                                            return !1;
                                    start = dir = "only" === type && !start && "nextSibling"
                                }
                                return !0
                            }
                            if (start = [forward ? parent.firstChild : parent.lastChild],
                            forward && useCache) {
                                for (node = parent,
                                outerCache = node[expando] || (node[expando] = {}),
                                uniqueCache = outerCache[node.uniqueID] || (outerCache[node.uniqueID] = {}),
                                cache = uniqueCache[type] || [],
                                nodeIndex = cache[0] === dirruns && cache[1],
                                diff = nodeIndex && cache[2],
                                node = nodeIndex && parent.childNodes[nodeIndex]; node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop(); )
                                    if (1 === node.nodeType && ++diff && node === elem) {
                                        uniqueCache[type] = [dirruns, nodeIndex, diff];
                                        break
                                    }
                            } else if (useCache && (node = elem,
                            outerCache = node[expando] || (node[expando] = {}),
                            uniqueCache = outerCache[node.uniqueID] || (outerCache[node.uniqueID] = {}),
                            cache = uniqueCache[type] || [],
                            nodeIndex = cache[0] === dirruns && cache[1],
                            diff = nodeIndex),
                            diff === !1)
                                for (; (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) && ((ofType ? node.nodeName.toLowerCase() !== name : 1 !== node.nodeType) || !++diff || (useCache && (outerCache = node[expando] || (node[expando] = {}),
                                uniqueCache = outerCache[node.uniqueID] || (outerCache[node.uniqueID] = {}),
                                uniqueCache[type] = [dirruns, diff]),
                                node !== elem)); )
                                    ;
                            return diff -= last,
                            diff === first || diff % first === 0 && diff / first >= 0
                        }
                    }
                },
                PSEUDO: function(pseudo, argument) {
                    var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error("unsupported pseudo: " + pseudo);
                    return fn[expando] ? fn(argument) : fn.length > 1 ? (args = [pseudo, pseudo, "", argument],
                    Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function(seed, matches) {
                        for (var idx, matched = fn(seed, argument), i = matched.length; i--; )
                            idx = indexOf(seed, matched[i]),
                            seed[idx] = !(matches[idx] = matched[i])
                    }) : function(elem) {
                        return fn(elem, 0, args)
                    }
                    ) : fn
                }
            },
            pseudos: {
                not: markFunction(function(selector) {
                    var input = []
                      , results = []
                      , matcher = compile(selector.replace(rtrim, "$1"));
                    return matcher[expando] ? markFunction(function(seed, matches, context, xml) {
                        for (var elem, unmatched = matcher(seed, null, xml, []), i = seed.length; i--; )
                            (elem = unmatched[i]) && (seed[i] = !(matches[i] = elem))
                    }) : function(elem, context, xml) {
                        return input[0] = elem,
                        matcher(input, null, xml, results),
                        input[0] = null,
                        !results.pop()
                    }
                }),
                has: markFunction(function(selector) {
                    return function(elem) {
                        return Sizzle(selector, elem).length > 0
                    }
                }),
                contains: markFunction(function(text) {
                    return text = text.replace(runescape, funescape),
                    function(elem) {
                        return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1
                    }
                }),
                lang: markFunction(function(lang) {
                    return ridentifier.test(lang || "") || Sizzle.error("unsupported lang: " + lang),
                    lang = lang.replace(runescape, funescape).toLowerCase(),
                    function(elem) {
                        var elemLang;
                        do
                            if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute("xml:lang") || elem.getAttribute("lang"))
                                return elemLang = elemLang.toLowerCase(),
                                elemLang === lang || 0 === elemLang.indexOf(lang + "-");
                        while ((elem = elem.parentNode) && 1 === elem.nodeType);
                        return !1
                    }
                }),
                target: function(elem) {
                    var hash = window.location && window.location.hash;
                    return hash && hash.slice(1) === elem.id
                },
                root: function(elem) {
                    return elem === docElem
                },
                focus: function(elem) {
                    return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex)
                },
                enabled: function(elem) {
                    return elem.disabled === !1
                },
                disabled: function(elem) {
                    return elem.disabled === !0
                },
                checked: function(elem) {
                    var nodeName = elem.nodeName.toLowerCase();
                    return "input" === nodeName && !!elem.checked || "option" === nodeName && !!elem.selected
                },
                selected: function(elem) {
                    return elem.parentNode && elem.parentNode.selectedIndex,
                    elem.selected === !0
                },
                empty: function(elem) {
                    for (elem = elem.firstChild; elem; elem = elem.nextSibling)
                        if (elem.nodeType < 6)
                            return !1;
                    return !0
                },
                parent: function(elem) {
                    return !Expr.pseudos.empty(elem)
                },
                header: function(elem) {
                    return rheader.test(elem.nodeName)
                },
                input: function(elem) {
                    return rinputs.test(elem.nodeName)
                },
                button: function(elem) {
                    var name = elem.nodeName.toLowerCase();
                    return "input" === name && "button" === elem.type || "button" === name
                },
                text: function(elem) {
                    var attr;
                    return "input" === elem.nodeName.toLowerCase() && "text" === elem.type && (null == (attr = elem.getAttribute("type")) || "text" === attr.toLowerCase())
                },
                first: createPositionalPseudo(function() {
                    return [0]
                }),
                last: createPositionalPseudo(function(matchIndexes, length) {
                    return [length - 1]
                }),
                eq: createPositionalPseudo(function(matchIndexes, length, argument) {
                    return [0 > argument ? argument + length : argument]
                }),
                even: createPositionalPseudo(function(matchIndexes, length) {
                    for (var i = 0; length > i; i += 2)
                        matchIndexes.push(i);
                    return matchIndexes
                }),
                odd: createPositionalPseudo(function(matchIndexes, length) {
                    for (var i = 1; length > i; i += 2)
                        matchIndexes.push(i);
                    return matchIndexes
                }),
                lt: createPositionalPseudo(function(matchIndexes, length, argument) {
                    for (var i = 0 > argument ? argument + length : argument; --i >= 0; )
                        matchIndexes.push(i);
                    return matchIndexes
                }),
                gt: createPositionalPseudo(function(matchIndexes, length, argument) {
                    for (var i = 0 > argument ? argument + length : argument; ++i < length; )
                        matchIndexes.push(i);
                    return matchIndexes
                })
            }
        },
        Expr.pseudos.nth = Expr.pseudos.eq;
        for (i in {
            radio: !0,
            checkbox: !0,
            file: !0,
            password: !0,
            image: !0
        })
            Expr.pseudos[i] = createInputPseudo(i);
        for (i in {
            submit: !0,
            reset: !0
        })
            Expr.pseudos[i] = createButtonPseudo(i);
        return setFilters.prototype = Expr.filters = Expr.pseudos,
        Expr.setFilters = new setFilters,
        tokenize = Sizzle.tokenize = function(selector, parseOnly) {
            var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + " "];
            if (cached)
                return parseOnly ? 0 : cached.slice(0);
            for (soFar = selector,
            groups = [],
            preFilters = Expr.preFilter; soFar; ) {
                matched && !(match = rcomma.exec(soFar)) || (match && (soFar = soFar.slice(match[0].length) || soFar),
                groups.push(tokens = [])),
                matched = !1,
                (match = rcombinators.exec(soFar)) && (matched = match.shift(),
                tokens.push({
                    value: matched,
                    type: match[0].replace(rtrim, " ")
                }),
                soFar = soFar.slice(matched.length));
                for (type in Expr.filter)
                    !(match = matchExpr[type].exec(soFar)) || preFilters[type] && !(match = preFilters[type](match)) || (matched = match.shift(),
                    tokens.push({
                        value: matched,
                        type: type,
                        matches: match
                    }),
                    soFar = soFar.slice(matched.length));
                if (!matched)
                    break
            }
            return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0)
        }
        ,
        compile = Sizzle.compile = function(selector, match) {
            var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + " "];
            if (!cached) {
                for (match || (match = tokenize(selector)),
                i = match.length; i--; )
                    cached = matcherFromTokens(match[i]),
                    cached[expando] ? setMatchers.push(cached) : elementMatchers.push(cached);
                cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers)),
                cached.selector = selector
            }
            return cached
        }
        ,
        select = Sizzle.select = function(selector, context, results, seed) {
            var i, tokens, token, type, find, compiled = "function" == typeof selector && selector, match = !seed && tokenize(selector = compiled.selector || selector);
            if (results = results || [],
            1 === match.length) {
                if (tokens = match[0] = match[0].slice(0),
                tokens.length > 2 && "ID" === (token = tokens[0]).type && support.getById && 9 === context.nodeType && documentIsHTML && Expr.relative[tokens[1].type]) {
                    if (context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0],
                    !context)
                        return results;
                    compiled && (context = context.parentNode),
                    selector = selector.slice(tokens.shift().value.length)
                }
                for (i = matchExpr.needsContext.test(selector) ? 0 : tokens.length; i-- && (token = tokens[i],
                !Expr.relative[type = token.type]); )
                    if ((find = Expr.find[type]) && (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context))) {
                        if (tokens.splice(i, 1),
                        selector = seed.length && toSelector(tokens),
                        !selector)
                            return push.apply(results, seed),
                            results;
                        break
                    }
            }
            return (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, !context || rsibling.test(selector) && testContext(context.parentNode) || context),
            results
        }
        ,
        support.sortStable = expando.split("").sort(sortOrder).join("") === expando,
        support.detectDuplicates = !!hasDuplicate,
        setDocument(),
        support.sortDetached = assert(function(div1) {
            return 1 & div1.compareDocumentPosition(document.createElement("div"))
        }),
        assert(function(div) {
            return div.innerHTML = "<a href='#'></a>",
            "#" === div.firstChild.getAttribute("href")
        }) || addHandle("type|href|height|width", function(elem, name, isXML) {
            return isXML ? void 0 : elem.getAttribute(name, "type" === name.toLowerCase() ? 1 : 2)
        }),
        support.attributes && assert(function(div) {
            return div.innerHTML = "<input/>",
            div.firstChild.setAttribute("value", ""),
            "" === div.firstChild.getAttribute("value")
        }) || addHandle("value", function(elem, name, isXML) {
            return isXML || "input" !== elem.nodeName.toLowerCase() ? void 0 : elem.defaultValue
        }),
        assert(function(div) {
            return null == div.getAttribute("disabled")
        }) || addHandle(booleans, function(elem, name, isXML) {
            var val;
            return isXML ? void 0 : elem[name] === !0 ? name.toLowerCase() : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null
        }),
        Sizzle
    }(window);
    jQuery.find = Sizzle,
    jQuery.expr = Sizzle.selectors,
    jQuery.expr[":"] = jQuery.expr.pseudos,
    jQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort,
    jQuery.text = Sizzle.getText,
    jQuery.isXMLDoc = Sizzle.isXML,
    jQuery.contains = Sizzle.contains;
    var dir = function(elem, dir, until) {
        for (var matched = [], truncate = void 0 !== until; (elem = elem[dir]) && 9 !== elem.nodeType; )
            if (1 === elem.nodeType) {
                if (truncate && jQuery(elem).is(until))
                    break;
                matched.push(elem)
            }
        return matched
    }
      , siblings = function(n, elem) {
        for (var matched = []; n; n = n.nextSibling)
            1 === n.nodeType && n !== elem && matched.push(n);
        return matched
    }
      , rneedsContext = jQuery.expr.match.needsContext
      , rsingleTag = /^<([\w-]+)\s*\/?>(?:<\/\1>|)$/
      , risSimple = /^.[^:#\[\.,]*$/;
    jQuery.filter = function(expr, elems, not) {
        var elem = elems[0];
        return not && (expr = ":not(" + expr + ")"),
        1 === elems.length && 1 === elem.nodeType ? jQuery.find.matchesSelector(elem, expr) ? [elem] : [] : jQuery.find.matches(expr, jQuery.grep(elems, function(elem) {
            return 1 === elem.nodeType
        }))
    }
    ,
    jQuery.fn.extend({
        find: function(selector) {
            var i, ret = [], self = this, len = self.length;
            if ("string" != typeof selector)
                return this.pushStack(jQuery(selector).filter(function() {
                    for (i = 0; len > i; i++)
                        if (jQuery.contains(self[i], this))
                            return !0
                }));
            for (i = 0; len > i; i++)
                jQuery.find(selector, self[i], ret);
            return ret = this.pushStack(len > 1 ? jQuery.unique(ret) : ret),
            ret.selector = this.selector ? this.selector + " " + selector : selector,
            ret
        },
        filter: function(selector) {
            return this.pushStack(winnow(this, selector || [], !1))
        },
        not: function(selector) {
            return this.pushStack(winnow(this, selector || [], !0))
        },
        is: function(selector) {
            return !!winnow(this, "string" == typeof selector && rneedsContext.test(selector) ? jQuery(selector) : selector || [], !1).length
        }
    });
    var rootjQuery, rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/, init = jQuery.fn.init = function(selector, context, root) {
        var match, elem;
        if (!selector)
            return this;
        if (root = root || rootjQuery,
        "string" == typeof selector) {
            if (match = "<" === selector.charAt(0) && ">" === selector.charAt(selector.length - 1) && selector.length >= 3 ? [null, selector, null] : rquickExpr.exec(selector),
            !match || !match[1] && context)
                return !context || context.jquery ? (context || root).find(selector) : this.constructor(context).find(selector);
            if (match[1]) {
                if (context = context instanceof jQuery ? context[0] : context,
                jQuery.merge(this, jQuery.parseHTML(match[1], context && context.nodeType ? context.ownerDocument || context : document, !0)),
                rsingleTag.test(match[1]) && jQuery.isPlainObject(context))
                    for (match in context)
                        jQuery.isFunction(this[match]) ? this[match](context[match]) : this.attr(match, context[match]);
                return this
            }
            if (elem = document.getElementById(match[2]),
            elem && elem.parentNode) {
                if (elem.id !== match[2])
                    return rootjQuery.find(selector);
                this.length = 1,
                this[0] = elem
            }
            return this.context = document,
            this.selector = selector,
            this
        }
        return selector.nodeType ? (this.context = this[0] = selector,
        this.length = 1,
        this) : jQuery.isFunction(selector) ? "undefined" != typeof root.ready ? root.ready(selector) : selector(jQuery) : (void 0 !== selector.selector && (this.selector = selector.selector,
        this.context = selector.context),
        jQuery.makeArray(selector, this))
    }
    ;
    init.prototype = jQuery.fn,
    rootjQuery = jQuery(document);
    var rparentsprev = /^(?:parents|prev(?:Until|All))/
      , guaranteedUnique = {
        children: !0,
        contents: !0,
        next: !0,
        prev: !0
    };
    jQuery.fn.extend({
        has: function(target) {
            var i, targets = jQuery(target, this), len = targets.length;
            return this.filter(function() {
                for (i = 0; len > i; i++)
                    if (jQuery.contains(this, targets[i]))
                        return !0
            })
        },
        closest: function(selectors, context) {
            for (var cur, i = 0, l = this.length, matched = [], pos = rneedsContext.test(selectors) || "string" != typeof selectors ? jQuery(selectors, context || this.context) : 0; l > i; i++)
                for (cur = this[i]; cur && cur !== context; cur = cur.parentNode)
                    if (cur.nodeType < 11 && (pos ? pos.index(cur) > -1 : 1 === cur.nodeType && jQuery.find.matchesSelector(cur, selectors))) {
                        matched.push(cur);
                        break
                    }
            return this.pushStack(matched.length > 1 ? jQuery.uniqueSort(matched) : matched)
        },
        index: function(elem) {
            return elem ? "string" == typeof elem ? jQuery.inArray(this[0], jQuery(elem)) : jQuery.inArray(elem.jquery ? elem[0] : elem, this) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
        },
        add: function(selector, context) {
            return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(), jQuery(selector, context))))
        },
        addBack: function(selector) {
            return this.add(null == selector ? this.prevObject : this.prevObject.filter(selector))
        }
    }),
    jQuery.each({
        parent: function(elem) {
            var parent = elem.parentNode;
            return parent && 11 !== parent.nodeType ? parent : null
        },
        parents: function(elem) {
            return dir(elem, "parentNode")
        },
        parentsUntil: function(elem, i, until) {
            return dir(elem, "parentNode", until)
        },
        next: function(elem) {
            return sibling(elem, "nextSibling")
        },
        prev: function(elem) {
            return sibling(elem, "previousSibling")
        },
        nextAll: function(elem) {
            return dir(elem, "nextSibling")
        },
        prevAll: function(elem) {
            return dir(elem, "previousSibling")
        },
        nextUntil: function(elem, i, until) {
            return dir(elem, "nextSibling", until)
        },
        prevUntil: function(elem, i, until) {
            return dir(elem, "previousSibling", until)
        },
        siblings: function(elem) {
            return siblings((elem.parentNode || {}).firstChild, elem)
        },
        children: function(elem) {
            return siblings(elem.firstChild)
        },
        contents: function(elem) {
            return jQuery.nodeName(elem, "iframe") ? elem.contentDocument || elem.contentWindow.document : jQuery.merge([], elem.childNodes)
        }
    }, function(name, fn) {
        jQuery.fn[name] = function(until, selector) {
            var ret = jQuery.map(this, fn, until);
            return "Until" !== name.slice(-5) && (selector = until),
            selector && "string" == typeof selector && (ret = jQuery.filter(selector, ret)),
            this.length > 1 && (guaranteedUnique[name] || (ret = jQuery.uniqueSort(ret)),
            rparentsprev.test(name) && (ret = ret.reverse())),
            this.pushStack(ret)
        }
    });
    var rnotwhite = /\S+/g;
    jQuery.Callbacks = function(options) {
        options = "string" == typeof options ? createOptions(options) : jQuery.extend({}, options);
        var firing, memory, fired, locked, list = [], queue = [], firingIndex = -1, fire = function() {
            for (locked = options.once,
            fired = firing = !0; queue.length; firingIndex = -1)
                for (memory = queue.shift(); ++firingIndex < list.length; )
                    list[firingIndex].apply(memory[0], memory[1]) === !1 && options.stopOnFalse && (firingIndex = list.length,
                    memory = !1);
            options.memory || (memory = !1),
            firing = !1,
            locked && (list = memory ? [] : "")
        }, self = {
            add: function() {
                return list && (memory && !firing && (firingIndex = list.length - 1,
                queue.push(memory)),
                function add(args) {
                    jQuery.each(args, function(_, arg) {
                        jQuery.isFunction(arg) ? options.unique && self.has(arg) || list.push(arg) : arg && arg.length && "string" !== jQuery.type(arg) && add(arg);
                    })
                }(arguments),
                memory && !firing && fire()),
                this
            },
            remove: function() {
                return jQuery.each(arguments, function(_, arg) {
                    for (var index; (index = jQuery.inArray(arg, list, index)) > -1; )
                        list.splice(index, 1),
                        firingIndex >= index && firingIndex--
                }),
                this
            },
            has: function(fn) {
                return fn ? jQuery.inArray(fn, list) > -1 : list.length > 0
            },
            empty: function() {
                return list && (list = []),
                this
            },
            disable: function() {
                return locked = queue = [],
                list = memory = "",
                this
            },
            disabled: function() {
                return !list
            },
            lock: function() {
                return locked = !0,
                memory || self.disable(),
                this
            },
            locked: function() {
                return !!locked
            },
            fireWith: function(context, args) {
                return locked || (args = args || [],
                args = [context, args.slice ? args.slice() : args],
                queue.push(args),
                firing || fire()),
                this
            },
            fire: function() {
                return self.fireWith(this, arguments),
                this
            },
            fired: function() {
                return !!fired
            }
        };
        return self
    }
    ,
    jQuery.extend({
        Deferred: function(func) {
            var tuples = [["resolve", "done", jQuery.Callbacks("once memory"), "resolved"], ["reject", "fail", jQuery.Callbacks("once memory"), "rejected"], ["notify", "progress", jQuery.Callbacks("memory")]]
              , state = "pending"
              , promise = {
                state: function() {
                    return state
                },
                always: function() {
                    return deferred.done(arguments).fail(arguments),
                    this
                },
                then: function() {
                    var fns = arguments;
                    return jQuery.Deferred(function(newDefer) {
                        jQuery.each(tuples, function(i, tuple) {
                            var fn = jQuery.isFunction(fns[i]) && fns[i];
                            deferred[tuple[1]](function() {
                                var returned = fn && fn.apply(this, arguments);
                                returned && jQuery.isFunction(returned.promise) ? returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject) : newDefer[tuple[0] + "With"](this === promise ? newDefer.promise() : this, fn ? [returned] : arguments)
                            })
                        }),
                        fns = null
                    }).promise()
                },
                promise: function(obj) {
                    return null != obj ? jQuery.extend(obj, promise) : promise
                }
            }
              , deferred = {};
            return promise.pipe = promise.then,
            jQuery.each(tuples, function(i, tuple) {
                var list = tuple[2]
                  , stateString = tuple[3];
                promise[tuple[1]] = list.add,
                stateString && list.add(function() {
                    state = stateString
                }, tuples[1 ^ i][2].disable, tuples[2][2].lock),
                deferred[tuple[0]] = function() {
                    return deferred[tuple[0] + "With"](this === deferred ? promise : this, arguments),
                    this
                }
                ,
                deferred[tuple[0] + "With"] = list.fireWith
            }),
            promise.promise(deferred),
            func && func.call(deferred, deferred),
            deferred
        },
        when: function(subordinate) {
            var progressValues, progressContexts, resolveContexts, i = 0, resolveValues = slice.call(arguments), length = resolveValues.length, remaining = 1 !== length || subordinate && jQuery.isFunction(subordinate.promise) ? length : 0, deferred = 1 === remaining ? subordinate : jQuery.Deferred(), updateFunc = function(i, contexts, values) {
                return function(value) {
                    contexts[i] = this,
                    values[i] = arguments.length > 1 ? slice.call(arguments) : value,
                    values === progressValues ? deferred.notifyWith(contexts, values) : --remaining || deferred.resolveWith(contexts, values)
                }
            };
            if (length > 1)
                for (progressValues = new Array(length),
                progressContexts = new Array(length),
                resolveContexts = new Array(length); length > i; i++)
                    resolveValues[i] && jQuery.isFunction(resolveValues[i].promise) ? resolveValues[i].promise().progress(updateFunc(i, progressContexts, progressValues)).done(updateFunc(i, resolveContexts, resolveValues)).fail(deferred.reject) : --remaining;
            return remaining || deferred.resolveWith(resolveContexts, resolveValues),
            deferred.promise()
        }
    });
    var readyList;
    jQuery.fn.ready = function(fn) {
        return jQuery.ready.promise().done(fn),
        this
    }
    ,
    jQuery.extend({
        isReady: !1,
        readyWait: 1,
        holdReady: function(hold) {
            hold ? jQuery.readyWait++ : jQuery.ready(!0)
        },
        ready: function(wait) {
            (wait === !0 ? --jQuery.readyWait : jQuery.isReady) || (jQuery.isReady = !0,
            wait !== !0 && --jQuery.readyWait > 0 || (readyList.resolveWith(document, [jQuery]),
            jQuery.fn.triggerHandler && (jQuery(document).triggerHandler("ready"),
            jQuery(document).off("ready"))))
        }
    }),
    jQuery.ready.promise = function(obj) {
        if (!readyList)
            if (readyList = jQuery.Deferred(),
            "complete" === document.readyState || "loading" !== document.readyState && !document.documentElement.doScroll)
                window.setTimeout(jQuery.ready);
            else if (document.addEventListener)
                document.addEventListener("DOMContentLoaded", completed),
                window.addEventListener("load", completed);
            else {
                document.attachEvent("onreadystatechange", completed),
                window.attachEvent("onload", completed);
                var top = !1;
                try {
                    top = null == window.frameElement && document.documentElement
                } catch (e) {}
                top && top.doScroll && !function doScrollCheck() {
                    if (!jQuery.isReady) {
                        try {
                            top.doScroll("left")
                        } catch (e) {
                            return window.setTimeout(doScrollCheck, 50)
                        }
                        detach(),
                        jQuery.ready()
                    }
                }()
            }
        return readyList.promise(obj)
    }
    ,
    jQuery.ready.promise();
    var i;
    for (i in jQuery(support))
        break;
    support.ownFirst = "0" === i,
    support.inlineBlockNeedsLayout = !1,
    jQuery(function() {
        var val, div, body, container;
        body = document.getElementsByTagName("body")[0],
        body && body.style && (div = document.createElement("div"),
        container = document.createElement("div"),
        container.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px",
        body.appendChild(container).appendChild(div),
        "undefined" != typeof div.style.zoom && (div.style.cssText = "display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",
        support.inlineBlockNeedsLayout = val = 3 === div.offsetWidth,
        val && (body.style.zoom = 1)),
        body.removeChild(container))
    }),
    function() {
        var div = document.createElement("div");
        support.deleteExpando = !0;
        try {
            delete div.test
        } catch (e) {
            support.deleteExpando = !1
        }
        div = null
    }();
    var acceptData = function(elem) {
        var noData = jQuery.noData[(elem.nodeName + " ").toLowerCase()]
          , nodeType = +elem.nodeType || 1;
        return 1 !== nodeType && 9 !== nodeType ? !1 : !noData || noData !== !0 && elem.getAttribute("classid") === noData
    }
      , rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/
      , rmultiDash = /([A-Z])/g;
    jQuery.extend({
        cache: {},
        noData: {
            "applet ": !0,
            "embed ": !0,
            "object ": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
        },
        hasData: function(elem) {
            return elem = elem.nodeType ? jQuery.cache[elem[jQuery.expando]] : elem[jQuery.expando],
            !!elem && !isEmptyDataObject(elem)
        },
        data: function(elem, name, data) {
            return internalData(elem, name, data)
        },
        removeData: function(elem, name) {
            return internalRemoveData(elem, name)
        },
        _data: function(elem, name, data) {
            return internalData(elem, name, data, !0)
        },
        _removeData: function(elem, name) {
            return internalRemoveData(elem, name, !0)
        }
    }),
    jQuery.fn.extend({
        data: function(key, value) {
            var i, name, data, elem = this[0], attrs = elem && elem.attributes;
            if (void 0 === key) {
                if (this.length && (data = jQuery.data(elem),
                1 === elem.nodeType && !jQuery._data(elem, "parsedAttrs"))) {
                    for (i = attrs.length; i--; )
                        attrs[i] && (name = attrs[i].name,
                        0 === name.indexOf("data-") && (name = jQuery.camelCase(name.slice(5)),
                        dataAttr(elem, name, data[name])));
                    jQuery._data(elem, "parsedAttrs", !0)
                }
                return data
            }
            return "object" == typeof key ? this.each(function() {
                jQuery.data(this, key)
            }) : arguments.length > 1 ? this.each(function() {
                jQuery.data(this, key, value)
            }) : elem ? dataAttr(elem, key, jQuery.data(elem, key)) : void 0
        },
        removeData: function(key) {
            return this.each(function() {
                jQuery.removeData(this, key)
            })
        }
    }),
    jQuery.extend({
        queue: function(elem, type, data) {
            var queue;
            return elem ? (type = (type || "fx") + "queue",
            queue = jQuery._data(elem, type),
            data && (!queue || jQuery.isArray(data) ? queue = jQuery._data(elem, type, jQuery.makeArray(data)) : queue.push(data)),
            queue || []) : void 0
        },
        dequeue: function(elem, type) {
            type = type || "fx";
            var queue = jQuery.queue(elem, type)
              , startLength = queue.length
              , fn = queue.shift()
              , hooks = jQuery._queueHooks(elem, type)
              , next = function() {
                jQuery.dequeue(elem, type)
            };
            "inprogress" === fn && (fn = queue.shift(),
            startLength--),
            fn && ("fx" === type && queue.unshift("inprogress"),
            delete hooks.stop,
            fn.call(elem, next, hooks)),
            !startLength && hooks && hooks.empty.fire()
        },
        _queueHooks: function(elem, type) {
            var key = type + "queueHooks";
            return jQuery._data(elem, key) || jQuery._data(elem, key, {
                empty: jQuery.Callbacks("once memory").add(function() {
                    jQuery._removeData(elem, type + "queue"),
                    jQuery._removeData(elem, key)
                })
            })
        }
    }),
    jQuery.fn.extend({
        queue: function(type, data) {
            var setter = 2;
            return "string" != typeof type && (data = type,
            type = "fx",
            setter--),
            arguments.length < setter ? jQuery.queue(this[0], type) : void 0 === data ? this : this.each(function() {
                var queue = jQuery.queue(this, type, data);
                jQuery._queueHooks(this, type),
                "fx" === type && "inprogress" !== queue[0] && jQuery.dequeue(this, type)
            })
        },
        dequeue: function(type) {
            return this.each(function() {
                jQuery.dequeue(this, type)
            })
        },
        clearQueue: function(type) {
            return this.queue(type || "fx", [])
        },
        promise: function(type, obj) {
            var tmp, count = 1, defer = jQuery.Deferred(), elements = this, i = this.length, resolve = function() {
                --count || defer.resolveWith(elements, [elements])
            };
            for ("string" != typeof type && (obj = type,
            type = void 0),
            type = type || "fx"; i--; )
                tmp = jQuery._data(elements[i], type + "queueHooks"),
                tmp && tmp.empty && (count++,
                tmp.empty.add(resolve));
            return resolve(),
            defer.promise(obj)
        }
    }),
    function() {
        var shrinkWrapBlocksVal;
        support.shrinkWrapBlocks = function() {
            if (null != shrinkWrapBlocksVal)
                return shrinkWrapBlocksVal;
            shrinkWrapBlocksVal = !1;
            var div, body, container;
            return body = document.getElementsByTagName("body")[0],
            body && body.style ? (div = document.createElement("div"),
            container = document.createElement("div"),
            container.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px",
            body.appendChild(container).appendChild(div),
            "undefined" != typeof div.style.zoom && (div.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",
            div.appendChild(document.createElement("div")).style.width = "5px",
            shrinkWrapBlocksVal = 3 !== div.offsetWidth),
            body.removeChild(container),
            shrinkWrapBlocksVal) : void 0
        }
    }();
    var pnum = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source
      , rcssNum = new RegExp("^(?:([+-])=|)(" + pnum + ")([a-z%]*)$","i")
      , cssExpand = ["Top", "Right", "Bottom", "Left"]
      , isHidden = function(elem, el) {
        return elem = el || elem,
        "none" === jQuery.css(elem, "display") || !jQuery.contains(elem.ownerDocument, elem)
    }
      , access = function(elems, fn, key, value, chainable, emptyGet, raw) {
        var i = 0
          , length = elems.length
          , bulk = null == key;
        if ("object" === jQuery.type(key)) {
            chainable = !0;
            for (i in key)
                access(elems, fn, i, key[i], !0, emptyGet, raw)
        } else if (void 0 !== value && (chainable = !0,
        jQuery.isFunction(value) || (raw = !0),
        bulk && (raw ? (fn.call(elems, value),
        fn = null) : (bulk = fn,
        fn = function(elem, key, value) {
            return bulk.call(jQuery(elem), value)
        }
        )),
        fn))
            for (; length > i; i++)
                fn(elems[i], key, raw ? value : value.call(elems[i], i, fn(elems[i], key)));
        return chainable ? elems : bulk ? fn.call(elems) : length ? fn(elems[0], key) : emptyGet
    }
      , rcheckableType = /^(?:checkbox|radio)$/i
      , rtagName = /<([\w:-]+)/
      , rscriptType = /^$|\/(?:java|ecma)script/i
      , rleadingWhitespace = /^\s+/
      , nodeNames = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";
    !function() {
        var div = document.createElement("div")
          , fragment = document.createDocumentFragment()
          , input = document.createElement("input");
        div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",
        support.leadingWhitespace = 3 === div.firstChild.nodeType,
        support.tbody = !div.getElementsByTagName("tbody").length,
        support.htmlSerialize = !!div.getElementsByTagName("link").length,
        support.html5Clone = "<:nav></:nav>" !== document.createElement("nav").cloneNode(!0).outerHTML,
        input.type = "checkbox",
        input.checked = !0,
        fragment.appendChild(input),
        support.appendChecked = input.checked,
        div.innerHTML = "<textarea>x</textarea>",
        support.noCloneChecked = !!div.cloneNode(!0).lastChild.defaultValue,
        fragment.appendChild(div),
        input = document.createElement("input"),
        input.setAttribute("type", "radio"),
        input.setAttribute("checked", "checked"),
        input.setAttribute("name", "t"),
        div.appendChild(input),
        support.checkClone = div.cloneNode(!0).cloneNode(!0).lastChild.checked,
        support.noCloneEvent = !!div.addEventListener,
        div[jQuery.expando] = 1,
        support.attributes = !div.getAttribute(jQuery.expando)
    }();
    var wrapMap = {
        option: [1, "<select multiple='multiple'>", "</select>"],
        legend: [1, "<fieldset>", "</fieldset>"],
        area: [1, "<map>", "</map>"],
        param: [1, "<object>", "</object>"],
        thead: [1, "<table>", "</table>"],
        tr: [2, "<table><tbody>", "</tbody></table>"],
        col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
        td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
        _default: support.htmlSerialize ? [0, "", ""] : [1, "X<div>", "</div>"]
    };
    wrapMap.optgroup = wrapMap.option,
    wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead,
    wrapMap.th = wrapMap.td;
    var rhtml = /<|&#?\w+;/
      , rtbody = /<tbody/i;
    !function() {
        var i, eventName, div = document.createElement("div");
        for (i in {
            submit: !0,
            change: !0,
            focusin: !0
        })
            eventName = "on" + i,
            (support[i] = eventName in window) || (div.setAttribute(eventName, "t"),
            support[i] = div.attributes[eventName].expando === !1);
        div = null
    }();
    var rformElems = /^(?:input|select|textarea)$/i
      , rkeyEvent = /^key/
      , rmouseEvent = /^(?:mouse|pointer|contextmenu|drag|drop)|click/
      , rfocusMorph = /^(?:focusinfocus|focusoutblur)$/
      , rtypenamespace = /^([^.]*)(?:\.(.+)|)/;
    jQuery.event = {
        global: {},
        add: function(elem, types, handler, data, selector) {
            var tmp, events, t, handleObjIn, special, eventHandle, handleObj, handlers, type, namespaces, origType, elemData = jQuery._data(elem);
            if (elemData) {
                for (handler.handler && (handleObjIn = handler,
                handler = handleObjIn.handler,
                selector = handleObjIn.selector),
                handler.guid || (handler.guid = jQuery.guid++),
                (events = elemData.events) || (events = elemData.events = {}),
                (eventHandle = elemData.handle) || (eventHandle = elemData.handle = function(e) {
                    return "undefined" == typeof jQuery || e && jQuery.event.triggered === e.type ? void 0 : jQuery.event.dispatch.apply(eventHandle.elem, arguments)
                }
                ,
                eventHandle.elem = elem),
                types = (types || "").match(rnotwhite) || [""],
                t = types.length; t--; )
                    tmp = rtypenamespace.exec(types[t]) || [],
                    type = origType = tmp[1],
                    namespaces = (tmp[2] || "").split(".").sort(),
                    type && (special = jQuery.event.special[type] || {},
                    type = (selector ? special.delegateType : special.bindType) || type,
                    special = jQuery.event.special[type] || {},
                    handleObj = jQuery.extend({
                        type: type,
                        origType: origType,
                        data: data,
                        handler: handler,
                        guid: handler.guid,
                        selector: selector,
                        needsContext: selector && jQuery.expr.match.needsContext.test(selector),
                        namespace: namespaces.join(".")
                    }, handleObjIn),
                    (handlers = events[type]) || (handlers = events[type] = [],
                    handlers.delegateCount = 0,
                    special.setup && special.setup.call(elem, data, namespaces, eventHandle) !== !1 || (elem.addEventListener ? elem.addEventListener(type, eventHandle, !1) : elem.attachEvent && elem.attachEvent("on" + type, eventHandle))),
                    special.add && (special.add.call(elem, handleObj),
                    handleObj.handler.guid || (handleObj.handler.guid = handler.guid)),
                    selector ? handlers.splice(handlers.delegateCount++, 0, handleObj) : handlers.push(handleObj),
                    jQuery.event.global[type] = !0);
                elem = null
            }
        },
        remove: function(elem, types, handler, selector, mappedTypes) {
            var j, handleObj, tmp, origCount, t, events, special, handlers, type, namespaces, origType, elemData = jQuery.hasData(elem) && jQuery._data(elem);
            if (elemData && (events = elemData.events)) {
                for (types = (types || "").match(rnotwhite) || [""],
                t = types.length; t--; )
                    if (tmp = rtypenamespace.exec(types[t]) || [],
                    type = origType = tmp[1],
                    namespaces = (tmp[2] || "").split(".").sort(),
                    type) {
                        for (special = jQuery.event.special[type] || {},
                        type = (selector ? special.delegateType : special.bindType) || type,
                        handlers = events[type] || [],
                        tmp = tmp[2] && new RegExp("(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)"),
                        origCount = j = handlers.length; j--; )
                            handleObj = handlers[j],
                            !mappedTypes && origType !== handleObj.origType || handler && handler.guid !== handleObj.guid || tmp && !tmp.test(handleObj.namespace) || selector && selector !== handleObj.selector && ("**" !== selector || !handleObj.selector) || (handlers.splice(j, 1),
                            handleObj.selector && handlers.delegateCount--,
                            special.remove && special.remove.call(elem, handleObj));
                        origCount && !handlers.length && (special.teardown && special.teardown.call(elem, namespaces, elemData.handle) !== !1 || jQuery.removeEvent(elem, type, elemData.handle),
                        delete events[type])
                    } else
                        for (type in events)
                            jQuery.event.remove(elem, type + types[t], handler, selector, !0);
                jQuery.isEmptyObject(events) && (delete elemData.handle,
                jQuery._removeData(elem, "events"))
            }
        },
        trigger: function(event, data, elem, onlyHandlers) {
            var handle, ontype, cur, bubbleType, special, tmp, i, eventPath = [elem || document], type = hasOwn.call(event, "type") ? event.type : event, namespaces = hasOwn.call(event, "namespace") ? event.namespace.split(".") : [];
            if (cur = tmp = elem = elem || document,
            3 !== elem.nodeType && 8 !== elem.nodeType && !rfocusMorph.test(type + jQuery.event.triggered) && (type.indexOf(".") > -1 && (namespaces = type.split("."),
            type = namespaces.shift(),
            namespaces.sort()),
            ontype = type.indexOf(":") < 0 && "on" + type,
            event = event[jQuery.expando] ? event : new jQuery.Event(type,"object" == typeof event && event),
            event.isTrigger = onlyHandlers ? 2 : 3,
            event.namespace = namespaces.join("."),
            event.rnamespace = event.namespace ? new RegExp("(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)") : null,
            event.result = void 0,
            event.target || (event.target = elem),
            data = null == data ? [event] : jQuery.makeArray(data, [event]),
            special = jQuery.event.special[type] || {},
            onlyHandlers || !special.trigger || special.trigger.apply(elem, data) !== !1)) {
                if (!onlyHandlers && !special.noBubble && !jQuery.isWindow(elem)) {
                    for (bubbleType = special.delegateType || type,
                    rfocusMorph.test(bubbleType + type) || (cur = cur.parentNode); cur; cur = cur.parentNode)
                        eventPath.push(cur),
                        tmp = cur;
                    tmp === (elem.ownerDocument || document) && eventPath.push(tmp.defaultView || tmp.parentWindow || window)
                }
                for (i = 0; (cur = eventPath[i++]) && !event.isPropagationStopped(); )
                    event.type = i > 1 ? bubbleType : special.bindType || type,
                    handle = (jQuery._data(cur, "events") || {})[event.type] && jQuery._data(cur, "handle"),
                    handle && handle.apply(cur, data),
                    handle = ontype && cur[ontype],
                    handle && handle.apply && acceptData(cur) && (event.result = handle.apply(cur, data),
                    event.result === !1 && event.preventDefault());
                if (event.type = type,
                !onlyHandlers && !event.isDefaultPrevented() && (!special._default || special._default.apply(eventPath.pop(), data) === !1) && acceptData(elem) && ontype && elem[type] && !jQuery.isWindow(elem)) {
                    tmp = elem[ontype],
                    tmp && (elem[ontype] = null),
                    jQuery.event.triggered = type;
                    try {
                        elem[type]()
                    } catch (e) {}
                    jQuery.event.triggered = void 0,
                    tmp && (elem[ontype] = tmp)
                }
                return event.result
            }
        },
        dispatch: function(event) {
            event = jQuery.event.fix(event);
            var i, j, ret, matched, handleObj, handlerQueue = [], args = slice.call(arguments), handlers = (jQuery._data(this, "events") || {})[event.type] || [], special = jQuery.event.special[event.type] || {};
            if (args[0] = event,
            event.delegateTarget = this,
            !special.preDispatch || special.preDispatch.call(this, event) !== !1) {
                for (handlerQueue = jQuery.event.handlers.call(this, event, handlers),
                i = 0; (matched = handlerQueue[i++]) && !event.isPropagationStopped(); )
                    for (event.currentTarget = matched.elem,
                    j = 0; (handleObj = matched.handlers[j++]) && !event.isImmediatePropagationStopped(); )
                        event.rnamespace && !event.rnamespace.test(handleObj.namespace) || (event.handleObj = handleObj,
                        event.data = handleObj.data,
                        ret = ((jQuery.event.special[handleObj.origType] || {}).handle || handleObj.handler).apply(matched.elem, args),
                        void 0 !== ret && (event.result = ret) === !1 && (event.preventDefault(),
                        event.stopPropagation()));
                return special.postDispatch && special.postDispatch.call(this, event),
                event.result
            }
        },
        handlers: function(event, handlers) {
            var i, matches, sel, handleObj, handlerQueue = [], delegateCount = handlers.delegateCount, cur = event.target;
            if (delegateCount && cur.nodeType && ("click" !== event.type || isNaN(event.button) || event.button < 1))
                for (; cur != this; cur = cur.parentNode || this)
                    if (1 === cur.nodeType && (cur.disabled !== !0 || "click" !== event.type)) {
                        for (matches = [],
                        i = 0; delegateCount > i; i++)
                            handleObj = handlers[i],
                            sel = handleObj.selector + " ",
                            void 0 === matches[sel] && (matches[sel] = handleObj.needsContext ? jQuery(sel, this).index(cur) > -1 : jQuery.find(sel, this, null, [cur]).length),
                            matches[sel] && matches.push(handleObj);
                        matches.length && handlerQueue.push({
                            elem: cur,
                            handlers: matches
                        })
                    }
            return delegateCount < handlers.length && handlerQueue.push({
                elem: this,
                handlers: handlers.slice(delegateCount)
            }),
            handlerQueue
        },
        fix: function(event) {
            if (event[jQuery.expando])
                return event;
            var i, prop, copy, type = event.type, originalEvent = event, fixHook = this.fixHooks[type];
            for (fixHook || (this.fixHooks[type] = fixHook = rmouseEvent.test(type) ? this.mouseHooks : rkeyEvent.test(type) ? this.keyHooks : {}),
            copy = fixHook.props ? this.props.concat(fixHook.props) : this.props,
            event = new jQuery.Event(originalEvent),
            i = copy.length; i--; )
                prop = copy[i],
                event[prop] = originalEvent[prop];
            return event.target || (event.target = originalEvent.srcElement || document),
            3 === event.target.nodeType && (event.target = event.target.parentNode),
            event.metaKey = !!event.metaKey,
            fixHook.filter ? fixHook.filter(event, originalEvent) : event
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function(event, original) {
                return null == event.which && (event.which = null != original.charCode ? original.charCode : original.keyCode),
                event
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function(event, original) {
                var body, eventDoc, doc, button = original.button, fromElement = original.fromElement;
                return null == event.pageX && null != original.clientX && (eventDoc = event.target.ownerDocument || document,
                doc = eventDoc.documentElement,
                body = eventDoc.body,
                event.pageX = original.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0),
                event.pageY = original.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0)),
                !event.relatedTarget && fromElement && (event.relatedTarget = fromElement === event.target ? original.toElement : fromElement),
                event.which || void 0 === button || (event.which = 1 & button ? 1 : 2 & button ? 3 : 4 & button ? 2 : 0),
                event
            }
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function() {
                    if (this !== safeActiveElement() && this.focus)
                        try {
                            return this.focus(),
                            !1
                        } catch (e) {}
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function() {
                    return this === safeActiveElement() && this.blur ? (this.blur(),
                    !1) : void 0
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function() {
                    return jQuery.nodeName(this, "input") && "checkbox" === this.type && this.click ? (this.click(),
                    !1) : void 0
                },
                _default: function(event) {
                    return jQuery.nodeName(event.target, "a")
                }
            },
            beforeunload: {
                postDispatch: function(event) {
                    void 0 !== event.result && event.originalEvent && (event.originalEvent.returnValue = event.result)
                }
            }
        },
        simulate: function(type, elem, event) {
            var e = jQuery.extend(new jQuery.Event, event, {
                type: type,
                isSimulated: !0
            });
            jQuery.event.trigger(e, null, elem),
            e.isDefaultPrevented() && event.preventDefault()
        }
    },
    jQuery.removeEvent = document.removeEventListener ? function(elem, type, handle) {
        elem.removeEventListener && elem.removeEventListener(type, handle)
    }
    : function(elem, type, handle) {
        var name = "on" + type;
        elem.detachEvent && ("undefined" == typeof elem[name] && (elem[name] = null),
        elem.detachEvent(name, handle))
    }
    ,
    jQuery.Event = function(src, props) {
        return this instanceof jQuery.Event ? (src && src.type ? (this.originalEvent = src,
        this.type = src.type,
        this.isDefaultPrevented = src.defaultPrevented || void 0 === src.defaultPrevented && src.returnValue === !1 ? returnTrue : returnFalse) : this.type = src,
        props && jQuery.extend(this, props),
        this.timeStamp = src && src.timeStamp || jQuery.now(),
        void (this[jQuery.expando] = !0)) : new jQuery.Event(src,props)
    }
    ,
    jQuery.Event.prototype = {
        constructor: jQuery.Event,
        isDefaultPrevented: returnFalse,
        isPropagationStopped: returnFalse,
        isImmediatePropagationStopped: returnFalse,
        preventDefault: function() {
            var e = this.originalEvent;
            this.isDefaultPrevented = returnTrue,
            e && (e.preventDefault ? e.preventDefault() : e.returnValue = !1)
        },
        stopPropagation: function() {
            var e = this.originalEvent;
            this.isPropagationStopped = returnTrue,
            e && !this.isSimulated && (e.stopPropagation && e.stopPropagation(),
            e.cancelBubble = !0)
        },
        stopImmediatePropagation: function() {
            var e = this.originalEvent;
            this.isImmediatePropagationStopped = returnTrue,
            e && e.stopImmediatePropagation && e.stopImmediatePropagation(),
            this.stopPropagation()
        }
    },
    jQuery.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout"
    }, function(orig, fix) {
        jQuery.event.special[orig] = {
            delegateType: fix,
            bindType: fix,
            handle: function(event) {
                var ret, target = this, related = event.relatedTarget, handleObj = event.handleObj;
                return related && (related === target || jQuery.contains(target, related)) || (event.type = handleObj.origType,
                ret = handleObj.handler.apply(this, arguments),
                event.type = fix),
                ret
            }
        }
    }),
    support.submit || (jQuery.event.special.submit = {
        setup: function() {
            return jQuery.nodeName(this, "form") ? !1 : void jQuery.event.add(this, "click._submit keypress._submit", function(e) {
                var elem = e.target
                  , form = jQuery.nodeName(elem, "input") || jQuery.nodeName(elem, "button") ? jQuery.prop(elem, "form") : void 0;
                form && !jQuery._data(form, "submit") && (jQuery.event.add(form, "submit._submit", function(event) {
                    event._submitBubble = !0
                }),
                jQuery._data(form, "submit", !0))
            })
        },
        postDispatch: function(event) {
            event._submitBubble && (delete event._submitBubble,
            this.parentNode && !event.isTrigger && jQuery.event.simulate("submit", this.parentNode, event))
        },
        teardown: function() {
            return jQuery.nodeName(this, "form") ? !1 : void jQuery.event.remove(this, "._submit")
        }
    }),
    support.change || (jQuery.event.special.change = {
        setup: function() {
            return rformElems.test(this.nodeName) ? ("checkbox" !== this.type && "radio" !== this.type || (jQuery.event.add(this, "propertychange._change", function(event) {
                "checked" === event.originalEvent.propertyName && (this._justChanged = !0)
            }),
            jQuery.event.add(this, "click._change", function(event) {
                this._justChanged && !event.isTrigger && (this._justChanged = !1),
                jQuery.event.simulate("change", this, event)
            })),
            !1) : void jQuery.event.add(this, "beforeactivate._change", function(e) {
                var elem = e.target;
                rformElems.test(elem.nodeName) && !jQuery._data(elem, "change") && (jQuery.event.add(elem, "change._change", function(event) {
                    !this.parentNode || event.isSimulated || event.isTrigger || jQuery.event.simulate("change", this.parentNode, event)
                }),
                jQuery._data(elem, "change", !0))
            })
        },
        handle: function(event) {
            var elem = event.target;
            return this !== elem || event.isSimulated || event.isTrigger || "radio" !== elem.type && "checkbox" !== elem.type ? event.handleObj.handler.apply(this, arguments) : void 0
        },
        teardown: function() {
            return jQuery.event.remove(this, "._change"),
            !rformElems.test(this.nodeName)
        }
    }),
    support.focusin || jQuery.each({
        focus: "focusin",
        blur: "focusout"
    }, function(orig, fix) {
        var handler = function(event) {
            jQuery.event.simulate(fix, event.target, jQuery.event.fix(event))
        };
        jQuery.event.special[fix] = {
            setup: function() {
                var doc = this.ownerDocument || this
                  , attaches = jQuery._data(doc, fix);
                attaches || doc.addEventListener(orig, handler, !0),
                jQuery._data(doc, fix, (attaches || 0) + 1)
            },
            teardown: function() {
                var doc = this.ownerDocument || this
                  , attaches = jQuery._data(doc, fix) - 1;
                attaches ? jQuery._data(doc, fix, attaches) : (doc.removeEventListener(orig, handler, !0),
                jQuery._removeData(doc, fix))
            }
        }
    }),
    jQuery.fn.extend({
        on: function(types, selector, data, fn) {
            return on(this, types, selector, data, fn)
        },
        one: function(types, selector, data, fn) {
            return on(this, types, selector, data, fn, 1)
        },
        off: function(types, selector, fn) {
            var handleObj, type;
            if (types && types.preventDefault && types.handleObj)
                return handleObj = types.handleObj,
                jQuery(types.delegateTarget).off(handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType, handleObj.selector, handleObj.handler),
                this;
            if ("object" == typeof types) {
                for (type in types)
                    this.off(type, selector, types[type]);
                return this
            }
            return selector !== !1 && "function" != typeof selector || (fn = selector,
            selector = void 0),
            fn === !1 && (fn = returnFalse),
            this.each(function() {
                jQuery.event.remove(this, types, fn, selector)
            })
        },
        trigger: function(type, data) {
            return this.each(function() {
                jQuery.event.trigger(type, data, this)
            })
        },
        triggerHandler: function(type, data) {
            var elem = this[0];
            return elem ? jQuery.event.trigger(type, data, elem, !0) : void 0
        }
    });
    var rinlinejQuery = / jQuery\d+="(?:null|\d+)"/g
      , rnoshimcache = new RegExp("<(?:" + nodeNames + ")[\\s/>]","i")
      , rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi
      , rnoInnerhtml = /<script|<style|<link/i
      , rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i
      , rscriptTypeMasked = /^true\/(.*)/
      , rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g
      , safeFragment = createSafeFragment(document)
      , fragmentDiv = safeFragment.appendChild(document.createElement("div"));
    jQuery.extend({
        htmlPrefilter: function(html) {
            return html.replace(rxhtmlTag, "<$1></$2>")
        },
        clone: function(elem, dataAndEvents, deepDataAndEvents) {
            var destElements, node, clone, i, srcElements, inPage = jQuery.contains(elem.ownerDocument, elem);
            if (support.html5Clone || jQuery.isXMLDoc(elem) || !rnoshimcache.test("<" + elem.nodeName + ">") ? clone = elem.cloneNode(!0) : (fragmentDiv.innerHTML = elem.outerHTML,
            fragmentDiv.removeChild(clone = fragmentDiv.firstChild)),
            !(support.noCloneEvent && support.noCloneChecked || 1 !== elem.nodeType && 11 !== elem.nodeType || jQuery.isXMLDoc(elem)))
                for (destElements = getAll(clone),
                srcElements = getAll(elem),
                i = 0; null != (node = srcElements[i]); ++i)
                    destElements[i] && fixCloneNodeIssues(node, destElements[i]);
            if (dataAndEvents)
                if (deepDataAndEvents)
                    for (srcElements = srcElements || getAll(elem),
                    destElements = destElements || getAll(clone),
                    i = 0; null != (node = srcElements[i]); i++)
                        cloneCopyEvent(node, destElements[i]);
                else
                    cloneCopyEvent(elem, clone);
            return destElements = getAll(clone, "script"),
            destElements.length > 0 && setGlobalEval(destElements, !inPage && getAll(elem, "script")),
            destElements = srcElements = node = null,
            clone
        },
        cleanData: function(elems, forceAcceptData) {
            for (var elem, type, id, data, i = 0, internalKey = jQuery.expando, cache = jQuery.cache, attributes = support.attributes, special = jQuery.event.special; null != (elem = elems[i]); i++)
                if ((forceAcceptData || acceptData(elem)) && (id = elem[internalKey],
                data = id && cache[id])) {
                    if (data.events)
                        for (type in data.events)
                            special[type] ? jQuery.event.remove(elem, type) : jQuery.removeEvent(elem, type, data.handle);
                    cache[id] && (delete cache[id],
                    attributes || "undefined" == typeof elem.removeAttribute ? elem[internalKey] = void 0 : elem.removeAttribute(internalKey),
                    deletedIds.push(id))
                }
        }
    }),
    jQuery.fn.extend({
        domManip: domManip,
        detach: function(selector) {
            return remove(this, selector, !0)
        },
        remove: function(selector) {
            return remove(this, selector)
        },
        text: function(value) {
            return access(this, function(value) {
                return void 0 === value ? jQuery.text(this) : this.empty().append((this[0] && this[0].ownerDocument || document).createTextNode(value))
            }, null, value, arguments.length)
        },
        append: function() {
            return domManip(this, arguments, function(elem) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var target = manipulationTarget(this, elem);
                    target.appendChild(elem)
                }
            })
        },
        prepend: function() {
            return domManip(this, arguments, function(elem) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var target = manipulationTarget(this, elem);
                    target.insertBefore(elem, target.firstChild)
                }
            })
        },
        before: function() {
            return domManip(this, arguments, function(elem) {
                this.parentNode && this.parentNode.insertBefore(elem, this)
            })
        },
        after: function() {
            return domManip(this, arguments, function(elem) {
                this.parentNode && this.parentNode.insertBefore(elem, this.nextSibling)
            })
        },
        empty: function() {
            for (var elem, i = 0; null != (elem = this[i]); i++) {
                for (1 === elem.nodeType && jQuery.cleanData(getAll(elem, !1)); elem.firstChild; )
                    elem.removeChild(elem.firstChild);
                elem.options && jQuery.nodeName(elem, "select") && (elem.options.length = 0)
            }
            return this
        },
        clone: function(dataAndEvents, deepDataAndEvents) {
            return dataAndEvents = null == dataAndEvents ? !1 : dataAndEvents,
            deepDataAndEvents = null == deepDataAndEvents ? dataAndEvents : deepDataAndEvents,
            this.map(function() {
                return jQuery.clone(this, dataAndEvents, deepDataAndEvents)
            })
        },
        html: function(value) {
            return access(this, function(value) {
                var elem = this[0] || {}
                  , i = 0
                  , l = this.length;
                if (void 0 === value)
                    return 1 === elem.nodeType ? elem.innerHTML.replace(rinlinejQuery, "") : void 0;
                if ("string" == typeof value && !rnoInnerhtml.test(value) && (support.htmlSerialize || !rnoshimcache.test(value)) && (support.leadingWhitespace || !rleadingWhitespace.test(value)) && !wrapMap[(rtagName.exec(value) || ["", ""])[1].toLowerCase()]) {
                    value = jQuery.htmlPrefilter(value);
                    try {
                        for (; l > i; i++)
                            elem = this[i] || {},
                            1 === elem.nodeType && (jQuery.cleanData(getAll(elem, !1)),
                            elem.innerHTML = value);
                        elem = 0
                    } catch (e) {}
                }
                elem && this.empty().append(value)
            }, null, value, arguments.length)
        },
        replaceWith: function() {
            var ignored = [];
            return domManip(this, arguments, function(elem) {
                var parent = this.parentNode;
                jQuery.inArray(this, ignored) < 0 && (jQuery.cleanData(getAll(this)),
                parent && parent.replaceChild(elem, this))
            }, ignored)
        }
    }),
    jQuery.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function(name, original) {
        jQuery.fn[name] = function(selector) {
            for (var elems, i = 0, ret = [], insert = jQuery(selector), last = insert.length - 1; last >= i; i++)
                elems = i === last ? this : this.clone(!0),
                jQuery(insert[i])[original](elems),
                push.apply(ret, elems.get());
            return this.pushStack(ret)
        }
    });
    var iframe, elemdisplay = {
        HTML: "block",
        BODY: "block"
    }, rmargin = /^margin/, rnumnonpx = new RegExp("^(" + pnum + ")(?!px)[a-z%]+$","i"), swap = function(elem, options, callback, args) {
        var ret, name, old = {};
        for (name in options)
            old[name] = elem.style[name],
            elem.style[name] = options[name];
        ret = callback.apply(elem, args || []);
        for (name in options)
            elem.style[name] = old[name];
        return ret
    }, documentElement = document.documentElement;
    !function() {
        function computeStyleTests() {
            var contents, divStyle, documentElement = document.documentElement;
            documentElement.appendChild(container),
            div.style.cssText = "-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",
            pixelPositionVal = boxSizingReliableVal = reliableMarginLeftVal = !1,
            pixelMarginRightVal = reliableMarginRightVal = !0,
            window.getComputedStyle && (divStyle = window.getComputedStyle(div),
            pixelPositionVal = "1%" !== (divStyle || {}).top,
            reliableMarginLeftVal = "2px" === (divStyle || {}).marginLeft,
            boxSizingReliableVal = "4px" === (divStyle || {
                width: "4px"
            }).width,
            div.style.marginRight = "50%",
            pixelMarginRightVal = "4px" === (divStyle || {
                marginRight: "4px"
            }).marginRight,
            contents = div.appendChild(document.createElement("div")),
            contents.style.cssText = div.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",
            contents.style.marginRight = contents.style.width = "0",
            div.style.width = "1px",
            reliableMarginRightVal = !parseFloat((window.getComputedStyle(contents) || {}).marginRight),
            div.removeChild(contents)),
            div.style.display = "none",
            reliableHiddenOffsetsVal = 0 === div.getClientRects().length,
            reliableHiddenOffsetsVal && (div.style.display = "",
            div.innerHTML = "<table><tr><td></td><td>t</td></tr></table>",
            div.childNodes[0].style.borderCollapse = "separate",
            contents = div.getElementsByTagName("td"),
            contents[0].style.cssText = "margin:0;border:0;padding:0;display:none",
            reliableHiddenOffsetsVal = 0 === contents[0].offsetHeight,
            reliableHiddenOffsetsVal && (contents[0].style.display = "",
            contents[1].style.display = "none",
            reliableHiddenOffsetsVal = 0 === contents[0].offsetHeight)),
            documentElement.removeChild(container)
        }
        var pixelPositionVal, pixelMarginRightVal, boxSizingReliableVal, reliableHiddenOffsetsVal, reliableMarginRightVal, reliableMarginLeftVal, container = document.createElement("div"), div = document.createElement("div");
        div.style && (div.style.cssText = "float:left;opacity:.5",
        support.opacity = "0.5" === div.style.opacity,
        support.cssFloat = !!div.style.cssFloat,
        div.style.backgroundClip = "content-box",
        div.cloneNode(!0).style.backgroundClip = "",
        support.clearCloneStyle = "content-box" === div.style.backgroundClip,
        container = document.createElement("div"),
        container.style.cssText = "border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",
        div.innerHTML = "",
        container.appendChild(div),
        support.boxSizing = "" === div.style.boxSizing || "" === div.style.MozBoxSizing || "" === div.style.WebkitBoxSizing,
        jQuery.extend(support, {
            reliableHiddenOffsets: function() {
                return null == pixelPositionVal && computeStyleTests(),
                reliableHiddenOffsetsVal
            },
            boxSizingReliable: function() {
                return null == pixelPositionVal && computeStyleTests(),
                boxSizingReliableVal
            },
            pixelMarginRight: function() {
                return null == pixelPositionVal && computeStyleTests(),
                pixelMarginRightVal
            },
            pixelPosition: function() {
                return null == pixelPositionVal && computeStyleTests(),
                pixelPositionVal
            },
            reliableMarginRight: function() {
                return null == pixelPositionVal && computeStyleTests(),
                reliableMarginRightVal
            },
            reliableMarginLeft: function() {
                return null == pixelPositionVal && computeStyleTests(),
                reliableMarginLeftVal
            }
        }))
    }();
    var getStyles, curCSS, rposition = /^(top|right|bottom|left)$/;
    window.getComputedStyle ? (getStyles = function(elem) {
        var view = elem.ownerDocument.defaultView;
        return view && view.opener || (view = window),
        view.getComputedStyle(elem)
    }
    ,
    curCSS = function(elem, name, computed) {
        var width, minWidth, maxWidth, ret, style = elem.style;
        return computed = computed || getStyles(elem),
        ret = computed ? computed.getPropertyValue(name) || computed[name] : void 0,
        "" !== ret && void 0 !== ret || jQuery.contains(elem.ownerDocument, elem) || (ret = jQuery.style(elem, name)),
        computed && !support.pixelMarginRight() && rnumnonpx.test(ret) && rmargin.test(name) && (width = style.width,
        minWidth = style.minWidth,
        maxWidth = style.maxWidth,
        style.minWidth = style.maxWidth = style.width = ret,
        ret = computed.width,
        style.width = width,
        style.minWidth = minWidth,
        style.maxWidth = maxWidth),
        void 0 === ret ? ret : ret + ""
    }
    ) : documentElement.currentStyle && (getStyles = function(elem) {
        return elem.currentStyle
    }
    ,
    curCSS = function(elem, name, computed) {
        var left, rs, rsLeft, ret, style = elem.style;
        return computed = computed || getStyles(elem),
        ret = computed ? computed[name] : void 0,
        null == ret && style && style[name] && (ret = style[name]),
        rnumnonpx.test(ret) && !rposition.test(name) && (left = style.left,
        rs = elem.runtimeStyle,
        rsLeft = rs && rs.left,
        rsLeft && (rs.left = elem.currentStyle.left),
        style.left = "fontSize" === name ? "1em" : ret,
        ret = style.pixelLeft + "px",
        style.left = left,
        rsLeft && (rs.left = rsLeft)),
        void 0 === ret ? ret : ret + "" || "auto"
    }
    );
    var ralpha = /alpha\([^)]*\)/i
      , ropacity = /opacity\s*=\s*([^)]*)/i
      , rdisplayswap = /^(none|table(?!-c[ea]).+)/
      , rnumsplit = new RegExp("^(" + pnum + ")(.*)$","i")
      , cssShow = {
        position: "absolute",
        visibility: "hidden",
        display: "block"
    }
      , cssNormalTransform = {
        letterSpacing: "0",
        fontWeight: "400"
    }
      , cssPrefixes = ["Webkit", "O", "Moz", "ms"]
      , emptyStyle = document.createElement("div").style;
    jQuery.extend({
        cssHooks: {
            opacity: {
                get: function(elem, computed) {
                    if (computed) {
                        var ret = curCSS(elem, "opacity");
                        return "" === ret ? "1" : ret
                    }
                }
            }
        },
        cssNumber: {
            animationIterationCount: !0,
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            "float": support.cssFloat ? "cssFloat" : "styleFloat"
        },
        style: function(elem, name, value, extra) {
            if (elem && 3 !== elem.nodeType && 8 !== elem.nodeType && elem.style) {
                var ret, type, hooks, origName = jQuery.camelCase(name), style = elem.style;
                if (name = jQuery.cssProps[origName] || (jQuery.cssProps[origName] = vendorPropName(origName) || origName),
                hooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName],
                void 0 === value)
                    return hooks && "get"in hooks && void 0 !== (ret = hooks.get(elem, !1, extra)) ? ret : style[name];
                if (type = typeof value,
                "string" === type && (ret = rcssNum.exec(value)) && ret[1] && (value = adjustCSS(elem, name, ret),
                type = "number"),
                null != value && value === value && ("number" === type && (value += ret && ret[3] || (jQuery.cssNumber[origName] ? "" : "px")),
                support.clearCloneStyle || "" !== value || 0 !== name.indexOf("background") || (style[name] = "inherit"),
                !(hooks && "set"in hooks && void 0 === (value = hooks.set(elem, value, extra)))))
                    try {
                        style[name] = value
                    } catch (e) {}
            }
        },
        css: function(elem, name, extra, styles) {
            var num, val, hooks, origName = jQuery.camelCase(name);
            return name = jQuery.cssProps[origName] || (jQuery.cssProps[origName] = vendorPropName(origName) || origName),
            hooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName],
            hooks && "get"in hooks && (val = hooks.get(elem, !0, extra)),
            void 0 === val && (val = curCSS(elem, name, styles)),
            "normal" === val && name in cssNormalTransform && (val = cssNormalTransform[name]),
            "" === extra || extra ? (num = parseFloat(val),
            extra === !0 || isFinite(num) ? num || 0 : val) : val
        }
    }),
    jQuery.each(["height", "width"], function(i, name) {
        jQuery.cssHooks[name] = {
            get: function(elem, computed, extra) {
                return computed ? rdisplayswap.test(jQuery.css(elem, "display")) && 0 === elem.offsetWidth ? swap(elem, cssShow, function() {
                    return getWidthOrHeight(elem, name, extra)
                }) : getWidthOrHeight(elem, name, extra) : void 0
            },
            set: function(elem, value, extra) {
                var styles = extra && getStyles(elem);
                return setPositiveNumber(elem, value, extra ? augmentWidthOrHeight(elem, name, extra, support.boxSizing && "border-box" === jQuery.css(elem, "boxSizing", !1, styles), styles) : 0)
            }
        }
    }),
    support.opacity || (jQuery.cssHooks.opacity = {
        get: function(elem, computed) {
            return ropacity.test((computed && elem.currentStyle ? elem.currentStyle.filter : elem.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" : computed ? "1" : ""
        },
        set: function(elem, value) {
            var style = elem.style
              , currentStyle = elem.currentStyle
              , opacity = jQuery.isNumeric(value) ? "alpha(opacity=" + 100 * value + ")" : ""
              , filter = currentStyle && currentStyle.filter || style.filter || "";
            style.zoom = 1,
            (value >= 1 || "" === value) && "" === jQuery.trim(filter.replace(ralpha, "")) && style.removeAttribute && (style.removeAttribute("filter"),
            "" === value || currentStyle && !currentStyle.filter) || (style.filter = ralpha.test(filter) ? filter.replace(ralpha, opacity) : filter + " " + opacity)
        }
    }),
    jQuery.cssHooks.marginRight = addGetHookIf(support.reliableMarginRight, function(elem, computed) {
        return computed ? swap(elem, {
            display: "inline-block"
        }, curCSS, [elem, "marginRight"]) : void 0
    }),
    jQuery.cssHooks.marginLeft = addGetHookIf(support.reliableMarginLeft, function(elem, computed) {
        return computed ? (parseFloat(curCSS(elem, "marginLeft")) || (jQuery.contains(elem.ownerDocument, elem) ? elem.getBoundingClientRect().left - swap(elem, {
            marginLeft: 0
        }, function() {
            return elem.getBoundingClientRect().left
        }) : 0)) + "px" : void 0
    }),
    jQuery.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function(prefix, suffix) {
        jQuery.cssHooks[prefix + suffix] = {
            expand: function(value) {
                for (var i = 0, expanded = {}, parts = "string" == typeof value ? value.split(" ") : [value]; 4 > i; i++)
                    expanded[prefix + cssExpand[i] + suffix] = parts[i] || parts[i - 2] || parts[0];
                return expanded
            }
        },
        rmargin.test(prefix) || (jQuery.cssHooks[prefix + suffix].set = setPositiveNumber)
    }),
    jQuery.fn.extend({
        css: function(name, value) {
            return access(this, function(elem, name, value) {
                var styles, len, map = {}, i = 0;
                if (jQuery.isArray(name)) {
                    for (styles = getStyles(elem),
                    len = name.length; len > i; i++)
                        map[name[i]] = jQuery.css(elem, name[i], !1, styles);
                    return map
                }
                return void 0 !== value ? jQuery.style(elem, name, value) : jQuery.css(elem, name)
            }, name, value, arguments.length > 1)
        },
        show: function() {
            return showHide(this, !0)
        },
        hide: function() {
            return showHide(this)
        },
        toggle: function(state) {
            return "boolean" == typeof state ? state ? this.show() : this.hide() : this.each(function() {
                isHidden(this) ? jQuery(this).show() : jQuery(this).hide()
            })
        }
    }),
    jQuery.Tween = Tween,
    Tween.prototype = {
        constructor: Tween,
        init: function(elem, options, prop, end, easing, unit) {
            this.elem = elem,
            this.prop = prop,
            this.easing = easing || jQuery.easing._default,
            this.options = options,
            this.start = this.now = this.cur(),
            this.end = end,
            this.unit = unit || (jQuery.cssNumber[prop] ? "" : "px")
        },
        cur: function() {
            var hooks = Tween.propHooks[this.prop];
            return hooks && hooks.get ? hooks.get(this) : Tween.propHooks._default.get(this)
        },
        run: function(percent) {
            var eased, hooks = Tween.propHooks[this.prop];
            return this.options.duration ? this.pos = eased = jQuery.easing[this.easing](percent, this.options.duration * percent, 0, 1, this.options.duration) : this.pos = eased = percent,
            this.now = (this.end - this.start) * eased + this.start,
            this.options.step && this.options.step.call(this.elem, this.now, this),
            hooks && hooks.set ? hooks.set(this) : Tween.propHooks._default.set(this),
            this
        }
    },
    Tween.prototype.init.prototype = Tween.prototype,
    Tween.propHooks = {
        _default: {
            get: function(tween) {
                var result;
                return 1 !== tween.elem.nodeType || null != tween.elem[tween.prop] && null == tween.elem.style[tween.prop] ? tween.elem[tween.prop] : (result = jQuery.css(tween.elem, tween.prop, ""),
                result && "auto" !== result ? result : 0)
            },
            set: function(tween) {
                jQuery.fx.step[tween.prop] ? jQuery.fx.step[tween.prop](tween) : 1 !== tween.elem.nodeType || null == tween.elem.style[jQuery.cssProps[tween.prop]] && !jQuery.cssHooks[tween.prop] ? tween.elem[tween.prop] = tween.now : jQuery.style(tween.elem, tween.prop, tween.now + tween.unit)
            }
        }
    },
    Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
        set: function(tween) {
            tween.elem.nodeType && tween.elem.parentNode && (tween.elem[tween.prop] = tween.now)
        }
    },
    jQuery.easing = {
        linear: function(p) {
            return p
        },
        swing: function(p) {
            return .5 - Math.cos(p * Math.PI) / 2
        },
        _default: "swing"
    },
    jQuery.fx = Tween.prototype.init,
    jQuery.fx.step = {};
    var fxNow, timerId, rfxtypes = /^(?:toggle|show|hide)$/, rrun = /queueHooks$/;
    jQuery.Animation = jQuery.extend(Animation, {
        tweeners: {
            "*": [function(prop, value) {
                var tween = this.createTween(prop, value);
                return adjustCSS(tween.elem, prop, rcssNum.exec(value), tween),
                tween
            }
            ]
        },
        tweener: function(props, callback) {
            jQuery.isFunction(props) ? (callback = props,
            props = ["*"]) : props = props.match(rnotwhite);
            for (var prop, index = 0, length = props.length; length > index; index++)
                prop = props[index],
                Animation.tweeners[prop] = Animation.tweeners[prop] || [],
                Animation.tweeners[prop].unshift(callback)
        },
        prefilters: [defaultPrefilter],
        prefilter: function(callback, prepend) {
            prepend ? Animation.prefilters.unshift(callback) : Animation.prefilters.push(callback)
        }
    }),
    jQuery.speed = function(speed, easing, fn) {
        var opt = speed && "object" == typeof speed ? jQuery.extend({}, speed) : {
            complete: fn || !fn && easing || jQuery.isFunction(speed) && speed,
            duration: speed,
            easing: fn && easing || easing && !jQuery.isFunction(easing) && easing
        };
        return opt.duration = jQuery.fx.off ? 0 : "number" == typeof opt.duration ? opt.duration : opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[opt.duration] : jQuery.fx.speeds._default,
        null != opt.queue && opt.queue !== !0 || (opt.queue = "fx"),
        opt.old = opt.complete,
        opt.complete = function() {
            jQuery.isFunction(opt.old) && opt.old.call(this),
            opt.queue && jQuery.dequeue(this, opt.queue)
        }
        ,
        opt
    }
    ,
    jQuery.fn.extend({
        fadeTo: function(speed, to, easing, callback) {
            return this.filter(isHidden).css("opacity", 0).show().end().animate({
                opacity: to
            }, speed, easing, callback)
        },
        animate: function(prop, speed, easing, callback) {
            var empty = jQuery.isEmptyObject(prop)
              , optall = jQuery.speed(speed, easing, callback)
              , doAnimation = function() {
                var anim = Animation(this, jQuery.extend({}, prop), optall);
                (empty || jQuery._data(this, "finish")) && anim.stop(!0)
            };
            return doAnimation.finish = doAnimation,
            empty || optall.queue === !1 ? this.each(doAnimation) : this.queue(optall.queue, doAnimation)
        },
        stop: function(type, clearQueue, gotoEnd) {
            var stopQueue = function(hooks) {
                var stop = hooks.stop;
                delete hooks.stop,
                stop(gotoEnd)
            };
            return "string" != typeof type && (gotoEnd = clearQueue,
            clearQueue = type,
            type = void 0),
            clearQueue && type !== !1 && this.queue(type || "fx", []),
            this.each(function() {
                var dequeue = !0
                  , index = null != type && type + "queueHooks"
                  , timers = jQuery.timers
                  , data = jQuery._data(this);
                if (index)
                    data[index] && data[index].stop && stopQueue(data[index]);
                else
                    for (index in data)
                        data[index] && data[index].stop && rrun.test(index) && stopQueue(data[index]);
                for (index = timers.length; index--; )
                    timers[index].elem !== this || null != type && timers[index].queue !== type || (timers[index].anim.stop(gotoEnd),
                    dequeue = !1,
                    timers.splice(index, 1));
                !dequeue && gotoEnd || jQuery.dequeue(this, type)
            })
        },
        finish: function(type) {
            return type !== !1 && (type = type || "fx"),
            this.each(function() {
                var index, data = jQuery._data(this), queue = data[type + "queue"], hooks = data[type + "queueHooks"], timers = jQuery.timers, length = queue ? queue.length : 0;
                for (data.finish = !0,
                jQuery.queue(this, type, []),
                hooks && hooks.stop && hooks.stop.call(this, !0),
                index = timers.length; index--; )
                    timers[index].elem === this && timers[index].queue === type && (timers[index].anim.stop(!0),
                    timers.splice(index, 1));
                for (index = 0; length > index; index++)
                    queue[index] && queue[index].finish && queue[index].finish.call(this);
                delete data.finish
            })
        }
    }),
    jQuery.each(["toggle", "show", "hide"], function(i, name) {
        var cssFn = jQuery.fn[name];
        jQuery.fn[name] = function(speed, easing, callback) {
            return null == speed || "boolean" == typeof speed ? cssFn.apply(this, arguments) : this.animate(genFx(name, !0), speed, easing, callback)
        }
    }),
    jQuery.each({
        slideDown: genFx("show"),
        slideUp: genFx("hide"),
        slideToggle: genFx("toggle"),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    }, function(name, props) {
        jQuery.fn[name] = function(speed, easing, callback) {
            return this.animate(props, speed, easing, callback)
        }
    }),
    jQuery.timers = [],
    jQuery.fx.tick = function() {
        var timer, timers = jQuery.timers, i = 0;
        for (fxNow = jQuery.now(); i < timers.length; i++)
            timer = timers[i],
            timer() || timers[i] !== timer || timers.splice(i--, 1);
        timers.length || jQuery.fx.stop(),
        fxNow = void 0
    }
    ,
    jQuery.fx.timer = function(timer) {
        jQuery.timers.push(timer),
        timer() ? jQuery.fx.start() : jQuery.timers.pop()
    }
    ,
    jQuery.fx.interval = 13,
    jQuery.fx.start = function() {
        timerId || (timerId = window.setInterval(jQuery.fx.tick, jQuery.fx.interval))
    }
    ,
    jQuery.fx.stop = function() {
        window.clearInterval(timerId),
        timerId = null
    }
    ,
    jQuery.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    },
    jQuery.fn.delay = function(time, type) {
        return time = jQuery.fx ? jQuery.fx.speeds[time] || time : time,
        type = type || "fx",
        this.queue(type, function(next, hooks) {
            var timeout = window.setTimeout(next, time);
            hooks.stop = function() {
                window.clearTimeout(timeout)
            }
        })
    }
    ,
    function() {
        var a, input = document.createElement("input"), div = document.createElement("div"), select = document.createElement("select"), opt = select.appendChild(document.createElement("option"));
        div = document.createElement("div"),
        div.setAttribute("className", "t"),
        div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",
        a = div.getElementsByTagName("a")[0],
        input.setAttribute("type", "checkbox"),
        div.appendChild(input),
        a = div.getElementsByTagName("a")[0],
        a.style.cssText = "top:1px",
        support.getSetAttribute = "t" !== div.className,
        support.style = /top/.test(a.getAttribute("style")),
        support.hrefNormalized = "/a" === a.getAttribute("href"),
        support.checkOn = !!input.value,
        support.optSelected = opt.selected,
        support.enctype = !!document.createElement("form").enctype,
        select.disabled = !0,
        support.optDisabled = !opt.disabled,
        input = document.createElement("input"),
        input.setAttribute("value", ""),
        support.input = "" === input.getAttribute("value"),
        input.value = "t",
        input.setAttribute("type", "radio"),
        support.radioValue = "t" === input.value
    }();
    var rreturn = /\r/g
      , rspaces = /[\x20\t\r\n\f]+/g;
    jQuery.fn.extend({
        val: function(value) {
            var hooks, ret, isFunction, elem = this[0];
            {
                if (arguments.length)
                    return isFunction = jQuery.isFunction(value),
                    this.each(function(i) {
                        var val;
                        1 === this.nodeType && (val = isFunction ? value.call(this, i, jQuery(this).val()) : value,
                        null == val ? val = "" : "number" == typeof val ? val += "" : jQuery.isArray(val) && (val = jQuery.map(val, function(value) {
                            return null == value ? "" : value + ""
                        })),
                        hooks = jQuery.valHooks[this.type] || jQuery.valHooks[this.nodeName.toLowerCase()],
                        hooks && "set"in hooks && void 0 !== hooks.set(this, val, "value") || (this.value = val))
                    });
                if (elem)
                    return hooks = jQuery.valHooks[elem.type] || jQuery.valHooks[elem.nodeName.toLowerCase()],
                    hooks && "get"in hooks && void 0 !== (ret = hooks.get(elem, "value")) ? ret : (ret = elem.value,
                    "string" == typeof ret ? ret.replace(rreturn, "") : null == ret ? "" : ret)
            }
        }
    }),
    jQuery.extend({
        valHooks: {
            option: {
                get: function(elem) {
                    var val = jQuery.find.attr(elem, "value");
                    return null != val ? val : jQuery.trim(jQuery.text(elem)).replace(rspaces, " ")
                }
            },
            select: {
                get: function(elem) {
                    for (var value, option, options = elem.options, index = elem.selectedIndex, one = "select-one" === elem.type || 0 > index, values = one ? null : [], max = one ? index + 1 : options.length, i = 0 > index ? max : one ? index : 0; max > i; i++)
                        if (option = options[i],
                        (option.selected || i === index) && (support.optDisabled ? !option.disabled : null === option.getAttribute("disabled")) && (!option.parentNode.disabled || !jQuery.nodeName(option.parentNode, "optgroup"))) {
                            if (value = jQuery(option).val(),
                            one)
                                return value;
                            values.push(value)
                        }
                    return values
                },
                set: function(elem, value) {
                    for (var optionSet, option, options = elem.options, values = jQuery.makeArray(value), i = options.length; i--; )
                        if (option = options[i],
                        jQuery.inArray(jQuery.valHooks.option.get(option), values) > -1)
                            try {
                                option.selected = optionSet = !0
                            } catch (_) {
                                option.scrollHeight
                            }
                        else
                            option.selected = !1;
                    return optionSet || (elem.selectedIndex = -1),
                    options
                }
            }
        }
    }),
    jQuery.each(["radio", "checkbox"], function() {
        jQuery.valHooks[this] = {
            set: function(elem, value) {
                return jQuery.isArray(value) ? elem.checked = jQuery.inArray(jQuery(elem).val(), value) > -1 : void 0
            }
        },
        support.checkOn || (jQuery.valHooks[this].get = function(elem) {
            return null === elem.getAttribute("value") ? "on" : elem.value
        }
        )
    });
    var nodeHook, boolHook, attrHandle = jQuery.expr.attrHandle, ruseDefault = /^(?:checked|selected)$/i, getSetAttribute = support.getSetAttribute, getSetInput = support.input;
    jQuery.fn.extend({
        attr: function(name, value) {
            return access(this, jQuery.attr, name, value, arguments.length > 1)
        },
        removeAttr: function(name) {
            return this.each(function() {
                jQuery.removeAttr(this, name)
            })
        }
    }),
    jQuery.extend({
        attr: function(elem, name, value) {
            var ret, hooks, nType = elem.nodeType;
            if (3 !== nType && 8 !== nType && 2 !== nType)
                return "undefined" == typeof elem.getAttribute ? jQuery.prop(elem, name, value) : (1 === nType && jQuery.isXMLDoc(elem) || (name = name.toLowerCase(),
                hooks = jQuery.attrHooks[name] || (jQuery.expr.match.bool.test(name) ? boolHook : nodeHook)),
                void 0 !== value ? null === value ? void jQuery.removeAttr(elem, name) : hooks && "set"in hooks && void 0 !== (ret = hooks.set(elem, value, name)) ? ret : (elem.setAttribute(name, value + ""),
                value) : hooks && "get"in hooks && null !== (ret = hooks.get(elem, name)) ? ret : (ret = jQuery.find.attr(elem, name),
                null == ret ? void 0 : ret))
        },
        attrHooks: {
            type: {
                set: function(elem, value) {
                    if (!support.radioValue && "radio" === value && jQuery.nodeName(elem, "input")) {
                        var val = elem.value;
                        return elem.setAttribute("type", value),
                        val && (elem.value = val),
                        value
                    }
                }
            }
        },
        removeAttr: function(elem, value) {
            var name, propName, i = 0, attrNames = value && value.match(rnotwhite);
            if (attrNames && 1 === elem.nodeType)
                for (; name = attrNames[i++]; )
                    propName = jQuery.propFix[name] || name,
                    jQuery.expr.match.bool.test(name) ? getSetInput && getSetAttribute || !ruseDefault.test(name) ? elem[propName] = !1 : elem[jQuery.camelCase("default-" + name)] = elem[propName] = !1 : jQuery.attr(elem, name, ""),
                    elem.removeAttribute(getSetAttribute ? name : propName)
        }
    }),
    boolHook = {
        set: function(elem, value, name) {
            return value === !1 ? jQuery.removeAttr(elem, name) : getSetInput && getSetAttribute || !ruseDefault.test(name) ? elem.setAttribute(!getSetAttribute && jQuery.propFix[name] || name, name) : elem[jQuery.camelCase("default-" + name)] = elem[name] = !0,
            name
        }
    },
    jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g), function(i, name) {
        var getter = attrHandle[name] || jQuery.find.attr;
        getSetInput && getSetAttribute || !ruseDefault.test(name) ? attrHandle[name] = function(elem, name, isXML) {
            var ret, handle;
            return isXML || (handle = attrHandle[name],
            attrHandle[name] = ret,
            ret = null != getter(elem, name, isXML) ? name.toLowerCase() : null,
            attrHandle[name] = handle),
            ret
        }
        : attrHandle[name] = function(elem, name, isXML) {
            return isXML ? void 0 : elem[jQuery.camelCase("default-" + name)] ? name.toLowerCase() : null
        }
    }),
    getSetInput && getSetAttribute || (jQuery.attrHooks.value = {
        set: function(elem, value, name) {
            return jQuery.nodeName(elem, "input") ? void (elem.defaultValue = value) : nodeHook && nodeHook.set(elem, value, name)
        }
    }),
    getSetAttribute || (nodeHook = {
        set: function(elem, value, name) {
            var ret = elem.getAttributeNode(name);
            return ret || elem.setAttributeNode(ret = elem.ownerDocument.createAttribute(name)),
            ret.value = value += "",
            "value" === name || value === elem.getAttribute(name) ? value : void 0
        }
    },
    attrHandle.id = attrHandle.name = attrHandle.coords = function(elem, name, isXML) {
        var ret;
        return isXML ? void 0 : (ret = elem.getAttributeNode(name)) && "" !== ret.value ? ret.value : null
    }
    ,
    jQuery.valHooks.button = {
        get: function(elem, name) {
            var ret = elem.getAttributeNode(name);
            return ret && ret.specified ? ret.value : void 0
        },
        set: nodeHook.set
    },
    jQuery.attrHooks.contenteditable = {
        set: function(elem, value, name) {
            nodeHook.set(elem, "" === value ? !1 : value, name)
        }
    },
    jQuery.each(["width", "height"], function(i, name) {
        jQuery.attrHooks[name] = {
            set: function(elem, value) {
                return "" === value ? (elem.setAttribute(name, "auto"),
                value) : void 0
            }
        }
    })),
    support.style || (jQuery.attrHooks.style = {
        get: function(elem) {
            return elem.style.cssText || void 0
        },
        set: function(elem, value) {
            return elem.style.cssText = value + ""
        }
    });
    var rfocusable = /^(?:input|select|textarea|button|object)$/i
      , rclickable = /^(?:a|area)$/i;
    jQuery.fn.extend({
        prop: function(name, value) {
            return access(this, jQuery.prop, name, value, arguments.length > 1)
        },
        removeProp: function(name) {
            return name = jQuery.propFix[name] || name,
            this.each(function() {
                try {
                    this[name] = void 0,
                    delete this[name]
                } catch (e) {}
            })
        }
    }),
    jQuery.extend({
        prop: function(elem, name, value) {
            var ret, hooks, nType = elem.nodeType;
            if (3 !== nType && 8 !== nType && 2 !== nType)
                return 1 === nType && jQuery.isXMLDoc(elem) || (name = jQuery.propFix[name] || name,
                hooks = jQuery.propHooks[name]),
                void 0 !== value ? hooks && "set"in hooks && void 0 !== (ret = hooks.set(elem, value, name)) ? ret : elem[name] = value : hooks && "get"in hooks && null !== (ret = hooks.get(elem, name)) ? ret : elem[name]
        },
        propHooks: {
            tabIndex: {
                get: function(elem) {
                    var tabindex = jQuery.find.attr(elem, "tabindex");
                    return tabindex ? parseInt(tabindex, 10) : rfocusable.test(elem.nodeName) || rclickable.test(elem.nodeName) && elem.href ? 0 : -1
                }
            }
        },
        propFix: {
            "for": "htmlFor",
            "class": "className"
        }
    }),
    support.hrefNormalized || jQuery.each(["href", "src"], function(i, name) {
        jQuery.propHooks[name] = {
            get: function(elem) {
                return elem.getAttribute(name, 4)
            }
        }
    }),
    support.optSelected || (jQuery.propHooks.selected = {
        get: function(elem) {
            var parent = elem.parentNode;
            return parent && (parent.selectedIndex,
            parent.parentNode && parent.parentNode.selectedIndex),
            null
        },
        set: function(elem) {
            var parent = elem.parentNode;
            parent && (parent.selectedIndex,
            parent.parentNode && parent.parentNode.selectedIndex)
        }
    }),
    jQuery.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
        jQuery.propFix[this.toLowerCase()] = this
    }),
    support.enctype || (jQuery.propFix.enctype = "encoding");
    var rclass = /[\t\r\n\f]/g;
    jQuery.fn.extend({
        addClass: function(value) {
            var classes, elem, cur, curValue, clazz, j, finalValue, i = 0;
            if (jQuery.isFunction(value))
                return this.each(function(j) {
                    jQuery(this).addClass(value.call(this, j, getClass(this)))
                });
            if ("string" == typeof value && value)
                for (classes = value.match(rnotwhite) || []; elem = this[i++]; )
                    if (curValue = getClass(elem),
                    cur = 1 === elem.nodeType && (" " + curValue + " ").replace(rclass, " ")) {
                        for (j = 0; clazz = classes[j++]; )
                            cur.indexOf(" " + clazz + " ") < 0 && (cur += clazz + " ");
                        finalValue = jQuery.trim(cur),
                        curValue !== finalValue && jQuery.attr(elem, "class", finalValue)
                    }
            return this
        },
        removeClass: function(value) {
            var classes, elem, cur, curValue, clazz, j, finalValue, i = 0;
            if (jQuery.isFunction(value))
                return this.each(function(j) {
                    jQuery(this).removeClass(value.call(this, j, getClass(this)))
                });
            if (!arguments.length)
                return this.attr("class", "");
            if ("string" == typeof value && value)
                for (classes = value.match(rnotwhite) || []; elem = this[i++]; )
                    if (curValue = getClass(elem),
                    cur = 1 === elem.nodeType && (" " + curValue + " ").replace(rclass, " ")) {
                        for (j = 0; clazz = classes[j++]; )
                            for (; cur.indexOf(" " + clazz + " ") > -1; )
                                cur = cur.replace(" " + clazz + " ", " ");
                        finalValue = jQuery.trim(cur),
                        curValue !== finalValue && jQuery.attr(elem, "class", finalValue)
                    }
            return this
        },
        toggleClass: function(value, stateVal) {
            var type = typeof value;
            return "boolean" == typeof stateVal && "string" === type ? stateVal ? this.addClass(value) : this.removeClass(value) : jQuery.isFunction(value) ? this.each(function(i) {
                jQuery(this).toggleClass(value.call(this, i, getClass(this), stateVal), stateVal)
            }) : this.each(function() {
                var className, i, self, classNames;
                if ("string" === type)
                    for (i = 0,
                    self = jQuery(this),
                    classNames = value.match(rnotwhite) || []; className = classNames[i++]; )
                        self.hasClass(className) ? self.removeClass(className) : self.addClass(className);
                else
                    void 0 !== value && "boolean" !== type || (className = getClass(this),
                    className && jQuery._data(this, "__className__", className),
                    jQuery.attr(this, "class", className || value === !1 ? "" : jQuery._data(this, "__className__") || ""))
            })
        },
        hasClass: function(selector) {
            var className, elem, i = 0;
            for (className = " " + selector + " "; elem = this[i++]; )
                if (1 === elem.nodeType && (" " + getClass(elem) + " ").replace(rclass, " ").indexOf(className) > -1)
                    return !0;
            return !1
        }
    }),
    jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(i, name) {
        jQuery.fn[name] = function(data, fn) {
            return arguments.length > 0 ? this.on(name, null, data, fn) : this.trigger(name)
        }
    }),
    jQuery.fn.extend({
        hover: function(fnOver, fnOut) {
            return this.mouseenter(fnOver).mouseleave(fnOut || fnOver)
        }
    });
    var location = window.location
      , nonce = jQuery.now()
      , rquery = /\?/
      , rvalidtokens = /(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
    jQuery.parseJSON = function(data) {
        if (window.JSON && window.JSON.parse)
            return window.JSON.parse(data + "");
        var requireNonComma, depth = null, str = jQuery.trim(data + "");
        return str && !jQuery.trim(str.replace(rvalidtokens, function(token, comma, open, close) {
            return requireNonComma && comma && (depth = 0),
            0 === depth ? token : (requireNonComma = open || comma,
            depth += !close - !open,
            "")
        })) ? Function("return " + str)() : jQuery.error("Invalid JSON: " + data)
    }
    ,
    jQuery.parseXML = function(data) {
        var xml, tmp;
        if (!data || "string" != typeof data)
            return null;
        try {
            window.DOMParser ? (tmp = new window.DOMParser,
            xml = tmp.parseFromString(data, "text/xml")) : (xml = new window.ActiveXObject("Microsoft.XMLDOM"),
            xml.async = "false",
            xml.loadXML(data))
        } catch (e) {
            xml = void 0
        }
        return xml && xml.documentElement && !xml.getElementsByTagName("parsererror").length || jQuery.error("Invalid XML: " + data),
        xml
    }
    ;
    var rhash = /#.*$/
      , rts = /([?&])_=[^&]*/
      , rheaders = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm
      , rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/
      , rnoContent = /^(?:GET|HEAD)$/
      , rprotocol = /^\/\//
      , rurl = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/
      , prefilters = {}
      , transports = {}
      , allTypes = "*/".concat("*")
      , ajaxLocation = location.href
      , ajaxLocParts = rurl.exec(ajaxLocation.toLowerCase()) || [];
    jQuery.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: ajaxLocation,
            type: "GET",
            isLocal: rlocalProtocol.test(ajaxLocParts[1]),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": allTypes,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /\bxml\b/,
                html: /\bhtml/,
                json: /\bjson\b/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": !0,
                "text json": jQuery.parseJSON,
                "text xml": jQuery.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function(target, settings) {
            return settings ? ajaxExtend(ajaxExtend(target, jQuery.ajaxSettings), settings) : ajaxExtend(jQuery.ajaxSettings, target)
        },
        ajaxPrefilter: addToPrefiltersOrTransports(prefilters),
        ajaxTransport: addToPrefiltersOrTransports(transports),
        ajax: function(url, options) {
            function done(status, nativeStatusText, responses, headers) {
                var isSuccess, success, error, response, modified, statusText = nativeStatusText;
                2 !== state && (state = 2,
                timeoutTimer && window.clearTimeout(timeoutTimer),
                transport = void 0,
                responseHeadersString = headers || "",
                jqXHR.readyState = status > 0 ? 4 : 0,
                isSuccess = status >= 200 && 300 > status || 304 === status,
                responses && (response = ajaxHandleResponses(s, jqXHR, responses)),
                response = ajaxConvert(s, response, jqXHR, isSuccess),
                isSuccess ? (s.ifModified && (modified = jqXHR.getResponseHeader("Last-Modified"),
                modified && (jQuery.lastModified[cacheURL] = modified),
                modified = jqXHR.getResponseHeader("etag"),
                modified && (jQuery.etag[cacheURL] = modified)),
                204 === status || "HEAD" === s.type ? statusText = "nocontent" : 304 === status ? statusText = "notmodified" : (statusText = response.state,
                success = response.data,
                error = response.error,
                isSuccess = !error)) : (error = statusText,
                !status && statusText || (statusText = "error",
                0 > status && (status = 0))),
                jqXHR.status = status,
                jqXHR.statusText = (nativeStatusText || statusText) + "",
                isSuccess ? deferred.resolveWith(callbackContext, [success, statusText, jqXHR]) : deferred.rejectWith(callbackContext, [jqXHR, statusText, error]),
                jqXHR.statusCode(statusCode),
                statusCode = void 0,
                fireGlobals && globalEventContext.trigger(isSuccess ? "ajaxSuccess" : "ajaxError", [jqXHR, s, isSuccess ? success : error]),
                completeDeferred.fireWith(callbackContext, [jqXHR, statusText]),
                fireGlobals && (globalEventContext.trigger("ajaxComplete", [jqXHR, s]),
                --jQuery.active || jQuery.event.trigger("ajaxStop")))
            }
            "object" == typeof url && (options = url,
            url = void 0),
            options = options || {};
            var parts, i, cacheURL, responseHeadersString, timeoutTimer, fireGlobals, transport, responseHeaders, s = jQuery.ajaxSetup({}, options), callbackContext = s.context || s, globalEventContext = s.context && (callbackContext.nodeType || callbackContext.jquery) ? jQuery(callbackContext) : jQuery.event, deferred = jQuery.Deferred(), completeDeferred = jQuery.Callbacks("once memory"), statusCode = s.statusCode || {}, requestHeaders = {}, requestHeadersNames = {}, state = 0, strAbort = "canceled", jqXHR = {
                readyState: 0,
                getResponseHeader: function(key) {
                    var match;
                    if (2 === state) {
                        if (!responseHeaders)
                            for (responseHeaders = {}; match = rheaders.exec(responseHeadersString); )
                                responseHeaders[match[1].toLowerCase()] = match[2];
                        match = responseHeaders[key.toLowerCase()]
                    }
                    return null == match ? null : match
                },
                getAllResponseHeaders: function() {
                    return 2 === state ? responseHeadersString : null
                },
                setRequestHeader: function(name, value) {
                    var lname = name.toLowerCase();
                    return state || (name = requestHeadersNames[lname] = requestHeadersNames[lname] || name,
                    requestHeaders[name] = value),
                    this
                },
                overrideMimeType: function(type) {
                    return state || (s.mimeType = type),
                    this
                },
                statusCode: function(map) {
                    var code;
                    if (map)
                        if (2 > state)
                            for (code in map)
                                statusCode[code] = [statusCode[code], map[code]];
                        else
                            jqXHR.always(map[jqXHR.status]);
                    return this
                },
                abort: function(statusText) {
                    var finalText = statusText || strAbort;
                    return transport && transport.abort(finalText),
                    done(0, finalText),
                    this
                }
            };
            if (deferred.promise(jqXHR).complete = completeDeferred.add,
            jqXHR.success = jqXHR.done,
            jqXHR.error = jqXHR.fail,
            s.url = ((url || s.url || ajaxLocation) + "").replace(rhash, "").replace(rprotocol, ajaxLocParts[1] + "//"),
            s.type = options.method || options.type || s.method || s.type,
            s.dataTypes = jQuery.trim(s.dataType || "*").toLowerCase().match(rnotwhite) || [""],
            null == s.crossDomain && (parts = rurl.exec(s.url.toLowerCase()),
            s.crossDomain = !(!parts || parts[1] === ajaxLocParts[1] && parts[2] === ajaxLocParts[2] && (parts[3] || ("http:" === parts[1] ? "80" : "443")) === (ajaxLocParts[3] || ("http:" === ajaxLocParts[1] ? "80" : "443")))),
            s.data && s.processData && "string" != typeof s.data && (s.data = jQuery.param(s.data, s.traditional)),
            inspectPrefiltersOrTransports(prefilters, s, options, jqXHR),
            2 === state)
                return jqXHR;
            fireGlobals = jQuery.event && s.global,
            fireGlobals && 0 === jQuery.active++ && jQuery.event.trigger("ajaxStart"),
            s.type = s.type.toUpperCase(),
            s.hasContent = !rnoContent.test(s.type),
            cacheURL = s.url,
            s.hasContent || (s.data && (cacheURL = s.url += (rquery.test(cacheURL) ? "&" : "?") + s.data,
            delete s.data),
            s.cache === !1 && (s.url = rts.test(cacheURL) ? cacheURL.replace(rts, "$1_=" + nonce++) : cacheURL + (rquery.test(cacheURL) ? "&" : "?") + "_=" + nonce++)),
            s.ifModified && (jQuery.lastModified[cacheURL] && jqXHR.setRequestHeader("If-Modified-Since", jQuery.lastModified[cacheURL]),
            jQuery.etag[cacheURL] && jqXHR.setRequestHeader("If-None-Match", jQuery.etag[cacheURL])),
            (s.data && s.hasContent && s.contentType !== !1 || options.contentType) && jqXHR.setRequestHeader("Content-Type", s.contentType),
            jqXHR.setRequestHeader("Accept", s.dataTypes[0] && s.accepts[s.dataTypes[0]] ? s.accepts[s.dataTypes[0]] + ("*" !== s.dataTypes[0] ? ", " + allTypes + "; q=0.01" : "") : s.accepts["*"]);
            for (i in s.headers)
                jqXHR.setRequestHeader(i, s.headers[i]);
            if (s.beforeSend && (s.beforeSend.call(callbackContext, jqXHR, s) === !1 || 2 === state))
                return jqXHR.abort();
            strAbort = "abort";
            for (i in {
                success: 1,
                error: 1,
                complete: 1
            })
                jqXHR[i](s[i]);
            if (transport = inspectPrefiltersOrTransports(transports, s, options, jqXHR)) {
                if (jqXHR.readyState = 1,
                fireGlobals && globalEventContext.trigger("ajaxSend", [jqXHR, s]),
                2 === state)
                    return jqXHR;
                s.async && s.timeout > 0 && (timeoutTimer = window.setTimeout(function() {
                    jqXHR.abort("timeout")
                }, s.timeout));
                try {
                    state = 1,
                    transport.send(requestHeaders, done)
                } catch (e) {
                    if (!(2 > state))
                        throw e;
                    done(-1, e)
                }
            } else
                done(-1, "No Transport");
            return jqXHR
        },
        getJSON: function(url, data, callback) {
            return jQuery.get(url, data, callback, "json")
        },
        getScript: function(url, callback) {
            return jQuery.get(url, void 0, callback, "script")
        }
    }),
    jQuery.each(["get", "post"], function(i, method) {
        jQuery[method] = function(url, data, callback, type) {
            return jQuery.isFunction(data) && (type = type || callback,
            callback = data,
            data = void 0),
            jQuery.ajax(jQuery.extend({
                url: url,
                type: method,
                dataType: type,
                data: data,
                success: callback
            }, jQuery.isPlainObject(url) && url))
        }
    }),
    jQuery._evalUrl = function(url) {
        return jQuery.ajax({
            url: url,
            type: "GET",
            dataType: "script",
            cache: !0,
            async: !1,
            global: !1,
            "throws": !0
        })
    }
    ,
    jQuery.fn.extend({
        wrapAll: function(html) {
            if (jQuery.isFunction(html))
                return this.each(function(i) {
                    jQuery(this).wrapAll(html.call(this, i))
                });
            if (this[0]) {
                var wrap = jQuery(html, this[0].ownerDocument).eq(0).clone(!0);
                this[0].parentNode && wrap.insertBefore(this[0]),
                wrap.map(function() {
                    for (var elem = this; elem.firstChild && 1 === elem.firstChild.nodeType; )
                        elem = elem.firstChild;
                    return elem
                }).append(this)
            }
            return this
        },
        wrapInner: function(html) {
            return jQuery.isFunction(html) ? this.each(function(i) {
                jQuery(this).wrapInner(html.call(this, i))
            }) : this.each(function() {
                var self = jQuery(this)
                  , contents = self.contents();
                contents.length ? contents.wrapAll(html) : self.append(html)
            })
        },
        wrap: function(html) {
            var isFunction = jQuery.isFunction(html);
            return this.each(function(i) {
                jQuery(this).wrapAll(isFunction ? html.call(this, i) : html)
            })
        },
        unwrap: function() {
            return this.parent().each(function() {
                jQuery.nodeName(this, "body") || jQuery(this).replaceWith(this.childNodes)
            }).end()
        }
    }),
    jQuery.expr.filters.hidden = function(elem) {
        return support.reliableHiddenOffsets() ? elem.offsetWidth <= 0 && elem.offsetHeight <= 0 && !elem.getClientRects().length : filterHidden(elem)
    }
    ,
    jQuery.expr.filters.visible = function(elem) {
        return !jQuery.expr.filters.hidden(elem)
    }
    ;
    var r20 = /%20/g
      , rbracket = /\[\]$/
      , rCRLF = /\r?\n/g
      , rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i
      , rsubmittable = /^(?:input|select|textarea|keygen)/i;
    jQuery.param = function(a, traditional) {
        var prefix, s = [], add = function(key, value) {
            value = jQuery.isFunction(value) ? value() : null == value ? "" : value,
            s[s.length] = encodeURIComponent(key) + "=" + encodeURIComponent(value)
        };
        if (void 0 === traditional && (traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional),
        jQuery.isArray(a) || a.jquery && !jQuery.isPlainObject(a))
            jQuery.each(a, function() {
                add(this.name, this.value)
            });
        else
            for (prefix in a)
                buildParams(prefix, a[prefix], traditional, add);
        return s.join("&").replace(r20, "+")
    }
    ,
    jQuery.fn.extend({
        serialize: function() {
            return jQuery.param(this.serializeArray())
        },
        serializeArray: function() {
            return this.map(function() {
                var elements = jQuery.prop(this, "elements");
                return elements ? jQuery.makeArray(elements) : this
            }).filter(function() {
                var type = this.type;
                return this.name && !jQuery(this).is(":disabled") && rsubmittable.test(this.nodeName) && !rsubmitterTypes.test(type) && (this.checked || !rcheckableType.test(type))
            }).map(function(i, elem) {
                var val = jQuery(this).val();
                return null == val ? null : jQuery.isArray(val) ? jQuery.map(val, function(val) {
                    return {
                        name: elem.name,
                        value: val.replace(rCRLF, "\r\n")
                    }
                }) : {
                    name: elem.name,
                    value: val.replace(rCRLF, "\r\n")
                }
            }).get()
        }
    }),
    jQuery.ajaxSettings.xhr = void 0 !== window.ActiveXObject ? function() {
        return this.isLocal ? createActiveXHR() : document.documentMode > 8 ? createStandardXHR() : /^(get|post|head|put|delete|options)$/i.test(this.type) && createStandardXHR() || createActiveXHR()
    }
    : createStandardXHR;
    var xhrId = 0
      , xhrCallbacks = {}
      , xhrSupported = jQuery.ajaxSettings.xhr();
    window.attachEvent && window.attachEvent("onunload", function() {
        for (var key in xhrCallbacks)
            xhrCallbacks[key](void 0, !0)
    }),
    support.cors = !!xhrSupported && "withCredentials"in xhrSupported,
    xhrSupported = support.ajax = !!xhrSupported,
    xhrSupported && jQuery.ajaxTransport(function(options) {
        if (!options.crossDomain || support.cors) {
            var callback;
            return {
                send: function(headers, complete) {
                    var i, xhr = options.xhr(), id = ++xhrId;
                    if (xhr.open(options.type, options.url, options.async, options.username, options.password),
                    options.xhrFields)
                        for (i in options.xhrFields)
                            xhr[i] = options.xhrFields[i];
                    options.mimeType && xhr.overrideMimeType && xhr.overrideMimeType(options.mimeType),
                    options.crossDomain || headers["X-Requested-With"] || (headers["X-Requested-With"] = "XMLHttpRequest");
                    for (i in headers)
                        void 0 !== headers[i] && xhr.setRequestHeader(i, headers[i] + "");
                    xhr.send(options.hasContent && options.data || null),
                    callback = function(_, isAbort) {
                        var status, statusText, responses;
                        if (callback && (isAbort || 4 === xhr.readyState))
                            if (delete xhrCallbacks[id],
                            callback = void 0,
                            xhr.onreadystatechange = jQuery.noop,
                            isAbort)
                                4 !== xhr.readyState && xhr.abort();
                            else {
                                responses = {},
                                status = xhr.status,
                                "string" == typeof xhr.responseText && (responses.text = xhr.responseText);
                                try {
                                    statusText = xhr.statusText
                                } catch (e) {
                                    statusText = ""
                                }
                                status || !options.isLocal || options.crossDomain ? 1223 === status && (status = 204) : status = responses.text ? 200 : 404
                            }
                        responses && complete(status, statusText, responses, xhr.getAllResponseHeaders())
                    }
                    ,
                    options.async ? 4 === xhr.readyState ? window.setTimeout(callback) : xhr.onreadystatechange = xhrCallbacks[id] = callback : callback()
                },
                abort: function() {
                    callback && callback(void 0, !0)
                }
            }
        }
    }),
    jQuery.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /\b(?:java|ecma)script\b/
        },
        converters: {
            "text script": function(text) {
                return jQuery.globalEval(text),
                text
            }
        }
    }),
    jQuery.ajaxPrefilter("script", function(s) {
        void 0 === s.cache && (s.cache = !1),
        s.crossDomain && (s.type = "GET",
        s.global = !1)
    }),
    jQuery.ajaxTransport("script", function(s) {
        if (s.crossDomain) {
            var script, head = document.head || jQuery("head")[0] || document.documentElement;
            return {
                send: function(_, callback) {
                    script = document.createElement("script"),
                    script.async = !0,
                    s.scriptCharset && (script.charset = s.scriptCharset),
                    script.src = s.url,
                    script.onload = script.onreadystatechange = function(_, isAbort) {
                        (isAbort || !script.readyState || /loaded|complete/.test(script.readyState)) && (script.onload = script.onreadystatechange = null,
                        script.parentNode && script.parentNode.removeChild(script),
                        script = null,
                        isAbort || callback(200, "success"))
                    }
                    ,
                    head.insertBefore(script, head.firstChild)
                },
                abort: function() {
                    script && script.onload(void 0, !0)
                }
            }
        }
    });
    var oldCallbacks = []
      , rjsonp = /(=)\?(?=&|$)|\?\?/;
    jQuery.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            var callback = oldCallbacks.pop() || jQuery.expando + "_" + nonce++;
            return this[callback] = !0,
            callback
        }
    }),
    jQuery.ajaxPrefilter("json jsonp", function(s, originalSettings, jqXHR) {
        var callbackName, overwritten, responseContainer, jsonProp = s.jsonp !== !1 && (rjsonp.test(s.url) ? "url" : "string" == typeof s.data && 0 === (s.contentType || "").indexOf("application/x-www-form-urlencoded") && rjsonp.test(s.data) && "data");
        return jsonProp || "jsonp" === s.dataTypes[0] ? (callbackName = s.jsonpCallback = jQuery.isFunction(s.jsonpCallback) ? s.jsonpCallback() : s.jsonpCallback,
        jsonProp ? s[jsonProp] = s[jsonProp].replace(rjsonp, "$1" + callbackName) : s.jsonp !== !1 && (s.url += (rquery.test(s.url) ? "&" : "?") + s.jsonp + "=" + callbackName),
        s.converters["script json"] = function() {
            return responseContainer || jQuery.error(callbackName + " was not called"),
            responseContainer[0]
        }
        ,
        s.dataTypes[0] = "json",
        overwritten = window[callbackName],
        window[callbackName] = function() {
            responseContainer = arguments
        }
        ,
        jqXHR.always(function() {
            void 0 === overwritten ? jQuery(window).removeProp(callbackName) : window[callbackName] = overwritten,
            s[callbackName] && (s.jsonpCallback = originalSettings.jsonpCallback,
            oldCallbacks.push(callbackName)),
            responseContainer && jQuery.isFunction(overwritten) && overwritten(responseContainer[0]),
            responseContainer = overwritten = void 0
        }),
        "script") : void 0
    }),
    jQuery.parseHTML = function(data, context, keepScripts) {
        if (!data || "string" != typeof data)
            return null;
        "boolean" == typeof context && (keepScripts = context,
        context = !1),
        context = context || document;
        var parsed = rsingleTag.exec(data)
          , scripts = !keepScripts && [];
        return parsed ? [context.createElement(parsed[1])] : (parsed = buildFragment([data], context, scripts),
        scripts && scripts.length && jQuery(scripts).remove(),
        jQuery.merge([], parsed.childNodes))
    }
    ;
    var _load = jQuery.fn.load;
    jQuery.fn.load = function(url, params, callback) {
        if ("string" != typeof url && _load)
            return _load.apply(this, arguments);
        var selector, type, response, self = this, off = url.indexOf(" ");
        return off > -1 && (selector = jQuery.trim(url.slice(off, url.length)),
        url = url.slice(0, off)),
        jQuery.isFunction(params) ? (callback = params,
        params = void 0) : params && "object" == typeof params && (type = "POST"),
        self.length > 0 && jQuery.ajax({
            url: url,
            type: type || "GET",
            dataType: "html",
            data: params
        }).done(function(responseText) {
            response = arguments,
            self.html(selector ? jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector) : responseText)
        }).always(callback && function(jqXHR, status) {
            self.each(function() {
                callback.apply(this, response || [jqXHR.responseText, status, jqXHR])
            })
        }
        ),
        this
    }
    ,
    jQuery.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(i, type) {
        jQuery.fn[type] = function(fn) {
            return this.on(type, fn)
        }
    }),
    jQuery.expr.filters.animated = function(elem) {
        return jQuery.grep(jQuery.timers, function(fn) {
            return elem === fn.elem
        }).length
    }
    ,
    jQuery.offset = {
        setOffset: function(elem, options, i) {
            var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition, position = jQuery.css(elem, "position"), curElem = jQuery(elem), props = {};
            "static" === position && (elem.style.position = "relative"),
            curOffset = curElem.offset(),
            curCSSTop = jQuery.css(elem, "top"),
            curCSSLeft = jQuery.css(elem, "left"),
            calculatePosition = ("absolute" === position || "fixed" === position) && jQuery.inArray("auto", [curCSSTop, curCSSLeft]) > -1,
            calculatePosition ? (curPosition = curElem.position(),
            curTop = curPosition.top,
            curLeft = curPosition.left) : (curTop = parseFloat(curCSSTop) || 0,
            curLeft = parseFloat(curCSSLeft) || 0),
            jQuery.isFunction(options) && (options = options.call(elem, i, jQuery.extend({}, curOffset))),
            null != options.top && (props.top = options.top - curOffset.top + curTop),
            null != options.left && (props.left = options.left - curOffset.left + curLeft),
            "using"in options ? options.using.call(elem, props) : curElem.css(props)
        }
    },
    jQuery.fn.extend({
        offset: function(options) {
            if (arguments.length)
                return void 0 === options ? this : this.each(function(i) {
                    jQuery.offset.setOffset(this, options, i)
                });
            var docElem, win, box = {
                top: 0,
                left: 0
            }, elem = this[0], doc = elem && elem.ownerDocument;
            if (doc)
                return docElem = doc.documentElement,
                jQuery.contains(docElem, elem) ? ("undefined" != typeof elem.getBoundingClientRect && (box = elem.getBoundingClientRect()),
                win = getWindow(doc),
                {
                    top: box.top + (win.pageYOffset || docElem.scrollTop) - (docElem.clientTop || 0),
                    left: box.left + (win.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || 0)
                }) : box
        },
        position: function() {
            if (this[0]) {
                var offsetParent, offset, parentOffset = {
                    top: 0,
                    left: 0
                }, elem = this[0];
                return "fixed" === jQuery.css(elem, "position") ? offset = elem.getBoundingClientRect() : (offsetParent = this.offsetParent(),
                offset = this.offset(),
                jQuery.nodeName(offsetParent[0], "html") || (parentOffset = offsetParent.offset()),
                parentOffset.top += jQuery.css(offsetParent[0], "borderTopWidth", !0),
                parentOffset.left += jQuery.css(offsetParent[0], "borderLeftWidth", !0)),
                {
                    top: offset.top - parentOffset.top - jQuery.css(elem, "marginTop", !0),
                    left: offset.left - parentOffset.left - jQuery.css(elem, "marginLeft", !0)
                }
            }
        },
        offsetParent: function() {
            return this.map(function() {
                for (var offsetParent = this.offsetParent; offsetParent && !jQuery.nodeName(offsetParent, "html") && "static" === jQuery.css(offsetParent, "position"); )
                    offsetParent = offsetParent.offsetParent;
                return offsetParent || documentElement
            })
        }
    }),
    jQuery.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function(method, prop) {
        var top = /Y/.test(prop);
        jQuery.fn[method] = function(val) {
            return access(this, function(elem, method, val) {
                var win = getWindow(elem);
                return void 0 === val ? win ? prop in win ? win[prop] : win.document.documentElement[method] : elem[method] : void (win ? win.scrollTo(top ? jQuery(win).scrollLeft() : val, top ? val : jQuery(win).scrollTop()) : elem[method] = val)
            }, method, val, arguments.length, null)
        }
    }),
    jQuery.each(["top", "left"], function(i, prop) {
        jQuery.cssHooks[prop] = addGetHookIf(support.pixelPosition, function(elem, computed) {
            return computed ? (computed = curCSS(elem, prop),
            rnumnonpx.test(computed) ? jQuery(elem).position()[prop] + "px" : computed) : void 0
        })
    }),
    jQuery.each({
        Height: "height",
        Width: "width"
    }, function(name, type) {
        jQuery.each({
            padding: "inner" + name,
            content: type,
            "": "outer" + name
        }, function(defaultExtra, funcName) {
            jQuery.fn[funcName] = function(margin, value) {
                var chainable = arguments.length && (defaultExtra || "boolean" != typeof margin)
                  , extra = defaultExtra || (margin === !0 || value === !0 ? "margin" : "border");
                return access(this, function(elem, type, value) {
                    var doc;
                    return jQuery.isWindow(elem) ? elem.document.documentElement["client" + name] : 9 === elem.nodeType ? (doc = elem.documentElement,
                    Math.max(elem.body["scroll" + name], doc["scroll" + name], elem.body["offset" + name], doc["offset" + name], doc["client" + name])) : void 0 === value ? jQuery.css(elem, type, extra) : jQuery.style(elem, type, value, extra)
                }, type, chainable ? margin : void 0, chainable, null)
            }
        })
    }),
    jQuery.fn.extend({
        bind: function(types, data, fn) {
            return this.on(types, null, data, fn)
        },
        unbind: function(types, fn) {
            return this.off(types, null, fn)
        },
        delegate: function(selector, types, data, fn) {
            return this.on(types, selector, data, fn)
        },
        undelegate: function(selector, types, fn) {
            return 1 === arguments.length ? this.off(selector, "**") : this.off(types, selector || "**", fn)
        }
    }),
    jQuery.fn.size = function() {
        return this.length
    }
    ,
    jQuery.fn.andSelf = jQuery.fn.addBack,
    "function" == typeof define && define.amd && define("jquery", [], function() {
        return jQuery
    });
    var _jQuery = window.jQuery
      , _$ = window.$;
    return jQuery.noConflict = function(deep) {
        return window.$ === jQuery && (window.$ = _$),
        deep && window.jQuery === jQuery && (window.jQuery = _jQuery),
        jQuery
    }
    ,
    noGlobal || (window.jQuery = window.$ = jQuery),
    jQuery
}),
function(window, document, undefined) {
    "use strict";
    function minErr(module, ErrorConstructor) {
        return ErrorConstructor = ErrorConstructor || Error,
        function() {
            var message, i, code = arguments[0], prefix = "[" + (module ? module + ":" : "") + code + "] ", template = arguments[1], templateArgs = arguments;
            for (message = prefix + template.replace(/\{\d+\}/g, function(match) {
                var index = +match.slice(1, -1);
                return index + 2 < templateArgs.length ? toDebugString(templateArgs[index + 2]) : match
            }),
            message = message + "\nhttp://errors.angularjs.org/1.3.14/" + (module ? module + "/" : "") + code,
            i = 2; i < arguments.length; i++)
                message = message + (2 == i ? "?" : "&") + "p" + (i - 2) + "=" + encodeURIComponent(toDebugString(arguments[i]));
            return new ErrorConstructor(message)
        }
    }
    function isArrayLike(obj) {
        if (null == obj || isWindow(obj))
            return !1;
        var length = obj.length;
        return obj.nodeType === NODE_TYPE_ELEMENT && length ? !0 : isString(obj) || isArray(obj) || 0 === length || "number" == typeof length && length > 0 && length - 1 in obj
    }
    function forEach(obj, iterator, context) {
        var key, length;
        if (obj)
            if (isFunction(obj))
                for (key in obj)
                    "prototype" == key || "length" == key || "name" == key || obj.hasOwnProperty && !obj.hasOwnProperty(key) || iterator.call(context, obj[key], key, obj);
            else if (isArray(obj) || isArrayLike(obj)) {
                var isPrimitive = "object" != typeof obj;
                for (key = 0,
                length = obj.length; length > key; key++)
                    (isPrimitive || key in obj) && iterator.call(context, obj[key], key, obj)
            } else if (obj.forEach && obj.forEach !== forEach)
                obj.forEach(iterator, context, obj);
            else
                for (key in obj)
                    obj.hasOwnProperty(key) && iterator.call(context, obj[key], key, obj);
        return obj
    }
    function sortedKeys(obj) {
        return Object.keys(obj).sort()
    }
    function forEachSorted(obj, iterator, context) {
        for (var keys = sortedKeys(obj), i = 0; i < keys.length; i++)
            iterator.call(context, obj[keys[i]], keys[i]);
        return keys
    }
    function reverseParams(iteratorFn) {
        return function(value, key) {
            iteratorFn(key, value)
        }
    }
    function nextUid() {
        return ++uid
    }
    function setHashKey(obj, h) {
        h ? obj.$$hashKey = h : delete obj.$$hashKey
    }
    function extend(dst) {
        for (var h = dst.$$hashKey, i = 1, ii = arguments.length; ii > i; i++) {
            var obj = arguments[i];
            if (obj)
                for (var keys = Object.keys(obj), j = 0, jj = keys.length; jj > j; j++) {
                    var key = keys[j];
                    dst[key] = obj[key]
                }
        }
        return setHashKey(dst, h),
        dst
    }
    function int(str) {
        return parseInt(str, 10)
    }
    function inherit(parent, extra) {
        return extend(Object.create(parent), extra)
    }
    function noop() {}
    function identity($) {
        return $
    }
    function valueFn(value) {
        return function() {
            return value
        }
    }
    function isUndefined(value) {
        return "undefined" == typeof value
    }
    function isDefined(value) {
        return "undefined" != typeof value
    }
    function isObject(value) {
        return null !== value && "object" == typeof value
    }
    function isString(value) {
        return "string" == typeof value
    }
    function isNumber(value) {
        return "number" == typeof value
    }
    function isDate(value) {
        return "[object Date]" === toString.call(value)
    }
    function isFunction(value) {
        return "function" == typeof value
    }
    function isRegExp(value) {
        return "[object RegExp]" === toString.call(value)
    }
    function isWindow(obj) {
        return obj && obj.window === obj
    }
    function isScope(obj) {
        return obj && obj.$evalAsync && obj.$watch
    }
    function isFile(obj) {
        return "[object File]" === toString.call(obj)
    }
    function isFormData(obj) {
        return "[object FormData]" === toString.call(obj)
    }
    function isBlob(obj) {
        return "[object Blob]" === toString.call(obj)
    }
    function isBoolean(value) {
        return "boolean" == typeof value
    }
    function isPromiseLike(obj) {
        return obj && isFunction(obj.then)
    }
    function isElement(node) {
        return !(!node || !(node.nodeName || node.prop && node.attr && node.find))
    }
    function makeMap(str) {
        var i, obj = {}, items = str.split(",");
        for (i = 0; i < items.length; i++)
            obj[items[i]] = !0;
        return obj
    }
    function nodeName_(element) {
        return lowercase(element.nodeName || element[0] && element[0].nodeName)
    }
    function arrayRemove(array, value) {
        var index = array.indexOf(value);
        return index >= 0 && array.splice(index, 1),
        value
    }
    function copy(source, destination, stackSource, stackDest) {
        if (isWindow(source) || isScope(source))
            throw ngMinErr("cpws", "Can't copy! Making copies of Window or Scope instances is not supported.");
        if (destination) {
            if (source === destination)
                throw ngMinErr("cpi", "Can't copy! Source and destination are identical.");
            if (stackSource = stackSource || [],
            stackDest = stackDest || [],
            isObject(source)) {
                var index = stackSource.indexOf(source);
                if (-1 !== index)
                    return stackDest[index];
                stackSource.push(source),
                stackDest.push(destination)
            }
            var result;
            if (isArray(source)) {
                destination.length = 0;
                for (var i = 0; i < source.length; i++)
                    result = copy(source[i], null, stackSource, stackDest),
                    isObject(source[i]) && (stackSource.push(source[i]),
                    stackDest.push(result)),
                    destination.push(result)
            } else {
                var h = destination.$$hashKey;
                isArray(destination) ? destination.length = 0 : forEach(destination, function(value, key) {
                    delete destination[key]
                });
                for (var key in source)
                    source.hasOwnProperty(key) && (result = copy(source[key], null, stackSource, stackDest),
                    isObject(source[key]) && (stackSource.push(source[key]),
                    stackDest.push(result)),
                    destination[key] = result);
                setHashKey(destination, h)
            }
        } else if (destination = source,
        source)
            if (isArray(source))
                destination = copy(source, [], stackSource, stackDest);
            else if (isDate(source))
                destination = new Date(source.getTime());
            else if (isRegExp(source))
                destination = new RegExp(source.source,source.toString().match(/[^\/]*$/)[0]),
                destination.lastIndex = source.lastIndex;
            else if (isObject(source)) {
                var emptyObject = Object.create(Object.getPrototypeOf(source));
                destination = copy(source, emptyObject, stackSource, stackDest)
            }
        return destination
    }
    function shallowCopy(src, dst) {
        if (isArray(src)) {
            dst = dst || [];
            for (var i = 0, ii = src.length; ii > i; i++)
                dst[i] = src[i]
        } else if (isObject(src)) {
            dst = dst || {};
            for (var key in src)
                "$" === key.charAt(0) && "$" === key.charAt(1) || (dst[key] = src[key])
        }
        return dst || src
    }
    function equals(o1, o2) {
        if (o1 === o2)
            return !0;
        if (null === o1 || null === o2)
            return !1;
        if (o1 !== o1 && o2 !== o2)
            return !0;
        var length, key, keySet, t1 = typeof o1, t2 = typeof o2;
        if (t1 == t2 && "object" == t1) {
            if (!isArray(o1)) {
                if (isDate(o1))
                    return isDate(o2) ? equals(o1.getTime(), o2.getTime()) : !1;
                if (isRegExp(o1) && isRegExp(o2))
                    return o1.toString() == o2.toString();
                if (isScope(o1) || isScope(o2) || isWindow(o1) || isWindow(o2) || isArray(o2))
                    return !1;
                keySet = {};
                for (key in o1)
                    if ("$" !== key.charAt(0) && !isFunction(o1[key])) {
                        if (!equals(o1[key], o2[key]))
                            return !1;
                        keySet[key] = !0
                    }
                for (key in o2)
                    if (!keySet.hasOwnProperty(key) && "$" !== key.charAt(0) && o2[key] !== undefined && !isFunction(o2[key]))
                        return !1;
                return !0
            }
            if (!isArray(o2))
                return !1;
            if ((length = o1.length) == o2.length) {
                for (key = 0; length > key; key++)
                    if (!equals(o1[key], o2[key]))
                        return !1;
                return !0
            }
        }
        return !1
    }
    function concat(array1, array2, index) {
        return array1.concat(slice.call(array2, index))
    }
    function sliceArgs(args, startIndex) {
        return slice.call(args, startIndex || 0)
    }
    function bind(self, fn) {
        var curryArgs = arguments.length > 2 ? sliceArgs(arguments, 2) : [];
        return !isFunction(fn) || fn instanceof RegExp ? fn : curryArgs.length ? function() {
            return arguments.length ? fn.apply(self, concat(curryArgs, arguments, 0)) : fn.apply(self, curryArgs)
        }
        : function() {
            return arguments.length ? fn.apply(self, arguments) : fn.call(self)
        }
    }
    function toJsonReplacer(key, value) {
        var val = value;
        return "string" == typeof key && "$" === key.charAt(0) && "$" === key.charAt(1) ? val = undefined : isWindow(value) ? val = "$WINDOW" : value && document === value ? val = "$DOCUMENT" : isScope(value) && (val = "$SCOPE"),
        val
    }
    function toJson(obj, pretty) {
        return "undefined" == typeof obj ? undefined : (isNumber(pretty) || (pretty = pretty ? 2 : null),
        JSON.stringify(obj, toJsonReplacer, pretty))
    }
    function fromJson(json) {
        return isString(json) ? JSON.parse(json) : json
    }
    function startingTag(element) {
        element = jqLite(element).clone();
        try {
            element.empty()
        } catch (e) {}
        var elemHtml = jqLite("<div>").append(element).html();
        try {
            return element[0].nodeType === NODE_TYPE_TEXT ? lowercase(elemHtml) : elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/, function(match, nodeName) {
                return "<" + lowercase(nodeName)
            })
        } catch (e) {
            return lowercase(elemHtml)
        }
    }
    function tryDecodeURIComponent(value) {
        try {
            return decodeURIComponent(value)
        } catch (e) {}
    }
    function parseKeyValue(keyValue) {
        var key_value, key, obj = {};
        return forEach((keyValue || "").split("&"), function(keyValue) {
            if (keyValue && (key_value = keyValue.replace(/\+/g, "%20").split("="),
            key = tryDecodeURIComponent(key_value[0]),
            isDefined(key))) {
                var val = isDefined(key_value[1]) ? tryDecodeURIComponent(key_value[1]) : !0;
                hasOwnProperty.call(obj, key) ? isArray(obj[key]) ? obj[key].push(val) : obj[key] = [obj[key], val] : obj[key] = val
            }
        }),
        obj
    }
    function toKeyValue(obj) {
        var parts = [];
        return forEach(obj, function(value, key) {
            isArray(value) ? forEach(value, function(arrayValue) {
                parts.push(encodeUriQuery(key, !0) + (arrayValue === !0 ? "" : "=" + encodeUriQuery(arrayValue, !0)))
            }) : parts.push(encodeUriQuery(key, !0) + (value === !0 ? "" : "=" + encodeUriQuery(value, !0)))
        }),
        parts.length ? parts.join("&") : ""
    }
    function encodeUriSegment(val) {
        return encodeUriQuery(val, !0).replace(/%26/gi, "&").replace(/%3D/gi, "=").replace(/%2B/gi, "+")
    }
    function encodeUriQuery(val, pctEncodeSpaces) {
        return encodeURIComponent(val).replace(/%40/gi, "@").replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%3B/gi, ";").replace(/%20/g, pctEncodeSpaces ? "%20" : "+")
    }
    function getNgAttribute(element, ngAttr) {
        var attr, i, ii = ngAttrPrefixes.length;
        for (element = jqLite(element),
        i = 0; ii > i; ++i)
            if (attr = ngAttrPrefixes[i] + ngAttr,
            isString(attr = element.attr(attr)))
                return attr;
        return null
    }
    function angularInit(element, bootstrap) {
        var appElement, module, config = {};
        forEach(ngAttrPrefixes, function(prefix) {
            var name = prefix + "app";
            !appElement && element.hasAttribute && element.hasAttribute(name) && (appElement = element,
            module = element.getAttribute(name))
        }),
        forEach(ngAttrPrefixes, function(prefix) {
            var candidate, name = prefix + "app";
            !appElement && (candidate = element.querySelector("[" + name.replace(":", "\\:") + "]")) && (appElement = candidate,
            module = candidate.getAttribute(name))
        }),
        appElement && (config.strictDi = null !== getNgAttribute(appElement, "strict-di"),
        bootstrap(appElement, module ? [module] : [], config))
    }
    function bootstrap(element, modules, config) {
        isObject(config) || (config = {});
        var defaultConfig = {
            strictDi: !1
        };
        config = extend(defaultConfig, config);
        var doBootstrap = function() {
            if (element = jqLite(element),
            element.injector()) {
                var tag = element[0] === document ? "document" : startingTag(element);
                throw ngMinErr("btstrpd", "App Already Bootstrapped with this Element '{0}'", tag.replace(/</, "&lt;").replace(/>/, "&gt;"))
            }
            modules = modules || [],
            modules.unshift(["$provide", function($provide) {
                $provide.value("$rootElement", element)
            }
            ]),
            config.debugInfoEnabled && modules.push(["$compileProvider", function($compileProvider) {
                $compileProvider.debugInfoEnabled(!0)
            }
            ]),
            modules.unshift("ng");
            var injector = createInjector(modules, config.strictDi);
            return injector.invoke(["$rootScope", "$rootElement", "$compile", "$injector", function(scope, element, compile, injector) {
                scope.$apply(function() {
                    element.data("$injector", injector),
                    compile(element)(scope)
                })
            }
            ]),
            injector
        }
          , NG_ENABLE_DEBUG_INFO = /^NG_ENABLE_DEBUG_INFO!/
          , NG_DEFER_BOOTSTRAP = /^NG_DEFER_BOOTSTRAP!/;
        return window && NG_ENABLE_DEBUG_INFO.test(window.name) && (config.debugInfoEnabled = !0,
        window.name = window.name.replace(NG_ENABLE_DEBUG_INFO, "")),
        window && !NG_DEFER_BOOTSTRAP.test(window.name) ? doBootstrap() : (window.name = window.name.replace(NG_DEFER_BOOTSTRAP, ""),
        angular.resumeBootstrap = function(extraModules) {
            return forEach(extraModules, function(module) {
                modules.push(module)
            }),
            doBootstrap()
        }
        ,
        void (isFunction(angular.resumeDeferredBootstrap) && angular.resumeDeferredBootstrap()))
    }
    function reloadWithDebugInfo() {
        window.name = "NG_ENABLE_DEBUG_INFO!" + window.name,
        window.location.reload()
    }
    function getTestability(rootElement) {
        var injector = angular.element(rootElement).injector();
        if (!injector)
            throw ngMinErr("test", "no injector found for element argument to getTestability");
        return injector.get("$$testability")
    }
    function snake_case(name, separator) {
        return separator = separator || "_",
        name.replace(SNAKE_CASE_REGEXP, function(letter, pos) {
            return (pos ? separator : "") + letter.toLowerCase()
        })
    }
    function bindJQuery() {
        var originalCleanData;
        bindJQueryFired || (jQuery = window.jQuery,
        jQuery && jQuery.fn.on ? (jqLite = jQuery,
        extend(jQuery.fn, {
            scope: JQLitePrototype.scope,
            isolateScope: JQLitePrototype.isolateScope,
            controller: JQLitePrototype.controller,
            injector: JQLitePrototype.injector,
            inheritedData: JQLitePrototype.inheritedData
        }),
        originalCleanData = jQuery.cleanData,
        jQuery.cleanData = function(elems) {
            var events;
            if (skipDestroyOnNextJQueryCleanData)
                skipDestroyOnNextJQueryCleanData = !1;
            else
                for (var elem, i = 0; null != (elem = elems[i]); i++)
                    events = jQuery._data(elem, "events"),
                    events && events.$destroy && jQuery(elem).triggerHandler("$destroy");
            originalCleanData(elems)
        }
        ) : jqLite = JQLite,
        angular.element = jqLite,
        bindJQueryFired = !0)
    }
    function assertArg(arg, name, reason) {
        if (!arg)
            throw ngMinErr("areq", "Argument '{0}' is {1}", name || "?", reason || "required");
        return arg
    }
    function assertArgFn(arg, name, acceptArrayAnnotation) {
        return acceptArrayAnnotation && isArray(arg) && (arg = arg[arg.length - 1]),
        assertArg(isFunction(arg), name, "not a function, got " + (arg && "object" == typeof arg ? arg.constructor.name || "Object" : typeof arg)),
        arg
    }
    function assertNotHasOwnProperty(name, context) {
        if ("hasOwnProperty" === name)
            throw ngMinErr("badname", "hasOwnProperty is not a valid {0} name", context)
    }
    function getter(obj, path, bindFnToScope) {
        if (!path)
            return obj;
        for (var key, keys = path.split("."), lastInstance = obj, len = keys.length, i = 0; len > i; i++)
            key = keys[i],
            obj && (obj = (lastInstance = obj)[key]);
        return !bindFnToScope && isFunction(obj) ? bind(lastInstance, obj) : obj
    }
    function getBlockNodes(nodes) {
        var node = nodes[0]
          , endNode = nodes[nodes.length - 1]
          , blockNodes = [node];
        do {
            if (node = node.nextSibling,
            !node)
                break;
            blockNodes.push(node)
        } while (node !== endNode);
        return jqLite(blockNodes)
    }
    function createMap() {
        return Object.create(null)
    }
    function setupModuleLoader(window) {
        function ensure(obj, name, factory) {
            return obj[name] || (obj[name] = factory())
        }
        var $injectorMinErr = minErr("$injector")
          , ngMinErr = minErr("ng")
          , angular = ensure(window, "angular", Object);
        return angular.$$minErr = angular.$$minErr || minErr,
        ensure(angular, "module", function() {
            var modules = {};
            return function(name, requires, configFn) {
                var assertNotHasOwnProperty = function(name, context) {
                    if ("hasOwnProperty" === name)
                        throw ngMinErr("badname", "hasOwnProperty is not a valid {0} name", context)
                };
                return assertNotHasOwnProperty(name, "module"),
                requires && modules.hasOwnProperty(name) && (modules[name] = null),
                ensure(modules, name, function() {
                    function invokeLater(provider, method, insertMethod, queue) {
                        return queue || (queue = invokeQueue),
                        function() {
                            return queue[insertMethod || "push"]([provider, method, arguments]),
                            moduleInstance
                        }
                    }
                    if (!requires)
                        throw $injectorMinErr("nomod", "Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.", name);
                    var invokeQueue = []
                      , configBlocks = []
                      , runBlocks = []
                      , config = invokeLater("$injector", "invoke", "push", configBlocks)
                      , moduleInstance = {
                        _invokeQueue: invokeQueue,
                        _configBlocks: configBlocks,
                        _runBlocks: runBlocks,
                        requires: requires,
                        name: name,
                        provider: invokeLater("$provide", "provider"),
                        factory: invokeLater("$provide", "factory"),
                        service: invokeLater("$provide", "service"),
                        value: invokeLater("$provide", "value"),
                        constant: invokeLater("$provide", "constant", "unshift"),
                        animation: invokeLater("$animateProvider", "register"),
                        filter: invokeLater("$filterProvider", "register"),
                        controller: invokeLater("$controllerProvider", "register"),
                        directive: invokeLater("$compileProvider", "directive"),
                        config: config,
                        run: function(block) {
                            return runBlocks.push(block),
                            this
                        }
                    };
                    return configFn && config(configFn),
                    moduleInstance
                })
            }
        })
    }
    function serializeObject(obj) {
        var seen = [];
        return JSON.stringify(obj, function(key, val) {
            if (val = toJsonReplacer(key, val),
            isObject(val)) {
                if (seen.indexOf(val) >= 0)
                    return "<<already seen>>";
                seen.push(val)
            }
            return val
        })
    }
    function toDebugString(obj) {
        return "function" == typeof obj ? obj.toString().replace(/ \{[\s\S]*$/, "") : "undefined" == typeof obj ? "undefined" : "string" != typeof obj ? serializeObject(obj) : obj
    }
    function publishExternalAPI(angular) {
        extend(angular, {
            bootstrap: bootstrap,
            copy: copy,
            extend: extend,
            equals: equals,
            element: jqLite,
            forEach: forEach,
            injector: createInjector,
            noop: noop,
            bind: bind,
            toJson: toJson,
            fromJson: fromJson,
            identity: identity,
            isUndefined: isUndefined,
            isDefined: isDefined,
            isString: isString,
            isFunction: isFunction,
            isObject: isObject,
            isNumber: isNumber,
            isElement: isElement,
            isArray: isArray,
            version: version,
            isDate: isDate,
            lowercase: lowercase,
            uppercase: uppercase,
            callbacks: {
                counter: 0
            },
            getTestability: getTestability,
            $$minErr: minErr,
            $$csp: csp,
            reloadWithDebugInfo: reloadWithDebugInfo
        }),
        angularModule = setupModuleLoader(window);
        try {
            angularModule("ngLocale")
        } catch (e) {
            angularModule("ngLocale", []).provider("$locale", $LocaleProvider)
        }
        angularModule("ng", ["ngLocale"], ["$provide", function($provide) {
            $provide.provider({
                $$sanitizeUri: $$SanitizeUriProvider
            }),
            $provide.provider("$compile", $CompileProvider).directive({
                a: htmlAnchorDirective,
                input: inputDirective,
                textarea: inputDirective,
                form: formDirective,
                script: scriptDirective,
                select: selectDirective,
                style: styleDirective,
                option: optionDirective,
                ngBind: ngBindDirective,
                ngBindHtml: ngBindHtmlDirective,
                ngBindTemplate: ngBindTemplateDirective,
                ngClass: ngClassDirective,
                ngClassEven: ngClassEvenDirective,
                ngClassOdd: ngClassOddDirective,
                ngCloak: ngCloakDirective,
                ngController: ngControllerDirective,
                ngForm: ngFormDirective,
                ngHide: ngHideDirective,
                ngIf: ngIfDirective,
                ngInclude: ngIncludeDirective,
                ngInit: ngInitDirective,
                ngNonBindable: ngNonBindableDirective,
                ngPluralize: ngPluralizeDirective,
                ngRepeat: ngRepeatDirective,
                ngShow: ngShowDirective,
                ngStyle: ngStyleDirective,
                ngSwitch: ngSwitchDirective,
                ngSwitchWhen: ngSwitchWhenDirective,
                ngSwitchDefault: ngSwitchDefaultDirective,
                ngOptions: ngOptionsDirective,
                ngTransclude: ngTranscludeDirective,
                ngModel: ngModelDirective,
                ngList: ngListDirective,
                ngChange: ngChangeDirective,
                pattern: patternDirective,
                ngPattern: patternDirective,
                required: requiredDirective,
                ngRequired: requiredDirective,
                minlength: minlengthDirective,
                ngMinlength: minlengthDirective,
                maxlength: maxlengthDirective,
                ngMaxlength: maxlengthDirective,
                ngValue: ngValueDirective,
                ngModelOptions: ngModelOptionsDirective
            }).directive({
                ngInclude: ngIncludeFillContentDirective
            }).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),
            $provide.provider({
                $anchorScroll: $AnchorScrollProvider,
                $animate: $AnimateProvider,
                $browser: $BrowserProvider,
                $cacheFactory: $CacheFactoryProvider,
                $controller: $ControllerProvider,
                $document: $DocumentProvider,
                $exceptionHandler: $ExceptionHandlerProvider,
                $filter: $FilterProvider,
                $interpolate: $InterpolateProvider,
                $interval: $IntervalProvider,
                $http: $HttpProvider,
                $httpBackend: $HttpBackendProvider,
                $location: $LocationProvider,
                $log: $LogProvider,
                $parse: $ParseProvider,
                $rootScope: $RootScopeProvider,
                $q: $QProvider,
                $$q: $$QProvider,
                $sce: $SceProvider,
                $sceDelegate: $SceDelegateProvider,
                $sniffer: $SnifferProvider,
                $templateCache: $TemplateCacheProvider,
                $templateRequest: $TemplateRequestProvider,
                $$testability: $$TestabilityProvider,
                $timeout: $TimeoutProvider,
                $window: $WindowProvider,
                $$rAF: $$RAFProvider,
                $$asyncCallback: $$AsyncCallbackProvider,
                $$jqLite: $$jqLiteProvider
            })
        }
        ])
    }
    function jqNextId() {
        return ++jqId
    }
    function camelCase(name) {
        return name.replace(SPECIAL_CHARS_REGEXP, function(_, separator, letter, offset) {
            return offset ? letter.toUpperCase() : letter
        }).replace(MOZ_HACK_REGEXP, "Moz$1")
    }
    function jqLiteIsTextNode(html) {
        return !HTML_REGEXP.test(html)
    }
    function jqLiteAcceptsData(node) {
        var nodeType = node.nodeType;
        return nodeType === NODE_TYPE_ELEMENT || !nodeType || nodeType === NODE_TYPE_DOCUMENT
    }
    function jqLiteBuildFragment(html, context) {
        var tmp, tag, wrap, i, fragment = context.createDocumentFragment(), nodes = [];
        if (jqLiteIsTextNode(html))
            nodes.push(context.createTextNode(html));
        else {
            for (tmp = tmp || fragment.appendChild(context.createElement("div")),
            tag = (TAG_NAME_REGEXP.exec(html) || ["", ""])[1].toLowerCase(),
            wrap = wrapMap[tag] || wrapMap._default,
            tmp.innerHTML = wrap[1] + html.replace(XHTML_TAG_REGEXP, "<$1></$2>") + wrap[2],
            i = wrap[0]; i--; )
                tmp = tmp.lastChild;
            nodes = concat(nodes, tmp.childNodes),
            tmp = fragment.firstChild,
            tmp.textContent = ""
        }
        return fragment.textContent = "",
        fragment.innerHTML = "",
        forEach(nodes, function(node) {
            fragment.appendChild(node)
        }),
        fragment
    }
    function jqLiteParseHTML(html, context) {
        context = context || document;
        var parsed;
        return (parsed = SINGLE_TAG_REGEXP.exec(html)) ? [context.createElement(parsed[1])] : (parsed = jqLiteBuildFragment(html, context)) ? parsed.childNodes : []
    }
    function JQLite(element) {
        if (element instanceof JQLite)
            return element;
        var argIsString;
        if (isString(element) && (element = trim(element),
        argIsString = !0),
        !(this instanceof JQLite)) {
            if (argIsString && "<" != element.charAt(0))
                throw jqLiteMinErr("nosel", "Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");
            return new JQLite(element)
        }
        argIsString ? jqLiteAddNodes(this, jqLiteParseHTML(element)) : jqLiteAddNodes(this, element)
    }
    function jqLiteClone(element) {
        return element.cloneNode(!0)
    }
    function jqLiteDealoc(element, onlyDescendants) {
        if (onlyDescendants || jqLiteRemoveData(element),
        element.querySelectorAll)
            for (var descendants = element.querySelectorAll("*"), i = 0, l = descendants.length; l > i; i++)
                jqLiteRemoveData(descendants[i])
    }
    function jqLiteOff(element, type, fn, unsupported) {
        if (isDefined(unsupported))
            throw jqLiteMinErr("offargs", "jqLite#off() does not support the `selector` argument");
        var expandoStore = jqLiteExpandoStore(element)
          , events = expandoStore && expandoStore.events
          , handle = expandoStore && expandoStore.handle;
        if (handle)
            if (type)
                forEach(type.split(" "), function(type) {
                    if (isDefined(fn)) {
                        var listenerFns = events[type];
                        if (arrayRemove(listenerFns || [], fn),
                        listenerFns && listenerFns.length > 0)
                            return
                    }
                    removeEventListenerFn(element, type, handle),
                    delete events[type]
                });
            else
                for (type in events)
                    "$destroy" !== type && removeEventListenerFn(element, type, handle),
                    delete events[type]
    }
    function jqLiteRemoveData(element, name) {
        var expandoId = element.ng339
          , expandoStore = expandoId && jqCache[expandoId];
        if (expandoStore) {
            if (name)
                return void delete expandoStore.data[name];
            expandoStore.handle && (expandoStore.events.$destroy && expandoStore.handle({}, "$destroy"),
            jqLiteOff(element)),
            delete jqCache[expandoId],
            element.ng339 = undefined
        }
    }
    function jqLiteExpandoStore(element, createIfNecessary) {
        var expandoId = element.ng339
          , expandoStore = expandoId && jqCache[expandoId];
        return createIfNecessary && !expandoStore && (element.ng339 = expandoId = jqNextId(),
        expandoStore = jqCache[expandoId] = {
            events: {},
            data: {},
            handle: undefined
        }),
        expandoStore
    }
    function jqLiteData(element, key, value) {
        if (jqLiteAcceptsData(element)) {
            var isSimpleSetter = isDefined(value)
              , isSimpleGetter = !isSimpleSetter && key && !isObject(key)
              , massGetter = !key
              , expandoStore = jqLiteExpandoStore(element, !isSimpleGetter)
              , data = expandoStore && expandoStore.data;
            if (isSimpleSetter)
                data[key] = value;
            else {
                if (massGetter)
                    return data;
                if (isSimpleGetter)
                    return data && data[key];
                extend(data, key)
            }
        }
    }
    function jqLiteHasClass(element, selector) {
        return element.getAttribute ? (" " + (element.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").indexOf(" " + selector + " ") > -1 : !1
    }
    function jqLiteRemoveClass(element, cssClasses) {
        cssClasses && element.setAttribute && forEach(cssClasses.split(" "), function(cssClass) {
            element.setAttribute("class", trim((" " + (element.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").replace(" " + trim(cssClass) + " ", " ")))
        })
    }
    function jqLiteAddClass(element, cssClasses) {
        if (cssClasses && element.setAttribute) {
            var existingClasses = (" " + (element.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ");
            forEach(cssClasses.split(" "), function(cssClass) {
                cssClass = trim(cssClass),
                -1 === existingClasses.indexOf(" " + cssClass + " ") && (existingClasses += cssClass + " ")
            }),
            element.setAttribute("class", trim(existingClasses))
        }
    }
    function jqLiteAddNodes(root, elements) {
        if (elements)
            if (elements.nodeType)
                root[root.length++] = elements;
            else {
                var length = elements.length;
                if ("number" == typeof length && elements.window !== elements) {
                    if (length)
                        for (var i = 0; length > i; i++)
                            root[root.length++] = elements[i]
                } else
                    root[root.length++] = elements
            }
    }
    function jqLiteController(element, name) {
        return jqLiteInheritedData(element, "$" + (name || "ngController") + "Controller")
    }
    function jqLiteInheritedData(element, name, value) {
        element.nodeType == NODE_TYPE_DOCUMENT && (element = element.documentElement);
        for (var names = isArray(name) ? name : [name]; element; ) {
            for (var i = 0, ii = names.length; ii > i; i++)
                if ((value = jqLite.data(element, names[i])) !== undefined)
                    return value;
            element = element.parentNode || element.nodeType === NODE_TYPE_DOCUMENT_FRAGMENT && element.host
        }
    }
    function jqLiteEmpty(element) {
        for (jqLiteDealoc(element, !0); element.firstChild; )
            element.removeChild(element.firstChild)
    }
    function jqLiteRemove(element, keepData) {
        keepData || jqLiteDealoc(element);
        var parent = element.parentNode;
        parent && parent.removeChild(element)
    }
    function jqLiteDocumentLoaded(action, win) {
        win = win || window,
        "complete" === win.document.readyState ? win.setTimeout(action) : jqLite(win).on("load", action)
    }
    function getBooleanAttrName(element, name) {
        var booleanAttr = BOOLEAN_ATTR[name.toLowerCase()];
        return booleanAttr && BOOLEAN_ELEMENTS[nodeName_(element)] && booleanAttr
    }
    function getAliasedAttrName(element, name) {
        var nodeName = element.nodeName;
        return ("INPUT" === nodeName || "TEXTAREA" === nodeName) && ALIASED_ATTR[name]
    }
    function createEventHandler(element, events) {
        var eventHandler = function(event, type) {
            event.isDefaultPrevented = function() {
                return event.defaultPrevented
            }
            ;
            var eventFns = events[type || event.type]
              , eventFnsLength = eventFns ? eventFns.length : 0;
            if (eventFnsLength) {
                if (isUndefined(event.immediatePropagationStopped)) {
                    var originalStopImmediatePropagation = event.stopImmediatePropagation;
                    event.stopImmediatePropagation = function() {
                        event.immediatePropagationStopped = !0,
                        event.stopPropagation && event.stopPropagation(),
                        originalStopImmediatePropagation && originalStopImmediatePropagation.call(event)
                    }
                }
                event.isImmediatePropagationStopped = function() {
                    return event.immediatePropagationStopped === !0
                }
                ,
                eventFnsLength > 1 && (eventFns = shallowCopy(eventFns));
                for (var i = 0; eventFnsLength > i; i++)
                    event.isImmediatePropagationStopped() || eventFns[i].call(element, event)
            }
        };
        return eventHandler.elem = element,
        eventHandler
    }
    function $$jqLiteProvider() {
        this.$get = function() {
            return extend(JQLite, {
                hasClass: function(node, classes) {
                    return node.attr && (node = node[0]),
                    jqLiteHasClass(node, classes)
                },
                addClass: function(node, classes) {
                    return node.attr && (node = node[0]),
                    jqLiteAddClass(node, classes)
                },
                removeClass: function(node, classes) {
                    return node.attr && (node = node[0]),
                    jqLiteRemoveClass(node, classes)
                }
            })
        }
    }
    function hashKey(obj, nextUidFn) {
        var key = obj && obj.$$hashKey;
        if (key)
            return "function" == typeof key && (key = obj.$$hashKey()),
            key;
        var objType = typeof obj;
        return key = "function" == objType || "object" == objType && null !== obj ? obj.$$hashKey = objType + ":" + (nextUidFn || nextUid)() : objType + ":" + obj
    }
    function HashMap(array, isolatedUid) {
        if (isolatedUid) {
            var uid = 0;
            this.nextUid = function() {
                return ++uid
            }
        }
        forEach(array, this.put, this)
    }
    function anonFn(fn) {
        var fnText = fn.toString().replace(STRIP_COMMENTS, "")
          , args = fnText.match(FN_ARGS);
        return args ? "function(" + (args[1] || "").replace(/[\s\r\n]+/, " ") + ")" : "fn"
    }
    function annotate(fn, strictDi, name) {
        var $inject, fnText, argDecl, last;
        if ("function" == typeof fn) {
            if (!($inject = fn.$inject)) {
                if ($inject = [],
                fn.length) {
                    if (strictDi)
                        throw isString(name) && name || (name = fn.name || anonFn(fn)),
                        $injectorMinErr("strictdi", "{0} is not using explicit annotation and cannot be invoked in strict mode", name);
                    fnText = fn.toString().replace(STRIP_COMMENTS, ""),
                    argDecl = fnText.match(FN_ARGS),
                    forEach(argDecl[1].split(FN_ARG_SPLIT), function(arg) {
                        arg.replace(FN_ARG, function(all, underscore, name) {
                            $inject.push(name)
                        })
                    })
                }
                fn.$inject = $inject
            }
        } else
            isArray(fn) ? (last = fn.length - 1,
            assertArgFn(fn[last], "fn"),
            $inject = fn.slice(0, last)) : assertArgFn(fn, "fn", !0);
        return $inject
    }
    function createInjector(modulesToLoad, strictDi) {
        function supportObject(delegate) {
            return function(key, value) {
                return isObject(key) ? void forEach(key, reverseParams(delegate)) : delegate(key, value)
            }
        }
        function provider(name, provider_) {
            if (assertNotHasOwnProperty(name, "service"),
            (isFunction(provider_) || isArray(provider_)) && (provider_ = providerInjector.instantiate(provider_)),
            !provider_.$get)
                throw $injectorMinErr("pget", "Provider '{0}' must define $get factory method.", name);
            return providerCache[name + providerSuffix] = provider_
        }
        function enforceReturnValue(name, factory) {
            return function() {
                var result = instanceInjector.invoke(factory, this);
                if (isUndefined(result))
                    throw $injectorMinErr("undef", "Provider '{0}' must return a value from $get factory method.", name);
                return result
            }
        }
        function factory(name, factoryFn, enforce) {
            return provider(name, {
                $get: enforce !== !1 ? enforceReturnValue(name, factoryFn) : factoryFn
            })
        }
        function service(name, constructor) {
            return factory(name, ["$injector", function($injector) {
                return $injector.instantiate(constructor)
            }
            ])
        }
        function value(name, val) {
            return factory(name, valueFn(val), !1)
        }
        function constant(name, value) {
            assertNotHasOwnProperty(name, "constant"),
            providerCache[name] = value,
            instanceCache[name] = value
        }
        function decorator(serviceName, decorFn) {
            var origProvider = providerInjector.get(serviceName + providerSuffix)
              , orig$get = origProvider.$get;
            origProvider.$get = function() {
                var origInstance = instanceInjector.invoke(orig$get, origProvider);
                return instanceInjector.invoke(decorFn, null, {
                    $delegate: origInstance
                })
            }
        }
        function loadModules(modulesToLoad) {
            var moduleFn, runBlocks = [];
            return forEach(modulesToLoad, function(module) {
                function runInvokeQueue(queue) {
                    var i, ii;
                    for (i = 0,
                    ii = queue.length; ii > i; i++) {
                        var invokeArgs = queue[i]
                          , provider = providerInjector.get(invokeArgs[0]);
                        provider[invokeArgs[1]].apply(provider, invokeArgs[2])
                    }
                }
                if (!loadedModules.get(module)) {
                    loadedModules.put(module, !0);
                    try {
                        isString(module) ? (moduleFn = angularModule(module),
                        runBlocks = runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),
                        runInvokeQueue(moduleFn._invokeQueue),
                        runInvokeQueue(moduleFn._configBlocks)) : isFunction(module) ? runBlocks.push(providerInjector.invoke(module)) : isArray(module) ? runBlocks.push(providerInjector.invoke(module)) : assertArgFn(module, "module")
                    } catch (e) {
                        throw isArray(module) && (module = module[module.length - 1]),
                        e.message && e.stack && -1 == e.stack.indexOf(e.message) && (e = e.message + "\n" + e.stack),
                        $injectorMinErr("modulerr", "Failed to instantiate module {0} due to:\n{1}", module, e.stack || e.message || e)
                    }
                }
            }),
            runBlocks
        }
        function createInternalInjector(cache, factory) {
            function getService(serviceName, caller) {
                if (cache.hasOwnProperty(serviceName)) {
                    if (cache[serviceName] === INSTANTIATING)
                        throw $injectorMinErr("cdep", "Circular dependency found: {0}", serviceName + " <- " + path.join(" <- "));
                    return cache[serviceName]
                }
                try {
                    return path.unshift(serviceName),
                    cache[serviceName] = INSTANTIATING,
                    cache[serviceName] = factory(serviceName, caller)
                } catch (err) {
                    throw cache[serviceName] === INSTANTIATING && delete cache[serviceName],
                    err
                } finally {
                    path.shift()
                }
            }
            function invoke(fn, self, locals, serviceName) {
                "string" == typeof locals && (serviceName = locals,
                locals = null);
                var length, i, key, args = [], $inject = createInjector.$$annotate(fn, strictDi, serviceName);
                for (i = 0,
                length = $inject.length; length > i; i++) {
                    if (key = $inject[i],
                    "string" != typeof key)
                        throw $injectorMinErr("itkn", "Incorrect injection token! Expected service name as string, got {0}", key);
                    args.push(locals && locals.hasOwnProperty(key) ? locals[key] : getService(key, serviceName))
                }
                return isArray(fn) && (fn = fn[length]),
                fn.apply(self, args)
            }
            function instantiate(Type, locals, serviceName) {
                var instance = Object.create((isArray(Type) ? Type[Type.length - 1] : Type).prototype || null)
                  , returnedValue = invoke(Type, instance, locals, serviceName);
                return isObject(returnedValue) || isFunction(returnedValue) ? returnedValue : instance
            }
            return {
                invoke: invoke,
                instantiate: instantiate,
                get: getService,
                annotate: createInjector.$$annotate,
                has: function(name) {
                    return providerCache.hasOwnProperty(name + providerSuffix) || cache.hasOwnProperty(name)
                }
            }
        }
        strictDi = strictDi === !0;
        var INSTANTIATING = {}
          , providerSuffix = "Provider"
          , path = []
          , loadedModules = new HashMap([],!0)
          , providerCache = {
            $provide: {
                provider: supportObject(provider),
                factory: supportObject(factory),
                service: supportObject(service),
                value: supportObject(value),
                constant: supportObject(constant),
                decorator: decorator
            }
        }
          , providerInjector = providerCache.$injector = createInternalInjector(providerCache, function(serviceName, caller) {
            throw angular.isString(caller) && path.push(caller),
            $injectorMinErr("unpr", "Unknown provider: {0}", path.join(" <- "))
        })
          , instanceCache = {}
          , instanceInjector = instanceCache.$injector = createInternalInjector(instanceCache, function(serviceName, caller) {
            var provider = providerInjector.get(serviceName + providerSuffix, caller);
            return instanceInjector.invoke(provider.$get, provider, undefined, serviceName)
        });
        return forEach(loadModules(modulesToLoad), function(fn) {
            instanceInjector.invoke(fn || noop)
        }),
        instanceInjector
    }
    function $AnchorScrollProvider() {
        var autoScrollingEnabled = !0;
        this.disableAutoScrolling = function() {
            autoScrollingEnabled = !1
        }
        ,
        this.$get = ["$window", "$location", "$rootScope", function($window, $location, $rootScope) {
            function getFirstAnchor(list) {
                var result = null;
                return Array.prototype.some.call(list, function(element) {
                    return "a" === nodeName_(element) ? (result = element,
                    !0) : void 0
                }),
                result
            }
            function getYOffset() {
                var offset = scroll.yOffset;
                if (isFunction(offset))
                    offset = offset();
                else if (isElement(offset)) {
                    var elem = offset[0]
                      , style = $window.getComputedStyle(elem);
                    offset = "fixed" !== style.position ? 0 : elem.getBoundingClientRect().bottom
                } else
                    isNumber(offset) || (offset = 0);
                return offset
            }
            function scrollTo(elem) {
                if (elem) {
                    elem.scrollIntoView();
                    var offset = getYOffset();
                    if (offset) {
                        var elemTop = elem.getBoundingClientRect().top;
                        $window.scrollBy(0, elemTop - offset)
                    }
                } else
                    $window.scrollTo(0, 0)
            }
            function scroll() {
                var elm, hash = $location.hash();
                hash ? (elm = document.getElementById(hash)) ? scrollTo(elm) : (elm = getFirstAnchor(document.getElementsByName(hash))) ? scrollTo(elm) : "top" === hash && scrollTo(null) : scrollTo(null)
            }
            var document = $window.document;
            return autoScrollingEnabled && $rootScope.$watch(function() {
                return $location.hash()
            }, function(newVal, oldVal) {
                newVal === oldVal && "" === newVal || jqLiteDocumentLoaded(function() {
                    $rootScope.$evalAsync(scroll)
                })
            }),
            scroll
        }
        ]
    }
    function $$AsyncCallbackProvider() {
        this.$get = ["$$rAF", "$timeout", function($$rAF, $timeout) {
            return $$rAF.supported ? function(fn) {
                return $$rAF(fn)
            }
            : function(fn) {
                return $timeout(fn, 0, !1)
            }
        }
        ]
    }
    function Browser(window, document, $log, $sniffer) {
        function completeOutstandingRequest(fn) {
            try {
                fn.apply(null, sliceArgs(arguments, 1))
            } finally {
                if (outstandingRequestCount--,
                0 === outstandingRequestCount)
                    for (; outstandingRequestCallbacks.length; )
                        try {
                            outstandingRequestCallbacks.pop()()
                        } catch (e) {
                            $log.error(e)
                        }
            }
        }
        function getHash(url) {
            var index = url.indexOf("#");
            return -1 === index ? "" : url.substr(index + 1)
        }
        function startPoller(interval, setTimeout) {
            !function check() {
                forEach(pollFns, function(pollFn) {
                    pollFn()
                }),
                pollTimeout = setTimeout(check, interval)
            }()
        }
        function cacheStateAndFireUrlChange() {
            cacheState(),
            fireUrlChange()
        }
        function cacheState() {
            cachedState = window.history.state,
            cachedState = isUndefined(cachedState) ? null : cachedState,
            equals(cachedState, lastCachedState) && (cachedState = lastCachedState),
            lastCachedState = cachedState
        }
        function fireUrlChange() {
            lastBrowserUrl === self.url() && lastHistoryState === cachedState || (lastBrowserUrl = self.url(),
            lastHistoryState = cachedState,
            forEach(urlChangeListeners, function(listener) {
                listener(self.url(), cachedState)
            }))
        }
        function safeDecodeURIComponent(str) {
            try {
                return decodeURIComponent(str)
            } catch (e) {
                return str
            }
        }
        var self = this
          , rawDocument = document[0]
          , location = window.location
          , history = window.history
          , setTimeout = window.setTimeout
          , clearTimeout = window.clearTimeout
          , pendingDeferIds = {};
        self.isMock = !1;
        var outstandingRequestCount = 0
          , outstandingRequestCallbacks = [];
        self.$$completeOutstandingRequest = completeOutstandingRequest,
        self.$$incOutstandingRequestCount = function() {
            outstandingRequestCount++
        }
        ,
        self.notifyWhenNoOutstandingRequests = function(callback) {
            forEach(pollFns, function(pollFn) {
                pollFn()
            }),
            0 === outstandingRequestCount ? callback() : outstandingRequestCallbacks.push(callback)
        }
        ;
        var pollTimeout, pollFns = [];
        self.addPollFn = function(fn) {
            return isUndefined(pollTimeout) && startPoller(100, setTimeout),
            pollFns.push(fn),
            fn
        }
        ;
        var cachedState, lastHistoryState, lastBrowserUrl = location.href, baseElement = document.find("base"), reloadLocation = null;
        cacheState(),
        lastHistoryState = cachedState,
        self.url = function(url, replace, state) {
            if (isUndefined(state) && (state = null),
            location !== window.location && (location = window.location),
            history !== window.history && (history = window.history),
            url) {
                var sameState = lastHistoryState === state;
                if (lastBrowserUrl === url && (!$sniffer.history || sameState))
                    return self;
                var sameBase = lastBrowserUrl && stripHash(lastBrowserUrl) === stripHash(url);
                return lastBrowserUrl = url,
                lastHistoryState = state,
                !$sniffer.history || sameBase && sameState ? (sameBase || (reloadLocation = url),
                replace ? location.replace(url) : sameBase ? location.hash = getHash(url) : location.href = url) : (history[replace ? "replaceState" : "pushState"](state, "", url),
                cacheState(),
                lastHistoryState = cachedState),
                self
            }
            return reloadLocation || location.href.replace(/%27/g, "'")
        }
        ,
        self.state = function() {
            return cachedState
        }
        ;
        var urlChangeListeners = []
          , urlChangeInit = !1
          , lastCachedState = null;
        self.onUrlChange = function(callback) {
            return urlChangeInit || ($sniffer.history && jqLite(window).on("popstate", cacheStateAndFireUrlChange),
            jqLite(window).on("hashchange", cacheStateAndFireUrlChange),
            urlChangeInit = !0),
            urlChangeListeners.push(callback),
            callback
        }
        ,
        self.$$checkUrlChange = fireUrlChange,
        self.baseHref = function() {
            var href = baseElement.attr("href");
            return href ? href.replace(/^(https?\:)?\/\/[^\/]*/, "") : ""
        }
        ;
        var lastCookies = {}
          , lastCookieString = ""
          , cookiePath = self.baseHref();
        self.cookies = function(name, value) {
            var cookieLength, cookieArray, cookie, i, index;
            if (!name) {
                if (rawDocument.cookie !== lastCookieString)
                    for (lastCookieString = rawDocument.cookie,
                    cookieArray = lastCookieString.split("; "),
                    lastCookies = {},
                    i = 0; i < cookieArray.length; i++)
                        cookie = cookieArray[i],
                        index = cookie.indexOf("="),
                        index > 0 && (name = safeDecodeURIComponent(cookie.substring(0, index)),
                        lastCookies[name] === undefined && (lastCookies[name] = safeDecodeURIComponent(cookie.substring(index + 1))));
                return lastCookies
            }
            value === undefined ? rawDocument.cookie = encodeURIComponent(name) + "=;path=" + cookiePath + ";expires=Thu, 01 Jan 1970 00:00:00 GMT" : isString(value) && (cookieLength = (rawDocument.cookie = encodeURIComponent(name) + "=" + encodeURIComponent(value) + ";path=" + cookiePath).length + 1,
            cookieLength > 4096 && $log.warn("Cookie '" + name + "' possibly not set or overflowed because it was too large (" + cookieLength + " > 4096 bytes)!"))
        }
        ,
        self.defer = function(fn, delay) {
            var timeoutId;
            return outstandingRequestCount++,
            timeoutId = setTimeout(function() {
                delete pendingDeferIds[timeoutId],
                completeOutstandingRequest(fn)
            }, delay || 0),
            pendingDeferIds[timeoutId] = !0,
            timeoutId
        }
        ,
        self.defer.cancel = function(deferId) {
            return pendingDeferIds[deferId] ? (delete pendingDeferIds[deferId],
            clearTimeout(deferId),
            completeOutstandingRequest(noop),
            !0) : !1
        }
    }
    function $BrowserProvider() {
        this.$get = ["$window", "$log", "$sniffer", "$document", function($window, $log, $sniffer, $document) {
            return new Browser($window,$document,$log,$sniffer)
        }
        ]
    }
    function $CacheFactoryProvider() {
        this.$get = function() {
            function cacheFactory(cacheId, options) {
                function refresh(entry) {
                    entry != freshEnd && (staleEnd ? staleEnd == entry && (staleEnd = entry.n) : staleEnd = entry,
                    link(entry.n, entry.p),
                    link(entry, freshEnd),
                    freshEnd = entry,
                    freshEnd.n = null)
                }
                function link(nextEntry, prevEntry) {
                    nextEntry != prevEntry && (nextEntry && (nextEntry.p = prevEntry),
                    prevEntry && (prevEntry.n = nextEntry))
                }
                if (cacheId in caches)
                    throw minErr("$cacheFactory")("iid", "CacheId '{0}' is already taken!", cacheId);
                var size = 0
                  , stats = extend({}, options, {
                    id: cacheId
                })
                  , data = {}
                  , capacity = options && options.capacity || Number.MAX_VALUE
                  , lruHash = {}
                  , freshEnd = null
                  , staleEnd = null;
                return caches[cacheId] = {
                    put: function(key, value) {
                        if (capacity < Number.MAX_VALUE) {
                            var lruEntry = lruHash[key] || (lruHash[key] = {
                                key: key
                            });
                            refresh(lruEntry)
                        }
                        if (!isUndefined(value))
                            return key in data || size++,
                            data[key] = value,
                            size > capacity && this.remove(staleEnd.key),
                            value
                    },
                    get: function(key) {
                        if (capacity < Number.MAX_VALUE) {
                            var lruEntry = lruHash[key];
                            if (!lruEntry)
                                return;
                            refresh(lruEntry)
                        }
                        return data[key]
                    },
                    remove: function(key) {
                        if (capacity < Number.MAX_VALUE) {
                            var lruEntry = lruHash[key];
                            if (!lruEntry)
                                return;
                            lruEntry == freshEnd && (freshEnd = lruEntry.p),
                            lruEntry == staleEnd && (staleEnd = lruEntry.n),
                            link(lruEntry.n, lruEntry.p),
                            delete lruHash[key]
                        }
                        delete data[key],
                        size--
                    },
                    removeAll: function() {
                        data = {},
                        size = 0,
                        lruHash = {},
                        freshEnd = staleEnd = null
                    },
                    destroy: function() {
                        data = null,
                        stats = null,
                        lruHash = null,
                        delete caches[cacheId]
                    },
                    info: function() {
                        return extend({}, stats, {
                            size: size
                        })
                    }
                }
            }
            var caches = {};
            return cacheFactory.info = function() {
                var info = {};
                return forEach(caches, function(cache, cacheId) {
                    info[cacheId] = cache.info()
                }),
                info
            }
            ,
            cacheFactory.get = function(cacheId) {
                return caches[cacheId]
            }
            ,
            cacheFactory
        }
    }
    function $TemplateCacheProvider() {
        this.$get = ["$cacheFactory", function($cacheFactory) {
            return $cacheFactory("templates")
        }
        ]
    }
    function $CompileProvider($provide, $$sanitizeUriProvider) {
        function parseIsolateBindings(scope, directiveName) {
            var LOCAL_REGEXP = /^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/
              , bindings = {};
            return forEach(scope, function(definition, scopeName) {
                var match = definition.match(LOCAL_REGEXP);
                if (!match)
                    throw $compileMinErr("iscp", "Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}", directiveName, scopeName, definition);
                bindings[scopeName] = {
                    mode: match[1][0],
                    collection: "*" === match[2],
                    optional: "?" === match[3],
                    attrName: match[4] || scopeName
                }
            }),
            bindings
        }
        var hasDirectives = {}
          , Suffix = "Directive"
          , COMMENT_DIRECTIVE_REGEXP = /^\s*directive\:\s*([\w\-]+)\s+(.*)$/
          , CLASS_DIRECTIVE_REGEXP = /(([\w\-]+)(?:\:([^;]+))?;?)/
          , ALL_OR_NOTHING_ATTRS = makeMap("ngSrc,ngSrcset,src,srcset")
          , REQUIRE_PREFIX_REGEXP = /^(?:(\^\^?)?(\?)?(\^\^?)?)?/
          , EVENT_HANDLER_ATTR_REGEXP = /^(on[a-z]+|formaction)$/;
        this.directive = function registerDirective(name, directiveFactory) {
            return assertNotHasOwnProperty(name, "directive"),
            isString(name) ? (assertArg(directiveFactory, "directiveFactory"),
            hasDirectives.hasOwnProperty(name) || (hasDirectives[name] = [],
            $provide.factory(name + Suffix, ["$injector", "$exceptionHandler", function($injector, $exceptionHandler) {
                var directives = [];
                return forEach(hasDirectives[name], function(directiveFactory, index) {
                    try {
                        var directive = $injector.invoke(directiveFactory);
                        isFunction(directive) ? directive = {
                            compile: valueFn(directive)
                        } : !directive.compile && directive.link && (directive.compile = valueFn(directive.link)),
                        directive.priority = directive.priority || 0,
                        directive.index = index,
                        directive.name = directive.name || name,
                        directive.require = directive.require || directive.controller && directive.name,
                        directive.restrict = directive.restrict || "EA",
                        isObject(directive.scope) && (directive.$$isolateBindings = parseIsolateBindings(directive.scope, directive.name)),
                        directives.push(directive)
                    } catch (e) {
                        $exceptionHandler(e)
                    }
                }),
                directives
            }
            ])),
            hasDirectives[name].push(directiveFactory)) : forEach(name, reverseParams(registerDirective)),
            this
        }
        ,
        this.aHrefSanitizationWhitelist = function(regexp) {
            return isDefined(regexp) ? ($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),
            this) : $$sanitizeUriProvider.aHrefSanitizationWhitelist()
        }
        ,
        this.imgSrcSanitizationWhitelist = function(regexp) {
            return isDefined(regexp) ? ($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),
            this) : $$sanitizeUriProvider.imgSrcSanitizationWhitelist()
        }
        ;
        var debugInfoEnabled = !0;
        this.debugInfoEnabled = function(enabled) {
            return isDefined(enabled) ? (debugInfoEnabled = enabled,
            this) : debugInfoEnabled
        }
        ,
        this.$get = ["$injector", "$interpolate", "$exceptionHandler", "$templateRequest", "$parse", "$controller", "$rootScope", "$document", "$sce", "$animate", "$$sanitizeUri", function($injector, $interpolate, $exceptionHandler, $templateRequest, $parse, $controller, $rootScope, $document, $sce, $animate, $$sanitizeUri) {
            function safeAddClass($element, className) {
                try {
                    $element.addClass(className)
                } catch (e) {}
            }
            function compile($compileNodes, transcludeFn, maxPriority, ignoreDirective, previousCompileContext) {
                $compileNodes instanceof jqLite || ($compileNodes = jqLite($compileNodes)),
                forEach($compileNodes, function(node, index) {
                    node.nodeType == NODE_TYPE_TEXT && node.nodeValue.match(/\S+/) && ($compileNodes[index] = jqLite(node).wrap("<span></span>").parent()[0])
                });
                var compositeLinkFn = compileNodes($compileNodes, transcludeFn, $compileNodes, maxPriority, ignoreDirective, previousCompileContext);
                compile.$$addScopeClass($compileNodes);
                var namespace = null;
                return function(scope, cloneConnectFn, options) {
                    assertArg(scope, "scope"),
                    options = options || {};
                    var parentBoundTranscludeFn = options.parentBoundTranscludeFn
                      , transcludeControllers = options.transcludeControllers
                      , futureParentElement = options.futureParentElement;
                    parentBoundTranscludeFn && parentBoundTranscludeFn.$$boundTransclude && (parentBoundTranscludeFn = parentBoundTranscludeFn.$$boundTransclude),
                    namespace || (namespace = detectNamespaceForChildElements(futureParentElement));
                    var $linkNode;
                    if ($linkNode = "html" !== namespace ? jqLite(wrapTemplate(namespace, jqLite("<div>").append($compileNodes).html())) : cloneConnectFn ? JQLitePrototype.clone.call($compileNodes) : $compileNodes,
                    transcludeControllers)
                        for (var controllerName in transcludeControllers)
                            $linkNode.data("$" + controllerName + "Controller", transcludeControllers[controllerName].instance);
                    return compile.$$addScopeInfo($linkNode, scope),
                    cloneConnectFn && cloneConnectFn($linkNode, scope),
                    compositeLinkFn && compositeLinkFn(scope, $linkNode, $linkNode, parentBoundTranscludeFn),
                    $linkNode
                }
            }
            function detectNamespaceForChildElements(parentElement) {
                var node = parentElement && parentElement[0];
                return node && "foreignobject" !== nodeName_(node) && node.toString().match(/SVG/) ? "svg" : "html"
            }
            function compileNodes(nodeList, transcludeFn, $rootElement, maxPriority, ignoreDirective, previousCompileContext) {
                function compositeLinkFn(scope, nodeList, $rootElement, parentBoundTranscludeFn) {
                    var nodeLinkFn, childLinkFn, node, childScope, i, ii, idx, childBoundTranscludeFn, stableNodeList;
                    if (nodeLinkFnFound) {
                        var nodeListLength = nodeList.length;
                        for (stableNodeList = new Array(nodeListLength),
                        i = 0; i < linkFns.length; i += 3)
                            idx = linkFns[i],
                            stableNodeList[idx] = nodeList[idx]
                    } else
                        stableNodeList = nodeList;
                    for (i = 0,
                    ii = linkFns.length; ii > i; )
                        node = stableNodeList[linkFns[i++]],
                        nodeLinkFn = linkFns[i++],
                        childLinkFn = linkFns[i++],
                        nodeLinkFn ? (nodeLinkFn.scope ? (childScope = scope.$new(),
                        compile.$$addScopeInfo(jqLite(node), childScope)) : childScope = scope,
                        childBoundTranscludeFn = nodeLinkFn.transcludeOnThisElement ? createBoundTranscludeFn(scope, nodeLinkFn.transclude, parentBoundTranscludeFn, nodeLinkFn.elementTranscludeOnThisElement) : !nodeLinkFn.templateOnThisElement && parentBoundTranscludeFn ? parentBoundTranscludeFn : !parentBoundTranscludeFn && transcludeFn ? createBoundTranscludeFn(scope, transcludeFn) : null,
                        nodeLinkFn(childLinkFn, childScope, node, $rootElement, childBoundTranscludeFn)) : childLinkFn && childLinkFn(scope, node.childNodes, undefined, parentBoundTranscludeFn)
                }
                for (var attrs, directives, nodeLinkFn, childNodes, childLinkFn, linkFnFound, nodeLinkFnFound, linkFns = [], i = 0; i < nodeList.length; i++)
                    attrs = new Attributes,
                    directives = collectDirectives(nodeList[i], [], attrs, 0 === i ? maxPriority : undefined, ignoreDirective),
                    nodeLinkFn = directives.length ? applyDirectivesToNode(directives, nodeList[i], attrs, transcludeFn, $rootElement, null, [], [], previousCompileContext) : null,
                    nodeLinkFn && nodeLinkFn.scope && compile.$$addScopeClass(attrs.$$element),
                    childLinkFn = nodeLinkFn && nodeLinkFn.terminal || !(childNodes = nodeList[i].childNodes) || !childNodes.length ? null : compileNodes(childNodes, nodeLinkFn ? (nodeLinkFn.transcludeOnThisElement || !nodeLinkFn.templateOnThisElement) && nodeLinkFn.transclude : transcludeFn),
                    (nodeLinkFn || childLinkFn) && (linkFns.push(i, nodeLinkFn, childLinkFn),
                    linkFnFound = !0,
                    nodeLinkFnFound = nodeLinkFnFound || nodeLinkFn),
                    previousCompileContext = null;
                return linkFnFound ? compositeLinkFn : null
            }
            function createBoundTranscludeFn(scope, transcludeFn, previousBoundTranscludeFn) {
                var boundTranscludeFn = function(transcludedScope, cloneFn, controllers, futureParentElement, containingScope) {
                    return transcludedScope || (transcludedScope = scope.$new(!1, containingScope),
                    transcludedScope.$$transcluded = !0),
                    transcludeFn(transcludedScope, cloneFn, {
                        parentBoundTranscludeFn: previousBoundTranscludeFn,
                        transcludeControllers: controllers,
                        futureParentElement: futureParentElement
                    })
                };
                return boundTranscludeFn
            }
            function collectDirectives(node, directives, attrs, maxPriority, ignoreDirective) {
                var match, className, nodeType = node.nodeType, attrsMap = attrs.$attr;
                switch (nodeType) {
                case NODE_TYPE_ELEMENT:
                    addDirective(directives, directiveNormalize(nodeName_(node)), "E", maxPriority, ignoreDirective);
                    for (var attr, name, nName, ngAttrName, value, isNgAttr, nAttrs = node.attributes, j = 0, jj = nAttrs && nAttrs.length; jj > j; j++) {
                        var attrStartName = !1
                          , attrEndName = !1;
                        attr = nAttrs[j],
                        name = attr.name,
                        value = trim(attr.value),
                        ngAttrName = directiveNormalize(name),
                        (isNgAttr = NG_ATTR_BINDING.test(ngAttrName)) && (name = name.replace(PREFIX_REGEXP, "").substr(8).replace(/_(.)/g, function(match, letter) {
                            return letter.toUpperCase()
                        }));
                        var directiveNName = ngAttrName.replace(/(Start|End)$/, "");
                        directiveIsMultiElement(directiveNName) && ngAttrName === directiveNName + "Start" && (attrStartName = name,
                        attrEndName = name.substr(0, name.length - 5) + "end",
                        name = name.substr(0, name.length - 6)),
                        nName = directiveNormalize(name.toLowerCase()),
                        attrsMap[nName] = name,
                        !isNgAttr && attrs.hasOwnProperty(nName) || (attrs[nName] = value,
                        getBooleanAttrName(node, nName) && (attrs[nName] = !0)),
                        addAttrInterpolateDirective(node, directives, value, nName, isNgAttr),
                        addDirective(directives, nName, "A", maxPriority, ignoreDirective, attrStartName, attrEndName)
                    }
                    if (className = node.className,
                    isObject(className) && (className = className.animVal),
                    isString(className) && "" !== className)
                        for (; match = CLASS_DIRECTIVE_REGEXP.exec(className); )
                            nName = directiveNormalize(match[2]),
                            addDirective(directives, nName, "C", maxPriority, ignoreDirective) && (attrs[nName] = trim(match[3])),
                            className = className.substr(match.index + match[0].length);
                    break;
                case NODE_TYPE_TEXT:
                    addTextInterpolateDirective(directives, node.nodeValue);
                    break;
                case NODE_TYPE_COMMENT:
                    try {
                        match = COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue),
                        match && (nName = directiveNormalize(match[1]),
                        addDirective(directives, nName, "M", maxPriority, ignoreDirective) && (attrs[nName] = trim(match[2])))
                    } catch (e) {}
                }
                return directives.sort(byPriority),
                directives
            }
            function groupScan(node, attrStart, attrEnd) {
                var nodes = []
                  , depth = 0;
                if (attrStart && node.hasAttribute && node.hasAttribute(attrStart)) {
                    do {
                        if (!node)
                            throw $compileMinErr("uterdir", "Unterminated attribute, found '{0}' but no matching '{1}' found.", attrStart, attrEnd);
                        node.nodeType == NODE_TYPE_ELEMENT && (node.hasAttribute(attrStart) && depth++,
                        node.hasAttribute(attrEnd) && depth--),
                        nodes.push(node),
                        node = node.nextSibling
                    } while (depth > 0)
                } else
                    nodes.push(node);
                return jqLite(nodes)
            }
            function groupElementsLinkFnWrapper(linkFn, attrStart, attrEnd) {
                return function(scope, element, attrs, controllers, transcludeFn) {
                    return element = groupScan(element[0], attrStart, attrEnd),
                    linkFn(scope, element, attrs, controllers, transcludeFn)
                }
            }
            function applyDirectivesToNode(directives, compileNode, templateAttrs, transcludeFn, jqCollection, originalReplaceDirective, preLinkFns, postLinkFns, previousCompileContext) {
                function addLinkFns(pre, post, attrStart, attrEnd) {
                    pre && (attrStart && (pre = groupElementsLinkFnWrapper(pre, attrStart, attrEnd)),
                    pre.require = directive.require,
                    pre.directiveName = directiveName,
                    (newIsolateScopeDirective === directive || directive.$$isolateScope) && (pre = cloneAndAnnotateFn(pre, {
                        isolateScope: !0
                    })),
                    preLinkFns.push(pre)),
                    post && (attrStart && (post = groupElementsLinkFnWrapper(post, attrStart, attrEnd)),
                    post.require = directive.require,
                    post.directiveName = directiveName,
                    (newIsolateScopeDirective === directive || directive.$$isolateScope) && (post = cloneAndAnnotateFn(post, {
                        isolateScope: !0
                    })),
                    postLinkFns.push(post))
                }
                function getControllers(directiveName, require, $element, elementControllers) {
                    var value, match, retrievalMethod = "data", optional = !1, $searchElement = $element;
                    if (isString(require)) {
                        if (match = require.match(REQUIRE_PREFIX_REGEXP),
                        require = require.substring(match[0].length),
                        match[3] && (match[1] ? match[3] = null : match[1] = match[3]),
                        "^" === match[1] ? retrievalMethod = "inheritedData" : "^^" === match[1] && (retrievalMethod = "inheritedData",
                        $searchElement = $element.parent()),
                        "?" === match[2] && (optional = !0),
                        value = null,
                        elementControllers && "data" === retrievalMethod && (value = elementControllers[require]) && (value = value.instance),
                        value = value || $searchElement[retrievalMethod]("$" + require + "Controller"),
                        !value && !optional)
                            throw $compileMinErr("ctreq", "Controller '{0}', required by directive '{1}', can't be found!", require, directiveName);
                        return value || null
                    }
                    return isArray(require) && (value = [],
                    forEach(require, function(require) {
                        value.push(getControllers(directiveName, require, $element, elementControllers))
                    })),
                    value
                }
                function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
                    function controllersBoundTransclude(scope, cloneAttachFn, futureParentElement) {
                        var transcludeControllers;
                        return isScope(scope) || (futureParentElement = cloneAttachFn,
                        cloneAttachFn = scope,
                        scope = undefined),
                        hasElementTranscludeDirective && (transcludeControllers = elementControllers),
                        futureParentElement || (futureParentElement = hasElementTranscludeDirective ? $element.parent() : $element),
                        boundTranscludeFn(scope, cloneAttachFn, transcludeControllers, futureParentElement, scopeToChild)
                    }
                    var i, ii, linkFn, controller, isolateScope, elementControllers, transcludeFn, $element, attrs;
                    if (compileNode === linkNode ? (attrs = templateAttrs,
                    $element = templateAttrs.$$element) : ($element = jqLite(linkNode),
                    attrs = new Attributes($element,templateAttrs)),
                    newIsolateScopeDirective && (isolateScope = scope.$new(!0)),
                    boundTranscludeFn && (transcludeFn = controllersBoundTransclude,
                    transcludeFn.$$boundTransclude = boundTranscludeFn),
                    controllerDirectives && (controllers = {},
                    elementControllers = {},
                    forEach(controllerDirectives, function(directive) {
                        var controllerInstance, locals = {
                            $scope: directive === newIsolateScopeDirective || directive.$$isolateScope ? isolateScope : scope,
                            $element: $element,
                            $attrs: attrs,
                            $transclude: transcludeFn
                        };
                        controller = directive.controller,
                        "@" == controller && (controller = attrs[directive.name]),
                        controllerInstance = $controller(controller, locals, !0, directive.controllerAs),
                        elementControllers[directive.name] = controllerInstance,
                        hasElementTranscludeDirective || $element.data("$" + directive.name + "Controller", controllerInstance.instance),
                        controllers[directive.name] = controllerInstance
                    })),
                    newIsolateScopeDirective) {
                        compile.$$addScopeInfo($element, isolateScope, !0, !(templateDirective && (templateDirective === newIsolateScopeDirective || templateDirective === newIsolateScopeDirective.$$originalDirective))),
                        compile.$$addScopeClass($element, !0);
                        var isolateScopeController = controllers && controllers[newIsolateScopeDirective.name]
                          , isolateBindingContext = isolateScope;
                        isolateScopeController && isolateScopeController.identifier && newIsolateScopeDirective.bindToController === !0 && (isolateBindingContext = isolateScopeController.instance),
                        forEach(isolateScope.$$isolateBindings = newIsolateScopeDirective.$$isolateBindings, function(definition, scopeName) {
                            var lastValue, parentGet, parentSet, compare, attrName = definition.attrName, optional = definition.optional, mode = definition.mode;
                            switch (mode) {
                            case "@":
                                attrs.$observe(attrName, function(value) {
                                    isolateBindingContext[scopeName] = value
                                }),
                                attrs.$$observers[attrName].$$scope = scope,
                                attrs[attrName] && (isolateBindingContext[scopeName] = $interpolate(attrs[attrName])(scope));
                                break;
                            case "=":
                                if (optional && !attrs[attrName])
                                    return;
                                parentGet = $parse(attrs[attrName]),
                                compare = parentGet.literal ? equals : function(a, b) {
                                    return a === b || a !== a && b !== b
                                }
                                ,
                                parentSet = parentGet.assign || function() {
                                    throw lastValue = isolateBindingContext[scopeName] = parentGet(scope),
                                    $compileMinErr("nonassign", "Expression '{0}' used with directive '{1}' is non-assignable!", attrs[attrName], newIsolateScopeDirective.name)
                                }
                                ,
                                lastValue = isolateBindingContext[scopeName] = parentGet(scope);
                                var parentValueWatch = function(parentValue) {
                                    return compare(parentValue, isolateBindingContext[scopeName]) || (compare(parentValue, lastValue) ? parentSet(scope, parentValue = isolateBindingContext[scopeName]) : isolateBindingContext[scopeName] = parentValue),
                                    lastValue = parentValue
                                };
                                parentValueWatch.$stateful = !0;
                                var unwatch;
                                unwatch = definition.collection ? scope.$watchCollection(attrs[attrName], parentValueWatch) : scope.$watch($parse(attrs[attrName], parentValueWatch), null, parentGet.literal),
                                isolateScope.$on("$destroy", unwatch);
                                break;
                            case "&":
                                parentGet = $parse(attrs[attrName]),
                                isolateBindingContext[scopeName] = function(locals) {
                                    return parentGet(scope, locals)
                                }
                            }
                        })
                    }
                    for (controllers && (forEach(controllers, function(controller) {
                        controller()
                    }),
                    controllers = null),
                    i = 0,
                    ii = preLinkFns.length; ii > i; i++)
                        linkFn = preLinkFns[i],
                        invokeLinkFn(linkFn, linkFn.isolateScope ? isolateScope : scope, $element, attrs, linkFn.require && getControllers(linkFn.directiveName, linkFn.require, $element, elementControllers), transcludeFn);
                    var scopeToChild = scope;
                    for (newIsolateScopeDirective && (newIsolateScopeDirective.template || null === newIsolateScopeDirective.templateUrl) && (scopeToChild = isolateScope),
                    childLinkFn && childLinkFn(scopeToChild, linkNode.childNodes, undefined, boundTranscludeFn),
                    i = postLinkFns.length - 1; i >= 0; i--)
                        linkFn = postLinkFns[i],
                        invokeLinkFn(linkFn, linkFn.isolateScope ? isolateScope : scope, $element, attrs, linkFn.require && getControllers(linkFn.directiveName, linkFn.require, $element, elementControllers), transcludeFn)
                }
                previousCompileContext = previousCompileContext || {};
                for (var newScopeDirective, controllers, directive, directiveName, $template, linkFn, directiveValue, terminalPriority = -Number.MAX_VALUE, controllerDirectives = previousCompileContext.controllerDirectives, newIsolateScopeDirective = previousCompileContext.newIsolateScopeDirective, templateDirective = previousCompileContext.templateDirective, nonTlbTranscludeDirective = previousCompileContext.nonTlbTranscludeDirective, hasTranscludeDirective = !1, hasTemplate = !1, hasElementTranscludeDirective = previousCompileContext.hasElementTranscludeDirective, $compileNode = templateAttrs.$$element = jqLite(compileNode), replaceDirective = originalReplaceDirective, childTranscludeFn = transcludeFn, i = 0, ii = directives.length; ii > i; i++) {
                    directive = directives[i];
                    var attrStart = directive.$$start
                      , attrEnd = directive.$$end;
                    if (attrStart && ($compileNode = groupScan(compileNode, attrStart, attrEnd)),
                    $template = undefined,
                    terminalPriority > directive.priority)
                        break;
                    if ((directiveValue = directive.scope) && (directive.templateUrl || (isObject(directiveValue) ? (assertNoDuplicate("new/isolated scope", newIsolateScopeDirective || newScopeDirective, directive, $compileNode),
                    newIsolateScopeDirective = directive) : assertNoDuplicate("new/isolated scope", newIsolateScopeDirective, directive, $compileNode)),
                    newScopeDirective = newScopeDirective || directive),
                    directiveName = directive.name,
                    !directive.templateUrl && directive.controller && (directiveValue = directive.controller,
                    controllerDirectives = controllerDirectives || {},
                    assertNoDuplicate("'" + directiveName + "' controller", controllerDirectives[directiveName], directive, $compileNode),
                    controllerDirectives[directiveName] = directive),
                    (directiveValue = directive.transclude) && (hasTranscludeDirective = !0,
                    directive.$$tlb || (assertNoDuplicate("transclusion", nonTlbTranscludeDirective, directive, $compileNode),
                    nonTlbTranscludeDirective = directive),
                    "element" == directiveValue ? (hasElementTranscludeDirective = !0,
                    terminalPriority = directive.priority,
                    $template = $compileNode,
                    $compileNode = templateAttrs.$$element = jqLite(document.createComment(" " + directiveName + ": " + templateAttrs[directiveName] + " ")),
                    compileNode = $compileNode[0],
                    replaceWith(jqCollection, sliceArgs($template), compileNode),
                    childTranscludeFn = compile($template, transcludeFn, terminalPriority, replaceDirective && replaceDirective.name, {
                        nonTlbTranscludeDirective: nonTlbTranscludeDirective
                    })) : ($template = jqLite(jqLiteClone(compileNode)).contents(),
                    $compileNode.empty(),
                    childTranscludeFn = compile($template, transcludeFn))),
                    directive.template)
                        if (hasTemplate = !0,
                        assertNoDuplicate("template", templateDirective, directive, $compileNode),
                        templateDirective = directive,
                        directiveValue = isFunction(directive.template) ? directive.template($compileNode, templateAttrs) : directive.template,
                        directiveValue = denormalizeTemplate(directiveValue),
                        directive.replace) {
                            if (replaceDirective = directive,
                            $template = jqLiteIsTextNode(directiveValue) ? [] : removeComments(wrapTemplate(directive.templateNamespace, trim(directiveValue))),
                            compileNode = $template[0],
                            1 != $template.length || compileNode.nodeType !== NODE_TYPE_ELEMENT)
                                throw $compileMinErr("tplrt", "Template for directive '{0}' must have exactly one root element. {1}", directiveName, "");
                            replaceWith(jqCollection, $compileNode, compileNode);
                            var newTemplateAttrs = {
                                $attr: {}
                            }
                              , templateDirectives = collectDirectives(compileNode, [], newTemplateAttrs)
                              , unprocessedDirectives = directives.splice(i + 1, directives.length - (i + 1));
                            newIsolateScopeDirective && markDirectivesAsIsolate(templateDirectives),
                            directives = directives.concat(templateDirectives).concat(unprocessedDirectives),
                            mergeTemplateAttributes(templateAttrs, newTemplateAttrs),
                            ii = directives.length
                        } else
                            $compileNode.html(directiveValue);
                    if (directive.templateUrl)
                        hasTemplate = !0,
                        assertNoDuplicate("template", templateDirective, directive, $compileNode),
                        templateDirective = directive,
                        directive.replace && (replaceDirective = directive),
                        nodeLinkFn = compileTemplateUrl(directives.splice(i, directives.length - i), $compileNode, templateAttrs, jqCollection, hasTranscludeDirective && childTranscludeFn, preLinkFns, postLinkFns, {
                            controllerDirectives: controllerDirectives,
                            newIsolateScopeDirective: newIsolateScopeDirective,
                            templateDirective: templateDirective,
                            nonTlbTranscludeDirective: nonTlbTranscludeDirective
                        }),
                        ii = directives.length;
                    else if (directive.compile)
                        try {
                            linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn),
                            isFunction(linkFn) ? addLinkFns(null, linkFn, attrStart, attrEnd) : linkFn && addLinkFns(linkFn.pre, linkFn.post, attrStart, attrEnd)
                        } catch (e) {
                            $exceptionHandler(e, startingTag($compileNode))
                        }
                    directive.terminal && (nodeLinkFn.terminal = !0,
                    terminalPriority = Math.max(terminalPriority, directive.priority))
                }
                return nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === !0,
                nodeLinkFn.transcludeOnThisElement = hasTranscludeDirective,
                nodeLinkFn.elementTranscludeOnThisElement = hasElementTranscludeDirective,
                nodeLinkFn.templateOnThisElement = hasTemplate,
                nodeLinkFn.transclude = childTranscludeFn,
                previousCompileContext.hasElementTranscludeDirective = hasElementTranscludeDirective,
                nodeLinkFn
            }
            function markDirectivesAsIsolate(directives) {
                for (var j = 0, jj = directives.length; jj > j; j++)
                    directives[j] = inherit(directives[j], {
                        $$isolateScope: !0
                    })
            }
            function addDirective(tDirectives, name, location, maxPriority, ignoreDirective, startAttrName, endAttrName) {
                if (name === ignoreDirective)
                    return null;
                var match = null;
                if (hasDirectives.hasOwnProperty(name))
                    for (var directive, directives = $injector.get(name + Suffix), i = 0, ii = directives.length; ii > i; i++)
                        try {
                            directive = directives[i],
                            (maxPriority === undefined || maxPriority > directive.priority) && -1 != directive.restrict.indexOf(location) && (startAttrName && (directive = inherit(directive, {
                                $$start: startAttrName,
                                $$end: endAttrName
                            })),
                            tDirectives.push(directive),
                            match = directive)
                        } catch (e) {
                            $exceptionHandler(e)
                        }
                return match
            }
            function directiveIsMultiElement(name) {
                if (hasDirectives.hasOwnProperty(name))
                    for (var directive, directives = $injector.get(name + Suffix), i = 0, ii = directives.length; ii > i; i++)
                        if (directive = directives[i],
                        directive.multiElement)
                            return !0;
                return !1
            }
            function mergeTemplateAttributes(dst, src) {
                var srcAttr = src.$attr
                  , dstAttr = dst.$attr
                  , $element = dst.$$element;
                forEach(dst, function(value, key) {
                    "$" != key.charAt(0) && (src[key] && src[key] !== value && (value += ("style" === key ? ";" : " ") + src[key]),
                    dst.$set(key, value, !0, srcAttr[key]))
                }),
                forEach(src, function(value, key) {
                    "class" == key ? (safeAddClass($element, value),
                    dst["class"] = (dst["class"] ? dst["class"] + " " : "") + value) : "style" == key ? ($element.attr("style", $element.attr("style") + ";" + value),
                    dst.style = (dst.style ? dst.style + ";" : "") + value) : "$" == key.charAt(0) || dst.hasOwnProperty(key) || (dst[key] = value,
                    dstAttr[key] = srcAttr[key])
                })
            }
            function compileTemplateUrl(directives, $compileNode, tAttrs, $rootElement, childTranscludeFn, preLinkFns, postLinkFns, previousCompileContext) {
                var afterTemplateNodeLinkFn, afterTemplateChildLinkFn, linkQueue = [], beforeTemplateCompileNode = $compileNode[0], origAsyncDirective = directives.shift(), derivedSyncDirective = inherit(origAsyncDirective, {
                    templateUrl: null,
                    transclude: null,
                    replace: null,
                    $$originalDirective: origAsyncDirective
                }), templateUrl = isFunction(origAsyncDirective.templateUrl) ? origAsyncDirective.templateUrl($compileNode, tAttrs) : origAsyncDirective.templateUrl, templateNamespace = origAsyncDirective.templateNamespace;
                return $compileNode.empty(),
                $templateRequest($sce.getTrustedResourceUrl(templateUrl)).then(function(content) {
                    var compileNode, tempTemplateAttrs, $template, childBoundTranscludeFn;
                    if (content = denormalizeTemplate(content),
                    origAsyncDirective.replace) {
                        if ($template = jqLiteIsTextNode(content) ? [] : removeComments(wrapTemplate(templateNamespace, trim(content))),
                        compileNode = $template[0],
                        1 != $template.length || compileNode.nodeType !== NODE_TYPE_ELEMENT)
                            throw $compileMinErr("tplrt", "Template for directive '{0}' must have exactly one root element. {1}", origAsyncDirective.name, templateUrl);
                        tempTemplateAttrs = {
                            $attr: {}
                        },
                        replaceWith($rootElement, $compileNode, compileNode);
                        var templateDirectives = collectDirectives(compileNode, [], tempTemplateAttrs);
                        isObject(origAsyncDirective.scope) && markDirectivesAsIsolate(templateDirectives),
                        directives = templateDirectives.concat(directives),
                        mergeTemplateAttributes(tAttrs, tempTemplateAttrs)
                    } else
                        compileNode = beforeTemplateCompileNode,
                        $compileNode.html(content);
                    for (directives.unshift(derivedSyncDirective),
                    afterTemplateNodeLinkFn = applyDirectivesToNode(directives, compileNode, tAttrs, childTranscludeFn, $compileNode, origAsyncDirective, preLinkFns, postLinkFns, previousCompileContext),
                    forEach($rootElement, function(node, i) {
                        node == compileNode && ($rootElement[i] = $compileNode[0])
                    }),
                    afterTemplateChildLinkFn = compileNodes($compileNode[0].childNodes, childTranscludeFn); linkQueue.length; ) {
                        var scope = linkQueue.shift()
                          , beforeTemplateLinkNode = linkQueue.shift()
                          , linkRootElement = linkQueue.shift()
                          , boundTranscludeFn = linkQueue.shift()
                          , linkNode = $compileNode[0];
                        if (!scope.$$destroyed) {
                            if (beforeTemplateLinkNode !== beforeTemplateCompileNode) {
                                var oldClasses = beforeTemplateLinkNode.className;
                                previousCompileContext.hasElementTranscludeDirective && origAsyncDirective.replace || (linkNode = jqLiteClone(compileNode)),
                                replaceWith(linkRootElement, jqLite(beforeTemplateLinkNode), linkNode),
                                safeAddClass(jqLite(linkNode), oldClasses)
                            }
                            childBoundTranscludeFn = afterTemplateNodeLinkFn.transcludeOnThisElement ? createBoundTranscludeFn(scope, afterTemplateNodeLinkFn.transclude, boundTranscludeFn) : boundTranscludeFn,
                            afterTemplateNodeLinkFn(afterTemplateChildLinkFn, scope, linkNode, $rootElement, childBoundTranscludeFn)
                        }
                    }
                    linkQueue = null
                }),
                function(ignoreChildLinkFn, scope, node, rootElement, boundTranscludeFn) {
                    var childBoundTranscludeFn = boundTranscludeFn;
                    scope.$$destroyed || (linkQueue ? linkQueue.push(scope, node, rootElement, childBoundTranscludeFn) : (afterTemplateNodeLinkFn.transcludeOnThisElement && (childBoundTranscludeFn = createBoundTranscludeFn(scope, afterTemplateNodeLinkFn.transclude, boundTranscludeFn)),
                    afterTemplateNodeLinkFn(afterTemplateChildLinkFn, scope, node, rootElement, childBoundTranscludeFn)))
                }
            }
            function byPriority(a, b) {
                var diff = b.priority - a.priority;
                return 0 !== diff ? diff : a.name !== b.name ? a.name < b.name ? -1 : 1 : a.index - b.index
            }
            function assertNoDuplicate(what, previousDirective, directive, element) {
                if (previousDirective)
                    throw $compileMinErr("multidir", "Multiple directives [{0}, {1}] asking for {2} on: {3}", previousDirective.name, directive.name, what, startingTag(element))
            }
            function addTextInterpolateDirective(directives, text) {
                var interpolateFn = $interpolate(text, !0);
                interpolateFn && directives.push({
                    priority: 0,
                    compile: function(templateNode) {
                        var templateNodeParent = templateNode.parent()
                          , hasCompileParent = !!templateNodeParent.length;
                        return hasCompileParent && compile.$$addBindingClass(templateNodeParent),
                        function(scope, node) {
                            var parent = node.parent();
                            hasCompileParent || compile.$$addBindingClass(parent),
                            compile.$$addBindingInfo(parent, interpolateFn.expressions),
                            scope.$watch(interpolateFn, function(value) {
                                node[0].nodeValue = value
                            })
                        }
                    }
                })
            }
            function wrapTemplate(type, template) {
                switch (type = lowercase(type || "html")) {
                case "svg":
                case "math":
                    var wrapper = document.createElement("div");
                    return wrapper.innerHTML = "<" + type + ">" + template + "</" + type + ">",
                    wrapper.childNodes[0].childNodes;
                default:
                    return template
                }
            }
            function getTrustedContext(node, attrNormalizedName) {
                if ("srcdoc" == attrNormalizedName)
                    return $sce.HTML;
                var tag = nodeName_(node);
                return "xlinkHref" == attrNormalizedName || "form" == tag && "action" == attrNormalizedName || "img" != tag && ("src" == attrNormalizedName || "ngSrc" == attrNormalizedName) ? $sce.RESOURCE_URL : void 0
            }
            function addAttrInterpolateDirective(node, directives, value, name, allOrNothing) {
                var trustedContext = getTrustedContext(node, name);
                allOrNothing = ALL_OR_NOTHING_ATTRS[name] || allOrNothing;
                var interpolateFn = $interpolate(value, !0, trustedContext, allOrNothing);
                if (interpolateFn) {
                    if ("multiple" === name && "select" === nodeName_(node))
                        throw $compileMinErr("selmulti", "Binding to the 'multiple' attribute is not supported. Element: {0}", startingTag(node));
                    directives.push({
                        priority: 100,
                        compile: function() {
                            return {
                                pre: function(scope, element, attr) {
                                    var $$observers = attr.$$observers || (attr.$$observers = {});
                                    if (EVENT_HANDLER_ATTR_REGEXP.test(name))
                                        throw $compileMinErr("nodomevents", "Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");
                                    var newValue = attr[name];
                                    newValue !== value && (interpolateFn = newValue && $interpolate(newValue, !0, trustedContext, allOrNothing),
                                    value = newValue),
                                    interpolateFn && (attr[name] = interpolateFn(scope),
                                    ($$observers[name] || ($$observers[name] = [])).$$inter = !0,
                                    (attr.$$observers && attr.$$observers[name].$$scope || scope).$watch(interpolateFn, function(newValue, oldValue) {
                                        "class" === name && newValue != oldValue ? attr.$updateClass(newValue, oldValue) : attr.$set(name, newValue)
                                    }))
                                }
                            }
                        }
                    })
                }
            }
            function replaceWith($rootElement, elementsToRemove, newNode) {
                var i, ii, firstElementToRemove = elementsToRemove[0], removeCount = elementsToRemove.length, parent = firstElementToRemove.parentNode;
                if ($rootElement)
                    for (i = 0,
                    ii = $rootElement.length; ii > i; i++)
                        if ($rootElement[i] == firstElementToRemove) {
                            $rootElement[i++] = newNode;
                            for (var j = i, j2 = j + removeCount - 1, jj = $rootElement.length; jj > j; j++,
                            j2++)
                                jj > j2 ? $rootElement[j] = $rootElement[j2] : delete $rootElement[j];
                            $rootElement.length -= removeCount - 1,
                            $rootElement.context === firstElementToRemove && ($rootElement.context = newNode);
                            break
                        }
                parent && parent.replaceChild(newNode, firstElementToRemove);
                var fragment = document.createDocumentFragment();
                fragment.appendChild(firstElementToRemove),
                jqLite(newNode).data(jqLite(firstElementToRemove).data()),
                jQuery ? (skipDestroyOnNextJQueryCleanData = !0,
                jQuery.cleanData([firstElementToRemove])) : delete jqLite.cache[firstElementToRemove[jqLite.expando]];
                for (var k = 1, kk = elementsToRemove.length; kk > k; k++) {
                    var element = elementsToRemove[k];
                    jqLite(element).remove(),
                    fragment.appendChild(element),
                    delete elementsToRemove[k]
                }
                elementsToRemove[0] = newNode,
                elementsToRemove.length = 1
            }
            function cloneAndAnnotateFn(fn, annotation) {
                return extend(function() {
                    return fn.apply(null, arguments)
                }, fn, annotation)
            }
            function invokeLinkFn(linkFn, scope, $element, attrs, controllers, transcludeFn) {
                try {
                    linkFn(scope, $element, attrs, controllers, transcludeFn)
                } catch (e) {
                    $exceptionHandler(e, startingTag($element))
                }
            }
            var Attributes = function(element, attributesToCopy) {
                if (attributesToCopy) {
                    var i, l, key, keys = Object.keys(attributesToCopy);
                    for (i = 0,
                    l = keys.length; l > i; i++)
                        key = keys[i],
                        this[key] = attributesToCopy[key]
                } else
                    this.$attr = {};
                this.$$element = element
            };
            Attributes.prototype = {
                $normalize: directiveNormalize,
                $addClass: function(classVal) {
                    classVal && classVal.length > 0 && $animate.addClass(this.$$element, classVal)
                },
                $removeClass: function(classVal) {
                    classVal && classVal.length > 0 && $animate.removeClass(this.$$element, classVal)
                },
                $updateClass: function(newClasses, oldClasses) {
                    var toAdd = tokenDifference(newClasses, oldClasses);
                    toAdd && toAdd.length && $animate.addClass(this.$$element, toAdd);
                    var toRemove = tokenDifference(oldClasses, newClasses);
                    toRemove && toRemove.length && $animate.removeClass(this.$$element, toRemove)
                },
                $set: function(key, value, writeAttr, attrName) {
                    var nodeName, node = this.$$element[0], booleanKey = getBooleanAttrName(node, key), aliasedKey = getAliasedAttrName(node, key), observer = key;
                    if (booleanKey ? (this.$$element.prop(key, value),
                    attrName = booleanKey) : aliasedKey && (this[aliasedKey] = value,
                    observer = aliasedKey),
                    this[key] = value,
                    attrName ? this.$attr[key] = attrName : (attrName = this.$attr[key],
                    attrName || (this.$attr[key] = attrName = snake_case(key, "-"))),
                    nodeName = nodeName_(this.$$element),
                    "a" === nodeName && "href" === key || "img" === nodeName && "src" === key)
                        this[key] = value = $$sanitizeUri(value, "src" === key);
                    else if ("img" === nodeName && "srcset" === key) {
                        for (var result = "", trimmedSrcset = trim(value), srcPattern = /(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/, pattern = /\s/.test(trimmedSrcset) ? srcPattern : /(,)/, rawUris = trimmedSrcset.split(pattern), nbrUrisWith2parts = Math.floor(rawUris.length / 2), i = 0; nbrUrisWith2parts > i; i++) {
                            var innerIdx = 2 * i;
                            result += $$sanitizeUri(trim(rawUris[innerIdx]), !0),
                            result += " " + trim(rawUris[innerIdx + 1])
                        }
                        var lastTuple = trim(rawUris[2 * i]).split(/\s/);
                        result += $$sanitizeUri(trim(lastTuple[0]), !0),
                        2 === lastTuple.length && (result += " " + trim(lastTuple[1])),
                        this[key] = value = result
                    }
                    writeAttr !== !1 && (null === value || value === undefined ? this.$$element.removeAttr(attrName) : this.$$element.attr(attrName, value));
                    var $$observers = this.$$observers;
                    $$observers && forEach($$observers[observer], function(fn) {
                        try {
                            fn(value)
                        } catch (e) {
                            $exceptionHandler(e)
                        }
                    })
                },
                $observe: function(key, fn) {
                    var attrs = this
                      , $$observers = attrs.$$observers || (attrs.$$observers = createMap())
                      , listeners = $$observers[key] || ($$observers[key] = []);
                    return listeners.push(fn),
                    $rootScope.$evalAsync(function() {
                        !listeners.$$inter && attrs.hasOwnProperty(key) && fn(attrs[key])
                    }),
                    function() {
                        arrayRemove(listeners, fn)
                    }
                }
            };
            var startSymbol = $interpolate.startSymbol()
              , endSymbol = $interpolate.endSymbol()
              , denormalizeTemplate = "{{" == startSymbol || "}}" == endSymbol ? identity : function(template) {
                return template.replace(/\{\{/g, startSymbol).replace(/}}/g, endSymbol)
            }
              , NG_ATTR_BINDING = /^ngAttr[A-Z]/;
            return compile.$$addBindingInfo = debugInfoEnabled ? function($element, binding) {
                var bindings = $element.data("$binding") || [];
                isArray(binding) ? bindings = bindings.concat(binding) : bindings.push(binding),
                $element.data("$binding", bindings)
            }
            : noop,
            compile.$$addBindingClass = debugInfoEnabled ? function($element) {
                safeAddClass($element, "ng-binding")
            }
            : noop,
            compile.$$addScopeInfo = debugInfoEnabled ? function($element, scope, isolated, noTemplate) {
                var dataName = isolated ? noTemplate ? "$isolateScopeNoTemplate" : "$isolateScope" : "$scope";
                $element.data(dataName, scope)
            }
            : noop,
            compile.$$addScopeClass = debugInfoEnabled ? function($element, isolated) {
                safeAddClass($element, isolated ? "ng-isolate-scope" : "ng-scope")
            }
            : noop,
            compile
        }
        ]
    }
    function directiveNormalize(name) {
        return camelCase(name.replace(PREFIX_REGEXP, ""))
    }
    function tokenDifference(str1, str2) {
        var values = ""
          , tokens1 = str1.split(/\s+/)
          , tokens2 = str2.split(/\s+/);
        outer: for (var i = 0; i < tokens1.length; i++) {
            for (var token = tokens1[i], j = 0; j < tokens2.length; j++)
                if (token == tokens2[j])
                    continue outer;
            values += (values.length > 0 ? " " : "") + token
        }
        return values
    }
    function removeComments(jqNodes) {
        jqNodes = jqLite(jqNodes);
        var i = jqNodes.length;
        if (1 >= i)
            return jqNodes;
        for (; i--; ) {
            var node = jqNodes[i];
            node.nodeType === NODE_TYPE_COMMENT && splice.call(jqNodes, i, 1)
        }
        return jqNodes
    }
    function $ControllerProvider() {
        var controllers = {}
          , globals = !1
          , CNTRL_REG = /^(\S+)(\s+as\s+(\w+))?$/;
        this.register = function(name, constructor) {
            assertNotHasOwnProperty(name, "controller"),
            isObject(name) ? extend(controllers, name) : controllers[name] = constructor
        }
        ,
        this.allowGlobals = function() {
            globals = !0
        }
        ,
        this.$get = ["$injector", "$window", function($injector, $window) {
            function addIdentifier(locals, identifier, instance, name) {
                if (!locals || !isObject(locals.$scope))
                    throw minErr("$controller")("noscp", "Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.", name, identifier);
                locals.$scope[identifier] = instance
            }
            return function(expression, locals, later, ident) {
                var instance, match, constructor, identifier;
                if (later = later === !0,
                ident && isString(ident) && (identifier = ident),
                isString(expression)) {
                    if (match = expression.match(CNTRL_REG),
                    !match)
                        throw $controllerMinErr("ctrlfmt", "Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.", expression);
                    constructor = match[1],
                    identifier = identifier || match[3],
                    expression = controllers.hasOwnProperty(constructor) ? controllers[constructor] : getter(locals.$scope, constructor, !0) || (globals ? getter($window, constructor, !0) : undefined),
                    assertArgFn(expression, constructor, !0)
                }
                if (later) {
                    var controllerPrototype = (isArray(expression) ? expression[expression.length - 1] : expression).prototype;
                    return instance = Object.create(controllerPrototype || null),
                    identifier && addIdentifier(locals, identifier, instance, constructor || expression.name),
                    extend(function() {
                        return $injector.invoke(expression, instance, locals, constructor),
                        instance
                    }, {
                        instance: instance,
                        identifier: identifier
                    })
                }
                return instance = $injector.instantiate(expression, locals, constructor),
                identifier && addIdentifier(locals, identifier, instance, constructor || expression.name),
                instance
            }
        }
        ]
    }
    function $DocumentProvider() {
        this.$get = ["$window", function(window) {
            return jqLite(window.document)
        }
        ]
    }
    function $ExceptionHandlerProvider() {
        this.$get = ["$log", function($log) {
            return function() {
                $log.error.apply($log, arguments)
            }
        }
        ]
    }
    function defaultHttpResponseTransform(data, headers) {
        if (isString(data)) {
            var tempData = data.replace(JSON_PROTECTION_PREFIX, "").trim();
            if (tempData) {
                var contentType = headers("Content-Type");
                (contentType && 0 === contentType.indexOf(APPLICATION_JSON) || isJsonLike(tempData)) && (data = fromJson(tempData))
            }
        }
        return data
    }
    function isJsonLike(str) {
        var jsonStart = str.match(JSON_START);
        return jsonStart && JSON_ENDS[jsonStart[0]].test(str)
    }
    function parseHeaders(headers) {
        var key, val, i, parsed = createMap();
        return headers ? (forEach(headers.split("\n"), function(line) {
            i = line.indexOf(":"),
            key = lowercase(trim(line.substr(0, i))),
            val = trim(line.substr(i + 1)),
            key && (parsed[key] = parsed[key] ? parsed[key] + ", " + val : val)
        }),
        parsed) : parsed
    }
    function headersGetter(headers) {
        var headersObj = isObject(headers) ? headers : undefined;
        return function(name) {
            if (headersObj || (headersObj = parseHeaders(headers)),
            name) {
                var value = headersObj[lowercase(name)];
                return void 0 === value && (value = null),
                value
            }
            return headersObj
        }
    }
    function transformData(data, headers, status, fns) {
        return isFunction(fns) ? fns(data, headers, status) : (forEach(fns, function(fn) {
            data = fn(data, headers, status)
        }),
        data)
    }
    function isSuccess(status) {
        return status >= 200 && 300 > status
    }
    function $HttpProvider() {
        var defaults = this.defaults = {
            transformResponse: [defaultHttpResponseTransform],
            transformRequest: [function(d) {
                return !isObject(d) || isFile(d) || isBlob(d) || isFormData(d) ? d : toJson(d)
            }
            ],
            headers: {
                common: {
                    Accept: "application/json, text/plain, */*"
                },
                post: shallowCopy(CONTENT_TYPE_APPLICATION_JSON),
                put: shallowCopy(CONTENT_TYPE_APPLICATION_JSON),
                patch: shallowCopy(CONTENT_TYPE_APPLICATION_JSON)
            },
            xsrfCookieName: "XSRF-TOKEN",
            xsrfHeaderName: "X-XSRF-TOKEN"
        }
          , useApplyAsync = !1;
        this.useApplyAsync = function(value) {
            return isDefined(value) ? (useApplyAsync = !!value,
            this) : useApplyAsync
        }
        ;
        var interceptorFactories = this.interceptors = [];
        this.$get = ["$httpBackend", "$browser", "$cacheFactory", "$rootScope", "$q", "$injector", function($httpBackend, $browser, $cacheFactory, $rootScope, $q, $injector) {
            function $http(requestConfig) {
                function transformResponse(response) {
                    var resp = extend({}, response);
                    return response.data ? resp.data = transformData(response.data, response.headers, response.status, config.transformResponse) : resp.data = response.data,
                    isSuccess(response.status) ? resp : $q.reject(resp)
                }
                function executeHeaderFns(headers) {
                    var headerContent, processedHeaders = {};
                    return forEach(headers, function(headerFn, header) {
                        isFunction(headerFn) ? (headerContent = headerFn(),
                        null != headerContent && (processedHeaders[header] = headerContent)) : processedHeaders[header] = headerFn
                    }),
                    processedHeaders
                }
                function mergeHeaders(config) {
                    var defHeaderName, lowercaseDefHeaderName, reqHeaderName, defHeaders = defaults.headers, reqHeaders = extend({}, config.headers);
                    defHeaders = extend({}, defHeaders.common, defHeaders[lowercase(config.method)]);
                    defaultHeadersIteration: for (defHeaderName in defHeaders) {
                        lowercaseDefHeaderName = lowercase(defHeaderName);
                        for (reqHeaderName in reqHeaders)
                            if (lowercase(reqHeaderName) === lowercaseDefHeaderName)
                                continue defaultHeadersIteration;
                        reqHeaders[defHeaderName] = defHeaders[defHeaderName]
                    }
                    return executeHeaderFns(reqHeaders)
                }
                if (!angular.isObject(requestConfig))
                    throw minErr("$http")("badreq", "Http request configuration must be an object.  Received: {0}", requestConfig);
                var config = extend({
                    method: "get",
                    transformRequest: defaults.transformRequest,
                    transformResponse: defaults.transformResponse
                }, requestConfig);
                config.headers = mergeHeaders(requestConfig),
                config.method = uppercase(config.method);
                var serverRequest = function(config) {
                    var headers = config.headers
                      , reqData = transformData(config.data, headersGetter(headers), undefined, config.transformRequest);
                    return isUndefined(reqData) && forEach(headers, function(value, header) {
                        "content-type" === lowercase(header) && delete headers[header]
                    }),
                    isUndefined(config.withCredentials) && !isUndefined(defaults.withCredentials) && (config.withCredentials = defaults.withCredentials),
                    sendReq(config, reqData).then(transformResponse, transformResponse)
                }
                  , chain = [serverRequest, undefined]
                  , promise = $q.when(config);
                for (forEach(reversedInterceptors, function(interceptor) {
                    (interceptor.request || interceptor.requestError) && chain.unshift(interceptor.request, interceptor.requestError),
                    (interceptor.response || interceptor.responseError) && chain.push(interceptor.response, interceptor.responseError)
                }); chain.length; ) {
                    var thenFn = chain.shift()
                      , rejectFn = chain.shift();
                    promise = promise.then(thenFn, rejectFn)
                }
                return promise.success = function(fn) {
                    return promise.then(function(response) {
                        fn(response.data, response.status, response.headers, config)
                    }),
                    promise
                }
                ,
                promise.error = function(fn) {
                    return promise.then(null, function(response) {
                        fn(response.data, response.status, response.headers, config)
                    }),
                    promise
                }
                ,
                promise
            }
            function createShortMethods() {
                forEach(arguments, function(name) {
                    $http[name] = function(url, config) {
                        return $http(extend(config || {}, {
                            method: name,
                            url: url
                        }))
                    }
                })
            }
            function createShortMethodsWithData() {
                forEach(arguments, function(name) {
                    $http[name] = function(url, data, config) {
                        return $http(extend(config || {}, {
                            method: name,
                            url: url,
                            data: data
                        }))
                    }
                })
            }
            function sendReq(config, reqData) {
                function done(status, response, headersString, statusText) {
                    function resolveHttpPromise() {
                        resolvePromise(response, status, headersString, statusText)
                    }
                    cache && (isSuccess(status) ? cache.put(url, [status, response, parseHeaders(headersString), statusText]) : cache.remove(url)),
                    useApplyAsync ? $rootScope.$applyAsync(resolveHttpPromise) : (resolveHttpPromise(),
                    $rootScope.$$phase || $rootScope.$apply())
                }
                function resolvePromise(response, status, headers, statusText) {
                    status = Math.max(status, 0),
                    (isSuccess(status) ? deferred.resolve : deferred.reject)({
                        data: response,
                        status: status,
                        headers: headersGetter(headers),
                        config: config,
                        statusText: statusText
                    })
                }
                function resolvePromiseWithResult(result) {
                    resolvePromise(result.data, result.status, shallowCopy(result.headers()), result.statusText)
                }
                function removePendingReq() {
                    var idx = $http.pendingRequests.indexOf(config);
                    -1 !== idx && $http.pendingRequests.splice(idx, 1)
                }
                var cache, cachedResp, deferred = $q.defer(), promise = deferred.promise, reqHeaders = config.headers, url = buildUrl(config.url, config.params);
                if ($http.pendingRequests.push(config),
                promise.then(removePendingReq, removePendingReq),
                !config.cache && !defaults.cache || config.cache === !1 || "GET" !== config.method && "JSONP" !== config.method || (cache = isObject(config.cache) ? config.cache : isObject(defaults.cache) ? defaults.cache : defaultCache),
                cache && (cachedResp = cache.get(url),
                isDefined(cachedResp) ? isPromiseLike(cachedResp) ? cachedResp.then(resolvePromiseWithResult, resolvePromiseWithResult) : isArray(cachedResp) ? resolvePromise(cachedResp[1], cachedResp[0], shallowCopy(cachedResp[2]), cachedResp[3]) : resolvePromise(cachedResp, 200, {}, "OK") : cache.put(url, promise)),
                isUndefined(cachedResp)) {
                    var xsrfValue = urlIsSameOrigin(config.url) ? $browser.cookies()[config.xsrfCookieName || defaults.xsrfCookieName] : undefined;
                    xsrfValue && (reqHeaders[config.xsrfHeaderName || defaults.xsrfHeaderName] = xsrfValue),
                    $httpBackend(config.method, url, reqData, done, reqHeaders, config.timeout, config.withCredentials, config.responseType)
                }
                return promise
            }
            function buildUrl(url, params) {
                if (!params)
                    return url;
                var parts = [];
                return forEachSorted(params, function(value, key) {
                    null === value || isUndefined(value) || (isArray(value) || (value = [value]),
                    forEach(value, function(v) {
                        isObject(v) && (v = isDate(v) ? v.toISOString() : toJson(v)),
                        parts.push(encodeUriQuery(key) + "=" + encodeUriQuery(v))
                    }))
                }),
                parts.length > 0 && (url += (-1 == url.indexOf("?") ? "?" : "&") + parts.join("&")),
                url
            }
            var defaultCache = $cacheFactory("$http")
              , reversedInterceptors = [];
            return forEach(interceptorFactories, function(interceptorFactory) {
                reversedInterceptors.unshift(isString(interceptorFactory) ? $injector.get(interceptorFactory) : $injector.invoke(interceptorFactory))
            }),
            $http.pendingRequests = [],
            createShortMethods("get", "delete", "head", "jsonp"),
            createShortMethodsWithData("post", "put", "patch"),
            $http.defaults = defaults,
            $http
        }
        ]
    }
    function createXhr() {
        return new window.XMLHttpRequest
    }
    function $HttpBackendProvider() {
        this.$get = ["$browser", "$window", "$document", function($browser, $window, $document) {
            return createHttpBackend($browser, createXhr, $browser.defer, $window.angular.callbacks, $document[0])
        }
        ]
    }
    function createHttpBackend($browser, createXhr, $browserDefer, callbacks, rawDocument) {
        function jsonpReq(url, callbackId, done) {
            var script = rawDocument.createElement("script")
              , callback = null;
            return script.type = "text/javascript",
            script.src = url,
            script.async = !0,
            callback = function(event) {
                removeEventListenerFn(script, "load", callback),
                removeEventListenerFn(script, "error", callback),
                rawDocument.body.removeChild(script),
                script = null;
                var status = -1
                  , text = "unknown";
                event && ("load" !== event.type || callbacks[callbackId].called || (event = {
                    type: "error"
                }),
                text = event.type,
                status = "error" === event.type ? 404 : 200),
                done && done(status, text)
            }
            ,
            addEventListenerFn(script, "load", callback),
            addEventListenerFn(script, "error", callback),
            rawDocument.body.appendChild(script),
            callback
        }
        return function(method, url, post, callback, headers, timeout, withCredentials, responseType) {
            function timeoutRequest() {
                jsonpDone && jsonpDone(),
                xhr && xhr.abort()
            }
            function completeRequest(callback, status, response, headersString, statusText) {
                timeoutId !== undefined && $browserDefer.cancel(timeoutId),
                jsonpDone = xhr = null,
                callback(status, response, headersString, statusText),
                $browser.$$completeOutstandingRequest(noop)
            }
            if ($browser.$$incOutstandingRequestCount(),
            url = url || $browser.url(),
            "jsonp" == lowercase(method)) {
                var callbackId = "_" + (callbacks.counter++).toString(36);
                callbacks[callbackId] = function(data) {
                    callbacks[callbackId].data = data,
                    callbacks[callbackId].called = !0
                }
                ;
                var jsonpDone = jsonpReq(url.replace("JSON_CALLBACK", "angular.callbacks." + callbackId), callbackId, function(status, text) {
                    completeRequest(callback, status, callbacks[callbackId].data, "", text),
                    callbacks[callbackId] = noop
                })
            } else {
                var xhr = createXhr();
                xhr.open(method, url, !0),
                forEach(headers, function(value, key) {
                    isDefined(value) && xhr.setRequestHeader(key, value)
                }),
                xhr.onload = function() {
                    var statusText = xhr.statusText || ""
                      , response = "response"in xhr ? xhr.response : xhr.responseText
                      , status = 1223 === xhr.status ? 204 : xhr.status;
                    0 === status && (status = response ? 200 : "file" == urlResolve(url).protocol ? 404 : 0),
                    completeRequest(callback, status, response, xhr.getAllResponseHeaders(), statusText)
                }
                ;
                var requestError = function() {
                    completeRequest(callback, -1, null, null, "")
                };
                if (xhr.onerror = requestError,
                xhr.onabort = requestError,
                withCredentials && (xhr.withCredentials = !0),
                responseType)
                    try {
                        xhr.responseType = responseType
                    } catch (e) {
                        if ("json" !== responseType)
                            throw e
                    }
                xhr.send(post || null)
            }
            if (timeout > 0)
                var timeoutId = $browserDefer(timeoutRequest, timeout);
            else
                isPromiseLike(timeout) && timeout.then(timeoutRequest)
        }
    }
    function $InterpolateProvider() {
        var startSymbol = "{{"
          , endSymbol = "}}";
        this.startSymbol = function(value) {
            return value ? (startSymbol = value,
            this) : startSymbol
        }
        ,
        this.endSymbol = function(value) {
            return value ? (endSymbol = value,
            this) : endSymbol
        }
        ,
        this.$get = ["$parse", "$exceptionHandler", "$sce", function($parse, $exceptionHandler, $sce) {
            function escape(ch) {
                return "\\\\\\" + ch
            }
            function $interpolate(text, mustHaveExpression, trustedContext, allOrNothing) {
                function unescapeText(text) {
                    return text.replace(escapedStartRegexp, startSymbol).replace(escapedEndRegexp, endSymbol)
                }
                function parseStringifyInterceptor(value) {
                    try {
                        return value = getValue(value),
                        allOrNothing && !isDefined(value) ? value : stringify(value)
                    } catch (err) {
                        var newErr = $interpolateMinErr("interr", "Can't interpolate: {0}\n{1}", text, err.toString());
                        $exceptionHandler(newErr)
                    }
                }
                allOrNothing = !!allOrNothing;
                for (var startIndex, endIndex, exp, index = 0, expressions = [], parseFns = [], textLength = text.length, concat = [], expressionPositions = []; textLength > index; ) {
                    if (-1 == (startIndex = text.indexOf(startSymbol, index)) || -1 == (endIndex = text.indexOf(endSymbol, startIndex + startSymbolLength))) {
                        index !== textLength && concat.push(unescapeText(text.substring(index)));
                        break
                    }
                    index !== startIndex && concat.push(unescapeText(text.substring(index, startIndex))),
                    exp = text.substring(startIndex + startSymbolLength, endIndex),
                    expressions.push(exp),
                    parseFns.push($parse(exp, parseStringifyInterceptor)),
                    index = endIndex + endSymbolLength,
                    expressionPositions.push(concat.length),
                    concat.push("")
                }
                if (trustedContext && concat.length > 1)
                    throw $interpolateMinErr("noconcat", "Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce", text);
                if (!mustHaveExpression || expressions.length) {
                    var compute = function(values) {
                        for (var i = 0, ii = expressions.length; ii > i; i++) {
                            if (allOrNothing && isUndefined(values[i]))
                                return;
                            concat[expressionPositions[i]] = values[i]
                        }
                        return concat.join("")
                    }
                      , getValue = function(value) {
                        return trustedContext ? $sce.getTrusted(trustedContext, value) : $sce.valueOf(value)
                    }
                      , stringify = function(value) {
                        if (null == value)
                            return "";
                        switch (typeof value) {
                        case "string":
                            break;
                        case "number":
                            value = "" + value;
                            break;
                        default:
                            value = toJson(value)
                        }
                        return value
                    };
                    return extend(function(context) {
                        var i = 0
                          , ii = expressions.length
                          , values = new Array(ii);
                        try {
                            for (; ii > i; i++)
                                values[i] = parseFns[i](context);
                            return compute(values)
                        } catch (err) {
                            var newErr = $interpolateMinErr("interr", "Can't interpolate: {0}\n{1}", text, err.toString());
                            $exceptionHandler(newErr)
                        }
                    }, {
                        exp: text,
                        expressions: expressions,
                        $$watchDelegate: function(scope, listener, objectEquality) {
                            var lastValue;
                            return scope.$watchGroup(parseFns, function(values, oldValues) {
                                var currValue = compute(values);
                                isFunction(listener) && listener.call(this, currValue, values !== oldValues ? lastValue : currValue, scope),
                                lastValue = currValue
                            }, objectEquality)
                        }
                    })
                }
            }
            var startSymbolLength = startSymbol.length
              , endSymbolLength = endSymbol.length
              , escapedStartRegexp = new RegExp(startSymbol.replace(/./g, escape),"g")
              , escapedEndRegexp = new RegExp(endSymbol.replace(/./g, escape),"g");
            return $interpolate.startSymbol = function() {
                return startSymbol
            }
            ,
            $interpolate.endSymbol = function() {
                return endSymbol
            }
            ,
            $interpolate
        }
        ]
    }
    function $IntervalProvider() {
        this.$get = ["$rootScope", "$window", "$q", "$$q", function($rootScope, $window, $q, $$q) {
            function interval(fn, delay, count, invokeApply) {
                var setInterval = $window.setInterval
                  , clearInterval = $window.clearInterval
                  , iteration = 0
                  , skipApply = isDefined(invokeApply) && !invokeApply
                  , deferred = (skipApply ? $$q : $q).defer()
                  , promise = deferred.promise;
                return count = isDefined(count) ? count : 0,
                promise.then(null, null, fn),
                promise.$$intervalId = setInterval(function() {
                    deferred.notify(iteration++),
                    count > 0 && iteration >= count && (deferred.resolve(iteration),
                    clearInterval(promise.$$intervalId),
                    delete intervals[promise.$$intervalId]),
                    skipApply || $rootScope.$apply()
                }, delay),
                intervals[promise.$$intervalId] = deferred,
                promise
            }
            var intervals = {};
            return interval.cancel = function(promise) {
                return promise && promise.$$intervalId in intervals ? (intervals[promise.$$intervalId].reject("canceled"),
                $window.clearInterval(promise.$$intervalId),
                delete intervals[promise.$$intervalId],
                !0) : !1
            }
            ,
            interval
        }
        ]
    }
    function $LocaleProvider() {
        this.$get = function() {
            return {
                id: "en-us",
                NUMBER_FORMATS: {
                    DECIMAL_SEP: ".",
                    GROUP_SEP: ",",
                    PATTERNS: [{
                        minInt: 1,
                        minFrac: 0,
                        maxFrac: 3,
                        posPre: "",
                        posSuf: "",
                        negPre: "-",
                        negSuf: "",
                        gSize: 3,
                        lgSize: 3
                    }, {
                        minInt: 1,
                        minFrac: 2,
                        maxFrac: 2,
                        posPre: "\xa4",
                        posSuf: "",
                        negPre: "(\xa4",
                        negSuf: ")",
                        gSize: 3,
                        lgSize: 3
                    }],
                    CURRENCY_SYM: "$"
                },
                DATETIME_FORMATS: {
                    MONTH: "January,February,March,April,May,June,July,August,September,October,November,December".split(","),
                    SHORTMONTH: "Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),
                    DAY: "Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),
                    SHORTDAY: "Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),
                    AMPMS: ["AM", "PM"],
                    medium: "MMM d, y h:mm:ss a",
                    "short": "M/d/yy h:mm a",
                    fullDate: "EEEE, MMMM d, y",
                    longDate: "MMMM d, y",
                    mediumDate: "MMM d, y",
                    shortDate: "M/d/yy",
                    mediumTime: "h:mm:ss a",
                    shortTime: "h:mm a"
                },
                pluralCat: function(num) {
                    return 1 === num ? "one" : "other"
                }
            }
        }
    }
    function encodePath(path) {
        for (var segments = path.split("/"), i = segments.length; i--; )
            segments[i] = encodeUriSegment(segments[i]);
        return segments.join("/")
    }
    function parseAbsoluteUrl(absoluteUrl, locationObj) {
        var parsedUrl = urlResolve(absoluteUrl);
        locationObj.$$protocol = parsedUrl.protocol,
        locationObj.$$host = parsedUrl.hostname,
        locationObj.$$port = int(parsedUrl.port) || DEFAULT_PORTS[parsedUrl.protocol] || null
    }
    function parseAppUrl(relativeUrl, locationObj) {
        var prefixed = "/" !== relativeUrl.charAt(0);
        prefixed && (relativeUrl = "/" + relativeUrl);
        var match = urlResolve(relativeUrl);
        locationObj.$$path = decodeURIComponent(prefixed && "/" === match.pathname.charAt(0) ? match.pathname.substring(1) : match.pathname),
        locationObj.$$search = parseKeyValue(match.search),
        locationObj.$$hash = decodeURIComponent(match.hash),
        locationObj.$$path && "/" != locationObj.$$path.charAt(0) && (locationObj.$$path = "/" + locationObj.$$path)
    }
    function beginsWith(begin, whole) {
        return 0 === whole.indexOf(begin) ? whole.substr(begin.length) : void 0
    }
    function stripHash(url) {
        var index = url.indexOf("#");
        return -1 == index ? url : url.substr(0, index)
    }
    function trimEmptyHash(url) {
        return url.replace(/(#.+)|#$/, "$1")
    }
    function stripFile(url) {
        return url.substr(0, stripHash(url).lastIndexOf("/") + 1)
    }
    function serverBase(url) {
        return url.substring(0, url.indexOf("/", url.indexOf("//") + 2))
    }
    function LocationHtml5Url(appBase, basePrefix) {
        this.$$html5 = !0,
        basePrefix = basePrefix || "";
        var appBaseNoFile = stripFile(appBase);
        parseAbsoluteUrl(appBase, this),
        this.$$parse = function(url) {
            var pathUrl = beginsWith(appBaseNoFile, url);
            if (!isString(pathUrl))
                throw $locationMinErr("ipthprfx", 'Invalid url "{0}", missing path prefix "{1}".', url, appBaseNoFile);
            parseAppUrl(pathUrl, this),
            this.$$path || (this.$$path = "/"),
            this.$$compose()
        }
        ,
        this.$$compose = function() {
            var search = toKeyValue(this.$$search)
              , hash = this.$$hash ? "#" + encodeUriSegment(this.$$hash) : "";
            this.$$url = encodePath(this.$$path) + (search ? "?" + search : "") + hash,
            this.$$absUrl = appBaseNoFile + this.$$url.substr(1)
        }
        ,
        this.$$parseLinkUrl = function(url, relHref) {
            if (relHref && "#" === relHref[0])
                return this.hash(relHref.slice(1)),
                !0;
            var appUrl, prevAppUrl, rewrittenUrl;
            return (appUrl = beginsWith(appBase, url)) !== undefined ? (prevAppUrl = appUrl,
            rewrittenUrl = (appUrl = beginsWith(basePrefix, appUrl)) !== undefined ? appBaseNoFile + (beginsWith("/", appUrl) || appUrl) : appBase + prevAppUrl) : (appUrl = beginsWith(appBaseNoFile, url)) !== undefined ? rewrittenUrl = appBaseNoFile + appUrl : appBaseNoFile == url + "/" && (rewrittenUrl = appBaseNoFile),
            rewrittenUrl && this.$$parse(rewrittenUrl),
            !!rewrittenUrl
        }
    }
    function LocationHashbangUrl(appBase, hashPrefix) {
        var appBaseNoFile = stripFile(appBase);
        parseAbsoluteUrl(appBase, this),
        this.$$parse = function(url) {
            function removeWindowsDriveName(path, url, base) {
                var firstPathSegmentMatch, windowsFilePathExp = /^\/[A-Z]:(\/.*)/;
                return 0 === url.indexOf(base) && (url = url.replace(base, "")),
                windowsFilePathExp.exec(url) ? path : (firstPathSegmentMatch = windowsFilePathExp.exec(path),
                firstPathSegmentMatch ? firstPathSegmentMatch[1] : path)
            }
            var withoutHashUrl, withoutBaseUrl = beginsWith(appBase, url) || beginsWith(appBaseNoFile, url);
            "#" === withoutBaseUrl.charAt(0) ? (withoutHashUrl = beginsWith(hashPrefix, withoutBaseUrl),
            isUndefined(withoutHashUrl) && (withoutHashUrl = withoutBaseUrl)) : withoutHashUrl = this.$$html5 ? withoutBaseUrl : "",
            parseAppUrl(withoutHashUrl, this),
            this.$$path = removeWindowsDriveName(this.$$path, withoutHashUrl, appBase),
            this.$$compose()
        }
        ,
        this.$$compose = function() {
            var search = toKeyValue(this.$$search)
              , hash = this.$$hash ? "#" + encodeUriSegment(this.$$hash) : "";
            this.$$url = encodePath(this.$$path) + (search ? "?" + search : "") + hash,
            this.$$absUrl = appBase + (this.$$url ? hashPrefix + this.$$url : "")
        }
        ,
        this.$$parseLinkUrl = function(url) {
            return stripHash(appBase) == stripHash(url) ? (this.$$parse(url),
            !0) : !1
        }
    }
    function LocationHashbangInHtml5Url(appBase, hashPrefix) {
        this.$$html5 = !0,
        LocationHashbangUrl.apply(this, arguments);
        var appBaseNoFile = stripFile(appBase);
        this.$$parseLinkUrl = function(url, relHref) {
            if (relHref && "#" === relHref[0])
                return this.hash(relHref.slice(1)),
                !0;
            var rewrittenUrl, appUrl;
            return appBase == stripHash(url) ? rewrittenUrl = url : (appUrl = beginsWith(appBaseNoFile, url)) ? rewrittenUrl = appBase + hashPrefix + appUrl : appBaseNoFile === url + "/" && (rewrittenUrl = appBaseNoFile),
            rewrittenUrl && this.$$parse(rewrittenUrl),
            !!rewrittenUrl
        }
        ,
        this.$$compose = function() {
            var search = toKeyValue(this.$$search)
              , hash = this.$$hash ? "#" + encodeUriSegment(this.$$hash) : "";
            this.$$url = encodePath(this.$$path) + (search ? "?" + search : "") + hash,
            this.$$absUrl = appBase + hashPrefix + this.$$url
        }
    }
    function locationGetter(property) {
        return function() {
            return this[property]
        }
    }
    function locationGetterSetter(property, preprocess) {
        return function(value) {
            return isUndefined(value) ? this[property] : (this[property] = preprocess(value),
            this.$$compose(),
            this)
        }
    }
    function $LocationProvider() {
        var hashPrefix = ""
          , html5Mode = {
            enabled: !1,
            requireBase: !0,
            rewriteLinks: !0
        };
        this.hashPrefix = function(prefix) {
            return isDefined(prefix) ? (hashPrefix = prefix,
            this) : hashPrefix
        }
        ,
        this.html5Mode = function(mode) {
            return isBoolean(mode) ? (html5Mode.enabled = mode,
            this) : isObject(mode) ? (isBoolean(mode.enabled) && (html5Mode.enabled = mode.enabled),
            isBoolean(mode.requireBase) && (html5Mode.requireBase = mode.requireBase),
            isBoolean(mode.rewriteLinks) && (html5Mode.rewriteLinks = mode.rewriteLinks),
            this) : html5Mode
        }
        ,
        this.$get = ["$rootScope", "$browser", "$sniffer", "$rootElement", "$window", function($rootScope, $browser, $sniffer, $rootElement, $window) {
            function setBrowserUrlWithFallback(url, replace, state) {
                var oldUrl = $location.url()
                  , oldState = $location.$$state;
                try {
                    $browser.url(url, replace, state),
                    $location.$$state = $browser.state()
                } catch (e) {
                    throw $location.url(oldUrl),
                    $location.$$state = oldState,
                    e
                }
            }
            function afterLocationChange(oldUrl, oldState) {
                $rootScope.$broadcast("$locationChangeSuccess", $location.absUrl(), oldUrl, $location.$$state, oldState)
            }
            var $location, LocationMode, appBase, baseHref = $browser.baseHref(), initialUrl = $browser.url();
            if (html5Mode.enabled) {
                if (!baseHref && html5Mode.requireBase)
                    throw $locationMinErr("nobase", "$location in HTML5 mode requires a <base> tag to be present!");
                appBase = serverBase(initialUrl) + (baseHref || "/"),
                LocationMode = $sniffer.history ? LocationHtml5Url : LocationHashbangInHtml5Url
            } else
                appBase = stripHash(initialUrl),
                LocationMode = LocationHashbangUrl;
            $location = new LocationMode(appBase,"#" + hashPrefix),
            $location.$$parseLinkUrl(initialUrl, initialUrl),
            $location.$$state = $browser.state();
            var IGNORE_URI_REGEXP = /^\s*(javascript|mailto):/i;
            $rootElement.on("click", function(event) {
                if (html5Mode.rewriteLinks && !event.ctrlKey && !event.metaKey && !event.shiftKey && 2 != event.which && 2 != event.button) {
                    for (var elm = jqLite(event.target); "a" !== nodeName_(elm[0]); )
                        if (elm[0] === $rootElement[0] || !(elm = elm.parent())[0])
                            return;
                    var absHref = elm.prop("href")
                      , relHref = elm.attr("href") || elm.attr("xlink:href");
                    isObject(absHref) && "[object SVGAnimatedString]" === absHref.toString() && (absHref = urlResolve(absHref.animVal).href),
                    IGNORE_URI_REGEXP.test(absHref) || !absHref || elm.attr("target") || event.isDefaultPrevented() || $location.$$parseLinkUrl(absHref, relHref) && (event.preventDefault(),
                    $location.absUrl() != $browser.url() && ($rootScope.$apply(),
                    $window.angular["ff-684208-preventDefault"] = !0))
                }
            }),
            trimEmptyHash($location.absUrl()) != trimEmptyHash(initialUrl) && $browser.url($location.absUrl(), !0);
            var initializing = !0;
            return $browser.onUrlChange(function(newUrl, newState) {
                $rootScope.$evalAsync(function() {
                    var defaultPrevented, oldUrl = $location.absUrl(), oldState = $location.$$state;
                    $location.$$parse(newUrl),
                    $location.$$state = newState,
                    defaultPrevented = $rootScope.$broadcast("$locationChangeStart", newUrl, oldUrl, newState, oldState).defaultPrevented,
                    $location.absUrl() === newUrl && (defaultPrevented ? ($location.$$parse(oldUrl),
                    $location.$$state = oldState,
                    setBrowserUrlWithFallback(oldUrl, !1, oldState)) : (initializing = !1,
                    afterLocationChange(oldUrl, oldState)))
                }),
                $rootScope.$$phase || $rootScope.$digest()
            }),
            $rootScope.$watch(function() {
                var oldUrl = trimEmptyHash($browser.url())
                  , newUrl = trimEmptyHash($location.absUrl())
                  , oldState = $browser.state()
                  , currentReplace = $location.$$replace
                  , urlOrStateChanged = oldUrl !== newUrl || $location.$$html5 && $sniffer.history && oldState !== $location.$$state;
                (initializing || urlOrStateChanged) && (initializing = !1,
                $rootScope.$evalAsync(function() {
                    var newUrl = $location.absUrl()
                      , defaultPrevented = $rootScope.$broadcast("$locationChangeStart", newUrl, oldUrl, $location.$$state, oldState).defaultPrevented;
                    $location.absUrl() === newUrl && (defaultPrevented ? ($location.$$parse(oldUrl),
                    $location.$$state = oldState) : (urlOrStateChanged && setBrowserUrlWithFallback(newUrl, currentReplace, oldState === $location.$$state ? null : $location.$$state),
                    afterLocationChange(oldUrl, oldState)))
                })),
                $location.$$replace = !1
            }),
            $location
        }
        ]
    }
    function $LogProvider() {
        var debug = !0
          , self = this;
        this.debugEnabled = function(flag) {
            return isDefined(flag) ? (debug = flag,
            this) : debug
        }
        ,
        this.$get = ["$window", function($window) {
            function formatError(arg) {
                return arg instanceof Error && (arg.stack ? arg = arg.message && -1 === arg.stack.indexOf(arg.message) ? "Error: " + arg.message + "\n" + arg.stack : arg.stack : arg.sourceURL && (arg = arg.message + "\n" + arg.sourceURL + ":" + arg.line)),
                arg
            }
            function consoleLog(type) {
                var console = $window.console || {}
                  , logFn = console[type] || console.log || noop
                  , hasApply = !1;
                try {
                    hasApply = !!logFn.apply
                } catch (e) {}
                return hasApply ? function() {
                    var args = [];
                    return forEach(arguments, function(arg) {
                        args.push(formatError(arg))
                    }),
                    logFn.apply(console, args)
                }
                : function(arg1, arg2) {
                    logFn(arg1, null == arg2 ? "" : arg2)
                }
            }
            return {
                log: consoleLog("log"),
                info: consoleLog("info"),
                warn: consoleLog("warn"),
                error: consoleLog("error"),
                debug: function() {
                    var fn = consoleLog("debug");
                    return function() {
                        debug && fn.apply(self, arguments)
                    }
                }()
            }
        }
        ]
    }
    function ensureSafeMemberName(name, fullExpression) {
        if ("__defineGetter__" === name || "__defineSetter__" === name || "__lookupGetter__" === name || "__lookupSetter__" === name || "__proto__" === name)
            throw $parseMinErr("isecfld", "Attempting to access a disallowed field in Angular expressions! Expression: {0}", fullExpression);
        return name
    }
    function ensureSafeObject(obj, fullExpression) {
        if (obj) {
            if (obj.constructor === obj)
                throw $parseMinErr("isecfn", "Referencing Function in Angular expressions is disallowed! Expression: {0}", fullExpression);
            if (obj.window === obj)
                throw $parseMinErr("isecwindow", "Referencing the Window in Angular expressions is disallowed! Expression: {0}", fullExpression);
            if (obj.children && (obj.nodeName || obj.prop && obj.attr && obj.find))
                throw $parseMinErr("isecdom", "Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}", fullExpression);
            if (obj === Object)
                throw $parseMinErr("isecobj", "Referencing Object in Angular expressions is disallowed! Expression: {0}", fullExpression)
        }
        return obj
    }
    function ensureSafeFunction(obj, fullExpression) {
        if (obj) {
            if (obj.constructor === obj)
                throw $parseMinErr("isecfn", "Referencing Function in Angular expressions is disallowed! Expression: {0}", fullExpression);
            if (obj === CALL || obj === APPLY || obj === BIND)
                throw $parseMinErr("isecff", "Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}", fullExpression)
        }
    }
    function isConstant(exp) {
        return exp.constant
    }
    function setter(obj, locals, path, setValue, fullExp) {
        ensureSafeObject(obj, fullExp),
        ensureSafeObject(locals, fullExp);
        for (var key, element = path.split("."), i = 0; element.length > 1; i++) {
            key = ensureSafeMemberName(element.shift(), fullExp);
            var propertyObj = 0 === i && locals && locals[key] || obj[key];
            propertyObj || (propertyObj = {},
            obj[key] = propertyObj),
            obj = ensureSafeObject(propertyObj, fullExp)
        }
        return key = ensureSafeMemberName(element.shift(), fullExp),
        ensureSafeObject(obj[key], fullExp),
        obj[key] = setValue,
        setValue
    }
    function isPossiblyDangerousMemberName(name) {
        return "constructor" == name
    }
    function cspSafeGetterFn(key0, key1, key2, key3, key4, fullExp, expensiveChecks) {
        ensureSafeMemberName(key0, fullExp),
        ensureSafeMemberName(key1, fullExp),
        ensureSafeMemberName(key2, fullExp),
        ensureSafeMemberName(key3, fullExp),
        ensureSafeMemberName(key4, fullExp);
        var eso = function(o) {
            return ensureSafeObject(o, fullExp)
        }
          , eso0 = expensiveChecks || isPossiblyDangerousMemberName(key0) ? eso : identity
          , eso1 = expensiveChecks || isPossiblyDangerousMemberName(key1) ? eso : identity
          , eso2 = expensiveChecks || isPossiblyDangerousMemberName(key2) ? eso : identity
          , eso3 = expensiveChecks || isPossiblyDangerousMemberName(key3) ? eso : identity
          , eso4 = expensiveChecks || isPossiblyDangerousMemberName(key4) ? eso : identity;
        return function(scope, locals) {
            var pathVal = locals && locals.hasOwnProperty(key0) ? locals : scope;
            return null == pathVal ? pathVal : (pathVal = eso0(pathVal[key0]),
            key1 ? null == pathVal ? undefined : (pathVal = eso1(pathVal[key1]),
            key2 ? null == pathVal ? undefined : (pathVal = eso2(pathVal[key2]),
            key3 ? null == pathVal ? undefined : (pathVal = eso3(pathVal[key3]),
            key4 ? null == pathVal ? undefined : pathVal = eso4(pathVal[key4]) : pathVal) : pathVal) : pathVal) : pathVal)
        }
    }
    function getterFnWithEnsureSafeObject(fn, fullExpression) {
        return function(s, l) {
            return fn(s, l, ensureSafeObject, fullExpression)
        }
    }
    function getterFn(path, options, fullExp) {
        var expensiveChecks = options.expensiveChecks
          , getterFnCache = expensiveChecks ? getterFnCacheExpensive : getterFnCacheDefault
          , fn = getterFnCache[path];
        if (fn)
            return fn;
        var pathKeys = path.split(".")
          , pathKeysLength = pathKeys.length;
        if (options.csp)
            fn = 6 > pathKeysLength ? cspSafeGetterFn(pathKeys[0], pathKeys[1], pathKeys[2], pathKeys[3], pathKeys[4], fullExp, expensiveChecks) : function(scope, locals) {
                var val, i = 0;
                do
                    val = cspSafeGetterFn(pathKeys[i++], pathKeys[i++], pathKeys[i++], pathKeys[i++], pathKeys[i++], fullExp, expensiveChecks)(scope, locals),
                    locals = undefined,
                    scope = val;
                while (pathKeysLength > i);
                return val
            }
            ;
        else {
            var code = "";
            expensiveChecks && (code += "s = eso(s, fe);\nl = eso(l, fe);\n");
            var needsEnsureSafeObject = expensiveChecks;
            forEach(pathKeys, function(key, index) {
                ensureSafeMemberName(key, fullExp);
                var lookupJs = (index ? "s" : '((l&&l.hasOwnProperty("' + key + '"))?l:s)') + "." + key;
                (expensiveChecks || isPossiblyDangerousMemberName(key)) && (lookupJs = "eso(" + lookupJs + ", fe)",
                needsEnsureSafeObject = !0),
                code += "if(s == null) return undefined;\ns=" + lookupJs + ";\n"
            }),
            code += "return s;";
            var evaledFnGetter = new Function("s","l","eso","fe",code);
            evaledFnGetter.toString = valueFn(code),
            needsEnsureSafeObject && (evaledFnGetter = getterFnWithEnsureSafeObject(evaledFnGetter, fullExp)),
            fn = evaledFnGetter
        }
        return fn.sharedGetter = !0,
        fn.assign = function(self, value, locals) {
            return setter(self, locals, path, value, path)
        }
        ,
        getterFnCache[path] = fn,
        fn
    }
    function getValueOf(value) {
        return isFunction(value.valueOf) ? value.valueOf() : objectValueOf.call(value)
    }
    function $ParseProvider() {
        var cacheDefault = createMap()
          , cacheExpensive = createMap();
        this.$get = ["$filter", "$sniffer", function($filter, $sniffer) {
            function wrapSharedExpression(exp) {
                var wrapped = exp;
                return exp.sharedGetter && (wrapped = function(self, locals) {
                    return exp(self, locals)
                }
                ,
                wrapped.literal = exp.literal,
                wrapped.constant = exp.constant,
                wrapped.assign = exp.assign),
                wrapped
            }
            function collectExpressionInputs(inputs, list) {
                for (var i = 0, ii = inputs.length; ii > i; i++) {
                    var input = inputs[i];
                    input.constant || (input.inputs ? collectExpressionInputs(input.inputs, list) : -1 === list.indexOf(input) && list.push(input))
                }
                return list
            }
            function expressionInputDirtyCheck(newValue, oldValueOfValue) {
                return null == newValue || null == oldValueOfValue ? newValue === oldValueOfValue : "object" == typeof newValue && (newValue = getValueOf(newValue),
                "object" == typeof newValue) ? !1 : newValue === oldValueOfValue || newValue !== newValue && oldValueOfValue !== oldValueOfValue
            }
            function inputsWatchDelegate(scope, listener, objectEquality, parsedExpression) {
                var lastResult, inputExpressions = parsedExpression.$$inputs || (parsedExpression.$$inputs = collectExpressionInputs(parsedExpression.inputs, []));
                if (1 === inputExpressions.length) {
                    var oldInputValue = expressionInputDirtyCheck;
                    return inputExpressions = inputExpressions[0],
                    scope.$watch(function(scope) {
                        var newInputValue = inputExpressions(scope);
                        return expressionInputDirtyCheck(newInputValue, oldInputValue) || (lastResult = parsedExpression(scope),
                        oldInputValue = newInputValue && getValueOf(newInputValue)),
                        lastResult
                    }, listener, objectEquality)
                }
                for (var oldInputValueOfValues = [], i = 0, ii = inputExpressions.length; ii > i; i++)
                    oldInputValueOfValues[i] = expressionInputDirtyCheck;
                return scope.$watch(function(scope) {
                    for (var changed = !1, i = 0, ii = inputExpressions.length; ii > i; i++) {
                        var newInputValue = inputExpressions[i](scope);
                        (changed || (changed = !expressionInputDirtyCheck(newInputValue, oldInputValueOfValues[i]))) && (oldInputValueOfValues[i] = newInputValue && getValueOf(newInputValue))
                    }
                    return changed && (lastResult = parsedExpression(scope)),
                    lastResult
                }, listener, objectEquality)
            }
            function oneTimeWatchDelegate(scope, listener, objectEquality, parsedExpression) {
                var unwatch, lastValue;
                return unwatch = scope.$watch(function(scope) {
                    return parsedExpression(scope)
                }, function(value, old, scope) {
                    lastValue = value,
                    isFunction(listener) && listener.apply(this, arguments),
                    isDefined(value) && scope.$$postDigest(function() {
                        isDefined(lastValue) && unwatch()
                    })
                }, objectEquality)
            }
            function oneTimeLiteralWatchDelegate(scope, listener, objectEquality, parsedExpression) {
                function isAllDefined(value) {
                    var allDefined = !0;
                    return forEach(value, function(val) {
                        isDefined(val) || (allDefined = !1)
                    }),
                    allDefined
                }
                var unwatch, lastValue;
                return unwatch = scope.$watch(function(scope) {
                    return parsedExpression(scope)
                }, function(value, old, scope) {
                    lastValue = value,
                    isFunction(listener) && listener.call(this, value, old, scope),
                    isAllDefined(value) && scope.$$postDigest(function() {
                        isAllDefined(lastValue) && unwatch()
                    })
                }, objectEquality)
            }
            function constantWatchDelegate(scope, listener, objectEquality, parsedExpression) {
                var unwatch;
                return unwatch = scope.$watch(function(scope) {
                    return parsedExpression(scope)
                }, function() {
                    isFunction(listener) && listener.apply(this, arguments),
                    unwatch()
                }, objectEquality)
            }
            function addInterceptor(parsedExpression, interceptorFn) {
                if (!interceptorFn)
                    return parsedExpression;
                var watchDelegate = parsedExpression.$$watchDelegate
                  , regularWatch = watchDelegate !== oneTimeLiteralWatchDelegate && watchDelegate !== oneTimeWatchDelegate
                  , fn = regularWatch ? function(scope, locals) {
                    var value = parsedExpression(scope, locals);
                    return interceptorFn(value, scope, locals)
                }
                : function(scope, locals) {
                    var value = parsedExpression(scope, locals)
                      , result = interceptorFn(value, scope, locals);
                    return isDefined(value) ? result : value
                }
                ;
                return parsedExpression.$$watchDelegate && parsedExpression.$$watchDelegate !== inputsWatchDelegate ? fn.$$watchDelegate = parsedExpression.$$watchDelegate : interceptorFn.$stateful || (fn.$$watchDelegate = inputsWatchDelegate,
                fn.inputs = [parsedExpression]),
                fn
            }
            var $parseOptions = {
                csp: $sniffer.csp,
                expensiveChecks: !1
            }
              , $parseOptionsExpensive = {
                csp: $sniffer.csp,
                expensiveChecks: !0
            };
            return function(exp, interceptorFn, expensiveChecks) {
                var parsedExpression, oneTime, cacheKey;
                switch (typeof exp) {
                case "string":
                    cacheKey = exp = exp.trim();
                    var cache = expensiveChecks ? cacheExpensive : cacheDefault;
                    if (parsedExpression = cache[cacheKey],
                    !parsedExpression) {
                        ":" === exp.charAt(0) && ":" === exp.charAt(1) && (oneTime = !0,
                        exp = exp.substring(2));
                        var parseOptions = expensiveChecks ? $parseOptionsExpensive : $parseOptions
                          , lexer = new Lexer(parseOptions)
                          , parser = new Parser(lexer,$filter,parseOptions);
                        parsedExpression = parser.parse(exp),
                        parsedExpression.constant ? parsedExpression.$$watchDelegate = constantWatchDelegate : oneTime ? (parsedExpression = wrapSharedExpression(parsedExpression),
                        parsedExpression.$$watchDelegate = parsedExpression.literal ? oneTimeLiteralWatchDelegate : oneTimeWatchDelegate) : parsedExpression.inputs && (parsedExpression.$$watchDelegate = inputsWatchDelegate),
                        cache[cacheKey] = parsedExpression
                    }
                    return addInterceptor(parsedExpression, interceptorFn);
                case "function":
                    return addInterceptor(exp, interceptorFn);
                default:
                    return addInterceptor(noop, interceptorFn)
                }
            }
        }
        ]
    }
    function $QProvider() {
        this.$get = ["$rootScope", "$exceptionHandler", function($rootScope, $exceptionHandler) {
            return qFactory(function(callback) {
                $rootScope.$evalAsync(callback)
            }, $exceptionHandler)
        }
        ]
    }
    function $$QProvider() {
        this.$get = ["$browser", "$exceptionHandler", function($browser, $exceptionHandler) {
            return qFactory(function(callback) {
                $browser.defer(callback)
            }, $exceptionHandler)
        }
        ]
    }
    function qFactory(nextTick, exceptionHandler) {
        function callOnce(self, resolveFn, rejectFn) {
            function wrap(fn) {
                return function(value) {
                    called || (called = !0,
                    fn.call(self, value))
                }
            }
            var called = !1;
            return [wrap(resolveFn), wrap(rejectFn)]
        }
        function Promise() {
            this.$$state = {
                status: 0
            }
        }
        function simpleBind(context, fn) {
            return function(value) {
                fn.call(context, value)
            }
        }
        function processQueue(state) {
            var fn, promise, pending;
            pending = state.pending,
            state.processScheduled = !1,
            state.pending = undefined;
            for (var i = 0, ii = pending.length; ii > i; ++i) {
                promise = pending[i][0],
                fn = pending[i][state.status];
                try {
                    isFunction(fn) ? promise.resolve(fn(state.value)) : 1 === state.status ? promise.resolve(state.value) : promise.reject(state.value)
                } catch (e) {
                    promise.reject(e),
                    exceptionHandler(e)
                }
            }
        }
        function scheduleProcessQueue(state) {
            !state.processScheduled && state.pending && (state.processScheduled = !0,
            nextTick(function() {
                processQueue(state)
            }))
        }
        function Deferred() {
            this.promise = new Promise,
            this.resolve = simpleBind(this, this.resolve),
            this.reject = simpleBind(this, this.reject),
            this.notify = simpleBind(this, this.notify)
        }
        function all(promises) {
            var deferred = new Deferred
              , counter = 0
              , results = isArray(promises) ? [] : {};
            return forEach(promises, function(promise, key) {
                counter++,
                when(promise).then(function(value) {
                    results.hasOwnProperty(key) || (results[key] = value,
                    --counter || deferred.resolve(results))
                }, function(reason) {
                    results.hasOwnProperty(key) || deferred.reject(reason)
                })
            }),
            0 === counter && deferred.resolve(results),
            deferred.promise
        }
        var $qMinErr = minErr("$q", TypeError)
          , defer = function() {
            return new Deferred
        };
        Promise.prototype = {
            then: function(onFulfilled, onRejected, progressBack) {
                var result = new Deferred;
                return this.$$state.pending = this.$$state.pending || [],
                this.$$state.pending.push([result, onFulfilled, onRejected, progressBack]),
                this.$$state.status > 0 && scheduleProcessQueue(this.$$state),
                result.promise
            },
            "catch": function(callback) {
                return this.then(null, callback)
            },
            "finally": function(callback, progressBack) {
                return this.then(function(value) {
                    return handleCallback(value, !0, callback)
                }, function(error) {
                    return handleCallback(error, !1, callback)
                }, progressBack)
            }
        },
        Deferred.prototype = {
            resolve: function(val) {
                this.promise.$$state.status || (val === this.promise ? this.$$reject($qMinErr("qcycle", "Expected promise to be resolved with value other than itself '{0}'", val)) : this.$$resolve(val))
            },
            $$resolve: function(val) {
                var then, fns;
                fns = callOnce(this, this.$$resolve, this.$$reject);
                try {
                    (isObject(val) || isFunction(val)) && (then = val && val.then),
                    isFunction(then) ? (this.promise.$$state.status = -1,
                    then.call(val, fns[0], fns[1], this.notify)) : (this.promise.$$state.value = val,
                    this.promise.$$state.status = 1,
                    scheduleProcessQueue(this.promise.$$state))
                } catch (e) {
                    fns[1](e),
                    exceptionHandler(e)
                }
            },
            reject: function(reason) {
                this.promise.$$state.status || this.$$reject(reason)
            },
            $$reject: function(reason) {
                this.promise.$$state.value = reason,
                this.promise.$$state.status = 2,
                scheduleProcessQueue(this.promise.$$state)
            },
            notify: function(progress) {
                var callbacks = this.promise.$$state.pending;
                this.promise.$$state.status <= 0 && callbacks && callbacks.length && nextTick(function() {
                    for (var callback, result, i = 0, ii = callbacks.length; ii > i; i++) {
                        result = callbacks[i][0],
                        callback = callbacks[i][3];
                        try {
                            result.notify(isFunction(callback) ? callback(progress) : progress)
                        } catch (e) {
                            exceptionHandler(e)
                        }
                    }
                })
            }
        };
        var reject = function(reason) {
            var result = new Deferred;
            return result.reject(reason),
            result.promise
        }
          , makePromise = function(value, resolved) {
            var result = new Deferred;
            return resolved ? result.resolve(value) : result.reject(value),
            result.promise
        }
          , handleCallback = function(value, isResolved, callback) {
            var callbackOutput = null;
            try {
                isFunction(callback) && (callbackOutput = callback())
            } catch (e) {
                return makePromise(e, !1)
            }
            return isPromiseLike(callbackOutput) ? callbackOutput.then(function() {
                return makePromise(value, isResolved)
            }, function(error) {
                return makePromise(error, !1)
            }) : makePromise(value, isResolved)
        }
          , when = function(value, callback, errback, progressBack) {
            var result = new Deferred;
            return result.resolve(value),
            result.promise.then(callback, errback, progressBack)
        }
          , $Q = function Q(resolver) {
            function resolveFn(value) {
                deferred.resolve(value)
            }
            function rejectFn(reason) {
                deferred.reject(reason)
            }
            if (!isFunction(resolver))
                throw $qMinErr("norslvr", "Expected resolverFn, got '{0}'", resolver);
            if (!(this instanceof Q))
                return new Q(resolver);
            var deferred = new Deferred;
            return resolver(resolveFn, rejectFn),
            deferred.promise
        };
        return $Q.defer = defer,
        $Q.reject = reject,
        $Q.when = when,
        $Q.all = all,
        $Q
    }
    function $$RAFProvider() {
        this.$get = ["$window", "$timeout", function($window, $timeout) {
            var requestAnimationFrame = $window.requestAnimationFrame || $window.webkitRequestAnimationFrame
              , cancelAnimationFrame = $window.cancelAnimationFrame || $window.webkitCancelAnimationFrame || $window.webkitCancelRequestAnimationFrame
              , rafSupported = !!requestAnimationFrame
              , raf = rafSupported ? function(fn) {
                var id = requestAnimationFrame(fn);
                return function() {
                    cancelAnimationFrame(id)
                }
            }
            : function(fn) {
                var timer = $timeout(fn, 16.66, !1);
                return function() {
                    $timeout.cancel(timer)
                }
            }
            ;
            return raf.supported = rafSupported,
            raf
        }
        ]
    }
    function $RootScopeProvider() {
        var TTL = 10
          , $rootScopeMinErr = minErr("$rootScope")
          , lastDirtyWatch = null
          , applyAsyncId = null;
        this.digestTtl = function(value) {
            return arguments.length && (TTL = value),
            TTL
        }
        ,
        this.$get = ["$injector", "$exceptionHandler", "$parse", "$browser", function($injector, $exceptionHandler, $parse, $browser) {
            function Scope() {
                this.$id = nextUid(),
                this.$$phase = this.$parent = this.$$watchers = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = null,
                this.$root = this,
                this.$$destroyed = !1,
                this.$$listeners = {},
                this.$$listenerCount = {},
                this.$$isolateBindings = null
            }
            function beginPhase(phase) {
                if ($rootScope.$$phase)
                    throw $rootScopeMinErr("inprog", "{0} already in progress", $rootScope.$$phase);
                $rootScope.$$phase = phase
            }
            function clearPhase() {
                $rootScope.$$phase = null
            }
            function decrementListenerCount(current, count, name) {
                do
                    current.$$listenerCount[name] -= count,
                    0 === current.$$listenerCount[name] && delete current.$$listenerCount[name];
                while (current = current.$parent)
            }
            function initWatchVal() {}
            function flushApplyAsync() {
                for (; applyAsyncQueue.length; )
                    try {
                        applyAsyncQueue.shift()()
                    } catch (e) {
                        $exceptionHandler(e)
                    }
                applyAsyncId = null
            }
            function scheduleApplyAsync() {
                null === applyAsyncId && (applyAsyncId = $browser.defer(function() {
                    $rootScope.$apply(flushApplyAsync)
                }))
            }
            Scope.prototype = {
                constructor: Scope,
                $new: function(isolate, parent) {
                    function destroyChild() {
                        child.$$destroyed = !0
                    }
                    var child;
                    return parent = parent || this,
                    isolate ? (child = new Scope,
                    child.$root = this.$root) : (this.$$ChildScope || (this.$$ChildScope = function() {
                        this.$$watchers = this.$$nextSibling = this.$$childHead = this.$$childTail = null,
                        this.$$listeners = {},
                        this.$$listenerCount = {},
                        this.$id = nextUid(),
                        this.$$ChildScope = null
                    }
                    ,
                    this.$$ChildScope.prototype = this),
                    child = new this.$$ChildScope),
                    child.$parent = parent,
                    child.$$prevSibling = parent.$$childTail,
                    parent.$$childHead ? (parent.$$childTail.$$nextSibling = child,
                    parent.$$childTail = child) : parent.$$childHead = parent.$$childTail = child,
                    (isolate || parent != this) && child.$on("$destroy", destroyChild),
                    child
                },
                $watch: function(watchExp, listener, objectEquality) {
                    var get = $parse(watchExp);
                    if (get.$$watchDelegate)
                        return get.$$watchDelegate(this, listener, objectEquality, get);
                    var scope = this
                      , array = scope.$$watchers
                      , watcher = {
                        fn: listener,
                        last: initWatchVal,
                        get: get,
                        exp: watchExp,
                        eq: !!objectEquality
                    };
                    return lastDirtyWatch = null,
                    isFunction(listener) || (watcher.fn = noop),
                    array || (array = scope.$$watchers = []),
                    array.unshift(watcher),
                    function() {
                        arrayRemove(array, watcher),
                        lastDirtyWatch = null
                    }
                },
                $watchGroup: function(watchExpressions, listener) {
                    function watchGroupAction() {
                        changeReactionScheduled = !1,
                        firstRun ? (firstRun = !1,
                        listener(newValues, newValues, self)) : listener(newValues, oldValues, self)
                    }
                    var oldValues = new Array(watchExpressions.length)
                      , newValues = new Array(watchExpressions.length)
                      , deregisterFns = []
                      , self = this
                      , changeReactionScheduled = !1
                      , firstRun = !0;
                    if (!watchExpressions.length) {
                        var shouldCall = !0;
                        return self.$evalAsync(function() {
                            shouldCall && listener(newValues, newValues, self)
                        }),
                        function() {
                            shouldCall = !1
                        }
                    }
                    return 1 === watchExpressions.length ? this.$watch(watchExpressions[0], function(value, oldValue, scope) {
                        newValues[0] = value,
                        oldValues[0] = oldValue,
                        listener(newValues, value === oldValue ? newValues : oldValues, scope)
                    }) : (forEach(watchExpressions, function(expr, i) {
                        var unwatchFn = self.$watch(expr, function(value, oldValue) {
                            newValues[i] = value,
                            oldValues[i] = oldValue,
                            changeReactionScheduled || (changeReactionScheduled = !0,
                            self.$evalAsync(watchGroupAction))
                        });
                        deregisterFns.push(unwatchFn)
                    }),
                    function() {
                        for (; deregisterFns.length; )
                            deregisterFns.shift()()
                    }
                    )
                },
                $watchCollection: function(obj, listener) {
                    function $watchCollectionInterceptor(_value) {
                        newValue = _value;
                        var newLength, key, bothNaN, newItem, oldItem;
                        if (!isUndefined(newValue)) {
                            if (isObject(newValue))
                                if (isArrayLike(newValue)) {
                                    oldValue !== internalArray && (oldValue = internalArray,
                                    oldLength = oldValue.length = 0,
                                    changeDetected++),
                                    newLength = newValue.length,
                                    oldLength !== newLength && (changeDetected++,
                                    oldValue.length = oldLength = newLength);
                                    for (var i = 0; newLength > i; i++)
                                        oldItem = oldValue[i],
                                        newItem = newValue[i],
                                        bothNaN = oldItem !== oldItem && newItem !== newItem,
                                        bothNaN || oldItem === newItem || (changeDetected++,
                                        oldValue[i] = newItem)
                                } else {
                                    oldValue !== internalObject && (oldValue = internalObject = {},
                                    oldLength = 0,
                                    changeDetected++),
                                    newLength = 0;
                                    for (key in newValue)
                                        newValue.hasOwnProperty(key) && (newLength++,
                                        newItem = newValue[key],
                                        oldItem = oldValue[key],
                                        key in oldValue ? (bothNaN = oldItem !== oldItem && newItem !== newItem,
                                        bothNaN || oldItem === newItem || (changeDetected++,
                                        oldValue[key] = newItem)) : (oldLength++,
                                        oldValue[key] = newItem,
                                        changeDetected++));
                                    if (oldLength > newLength) {
                                        changeDetected++;
                                        for (key in oldValue)
                                            newValue.hasOwnProperty(key) || (oldLength--,
                                            delete oldValue[key])
                                    }
                                }
                            else
                                oldValue !== newValue && (oldValue = newValue,
                                changeDetected++);
                            return changeDetected
                        }
                    }
                    function $watchCollectionAction() {
                        if (initRun ? (initRun = !1,
                        listener(newValue, newValue, self)) : listener(newValue, veryOldValue, self),
                        trackVeryOldValue)
                            if (isObject(newValue))
                                if (isArrayLike(newValue)) {
                                    veryOldValue = new Array(newValue.length);
                                    for (var i = 0; i < newValue.length; i++)
                                        veryOldValue[i] = newValue[i]
                                } else {
                                    veryOldValue = {};
                                    for (var key in newValue)
                                        hasOwnProperty.call(newValue, key) && (veryOldValue[key] = newValue[key])
                                }
                            else
                                veryOldValue = newValue
                    }
                    $watchCollectionInterceptor.$stateful = !0;
                    var newValue, oldValue, veryOldValue, self = this, trackVeryOldValue = listener.length > 1, changeDetected = 0, changeDetector = $parse(obj, $watchCollectionInterceptor), internalArray = [], internalObject = {}, initRun = !0, oldLength = 0;
                    return this.$watch(changeDetector, $watchCollectionAction)
                },
                $digest: function() {
                    var watch, value, last, watchers, length, dirty, next, current, logIdx, asyncTask, ttl = TTL, target = this, watchLog = [];
                    beginPhase("$digest"),
                    $browser.$$checkUrlChange(),
                    this === $rootScope && null !== applyAsyncId && ($browser.defer.cancel(applyAsyncId),
                    flushApplyAsync()),
                    lastDirtyWatch = null;
                    do {
                        for (dirty = !1,
                        current = target; asyncQueue.length; ) {
                            try {
                                asyncTask = asyncQueue.shift(),
                                asyncTask.scope.$eval(asyncTask.expression, asyncTask.locals)
                            } catch (e) {
                                $exceptionHandler(e)
                            }
                            lastDirtyWatch = null
                        }
                        traverseScopesLoop: do {
                            if (watchers = current.$$watchers)
                                for (length = watchers.length; length--; )
                                    try {
                                        if (watch = watchers[length])
                                            if ((value = watch.get(current)) === (last = watch.last) || (watch.eq ? equals(value, last) : "number" == typeof value && "number" == typeof last && isNaN(value) && isNaN(last))) {
                                                if (watch === lastDirtyWatch) {
                                                    dirty = !1;
                                                    break traverseScopesLoop
                                                }
                                            } else
                                                dirty = !0,
                                                lastDirtyWatch = watch,
                                                watch.last = watch.eq ? copy(value, null) : value,
                                                watch.fn(value, last === initWatchVal ? value : last, current),
                                                5 > ttl && (logIdx = 4 - ttl,
                                                watchLog[logIdx] || (watchLog[logIdx] = []),
                                                watchLog[logIdx].push({
                                                    msg: isFunction(watch.exp) ? "fn: " + (watch.exp.name || watch.exp.toString()) : watch.exp,
                                                    newVal: value,
                                                    oldVal: last
                                                }))
                                    } catch (e) {
                                        $exceptionHandler(e)
                                    }
                            if (!(next = current.$$childHead || current !== target && current.$$nextSibling))
                                for (; current !== target && !(next = current.$$nextSibling); )
                                    current = current.$parent
                        } while (current = next);
                        if ((dirty || asyncQueue.length) && !ttl--)
                            throw clearPhase(),
                            $rootScopeMinErr("infdig", "{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}", TTL, watchLog)
                    } while (dirty || asyncQueue.length);
                    for (clearPhase(); postDigestQueue.length; )
                        try {
                            postDigestQueue.shift()()
                        } catch (e) {
                            $exceptionHandler(e)
                        }
                },
                $destroy: function() {
                    if (!this.$$destroyed) {
                        var parent = this.$parent;
                        if (this.$broadcast("$destroy"),
                        this.$$destroyed = !0,
                        this !== $rootScope) {
                            for (var eventName in this.$$listenerCount)
                                decrementListenerCount(this, this.$$listenerCount[eventName], eventName);
                            parent.$$childHead == this && (parent.$$childHead = this.$$nextSibling),
                            parent.$$childTail == this && (parent.$$childTail = this.$$prevSibling),
                            this.$$prevSibling && (this.$$prevSibling.$$nextSibling = this.$$nextSibling),
                            this.$$nextSibling && (this.$$nextSibling.$$prevSibling = this.$$prevSibling),
                            this.$destroy = this.$digest = this.$apply = this.$evalAsync = this.$applyAsync = noop,
                            this.$on = this.$watch = this.$watchGroup = function() {
                                return noop
                            }
                            ,
                            this.$$listeners = {},
                            this.$parent = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = this.$root = this.$$watchers = null
                        }
                    }
                },
                $eval: function(expr, locals) {
                    return $parse(expr)(this, locals)
                },
                $evalAsync: function(expr, locals) {
                    $rootScope.$$phase || asyncQueue.length || $browser.defer(function() {
                        asyncQueue.length && $rootScope.$digest()
                    }),
                    asyncQueue.push({
                        scope: this,
                        expression: expr,
                        locals: locals
                    })
                },
                $$postDigest: function(fn) {
                    postDigestQueue.push(fn)
                },
                $apply: function(expr) {
                    try {
                        return beginPhase("$apply"),
                        this.$eval(expr)
                    } catch (e) {
                        $exceptionHandler(e)
                    } finally {
                        clearPhase();
                        try {
                            $rootScope.$digest()
                        } catch (e) {
                            throw $exceptionHandler(e),
                            e
                        }
                    }
                },
                $applyAsync: function(expr) {
                    function $applyAsyncExpression() {
                        scope.$eval(expr)
                    }
                    var scope = this;
                    expr && applyAsyncQueue.push($applyAsyncExpression),
                    scheduleApplyAsync()
                },
                $on: function(name, listener) {
                    var namedListeners = this.$$listeners[name];
                    namedListeners || (this.$$listeners[name] = namedListeners = []),
                    namedListeners.push(listener);
                    var current = this;
                    do
                        current.$$listenerCount[name] || (current.$$listenerCount[name] = 0),
                        current.$$listenerCount[name]++;
                    while (current = current.$parent);
                    var self = this;
                    return function() {
                        var indexOfListener = namedListeners.indexOf(listener);
                        -1 !== indexOfListener && (namedListeners[indexOfListener] = null,
                        decrementListenerCount(self, 1, name))
                    }
                },
                $emit: function(name) {
                    var namedListeners, i, length, empty = [], scope = this, stopPropagation = !1, event = {
                        name: name,
                        targetScope: scope,
                        stopPropagation: function() {
                            stopPropagation = !0
                        },
                        preventDefault: function() {
                            event.defaultPrevented = !0
                        },
                        defaultPrevented: !1
                    }, listenerArgs = concat([event], arguments, 1);
                    do {
                        for (namedListeners = scope.$$listeners[name] || empty,
                        event.currentScope = scope,
                        i = 0,
                        length = namedListeners.length; length > i; i++)
                            if (namedListeners[i])
                                try {
                                    namedListeners[i].apply(null, listenerArgs)
                                } catch (e) {
                                    $exceptionHandler(e)
                                }
                            else
                                namedListeners.splice(i, 1),
                                i--,
                                length--;
                        if (stopPropagation)
                            return event.currentScope = null,
                            event;
                        scope = scope.$parent
                    } while (scope);
                    return event.currentScope = null,
                    event
                },
                $broadcast: function(name) {
                    var target = this
                      , current = target
                      , next = target
                      , event = {
                        name: name,
                        targetScope: target,
                        preventDefault: function() {
                            event.defaultPrevented = !0
                        },
                        defaultPrevented: !1
                    };
                    if (!target.$$listenerCount[name])
                        return event;
                    for (var listeners, i, length, listenerArgs = concat([event], arguments, 1); current = next; ) {
                        for (event.currentScope = current,
                        listeners = current.$$listeners[name] || [],
                        i = 0,
                        length = listeners.length; length > i; i++)
                            if (listeners[i])
                                try {
                                    listeners[i].apply(null, listenerArgs)
                                } catch (e) {
                                    $exceptionHandler(e)
                                }
                            else
                                listeners.splice(i, 1),
                                i--,
                                length--;
                        if (!(next = current.$$listenerCount[name] && current.$$childHead || current !== target && current.$$nextSibling))
                            for (; current !== target && !(next = current.$$nextSibling); )
                                current = current.$parent
                    }
                    return event.currentScope = null,
                    event
                }
            };
            var $rootScope = new Scope
              , asyncQueue = $rootScope.$$asyncQueue = []
              , postDigestQueue = $rootScope.$$postDigestQueue = []
              , applyAsyncQueue = $rootScope.$$applyAsyncQueue = [];
            return $rootScope
        }
        ]
    }
    function $$SanitizeUriProvider() {
        var aHrefSanitizationWhitelist = /^\s*(https?|ftp|mailto|tel|file):/
          , imgSrcSanitizationWhitelist = /^\s*((https?|ftp|file|blob):|data:image\/)/;
        this.aHrefSanitizationWhitelist = function(regexp) {
            return isDefined(regexp) ? (aHrefSanitizationWhitelist = regexp,
            this) : aHrefSanitizationWhitelist
        }
        ,
        this.imgSrcSanitizationWhitelist = function(regexp) {
            return isDefined(regexp) ? (imgSrcSanitizationWhitelist = regexp,
            this) : imgSrcSanitizationWhitelist
        }
        ,
        this.$get = function() {
            return function(uri, isImage) {
                var normalizedVal, regex = isImage ? imgSrcSanitizationWhitelist : aHrefSanitizationWhitelist;
                return normalizedVal = urlResolve(uri).href,
                "" === normalizedVal || normalizedVal.match(regex) ? uri : "unsafe:" + normalizedVal
            }
        }
    }
    function adjustMatcher(matcher) {
        if ("self" === matcher)
            return matcher;
        if (isString(matcher)) {
            if (matcher.indexOf("***") > -1)
                throw $sceMinErr("iwcard", "Illegal sequence *** in string matcher.  String: {0}", matcher);
            return matcher = escapeForRegexp(matcher).replace("\\*\\*", ".*").replace("\\*", "[^:/.?&;]*"),
            new RegExp("^" + matcher + "$")
        }
        if (isRegExp(matcher))
            return new RegExp("^" + matcher.source + "$");
        throw $sceMinErr("imatcher", 'Matchers may only be "self", string patterns or RegExp objects')
    }
    function adjustMatchers(matchers) {
        var adjustedMatchers = [];
        return isDefined(matchers) && forEach(matchers, function(matcher) {
            adjustedMatchers.push(adjustMatcher(matcher))
        }),
        adjustedMatchers
    }
    function $SceDelegateProvider() {
        this.SCE_CONTEXTS = SCE_CONTEXTS;
        var resourceUrlWhitelist = ["self"]
          , resourceUrlBlacklist = [];
        this.resourceUrlWhitelist = function(value) {
            return arguments.length && (resourceUrlWhitelist = adjustMatchers(value)),
            resourceUrlWhitelist
        }
        ,
        this.resourceUrlBlacklist = function(value) {
            return arguments.length && (resourceUrlBlacklist = adjustMatchers(value)),
            resourceUrlBlacklist
        }
        ,
        this.$get = ["$injector", function($injector) {
            function matchUrl(matcher, parsedUrl) {
                return "self" === matcher ? urlIsSameOrigin(parsedUrl) : !!matcher.exec(parsedUrl.href)
            }
            function isResourceUrlAllowedByPolicy(url) {
                var i, n, parsedUrl = urlResolve(url.toString()), allowed = !1;
                for (i = 0,
                n = resourceUrlWhitelist.length; n > i; i++)
                    if (matchUrl(resourceUrlWhitelist[i], parsedUrl)) {
                        allowed = !0;
                        break
                    }
                if (allowed)
                    for (i = 0,
                    n = resourceUrlBlacklist.length; n > i; i++)
                        if (matchUrl(resourceUrlBlacklist[i], parsedUrl)) {
                            allowed = !1;
                            break
                        }
                return allowed
            }
            function generateHolderType(Base) {
                var holderType = function(trustedValue) {
                    this.$$unwrapTrustedValue = function() {
                        return trustedValue
                    }
                };
                return Base && (holderType.prototype = new Base),
                holderType.prototype.valueOf = function() {
                    return this.$$unwrapTrustedValue()
                }
                ,
                holderType.prototype.toString = function() {
                    return this.$$unwrapTrustedValue().toString()
                }
                ,
                holderType
            }
            function trustAs(type, trustedValue) {
                var Constructor = byType.hasOwnProperty(type) ? byType[type] : null;
                if (!Constructor)
                    throw $sceMinErr("icontext", "Attempted to trust a value in invalid context. Context: {0}; Value: {1}", type, trustedValue);
                if (null === trustedValue || trustedValue === undefined || "" === trustedValue)
                    return trustedValue;
                if ("string" != typeof trustedValue)
                    throw $sceMinErr("itype", "Attempted to trust a non-string value in a content requiring a string: Context: {0}", type);
                return new Constructor(trustedValue)
            }
            function valueOf(maybeTrusted) {
                return maybeTrusted instanceof trustedValueHolderBase ? maybeTrusted.$$unwrapTrustedValue() : maybeTrusted
            }
            function getTrusted(type, maybeTrusted) {
                if (null === maybeTrusted || maybeTrusted === undefined || "" === maybeTrusted)
                    return maybeTrusted;
                var constructor = byType.hasOwnProperty(type) ? byType[type] : null;
                if (constructor && maybeTrusted instanceof constructor)
                    return maybeTrusted.$$unwrapTrustedValue();
                if (type === SCE_CONTEXTS.RESOURCE_URL) {
                    if (isResourceUrlAllowedByPolicy(maybeTrusted))
                        return maybeTrusted;
                    throw $sceMinErr("insecurl", "Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}", maybeTrusted.toString())
                }
                if (type === SCE_CONTEXTS.HTML)
                    return htmlSanitizer(maybeTrusted);
                throw $sceMinErr("unsafe", "Attempting to use an unsafe value in a safe context.")
            }
            var htmlSanitizer = function() {
                throw $sceMinErr("unsafe", "Attempting to use an unsafe value in a safe context.")
            };
            $injector.has("$sanitize") && (htmlSanitizer = $injector.get("$sanitize"));
            var trustedValueHolderBase = generateHolderType()
              , byType = {};
            return byType[SCE_CONTEXTS.HTML] = generateHolderType(trustedValueHolderBase),
            byType[SCE_CONTEXTS.CSS] = generateHolderType(trustedValueHolderBase),
            byType[SCE_CONTEXTS.URL] = generateHolderType(trustedValueHolderBase),
            byType[SCE_CONTEXTS.JS] = generateHolderType(trustedValueHolderBase),
            byType[SCE_CONTEXTS.RESOURCE_URL] = generateHolderType(byType[SCE_CONTEXTS.URL]),
            {
                trustAs: trustAs,
                getTrusted: getTrusted,
                valueOf: valueOf
            }
        }
        ]
    }
    function $SceProvider() {
        var enabled = !0;
        this.enabled = function(value) {
            return arguments.length && (enabled = !!value),
            enabled
        }
        ,
        this.$get = ["$parse", "$sceDelegate", function($parse, $sceDelegate) {
            if (enabled && 8 > msie)
                throw $sceMinErr("iequirks", "Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");
            var sce = shallowCopy(SCE_CONTEXTS);
            sce.isEnabled = function() {
                return enabled
            }
            ,
            sce.trustAs = $sceDelegate.trustAs,
            sce.getTrusted = $sceDelegate.getTrusted,
            sce.valueOf = $sceDelegate.valueOf,
            enabled || (sce.trustAs = sce.getTrusted = function(type, value) {
                return value
            }
            ,
            sce.valueOf = identity),
            sce.parseAs = function(type, expr) {
                var parsed = $parse(expr);
                return parsed.literal && parsed.constant ? parsed : $parse(expr, function(value) {
                    return sce.getTrusted(type, value)
                })
            }
            ;
            var parse = sce.parseAs
              , getTrusted = sce.getTrusted
              , trustAs = sce.trustAs;
            return forEach(SCE_CONTEXTS, function(enumValue, name) {
                var lName = lowercase(name);
                sce[camelCase("parse_as_" + lName)] = function(expr) {
                    return parse(enumValue, expr)
                }
                ,
                sce[camelCase("get_trusted_" + lName)] = function(value) {
                    return getTrusted(enumValue, value)
                }
                ,
                sce[camelCase("trust_as_" + lName)] = function(value) {
                    return trustAs(enumValue, value)
                }
            }),
            sce
        }
        ]
    }
    function $SnifferProvider() {
        this.$get = ["$window", "$document", function($window, $document) {
            var vendorPrefix, match, eventSupport = {}, android = int((/android (\d+)/.exec(lowercase(($window.navigator || {}).userAgent)) || [])[1]), boxee = /Boxee/i.test(($window.navigator || {}).userAgent), document = $document[0] || {}, vendorRegex = /^(Moz|webkit|ms)(?=[A-Z])/, bodyStyle = document.body && document.body.style, transitions = !1, animations = !1;
            if (bodyStyle) {
                for (var prop in bodyStyle)
                    if (match = vendorRegex.exec(prop)) {
                        vendorPrefix = match[0],
                        vendorPrefix = vendorPrefix.substr(0, 1).toUpperCase() + vendorPrefix.substr(1);
                        break
                    }
                vendorPrefix || (vendorPrefix = "WebkitOpacity"in bodyStyle && "webkit"),
                transitions = !!("transition"in bodyStyle || vendorPrefix + "Transition"in bodyStyle),
                animations = !!("animation"in bodyStyle || vendorPrefix + "Animation"in bodyStyle),
                !android || transitions && animations || (transitions = isString(document.body.style.webkitTransition),
                animations = isString(document.body.style.webkitAnimation))
            }
            return {
                history: !(!$window.history || !$window.history.pushState || 4 > android || boxee),
                hasEvent: function(event) {
                    if ("input" === event && 11 >= msie)
                        return !1;
                    if (isUndefined(eventSupport[event])) {
                        var divElm = document.createElement("div");
                        eventSupport[event] = "on" + event in divElm
                    }
                    return eventSupport[event]
                },
                csp: csp(),
                vendorPrefix: vendorPrefix,
                transitions: transitions,
                animations: animations,
                android: android
            }
        }
        ]
    }
    function $TemplateRequestProvider() {
        this.$get = ["$templateCache", "$http", "$q", function($templateCache, $http, $q) {
            function handleRequestFn(tpl, ignoreRequestError) {
                function handleError(resp) {
                    if (!ignoreRequestError)
                        throw $compileMinErr("tpload", "Failed to load template: {0}", tpl);
                    return $q.reject(resp)
                }
                handleRequestFn.totalPendingRequests++;
                var transformResponse = $http.defaults && $http.defaults.transformResponse;
                isArray(transformResponse) ? transformResponse = transformResponse.filter(function(transformer) {
                    return transformer !== defaultHttpResponseTransform
                }) : transformResponse === defaultHttpResponseTransform && (transformResponse = null);
                var httpOptions = {
                    cache: $templateCache,
                    transformResponse: transformResponse
                };
                return $http.get(tpl, httpOptions)["finally"](function() {
                    handleRequestFn.totalPendingRequests--
                }).then(function(response) {
                    return response.data
                }, handleError)
            }
            return handleRequestFn.totalPendingRequests = 0,
            handleRequestFn
        }
        ]
    }
    function $$TestabilityProvider() {
        this.$get = ["$rootScope", "$browser", "$location", function($rootScope, $browser, $location) {
            var testability = {};
            return testability.findBindings = function(element, expression, opt_exactMatch) {
                var bindings = element.getElementsByClassName("ng-binding")
                  , matches = [];
                return forEach(bindings, function(binding) {
                    var dataBinding = angular.element(binding).data("$binding");
                    dataBinding && forEach(dataBinding, function(bindingName) {
                        if (opt_exactMatch) {
                            var matcher = new RegExp("(^|\\s)" + escapeForRegexp(expression) + "(\\s|\\||$)");
                            matcher.test(bindingName) && matches.push(binding)
                        } else
                            -1 != bindingName.indexOf(expression) && matches.push(binding)
                    })
                }),
                matches
            }
            ,
            testability.findModels = function(element, expression, opt_exactMatch) {
                for (var prefixes = ["ng-", "data-ng-", "ng\\:"], p = 0; p < prefixes.length; ++p) {
                    var attributeEquals = opt_exactMatch ? "=" : "*="
                      , selector = "[" + prefixes[p] + "model" + attributeEquals + '"' + expression + '"]'
                      , elements = element.querySelectorAll(selector);
                    if (elements.length)
                        return elements
                }
            }
            ,
            testability.getLocation = function() {
                return $location.url()
            }
            ,
            testability.setLocation = function(url) {
                url !== $location.url() && ($location.url(url),
                $rootScope.$digest())
            }
            ,
            testability.whenStable = function(callback) {
                $browser.notifyWhenNoOutstandingRequests(callback)
            }
            ,
            testability
        }
        ]
    }
    function $TimeoutProvider() {
        this.$get = ["$rootScope", "$browser", "$q", "$$q", "$exceptionHandler", function($rootScope, $browser, $q, $$q, $exceptionHandler) {
            function timeout(fn, delay, invokeApply) {
                var timeoutId, skipApply = isDefined(invokeApply) && !invokeApply, deferred = (skipApply ? $$q : $q).defer(), promise = deferred.promise;
                return timeoutId = $browser.defer(function() {
                    try {
                        deferred.resolve(fn())
                    } catch (e) {
                        deferred.reject(e),
                        $exceptionHandler(e)
                    } finally {
                        delete deferreds[promise.$$timeoutId]
                    }
                    skipApply || $rootScope.$apply()
                }, delay),
                promise.$$timeoutId = timeoutId,
                deferreds[timeoutId] = deferred,
                promise
            }
            var deferreds = {};
            return timeout.cancel = function(promise) {
                return promise && promise.$$timeoutId in deferreds ? (deferreds[promise.$$timeoutId].reject("canceled"),
                delete deferreds[promise.$$timeoutId],
                $browser.defer.cancel(promise.$$timeoutId)) : !1
            }
            ,
            timeout
        }
        ]
    }
    function urlResolve(url) {
        var href = url;
        return msie && (urlParsingNode.setAttribute("href", href),
        href = urlParsingNode.href),
        urlParsingNode.setAttribute("href", href),
        {
            href: urlParsingNode.href,
            protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, "") : "",
            host: urlParsingNode.host,
            search: urlParsingNode.search ? urlParsingNode.search.replace(/^\?/, "") : "",
            hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, "") : "",
            hostname: urlParsingNode.hostname,
            port: urlParsingNode.port,
            pathname: "/" === urlParsingNode.pathname.charAt(0) ? urlParsingNode.pathname : "/" + urlParsingNode.pathname
        }
    }
    function urlIsSameOrigin(requestUrl) {
        var parsed = isString(requestUrl) ? urlResolve(requestUrl) : requestUrl;
        return parsed.protocol === originUrl.protocol && parsed.host === originUrl.host
    }
    function $WindowProvider() {
        this.$get = valueFn(window)
    }
    function $FilterProvider($provide) {
        function register(name, factory) {
            if (isObject(name)) {
                var filters = {};
                return forEach(name, function(filter, key) {
                    filters[key] = register(key, filter)
                }),
                filters
            }
            return $provide.factory(name + suffix, factory)
        }
        var suffix = "Filter";
        this.register = register,
        this.$get = ["$injector", function($injector) {
            return function(name) {
                return $injector.get(name + suffix)
            }
        }
        ],
        register("currency", currencyFilter),
        register("date", dateFilter),
        register("filter", filterFilter),
        register("json", jsonFilter),
        register("limitTo", limitToFilter),
        register("lowercase", lowercaseFilter),
        register("number", numberFilter),
        register("orderBy", orderByFilter),
        register("uppercase", uppercaseFilter)
    }
    function filterFilter() {
        return function(array, expression, comparator) {
            if (!isArray(array))
                return array;
            var predicateFn, matchAgainstAnyProp;
            switch (typeof expression) {
            case "function":
                predicateFn = expression;
                break;
            case "boolean":
            case "number":
            case "string":
                matchAgainstAnyProp = !0;
            case "object":
                predicateFn = createPredicateFn(expression, comparator, matchAgainstAnyProp);
                break;
            default:
                return array
            }
            return array.filter(predicateFn)
        }
    }
    function createPredicateFn(expression, comparator, matchAgainstAnyProp) {
        var predicateFn, shouldMatchPrimitives = isObject(expression) && "$"in expression;
        return comparator === !0 ? comparator = equals : isFunction(comparator) || (comparator = function(actual, expected) {
            return isObject(actual) || isObject(expected) ? !1 : (actual = lowercase("" + actual),
            expected = lowercase("" + expected),
            -1 !== actual.indexOf(expected))
        }
        ),
        predicateFn = function(item) {
            return shouldMatchPrimitives && !isObject(item) ? deepCompare(item, expression.$, comparator, !1) : deepCompare(item, expression, comparator, matchAgainstAnyProp)
        }
    }
    function deepCompare(actual, expected, comparator, matchAgainstAnyProp, dontMatchWholeObject) {
        var actualType = typeof actual
          , expectedType = typeof expected;
        if ("string" === expectedType && "!" === expected.charAt(0))
            return !deepCompare(actual, expected.substring(1), comparator, matchAgainstAnyProp);
        if (isArray(actual))
            return actual.some(function(item) {
                return deepCompare(item, expected, comparator, matchAgainstAnyProp)
            });
        switch (actualType) {
        case "object":
            var key;
            if (matchAgainstAnyProp) {
                for (key in actual)
                    if ("$" !== key.charAt(0) && deepCompare(actual[key], expected, comparator, !0))
                        return !0;
                return dontMatchWholeObject ? !1 : deepCompare(actual, expected, comparator, !1)
            }
            if ("object" === expectedType) {
                for (key in expected) {
                    var expectedVal = expected[key];
                    if (!isFunction(expectedVal)) {
                        var matchAnyProperty = "$" === key
                          , actualVal = matchAnyProperty ? actual : actual[key];
                        if (!deepCompare(actualVal, expectedVal, comparator, matchAnyProperty, matchAnyProperty))
                            return !1
                    }
                }
                return !0
            }
            return comparator(actual, expected);
        case "function":
            return !1;
        default:
            return comparator(actual, expected)
        }
    }
    function currencyFilter($locale) {
        var formats = $locale.NUMBER_FORMATS;
        return function(amount, currencySymbol, fractionSize) {
            return isUndefined(currencySymbol) && (currencySymbol = formats.CURRENCY_SYM),
            isUndefined(fractionSize) && (fractionSize = formats.PATTERNS[1].maxFrac),
            null == amount ? amount : formatNumber(amount, formats.PATTERNS[1], formats.GROUP_SEP, formats.DECIMAL_SEP, fractionSize).replace(/\u00A4/g, currencySymbol)
        }
    }
    function numberFilter($locale) {
        var formats = $locale.NUMBER_FORMATS;
        return function(number, fractionSize) {
            return null == number ? number : formatNumber(number, formats.PATTERNS[0], formats.GROUP_SEP, formats.DECIMAL_SEP, fractionSize)
        }
    }
    function formatNumber(number, pattern, groupSep, decimalSep, fractionSize) {
        if (!isFinite(number) || isObject(number))
            return "";
        var isNegative = 0 > number;
        number = Math.abs(number);
        var numStr = number + ""
          , formatedText = ""
          , parts = []
          , hasExponent = !1;
        if (-1 !== numStr.indexOf("e")) {
            var match = numStr.match(/([\d\.]+)e(-?)(\d+)/);
            match && "-" == match[2] && match[3] > fractionSize + 1 ? number = 0 : (formatedText = numStr,
            hasExponent = !0)
        }
        if (hasExponent)
            fractionSize > 0 && 1 > number && (formatedText = number.toFixed(fractionSize),
            number = parseFloat(formatedText));
        else {
            var fractionLen = (numStr.split(DECIMAL_SEP)[1] || "").length;
            isUndefined(fractionSize) && (fractionSize = Math.min(Math.max(pattern.minFrac, fractionLen), pattern.maxFrac)),
            number = +(Math.round(+(number.toString() + "e" + fractionSize)).toString() + "e" + -fractionSize);
            var fraction = ("" + number).split(DECIMAL_SEP)
              , whole = fraction[0];
            fraction = fraction[1] || "";
            var i, pos = 0, lgroup = pattern.lgSize, group = pattern.gSize;
            if (whole.length >= lgroup + group)
                for (pos = whole.length - lgroup,
                i = 0; pos > i; i++)
                    (pos - i) % group === 0 && 0 !== i && (formatedText += groupSep),
                    formatedText += whole.charAt(i);
            for (i = pos; i < whole.length; i++)
                (whole.length - i) % lgroup === 0 && 0 !== i && (formatedText += groupSep),
                formatedText += whole.charAt(i);
            for (; fraction.length < fractionSize; )
                fraction += "0";
            fractionSize && "0" !== fractionSize && (formatedText += decimalSep + fraction.substr(0, fractionSize))
        }
        return 0 === number && (isNegative = !1),
        parts.push(isNegative ? pattern.negPre : pattern.posPre, formatedText, isNegative ? pattern.negSuf : pattern.posSuf),
        parts.join("")
    }
    function padNumber(num, digits, trim) {
        var neg = "";
        for (0 > num && (neg = "-",
        num = -num),
        num = "" + num; num.length < digits; )
            num = "0" + num;
        return trim && (num = num.substr(num.length - digits)),
        neg + num
    }
    function dateGetter(name, size, offset, trim) {
        return offset = offset || 0,
        function(date) {
            var value = date["get" + name]();
            return (offset > 0 || value > -offset) && (value += offset),
            0 === value && -12 == offset && (value = 12),
            padNumber(value, size, trim)
        }
    }
    function dateStrGetter(name, shortForm) {
        return function(date, formats) {
            var value = date["get" + name]()
              , get = uppercase(shortForm ? "SHORT" + name : name);
            return formats[get][value]
        }
    }
    function timeZoneGetter(date) {
        var zone = -1 * date.getTimezoneOffset()
          , paddedZone = zone >= 0 ? "+" : "";
        return paddedZone += padNumber(Math[zone > 0 ? "floor" : "ceil"](zone / 60), 2) + padNumber(Math.abs(zone % 60), 2)
    }
    function getFirstThursdayOfYear(year) {
        var dayOfWeekOnFirst = new Date(year,0,1).getDay();
        return new Date(year,0,(4 >= dayOfWeekOnFirst ? 5 : 12) - dayOfWeekOnFirst)
    }
    function getThursdayThisWeek(datetime) {
        return new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate() + (4 - datetime.getDay()))
    }
    function weekGetter(size) {
        return function(date) {
            var firstThurs = getFirstThursdayOfYear(date.getFullYear())
              , thisThurs = getThursdayThisWeek(date)
              , diff = +thisThurs - +firstThurs
              , result = 1 + Math.round(diff / 6048e5);
            return padNumber(result, size)
        }
    }
    function ampmGetter(date, formats) {
        return date.getHours() < 12 ? formats.AMPMS[0] : formats.AMPMS[1]
    }
    function dateFilter($locale) {
        function jsonStringToDate(string) {
            var match;
            if (match = string.match(R_ISO8601_STR)) {
                var date = new Date(0)
                  , tzHour = 0
                  , tzMin = 0
                  , dateSetter = match[8] ? date.setUTCFullYear : date.setFullYear
                  , timeSetter = match[8] ? date.setUTCHours : date.setHours;
                match[9] && (tzHour = int(match[9] + match[10]),
                tzMin = int(match[9] + match[11])),
                dateSetter.call(date, int(match[1]), int(match[2]) - 1, int(match[3]));
                var h = int(match[4] || 0) - tzHour
                  , m = int(match[5] || 0) - tzMin
                  , s = int(match[6] || 0)
                  , ms = Math.round(1e3 * parseFloat("0." + (match[7] || 0)));
                return timeSetter.call(date, h, m, s, ms),
                date
            }
            return string
        }
        var R_ISO8601_STR = /^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
        return function(date, format, timezone) {
            var fn, match, text = "", parts = [];
            if (format = format || "mediumDate",
            format = $locale.DATETIME_FORMATS[format] || format,
            isString(date) && (date = NUMBER_STRING.test(date) ? int(date) : jsonStringToDate(date)),
            isNumber(date) && (date = new Date(date)),
            !isDate(date))
                return date;
            for (; format; )
                match = DATE_FORMATS_SPLIT.exec(format),
                match ? (parts = concat(parts, match, 1),
                format = parts.pop()) : (parts.push(format),
                format = null);
            return timezone && "UTC" === timezone && (date = new Date(date.getTime()),
            date.setMinutes(date.getMinutes() + date.getTimezoneOffset())),
            forEach(parts, function(value) {
                fn = DATE_FORMATS[value],
                text += fn ? fn(date, $locale.DATETIME_FORMATS) : value.replace(/(^'|'$)/g, "").replace(/''/g, "'")
            }),
            text
        }
    }
    function jsonFilter() {
        return function(object, spacing) {
            return isUndefined(spacing) && (spacing = 2),
            toJson(object, spacing)
        }
    }
    function limitToFilter() {
        return function(input, limit) {
            return isNumber(input) && (input = input.toString()),
            isArray(input) || isString(input) ? (limit = Math.abs(Number(limit)) === 1 / 0 ? Number(limit) : int(limit),
            limit ? limit > 0 ? input.slice(0, limit) : input.slice(limit) : isString(input) ? "" : []) : input
        }
    }
    function orderByFilter($parse) {
        return function(array, sortPredicate, reverseOrder) {
            function comparator(o1, o2) {
                for (var i = 0; i < sortPredicate.length; i++) {
                    var comp = sortPredicate[i](o1, o2);
                    if (0 !== comp)
                        return comp
                }
                return 0
            }
            function reverseComparator(comp, descending) {
                return descending ? function(a, b) {
                    return comp(b, a)
                }
                : comp
            }
            function isPrimitive(value) {
                switch (typeof value) {
                case "number":
                case "boolean":
                case "string":
                    return !0;
                default:
                    return !1
                }
            }
            function objectToString(value) {
                return null === value ? "null" : "function" == typeof value.valueOf && (value = value.valueOf(),
                isPrimitive(value)) ? value : "function" == typeof value.toString && (value = value.toString(),
                isPrimitive(value)) ? value : ""
            }
            function compare(v1, v2) {
                var t1 = typeof v1
                  , t2 = typeof v2;
                return t1 === t2 && "object" === t1 && (v1 = objectToString(v1),
                v2 = objectToString(v2)),
                t1 === t2 ? ("string" === t1 && (v1 = v1.toLowerCase(),
                v2 = v2.toLowerCase()),
                v1 === v2 ? 0 : v2 > v1 ? -1 : 1) : t2 > t1 ? -1 : 1
            }
            return isArrayLike(array) ? (sortPredicate = isArray(sortPredicate) ? sortPredicate : [sortPredicate],
            0 === sortPredicate.length && (sortPredicate = ["+"]),
            sortPredicate = sortPredicate.map(function(predicate) {
                var descending = !1
                  , get = predicate || identity;
                if (isString(predicate)) {
                    if ("+" != predicate.charAt(0) && "-" != predicate.charAt(0) || (descending = "-" == predicate.charAt(0),
                    predicate = predicate.substring(1)),
                    "" === predicate)
                        return reverseComparator(compare, descending);
                    if (get = $parse(predicate),
                    get.constant) {
                        var key = get();
                        return reverseComparator(function(a, b) {
                            return compare(a[key], b[key])
                        }, descending)
                    }
                }
                return reverseComparator(function(a, b) {
                    return compare(get(a), get(b))
                }, descending)
            }),
            slice.call(array).sort(reverseComparator(comparator, reverseOrder))) : array
        }
    }
    function ngDirective(directive) {
        return isFunction(directive) && (directive = {
            link: directive
        }),
        directive.restrict = directive.restrict || "AC",
        valueFn(directive)
    }
    function nullFormRenameControl(control, name) {
        control.$name = name
    }
    function FormController(element, attrs, $scope, $animate, $interpolate) {
        var form = this
          , controls = []
          , parentForm = form.$$parentForm = element.parent().controller("form") || nullFormCtrl;
        form.$error = {},
        form.$$success = {},
        form.$pending = undefined,
        form.$name = $interpolate(attrs.name || attrs.ngForm || "")($scope),
        form.$dirty = !1,
        form.$pristine = !0,
        form.$valid = !0,
        form.$invalid = !1,
        form.$submitted = !1,
        parentForm.$addControl(form),
        form.$rollbackViewValue = function() {
            forEach(controls, function(control) {
                control.$rollbackViewValue()
            })
        }
        ,
        form.$commitViewValue = function() {
            forEach(controls, function(control) {
                control.$commitViewValue()
            })
        }
        ,
        form.$addControl = function(control) {
            assertNotHasOwnProperty(control.$name, "input"),
            controls.push(control),
            control.$name && (form[control.$name] = control)
        }
        ,
        form.$$renameControl = function(control, newName) {
            var oldName = control.$name;
            form[oldName] === control && delete form[oldName],
            form[newName] = control,
            control.$name = newName
        }
        ,
        form.$removeControl = function(control) {
            control.$name && form[control.$name] === control && delete form[control.$name],
            forEach(form.$pending, function(value, name) {
                form.$setValidity(name, null, control)
            }),
            forEach(form.$error, function(value, name) {
                form.$setValidity(name, null, control)
            }),
            forEach(form.$$success, function(value, name) {
                form.$setValidity(name, null, control)
            }),
            arrayRemove(controls, control)
        }
        ,
        addSetValidityMethod({
            ctrl: this,
            $element: element,
            set: function(object, property, controller) {
                var list = object[property];
                if (list) {
                    var index = list.indexOf(controller);
                    -1 === index && list.push(controller)
                } else
                    object[property] = [controller]
            },
            unset: function(object, property, controller) {
                var list = object[property];
                list && (arrayRemove(list, controller),
                0 === list.length && delete object[property])
            },
            parentForm: parentForm,
            $animate: $animate
        }),
        form.$setDirty = function() {
            $animate.removeClass(element, PRISTINE_CLASS),
            $animate.addClass(element, DIRTY_CLASS),
            form.$dirty = !0,
            form.$pristine = !1,
            parentForm.$setDirty()
        }
        ,
        form.$setPristine = function() {
            $animate.setClass(element, PRISTINE_CLASS, DIRTY_CLASS + " " + SUBMITTED_CLASS),
            form.$dirty = !1,
            form.$pristine = !0,
            form.$submitted = !1,
            forEach(controls, function(control) {
                control.$setPristine()
            })
        }
        ,
        form.$setUntouched = function() {
            forEach(controls, function(control) {
                control.$setUntouched()
            })
        }
        ,
        form.$setSubmitted = function() {
            $animate.addClass(element, SUBMITTED_CLASS),
            form.$submitted = !0,
            parentForm.$setSubmitted()
        }
    }
    function stringBasedInputType(ctrl) {
        ctrl.$formatters.push(function(value) {
            return ctrl.$isEmpty(value) ? value : value.toString()
        })
    }
    function textInputType(scope, element, attr, ctrl, $sniffer, $browser) {
        baseInputType(scope, element, attr, ctrl, $sniffer, $browser),
        stringBasedInputType(ctrl)
    }
    function baseInputType(scope, element, attr, ctrl, $sniffer, $browser) {
        var type = lowercase(element[0].type);
        if (!$sniffer.android) {
            var composing = !1;
            element.on("compositionstart", function() {
                composing = !0
            }),
            element.on("compositionend", function() {
                composing = !1,
                listener()
            })
        }
        var listener = function(ev) {
            if (timeout && ($browser.defer.cancel(timeout),
            timeout = null),
            !composing) {
                var value = element.val()
                  , event = ev && ev.type;
                "password" === type || attr.ngTrim && "false" === attr.ngTrim || (value = trim(value)),
                (ctrl.$viewValue !== value || "" === value && ctrl.$$hasNativeValidators) && ctrl.$setViewValue(value, event)
            }
        };
        if ($sniffer.hasEvent("input"))
            element.on("input", listener);
        else {
            var timeout, deferListener = function(ev, input, origValue) {
                timeout || (timeout = $browser.defer(function() {
                    timeout = null,
                    input && input.value === origValue || listener(ev)
                }))
            };
            element.on("keydown", function(event) {
                var key = event.keyCode;
                91 === key || key > 15 && 19 > key || key >= 37 && 40 >= key || deferListener(event, this, this.value)
            }),
            $sniffer.hasEvent("paste") && element.on("paste cut", deferListener)
        }
        element.on("change", listener),
        ctrl.$render = function() {
            element.val(ctrl.$isEmpty(ctrl.$viewValue) ? "" : ctrl.$viewValue)
        }
    }
    function weekParser(isoWeek, existingDate) {
        if (isDate(isoWeek))
            return isoWeek;
        if (isString(isoWeek)) {
            WEEK_REGEXP.lastIndex = 0;
            var parts = WEEK_REGEXP.exec(isoWeek);
            if (parts) {
                var year = +parts[1]
                  , week = +parts[2]
                  , hours = 0
                  , minutes = 0
                  , seconds = 0
                  , milliseconds = 0
                  , firstThurs = getFirstThursdayOfYear(year)
                  , addDays = 7 * (week - 1);
                return existingDate && (hours = existingDate.getHours(),
                minutes = existingDate.getMinutes(),
                seconds = existingDate.getSeconds(),
                milliseconds = existingDate.getMilliseconds()),
                new Date(year,0,firstThurs.getDate() + addDays,hours,minutes,seconds,milliseconds)
            }
        }
        return NaN
    }
    function createDateParser(regexp, mapping) {
        return function(iso, date) {
            var parts, map;
            if (isDate(iso))
                return iso;
            if (isString(iso)) {
                if ('"' == iso.charAt(0) && '"' == iso.charAt(iso.length - 1) && (iso = iso.substring(1, iso.length - 1)),
                ISO_DATE_REGEXP.test(iso))
                    return new Date(iso);
                if (regexp.lastIndex = 0,
                parts = regexp.exec(iso))
                    return parts.shift(),
                    map = date ? {
                        yyyy: date.getFullYear(),
                        MM: date.getMonth() + 1,
                        dd: date.getDate(),
                        HH: date.getHours(),
                        mm: date.getMinutes(),
                        ss: date.getSeconds(),
                        sss: date.getMilliseconds() / 1e3
                    } : {
                        yyyy: 1970,
                        MM: 1,
                        dd: 1,
                        HH: 0,
                        mm: 0,
                        ss: 0,
                        sss: 0
                    },
                    forEach(parts, function(part, index) {
                        index < mapping.length && (map[mapping[index]] = +part)
                    }),
                    new Date(map.yyyy,map.MM - 1,map.dd,map.HH,map.mm,map.ss || 0,1e3 * map.sss || 0)
            }
            return NaN
        }
    }
    function createDateInputType(type, regexp, parseDate, format) {
        return function(scope, element, attr, ctrl, $sniffer, $browser, $filter) {
            function isValidDate(value) {
                return value && !(value.getTime && value.getTime() !== value.getTime())
            }
            function parseObservedDateValue(val) {
                return isDefined(val) ? isDate(val) ? val : parseDate(val) : undefined
            }
            badInputChecker(scope, element, attr, ctrl),
            baseInputType(scope, element, attr, ctrl, $sniffer, $browser);
            var previousDate, timezone = ctrl && ctrl.$options && ctrl.$options.timezone;
            if (ctrl.$$parserName = type,
            ctrl.$parsers.push(function(value) {
                if (ctrl.$isEmpty(value))
                    return null;
                if (regexp.test(value)) {
                    var parsedDate = parseDate(value, previousDate);
                    return "UTC" === timezone && parsedDate.setMinutes(parsedDate.getMinutes() - parsedDate.getTimezoneOffset()),
                    parsedDate
                }
                return undefined
            }),
            ctrl.$formatters.push(function(value) {
                if (value && !isDate(value))
                    throw $ngModelMinErr("datefmt", "Expected `{0}` to be a date", value);
                if (isValidDate(value)) {
                    if (previousDate = value,
                    previousDate && "UTC" === timezone) {
                        var timezoneOffset = 6e4 * previousDate.getTimezoneOffset();
                        previousDate = new Date(previousDate.getTime() + timezoneOffset)
                    }
                    return $filter("date")(value, format, timezone)
                }
                return previousDate = null,
                ""
            }),
            isDefined(attr.min) || attr.ngMin) {
                var minVal;
                ctrl.$validators.min = function(value) {
                    return !isValidDate(value) || isUndefined(minVal) || parseDate(value) >= minVal
                }
                ,
                attr.$observe("min", function(val) {
                    minVal = parseObservedDateValue(val),
                    ctrl.$validate()
                })
            }
            if (isDefined(attr.max) || attr.ngMax) {
                var maxVal;
                ctrl.$validators.max = function(value) {
                    return !isValidDate(value) || isUndefined(maxVal) || parseDate(value) <= maxVal
                }
                ,
                attr.$observe("max", function(val) {
                    maxVal = parseObservedDateValue(val),
                    ctrl.$validate()
                })
            }
        }
    }
    function badInputChecker(scope, element, attr, ctrl) {
        var node = element[0]
          , nativeValidation = ctrl.$$hasNativeValidators = isObject(node.validity);
        nativeValidation && ctrl.$parsers.push(function(value) {
            var validity = element.prop(VALIDITY_STATE_PROPERTY) || {};
            return validity.badInput && !validity.typeMismatch ? undefined : value
        })
    }
    function numberInputType(scope, element, attr, ctrl, $sniffer, $browser) {
        if (badInputChecker(scope, element, attr, ctrl),
        baseInputType(scope, element, attr, ctrl, $sniffer, $browser),
        ctrl.$$parserName = "number",
        ctrl.$parsers.push(function(value) {
            return ctrl.$isEmpty(value) ? null : NUMBER_REGEXP.test(value) ? parseFloat(value) : undefined
        }),
        ctrl.$formatters.push(function(value) {
            if (!ctrl.$isEmpty(value)) {
                if (!isNumber(value))
                    throw $ngModelMinErr("numfmt", "Expected `{0}` to be a number", value);
                value = value.toString()
            }
            return value
        }),
        isDefined(attr.min) || attr.ngMin) {
            var minVal;
            ctrl.$validators.min = function(value) {
                return ctrl.$isEmpty(value) || isUndefined(minVal) || value >= minVal
            }
            ,
            attr.$observe("min", function(val) {
                isDefined(val) && !isNumber(val) && (val = parseFloat(val, 10)),
                minVal = isNumber(val) && !isNaN(val) ? val : undefined,
                ctrl.$validate()
            })
        }
        if (isDefined(attr.max) || attr.ngMax) {
            var maxVal;
            ctrl.$validators.max = function(value) {
                return ctrl.$isEmpty(value) || isUndefined(maxVal) || maxVal >= value
            }
            ,
            attr.$observe("max", function(val) {
                isDefined(val) && !isNumber(val) && (val = parseFloat(val, 10)),
                maxVal = isNumber(val) && !isNaN(val) ? val : undefined,
                ctrl.$validate()
            })
        }
    }
    function urlInputType(scope, element, attr, ctrl, $sniffer, $browser) {
        baseInputType(scope, element, attr, ctrl, $sniffer, $browser),
        stringBasedInputType(ctrl),
        ctrl.$$parserName = "url",
        ctrl.$validators.url = function(modelValue, viewValue) {
            var value = modelValue || viewValue;
            return ctrl.$isEmpty(value) || URL_REGEXP.test(value)
        }
    }
    function emailInputType(scope, element, attr, ctrl, $sniffer, $browser) {
        baseInputType(scope, element, attr, ctrl, $sniffer, $browser),
        stringBasedInputType(ctrl),
        ctrl.$$parserName = "email",
        ctrl.$validators.email = function(modelValue, viewValue) {
            var value = modelValue || viewValue;
            return ctrl.$isEmpty(value) || EMAIL_REGEXP.test(value)
        }
    }
    function radioInputType(scope, element, attr, ctrl) {
        isUndefined(attr.name) && element.attr("name", nextUid());
        var listener = function(ev) {
            element[0].checked && ctrl.$setViewValue(attr.value, ev && ev.type)
        };
        element.on("click", listener),
        ctrl.$render = function() {
            var value = attr.value;
            element[0].checked = value == ctrl.$viewValue
        }
        ,
        attr.$observe("value", ctrl.$render)
    }
    function parseConstantExpr($parse, context, name, expression, fallback) {
        var parseFn;
        if (isDefined(expression)) {
            if (parseFn = $parse(expression),
            !parseFn.constant)
                throw minErr("ngModel")("constexpr", "Expected constant expression for `{0}`, but saw `{1}`.", name, expression);
            return parseFn(context)
        }
        return fallback
    }
    function checkboxInputType(scope, element, attr, ctrl, $sniffer, $browser, $filter, $parse) {
        var trueValue = parseConstantExpr($parse, scope, "ngTrueValue", attr.ngTrueValue, !0)
          , falseValue = parseConstantExpr($parse, scope, "ngFalseValue", attr.ngFalseValue, !1)
          , listener = function(ev) {
            ctrl.$setViewValue(element[0].checked, ev && ev.type)
        };
        element.on("click", listener),
        ctrl.$render = function() {
            element[0].checked = ctrl.$viewValue
        }
        ,
        ctrl.$isEmpty = function(value) {
            return value === !1
        }
        ,
        ctrl.$formatters.push(function(value) {
            return equals(value, trueValue)
        }),
        ctrl.$parsers.push(function(value) {
            return value ? trueValue : falseValue
        })
    }
    function classDirective(name, selector) {
        return name = "ngClass" + name,
        ["$animate", function($animate) {
            function arrayDifference(tokens1, tokens2) {
                var values = [];
                outer: for (var i = 0; i < tokens1.length; i++) {
                    for (var token = tokens1[i], j = 0; j < tokens2.length; j++)
                        if (token == tokens2[j])
                            continue outer;
                    values.push(token)
                }
                return values
            }
            function arrayClasses(classVal) {
                if (isArray(classVal))
                    return classVal;
                if (isString(classVal))
                    return classVal.split(" ");
                if (isObject(classVal)) {
                    var classes = [];
                    return forEach(classVal, function(v, k) {
                        v && (classes = classes.concat(k.split(" ")))
                    }),
                    classes
                }
                return classVal
            }
            return {
                restrict: "AC",
                link: function(scope, element, attr) {
                    function addClasses(classes) {
                        var newClasses = digestClassCounts(classes, 1);
                        attr.$addClass(newClasses)
                    }
                    function removeClasses(classes) {
                        var newClasses = digestClassCounts(classes, -1);
                        attr.$removeClass(newClasses)
                    }
                    function digestClassCounts(classes, count) {
                        var classCounts = element.data("$classCounts") || {}
                          , classesToUpdate = [];
                        return forEach(classes, function(className) {
                            (count > 0 || classCounts[className]) && (classCounts[className] = (classCounts[className] || 0) + count,
                            classCounts[className] === +(count > 0) && classesToUpdate.push(className))
                        }),
                        element.data("$classCounts", classCounts),
                        classesToUpdate.join(" ")
                    }
                    function updateClasses(oldClasses, newClasses) {
                        var toAdd = arrayDifference(newClasses, oldClasses)
                          , toRemove = arrayDifference(oldClasses, newClasses);
                        toAdd = digestClassCounts(toAdd, 1),
                        toRemove = digestClassCounts(toRemove, -1),
                        toAdd && toAdd.length && $animate.addClass(element, toAdd),
                        toRemove && toRemove.length && $animate.removeClass(element, toRemove)
                    }
                    function ngClassWatchAction(newVal) {
                        if (selector === !0 || scope.$index % 2 === selector) {
                            var newClasses = arrayClasses(newVal || []);
                            if (oldVal) {
                                if (!equals(newVal, oldVal)) {
                                    var oldClasses = arrayClasses(oldVal);
                                    updateClasses(oldClasses, newClasses)
                                }
                            } else
                                addClasses(newClasses)
                        }
                        oldVal = shallowCopy(newVal)
                    }
                    var oldVal;
                    scope.$watch(attr[name], ngClassWatchAction, !0),
                    attr.$observe("class", function() {
                        ngClassWatchAction(scope.$eval(attr[name]))
                    }),
                    "ngClass" !== name && scope.$watch("$index", function($index, old$index) {
                        var mod = 1 & $index;
                        if (mod !== (1 & old$index)) {
                            var classes = arrayClasses(scope.$eval(attr[name]));
                            mod === selector ? addClasses(classes) : removeClasses(classes)
                        }
                    })
                }
            }
        }
        ]
    }
    function addSetValidityMethod(context) {
        function setValidity(validationErrorKey, state, controller) {
            state === undefined ? createAndSet("$pending", validationErrorKey, controller) : unsetAndCleanup("$pending", validationErrorKey, controller),
            isBoolean(state) ? state ? (unset(ctrl.$error, validationErrorKey, controller),
            set(ctrl.$$success, validationErrorKey, controller)) : (set(ctrl.$error, validationErrorKey, controller),
            unset(ctrl.$$success, validationErrorKey, controller)) : (unset(ctrl.$error, validationErrorKey, controller),
            unset(ctrl.$$success, validationErrorKey, controller)),
            ctrl.$pending ? (cachedToggleClass(PENDING_CLASS, !0),
            ctrl.$valid = ctrl.$invalid = undefined,
            toggleValidationCss("", null)) : (cachedToggleClass(PENDING_CLASS, !1),
            ctrl.$valid = isObjectEmpty(ctrl.$error),
            ctrl.$invalid = !ctrl.$valid,
            toggleValidationCss("", ctrl.$valid));
            var combinedState;
            combinedState = ctrl.$pending && ctrl.$pending[validationErrorKey] ? undefined : ctrl.$error[validationErrorKey] ? !1 : ctrl.$$success[validationErrorKey] ? !0 : null,
            toggleValidationCss(validationErrorKey, combinedState),
            parentForm.$setValidity(validationErrorKey, combinedState, ctrl)
        }
        function createAndSet(name, value, controller) {
            ctrl[name] || (ctrl[name] = {}),
            set(ctrl[name], value, controller)
        }
        function unsetAndCleanup(name, value, controller) {
            ctrl[name] && unset(ctrl[name], value, controller),
            isObjectEmpty(ctrl[name]) && (ctrl[name] = undefined)
        }
        function cachedToggleClass(className, switchValue) {
            switchValue && !classCache[className] ? ($animate.addClass($element, className),
            classCache[className] = !0) : !switchValue && classCache[className] && ($animate.removeClass($element, className),
            classCache[className] = !1)
        }
        function toggleValidationCss(validationErrorKey, isValid) {
            validationErrorKey = validationErrorKey ? "-" + snake_case(validationErrorKey, "-") : "",
            cachedToggleClass(VALID_CLASS + validationErrorKey, isValid === !0),
            cachedToggleClass(INVALID_CLASS + validationErrorKey, isValid === !1)
        }
        var ctrl = context.ctrl
          , $element = context.$element
          , classCache = {}
          , set = context.set
          , unset = context.unset
          , parentForm = context.parentForm
          , $animate = context.$animate;
        classCache[INVALID_CLASS] = !(classCache[VALID_CLASS] = $element.hasClass(VALID_CLASS)),
        ctrl.$setValidity = setValidity
    }
    function isObjectEmpty(obj) {
        if (obj)
            for (var prop in obj)
                return !1;
        return !0
    }
    var REGEX_STRING_REGEXP = /^\/(.+)\/([a-z]*)$/
      , VALIDITY_STATE_PROPERTY = "validity"
      , lowercase = function(string) {
        return isString(string) ? string.toLowerCase() : string
    }
      , hasOwnProperty = Object.prototype.hasOwnProperty
      , uppercase = function(string) {
        return isString(string) ? string.toUpperCase() : string
    }
      , manualLowercase = function(s) {
        return isString(s) ? s.replace(/[A-Z]/g, function(ch) {
            return String.fromCharCode(32 | ch.charCodeAt(0))
        }) : s
    }
      , manualUppercase = function(s) {
        return isString(s) ? s.replace(/[a-z]/g, function(ch) {
            return String.fromCharCode(-33 & ch.charCodeAt(0))
        }) : s
    };
    "i" !== "I".toLowerCase() && (lowercase = manualLowercase,
    uppercase = manualUppercase);
    var msie, jqLite, jQuery, angularModule, slice = [].slice, splice = [].splice, push = [].push, toString = Object.prototype.toString, ngMinErr = minErr("ng"), angular = window.angular || (window.angular = {}), uid = 0;
    msie = document.documentMode,
    noop.$inject = [],
    identity.$inject = [];
    var skipDestroyOnNextJQueryCleanData, isArray = Array.isArray, trim = function(value) {
        return isString(value) ? value.trim() : value
    }, escapeForRegexp = function(s) {
        return s.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g, "\\$1").replace(/\x08/g, "\\x08")
    }, csp = function() {
        if (isDefined(csp.isActive_))
            return csp.isActive_;
        var active = !(!document.querySelector("[ng-csp]") && !document.querySelector("[data-ng-csp]"));
        if (!active)
            try {
                new Function("")
            } catch (e) {
                active = !0
            }
        return csp.isActive_ = active
    }, ngAttrPrefixes = ["ng-", "data-ng-", "ng:", "x-ng-"], SNAKE_CASE_REGEXP = /[A-Z]/g, bindJQueryFired = !1, NODE_TYPE_ELEMENT = 1, NODE_TYPE_TEXT = 3, NODE_TYPE_COMMENT = 8, NODE_TYPE_DOCUMENT = 9, NODE_TYPE_DOCUMENT_FRAGMENT = 11, version = {
        full: "1.3.14",
        major: 1,
        minor: 3,
        dot: 14,
        codeName: "instantaneous-browserification"
    };
    JQLite.expando = "ng339";
    var jqCache = JQLite.cache = {}
      , jqId = 1
      , addEventListenerFn = function(element, type, fn) {
        element.addEventListener(type, fn, !1)
    }
      , removeEventListenerFn = function(element, type, fn) {
        element.removeEventListener(type, fn, !1)
    };
    JQLite._data = function(node) {
        return this.cache[node[this.expando]] || {}
    }
    ;
    var SPECIAL_CHARS_REGEXP = /([\:\-\_]+(.))/g
      , MOZ_HACK_REGEXP = /^moz([A-Z])/
      , MOUSE_EVENT_MAP = {
        mouseleave: "mouseout",
        mouseenter: "mouseover"
    }
      , jqLiteMinErr = minErr("jqLite")
      , SINGLE_TAG_REGEXP = /^<(\w+)\s*\/?>(?:<\/\1>|)$/
      , HTML_REGEXP = /<|&#?\w+;/
      , TAG_NAME_REGEXP = /<([\w:]+)/
      , XHTML_TAG_REGEXP = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi
      , wrapMap = {
        option: [1, '<select multiple="multiple">', "</select>"],
        thead: [1, "<table>", "</table>"],
        col: [2, "<table><colgroup>", "</colgroup></table>"],
        tr: [2, "<table><tbody>", "</tbody></table>"],
        td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
        _default: [0, "", ""]
    };
    wrapMap.optgroup = wrapMap.option,
    wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead,
    wrapMap.th = wrapMap.td;
    var JQLitePrototype = JQLite.prototype = {
        ready: function(fn) {
            function trigger() {
                fired || (fired = !0,
                fn())
            }
            var fired = !1;
            "complete" === document.readyState ? setTimeout(trigger) : (this.on("DOMContentLoaded", trigger),
            JQLite(window).on("load", trigger))
        },
        toString: function() {
            var value = [];
            return forEach(this, function(e) {
                value.push("" + e)
            }),
            "[" + value.join(", ") + "]"
        },
        eq: function(index) {
            return jqLite(index >= 0 ? this[index] : this[this.length + index])
        },
        length: 0,
        push: push,
        sort: [].sort,
        splice: [].splice
    }
      , BOOLEAN_ATTR = {};
    forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","), function(value) {
        BOOLEAN_ATTR[lowercase(value)] = value
    });
    var BOOLEAN_ELEMENTS = {};
    forEach("input,select,option,textarea,button,form,details".split(","), function(value) {
        BOOLEAN_ELEMENTS[value] = !0
    });
    var ALIASED_ATTR = {
        ngMinlength: "minlength",
        ngMaxlength: "maxlength",
        ngMin: "min",
        ngMax: "max",
        ngPattern: "pattern"
    };
    forEach({
        data: jqLiteData,
        removeData: jqLiteRemoveData
    }, function(fn, name) {
        JQLite[name] = fn
    }),
    forEach({
        data: jqLiteData,
        inheritedData: jqLiteInheritedData,
        scope: function(element) {
            return jqLite.data(element, "$scope") || jqLiteInheritedData(element.parentNode || element, ["$isolateScope", "$scope"])
        },
        isolateScope: function(element) {
            return jqLite.data(element, "$isolateScope") || jqLite.data(element, "$isolateScopeNoTemplate")
        },
        controller: jqLiteController,
        injector: function(element) {
            return jqLiteInheritedData(element, "$injector")
        },
        removeAttr: function(element, name) {
            element.removeAttribute(name)
        },
        hasClass: jqLiteHasClass,
        css: function(element, name, value) {
            return name = camelCase(name),
            isDefined(value) ? void (element.style[name] = value) : element.style[name]
        },
        attr: function(element, name, value) {
            var lowercasedName = lowercase(name);
            if (BOOLEAN_ATTR[lowercasedName]) {
                if (!isDefined(value))
                    return element[name] || (element.attributes.getNamedItem(name) || noop).specified ? lowercasedName : undefined;
                value ? (element[name] = !0,
                element.setAttribute(name, lowercasedName)) : (element[name] = !1,
                element.removeAttribute(lowercasedName))
            } else if (isDefined(value))
                element.setAttribute(name, value);
            else if (element.getAttribute) {
                var ret = element.getAttribute(name, 2);
                return null === ret ? undefined : ret
            }
        },
        prop: function(element, name, value) {
            return isDefined(value) ? void (element[name] = value) : element[name]
        },
        text: function() {
            function getText(element, value) {
                if (isUndefined(value)) {
                    var nodeType = element.nodeType;
                    return nodeType === NODE_TYPE_ELEMENT || nodeType === NODE_TYPE_TEXT ? element.textContent : ""
                }
                element.textContent = value
            }
            return getText.$dv = "",
            getText
        }(),
        val: function(element, value) {
            if (isUndefined(value)) {
                if (element.multiple && "select" === nodeName_(element)) {
                    var result = [];
                    return forEach(element.options, function(option) {
                        option.selected && result.push(option.value || option.text)
                    }),
                    0 === result.length ? null : result
                }
                return element.value
            }
            element.value = value
        },
        html: function(element, value) {
            return isUndefined(value) ? element.innerHTML : (jqLiteDealoc(element, !0),
            void (element.innerHTML = value))
        },
        empty: jqLiteEmpty
    }, function(fn, name) {
        JQLite.prototype[name] = function(arg1, arg2) {
            var i, key, nodeCount = this.length;
            if (fn !== jqLiteEmpty && (2 == fn.length && fn !== jqLiteHasClass && fn !== jqLiteController ? arg1 : arg2) === undefined) {
                if (isObject(arg1)) {
                    for (i = 0; nodeCount > i; i++)
                        if (fn === jqLiteData)
                            fn(this[i], arg1);
                        else
                            for (key in arg1)
                                fn(this[i], key, arg1[key]);
                    return this
                }
                for (var value = fn.$dv, jj = value === undefined ? Math.min(nodeCount, 1) : nodeCount, j = 0; jj > j; j++) {
                    var nodeValue = fn(this[j], arg1, arg2);
                    value = value ? value + nodeValue : nodeValue
                }
                return value
            }
            for (i = 0; nodeCount > i; i++)
                fn(this[i], arg1, arg2);
            return this
        }
    }),
    forEach({
        removeData: jqLiteRemoveData,
        on: function jqLiteOn(element, type, fn, unsupported) {
            if (isDefined(unsupported))
                throw jqLiteMinErr("onargs", "jqLite#on() does not support the `selector` or `eventData` parameters");
            if (jqLiteAcceptsData(element)) {
                var expandoStore = jqLiteExpandoStore(element, !0)
                  , events = expandoStore.events
                  , handle = expandoStore.handle;
                handle || (handle = expandoStore.handle = createEventHandler(element, events));
                for (var types = type.indexOf(" ") >= 0 ? type.split(" ") : [type], i = types.length; i--; ) {
                    type = types[i];
                    var eventFns = events[type];
                    eventFns || (events[type] = [],
                    "mouseenter" === type || "mouseleave" === type ? jqLiteOn(element, MOUSE_EVENT_MAP[type], function(event) {
                        var target = this
                          , related = event.relatedTarget;
                        related && (related === target || target.contains(related)) || handle(event, type)
                    }) : "$destroy" !== type && addEventListenerFn(element, type, handle),
                    eventFns = events[type]),
                    eventFns.push(fn)
                }
            }
        },
        off: jqLiteOff,
        one: function(element, type, fn) {
            element = jqLite(element),
            element.on(type, function onFn() {
                element.off(type, fn),
                element.off(type, onFn)
            }),
            element.on(type, fn)
        },
        replaceWith: function(element, replaceNode) {
            var index, parent = element.parentNode;
            jqLiteDealoc(element),
            forEach(new JQLite(replaceNode), function(node) {
                index ? parent.insertBefore(node, index.nextSibling) : parent.replaceChild(node, element),
                index = node
            })
        },
        children: function(element) {
            var children = [];
            return forEach(element.childNodes, function(element) {
                element.nodeType === NODE_TYPE_ELEMENT && children.push(element)
            }),
            children
        },
        contents: function(element) {
            return element.contentDocument || element.childNodes || []
        },
        append: function(element, node) {
            var nodeType = element.nodeType;
            if (nodeType === NODE_TYPE_ELEMENT || nodeType === NODE_TYPE_DOCUMENT_FRAGMENT) {
                node = new JQLite(node);
                for (var i = 0, ii = node.length; ii > i; i++) {
                    var child = node[i];
                    element.appendChild(child)
                }
            }
        },
        prepend: function(element, node) {
            if (element.nodeType === NODE_TYPE_ELEMENT) {
                var index = element.firstChild;
                forEach(new JQLite(node), function(child) {
                    element.insertBefore(child, index)
                })
            }
        },
        wrap: function(element, wrapNode) {
            wrapNode = jqLite(wrapNode).eq(0).clone()[0];
            var parent = element.parentNode;
            parent && parent.replaceChild(wrapNode, element),
            wrapNode.appendChild(element)
        },
        remove: jqLiteRemove,
        detach: function(element) {
            jqLiteRemove(element, !0)
        },
        after: function(element, newElement) {
            var index = element
              , parent = element.parentNode;
            newElement = new JQLite(newElement);
            for (var i = 0, ii = newElement.length; ii > i; i++) {
                var node = newElement[i];
                parent.insertBefore(node, index.nextSibling),
                index = node
            }
        },
        addClass: jqLiteAddClass,
        removeClass: jqLiteRemoveClass,
        toggleClass: function(element, selector, condition) {
            selector && forEach(selector.split(" "), function(className) {
                var classCondition = condition;
                isUndefined(classCondition) && (classCondition = !jqLiteHasClass(element, className)),
                (classCondition ? jqLiteAddClass : jqLiteRemoveClass)(element, className)
            })
        },
        parent: function(element) {
            var parent = element.parentNode;
            return parent && parent.nodeType !== NODE_TYPE_DOCUMENT_FRAGMENT ? parent : null
        },
        next: function(element) {
            return element.nextElementSibling
        },
        find: function(element, selector) {
            return element.getElementsByTagName ? element.getElementsByTagName(selector) : []
        },
        clone: jqLiteClone,
        triggerHandler: function(element, event, extraParameters) {
            var dummyEvent, eventFnsCopy, handlerArgs, eventName = event.type || event, expandoStore = jqLiteExpandoStore(element), events = expandoStore && expandoStore.events, eventFns = events && events[eventName];
            eventFns && (dummyEvent = {
                preventDefault: function() {
                    this.defaultPrevented = !0
                },
                isDefaultPrevented: function() {
                    return this.defaultPrevented === !0
                },
                stopImmediatePropagation: function() {
                    this.immediatePropagationStopped = !0
                },
                isImmediatePropagationStopped: function() {
                    return this.immediatePropagationStopped === !0
                },
                stopPropagation: noop,
                type: eventName,
                target: element
            },
            event.type && (dummyEvent = extend(dummyEvent, event)),
            eventFnsCopy = shallowCopy(eventFns),
            handlerArgs = extraParameters ? [dummyEvent].concat(extraParameters) : [dummyEvent],
            forEach(eventFnsCopy, function(fn) {
                dummyEvent.isImmediatePropagationStopped() || fn.apply(element, handlerArgs)
            }))
        }
    }, function(fn, name) {
        JQLite.prototype[name] = function(arg1, arg2, arg3) {
            for (var value, i = 0, ii = this.length; ii > i; i++)
                isUndefined(value) ? (value = fn(this[i], arg1, arg2, arg3),
                isDefined(value) && (value = jqLite(value))) : jqLiteAddNodes(value, fn(this[i], arg1, arg2, arg3));
            return isDefined(value) ? value : this
        }
        ,
        JQLite.prototype.bind = JQLite.prototype.on,
        JQLite.prototype.unbind = JQLite.prototype.off
    }),
    HashMap.prototype = {
        put: function(key, value) {
            this[hashKey(key, this.nextUid)] = value
        },
        get: function(key) {
            return this[hashKey(key, this.nextUid)]
        },
        remove: function(key) {
            var value = this[key = hashKey(key, this.nextUid)];
            return delete this[key],
            value
        }
    };
    var FN_ARGS = /^function\s*[^\(]*\(\s*([^\)]*)\)/m
      , FN_ARG_SPLIT = /,/
      , FN_ARG = /^\s*(_?)(\S+?)\1\s*$/
      , STRIP_COMMENTS = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm
      , $injectorMinErr = minErr("$injector");
    createInjector.$$annotate = annotate;
    var $animateMinErr = minErr("$animate")
      , $AnimateProvider = ["$provide", function($provide) {
        this.$$selectors = {},
        this.register = function(name, factory) {
            var key = name + "-animation";
            if (name && "." != name.charAt(0))
                throw $animateMinErr("notcsel", "Expecting class selector starting with '.' got '{0}'.", name);
            this.$$selectors[name.substr(1)] = key,
            $provide.factory(key, factory)
        }
        ,
        this.classNameFilter = function(expression) {
            return 1 === arguments.length && (this.$$classNameFilter = expression instanceof RegExp ? expression : null),
            this.$$classNameFilter
        }
        ,
        this.$get = ["$$q", "$$asyncCallback", "$rootScope", function($$q, $$asyncCallback, $rootScope) {
            function runAnimationPostDigest(fn) {
                var cancelFn, defer = $$q.defer();
                return defer.promise.$$cancelFn = function() {
                    cancelFn && cancelFn()
                }
                ,
                $rootScope.$$postDigest(function() {
                    cancelFn = fn(function() {
                        defer.resolve()
                    })
                }),
                defer.promise
            }
            function resolveElementClasses(element, classes) {
                var toAdd = []
                  , toRemove = []
                  , hasClasses = createMap();
                return forEach((element.attr("class") || "").split(/\s+/), function(className) {
                    hasClasses[className] = !0
                }),
                forEach(classes, function(status, className) {
                    var hasClass = hasClasses[className];
                    status === !1 && hasClass ? toRemove.push(className) : status !== !0 || hasClass || toAdd.push(className)
                }),
                toAdd.length + toRemove.length > 0 && [toAdd.length ? toAdd : null, toRemove.length ? toRemove : null]
            }
            function cachedClassManipulation(cache, classes, op) {
                for (var i = 0, ii = classes.length; ii > i; ++i) {
                    var className = classes[i];
                    cache[className] = op
                }
            }
            function asyncPromise() {
                return currentDefer || (currentDefer = $$q.defer(),
                $$asyncCallback(function() {
                    currentDefer.resolve(),
                    currentDefer = null
                })),
                currentDefer.promise
            }
            function applyStyles(element, options) {
                if (angular.isObject(options)) {
                    var styles = extend(options.from || {}, options.to || {});
                    element.css(styles)
                }
            }
            var currentDefer;
            return {
                animate: function(element, from, to) {
                    return applyStyles(element, {
                        from: from,
                        to: to
                    }),
                    asyncPromise()
                },
                enter: function(element, parent, after, options) {
                    return applyStyles(element, options),
                    after ? after.after(element) : parent.prepend(element),
                    asyncPromise()
                },
                leave: function(element) {
                    return element.remove(),
                    asyncPromise()
                },
                move: function(element, parent, after, options) {
                    return this.enter(element, parent, after, options)
                },
                addClass: function(element, className, options) {
                    return this.setClass(element, className, [], options)
                },
                $$addClassImmediately: function(element, className, options) {
                    return element = jqLite(element),
                    className = isString(className) ? className : isArray(className) ? className.join(" ") : "",
                    forEach(element, function(element) {
                        jqLiteAddClass(element, className)
                    }),
                    applyStyles(element, options),
                    asyncPromise()
                },
                removeClass: function(element, className, options) {
                    return this.setClass(element, [], className, options)
                },
                $$removeClassImmediately: function(element, className, options) {
                    return element = jqLite(element),
                    className = isString(className) ? className : isArray(className) ? className.join(" ") : "",
                    forEach(element, function(element) {
                        jqLiteRemoveClass(element, className)
                    }),
                    applyStyles(element, options),
                    asyncPromise()
                },
                setClass: function(element, add, remove, options) {
                    var self = this
                      , STORAGE_KEY = "$$animateClasses"
                      , createdCache = !1;
                    element = jqLite(element);
                    var cache = element.data(STORAGE_KEY);
                    cache ? options && cache.options && (cache.options = angular.extend(cache.options || {}, options)) : (cache = {
                        classes: {},
                        options: options
                    },
                    createdCache = !0);
                    var classes = cache.classes;
                    return add = isArray(add) ? add : add.split(" "),
                    remove = isArray(remove) ? remove : remove.split(" "),
                    cachedClassManipulation(classes, add, !0),
                    cachedClassManipulation(classes, remove, !1),
                    createdCache && (cache.promise = runAnimationPostDigest(function(done) {
                        var cache = element.data(STORAGE_KEY);
                        if (element.removeData(STORAGE_KEY),
                        cache) {
                            var classes = resolveElementClasses(element, cache.classes);
                            classes && self.$$setClassImmediately(element, classes[0], classes[1], cache.options)
                        }
                        done()
                    }),
                    element.data(STORAGE_KEY, cache)),
                    cache.promise
                },
                $$setClassImmediately: function(element, add, remove, options) {
                    return add && this.$$addClassImmediately(element, add),
                    remove && this.$$removeClassImmediately(element, remove),
                    applyStyles(element, options),
                    asyncPromise()
                },
                enabled: noop,
                cancel: noop
            }
        }
        ]
    }
    ]
      , $compileMinErr = minErr("$compile");
    $CompileProvider.$inject = ["$provide", "$$sanitizeUriProvider"];
    var PREFIX_REGEXP = /^((?:x|data)[\:\-_])/i
      , $controllerMinErr = minErr("$controller")
      , APPLICATION_JSON = "application/json"
      , CONTENT_TYPE_APPLICATION_JSON = {
        "Content-Type": APPLICATION_JSON + ";charset=utf-8"
    }
      , JSON_START = /^\[|^\{(?!\{)/
      , JSON_ENDS = {
        "[": /]$/,
        "{": /}$/
    }
      , JSON_PROTECTION_PREFIX = /^\)\]\}',?\n/
      , $interpolateMinErr = minErr("$interpolate")
      , PATH_MATCH = /^([^\?#]*)(\?([^#]*))?(#(.*))?$/
      , DEFAULT_PORTS = {
        http: 80,
        https: 443,
        ftp: 21
    }
      , $locationMinErr = minErr("$location")
      , locationPrototype = {
        $$html5: !1,
        $$replace: !1,
        absUrl: locationGetter("$$absUrl"),
        url: function(url) {
            if (isUndefined(url))
                return this.$$url;
            var match = PATH_MATCH.exec(url);
            return (match[1] || "" === url) && this.path(decodeURIComponent(match[1])),
            (match[2] || match[1] || "" === url) && this.search(match[3] || ""),
            this.hash(match[5] || ""),
            this
        },
        protocol: locationGetter("$$protocol"),
        host: locationGetter("$$host"),
        port: locationGetter("$$port"),
        path: locationGetterSetter("$$path", function(path) {
            return path = null !== path ? path.toString() : "",
            "/" == path.charAt(0) ? path : "/" + path
        }),
        search: function(search, paramValue) {
            switch (arguments.length) {
            case 0:
                return this.$$search;
            case 1:
                if (isString(search) || isNumber(search))
                    search = search.toString(),
                    this.$$search = parseKeyValue(search);
                else {
                    if (!isObject(search))
                        throw $locationMinErr("isrcharg", "The first argument of the `$location#search()` call must be a string or an object.");
                    search = copy(search, {}),
                    forEach(search, function(value, key) {
                        null == value && delete search[key]
                    }),
                    this.$$search = search
                }
                break;
            default:
                isUndefined(paramValue) || null === paramValue ? delete this.$$search[search] : this.$$search[search] = paramValue
            }
            return this.$$compose(),
            this
        },
        hash: locationGetterSetter("$$hash", function(hash) {
            return null !== hash ? hash.toString() : ""
        }),
        replace: function() {
            return this.$$replace = !0,
            this
        }
    };
    forEach([LocationHashbangInHtml5Url, LocationHashbangUrl, LocationHtml5Url], function(Location) {
        Location.prototype = Object.create(locationPrototype),
        Location.prototype.state = function(state) {
            if (!arguments.length)
                return this.$$state;
            if (Location !== LocationHtml5Url || !this.$$html5)
                throw $locationMinErr("nostate", "History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");
            return this.$$state = isUndefined(state) ? null : state,
            this
        }
    });
    var $parseMinErr = minErr("$parse")
      , CALL = Function.prototype.call
      , APPLY = Function.prototype.apply
      , BIND = Function.prototype.bind
      , CONSTANTS = createMap();
    forEach({
        "null": function() {
            return null
        },
        "true": function() {
            return !0
        },
        "false": function() {
            return !1
        },
        undefined: function() {}
    }, function(constantGetter, name) {
        constantGetter.constant = constantGetter.literal = constantGetter.sharedGetter = !0,
        CONSTANTS[name] = constantGetter
    }),
    CONSTANTS["this"] = function(self) {
        return self
    }
    ,
    CONSTANTS["this"].sharedGetter = !0;
    var OPERATORS = extend(createMap(), {
        "+": function(self, locals, a, b) {
            return a = a(self, locals),
            b = b(self, locals),
            isDefined(a) ? isDefined(b) ? a + b : a : isDefined(b) ? b : undefined
        },
        "-": function(self, locals, a, b) {
            return a = a(self, locals),
            b = b(self, locals),
            (isDefined(a) ? a : 0) - (isDefined(b) ? b : 0)
        },
        "*": function(self, locals, a, b) {
            return a(self, locals) * b(self, locals)
        },
        "/": function(self, locals, a, b) {
            return a(self, locals) / b(self, locals)
        },
        "%": function(self, locals, a, b) {
            return a(self, locals) % b(self, locals)
        },
        "===": function(self, locals, a, b) {
            return a(self, locals) === b(self, locals)
        },
        "!==": function(self, locals, a, b) {
            return a(self, locals) !== b(self, locals)
        },
        "==": function(self, locals, a, b) {
            return a(self, locals) == b(self, locals)
        },
        "!=": function(self, locals, a, b) {
            return a(self, locals) != b(self, locals)
        },
        "<": function(self, locals, a, b) {
            return a(self, locals) < b(self, locals)
        },
        ">": function(self, locals, a, b) {
            return a(self, locals) > b(self, locals)
        },
        "<=": function(self, locals, a, b) {
            return a(self, locals) <= b(self, locals)
        },
        ">=": function(self, locals, a, b) {
            return a(self, locals) >= b(self, locals)
        },
        "&&": function(self, locals, a, b) {
            return a(self, locals) && b(self, locals)
        },
        "||": function(self, locals, a, b) {
            return a(self, locals) || b(self, locals)
        },
        "!": function(self, locals, a) {
            return !a(self, locals)
        },
        "=": !0,
        "|": !0
    })
      , ESCAPE = {
        n: "\n",
        f: "\f",
        r: "\r",
        t: "	",
        v: "\x0B",
        "'": "'",
        '"': '"'
    }
      , Lexer = function(options) {
        this.options = options
    };
    Lexer.prototype = {
        constructor: Lexer,
        lex: function(text) {
            for (this.text = text,
            this.index = 0,
            this.tokens = []; this.index < this.text.length; ) {
                var ch = this.text.charAt(this.index);
                if ('"' === ch || "'" === ch)
                    this.readString(ch);
                else if (this.isNumber(ch) || "." === ch && this.isNumber(this.peek()))
                    this.readNumber();
                else if (this.isIdent(ch))
                    this.readIdent();
                else if (this.is(ch, "(){}[].,;:?"))
                    this.tokens.push({
                        index: this.index,
                        text: ch
                    }),
                    this.index++;
                else if (this.isWhitespace(ch))
                    this.index++;
                else {
                    var ch2 = ch + this.peek()
                      , ch3 = ch2 + this.peek(2)
                      , op1 = OPERATORS[ch]
                      , op2 = OPERATORS[ch2]
                      , op3 = OPERATORS[ch3];
                    if (op1 || op2 || op3) {
                        var token = op3 ? ch3 : op2 ? ch2 : ch;
                        this.tokens.push({
                            index: this.index,
                            text: token,
                            operator: !0
                        }),
                        this.index += token.length
                    } else
                        this.throwError("Unexpected next character ", this.index, this.index + 1)
                }
            }
            return this.tokens
        },
        is: function(ch, chars) {
            return -1 !== chars.indexOf(ch)
        },
        peek: function(i) {
            var num = i || 1;
            return this.index + num < this.text.length ? this.text.charAt(this.index + num) : !1
        },
        isNumber: function(ch) {
            return ch >= "0" && "9" >= ch && "string" == typeof ch
        },
        isWhitespace: function(ch) {
            return " " === ch || "\r" === ch || "	" === ch || "\n" === ch || "\x0B" === ch || "\xa0" === ch
        },
        isIdent: function(ch) {
            return ch >= "a" && "z" >= ch || ch >= "A" && "Z" >= ch || "_" === ch || "$" === ch
        },
        isExpOperator: function(ch) {
            return "-" === ch || "+" === ch || this.isNumber(ch)
        },
        throwError: function(error, start, end) {
            end = end || this.index;
            var colStr = isDefined(start) ? "s " + start + "-" + this.index + " [" + this.text.substring(start, end) + "]" : " " + end;
            throw $parseMinErr("lexerr", "Lexer Error: {0} at column{1} in expression [{2}].", error, colStr, this.text)
        },
        readNumber: function() {
            for (var number = "", start = this.index; this.index < this.text.length; ) {
                var ch = lowercase(this.text.charAt(this.index));
                if ("." == ch || this.isNumber(ch))
                    number += ch;
                else {
                    var peekCh = this.peek();
                    if ("e" == ch && this.isExpOperator(peekCh))
                        number += ch;
                    else if (this.isExpOperator(ch) && peekCh && this.isNumber(peekCh) && "e" == number.charAt(number.length - 1))
                        number += ch;
                    else {
                        if (!this.isExpOperator(ch) || peekCh && this.isNumber(peekCh) || "e" != number.charAt(number.length - 1))
                            break;
                        this.throwError("Invalid exponent")
                    }
                }
                this.index++
            }
            this.tokens.push({
                index: start,
                text: number,
                constant: !0,
                value: Number(number)
            })
        },
        readIdent: function() {
            for (var start = this.index; this.index < this.text.length; ) {
                var ch = this.text.charAt(this.index);
                if (!this.isIdent(ch) && !this.isNumber(ch))
                    break;
                this.index++
            }
            this.tokens.push({
                index: start,
                text: this.text.slice(start, this.index),
                identifier: !0
            })
        },
        readString: function(quote) {
            var start = this.index;
            this.index++;
            for (var string = "", rawString = quote, escape = !1; this.index < this.text.length; ) {
                var ch = this.text.charAt(this.index);
                if (rawString += ch,
                escape) {
                    if ("u" === ch) {
                        var hex = this.text.substring(this.index + 1, this.index + 5);
                        hex.match(/[\da-f]{4}/i) || this.throwError("Invalid unicode escape [\\u" + hex + "]"),
                        this.index += 4,
                        string += String.fromCharCode(parseInt(hex, 16))
                    } else {
                        var rep = ESCAPE[ch];
                        string += rep || ch
                    }
                    escape = !1
                } else if ("\\" === ch)
                    escape = !0;
                else {
                    if (ch === quote)
                        return this.index++,
                        void this.tokens.push({
                            index: start,
                            text: rawString,
                            constant: !0,
                            value: string
                        });
                    string += ch
                }
                this.index++
            }
            this.throwError("Unterminated quote", start)
        }
    };
    var Parser = function(lexer, $filter, options) {
        this.lexer = lexer,
        this.$filter = $filter,
        this.options = options
    };
    Parser.ZERO = extend(function() {
        return 0
    }, {
        sharedGetter: !0,
        constant: !0
    }),
    Parser.prototype = {
        constructor: Parser,
        parse: function(text) {
            this.text = text,
            this.tokens = this.lexer.lex(text);
            var value = this.statements();
            return 0 !== this.tokens.length && this.throwError("is an unexpected token", this.tokens[0]),
            value.literal = !!value.literal,
            value.constant = !!value.constant,
            value
        },
        primary: function() {
            var primary;
            this.expect("(") ? (primary = this.filterChain(),
            this.consume(")")) : this.expect("[") ? primary = this.arrayDeclaration() : this.expect("{") ? primary = this.object() : this.peek().identifier && this.peek().text in CONSTANTS ? primary = CONSTANTS[this.consume().text] : this.peek().identifier ? primary = this.identifier() : this.peek().constant ? primary = this.constant() : this.throwError("not a primary expression", this.peek());
            for (var next, context; next = this.expect("(", "[", "."); )
                "(" === next.text ? (primary = this.functionCall(primary, context),
                context = null) : "[" === next.text ? (context = primary,
                primary = this.objectIndex(primary)) : "." === next.text ? (context = primary,
                primary = this.fieldAccess(primary)) : this.throwError("IMPOSSIBLE");
            return primary
        },
        throwError: function(msg, token) {
            throw $parseMinErr("syntax", "Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].", token.text, msg, token.index + 1, this.text, this.text.substring(token.index))
        },
        peekToken: function() {
            if (0 === this.tokens.length)
                throw $parseMinErr("ueoe", "Unexpected end of expression: {0}", this.text);
            return this.tokens[0]
        },
        peek: function(e1, e2, e3, e4) {
            return this.peekAhead(0, e1, e2, e3, e4)
        },
        peekAhead: function(i, e1, e2, e3, e4) {
            if (this.tokens.length > i) {
                var token = this.tokens[i]
                  , t = token.text;
                if (t === e1 || t === e2 || t === e3 || t === e4 || !e1 && !e2 && !e3 && !e4)
                    return token
            }
            return !1
        },
        expect: function(e1, e2, e3, e4) {
            var token = this.peek(e1, e2, e3, e4);
            return token ? (this.tokens.shift(),
            token) : !1
        },
        consume: function(e1) {
            if (0 === this.tokens.length)
                throw $parseMinErr("ueoe", "Unexpected end of expression: {0}", this.text);
            var token = this.expect(e1);
            return token || this.throwError("is unexpected, expecting [" + e1 + "]", this.peek()),
            token
        },
        unaryFn: function(op, right) {
            var fn = OPERATORS[op];
            return extend(function(self, locals) {
                return fn(self, locals, right)
            }, {
                constant: right.constant,
                inputs: [right]
            })
        },
        binaryFn: function(left, op, right, isBranching) {
            var fn = OPERATORS[op];
            return extend(function(self, locals) {
                return fn(self, locals, left, right)
            }, {
                constant: left.constant && right.constant,
                inputs: !isBranching && [left, right]
            })
        },
        identifier: function() {
            for (var id = this.consume().text; this.peek(".") && this.peekAhead(1).identifier && !this.peekAhead(2, "("); )
                id += this.consume().text + this.consume().text;
            return getterFn(id, this.options, this.text)
        },
        constant: function() {
            var value = this.consume().value;
            return extend(function() {
                return value
            }, {
                constant: !0,
                literal: !0
            })
        },
        statements: function() {
            for (var statements = []; ; )
                if (this.tokens.length > 0 && !this.peek("}", ")", ";", "]") && statements.push(this.filterChain()),
                !this.expect(";"))
                    return 1 === statements.length ? statements[0] : function(self, locals) {
                        for (var value, i = 0, ii = statements.length; ii > i; i++)
                            value = statements[i](self, locals);
                        return value
                    }
        },
        filterChain: function() {
            for (var token, left = this.expression(); token = this.expect("|"); )
                left = this.filter(left);
            return left
        },
        filter: function(inputFn) {
            var argsFn, args, fn = this.$filter(this.consume().text);
            if (this.peek(":"))
                for (argsFn = [],
                args = []; this.expect(":"); )
                    argsFn.push(this.expression());
            var inputs = [inputFn].concat(argsFn || []);
            return extend(function(self, locals) {
                var input = inputFn(self, locals);
                if (args) {
                    args[0] = input;
                    for (var i = argsFn.length; i--; )
                        args[i + 1] = argsFn[i](self, locals);
                    return fn.apply(undefined, args)
                }
                return fn(input)
            }, {
                constant: !fn.$stateful && inputs.every(isConstant),
                inputs: !fn.$stateful && inputs
            })
        },
        expression: function() {
            return this.assignment()
        },
        assignment: function() {
            var right, token, left = this.ternary();
            return (token = this.expect("=")) ? (left.assign || this.throwError("implies assignment but [" + this.text.substring(0, token.index) + "] can not be assigned to", token),
            right = this.ternary(),
            extend(function(scope, locals) {
                return left.assign(scope, right(scope, locals), locals)
            }, {
                inputs: [left, right]
            })) : left
        },
        ternary: function() {
            var middle, token, left = this.logicalOR();
            if ((token = this.expect("?")) && (middle = this.assignment(),
            this.consume(":"))) {
                var right = this.assignment();
                return extend(function(self, locals) {
                    return left(self, locals) ? middle(self, locals) : right(self, locals)
                }, {
                    constant: left.constant && middle.constant && right.constant
                })
            }
            return left
        },
        logicalOR: function() {
            for (var token, left = this.logicalAND(); token = this.expect("||"); )
                left = this.binaryFn(left, token.text, this.logicalAND(), !0);
            return left
        },
        logicalAND: function() {
            for (var token, left = this.equality(); token = this.expect("&&"); )
                left = this.binaryFn(left, token.text, this.equality(), !0);
            return left
        },
        equality: function() {
            for (var token, left = this.relational(); token = this.expect("==", "!=", "===", "!=="); )
                left = this.binaryFn(left, token.text, this.relational());
            return left
        },
        relational: function() {
            for (var token, left = this.additive(); token = this.expect("<", ">", "<=", ">="); )
                left = this.binaryFn(left, token.text, this.additive());
            return left
        },
        additive: function() {
            for (var token, left = this.multiplicative(); token = this.expect("+", "-"); )
                left = this.binaryFn(left, token.text, this.multiplicative());
            return left
        },
        multiplicative: function() {
            for (var token, left = this.unary(); token = this.expect("*", "/", "%"); )
                left = this.binaryFn(left, token.text, this.unary());
            return left
        },
        unary: function() {
            var token;
            return this.expect("+") ? this.primary() : (token = this.expect("-")) ? this.binaryFn(Parser.ZERO, token.text, this.unary()) : (token = this.expect("!")) ? this.unaryFn(token.text, this.unary()) : this.primary()
        },
        fieldAccess: function(object) {
            var getter = this.identifier();
            return extend(function(scope, locals, self) {
                var o = self || object(scope, locals);
                return null == o ? undefined : getter(o)
            }, {
                assign: function(scope, value, locals) {
                    var o = object(scope, locals);
                    return o || object.assign(scope, o = {}, locals),
                    getter.assign(o, value)
                }
            })
        },
        objectIndex: function(obj) {
            var expression = this.text
              , indexFn = this.expression();
            return this.consume("]"),
            extend(function(self, locals) {
                var v, o = obj(self, locals), i = indexFn(self, locals);
                return ensureSafeMemberName(i, expression),
                o ? v = ensureSafeObject(o[i], expression) : undefined
            }, {
                assign: function(self, value, locals) {
                    var key = ensureSafeMemberName(indexFn(self, locals), expression)
                      , o = ensureSafeObject(obj(self, locals), expression);
                    return o || obj.assign(self, o = {}, locals),
                    o[key] = value
                }
            })
        },
        functionCall: function(fnGetter, contextGetter) {
            var argsFn = [];
            if (")" !== this.peekToken().text)
                do
                    argsFn.push(this.expression());
                while (this.expect(","));
            this.consume(")");
            var expressionText = this.text
              , args = argsFn.length ? [] : null;
            return function(scope, locals) {
                var context = contextGetter ? contextGetter(scope, locals) : isDefined(contextGetter) ? undefined : scope
                  , fn = fnGetter(scope, locals, context) || noop;
                if (args)
                    for (var i = argsFn.length; i--; )
                        args[i] = ensureSafeObject(argsFn[i](scope, locals), expressionText);
                ensureSafeObject(context, expressionText),
                ensureSafeFunction(fn, expressionText);
                var v = fn.apply ? fn.apply(context, args) : fn(args[0], args[1], args[2], args[3], args[4]);
                return args && (args.length = 0),
                ensureSafeObject(v, expressionText)
            }
        },
        arrayDeclaration: function() {
            var elementFns = [];
            if ("]" !== this.peekToken().text)
                do {
                    if (this.peek("]"))
                        break;
                    elementFns.push(this.expression())
                } while (this.expect(","));
            return this.consume("]"),
            extend(function(self, locals) {
                for (var array = [], i = 0, ii = elementFns.length; ii > i; i++)
                    array.push(elementFns[i](self, locals));
                return array
            }, {
                literal: !0,
                constant: elementFns.every(isConstant),
                inputs: elementFns
            })
        },
        object: function() {
            var keys = []
              , valueFns = [];
            if ("}" !== this.peekToken().text)
                do {
                    if (this.peek("}"))
                        break;
                    var token = this.consume();
                    token.constant ? keys.push(token.value) : token.identifier ? keys.push(token.text) : this.throwError("invalid key", token),
                    this.consume(":"),
                    valueFns.push(this.expression())
                } while (this.expect(","));
            return this.consume("}"),
            extend(function(self, locals) {
                for (var object = {}, i = 0, ii = valueFns.length; ii > i; i++)
                    object[keys[i]] = valueFns[i](self, locals);
                return object
            }, {
                literal: !0,
                constant: valueFns.every(isConstant),
                inputs: valueFns
            })
        }
    };
    var getterFnCacheDefault = createMap()
      , getterFnCacheExpensive = createMap()
      , objectValueOf = Object.prototype.valueOf
      , $sceMinErr = minErr("$sce")
      , SCE_CONTEXTS = {
        HTML: "html",
        CSS: "css",
        URL: "url",
        RESOURCE_URL: "resourceUrl",
        JS: "js"
    }
      , $compileMinErr = minErr("$compile")
      , urlParsingNode = document.createElement("a")
      , originUrl = urlResolve(window.location.href);
    $FilterProvider.$inject = ["$provide"],
    currencyFilter.$inject = ["$locale"],
    numberFilter.$inject = ["$locale"];
    var DECIMAL_SEP = "."
      , DATE_FORMATS = {
        yyyy: dateGetter("FullYear", 4),
        yy: dateGetter("FullYear", 2, 0, !0),
        y: dateGetter("FullYear", 1),
        MMMM: dateStrGetter("Month"),
        MMM: dateStrGetter("Month", !0),
        MM: dateGetter("Month", 2, 1),
        M: dateGetter("Month", 1, 1),
        dd: dateGetter("Date", 2),
        d: dateGetter("Date", 1),
        HH: dateGetter("Hours", 2),
        H: dateGetter("Hours", 1),
        hh: dateGetter("Hours", 2, -12),
        h: dateGetter("Hours", 1, -12),
        mm: dateGetter("Minutes", 2),
        m: dateGetter("Minutes", 1),
        ss: dateGetter("Seconds", 2),
        s: dateGetter("Seconds", 1),
        sss: dateGetter("Milliseconds", 3),
        EEEE: dateStrGetter("Day"),
        EEE: dateStrGetter("Day", !0),
        a: ampmGetter,
        Z: timeZoneGetter,
        ww: weekGetter(2),
        w: weekGetter(1)
    }
      , DATE_FORMATS_SPLIT = /((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/
      , NUMBER_STRING = /^\-?\d+$/;
    dateFilter.$inject = ["$locale"];
    var lowercaseFilter = valueFn(lowercase)
      , uppercaseFilter = valueFn(uppercase);
    orderByFilter.$inject = ["$parse"];
    var htmlAnchorDirective = valueFn({
        restrict: "E",
        compile: function(element, attr) {
            return attr.href || attr.xlinkHref || attr.name ? void 0 : function(scope, element) {
                if ("a" === element[0].nodeName.toLowerCase()) {
                    var href = "[object SVGAnimatedString]" === toString.call(element.prop("href")) ? "xlink:href" : "href";
                    element.on("click", function(event) {
                        element.attr(href) || event.preventDefault()
                    })
                }
            }
        }
    })
      , ngAttributeAliasDirectives = {};
    forEach(BOOLEAN_ATTR, function(propName, attrName) {
        if ("multiple" != propName) {
            var normalized = directiveNormalize("ng-" + attrName);
            ngAttributeAliasDirectives[normalized] = function() {
                return {
                    restrict: "A",
                    priority: 100,
                    link: function(scope, element, attr) {
                        scope.$watch(attr[normalized], function(value) {
                            attr.$set(attrName, !!value)
                        })
                    }
                }
            }
        }
    }),
    forEach(ALIASED_ATTR, function(htmlAttr, ngAttr) {
        ngAttributeAliasDirectives[ngAttr] = function() {
            return {
                priority: 100,
                link: function(scope, element, attr) {
                    if ("ngPattern" === ngAttr && "/" == attr.ngPattern.charAt(0)) {
                        var match = attr.ngPattern.match(REGEX_STRING_REGEXP);
                        if (match)
                            return void attr.$set("ngPattern", new RegExp(match[1],match[2]))
                    }
                    scope.$watch(attr[ngAttr], function(value) {
                        attr.$set(ngAttr, value)
                    })
                }
            }
        }
    }),
    forEach(["src", "srcset", "href"], function(attrName) {
        var normalized = directiveNormalize("ng-" + attrName);
        ngAttributeAliasDirectives[normalized] = function() {
            return {
                priority: 99,
                link: function(scope, element, attr) {
                    var propName = attrName
                      , name = attrName;
                    "href" === attrName && "[object SVGAnimatedString]" === toString.call(element.prop("href")) && (name = "xlinkHref",
                    attr.$attr[name] = "xlink:href",
                    propName = null),
                    attr.$observe(normalized, function(value) {
                        return value ? (attr.$set(name, value),
                        void (msie && propName && element.prop(propName, attr[name]))) : void ("href" === attrName && attr.$set(name, null))
                    })
                }
            }
        }
    });
    var nullFormCtrl = {
        $addControl: noop,
        $$renameControl: nullFormRenameControl,
        $removeControl: noop,
        $setValidity: noop,
        $setDirty: noop,
        $setPristine: noop,
        $setSubmitted: noop
    }
      , SUBMITTED_CLASS = "ng-submitted";
    FormController.$inject = ["$element", "$attrs", "$scope", "$animate", "$interpolate"];
    var formDirectiveFactory = function(isNgForm) {
        return ["$timeout", function($timeout) {
            var formDirective = {
                name: "form",
                restrict: isNgForm ? "EAC" : "E",
                controller: FormController,
                compile: function(formElement) {
                    return formElement.addClass(PRISTINE_CLASS).addClass(VALID_CLASS),
                    {
                        pre: function(scope, formElement, attr, controller) {
                            if (!("action"in attr)) {
                                var handleFormSubmission = function(event) {
                                    scope.$apply(function() {
                                        controller.$commitViewValue(),
                                        controller.$setSubmitted()
                                    }),
                                    event.preventDefault()
                                };
                                addEventListenerFn(formElement[0], "submit", handleFormSubmission),
                                formElement.on("$destroy", function() {
                                    $timeout(function() {
                                        removeEventListenerFn(formElement[0], "submit", handleFormSubmission)
                                    }, 0, !1)
                                })
                            }
                            var parentFormCtrl = controller.$$parentForm
                              , alias = controller.$name;
                            alias && (setter(scope, null, alias, controller, alias),
                            attr.$observe(attr.name ? "name" : "ngForm", function(newValue) {
                                alias !== newValue && (setter(scope, null, alias, undefined, alias),
                                alias = newValue,
                                setter(scope, null, alias, controller, alias),
                                parentFormCtrl.$$renameControl(controller, alias))
                            })),
                            formElement.on("$destroy", function() {
                                parentFormCtrl.$removeControl(controller),
                                alias && setter(scope, null, alias, undefined, alias),
                                extend(controller, nullFormCtrl)
                            })
                        }
                    }
                }
            };
            return formDirective
        }
        ]
    }
      , formDirective = formDirectiveFactory()
      , ngFormDirective = formDirectiveFactory(!0)
      , ISO_DATE_REGEXP = /\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/
      , URL_REGEXP = /^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/
      , EMAIL_REGEXP = /^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i
      , NUMBER_REGEXP = /^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/
      , DATE_REGEXP = /^(\d{4})-(\d{2})-(\d{2})$/
      , DATETIMELOCAL_REGEXP = /^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/
      , WEEK_REGEXP = /^(\d{4})-W(\d\d)$/
      , MONTH_REGEXP = /^(\d{4})-(\d\d)$/
      , TIME_REGEXP = /^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/
      , inputType = {
        text: textInputType,
        date: createDateInputType("date", DATE_REGEXP, createDateParser(DATE_REGEXP, ["yyyy", "MM", "dd"]), "yyyy-MM-dd"),
        "datetime-local": createDateInputType("datetimelocal", DATETIMELOCAL_REGEXP, createDateParser(DATETIMELOCAL_REGEXP, ["yyyy", "MM", "dd", "HH", "mm", "ss", "sss"]), "yyyy-MM-ddTHH:mm:ss.sss"),
        time: createDateInputType("time", TIME_REGEXP, createDateParser(TIME_REGEXP, ["HH", "mm", "ss", "sss"]), "HH:mm:ss.sss"),
        week: createDateInputType("week", WEEK_REGEXP, weekParser, "yyyy-Www"),
        month: createDateInputType("month", MONTH_REGEXP, createDateParser(MONTH_REGEXP, ["yyyy", "MM"]), "yyyy-MM"),
        number: numberInputType,
        url: urlInputType,
        email: emailInputType,
        radio: radioInputType,
        checkbox: checkboxInputType,
        hidden: noop,
        button: noop,
        submit: noop,
        reset: noop,
        file: noop
    }
      , inputDirective = ["$browser", "$sniffer", "$filter", "$parse", function($browser, $sniffer, $filter, $parse) {
        return {
            restrict: "E",
            require: ["?ngModel"],
            link: {
                pre: function(scope, element, attr, ctrls) {
                    ctrls[0] && (inputType[lowercase(attr.type)] || inputType.text)(scope, element, attr, ctrls[0], $sniffer, $browser, $filter, $parse)
                }
            }
        }
    }
    ]
      , CONSTANT_VALUE_REGEXP = /^(true|false|\d+)$/
      , ngValueDirective = function() {
        return {
            restrict: "A",
            priority: 100,
            compile: function(tpl, tplAttr) {
                return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue) ? function(scope, elm, attr) {
                    attr.$set("value", scope.$eval(attr.ngValue))
                }
                : function(scope, elm, attr) {
                    scope.$watch(attr.ngValue, function(value) {
                        attr.$set("value", value)
                    })
                }
            }
        }
    }
      , ngBindDirective = ["$compile", function($compile) {
        return {
            restrict: "AC",
            compile: function(templateElement) {
                return $compile.$$addBindingClass(templateElement),
                function(scope, element, attr) {
                    $compile.$$addBindingInfo(element, attr.ngBind),
                    element = element[0],
                    scope.$watch(attr.ngBind, function(value) {
                        element.textContent = value === undefined ? "" : value
                    })
                }
            }
        }
    }
    ]
      , ngBindTemplateDirective = ["$interpolate", "$compile", function($interpolate, $compile) {
        return {
            compile: function(templateElement) {
                return $compile.$$addBindingClass(templateElement),
                function(scope, element, attr) {
                    var interpolateFn = $interpolate(element.attr(attr.$attr.ngBindTemplate));
                    $compile.$$addBindingInfo(element, interpolateFn.expressions),
                    element = element[0],
                    attr.$observe("ngBindTemplate", function(value) {
                        element.textContent = value === undefined ? "" : value
                    })
                }
            }
        }
    }
    ]
      , ngBindHtmlDirective = ["$sce", "$parse", "$compile", function($sce, $parse, $compile) {
        return {
            restrict: "A",
            compile: function(tElement, tAttrs) {
                var ngBindHtmlGetter = $parse(tAttrs.ngBindHtml)
                  , ngBindHtmlWatch = $parse(tAttrs.ngBindHtml, function(value) {
                    return (value || "").toString()
                });
                return $compile.$$addBindingClass(tElement),
                function(scope, element, attr) {
                    $compile.$$addBindingInfo(element, attr.ngBindHtml),
                    scope.$watch(ngBindHtmlWatch, function() {
                        element.html($sce.getTrustedHtml(ngBindHtmlGetter(scope)) || "")
                    })
                }
            }
        }
    }
    ]
      , ngChangeDirective = valueFn({
        restrict: "A",
        require: "ngModel",
        link: function(scope, element, attr, ctrl) {
            ctrl.$viewChangeListeners.push(function() {
                scope.$eval(attr.ngChange)
            })
        }
    })
      , ngClassDirective = classDirective("", !0)
      , ngClassOddDirective = classDirective("Odd", 0)
      , ngClassEvenDirective = classDirective("Even", 1)
      , ngCloakDirective = ngDirective({
        compile: function(element, attr) {
            attr.$set("ngCloak", undefined),
            element.removeClass("ng-cloak")
        }
    })
      , ngControllerDirective = [function() {
        return {
            restrict: "A",
            scope: !0,
            controller: "@",
            priority: 500
        }
    }
    ]
      , ngEventDirectives = {}
      , forceAsyncEvents = {
        blur: !0,
        focus: !0
    };
    forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "), function(eventName) {
        var directiveName = directiveNormalize("ng-" + eventName);
        ngEventDirectives[directiveName] = ["$parse", "$rootScope", function($parse, $rootScope) {
            return {
                restrict: "A",
                compile: function($element, attr) {
                    var fn = $parse(attr[directiveName], null, !0);
                    return function(scope, element) {
                        element.on(eventName, function(event) {
                            var callback = function() {
                                fn(scope, {
                                    $event: event
                                })
                            };
                            forceAsyncEvents[eventName] && $rootScope.$$phase ? scope.$evalAsync(callback) : scope.$apply(callback)
                        })
                    }
                }
            }
        }
        ]
    });
    var ngIfDirective = ["$animate", function($animate) {
        return {
            multiElement: !0,
            transclude: "element",
            priority: 600,
            terminal: !0,
            restrict: "A",
            $$tlb: !0,
            link: function($scope, $element, $attr, ctrl, $transclude) {
                var block, childScope, previousElements;
                $scope.$watch($attr.ngIf, function(value) {
                    value ? childScope || $transclude(function(clone, newScope) {
                        childScope = newScope,
                        clone[clone.length++] = document.createComment(" end ngIf: " + $attr.ngIf + " "),
                        block = {
                            clone: clone
                        },
                        $animate.enter(clone, $element.parent(), $element)
                    }) : (previousElements && (previousElements.remove(),
                    previousElements = null),
                    childScope && (childScope.$destroy(),
                    childScope = null),
                    block && (previousElements = getBlockNodes(block.clone),
                    $animate.leave(previousElements).then(function() {
                        previousElements = null
                    }),
                    block = null))
                })
            }
        }
    }
    ]
      , ngIncludeDirective = ["$templateRequest", "$anchorScroll", "$animate", "$sce", function($templateRequest, $anchorScroll, $animate, $sce) {
        return {
            restrict: "ECA",
            priority: 400,
            terminal: !0,
            transclude: "element",
            controller: angular.noop,
            compile: function(element, attr) {
                var srcExp = attr.ngInclude || attr.src
                  , onloadExp = attr.onload || ""
                  , autoScrollExp = attr.autoscroll;
                return function(scope, $element, $attr, ctrl, $transclude) {
                    var currentScope, previousElement, currentElement, changeCounter = 0, cleanupLastIncludeContent = function() {
                        previousElement && (previousElement.remove(),
                        previousElement = null),
                        currentScope && (currentScope.$destroy(),
                        currentScope = null),
                        currentElement && ($animate.leave(currentElement).then(function() {
                            previousElement = null
                        }),
                        previousElement = currentElement,
                        currentElement = null)
                    };
                    scope.$watch($sce.parseAsResourceUrl(srcExp), function(src) {
                        var afterAnimation = function() {
                            !isDefined(autoScrollExp) || autoScrollExp && !scope.$eval(autoScrollExp) || $anchorScroll()
                        }
                          , thisChangeId = ++changeCounter;
                        src ? ($templateRequest(src, !0).then(function(response) {
                            if (thisChangeId === changeCounter) {
                                var newScope = scope.$new();
                                ctrl.template = response;
                                var clone = $transclude(newScope, function(clone) {
                                    cleanupLastIncludeContent(),
                                    $animate.enter(clone, null, $element).then(afterAnimation)
                                });
                                currentScope = newScope,
                                currentElement = clone,
                                currentScope.$emit("$includeContentLoaded", src),
                                scope.$eval(onloadExp)
                            }
                        }, function() {
                            thisChangeId === changeCounter && (cleanupLastIncludeContent(),
                            scope.$emit("$includeContentError", src))
                        }),
                        scope.$emit("$includeContentRequested", src)) : (cleanupLastIncludeContent(),
                        ctrl.template = null)
                    })
                }
            }
        }
    }
    ]
      , ngIncludeFillContentDirective = ["$compile", function($compile) {
        return {
            restrict: "ECA",
            priority: -400,
            require: "ngInclude",
            link: function(scope, $element, $attr, ctrl) {
                return /SVG/.test($element[0].toString()) ? ($element.empty(),
                void $compile(jqLiteBuildFragment(ctrl.template, document).childNodes)(scope, function(clone) {
                    $element.append(clone)
                }, {
                    futureParentElement: $element
                })) : ($element.html(ctrl.template),
                void $compile($element.contents())(scope))
            }
        }
    }
    ]
      , ngInitDirective = ngDirective({
        priority: 450,
        compile: function() {
            return {
                pre: function(scope, element, attrs) {
                    scope.$eval(attrs.ngInit)
                }
            }
        }
    })
      , ngListDirective = function() {
        return {
            restrict: "A",
            priority: 100,
            require: "ngModel",
            link: function(scope, element, attr, ctrl) {
                var ngList = element.attr(attr.$attr.ngList) || ", "
                  , trimValues = "false" !== attr.ngTrim
                  , separator = trimValues ? trim(ngList) : ngList
                  , parse = function(viewValue) {
                    if (!isUndefined(viewValue)) {
                        var list = [];
                        return viewValue && forEach(viewValue.split(separator), function(value) {
                            value && list.push(trimValues ? trim(value) : value)
                        }),
                        list
                    }
                };
                ctrl.$parsers.push(parse),
                ctrl.$formatters.push(function(value) {
                    return isArray(value) ? value.join(ngList) : undefined
                }),
                ctrl.$isEmpty = function(value) {
                    return !value || !value.length
                }
            }
        }
    }
      , VALID_CLASS = "ng-valid"
      , INVALID_CLASS = "ng-invalid"
      , PRISTINE_CLASS = "ng-pristine"
      , DIRTY_CLASS = "ng-dirty"
      , UNTOUCHED_CLASS = "ng-untouched"
      , TOUCHED_CLASS = "ng-touched"
      , PENDING_CLASS = "ng-pending"
      , $ngModelMinErr = new minErr("ngModel")
      , NgModelController = ["$scope", "$exceptionHandler", "$attrs", "$element", "$parse", "$animate", "$timeout", "$rootScope", "$q", "$interpolate", function($scope, $exceptionHandler, $attr, $element, $parse, $animate, $timeout, $rootScope, $q, $interpolate) {
        this.$viewValue = Number.NaN,
        this.$modelValue = Number.NaN,
        this.$$rawModelValue = undefined,
        this.$validators = {},
        this.$asyncValidators = {},
        this.$parsers = [],
        this.$formatters = [],
        this.$viewChangeListeners = [],
        this.$untouched = !0,
        this.$touched = !1,
        this.$pristine = !0,
        this.$dirty = !1,
        this.$valid = !0,
        this.$invalid = !1,
        this.$error = {},
        this.$$success = {},
        this.$pending = undefined,
        this.$name = $interpolate($attr.name || "", !1)($scope);
        var parserValid, parsedNgModel = $parse($attr.ngModel), parsedNgModelAssign = parsedNgModel.assign, ngModelGet = parsedNgModel, ngModelSet = parsedNgModelAssign, pendingDebounce = null, ctrl = this;
        this.$$setOptions = function(options) {
            if (ctrl.$options = options,
            options && options.getterSetter) {
                var invokeModelGetter = $parse($attr.ngModel + "()")
                  , invokeModelSetter = $parse($attr.ngModel + "($$$p)");
                ngModelGet = function($scope) {
                    var modelValue = parsedNgModel($scope);
                    return isFunction(modelValue) && (modelValue = invokeModelGetter($scope)),
                    modelValue
                }
                ,
                ngModelSet = function($scope) {
                    isFunction(parsedNgModel($scope)) ? invokeModelSetter($scope, {
                        $$$p: ctrl.$modelValue
                    }) : parsedNgModelAssign($scope, ctrl.$modelValue)
                }
            } else if (!parsedNgModel.assign)
                throw $ngModelMinErr("nonassign", "Expression '{0}' is non-assignable. Element: {1}", $attr.ngModel, startingTag($element))
        }
        ,
        this.$render = noop,
        this.$isEmpty = function(value) {
            return isUndefined(value) || "" === value || null === value || value !== value
        }
        ;
        var parentForm = $element.inheritedData("$formController") || nullFormCtrl
          , currentValidationRunId = 0;
        addSetValidityMethod({
            ctrl: this,
            $element: $element,
            set: function(object, property) {
                object[property] = !0
            },
            unset: function(object, property) {
                delete object[property]
            },
            parentForm: parentForm,
            $animate: $animate
        }),
        this.$setPristine = function() {
            ctrl.$dirty = !1,
            ctrl.$pristine = !0,
            $animate.removeClass($element, DIRTY_CLASS),
            $animate.addClass($element, PRISTINE_CLASS)
        }
        ,
        this.$setDirty = function() {
            ctrl.$dirty = !0,
            ctrl.$pristine = !1,
            $animate.removeClass($element, PRISTINE_CLASS),
            $animate.addClass($element, DIRTY_CLASS),
            parentForm.$setDirty()
        }
        ,
        this.$setUntouched = function() {
            ctrl.$touched = !1,
            ctrl.$untouched = !0,
            $animate.setClass($element, UNTOUCHED_CLASS, TOUCHED_CLASS)
        }
        ,
        this.$setTouched = function() {
            ctrl.$touched = !0,
            ctrl.$untouched = !1,
            $animate.setClass($element, TOUCHED_CLASS, UNTOUCHED_CLASS)
        }
        ,
        this.$rollbackViewValue = function() {
            $timeout.cancel(pendingDebounce),
            ctrl.$viewValue = ctrl.$$lastCommittedViewValue,
            ctrl.$render()
        }
        ,
        this.$validate = function() {
            if (!isNumber(ctrl.$modelValue) || !isNaN(ctrl.$modelValue)) {
                var viewValue = ctrl.$$lastCommittedViewValue
                  , modelValue = ctrl.$$rawModelValue
                  , prevValid = ctrl.$valid
                  , prevModelValue = ctrl.$modelValue
                  , allowInvalid = ctrl.$options && ctrl.$options.allowInvalid;
                ctrl.$$runValidators(modelValue, viewValue, function(allValid) {
                    allowInvalid || prevValid === allValid || (ctrl.$modelValue = allValid ? modelValue : undefined,
                    ctrl.$modelValue !== prevModelValue && ctrl.$$writeModelToScope())
                })
            }
        }
        ,
        this.$$runValidators = function(modelValue, viewValue, doneCallback) {
            function processParseErrors() {
                var errorKey = ctrl.$$parserName || "parse";
                return parserValid !== undefined ? (parserValid || (forEach(ctrl.$validators, function(v, name) {
                    setValidity(name, null)
                }),
                forEach(ctrl.$asyncValidators, function(v, name) {
                    setValidity(name, null)
                })),
                setValidity(errorKey, parserValid),
                parserValid) : (setValidity(errorKey, null),
                !0)
            }
            function processSyncValidators() {
                var syncValidatorsValid = !0;
                return forEach(ctrl.$validators, function(validator, name) {
                    var result = validator(modelValue, viewValue);
                    syncValidatorsValid = syncValidatorsValid && result,
                    setValidity(name, result)
                }),
                syncValidatorsValid ? !0 : (forEach(ctrl.$asyncValidators, function(v, name) {
                    setValidity(name, null)
                }),
                !1)
            }
            function processAsyncValidators() {
                var validatorPromises = []
                  , allValid = !0;
                forEach(ctrl.$asyncValidators, function(validator, name) {
                    var promise = validator(modelValue, viewValue);
                    if (!isPromiseLike(promise))
                        throw $ngModelMinErr("$asyncValidators", "Expected asynchronous validator to return a promise but got '{0}' instead.", promise);
                    setValidity(name, undefined),
                    validatorPromises.push(promise.then(function() {
                        setValidity(name, !0)
                    }, function() {
                        allValid = !1,
                        setValidity(name, !1)
                    }))
                }),
                validatorPromises.length ? $q.all(validatorPromises).then(function() {
                    validationDone(allValid)
                }, noop) : validationDone(!0)
            }
            function setValidity(name, isValid) {
                localValidationRunId === currentValidationRunId && ctrl.$setValidity(name, isValid)
            }
            function validationDone(allValid) {
                localValidationRunId === currentValidationRunId && doneCallback(allValid)
            }
            currentValidationRunId++;
            var localValidationRunId = currentValidationRunId;
            return processParseErrors() && processSyncValidators() ? void processAsyncValidators() : void validationDone(!1)
        }
        ,
        this.$commitViewValue = function() {
            var viewValue = ctrl.$viewValue;
            $timeout.cancel(pendingDebounce),
            (ctrl.$$lastCommittedViewValue !== viewValue || "" === viewValue && ctrl.$$hasNativeValidators) && (ctrl.$$lastCommittedViewValue = viewValue,
            ctrl.$pristine && this.$setDirty(),
            this.$$parseAndValidate())
        }
        ,
        this.$$parseAndValidate = function() {
            function writeToModelIfNeeded() {
                ctrl.$modelValue !== prevModelValue && ctrl.$$writeModelToScope()
            }
            var viewValue = ctrl.$$lastCommittedViewValue
              , modelValue = viewValue;
            if (parserValid = isUndefined(modelValue) ? undefined : !0)
                for (var i = 0; i < ctrl.$parsers.length; i++)
                    if (modelValue = ctrl.$parsers[i](modelValue),
                    isUndefined(modelValue)) {
                        parserValid = !1;
                        break
                    }
            isNumber(ctrl.$modelValue) && isNaN(ctrl.$modelValue) && (ctrl.$modelValue = ngModelGet($scope));
            var prevModelValue = ctrl.$modelValue
              , allowInvalid = ctrl.$options && ctrl.$options.allowInvalid;
            ctrl.$$rawModelValue = modelValue,
            allowInvalid && (ctrl.$modelValue = modelValue,
            writeToModelIfNeeded()),
            ctrl.$$runValidators(modelValue, ctrl.$$lastCommittedViewValue, function(allValid) {
                allowInvalid || (ctrl.$modelValue = allValid ? modelValue : undefined,
                writeToModelIfNeeded())
            })
        }
        ,
        this.$$writeModelToScope = function() {
            ngModelSet($scope, ctrl.$modelValue),
            forEach(ctrl.$viewChangeListeners, function(listener) {
                try {
                    listener()
                } catch (e) {
                    $exceptionHandler(e)
                }
            })
        }
        ,
        this.$setViewValue = function(value, trigger) {
            ctrl.$viewValue = value,
            ctrl.$options && !ctrl.$options.updateOnDefault || ctrl.$$debounceViewValueCommit(trigger)
        }
        ,
        this.$$debounceViewValueCommit = function(trigger) {
            var debounce, debounceDelay = 0, options = ctrl.$options;
            options && isDefined(options.debounce) && (debounce = options.debounce,
            isNumber(debounce) ? debounceDelay = debounce : isNumber(debounce[trigger]) ? debounceDelay = debounce[trigger] : isNumber(debounce["default"]) && (debounceDelay = debounce["default"])),
            $timeout.cancel(pendingDebounce),
            debounceDelay ? pendingDebounce = $timeout(function() {
                ctrl.$commitViewValue()
            }, debounceDelay) : $rootScope.$$phase ? ctrl.$commitViewValue() : $scope.$apply(function() {
                ctrl.$commitViewValue()
            })
        }
        ,
        $scope.$watch(function() {
            var modelValue = ngModelGet($scope);
            if (modelValue !== ctrl.$modelValue) {
                ctrl.$modelValue = ctrl.$$rawModelValue = modelValue,
                parserValid = undefined;
                for (var formatters = ctrl.$formatters, idx = formatters.length, viewValue = modelValue; idx--; )
                    viewValue = formatters[idx](viewValue);
                ctrl.$viewValue !== viewValue && (ctrl.$viewValue = ctrl.$$lastCommittedViewValue = viewValue,
                ctrl.$render(),
                ctrl.$$runValidators(modelValue, viewValue, noop))
            }
            return modelValue
        })
    }
    ]
      , ngModelDirective = ["$rootScope", function($rootScope) {
        return {
            restrict: "A",
            require: ["ngModel", "^?form", "^?ngModelOptions"],
            controller: NgModelController,
            priority: 1,
            compile: function(element) {
                return element.addClass(PRISTINE_CLASS).addClass(UNTOUCHED_CLASS).addClass(VALID_CLASS),
                {
                    pre: function(scope, element, attr, ctrls) {
                        var modelCtrl = ctrls[0]
                          , formCtrl = ctrls[1] || nullFormCtrl;
                        modelCtrl.$$setOptions(ctrls[2] && ctrls[2].$options),
                        formCtrl.$addControl(modelCtrl),
                        attr.$observe("name", function(newValue) {
                            modelCtrl.$name !== newValue && formCtrl.$$renameControl(modelCtrl, newValue)
                        }),
                        scope.$on("$destroy", function() {
                            formCtrl.$removeControl(modelCtrl)
                        })
                    },
                    post: function(scope, element, attr, ctrls) {
                        var modelCtrl = ctrls[0];
                        modelCtrl.$options && modelCtrl.$options.updateOn && element.on(modelCtrl.$options.updateOn, function(ev) {
                            modelCtrl.$$debounceViewValueCommit(ev && ev.type)
                        }),
                        element.on("blur", function() {
                            modelCtrl.$touched || ($rootScope.$$phase ? scope.$evalAsync(modelCtrl.$setTouched) : scope.$apply(modelCtrl.$setTouched))
                        })
                    }
                }
            }
        }
    }
    ]
      , DEFAULT_REGEXP = /(\s+|^)default(\s+|$)/
      , ngModelOptionsDirective = function() {
        return {
            restrict: "A",
            controller: ["$scope", "$attrs", function($scope, $attrs) {
                var that = this;
                this.$options = $scope.$eval($attrs.ngModelOptions),
                this.$options.updateOn !== undefined ? (this.$options.updateOnDefault = !1,
                this.$options.updateOn = trim(this.$options.updateOn.replace(DEFAULT_REGEXP, function() {
                    return that.$options.updateOnDefault = !0,
                    " "
                }))) : this.$options.updateOnDefault = !0
            }
            ]
        }
    }
      , ngNonBindableDirective = ngDirective({
        terminal: !0,
        priority: 1e3
    })
      , ngPluralizeDirective = ["$locale", "$interpolate", function($locale, $interpolate) {
        var BRACE = /{}/g
          , IS_WHEN = /^when(Minus)?(.+)$/;
        return {
            restrict: "EA",
            link: function(scope, element, attr) {
                function updateElementText(newText) {
                    element.text(newText || "")
                }
                var lastCount, numberExp = attr.count, whenExp = attr.$attr.when && element.attr(attr.$attr.when), offset = attr.offset || 0, whens = scope.$eval(whenExp) || {}, whensExpFns = {}, startSymbol = $interpolate.startSymbol(), endSymbol = $interpolate.endSymbol(), braceReplacement = startSymbol + numberExp + "-" + offset + endSymbol, watchRemover = angular.noop;
                forEach(attr, function(expression, attributeName) {
                    var tmpMatch = IS_WHEN.exec(attributeName);
                    if (tmpMatch) {
                        var whenKey = (tmpMatch[1] ? "-" : "") + lowercase(tmpMatch[2]);
                        whens[whenKey] = element.attr(attr.$attr[attributeName])
                    }
                }),
                forEach(whens, function(expression, key) {
                    whensExpFns[key] = $interpolate(expression.replace(BRACE, braceReplacement))
                }),
                scope.$watch(numberExp, function(newVal) {
                    var count = parseFloat(newVal)
                      , countIsNaN = isNaN(count);
                    countIsNaN || count in whens || (count = $locale.pluralCat(count - offset)),
                    count === lastCount || countIsNaN && isNaN(lastCount) || (watchRemover(),
                    watchRemover = scope.$watch(whensExpFns[count], updateElementText),
                    lastCount = count)
                })
            }
        }
    }
    ]
      , ngRepeatDirective = ["$parse", "$animate", function($parse, $animate) {
        var NG_REMOVED = "$$NG_REMOVED"
          , ngRepeatMinErr = minErr("ngRepeat")
          , updateScope = function(scope, index, valueIdentifier, value, keyIdentifier, key, arrayLength) {
            scope[valueIdentifier] = value,
            keyIdentifier && (scope[keyIdentifier] = key),
            scope.$index = index,
            scope.$first = 0 === index,
            scope.$last = index === arrayLength - 1,
            scope.$middle = !(scope.$first || scope.$last),
            scope.$odd = !(scope.$even = 0 === (1 & index))
        }
          , getBlockStart = function(block) {
            return block.clone[0]
        }
          , getBlockEnd = function(block) {
            return block.clone[block.clone.length - 1]
        };
        return {
            restrict: "A",
            multiElement: !0,
            transclude: "element",
            priority: 1e3,
            terminal: !0,
            $$tlb: !0,
            compile: function($element, $attr) {
                var expression = $attr.ngRepeat
                  , ngRepeatEndComment = document.createComment(" end ngRepeat: " + expression + " ")
                  , match = expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);
                if (!match)
                    throw ngRepeatMinErr("iexp", "Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.", expression);
                var lhs = match[1]
                  , rhs = match[2]
                  , aliasAs = match[3]
                  , trackByExp = match[4];
                if (match = lhs.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),
                !match)
                    throw ngRepeatMinErr("iidexp", "'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.", lhs);
                var valueIdentifier = match[3] || match[1]
                  , keyIdentifier = match[2];
                if (aliasAs && (!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(aliasAs) || /^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(aliasAs)))
                    throw ngRepeatMinErr("badident", "alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.", aliasAs);
                var trackByExpGetter, trackByIdExpFn, trackByIdArrayFn, trackByIdObjFn, hashFnLocals = {
                    $id: hashKey
                };
                return trackByExp ? trackByExpGetter = $parse(trackByExp) : (trackByIdArrayFn = function(key, value) {
                    return hashKey(value)
                }
                ,
                trackByIdObjFn = function(key) {
                    return key
                }
                ),
                function($scope, $element, $attr, ctrl, $transclude) {
                    trackByExpGetter && (trackByIdExpFn = function(key, value, index) {
                        return keyIdentifier && (hashFnLocals[keyIdentifier] = key),
                        hashFnLocals[valueIdentifier] = value,
                        hashFnLocals.$index = index,
                        trackByExpGetter($scope, hashFnLocals)
                    }
                    );
                    var lastBlockMap = createMap();
                    $scope.$watchCollection(rhs, function(collection) {
                        var index, length, nextNode, collectionLength, key, value, trackById, trackByIdFn, collectionKeys, block, nextBlockOrder, elementsToRemove, previousNode = $element[0], nextBlockMap = createMap();
                        if (aliasAs && ($scope[aliasAs] = collection),
                        isArrayLike(collection))
                            collectionKeys = collection,
                            trackByIdFn = trackByIdExpFn || trackByIdArrayFn;
                        else {
                            trackByIdFn = trackByIdExpFn || trackByIdObjFn,
                            collectionKeys = [];
                            for (var itemKey in collection)
                                collection.hasOwnProperty(itemKey) && "$" != itemKey.charAt(0) && collectionKeys.push(itemKey);
                            collectionKeys.sort()
                        }
                        for (collectionLength = collectionKeys.length,
                        nextBlockOrder = new Array(collectionLength),
                        index = 0; collectionLength > index; index++)
                            if (key = collection === collectionKeys ? index : collectionKeys[index],
                            value = collection[key],
                            trackById = trackByIdFn(key, value, index),
                            lastBlockMap[trackById])
                                block = lastBlockMap[trackById],
                                delete lastBlockMap[trackById],
                                nextBlockMap[trackById] = block,
                                nextBlockOrder[index] = block;
                            else {
                                if (nextBlockMap[trackById])
                                    throw forEach(nextBlockOrder, function(block) {
                                        block && block.scope && (lastBlockMap[block.id] = block)
                                    }),
                                    ngRepeatMinErr("dupes", "Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}", expression, trackById, value);
                                nextBlockOrder[index] = {
                                    id: trackById,
                                    scope: undefined,
                                    clone: undefined
                                },
                                nextBlockMap[trackById] = !0
                            }
                        for (var blockKey in lastBlockMap) {
                            if (block = lastBlockMap[blockKey],
                            elementsToRemove = getBlockNodes(block.clone),
                            $animate.leave(elementsToRemove),
                            elementsToRemove[0].parentNode)
                                for (index = 0,
                                length = elementsToRemove.length; length > index; index++)
                                    elementsToRemove[index][NG_REMOVED] = !0;
                            block.scope.$destroy()
                        }
                        for (index = 0; collectionLength > index; index++)
                            if (key = collection === collectionKeys ? index : collectionKeys[index],
                            value = collection[key],
                            block = nextBlockOrder[index],
                            block.scope) {
                                nextNode = previousNode;
                                do
                                    nextNode = nextNode.nextSibling;
                                while (nextNode && nextNode[NG_REMOVED]);
                                getBlockStart(block) != nextNode && $animate.move(getBlockNodes(block.clone), null, jqLite(previousNode)),
                                previousNode = getBlockEnd(block),
                                updateScope(block.scope, index, valueIdentifier, value, keyIdentifier, key, collectionLength)
                            } else
                                $transclude(function(clone, scope) {
                                    block.scope = scope;
                                    var endNode = ngRepeatEndComment.cloneNode(!1);
                                    clone[clone.length++] = endNode,
                                    $animate.enter(clone, null, jqLite(previousNode)),
                                    previousNode = endNode,
                                    block.clone = clone,
                                    nextBlockMap[block.id] = block,
                                    updateScope(block.scope, index, valueIdentifier, value, keyIdentifier, key, collectionLength)
                                });
                        lastBlockMap = nextBlockMap
                    })
                }
            }
        }
    }
    ]
      , NG_HIDE_CLASS = "ng-hide"
      , NG_HIDE_IN_PROGRESS_CLASS = "ng-hide-animate"
      , ngShowDirective = ["$animate", function($animate) {
        return {
            restrict: "A",
            multiElement: !0,
            link: function(scope, element, attr) {
                scope.$watch(attr.ngShow, function(value) {
                    $animate[value ? "removeClass" : "addClass"](element, NG_HIDE_CLASS, {
                        tempClasses: NG_HIDE_IN_PROGRESS_CLASS
                    })
                })
            }
        }
    }
    ]
      , ngHideDirective = ["$animate", function($animate) {
        return {
            restrict: "A",
            multiElement: !0,
            link: function(scope, element, attr) {
                scope.$watch(attr.ngHide, function(value) {
                    $animate[value ? "addClass" : "removeClass"](element, NG_HIDE_CLASS, {
                        tempClasses: NG_HIDE_IN_PROGRESS_CLASS
                    })
                })
            }
        }
    }
    ]
      , ngStyleDirective = ngDirective(function(scope, element, attr) {
        scope.$watchCollection(attr.ngStyle, function(newStyles, oldStyles) {
            oldStyles && newStyles !== oldStyles && forEach(oldStyles, function(val, style) {
                element.css(style, "")
            }),
            newStyles && element.css(newStyles)
        })
    })
      , ngSwitchDirective = ["$animate", function($animate) {
        return {
            restrict: "EA",
            require: "ngSwitch",
            controller: ["$scope", function() {
                this.cases = {}
            }
            ],
            link: function(scope, element, attr, ngSwitchController) {
                var watchExpr = attr.ngSwitch || attr.on
                  , selectedTranscludes = []
                  , selectedElements = []
                  , previousLeaveAnimations = []
                  , selectedScopes = []
                  , spliceFactory = function(array, index) {
                    return function() {
                        array.splice(index, 1)
                    }
                };
                scope.$watch(watchExpr, function(value) {
                    var i, ii;
                    for (i = 0,
                    ii = previousLeaveAnimations.length; ii > i; ++i)
                        $animate.cancel(previousLeaveAnimations[i]);
                    for (previousLeaveAnimations.length = 0,
                    i = 0,
                    ii = selectedScopes.length; ii > i; ++i) {
                        var selected = getBlockNodes(selectedElements[i].clone);
                        selectedScopes[i].$destroy();
                        var promise = previousLeaveAnimations[i] = $animate.leave(selected);
                        promise.then(spliceFactory(previousLeaveAnimations, i))
                    }
                    selectedElements.length = 0,
                    selectedScopes.length = 0,
                    (selectedTranscludes = ngSwitchController.cases["!" + value] || ngSwitchController.cases["?"]) && forEach(selectedTranscludes, function(selectedTransclude) {
                        selectedTransclude.transclude(function(caseElement, selectedScope) {
                            selectedScopes.push(selectedScope);
                            var anchor = selectedTransclude.element;
                            caseElement[caseElement.length++] = document.createComment(" end ngSwitchWhen: ");
                            var block = {
                                clone: caseElement
                            };
                            selectedElements.push(block),
                            $animate.enter(caseElement, anchor.parent(), anchor)
                        })
                    })
                })
            }
        }
    }
    ]
      , ngSwitchWhenDirective = ngDirective({
        transclude: "element",
        priority: 1200,
        require: "^ngSwitch",
        multiElement: !0,
        link: function(scope, element, attrs, ctrl, $transclude) {
            ctrl.cases["!" + attrs.ngSwitchWhen] = ctrl.cases["!" + attrs.ngSwitchWhen] || [],
            ctrl.cases["!" + attrs.ngSwitchWhen].push({
                transclude: $transclude,
                element: element
            })
        }
    })
      , ngSwitchDefaultDirective = ngDirective({
        transclude: "element",
        priority: 1200,
        require: "^ngSwitch",
        multiElement: !0,
        link: function(scope, element, attr, ctrl, $transclude) {
            ctrl.cases["?"] = ctrl.cases["?"] || [],
            ctrl.cases["?"].push({
                transclude: $transclude,
                element: element
            })
        }
    })
      , ngTranscludeDirective = ngDirective({
        restrict: "EAC",
        link: function($scope, $element, $attrs, controller, $transclude) {
            if (!$transclude)
                throw minErr("ngTransclude")("orphan", "Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}", startingTag($element));
            $transclude(function(clone) {
                $element.empty(),
                $element.append(clone)
            })
        }
    })
      , scriptDirective = ["$templateCache", function($templateCache) {
        return {
            restrict: "E",
            terminal: !0,
            compile: function(element, attr) {
                if ("text/ng-template" == attr.type) {
                    var templateUrl = attr.id
                      , text = element[0].text;
                    $templateCache.put(templateUrl, text)
                }
            }
        }
    }
    ]
      , ngOptionsMinErr = minErr("ngOptions")
      , ngOptionsDirective = valueFn({
        restrict: "A",
        terminal: !0
    })
      , selectDirective = ["$compile", "$parse", function($compile, $parse) {
        var NG_OPTIONS_REGEXP = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/
          , nullModelCtrl = {
            $setViewValue: noop
        };
        return {
            restrict: "E",
            require: ["select", "?ngModel"],
            controller: ["$element", "$scope", "$attrs", function($element, $scope, $attrs) {
                var nullOption, unknownOption, self = this, optionsMap = {}, ngModelCtrl = nullModelCtrl;
                self.databound = $attrs.ngModel,
                self.init = function(ngModelCtrl_, nullOption_, unknownOption_) {
                    ngModelCtrl = ngModelCtrl_,
                    nullOption = nullOption_,
                    unknownOption = unknownOption_
                }
                ,
                self.addOption = function(value, element) {
                    assertNotHasOwnProperty(value, '"option value"'),
                    optionsMap[value] = !0,
                    ngModelCtrl.$viewValue == value && ($element.val(value),
                    unknownOption.parent() && unknownOption.remove()),
                    element && element[0].hasAttribute("selected") && (element[0].selected = !0)
                }
                ,
                self.removeOption = function(value) {
                    this.hasOption(value) && (delete optionsMap[value],
                    ngModelCtrl.$viewValue === value && this.renderUnknownOption(value))
                }
                ,
                self.renderUnknownOption = function(val) {
                    var unknownVal = "? " + hashKey(val) + " ?";
                    unknownOption.val(unknownVal),
                    $element.prepend(unknownOption),
                    $element.val(unknownVal),
                    unknownOption.prop("selected", !0)
                }
                ,
                self.hasOption = function(value) {
                    return optionsMap.hasOwnProperty(value)
                }
                ,
                $scope.$on("$destroy", function() {
                    self.renderUnknownOption = noop
                })
            }
            ],
            link: function(scope, element, attr, ctrls) {
                function setupAsSingle(scope, selectElement, ngModelCtrl, selectCtrl) {
                    ngModelCtrl.$render = function() {
                        var viewValue = ngModelCtrl.$viewValue;
                        selectCtrl.hasOption(viewValue) ? (unknownOption.parent() && unknownOption.remove(),
                        selectElement.val(viewValue),
                        "" === viewValue && emptyOption.prop("selected", !0)) : isUndefined(viewValue) && emptyOption ? selectElement.val("") : selectCtrl.renderUnknownOption(viewValue)
                    }
                    ,
                    selectElement.on("change", function() {
                        scope.$apply(function() {
                            unknownOption.parent() && unknownOption.remove(),
                            ngModelCtrl.$setViewValue(selectElement.val())
                        })
                    })
                }
                function setupAsMultiple(scope, selectElement, ctrl) {
                    var lastView;
                    ctrl.$render = function() {
                        var items = new HashMap(ctrl.$viewValue);
                        forEach(selectElement.find("option"), function(option) {
                            option.selected = isDefined(items.get(option.value))
                        })
                    }
                    ,
                    scope.$watch(function() {
                        equals(lastView, ctrl.$viewValue) || (lastView = shallowCopy(ctrl.$viewValue),
                        ctrl.$render())
                    }),
                    selectElement.on("change", function() {
                        scope.$apply(function() {
                            var array = [];
                            forEach(selectElement.find("option"), function(option) {
                                option.selected && array.push(option.value)
                            }),
                            ctrl.$setViewValue(array)
                        })
                    })
                }
                function setupAsOptions(scope, selectElement, ctrl) {
                    function callExpression(exprFn, key, value) {
                        return locals[valueName] = value,
                        keyName && (locals[keyName] = key),
                        exprFn(scope, locals)
                    }
                    function selectionChanged() {
                        scope.$apply(function() {
                            var viewValue, collection = valuesFn(scope) || [];
                            if (multiple)
                                viewValue = [],
                                forEach(selectElement.val(), function(selectedKey) {
                                    selectedKey = trackFn ? trackKeysCache[selectedKey] : selectedKey,
                                    viewValue.push(getViewValue(selectedKey, collection[selectedKey]))
                                });
                            else {
                                var selectedKey = trackFn ? trackKeysCache[selectElement.val()] : selectElement.val();
                                viewValue = getViewValue(selectedKey, collection[selectedKey])
                            }
                            ctrl.$setViewValue(viewValue),
                            render()
                        })
                    }
                    function getViewValue(key, value) {
                        if ("?" === key)
                            return undefined;
                        if ("" === key)
                            return null;
                        var viewValueFn = selectAsFn ? selectAsFn : valueFn;
                        return callExpression(viewValueFn, key, value)
                    }
                    function getLabels() {
                        var toDisplay, values = valuesFn(scope);
                        if (values && isArray(values)) {
                            toDisplay = new Array(values.length);
                            for (var i = 0, ii = values.length; ii > i; i++)
                                toDisplay[i] = callExpression(displayFn, i, values[i]);
                            return toDisplay
                        }
                        if (values) {
                            toDisplay = {};
                            for (var prop in values)
                                values.hasOwnProperty(prop) && (toDisplay[prop] = callExpression(displayFn, prop, values[prop]))
                        }
                        return toDisplay
                    }
                    function createIsSelectedFn(viewValue) {
                        var selectedSet;
                        if (multiple)
                            if (trackFn && isArray(viewValue)) {
                                selectedSet = new HashMap([]);
                                for (var trackIndex = 0; trackIndex < viewValue.length; trackIndex++)
                                    selectedSet.put(callExpression(trackFn, null, viewValue[trackIndex]), !0)
                            } else
                                selectedSet = new HashMap(viewValue);
                        else
                            trackFn && (viewValue = callExpression(trackFn, null, viewValue));
                        return function(key, value) {
                            var compareValueFn;
                            return compareValueFn = trackFn ? trackFn : selectAsFn ? selectAsFn : valueFn,
                            multiple ? isDefined(selectedSet.remove(callExpression(compareValueFn, key, value))) : viewValue === callExpression(compareValueFn, key, value)
                        }
                    }
                    function scheduleRendering() {
                        renderScheduled || (scope.$$postDigest(render),
                        renderScheduled = !0)
                    }
                    function updateLabelMap(labelMap, label, added) {
                        labelMap[label] = labelMap[label] || 0,
                        labelMap[label] += added ? 1 : -1
                    }
                    function render() {
                        renderScheduled = !1;
                        var optionGroupName, optionGroup, option, existingParent, existingOptions, existingOption, key, value, groupLength, length, groupIndex, index, selected, lastElement, element, label, optionId, optionGroups = {
                            "": []
                        }, optionGroupNames = [""], viewValue = ctrl.$viewValue, values = valuesFn(scope) || [], keys = keyName ? sortedKeys(values) : values, labelMap = {}, isSelected = createIsSelectedFn(viewValue), anySelected = !1;
                        for (trackKeysCache = {},
                        index = 0; length = keys.length,
                        length > index; index++)
                            key = index,
                            keyName && (key = keys[index],
                            "$" === key.charAt(0)) || (value = values[key],
                            optionGroupName = callExpression(groupByFn, key, value) || "",
                            (optionGroup = optionGroups[optionGroupName]) || (optionGroup = optionGroups[optionGroupName] = [],
                            optionGroupNames.push(optionGroupName)),
                            selected = isSelected(key, value),
                            anySelected = anySelected || selected,
                            label = callExpression(displayFn, key, value),
                            label = isDefined(label) ? label : "",
                            optionId = trackFn ? trackFn(scope, locals) : keyName ? keys[index] : index,
                            trackFn && (trackKeysCache[optionId] = key),
                            optionGroup.push({
                                id: optionId,
                                label: label,
                                selected: selected
                            }));
                        for (multiple || (nullOption || null === viewValue ? optionGroups[""].unshift({
                            id: "",
                            label: "",
                            selected: !anySelected
                        }) : anySelected || optionGroups[""].unshift({
                            id: "?",
                            label: "",
                            selected: !0
                        })),
                        groupIndex = 0,
                        groupLength = optionGroupNames.length; groupLength > groupIndex; groupIndex++) {
                            for (optionGroupName = optionGroupNames[groupIndex],
                            optionGroup = optionGroups[optionGroupName],
                            optionGroupsCache.length <= groupIndex ? (existingParent = {
                                element: optGroupTemplate.clone().attr("label", optionGroupName),
                                label: optionGroup.label
                            },
                            existingOptions = [existingParent],
                            optionGroupsCache.push(existingOptions),
                            selectElement.append(existingParent.element)) : (existingOptions = optionGroupsCache[groupIndex],
                            existingParent = existingOptions[0],
                            existingParent.label != optionGroupName && existingParent.element.attr("label", existingParent.label = optionGroupName)),
                            lastElement = null,
                            index = 0,
                            length = optionGroup.length; length > index; index++)
                                option = optionGroup[index],
                                (existingOption = existingOptions[index + 1]) ? (lastElement = existingOption.element,
                                existingOption.label !== option.label && (updateLabelMap(labelMap, existingOption.label, !1),
                                updateLabelMap(labelMap, option.label, !0),
                                lastElement.text(existingOption.label = option.label),
                                lastElement.prop("label", existingOption.label)),
                                existingOption.id !== option.id && lastElement.val(existingOption.id = option.id),
                                lastElement[0].selected !== option.selected && (lastElement.prop("selected", existingOption.selected = option.selected),
                                msie && lastElement.prop("selected", existingOption.selected))) : ("" === option.id && nullOption ? element = nullOption : (element = optionTemplate.clone()).val(option.id).prop("selected", option.selected).attr("selected", option.selected).prop("label", option.label).text(option.label),
                                existingOptions.push(existingOption = {
                                    element: element,
                                    label: option.label,
                                    id: option.id,
                                    selected: option.selected
                                }),
                                updateLabelMap(labelMap, option.label, !0),
                                lastElement ? lastElement.after(element) : existingParent.element.append(element),
                                lastElement = element);
                            for (index++; existingOptions.length > index; )
                                option = existingOptions.pop(),
                                updateLabelMap(labelMap, option.label, !1),
                                option.element.remove()
                        }
                        for (; optionGroupsCache.length > groupIndex; ) {
                            for (optionGroup = optionGroupsCache.pop(),
                            index = 1; index < optionGroup.length; ++index)
                                updateLabelMap(labelMap, optionGroup[index].label, !1);
                            optionGroup[0].element.remove()
                        }
                        forEach(labelMap, function(count, label) {
                            count > 0 ? selectCtrl.addOption(label) : 0 > count && selectCtrl.removeOption(label)
                        })
                    }
                    var match;
                    if (!(match = optionsExp.match(NG_OPTIONS_REGEXP)))
                        throw ngOptionsMinErr("iexp", "Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}", optionsExp, startingTag(selectElement));
                    var displayFn = $parse(match[2] || match[1])
                      , valueName = match[4] || match[6]
                      , selectAs = / as /.test(match[0]) && match[1]
                      , selectAsFn = selectAs ? $parse(selectAs) : null
                      , keyName = match[5]
                      , groupByFn = $parse(match[3] || "")
                      , valueFn = $parse(match[2] ? match[1] : valueName)
                      , valuesFn = $parse(match[7])
                      , track = match[8]
                      , trackFn = track ? $parse(match[8]) : null
                      , trackKeysCache = {}
                      , optionGroupsCache = [[{
                        element: selectElement,
                        label: ""
                    }]]
                      , locals = {};
                    nullOption && ($compile(nullOption)(scope),
                    nullOption.removeClass("ng-scope"),
                    nullOption.remove()),
                    selectElement.empty(),
                    selectElement.on("change", selectionChanged),
                    ctrl.$render = render,
                    scope.$watchCollection(valuesFn, scheduleRendering),
                    scope.$watchCollection(getLabels, scheduleRendering),
                    multiple && scope.$watchCollection(function() {
                        return ctrl.$modelValue
                    }, scheduleRendering)
                }
                if (ctrls[1]) {
                    for (var emptyOption, selectCtrl = ctrls[0], ngModelCtrl = ctrls[1], multiple = attr.multiple, optionsExp = attr.ngOptions, nullOption = !1, renderScheduled = !1, optionTemplate = jqLite(document.createElement("option")), optGroupTemplate = jqLite(document.createElement("optgroup")), unknownOption = optionTemplate.clone(), i = 0, children = element.children(), ii = children.length; ii > i; i++)
                        if ("" === children[i].value) {
                            emptyOption = nullOption = children.eq(i);
                            break
                        }
                    selectCtrl.init(ngModelCtrl, nullOption, unknownOption),
                    multiple && (ngModelCtrl.$isEmpty = function(value) {
                        return !value || 0 === value.length
                    }
                    ),
                    optionsExp ? setupAsOptions(scope, element, ngModelCtrl) : multiple ? setupAsMultiple(scope, element, ngModelCtrl) : setupAsSingle(scope, element, ngModelCtrl, selectCtrl)
                }
            }
        }
    }
    ]
      , optionDirective = ["$interpolate", function($interpolate) {
        var nullSelectCtrl = {
            addOption: noop,
            removeOption: noop
        };
        return {
            restrict: "E",
            priority: 100,
            compile: function(element, attr) {
                if (isUndefined(attr.value)) {
                    var interpolateFn = $interpolate(element.text(), !0);
                    interpolateFn || attr.$set("value", element.text())
                }
                return function(scope, element, attr) {
                    var selectCtrlName = "$selectController"
                      , parent = element.parent()
                      , selectCtrl = parent.data(selectCtrlName) || parent.parent().data(selectCtrlName);
                    selectCtrl && selectCtrl.databound || (selectCtrl = nullSelectCtrl),
                    interpolateFn ? scope.$watch(interpolateFn, function(newVal, oldVal) {
                        attr.$set("value", newVal),
                        oldVal !== newVal && selectCtrl.removeOption(oldVal),
                        selectCtrl.addOption(newVal, element)
                    }) : selectCtrl.addOption(attr.value, element),
                    element.on("$destroy", function() {
                        selectCtrl.removeOption(attr.value)
                    })
                }
            }
        }
    }
    ]
      , styleDirective = valueFn({
        restrict: "E",
        terminal: !1
    })
      , requiredDirective = function() {
        return {
            restrict: "A",
            require: "?ngModel",
            link: function(scope, elm, attr, ctrl) {
                ctrl && (attr.required = !0,
                ctrl.$validators.required = function(modelValue, viewValue) {
                    return !attr.required || !ctrl.$isEmpty(viewValue)
                }
                ,
                attr.$observe("required", function() {
                    ctrl.$validate()
                }))
            }
        }
    }
      , patternDirective = function() {
        return {
            restrict: "A",
            require: "?ngModel",
            link: function(scope, elm, attr, ctrl) {
                if (ctrl) {
                    var regexp, patternExp = attr.ngPattern || attr.pattern;
                    attr.$observe("pattern", function(regex) {
                        if (isString(regex) && regex.length > 0 && (regex = new RegExp("^" + regex + "$")),
                        regex && !regex.test)
                            throw minErr("ngPattern")("noregexp", "Expected {0} to be a RegExp but was {1}. Element: {2}", patternExp, regex, startingTag(elm));
                        regexp = regex || undefined,
                        ctrl.$validate()
                    }),
                    ctrl.$validators.pattern = function(value) {
                        return ctrl.$isEmpty(value) || isUndefined(regexp) || regexp.test(value)
                    }
                }
            }
        }
    }
      , maxlengthDirective = function() {
        return {
            restrict: "A",
            require: "?ngModel",
            link: function(scope, elm, attr, ctrl) {
                if (ctrl) {
                    var maxlength = -1;
                    attr.$observe("maxlength", function(value) {
                        var intVal = int(value);
                        maxlength = isNaN(intVal) ? -1 : intVal,
                        ctrl.$validate()
                    }),
                    ctrl.$validators.maxlength = function(modelValue, viewValue) {
                        return 0 > maxlength || ctrl.$isEmpty(viewValue) || viewValue.length <= maxlength
                    }
                }
            }
        }
    }
      , minlengthDirective = function() {
        return {
            restrict: "A",
            require: "?ngModel",
            link: function(scope, elm, attr, ctrl) {
                if (ctrl) {
                    var minlength = 0;
                    attr.$observe("minlength", function(value) {
                        minlength = int(value) || 0,
                        ctrl.$validate()
                    }),
                    ctrl.$validators.minlength = function(modelValue, viewValue) {
                        return ctrl.$isEmpty(viewValue) || viewValue.length >= minlength
                    }
                }
            }
        }
    };
    return window.angular.bootstrap ? void console.log("WARNING: Tried to load angular more than once.") : (bindJQuery(),
    publishExternalAPI(angular),
    void jqLite(document).ready(function() {
        angularInit(document, bootstrap)
    }))
}(window, document),
!window.angular.$$csp() && window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),
angular.module("ng-rails-csrf", []).config(["$httpProvider", function($httpProvider) {
    var getToken = function() {
        var el = document.querySelector('meta[name="csrf-token"]');
        return el ? el = el.getAttribute("content") : (el = document.querySelector('input[name="authenticity_token"]'),
        el && (el = el.value)),
        el
    }
      , updateToken = function() {
        var headers = $httpProvider.defaults.headers.common
          , token = getToken();
        token && (headers["X-CSRF-TOKEN"] = getToken(),
        headers["X-Requested-With"] = "XMLHttpRequest")
    };
    updateToken(),
    window.Turbolinks && $(document).bind("page:change", updateToken)
}
]),
function(window, angular, undefined) {
    "use strict";
    angular.module("ngAnimate", ["ng"]).directive("ngAnimateChildren", function() {
        var NG_ANIMATE_CHILDREN = "$$ngAnimateChildren";
        return function(scope, element, attrs) {
            var val = attrs.ngAnimateChildren;
            angular.isString(val) && 0 === val.length ? element.data(NG_ANIMATE_CHILDREN, !0) : scope.$watch(val, function(value) {
                element.data(NG_ANIMATE_CHILDREN, !!value)
            })
        }
    }).factory("$$animateReflow", ["$$rAF", "$document", function($$rAF, $document) {
        var bod = $document[0].body;
        return function(fn) {
            return $$rAF(function() {
                bod.offsetWidth + 1;
                fn()
            })
        }
    }
    ]).config(["$provide", "$animateProvider", function($provide, $animateProvider) {
        function extractElementNode(element) {
            for (var i = 0; i < element.length; i++) {
                var elm = element[i];
                if (elm.nodeType == ELEMENT_NODE)
                    return elm
            }
        }
        function prepareElement(element) {
            return element && angular.element(element)
        }
        function stripCommentsFromElement(element) {
            return angular.element(extractElementNode(element))
        }
        function isMatchingElement(elm1, elm2) {
            return extractElementNode(elm1) == extractElementNode(elm2)
        }
        var $$jqLite, noop = angular.noop, forEach = angular.forEach, selectors = $animateProvider.$$selectors, isArray = angular.isArray, isString = angular.isString, isObject = angular.isObject, ELEMENT_NODE = 1, NG_ANIMATE_STATE = "$$ngAnimateState", NG_ANIMATE_CHILDREN = "$$ngAnimateChildren", NG_ANIMATE_CLASS_NAME = "ng-animate", rootAnimateState = {
            running: !0
        };
        $provide.decorator("$animate", ["$delegate", "$$q", "$injector", "$sniffer", "$rootElement", "$$asyncCallback", "$rootScope", "$document", "$templateRequest", "$$jqLite", function($delegate, $$q, $injector, $sniffer, $rootElement, $$asyncCallback, $rootScope, $document, $templateRequest, $$$jqLite) {
            function classBasedAnimationsBlocked(element, setter) {
                var data = element.data(NG_ANIMATE_STATE) || {};
                return setter && (data.running = !0,
                data.structural = !0,
                element.data(NG_ANIMATE_STATE, data)),
                data.disabled || data.running && data.structural
            }
            function runAnimationPostDigest(fn) {
                var cancelFn, defer = $$q.defer();
                return defer.promise.$$cancelFn = function() {
                    cancelFn && cancelFn()
                }
                ,
                $rootScope.$$postDigest(function() {
                    cancelFn = fn(function() {
                        defer.resolve()
                    })
                }),
                defer.promise
            }
            function parseAnimateOptions(options) {
                return isObject(options) ? (options.tempClasses && isString(options.tempClasses) && (options.tempClasses = options.tempClasses.split(/\s+/)),
                options) : void 0
            }
            function resolveElementClasses(element, cache, runningAnimations) {
                runningAnimations = runningAnimations || {};
                var lookup = {};
                forEach(runningAnimations, function(data, selector) {
                    forEach(selector.split(" "), function(s) {
                        lookup[s] = data
                    })
                });
                var hasClasses = Object.create(null);
                forEach((element.attr("class") || "").split(/\s+/), function(className) {
                    hasClasses[className] = !0
                });
                var toAdd = []
                  , toRemove = [];
                return forEach(cache && cache.classes || [], function(status, className) {
                    var hasClass = hasClasses[className]
                      , matchingAnimation = lookup[className] || {};
                    status === !1 ? (hasClass || "addClass" == matchingAnimation.event) && toRemove.push(className) : status === !0 && (hasClass && "removeClass" != matchingAnimation.event || toAdd.push(className))
                }),
                toAdd.length + toRemove.length > 0 && [toAdd.join(" "), toRemove.join(" ")]
            }
            function lookup(name) {
                if (name) {
                    var matches = []
                      , flagMap = {}
                      , classes = name.substr(1).split(".");
                    ($sniffer.transitions || $sniffer.animations) && matches.push($injector.get(selectors[""]));
                    for (var i = 0; i < classes.length; i++) {
                        var klass = classes[i]
                          , selectorFactoryName = selectors[klass];
                        selectorFactoryName && !flagMap[klass] && (matches.push($injector.get(selectorFactoryName)),
                        flagMap[klass] = !0)
                    }
                    return matches
                }
            }
            function animationRunner(element, animationEvent, className, options) {
                function registerAnimation(animationFactory, event) {
                    var afterFn = animationFactory[event]
                      , beforeFn = animationFactory["before" + event.charAt(0).toUpperCase() + event.substr(1)];
                    return afterFn || beforeFn ? ("leave" == event && (beforeFn = afterFn,
                    afterFn = null),
                    after.push({
                        event: event,
                        fn: afterFn
                    }),
                    before.push({
                        event: event,
                        fn: beforeFn
                    }),
                    !0) : void 0
                }
                function run(fns, cancellations, allCompleteFn) {
                    function afterAnimationComplete(index) {
                        if (cancellations) {
                            if ((cancellations[index] || noop)(),
                            ++count < animations.length)
                                return;
                            cancellations = null
                        }
                        allCompleteFn()
                    }
                    var animations = [];
                    forEach(fns, function(animation) {
                        animation.fn && animations.push(animation)
                    });
                    var count = 0;
                    forEach(animations, function(animation, index) {
                        var progress = function() {
                            afterAnimationComplete(index)
                        };
                        switch (animation.event) {
                        case "setClass":
                            cancellations.push(animation.fn(element, classNameAdd, classNameRemove, progress, options));
                            break;
                        case "animate":
                            cancellations.push(animation.fn(element, className, options.from, options.to, progress));
                            break;
                        case "addClass":
                            cancellations.push(animation.fn(element, classNameAdd || className, progress, options));
                            break;
                        case "removeClass":
                            cancellations.push(animation.fn(element, classNameRemove || className, progress, options));
                            break;
                        default:
                            cancellations.push(animation.fn(element, progress, options))
                        }
                    }),
                    cancellations && 0 === cancellations.length && allCompleteFn()
                }
                var node = element[0];
                if (node) {
                    options && (options.to = options.to || {},
                    options.from = options.from || {});
                    var classNameAdd, classNameRemove;
                    isArray(className) && (classNameAdd = className[0],
                    classNameRemove = className[1],
                    classNameAdd ? classNameRemove ? className = classNameAdd + " " + classNameRemove : (className = classNameAdd,
                    animationEvent = "addClass") : (className = classNameRemove,
                    animationEvent = "removeClass"));
                    var isSetClassOperation = "setClass" == animationEvent
                      , isClassBased = isSetClassOperation || "addClass" == animationEvent || "removeClass" == animationEvent || "animate" == animationEvent
                      , currentClassName = element.attr("class")
                      , classes = currentClassName + " " + className;
                    if (isAnimatableClassName(classes)) {
                        var beforeComplete = noop
                          , beforeCancel = []
                          , before = []
                          , afterComplete = noop
                          , afterCancel = []
                          , after = []
                          , animationLookup = (" " + classes).replace(/\s+/g, ".");
                        return forEach(lookup(animationLookup), function(animationFactory) {
                            var created = registerAnimation(animationFactory, animationEvent);
                            !created && isSetClassOperation && (registerAnimation(animationFactory, "addClass"),
                            registerAnimation(animationFactory, "removeClass"))
                        }),
                        {
                            node: node,
                            event: animationEvent,
                            className: className,
                            isClassBased: isClassBased,
                            isSetClassOperation: isSetClassOperation,
                            applyStyles: function() {
                                options && element.css(angular.extend(options.from || {}, options.to || {}))
                            },
                            before: function(allCompleteFn) {
                                beforeComplete = allCompleteFn,
                                run(before, beforeCancel, function() {
                                    beforeComplete = noop,
                                    allCompleteFn()
                                })
                            },
                            after: function(allCompleteFn) {
                                afterComplete = allCompleteFn,
                                run(after, afterCancel, function() {
                                    afterComplete = noop,
                                    allCompleteFn()
                                })
                            },
                            cancel: function() {
                                beforeCancel && (forEach(beforeCancel, function(cancelFn) {
                                    (cancelFn || noop)(!0)
                                }),
                                beforeComplete(!0)),
                                afterCancel && (forEach(afterCancel, function(cancelFn) {
                                    (cancelFn || noop)(!0)
                                }),
                                afterComplete(!0))
                            }
                        }
                    }
                }
            }
            function performAnimation(animationEvent, className, element, parentElement, afterElement, domOperation, options, doneCallback) {
                function fireDOMCallback(animationPhase) {
                    var eventName = "$animate:" + animationPhase;
                    elementEvents && elementEvents[eventName] && elementEvents[eventName].length > 0 && $$asyncCallback(function() {
                        element.triggerHandler(eventName, {
                            event: animationEvent,
                            className: className
                        })
                    })
                }
                function fireBeforeCallbackAsync() {
                    fireDOMCallback("before")
                }
                function fireAfterCallbackAsync() {
                    fireDOMCallback("after")
                }
                function fireDoneCallbackAsync() {
                    fireDOMCallback("close"),
                    doneCallback()
                }
                function fireDOMOperation() {
                    fireDOMOperation.hasBeenRun || (fireDOMOperation.hasBeenRun = !0,
                    domOperation())
                }
                function closeAnimation() {
                    if (!closeAnimation.hasBeenRun) {
                        runner && runner.applyStyles(),
                        closeAnimation.hasBeenRun = !0,
                        options && options.tempClasses && forEach(options.tempClasses, function(className) {
                            $$jqLite.removeClass(element, className)
                        });
                        var data = element.data(NG_ANIMATE_STATE);
                        data && (runner && runner.isClassBased ? cleanup(element, className) : ($$asyncCallback(function() {
                            var data = element.data(NG_ANIMATE_STATE) || {};
                            localAnimationCount == data.index && cleanup(element, className, animationEvent)
                        }),
                        element.data(NG_ANIMATE_STATE, data))),
                        fireDoneCallbackAsync()
                    }
                }
                var noopCancel = noop
                  , runner = animationRunner(element, animationEvent, className, options);
                if (!runner)
                    return fireDOMOperation(),
                    fireBeforeCallbackAsync(),
                    fireAfterCallbackAsync(),
                    closeAnimation(),
                    noopCancel;
                animationEvent = runner.event,
                className = runner.className;
                var elementEvents = angular.element._data(runner.node);
                if (elementEvents = elementEvents && elementEvents.events,
                parentElement || (parentElement = afterElement ? afterElement.parent() : element.parent()),
                animationsDisabled(element, parentElement))
                    return fireDOMOperation(),
                    fireBeforeCallbackAsync(),
                    fireAfterCallbackAsync(),
                    closeAnimation(),
                    noopCancel;
                var ngAnimateState = element.data(NG_ANIMATE_STATE) || {}
                  , runningAnimations = ngAnimateState.active || {}
                  , totalActiveAnimations = ngAnimateState.totalActive || 0
                  , lastAnimation = ngAnimateState.last
                  , skipAnimation = !1;
                if (totalActiveAnimations > 0) {
                    var animationsToCancel = [];
                    if (runner.isClassBased) {
                        if ("setClass" == lastAnimation.event)
                            animationsToCancel.push(lastAnimation),
                            cleanup(element, className);
                        else if (runningAnimations[className]) {
                            var current = runningAnimations[className];
                            current.event == animationEvent ? skipAnimation = !0 : (animationsToCancel.push(current),
                            cleanup(element, className))
                        }
                    } else if ("leave" == animationEvent && runningAnimations["ng-leave"])
                        skipAnimation = !0;
                    else {
                        for (var klass in runningAnimations)
                            animationsToCancel.push(runningAnimations[klass]);
                        ngAnimateState = {},
                        cleanup(element, !0)
                    }
                    animationsToCancel.length > 0 && forEach(animationsToCancel, function(operation) {
                        operation.cancel()
                    })
                }
                if (!runner.isClassBased || runner.isSetClassOperation || "animate" == animationEvent || skipAnimation || (skipAnimation = "addClass" == animationEvent == element.hasClass(className)),
                skipAnimation)
                    return fireDOMOperation(),
                    fireBeforeCallbackAsync(),
                    fireAfterCallbackAsync(),
                    fireDoneCallbackAsync(),
                    noopCancel;
                runningAnimations = ngAnimateState.active || {},
                totalActiveAnimations = ngAnimateState.totalActive || 0,
                "leave" == animationEvent && element.one("$destroy", function() {
                    var element = angular.element(this)
                      , state = element.data(NG_ANIMATE_STATE);
                    if (state) {
                        var activeLeaveAnimation = state.active["ng-leave"];
                        activeLeaveAnimation && (activeLeaveAnimation.cancel(),
                        cleanup(element, "ng-leave"))
                    }
                }),
                $$jqLite.addClass(element, NG_ANIMATE_CLASS_NAME),
                options && options.tempClasses && forEach(options.tempClasses, function(className) {
                    $$jqLite.addClass(element, className)
                });
                var localAnimationCount = globalAnimationCounter++;
                return totalActiveAnimations++,
                runningAnimations[className] = runner,
                element.data(NG_ANIMATE_STATE, {
                    last: runner,
                    active: runningAnimations,
                    index: localAnimationCount,
                    totalActive: totalActiveAnimations
                }),
                fireBeforeCallbackAsync(),
                runner.before(function(cancelled) {
                    var data = element.data(NG_ANIMATE_STATE);
                    cancelled = cancelled || !data || !data.active[className] || runner.isClassBased && data.active[className].event != animationEvent,
                    fireDOMOperation(),
                    cancelled === !0 ? closeAnimation() : (fireAfterCallbackAsync(),
                    runner.after(closeAnimation))
                }),
                runner.cancel
            }
            function cancelChildAnimations(element) {
                var node = extractElementNode(element);
                if (node) {
                    var nodes = angular.isFunction(node.getElementsByClassName) ? node.getElementsByClassName(NG_ANIMATE_CLASS_NAME) : node.querySelectorAll("." + NG_ANIMATE_CLASS_NAME);
                    forEach(nodes, function(element) {
                        element = angular.element(element);
                        var data = element.data(NG_ANIMATE_STATE);
                        data && data.active && forEach(data.active, function(runner) {
                            runner.cancel()
                        })
                    })
                }
            }
            function cleanup(element, className) {
                if (isMatchingElement(element, $rootElement))
                    rootAnimateState.disabled || (rootAnimateState.running = !1,
                    rootAnimateState.structural = !1);
                else if (className) {
                    var data = element.data(NG_ANIMATE_STATE) || {}
                      , removeAnimations = className === !0;
                    !removeAnimations && data.active && data.active[className] && (data.totalActive--,
                    delete data.active[className]),
                    !removeAnimations && data.totalActive || ($$jqLite.removeClass(element, NG_ANIMATE_CLASS_NAME),
                    element.removeData(NG_ANIMATE_STATE))
                }
            }
            function animationsDisabled(element, parentElement) {
                if (rootAnimateState.disabled)
                    return !0;
                if (isMatchingElement(element, $rootElement))
                    return rootAnimateState.running;
                var allowChildAnimations, parentRunningAnimation, hasParent;
                do {
                    if (0 === parentElement.length)
                        break;
                    var isRoot = isMatchingElement(parentElement, $rootElement)
                      , state = isRoot ? rootAnimateState : parentElement.data(NG_ANIMATE_STATE) || {};
                    if (state.disabled)
                        return !0;
                    if (isRoot && (hasParent = !0),
                    allowChildAnimations !== !1) {
                        var animateChildrenFlag = parentElement.data(NG_ANIMATE_CHILDREN);
                        angular.isDefined(animateChildrenFlag) && (allowChildAnimations = animateChildrenFlag)
                    }
                    parentRunningAnimation = parentRunningAnimation || state.running || state.last && !state.last.isClassBased
                } while (parentElement = parentElement.parent());
                return !hasParent || !allowChildAnimations && parentRunningAnimation
            }
            $$jqLite = $$$jqLite,
            $rootElement.data(NG_ANIMATE_STATE, rootAnimateState);
            var deregisterWatch = $rootScope.$watch(function() {
                return $templateRequest.totalPendingRequests
            }, function(val) {
                0 === val && (deregisterWatch(),
                $rootScope.$$postDigest(function() {
                    $rootScope.$$postDigest(function() {
                        rootAnimateState.running = !1
                    })
                }))
            })
              , globalAnimationCounter = 0
              , classNameFilter = $animateProvider.classNameFilter()
              , isAnimatableClassName = classNameFilter ? function(className) {
                return classNameFilter.test(className)
            }
            : function() {
                return !0
            }
            ;
            return {
                animate: function(element, from, to, className, options) {
                    return className = className || "ng-inline-animate",
                    options = parseAnimateOptions(options) || {},
                    options.from = to ? from : null,
                    options.to = to ? to : from,
                    runAnimationPostDigest(function(done) {
                        return performAnimation("animate", className, stripCommentsFromElement(element), null, null, noop, options, done)
                    })
                },
                enter: function(element, parentElement, afterElement, options) {
                    return options = parseAnimateOptions(options),
                    element = angular.element(element),
                    parentElement = prepareElement(parentElement),
                    afterElement = prepareElement(afterElement),
                    classBasedAnimationsBlocked(element, !0),
                    $delegate.enter(element, parentElement, afterElement),
                    runAnimationPostDigest(function(done) {
                        return performAnimation("enter", "ng-enter", stripCommentsFromElement(element), parentElement, afterElement, noop, options, done)
                    })
                },
                leave: function(element, options) {
                    return options = parseAnimateOptions(options),
                    element = angular.element(element),
                    cancelChildAnimations(element),
                    classBasedAnimationsBlocked(element, !0),
                    runAnimationPostDigest(function(done) {
                        return performAnimation("leave", "ng-leave", stripCommentsFromElement(element), null, null, function() {
                            $delegate.leave(element)
                        }, options, done)
                    })
                },
                move: function(element, parentElement, afterElement, options) {
                    return options = parseAnimateOptions(options),
                    element = angular.element(element),
                    parentElement = prepareElement(parentElement),
                    afterElement = prepareElement(afterElement),
                    cancelChildAnimations(element),
                    classBasedAnimationsBlocked(element, !0),
                    $delegate.move(element, parentElement, afterElement),
                    runAnimationPostDigest(function(done) {
                        return performAnimation("move", "ng-move", stripCommentsFromElement(element), parentElement, afterElement, noop, options, done)
                    })
                },
                addClass: function(element, className, options) {
                    return this.setClass(element, className, [], options)
                },
                removeClass: function(element, className, options) {
                    return this.setClass(element, [], className, options)
                },
                setClass: function(element, add, remove, options) {
                    options = parseAnimateOptions(options);
                    var STORAGE_KEY = "$$animateClasses";
                    if (element = angular.element(element),
                    element = stripCommentsFromElement(element),
                    classBasedAnimationsBlocked(element))
                        return $delegate.$$setClassImmediately(element, add, remove, options);
                    var classes, cache = element.data(STORAGE_KEY), hasCache = !!cache;
                    return cache || (cache = {},
                    cache.classes = {}),
                    classes = cache.classes,
                    add = isArray(add) ? add : add.split(" "),
                    forEach(add, function(c) {
                        c && c.length && (classes[c] = !0)
                    }),
                    remove = isArray(remove) ? remove : remove.split(" "),
                    forEach(remove, function(c) {
                        c && c.length && (classes[c] = !1)
                    }),
                    hasCache ? (options && cache.options && (cache.options = angular.extend(cache.options || {}, options)),
                    cache.promise) : (element.data(STORAGE_KEY, cache = {
                        classes: classes,
                        options: options
                    }),
                    cache.promise = runAnimationPostDigest(function(done) {
                        var parentElement = element.parent()
                          , elementNode = extractElementNode(element)
                          , parentNode = elementNode.parentNode;
                        if (!parentNode || parentNode.$$NG_REMOVED || elementNode.$$NG_REMOVED)
                            return void done();
                        var cache = element.data(STORAGE_KEY);
                        element.removeData(STORAGE_KEY);
                        var state = element.data(NG_ANIMATE_STATE) || {}
                          , classes = resolveElementClasses(element, cache, state.active);
                        return classes ? performAnimation("setClass", classes, element, parentElement, null, function() {
                            classes[0] && $delegate.$$addClassImmediately(element, classes[0]),
                            classes[1] && $delegate.$$removeClassImmediately(element, classes[1])
                        }, cache.options, done) : done()
                    }))
                },
                cancel: function(promise) {
                    promise.$$cancelFn()
                },
                enabled: function(value, element) {
                    switch (arguments.length) {
                    case 2:
                        if (value)
                            cleanup(element);
                        else {
                            var data = element.data(NG_ANIMATE_STATE) || {};
                            data.disabled = !0,
                            element.data(NG_ANIMATE_STATE, data)
                        }
                        break;
                    case 1:
                        rootAnimateState.disabled = !value;
                        break;
                    default:
                        value = !rootAnimateState.disabled
                    }
                    return !!value
                }
            }
        }
        ]),
        $animateProvider.register("", ["$window", "$sniffer", "$timeout", "$$animateReflow", function($window, $sniffer, $timeout, $$animateReflow) {
            function clearCacheAfterReflow() {
                cancelAnimationReflow || (cancelAnimationReflow = $$animateReflow(function() {
                    animationReflowQueue = [],
                    cancelAnimationReflow = null,
                    lookupCache = {}
                }))
            }
            function afterReflow(element, callback) {
                cancelAnimationReflow && cancelAnimationReflow(),
                animationReflowQueue.push(callback),
                cancelAnimationReflow = $$animateReflow(function() {
                    forEach(animationReflowQueue, function(fn) {
                        fn()
                    }),
                    animationReflowQueue = [],
                    cancelAnimationReflow = null,
                    lookupCache = {}
                })
            }
            function animationCloseHandler(element, totalTime) {
                var node = extractElementNode(element);
                element = angular.element(node),
                animationElementQueue.push(element);
                var futureTimestamp = Date.now() + totalTime;
                closingTimestamp >= futureTimestamp || ($timeout.cancel(closingTimer),
                closingTimestamp = futureTimestamp,
                closingTimer = $timeout(function() {
                    closeAllAnimations(animationElementQueue),
                    animationElementQueue = []
                }, totalTime, !1))
            }
            function closeAllAnimations(elements) {
                forEach(elements, function(element) {
                    var elementData = element.data(NG_ANIMATE_CSS_DATA_KEY);
                    elementData && forEach(elementData.closeAnimationFns, function(fn) {
                        fn()
                    })
                })
            }
            function getElementAnimationDetails(element, cacheKey) {
                var data = cacheKey ? lookupCache[cacheKey] : null;
                if (!data) {
                    var transitionDuration = 0
                      , transitionDelay = 0
                      , animationDuration = 0
                      , animationDelay = 0;
                    forEach(element, function(element) {
                        if (element.nodeType == ELEMENT_NODE) {
                            var elementStyles = $window.getComputedStyle(element) || {}
                              , transitionDurationStyle = elementStyles[TRANSITION_PROP + DURATION_KEY];
                            transitionDuration = Math.max(parseMaxTime(transitionDurationStyle), transitionDuration);
                            var transitionDelayStyle = elementStyles[TRANSITION_PROP + DELAY_KEY];
                            transitionDelay = Math.max(parseMaxTime(transitionDelayStyle), transitionDelay);
                            elementStyles[ANIMATION_PROP + DELAY_KEY];
                            animationDelay = Math.max(parseMaxTime(elementStyles[ANIMATION_PROP + DELAY_KEY]), animationDelay);
                            var aDuration = parseMaxTime(elementStyles[ANIMATION_PROP + DURATION_KEY]);
                            aDuration > 0 && (aDuration *= parseInt(elementStyles[ANIMATION_PROP + ANIMATION_ITERATION_COUNT_KEY], 10) || 1),
                            animationDuration = Math.max(aDuration, animationDuration)
                        }
                    }),
                    data = {
                        total: 0,
                        transitionDelay: transitionDelay,
                        transitionDuration: transitionDuration,
                        animationDelay: animationDelay,
                        animationDuration: animationDuration
                    },
                    cacheKey && (lookupCache[cacheKey] = data)
                }
                return data
            }
            function parseMaxTime(str) {
                var maxValue = 0
                  , values = isString(str) ? str.split(/\s*,\s*/) : [];
                return forEach(values, function(value) {
                    maxValue = Math.max(parseFloat(value) || 0, maxValue)
                }),
                maxValue
            }
            function getCacheKey(element) {
                var parentElement = element.parent()
                  , parentID = parentElement.data(NG_ANIMATE_PARENT_KEY);
                return parentID || (parentElement.data(NG_ANIMATE_PARENT_KEY, ++parentCounter),
                parentID = parentCounter),
                parentID + "-" + extractElementNode(element).getAttribute("class")
            }
            function animateSetup(animationEvent, element, className, styles) {
                var structural = ["ng-enter", "ng-leave", "ng-move"].indexOf(className) >= 0
                  , cacheKey = getCacheKey(element)
                  , eventCacheKey = cacheKey + " " + className
                  , itemIndex = lookupCache[eventCacheKey] ? ++lookupCache[eventCacheKey].total : 0
                  , stagger = {};
                if (itemIndex > 0) {
                    var staggerClassName = className + "-stagger"
                      , staggerCacheKey = cacheKey + " " + staggerClassName
                      , applyClasses = !lookupCache[staggerCacheKey];
                    applyClasses && $$jqLite.addClass(element, staggerClassName),
                    stagger = getElementAnimationDetails(element, staggerCacheKey),
                    applyClasses && $$jqLite.removeClass(element, staggerClassName)
                }
                $$jqLite.addClass(element, className);
                var formerData = element.data(NG_ANIMATE_CSS_DATA_KEY) || {}
                  , timings = getElementAnimationDetails(element, eventCacheKey)
                  , transitionDuration = timings.transitionDuration
                  , animationDuration = timings.animationDuration;
                if (structural && 0 === transitionDuration && 0 === animationDuration)
                    return $$jqLite.removeClass(element, className),
                    !1;
                var blockTransition = styles || structural && transitionDuration > 0
                  , blockAnimation = animationDuration > 0 && stagger.animationDelay > 0 && 0 === stagger.animationDuration
                  , closeAnimationFns = formerData.closeAnimationFns || [];
                element.data(NG_ANIMATE_CSS_DATA_KEY, {
                    stagger: stagger,
                    cacheKey: eventCacheKey,
                    running: formerData.running || 0,
                    itemIndex: itemIndex,
                    blockTransition: blockTransition,
                    closeAnimationFns: closeAnimationFns
                });
                var node = extractElementNode(element);
                return blockTransition && (blockTransitions(node, !0),
                styles && element.css(styles)),
                blockAnimation && blockAnimations(node, !0),
                !0
            }
            function animateRun(animationEvent, element, className, activeAnimationComplete, styles) {
                function onEnd() {
                    element.off(css3AnimationEvents, onAnimationProgress),
                    $$jqLite.removeClass(element, activeClassName),
                    $$jqLite.removeClass(element, pendingClassName),
                    staggerTimeout && $timeout.cancel(staggerTimeout),
                    animateClose(element, className);
                    var node = extractElementNode(element);
                    for (var i in appliedStyles)
                        node.style.removeProperty(appliedStyles[i])
                }
                function onAnimationProgress(event) {
                    event.stopPropagation();
                    var ev = event.originalEvent || event
                      , timeStamp = ev.$manualTimeStamp || ev.timeStamp || Date.now()
                      , elapsedTime = parseFloat(ev.elapsedTime.toFixed(ELAPSED_TIME_MAX_DECIMAL_PLACES));
                    Math.max(timeStamp - startTime, 0) >= maxDelayTime && elapsedTime >= maxDuration && activeAnimationComplete()
                }
                var node = extractElementNode(element)
                  , elementData = element.data(NG_ANIMATE_CSS_DATA_KEY);
                if (-1 == node.getAttribute("class").indexOf(className) || !elementData)
                    return void activeAnimationComplete();
                var activeClassName = ""
                  , pendingClassName = "";
                forEach(className.split(" "), function(klass, i) {
                    var prefix = (i > 0 ? " " : "") + klass;
                    activeClassName += prefix + "-active",
                    pendingClassName += prefix + "-pending"
                });
                var style = ""
                  , appliedStyles = []
                  , itemIndex = elementData.itemIndex
                  , stagger = elementData.stagger
                  , staggerTime = 0;
                if (itemIndex > 0) {
                    var transitionStaggerDelay = 0;
                    stagger.transitionDelay > 0 && 0 === stagger.transitionDuration && (transitionStaggerDelay = stagger.transitionDelay * itemIndex);
                    var animationStaggerDelay = 0;
                    stagger.animationDelay > 0 && 0 === stagger.animationDuration && (animationStaggerDelay = stagger.animationDelay * itemIndex,
                    appliedStyles.push(CSS_PREFIX + "animation-play-state")),
                    staggerTime = Math.round(100 * Math.max(transitionStaggerDelay, animationStaggerDelay)) / 100
                }
                staggerTime || ($$jqLite.addClass(element, activeClassName),
                elementData.blockTransition && blockTransitions(node, !1));
                var eventCacheKey = elementData.cacheKey + " " + activeClassName
                  , timings = getElementAnimationDetails(element, eventCacheKey)
                  , maxDuration = Math.max(timings.transitionDuration, timings.animationDuration);
                if (0 === maxDuration)
                    return $$jqLite.removeClass(element, activeClassName),
                    animateClose(element, className),
                    void activeAnimationComplete();
                !staggerTime && styles && Object.keys(styles).length > 0 && (timings.transitionDuration || (element.css("transition", timings.animationDuration + "s linear all"),
                appliedStyles.push("transition")),
                element.css(styles));
                var maxDelay = Math.max(timings.transitionDelay, timings.animationDelay)
                  , maxDelayTime = maxDelay * ONE_SECOND;
                if (appliedStyles.length > 0) {
                    var oldStyle = node.getAttribute("style") || "";
                    ";" !== oldStyle.charAt(oldStyle.length - 1) && (oldStyle += ";"),
                    node.setAttribute("style", oldStyle + " " + style)
                }
                var staggerTimeout, startTime = Date.now(), css3AnimationEvents = ANIMATIONEND_EVENT + " " + TRANSITIONEND_EVENT, animationTime = (maxDelay + maxDuration) * CLOSING_TIME_BUFFER, totalTime = (staggerTime + animationTime) * ONE_SECOND;
                return staggerTime > 0 && ($$jqLite.addClass(element, pendingClassName),
                staggerTimeout = $timeout(function() {
                    staggerTimeout = null,
                    timings.transitionDuration > 0 && blockTransitions(node, !1),
                    timings.animationDuration > 0 && blockAnimations(node, !1),
                    $$jqLite.addClass(element, activeClassName),
                    $$jqLite.removeClass(element, pendingClassName),
                    styles && (0 === timings.transitionDuration && element.css("transition", timings.animationDuration + "s linear all"),
                    element.css(styles),
                    appliedStyles.push("transition"))
                }, staggerTime * ONE_SECOND, !1)),
                element.on(css3AnimationEvents, onAnimationProgress),
                elementData.closeAnimationFns.push(function() {
                    onEnd(),
                    activeAnimationComplete()
                }),
                elementData.running++,
                animationCloseHandler(element, totalTime),
                onEnd
            }
            function blockTransitions(node, bool) {
                node.style[TRANSITION_PROP + PROPERTY_KEY] = bool ? "none" : ""
            }
            function blockAnimations(node, bool) {
                node.style[ANIMATION_PROP + ANIMATION_PLAYSTATE_KEY] = bool ? "paused" : ""
            }
            function animateBefore(animationEvent, element, className, styles) {
                return animateSetup(animationEvent, element, className, styles) ? function(cancelled) {
                    cancelled && animateClose(element, className)
                }
                : void 0
            }
            function animateAfter(animationEvent, element, className, afterAnimationComplete, styles) {
                return element.data(NG_ANIMATE_CSS_DATA_KEY) ? animateRun(animationEvent, element, className, afterAnimationComplete, styles) : (animateClose(element, className),
                void afterAnimationComplete())
            }
            function animate(animationEvent, element, className, animationComplete, options) {
                var preReflowCancellation = animateBefore(animationEvent, element, className, options.from);
                if (!preReflowCancellation)
                    return clearCacheAfterReflow(),
                    void animationComplete();
                var cancel = preReflowCancellation;
                return afterReflow(element, function() {
                    cancel = animateAfter(animationEvent, element, className, animationComplete, options.to)
                }),
                function(cancelled) {
                    (cancel || noop)(cancelled)
                }
            }
            function animateClose(element, className) {
                $$jqLite.removeClass(element, className);
                var data = element.data(NG_ANIMATE_CSS_DATA_KEY);
                data && (data.running && data.running--,
                data.running && 0 !== data.running || element.removeData(NG_ANIMATE_CSS_DATA_KEY))
            }
            function suffixClasses(classes, suffix) {
                var className = "";
                return classes = isArray(classes) ? classes : classes.split(/\s+/),
                forEach(classes, function(klass, i) {
                    klass && klass.length > 0 && (className += (i > 0 ? " " : "") + klass + suffix)
                }),
                className
            }
            var TRANSITION_PROP, TRANSITIONEND_EVENT, ANIMATION_PROP, ANIMATIONEND_EVENT, CSS_PREFIX = "";
            window.ontransitionend === undefined && window.onwebkittransitionend !== undefined ? (CSS_PREFIX = "-webkit-",
            TRANSITION_PROP = "WebkitTransition",
            TRANSITIONEND_EVENT = "webkitTransitionEnd transitionend") : (TRANSITION_PROP = "transition",
            TRANSITIONEND_EVENT = "transitionend"),
            window.onanimationend === undefined && window.onwebkitanimationend !== undefined ? (CSS_PREFIX = "-webkit-",
            ANIMATION_PROP = "WebkitAnimation",
            ANIMATIONEND_EVENT = "webkitAnimationEnd animationend") : (ANIMATION_PROP = "animation",
            ANIMATIONEND_EVENT = "animationend");
            var cancelAnimationReflow, DURATION_KEY = "Duration", PROPERTY_KEY = "Property", DELAY_KEY = "Delay", ANIMATION_ITERATION_COUNT_KEY = "IterationCount", ANIMATION_PLAYSTATE_KEY = "PlayState", NG_ANIMATE_PARENT_KEY = "$$ngAnimateKey", NG_ANIMATE_CSS_DATA_KEY = "$$ngAnimateCSS3Data", ELAPSED_TIME_MAX_DECIMAL_PLACES = 3, CLOSING_TIME_BUFFER = 1.5, ONE_SECOND = 1e3, lookupCache = {}, parentCounter = 0, animationReflowQueue = [], closingTimer = null, closingTimestamp = 0, animationElementQueue = [];
            return {
                animate: function(element, className, from, to, animationCompleted, options) {
                    return options = options || {},
                    options.from = from,
                    options.to = to,
                    animate("animate", element, className, animationCompleted, options)
                },
                enter: function(element, animationCompleted, options) {
                    return options = options || {},
                    animate("enter", element, "ng-enter", animationCompleted, options)
                },
                leave: function(element, animationCompleted, options) {
                    return options = options || {},
                    animate("leave", element, "ng-leave", animationCompleted, options)
                },
                move: function(element, animationCompleted, options) {
                    return options = options || {},
                    animate("move", element, "ng-move", animationCompleted, options)
                },
                beforeSetClass: function(element, add, remove, animationCompleted, options) {
                    options = options || {};
                    var className = suffixClasses(remove, "-remove") + " " + suffixClasses(add, "-add")
                      , cancellationMethod = animateBefore("setClass", element, className, options.from);
                    return cancellationMethod ? (afterReflow(element, animationCompleted),
                    cancellationMethod) : (clearCacheAfterReflow(),
                    void animationCompleted())
                },
                beforeAddClass: function(element, className, animationCompleted, options) {
                    options = options || {};
                    var cancellationMethod = animateBefore("addClass", element, suffixClasses(className, "-add"), options.from);
                    return cancellationMethod ? (afterReflow(element, animationCompleted),
                    cancellationMethod) : (clearCacheAfterReflow(),
                    void animationCompleted())
                },
                beforeRemoveClass: function(element, className, animationCompleted, options) {
                    options = options || {};
                    var cancellationMethod = animateBefore("removeClass", element, suffixClasses(className, "-remove"), options.from);
                    return cancellationMethod ? (afterReflow(element, animationCompleted),
                    cancellationMethod) : (clearCacheAfterReflow(),
                    void animationCompleted())
                },
                setClass: function(element, add, remove, animationCompleted, options) {
                    options = options || {},
                    remove = suffixClasses(remove, "-remove"),
                    add = suffixClasses(add, "-add");
                    var className = remove + " " + add;
                    return animateAfter("setClass", element, className, animationCompleted, options.to)
                },
                addClass: function(element, className, animationCompleted, options) {
                    return options = options || {},
                    animateAfter("addClass", element, suffixClasses(className, "-add"), animationCompleted, options.to)
                },
                removeClass: function(element, className, animationCompleted, options) {
                    return options = options || {},
                    animateAfter("removeClass", element, suffixClasses(className, "-remove"), animationCompleted, options.to)
                }
            }
        }
        ])
    }
    ])
}(window, window.angular),
function(window, angular) {
    "use strict";
    angular.module("ngMessages", []).directive("ngMessages", ["$compile", "$animate", "$templateRequest", function($compile, $animate, $templateRequest) {
        var ACTIVE_CLASS = "ng-active"
          , INACTIVE_CLASS = "ng-inactive";
        return {
            restrict: "AE",
            controller: function() {
                this.$renderNgMessageClasses = angular.noop;
                var messages = [];
                this.registerMessage = function(index, message) {
                    for (var i = 0; i < messages.length; i++)
                        if (messages[i].type == message.type) {
                            if (index != i) {
                                var temp = messages[index];
                                messages[index] = messages[i],
                                index < messages.length ? messages[i] = temp : messages.splice(0, i)
                            }
                            return
                        }
                    messages.splice(index, 0, message)
                }
                ,
                this.renderMessages = function(values, multiple) {
                    function truthyVal(value) {
                        return null !== value && value !== !1 && value
                    }
                    values = values || {};
                    var found;
                    angular.forEach(messages, function(message) {
                        found && !multiple || !truthyVal(values[message.type]) ? message.detach() : (message.attach(),
                        found = !0)
                    }),
                    this.renderElementClasses(found)
                }
            },
            require: "ngMessages",
            link: function($scope, element, $attrs, ctrl) {
                ctrl.renderElementClasses = function(bool) {
                    bool ? $animate.setClass(element, ACTIVE_CLASS, INACTIVE_CLASS) : $animate.setClass(element, INACTIVE_CLASS, ACTIVE_CLASS)
                }
                ;
                var cachedValues, multiple = angular.isString($attrs.ngMessagesMultiple) || angular.isString($attrs.multiple), watchAttr = $attrs.ngMessages || $attrs["for"];
                $scope.$watchCollection(watchAttr, function(values) {
                    cachedValues = values,
                    ctrl.renderMessages(values, multiple)
                });
                var tpl = $attrs.ngMessagesInclude || $attrs.include;
                tpl && $templateRequest(tpl).then(function(html) {
                    var after, container = angular.element("<div/>").html(html);
                    angular.forEach(container.children(), function(elm) {
                        elm = angular.element(elm),
                        after ? after.after(elm) : element.prepend(elm),
                        after = elm,
                        $compile(elm)($scope)
                    }),
                    ctrl.renderMessages(cachedValues, multiple)
                })
            }
        }
    }
    ]).directive("ngMessage", ["$animate", function($animate) {
        var COMMENT_NODE = 8;
        return {
            require: "^ngMessages",
            transclude: "element",
            terminal: !0,
            restrict: "AE",
            link: function($scope, $element, $attrs, ngMessages, $transclude) {
                for (var index, element, commentNode = $element[0], parentNode = commentNode.parentNode, i = 0, j = 0; i < parentNode.childNodes.length; i++) {
                    var node = parentNode.childNodes[i];
                    if (node.nodeType == COMMENT_NODE && node.nodeValue.indexOf("ngMessage") >= 0) {
                        if (node === commentNode) {
                            index = j;
                            break
                        }
                        j++
                    }
                }
                ngMessages.registerMessage(index, {
                    type: $attrs.ngMessage || $attrs.when,
                    attach: function() {
                        element || $transclude($scope, function(clone) {
                            $animate.enter(clone, null, $element),
                            element = clone
                        })
                    },
                    detach: function() {
                        element && ($animate.leave(element),
                        element = null)
                    }
                })
            }
        }
    }
    ])
}(window, window.angular),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery"], factory) : factory(jQuery)
}(function($) {
    return $.ui = $.ui || {},
    $.ui.version = "1.12.1"
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version"], factory) : factory(jQuery)
}(function($) {
    return $.extend($.expr[":"], {
        data: $.expr.createPseudo ? $.expr.createPseudo(function(dataName) {
            return function(elem) {
                return !!$.data(elem, dataName)
            }
        }) : function(elem, i, match) {
            return !!$.data(elem, match[3])
        }
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version"], factory) : factory(jQuery)
}(function($) {
    return $.fn.extend({
        disableSelection: function() {
            var eventType = "onselectstart"in document.createElement("div") ? "selectstart" : "mousedown";
            return function() {
                return this.on(eventType + ".ui-disableSelection", function(event) {
                    event.preventDefault()
                })
            }
        }(),
        enableSelection: function() {
            return this.off(".ui-disableSelection")
        }
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version"], factory) : factory(jQuery)
}(function($) {
    function visible(element) {
        for (var visibility = element.css("visibility"); "inherit" === visibility; )
            element = element.parent(),
            visibility = element.css("visibility");
        return "hidden" !== visibility
    }
    return $.ui.focusable = function(element, hasTabindex) {
        var map, mapName, img, focusableIfVisible, fieldset, nodeName = element.nodeName.toLowerCase();
        return "area" === nodeName ? (map = element.parentNode,
        mapName = map.name,
        element.href && mapName && "map" === map.nodeName.toLowerCase() ? (img = $("img[usemap='#" + mapName + "']"),
        img.length > 0 && img.is(":visible")) : !1) : (/^(input|select|textarea|button|object)$/.test(nodeName) ? (focusableIfVisible = !element.disabled,
        focusableIfVisible && (fieldset = $(element).closest("fieldset")[0],
        fieldset && (focusableIfVisible = !fieldset.disabled))) : focusableIfVisible = "a" === nodeName ? element.href || hasTabindex : hasTabindex,
        focusableIfVisible && $(element).is(":visible") && visible($(element)))
    }
    ,
    $.extend($.expr[":"], {
        focusable: function(element) {
            return $.ui.focusable(element, null != $.attr(element, "tabindex"))
        }
    }),
    $.ui.focusable
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version"], factory) : factory(jQuery)
}(function($) {
    return $.fn.form = function() {
        return "string" == typeof this[0].form ? this.closest("form") : $(this[0].form)
    }
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version"], factory) : factory(jQuery)
}(function($) {
    return $.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version"], factory) : factory(jQuery)
}(function($) {
    return $.ui.keyCode = {
        BACKSPACE: 8,
        COMMA: 188,
        DELETE: 46,
        DOWN: 40,
        END: 35,
        ENTER: 13,
        ESCAPE: 27,
        HOME: 36,
        LEFT: 37,
        PAGE_DOWN: 34,
        PAGE_UP: 33,
        PERIOD: 190,
        RIGHT: 39,
        SPACE: 32,
        TAB: 9,
        UP: 38
    }
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version"], factory) : factory(jQuery)
}(function($) {
    return $.ui.escapeSelector = function() {
        var selectorEscape = /([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;
        return function(selector) {
            return selector.replace(selectorEscape, "\\$1")
        }
    }()
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version", "./escape-selector"], factory) : factory(jQuery)
}(function($) {
    return $.fn.labels = function() {
        var ancestor, selector, id, labels, ancestors;
        return this[0].labels && this[0].labels.length ? this.pushStack(this[0].labels) : (labels = this.eq(0).parents("label"),
        id = this.attr("id"),
        id && (ancestor = this.eq(0).parents().last(),
        ancestors = ancestor.add(ancestor.length ? ancestor.siblings() : this.siblings()),
        selector = "label[for='" + $.ui.escapeSelector(id) + "']",
        labels = labels.add(ancestors.find(selector).addBack(selector))),
        this.pushStack(labels))
    }
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version"], factory) : factory(jQuery)
}(function($) {
    "1.7" === $.fn.jquery.substring(0, 3) && ($.each(["Width", "Height"], function(i, name) {
        function reduce(elem, size, border, margin) {
            return $.each(side, function() {
                size -= parseFloat($.css(elem, "padding" + this)) || 0,
                border && (size -= parseFloat($.css(elem, "border" + this + "Width")) || 0),
                margin && (size -= parseFloat($.css(elem, "margin" + this)) || 0)
            }),
            size
        }
        var side = "Width" === name ? ["Left", "Right"] : ["Top", "Bottom"]
          , type = name.toLowerCase()
          , orig = {
            innerWidth: $.fn.innerWidth,
            innerHeight: $.fn.innerHeight,
            outerWidth: $.fn.outerWidth,
            outerHeight: $.fn.outerHeight
        };
        $.fn["inner" + name] = function(size) {
            return void 0 === size ? orig["inner" + name].call(this) : this.each(function() {
                $(this).css(type, reduce(this, size) + "px")
            })
        }
        ,
        $.fn["outer" + name] = function(size, margin) {
            return "number" != typeof size ? orig["outer" + name].call(this, size) : this.each(function() {
                $(this).css(type, reduce(this, size, !0, margin) + "px")
            })
        }
    }),
    $.fn.addBack = function(selector) {
        return this.add(null == selector ? this.prevObject : this.prevObject.filter(selector))
    }
    )
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version"], factory) : factory(jQuery)
}(function($) {
    return $.ui.plugin = {
        add: function(module, option, set) {
            var i, proto = $.ui[module].prototype;
            for (i in set)
                proto.plugins[i] = proto.plugins[i] || [],
                proto.plugins[i].push([option, set[i]])
        },
        call: function(instance, name, args, allowDisconnected) {
            var i, set = instance.plugins[name];
            if (set && (allowDisconnected || instance.element[0].parentNode && 11 !== instance.element[0].parentNode.nodeType))
                for (i = 0; i < set.length; i++)
                    instance.options[set[i][0]] && set[i][1].apply(instance.element, args)
        }
    }
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version"], factory) : factory(jQuery)
}(function($) {
    return $.ui.safeActiveElement = function(document) {
        var activeElement;
        try {
            activeElement = document.activeElement
        } catch (error) {
            activeElement = document.body
        }
        return activeElement || (activeElement = document.body),
        activeElement.nodeName || (activeElement = document.body),
        activeElement
    }
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version"], factory) : factory(jQuery)
}(function($) {
    return $.ui.safeBlur = function(element) {
        element && "body" !== element.nodeName.toLowerCase() && $(element).trigger("blur")
    }
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version"], factory) : factory(jQuery)
}(function($) {
    return $.fn.scrollParent = function(includeHidden) {
        var position = this.css("position")
          , excludeStaticParent = "absolute" === position
          , overflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/
          , scrollParent = this.parents().filter(function() {
            var parent = $(this);
            return excludeStaticParent && "static" === parent.css("position") ? !1 : overflowRegex.test(parent.css("overflow") + parent.css("overflow-y") + parent.css("overflow-x"))
        }).eq(0);
        return "fixed" !== position && scrollParent.length ? scrollParent : $(this[0].ownerDocument || document)
    }
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version", "./focusable"], factory) : factory(jQuery)
}(function($) {
    return $.extend($.expr[":"], {
        tabbable: function(element) {
            var tabIndex = $.attr(element, "tabindex")
              , hasTabindex = null != tabIndex;
            return (!hasTabindex || tabIndex >= 0) && $.ui.focusable(element, hasTabindex)
        }
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version"], factory) : factory(jQuery)
}(function($) {
    return $.fn.extend({
        uniqueId: function() {
            var uuid = 0;
            return function() {
                return this.each(function() {
                    this.id || (this.id = "ui-id-" + ++uuid)
                })
            }
        }(),
        removeUniqueId: function() {
            return this.each(function() {
                /^ui-id-\d+$/.test(this.id) && $(this).removeAttr("id")
            })
        }
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version"], factory) : factory(jQuery)
}(function($) {
    var dataSpace = "ui-effects-"
      , dataSpaceStyle = "ui-effects-style"
      , dataSpaceAnimated = "ui-effects-animated"
      , jQuery = $;
    return $.effects = {
        effect: {}
    },
    function(jQuery, undefined) {
        function clamp(value, prop, allowEmpty) {
            var type = propTypes[prop.type] || {};
            return null == value ? allowEmpty || !prop.def ? null : prop.def : (value = type.floor ? ~~value : parseFloat(value),
            isNaN(value) ? prop.def : type.mod ? (value + type.mod) % type.mod : 0 > value ? 0 : type.max < value ? type.max : value)
        }
        function stringParse(string) {
            var inst = color()
              , rgba = inst._rgba = [];
            return string = string.toLowerCase(),
            each(stringParsers, function(i, parser) {
                var parsed, match = parser.re.exec(string), values = match && parser.parse(match), spaceName = parser.space || "rgba";
                return values ? (parsed = inst[spaceName](values),
                inst[spaces[spaceName].cache] = parsed[spaces[spaceName].cache],
                rgba = inst._rgba = parsed._rgba,
                !1) : void 0
            }),
            rgba.length ? ("0,0,0,0" === rgba.join() && jQuery.extend(rgba, colors.transparent),
            inst) : colors[string]
        }
        function hue2rgb(p, q, h) {
            return h = (h + 1) % 1,
            1 > 6 * h ? p + (q - p) * h * 6 : 1 > 2 * h ? q : 2 > 3 * h ? p + (q - p) * (2 / 3 - h) * 6 : p
        }
        var colors, stepHooks = "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor", rplusequals = /^([\-+])=\s*(\d+\.?\d*)/, stringParsers = [{
            re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
            parse: function(execResult) {
                return [execResult[1], execResult[2], execResult[3], execResult[4]]
            }
        }, {
            re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
            parse: function(execResult) {
                return [2.55 * execResult[1], 2.55 * execResult[2], 2.55 * execResult[3], execResult[4]]
            }
        }, {
            re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
            parse: function(execResult) {
                return [parseInt(execResult[1], 16), parseInt(execResult[2], 16), parseInt(execResult[3], 16)]
            }
        }, {
            re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
            parse: function(execResult) {
                return [parseInt(execResult[1] + execResult[1], 16), parseInt(execResult[2] + execResult[2], 16), parseInt(execResult[3] + execResult[3], 16)]
            }
        }, {
            re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
            space: "hsla",
            parse: function(execResult) {
                return [execResult[1], execResult[2] / 100, execResult[3] / 100, execResult[4]]
            }
        }], color = jQuery.Color = function(color, green, blue, alpha) {
            return new jQuery.Color.fn.parse(color,green,blue,alpha)
        }
        , spaces = {
            rgba: {
                props: {
                    red: {
                        idx: 0,
                        type: "byte"
                    },
                    green: {
                        idx: 1,
                        type: "byte"
                    },
                    blue: {
                        idx: 2,
                        type: "byte"
                    }
                }
            },
            hsla: {
                props: {
                    hue: {
                        idx: 0,
                        type: "degrees"
                    },
                    saturation: {
                        idx: 1,
                        type: "percent"
                    },
                    lightness: {
                        idx: 2,
                        type: "percent"
                    }
                }
            }
        }, propTypes = {
            "byte": {
                floor: !0,
                max: 255
            },
            percent: {
                max: 1
            },
            degrees: {
                mod: 360,
                floor: !0
            }
        }, support = color.support = {}, supportElem = jQuery("<p>")[0], each = jQuery.each;
        supportElem.style.cssText = "background-color:rgba(1,1,1,.5)",
        support.rgba = supportElem.style.backgroundColor.indexOf("rgba") > -1,
        each(spaces, function(spaceName, space) {
            space.cache = "_" + spaceName,
            space.props.alpha = {
                idx: 3,
                type: "percent",
                def: 1
            }
        }),
        color.fn = jQuery.extend(color.prototype, {
            parse: function(red, green, blue, alpha) {
                if (red === undefined)
                    return this._rgba = [null, null, null, null],
                    this;
                (red.jquery || red.nodeType) && (red = jQuery(red).css(green),
                green = undefined);
                var inst = this
                  , type = jQuery.type(red)
                  , rgba = this._rgba = [];
                return green !== undefined && (red = [red, green, blue, alpha],
                type = "array"),
                "string" === type ? this.parse(stringParse(red) || colors._default) : "array" === type ? (each(spaces.rgba.props, function(key, prop) {
                    rgba[prop.idx] = clamp(red[prop.idx], prop)
                }),
                this) : "object" === type ? (red instanceof color ? each(spaces, function(spaceName, space) {
                    red[space.cache] && (inst[space.cache] = red[space.cache].slice())
                }) : each(spaces, function(spaceName, space) {
                    var cache = space.cache;
                    each(space.props, function(key, prop) {
                        if (!inst[cache] && space.to) {
                            if ("alpha" === key || null == red[key])
                                return;
                            inst[cache] = space.to(inst._rgba)
                        }
                        inst[cache][prop.idx] = clamp(red[key], prop, !0)
                    }),
                    inst[cache] && jQuery.inArray(null, inst[cache].slice(0, 3)) < 0 && (inst[cache][3] = 1,
                    space.from && (inst._rgba = space.from(inst[cache])))
                }),
                this) : void 0
            },
            is: function(compare) {
                var is = color(compare)
                  , same = !0
                  , inst = this;
                return each(spaces, function(_, space) {
                    var localCache, isCache = is[space.cache];
                    return isCache && (localCache = inst[space.cache] || space.to && space.to(inst._rgba) || [],
                    each(space.props, function(_, prop) {
                        return null != isCache[prop.idx] ? same = isCache[prop.idx] === localCache[prop.idx] : void 0
                    })),
                    same
                }),
                same
            },
            _space: function() {
                var used = []
                  , inst = this;
                return each(spaces, function(spaceName, space) {
                    inst[space.cache] && used.push(spaceName)
                }),
                used.pop()
            },
            transition: function(other, distance) {
                var end = color(other)
                  , spaceName = end._space()
                  , space = spaces[spaceName]
                  , startColor = 0 === this.alpha() ? color("transparent") : this
                  , start = startColor[space.cache] || space.to(startColor._rgba)
                  , result = start.slice();
                return end = end[space.cache],
                each(space.props, function(key, prop) {
                    var index = prop.idx
                      , startValue = start[index]
                      , endValue = end[index]
                      , type = propTypes[prop.type] || {};
                    null !== endValue && (null === startValue ? result[index] = endValue : (type.mod && (endValue - startValue > type.mod / 2 ? startValue += type.mod : startValue - endValue > type.mod / 2 && (startValue -= type.mod)),
                    result[index] = clamp((endValue - startValue) * distance + startValue, prop)))
                }),
                this[spaceName](result)
            },
            blend: function(opaque) {
                if (1 === this._rgba[3])
                    return this;
                var rgb = this._rgba.slice()
                  , a = rgb.pop()
                  , blend = color(opaque)._rgba;
                return color(jQuery.map(rgb, function(v, i) {
                    return (1 - a) * blend[i] + a * v
                }))
            },
            toRgbaString: function() {
                var prefix = "rgba("
                  , rgba = jQuery.map(this._rgba, function(v, i) {
                    return null == v ? i > 2 ? 1 : 0 : v
                });
                return 1 === rgba[3] && (rgba.pop(),
                prefix = "rgb("),
                prefix + rgba.join() + ")"
            },
            toHslaString: function() {
                var prefix = "hsla("
                  , hsla = jQuery.map(this.hsla(), function(v, i) {
                    return null == v && (v = i > 2 ? 1 : 0),
                    i && 3 > i && (v = Math.round(100 * v) + "%"),
                    v
                });
                return 1 === hsla[3] && (hsla.pop(),
                prefix = "hsl("),
                prefix + hsla.join() + ")"
            },
            toHexString: function(includeAlpha) {
                var rgba = this._rgba.slice()
                  , alpha = rgba.pop();
                return includeAlpha && rgba.push(~~(255 * alpha)),
                "#" + jQuery.map(rgba, function(v) {
                    return v = (v || 0).toString(16),
                    1 === v.length ? "0" + v : v
                }).join("")
            },
            toString: function() {
                return 0 === this._rgba[3] ? "transparent" : this.toRgbaString()
            }
        }),
        color.fn.parse.prototype = color.fn,
        spaces.hsla.to = function(rgba) {
            if (null == rgba[0] || null == rgba[1] || null == rgba[2])
                return [null, null, null, rgba[3]];
            var h, s, r = rgba[0] / 255, g = rgba[1] / 255, b = rgba[2] / 255, a = rgba[3], max = Math.max(r, g, b), min = Math.min(r, g, b), diff = max - min, add = max + min, l = .5 * add;
            return h = min === max ? 0 : r === max ? 60 * (g - b) / diff + 360 : g === max ? 60 * (b - r) / diff + 120 : 60 * (r - g) / diff + 240,
            s = 0 === diff ? 0 : .5 >= l ? diff / add : diff / (2 - add),
            [Math.round(h) % 360, s, l, null == a ? 1 : a]
        }
        ,
        spaces.hsla.from = function(hsla) {
            if (null == hsla[0] || null == hsla[1] || null == hsla[2])
                return [null, null, null, hsla[3]];
            var h = hsla[0] / 360
              , s = hsla[1]
              , l = hsla[2]
              , a = hsla[3]
              , q = .5 >= l ? l * (1 + s) : l + s - l * s
              , p = 2 * l - q;
            return [Math.round(255 * hue2rgb(p, q, h + 1 / 3)), Math.round(255 * hue2rgb(p, q, h)), Math.round(255 * hue2rgb(p, q, h - 1 / 3)), a]
        }
        ,
        each(spaces, function(spaceName, space) {
            var props = space.props
              , cache = space.cache
              , to = space.to
              , from = space.from;
            color.fn[spaceName] = function(value) {
                if (to && !this[cache] && (this[cache] = to(this._rgba)),
                value === undefined)
                    return this[cache].slice();
                var ret, type = jQuery.type(value), arr = "array" === type || "object" === type ? value : arguments, local = this[cache].slice();
                return each(props, function(key, prop) {
                    var val = arr["object" === type ? key : prop.idx];
                    null == val && (val = local[prop.idx]),
                    local[prop.idx] = clamp(val, prop)
                }),
                from ? (ret = color(from(local)),
                ret[cache] = local,
                ret) : color(local)
            }
            ,
            each(props, function(key, prop) {
                color.fn[key] || (color.fn[key] = function(value) {
                    var match, vtype = jQuery.type(value), fn = "alpha" === key ? this._hsla ? "hsla" : "rgba" : spaceName, local = this[fn](), cur = local[prop.idx];
                    return "undefined" === vtype ? cur : ("function" === vtype && (value = value.call(this, cur),
                    vtype = jQuery.type(value)),
                    null == value && prop.empty ? this : ("string" === vtype && (match = rplusequals.exec(value),
                    match && (value = cur + parseFloat(match[2]) * ("+" === match[1] ? 1 : -1))),
                    local[prop.idx] = value,
                    this[fn](local)))
                }
                )
            })
        }),
        color.hook = function(hook) {
            var hooks = hook.split(" ");
            each(hooks, function(i, hook) {
                jQuery.cssHooks[hook] = {
                    set: function(elem, value) {
                        var parsed, curElem, backgroundColor = "";
                        if ("transparent" !== value && ("string" !== jQuery.type(value) || (parsed = stringParse(value)))) {
                            if (value = color(parsed || value),
                            !support.rgba && 1 !== value._rgba[3]) {
                                for (curElem = "backgroundColor" === hook ? elem.parentNode : elem; ("" === backgroundColor || "transparent" === backgroundColor) && curElem && curElem.style; )
                                    try {
                                        backgroundColor = jQuery.css(curElem, "backgroundColor"),
                                        curElem = curElem.parentNode
                                    } catch (e) {}
                                value = value.blend(backgroundColor && "transparent" !== backgroundColor ? backgroundColor : "_default")
                            }
                            value = value.toRgbaString()
                        }
                        try {
                            elem.style[hook] = value
                        } catch (e) {}
                    }
                },
                jQuery.fx.step[hook] = function(fx) {
                    fx.colorInit || (fx.start = color(fx.elem, hook),
                    fx.end = color(fx.end),
                    fx.colorInit = !0),
                    jQuery.cssHooks[hook].set(fx.elem, fx.start.transition(fx.end, fx.pos))
                }
            })
        }
        ,
        color.hook(stepHooks),
        jQuery.cssHooks.borderColor = {
            expand: function(value) {
                var expanded = {};
                return each(["Top", "Right", "Bottom", "Left"], function(i, part) {
                    expanded["border" + part + "Color"] = value
                }),
                expanded
            }
        },
        colors = jQuery.Color.names = {
            aqua: "#00ffff",
            black: "#000000",
            blue: "#0000ff",
            fuchsia: "#ff00ff",
            gray: "#808080",
            green: "#008000",
            lime: "#00ff00",
            maroon: "#800000",
            navy: "#000080",
            olive: "#808000",
            purple: "#800080",
            red: "#ff0000",
            silver: "#c0c0c0",
            teal: "#008080",
            white: "#ffffff",
            yellow: "#ffff00",
            transparent: [null, null, null, 0],
            _default: "#ffffff"
        }
    }(jQuery),
    function() {
        function getElementStyles(elem) {
            var key, len, style = elem.ownerDocument.defaultView ? elem.ownerDocument.defaultView.getComputedStyle(elem, null) : elem.currentStyle, styles = {};
            if (style && style.length && style[0] && style[style[0]])
                for (len = style.length; len--; )
                    key = style[len],
                    "string" == typeof style[key] && (styles[$.camelCase(key)] = style[key]);
            else
                for (key in style)
                    "string" == typeof style[key] && (styles[key] = style[key]);
            return styles
        }
        function styleDifference(oldStyle, newStyle) {
            var name, value, diff = {};
            for (name in newStyle)
                value = newStyle[name],
                oldStyle[name] !== value && (shorthandStyles[name] || !$.fx.step[name] && isNaN(parseFloat(value)) || (diff[name] = value));
            return diff
        }
        var classAnimationActions = ["add", "remove", "toggle"]
          , shorthandStyles = {
            border: 1,
            borderBottom: 1,
            borderColor: 1,
            borderLeft: 1,
            borderRight: 1,
            borderTop: 1,
            borderWidth: 1,
            margin: 1,
            padding: 1
        };
        $.each(["borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle"], function(_, prop) {
            $.fx.step[prop] = function(fx) {
                ("none" !== fx.end && !fx.setAttr || 1 === fx.pos && !fx.setAttr) && (jQuery.style(fx.elem, prop, fx.end),
                fx.setAttr = !0)
            }
        }),
        $.fn.addBack || ($.fn.addBack = function(selector) {
            return this.add(null == selector ? this.prevObject : this.prevObject.filter(selector))
        }
        ),
        $.effects.animateClass = function(value, duration, easing, callback) {
            var o = $.speed(duration, easing, callback);
            return this.queue(function() {
                var applyClassChange, animated = $(this), baseClass = animated.attr("class") || "", allAnimations = o.children ? animated.find("*").addBack() : animated;
                allAnimations = allAnimations.map(function() {
                    var el = $(this);
                    return {
                        el: el,
                        start: getElementStyles(this)
                    }
                }),
                applyClassChange = function() {
                    $.each(classAnimationActions, function(i, action) {
                        value[action] && animated[action + "Class"](value[action])
                    })
                }
                ,
                applyClassChange(),
                allAnimations = allAnimations.map(function() {
                    return this.end = getElementStyles(this.el[0]),
                    this.diff = styleDifference(this.start, this.end),
                    this
                }),
                animated.attr("class", baseClass),
                allAnimations = allAnimations.map(function() {
                    var styleInfo = this
                      , dfd = $.Deferred()
                      , opts = $.extend({}, o, {
                        queue: !1,
                        complete: function() {
                            dfd.resolve(styleInfo)
                        }
                    });
                    return this.el.animate(this.diff, opts),
                    dfd.promise()
                }),
                $.when.apply($, allAnimations.get()).done(function() {
                    applyClassChange(),
                    $.each(arguments, function() {
                        var el = this.el;
                        $.each(this.diff, function(key) {
                            el.css(key, "")
                        })
                    }),
                    o.complete.call(animated[0])
                })
            })
        }
        ,
        $.fn.extend({
            addClass: function(orig) {
                return function(classNames, speed, easing, callback) {
                    return speed ? $.effects.animateClass.call(this, {
                        add: classNames
                    }, speed, easing, callback) : orig.apply(this, arguments)
                }
            }($.fn.addClass),
            removeClass: function(orig) {
                return function(classNames, speed, easing, callback) {
                    return arguments.length > 1 ? $.effects.animateClass.call(this, {
                        remove: classNames
                    }, speed, easing, callback) : orig.apply(this, arguments)
                }
            }($.fn.removeClass),
            toggleClass: function(orig) {
                return function(classNames, force, speed, easing, callback) {
                    return "boolean" == typeof force || void 0 === force ? speed ? $.effects.animateClass.call(this, force ? {
                        add: classNames
                    } : {
                        remove: classNames
                    }, speed, easing, callback) : orig.apply(this, arguments) : $.effects.animateClass.call(this, {
                        toggle: classNames
                    }, force, speed, easing)
                }
            }($.fn.toggleClass),
            switchClass: function(remove, add, speed, easing, callback) {
                return $.effects.animateClass.call(this, {
                    add: add,
                    remove: remove
                }, speed, easing, callback)
            }
        })
    }(),
    function() {
        function _normalizeArguments(effect, options, speed, callback) {
            return $.isPlainObject(effect) && (options = effect,
            effect = effect.effect),
            effect = {
                effect: effect
            },
            null == options && (options = {}),
            $.isFunction(options) && (callback = options,
            speed = null,
            options = {}),
            ("number" == typeof options || $.fx.speeds[options]) && (callback = speed,
            speed = options,
            options = {}),
            $.isFunction(speed) && (callback = speed,
            speed = null),
            options && $.extend(effect, options),
            speed = speed || options.duration,
            effect.duration = $.fx.off ? 0 : "number" == typeof speed ? speed : speed in $.fx.speeds ? $.fx.speeds[speed] : $.fx.speeds._default,
            effect.complete = callback || options.complete,
            effect
        }
        function standardAnimationOption(option) {
            return !option || "number" == typeof option || $.fx.speeds[option] ? !0 : "string" != typeof option || $.effects.effect[option] ? $.isFunction(option) ? !0 : "object" == typeof option && !option.effect : !0
        }
        function parseClip(str, element) {
            var outerWidth = element.outerWidth()
              , outerHeight = element.outerHeight()
              , clipRegex = /^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/
              , values = clipRegex.exec(str) || ["", 0, outerWidth, outerHeight, 0];
            return {
                top: parseFloat(values[1]) || 0,
                right: "auto" === values[2] ? outerWidth : parseFloat(values[2]),
                bottom: "auto" === values[3] ? outerHeight : parseFloat(values[3]),
                left: parseFloat(values[4]) || 0
            }
        }
        $.expr && $.expr.filters && $.expr.filters.animated && ($.expr.filters.animated = function(orig) {
            return function(elem) {
                return !!$(elem).data(dataSpaceAnimated) || orig(elem)
            }
        }($.expr.filters.animated)),
        $.uiBackCompat !== !1 && $.extend($.effects, {
            save: function(element, set) {
                for (var i = 0, length = set.length; length > i; i++)
                    null !== set[i] && element.data(dataSpace + set[i], element[0].style[set[i]])
            },
            restore: function(element, set) {
                for (var val, i = 0, length = set.length; length > i; i++)
                    null !== set[i] && (val = element.data(dataSpace + set[i]),
                    element.css(set[i], val))
            },
            setMode: function(el, mode) {
                return "toggle" === mode && (mode = el.is(":hidden") ? "show" : "hide"),
                mode
            },
            createWrapper: function(element) {
                if (element.parent().is(".ui-effects-wrapper"))
                    return element.parent();
                var props = {
                    width: element.outerWidth(!0),
                    height: element.outerHeight(!0),
                    "float": element.css("float")
                }
                  , wrapper = $("<div></div>").addClass("ui-effects-wrapper").css({
                    fontSize: "100%",
                    background: "transparent",
                    border: "none",
                    margin: 0,
                    padding: 0
                })
                  , size = {
                    width: element.width(),
                    height: element.height()
                }
                  , active = document.activeElement;
                try {
                    active.id
                } catch (e) {
                    active = document.body
                }
                return element.wrap(wrapper),
                (element[0] === active || $.contains(element[0], active)) && $(active).trigger("focus"),
                wrapper = element.parent(),
                "static" === element.css("position") ? (wrapper.css({
                    position: "relative"
                }),
                element.css({
                    position: "relative"
                })) : ($.extend(props, {
                    position: element.css("position"),
                    zIndex: element.css("z-index")
                }),
                $.each(["top", "left", "bottom", "right"], function(i, pos) {
                    props[pos] = element.css(pos),
                    isNaN(parseInt(props[pos], 10)) && (props[pos] = "auto")
                }),
                element.css({
                    position: "relative",
                    top: 0,
                    left: 0,
                    right: "auto",
                    bottom: "auto"
                })),
                element.css(size),
                wrapper.css(props).show()
            },
            removeWrapper: function(element) {
                var active = document.activeElement;
                return element.parent().is(".ui-effects-wrapper") && (element.parent().replaceWith(element),
                (element[0] === active || $.contains(element[0], active)) && $(active).trigger("focus")),
                element
            }
        }),
        $.extend($.effects, {
            version: "1.12.1",
            define: function(name, mode, effect) {
                return effect || (effect = mode,
                mode = "effect"),
                $.effects.effect[name] = effect,
                $.effects.effect[name].mode = mode,
                effect
            },
            scaledDimensions: function(element, percent, direction) {
                if (0 === percent)
                    return {
                        height: 0,
                        width: 0,
                        outerHeight: 0,
                        outerWidth: 0
                    };
                var x = "horizontal" !== direction ? (percent || 100) / 100 : 1
                  , y = "vertical" !== direction ? (percent || 100) / 100 : 1;
                return {
                    height: element.height() * y,
                    width: element.width() * x,
                    outerHeight: element.outerHeight() * y,
                    outerWidth: element.outerWidth() * x
                }
            },
            clipToBox: function(animation) {
                return {
                    width: animation.clip.right - animation.clip.left,
                    height: animation.clip.bottom - animation.clip.top,
                    left: animation.clip.left,
                    top: animation.clip.top
                }
            },
            unshift: function(element, queueLength, count) {
                var queue = element.queue();
                queueLength > 1 && queue.splice.apply(queue, [1, 0].concat(queue.splice(queueLength, count))),
                element.dequeue()
            },
            saveStyle: function(element) {
                element.data(dataSpaceStyle, element[0].style.cssText)
            },
            restoreStyle: function(element) {
                element[0].style.cssText = element.data(dataSpaceStyle) || "",
                element.removeData(dataSpaceStyle)
            },
            mode: function(element, mode) {
                var hidden = element.is(":hidden");
                return "toggle" === mode && (mode = hidden ? "show" : "hide"),
                (hidden ? "hide" === mode : "show" === mode) && (mode = "none"),
                mode
            },
            getBaseline: function(origin, original) {
                var y, x;
                switch (origin[0]) {
                case "top":
                    y = 0;
                    break;
                case "middle":
                    y = .5;
                    break;
                case "bottom":
                    y = 1;
                    break;
                default:
                    y = origin[0] / original.height
                }
                switch (origin[1]) {
                case "left":
                    x = 0;
                    break;
                case "center":
                    x = .5;
                    break;
                case "right":
                    x = 1;
                    break;
                default:
                    x = origin[1] / original.width
                }
                return {
                    x: x,
                    y: y
                }
            },
            createPlaceholder: function(element) {
                var placeholder, cssPosition = element.css("position"), position = element.position();
                return element.css({
                    marginTop: element.css("marginTop"),
                    marginBottom: element.css("marginBottom"),
                    marginLeft: element.css("marginLeft"),
                    marginRight: element.css("marginRight")
                }).outerWidth(element.outerWidth()).outerHeight(element.outerHeight()),
                /^(static|relative)/.test(cssPosition) && (cssPosition = "absolute",
                placeholder = $("<" + element[0].nodeName + ">").insertAfter(element).css({
                    display: /^(inline|ruby)/.test(element.css("display")) ? "inline-block" : "block",
                    visibility: "hidden",
                    marginTop: element.css("marginTop"),
                    marginBottom: element.css("marginBottom"),
                    marginLeft: element.css("marginLeft"),
                    marginRight: element.css("marginRight"),
                    "float": element.css("float")
                }).outerWidth(element.outerWidth()).outerHeight(element.outerHeight()).addClass("ui-effects-placeholder"),
                element.data(dataSpace + "placeholder", placeholder)),
                element.css({
                    position: cssPosition,
                    left: position.left,
                    top: position.top
                }),
                placeholder
            },
            removePlaceholder: function(element) {
                var dataKey = dataSpace + "placeholder"
                  , placeholder = element.data(dataKey);
                placeholder && (placeholder.remove(),
                element.removeData(dataKey))
            },
            cleanUp: function(element) {
                $.effects.restoreStyle(element),
                $.effects.removePlaceholder(element)
            },
            setTransition: function(element, list, factor, value) {
                return value = value || {},
                $.each(list, function(i, x) {
                    var unit = element.cssUnit(x);
                    unit[0] > 0 && (value[x] = unit[0] * factor + unit[1])
                }),
                value
            }
        }),
        $.fn.extend({
            effect: function() {
                function run(next) {
                    function cleanup() {
                        elem.removeData(dataSpaceAnimated),
                        $.effects.cleanUp(elem),
                        "hide" === args.mode && elem.hide(),
                        done()
                    }
                    function done() {
                        $.isFunction(complete) && complete.call(elem[0]),
                        $.isFunction(next) && next()
                    }
                    var elem = $(this);
                    args.mode = modes.shift(),
                    $.uiBackCompat === !1 || defaultMode ? "none" === args.mode ? (elem[mode](),
                    done()) : effectMethod.call(elem[0], args, cleanup) : (elem.is(":hidden") ? "hide" === mode : "show" === mode) ? (elem[mode](),
                    done()) : effectMethod.call(elem[0], args, done)
                }
                var args = _normalizeArguments.apply(this, arguments)
                  , effectMethod = $.effects.effect[args.effect]
                  , defaultMode = effectMethod.mode
                  , queue = args.queue
                  , queueName = queue || "fx"
                  , complete = args.complete
                  , mode = args.mode
                  , modes = []
                  , prefilter = function(next) {
                    var el = $(this)
                      , normalizedMode = $.effects.mode(el, mode) || defaultMode;
                    el.data(dataSpaceAnimated, !0),
                    modes.push(normalizedMode),
                    defaultMode && ("show" === normalizedMode || normalizedMode === defaultMode && "hide" === normalizedMode) && el.show(),
                    defaultMode && "none" === normalizedMode || $.effects.saveStyle(el),
                    $.isFunction(next) && next()
                };
                return $.fx.off || !effectMethod ? mode ? this[mode](args.duration, complete) : this.each(function() {
                    complete && complete.call(this)
                }) : queue === !1 ? this.each(prefilter).each(run) : this.queue(queueName, prefilter).queue(queueName, run)
            },
            show: function(orig) {
                return function(option) {
                    if (standardAnimationOption(option))
                        return orig.apply(this, arguments);
                    var args = _normalizeArguments.apply(this, arguments);
                    return args.mode = "show",
                    this.effect.call(this, args)
                }
            }($.fn.show),
            hide: function(orig) {
                return function(option) {
                    if (standardAnimationOption(option))
                        return orig.apply(this, arguments);
                    var args = _normalizeArguments.apply(this, arguments);
                    return args.mode = "hide",
                    this.effect.call(this, args)
                }
            }($.fn.hide),
            toggle: function(orig) {
                return function(option) {
                    if (standardAnimationOption(option) || "boolean" == typeof option)
                        return orig.apply(this, arguments);
                    var args = _normalizeArguments.apply(this, arguments);
                    return args.mode = "toggle",
                    this.effect.call(this, args)
                }
            }($.fn.toggle),
            cssUnit: function(key) {
                var style = this.css(key)
                  , val = [];
                return $.each(["em", "px", "%", "pt"], function(i, unit) {
                    style.indexOf(unit) > 0 && (val = [parseFloat(style), unit])
                }),
                val
            },
            cssClip: function(clipObj) {
                return clipObj ? this.css("clip", "rect(" + clipObj.top + "px " + clipObj.right + "px " + clipObj.bottom + "px " + clipObj.left + "px)") : parseClip(this.css("clip"), this)
            },
            transfer: function(options, done) {
                var element = $(this)
                  , target = $(options.to)
                  , targetFixed = "fixed" === target.css("position")
                  , body = $("body")
                  , fixTop = targetFixed ? body.scrollTop() : 0
                  , fixLeft = targetFixed ? body.scrollLeft() : 0
                  , endPosition = target.offset()
                  , animation = {
                    top: endPosition.top - fixTop,
                    left: endPosition.left - fixLeft,
                    height: target.innerHeight(),
                    width: target.innerWidth()
                }
                  , startPosition = element.offset()
                  , transfer = $("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(options.className).css({
                    top: startPosition.top - fixTop,
                    left: startPosition.left - fixLeft,
                    height: element.innerHeight(),
                    width: element.innerWidth(),
                    position: targetFixed ? "fixed" : "absolute"
                }).animate(animation, options.duration, options.easing, function() {
                    transfer.remove(),
                    $.isFunction(done) && done()
                })
            }
        }),
        $.fx.step.clip = function(fx) {
            fx.clipInit || (fx.start = $(fx.elem).cssClip(),
            "string" == typeof fx.end && (fx.end = parseClip(fx.end, fx.elem)),
            fx.clipInit = !0),
            $(fx.elem).cssClip({
                top: fx.pos * (fx.end.top - fx.start.top) + fx.start.top,
                right: fx.pos * (fx.end.right - fx.start.right) + fx.start.right,
                bottom: fx.pos * (fx.end.bottom - fx.start.bottom) + fx.start.bottom,
                left: fx.pos * (fx.end.left - fx.start.left) + fx.start.left
            })
        }
    }(),
    function() {
        var baseEasings = {};
        $.each(["Quad", "Cubic", "Quart", "Quint", "Expo"], function(i, name) {
            baseEasings[name] = function(p) {
                return Math.pow(p, i + 2)
            }
        }),
        $.extend(baseEasings, {
            Sine: function(p) {
                return 1 - Math.cos(p * Math.PI / 2)
            },
            Circ: function(p) {
                return 1 - Math.sqrt(1 - p * p)
            },
            Elastic: function(p) {
                return 0 === p || 1 === p ? p : -Math.pow(2, 8 * (p - 1)) * Math.sin((80 * (p - 1) - 7.5) * Math.PI / 15)
            },
            Back: function(p) {
                return p * p * (3 * p - 2)
            },
            Bounce: function(p) {
                for (var pow2, bounce = 4; p < ((pow2 = Math.pow(2, --bounce)) - 1) / 11; )
                    ;
                return 1 / Math.pow(4, 3 - bounce) - 7.5625 * Math.pow((3 * pow2 - 2) / 22 - p, 2)
            }
        }),
        $.each(baseEasings, function(name, easeIn) {
            $.easing["easeIn" + name] = easeIn,
            $.easing["easeOut" + name] = function(p) {
                return 1 - easeIn(1 - p)
            }
            ,
            $.easing["easeInOut" + name] = function(p) {
                return .5 > p ? easeIn(2 * p) / 2 : 1 - easeIn(-2 * p + 2) / 2
            }
        })
    }(),
    $.effects
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./form", "./version"], factory) : factory(jQuery)
}(function($) {
    return $.ui.formResetMixin = {
        _formResetHandler: function() {
            var form = $(this);
            setTimeout(function() {
                var instances = form.data("ui-form-reset-instances");
                $.each(instances, function() {
                    this.refresh()
                })
            })
        },
        _bindFormResetHandler: function() {
            if (this.form = this.element.form(),
            this.form.length) {
                var instances = this.form.data("ui-form-reset-instances") || [];
                instances.length || this.form.on("reset.ui-form-reset", this._formResetHandler),
                instances.push(this),
                this.form.data("ui-form-reset-instances", instances)
            }
        },
        _unbindFormResetHandler: function() {
            if (this.form.length) {
                var instances = this.form.data("ui-form-reset-instances");
                instances.splice($.inArray(this, instances), 1),
                instances.length ? this.form.data("ui-form-reset-instances", instances) : this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")
            }
        }
    }
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version"], factory) : factory(jQuery)
}(function($) {
    return function() {
        function getOffsets(offsets, width, height) {
            return [parseFloat(offsets[0]) * (rpercent.test(offsets[0]) ? width / 100 : 1), parseFloat(offsets[1]) * (rpercent.test(offsets[1]) ? height / 100 : 1)]
        }
        function parseCss(element, property) {
            return parseInt($.css(element, property), 10) || 0
        }
        function getDimensions(elem) {
            var raw = elem[0];
            return 9 === raw.nodeType ? {
                width: elem.width(),
                height: elem.height(),
                offset: {
                    top: 0,
                    left: 0
                }
            } : $.isWindow(raw) ? {
                width: elem.width(),
                height: elem.height(),
                offset: {
                    top: elem.scrollTop(),
                    left: elem.scrollLeft()
                }
            } : raw.preventDefault ? {
                width: 0,
                height: 0,
                offset: {
                    top: raw.pageY,
                    left: raw.pageX
                }
            } : {
                width: elem.outerWidth(),
                height: elem.outerHeight(),
                offset: elem.offset()
            }
        }
        var cachedScrollbarWidth, max = Math.max, abs = Math.abs, rhorizontal = /left|center|right/, rvertical = /top|center|bottom/, roffset = /[\+\-]\d+(\.[\d]+)?%?/, rposition = /^\w+/, rpercent = /%$/, _position = $.fn.position;
        $.position = {
            scrollbarWidth: function() {
                if (void 0 !== cachedScrollbarWidth)
                    return cachedScrollbarWidth;
                var w1, w2, div = $("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"), innerDiv = div.children()[0];
                return $("body").append(div),
                w1 = innerDiv.offsetWidth,
                div.css("overflow", "scroll"),
                w2 = innerDiv.offsetWidth,
                w1 === w2 && (w2 = div[0].clientWidth),
                div.remove(),
                cachedScrollbarWidth = w1 - w2
            },
            getScrollInfo: function(within) {
                var overflowX = within.isWindow || within.isDocument ? "" : within.element.css("overflow-x")
                  , overflowY = within.isWindow || within.isDocument ? "" : within.element.css("overflow-y")
                  , hasOverflowX = "scroll" === overflowX || "auto" === overflowX && within.width < within.element[0].scrollWidth
                  , hasOverflowY = "scroll" === overflowY || "auto" === overflowY && within.height < within.element[0].scrollHeight;
                return {
                    width: hasOverflowY ? $.position.scrollbarWidth() : 0,
                    height: hasOverflowX ? $.position.scrollbarWidth() : 0
                }
            },
            getWithinInfo: function(element) {
                var withinElement = $(element || window)
                  , isWindow = $.isWindow(withinElement[0])
                  , isDocument = !!withinElement[0] && 9 === withinElement[0].nodeType
                  , hasOffset = !isWindow && !isDocument;
                return {
                    element: withinElement,
                    isWindow: isWindow,
                    isDocument: isDocument,
                    offset: hasOffset ? $(element).offset() : {
                        left: 0,
                        top: 0
                    },
                    scrollLeft: withinElement.scrollLeft(),
                    scrollTop: withinElement.scrollTop(),
                    width: withinElement.outerWidth(),
                    height: withinElement.outerHeight()
                }
            }
        },
        $.fn.position = function(options) {
            if (!options || !options.of)
                return _position.apply(this, arguments);
            options = $.extend({}, options);
            var atOffset, targetWidth, targetHeight, targetOffset, basePosition, dimensions, target = $(options.of), within = $.position.getWithinInfo(options.within), scrollInfo = $.position.getScrollInfo(within), collision = (options.collision || "flip").split(" "), offsets = {};
            return dimensions = getDimensions(target),
            target[0].preventDefault && (options.at = "left top"),
            targetWidth = dimensions.width,
            targetHeight = dimensions.height,
            targetOffset = dimensions.offset,
            basePosition = $.extend({}, targetOffset),
            $.each(["my", "at"], function() {
                var horizontalOffset, verticalOffset, pos = (options[this] || "").split(" ");
                1 === pos.length && (pos = rhorizontal.test(pos[0]) ? pos.concat(["center"]) : rvertical.test(pos[0]) ? ["center"].concat(pos) : ["center", "center"]),
                pos[0] = rhorizontal.test(pos[0]) ? pos[0] : "center",
                pos[1] = rvertical.test(pos[1]) ? pos[1] : "center",
                horizontalOffset = roffset.exec(pos[0]),
                verticalOffset = roffset.exec(pos[1]),
                offsets[this] = [horizontalOffset ? horizontalOffset[0] : 0, verticalOffset ? verticalOffset[0] : 0],
                options[this] = [rposition.exec(pos[0])[0], rposition.exec(pos[1])[0]]
            }),
            1 === collision.length && (collision[1] = collision[0]),
            "right" === options.at[0] ? basePosition.left += targetWidth : "center" === options.at[0] && (basePosition.left += targetWidth / 2),
            "bottom" === options.at[1] ? basePosition.top += targetHeight : "center" === options.at[1] && (basePosition.top += targetHeight / 2),
            atOffset = getOffsets(offsets.at, targetWidth, targetHeight),
            basePosition.left += atOffset[0],
            basePosition.top += atOffset[1],
            this.each(function() {
                var collisionPosition, using, elem = $(this), elemWidth = elem.outerWidth(), elemHeight = elem.outerHeight(), marginLeft = parseCss(this, "marginLeft"), marginTop = parseCss(this, "marginTop"), collisionWidth = elemWidth + marginLeft + parseCss(this, "marginRight") + scrollInfo.width, collisionHeight = elemHeight + marginTop + parseCss(this, "marginBottom") + scrollInfo.height, position = $.extend({}, basePosition), myOffset = getOffsets(offsets.my, elem.outerWidth(), elem.outerHeight());
                "right" === options.my[0] ? position.left -= elemWidth : "center" === options.my[0] && (position.left -= elemWidth / 2),
                "bottom" === options.my[1] ? position.top -= elemHeight : "center" === options.my[1] && (position.top -= elemHeight / 2),
                position.left += myOffset[0],
                position.top += myOffset[1],
                collisionPosition = {
                    marginLeft: marginLeft,
                    marginTop: marginTop
                },
                $.each(["left", "top"], function(i, dir) {
                    $.ui.position[collision[i]] && $.ui.position[collision[i]][dir](position, {
                        targetWidth: targetWidth,
                        targetHeight: targetHeight,
                        elemWidth: elemWidth,
                        elemHeight: elemHeight,
                        collisionPosition: collisionPosition,
                        collisionWidth: collisionWidth,
                        collisionHeight: collisionHeight,
                        offset: [atOffset[0] + myOffset[0], atOffset[1] + myOffset[1]],
                        my: options.my,
                        at: options.at,
                        within: within,
                        elem: elem
                    })
                }),
                options.using && (using = function(props) {
                    var left = targetOffset.left - position.left
                      , right = left + targetWidth - elemWidth
                      , top = targetOffset.top - position.top
                      , bottom = top + targetHeight - elemHeight
                      , feedback = {
                        target: {
                            element: target,
                            left: targetOffset.left,
                            top: targetOffset.top,
                            width: targetWidth,
                            height: targetHeight
                        },
                        element: {
                            element: elem,
                            left: position.left,
                            top: position.top,
                            width: elemWidth,
                            height: elemHeight
                        },
                        horizontal: 0 > right ? "left" : left > 0 ? "right" : "center",
                        vertical: 0 > bottom ? "top" : top > 0 ? "bottom" : "middle"
                    };
                    elemWidth > targetWidth && abs(left + right) < targetWidth && (feedback.horizontal = "center"),
                    elemHeight > targetHeight && abs(top + bottom) < targetHeight && (feedback.vertical = "middle"),
                    max(abs(left), abs(right)) > max(abs(top), abs(bottom)) ? feedback.important = "horizontal" : feedback.important = "vertical",
                    options.using.call(this, props, feedback)
                }
                ),
                elem.offset($.extend(position, {
                    using: using
                }))
            })
        }
        ,
        $.ui.position = {
            fit: {
                left: function(position, data) {
                    var newOverRight, within = data.within, withinOffset = within.isWindow ? within.scrollLeft : within.offset.left, outerWidth = within.width, collisionPosLeft = position.left - data.collisionPosition.marginLeft, overLeft = withinOffset - collisionPosLeft, overRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset;
                    data.collisionWidth > outerWidth ? overLeft > 0 && 0 >= overRight ? (newOverRight = position.left + overLeft + data.collisionWidth - outerWidth - withinOffset,
                    position.left += overLeft - newOverRight) : overRight > 0 && 0 >= overLeft ? position.left = withinOffset : overLeft > overRight ? position.left = withinOffset + outerWidth - data.collisionWidth : position.left = withinOffset : overLeft > 0 ? position.left += overLeft : overRight > 0 ? position.left -= overRight : position.left = max(position.left - collisionPosLeft, position.left)
                },
                top: function(position, data) {
                    var newOverBottom, within = data.within, withinOffset = within.isWindow ? within.scrollTop : within.offset.top, outerHeight = data.within.height, collisionPosTop = position.top - data.collisionPosition.marginTop, overTop = withinOffset - collisionPosTop, overBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset;
                    data.collisionHeight > outerHeight ? overTop > 0 && 0 >= overBottom ? (newOverBottom = position.top + overTop + data.collisionHeight - outerHeight - withinOffset,
                    position.top += overTop - newOverBottom) : overBottom > 0 && 0 >= overTop ? position.top = withinOffset : overTop > overBottom ? position.top = withinOffset + outerHeight - data.collisionHeight : position.top = withinOffset : overTop > 0 ? position.top += overTop : overBottom > 0 ? position.top -= overBottom : position.top = max(position.top - collisionPosTop, position.top)
                }
            },
            flip: {
                left: function(position, data) {
                    var newOverRight, newOverLeft, within = data.within, withinOffset = within.offset.left + within.scrollLeft, outerWidth = within.width, offsetLeft = within.isWindow ? within.scrollLeft : within.offset.left, collisionPosLeft = position.left - data.collisionPosition.marginLeft, overLeft = collisionPosLeft - offsetLeft, overRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft, myOffset = "left" === data.my[0] ? -data.elemWidth : "right" === data.my[0] ? data.elemWidth : 0, atOffset = "left" === data.at[0] ? data.targetWidth : "right" === data.at[0] ? -data.targetWidth : 0, offset = -2 * data.offset[0];
                    0 > overLeft ? (newOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth - outerWidth - withinOffset,
                    (0 > newOverRight || newOverRight < abs(overLeft)) && (position.left += myOffset + atOffset + offset)) : overRight > 0 && (newOverLeft = position.left - data.collisionPosition.marginLeft + myOffset + atOffset + offset - offsetLeft,
                    (newOverLeft > 0 || abs(newOverLeft) < overRight) && (position.left += myOffset + atOffset + offset))
                },
                top: function(position, data) {
                    var newOverTop, newOverBottom, within = data.within, withinOffset = within.offset.top + within.scrollTop, outerHeight = within.height, offsetTop = within.isWindow ? within.scrollTop : within.offset.top, collisionPosTop = position.top - data.collisionPosition.marginTop, overTop = collisionPosTop - offsetTop, overBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop, top = "top" === data.my[1], myOffset = top ? -data.elemHeight : "bottom" === data.my[1] ? data.elemHeight : 0, atOffset = "top" === data.at[1] ? data.targetHeight : "bottom" === data.at[1] ? -data.targetHeight : 0, offset = -2 * data.offset[1];
                    0 > overTop ? (newOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight - outerHeight - withinOffset,
                    (0 > newOverBottom || newOverBottom < abs(overTop)) && (position.top += myOffset + atOffset + offset)) : overBottom > 0 && (newOverTop = position.top - data.collisionPosition.marginTop + myOffset + atOffset + offset - offsetTop,
                    (newOverTop > 0 || abs(newOverTop) < overBottom) && (position.top += myOffset + atOffset + offset))
                }
            },
            flipfit: {
                left: function() {
                    $.ui.position.flip.left.apply(this, arguments),
                    $.ui.position.fit.left.apply(this, arguments)
                },
                top: function() {
                    $.ui.position.flip.top.apply(this, arguments),
                    $.ui.position.fit.top.apply(this, arguments)
                }
            }
        }
    }(),
    $.ui.position
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./version"], factory) : factory(jQuery)
}(function($) {
    var widgetUuid = 0
      , widgetSlice = Array.prototype.slice;
    return $.cleanData = function(orig) {
        return function(elems) {
            var events, elem, i;
            for (i = 0; null != (elem = elems[i]); i++)
                try {
                    events = $._data(elem, "events"),
                    events && events.remove && $(elem).triggerHandler("remove")
                } catch (e) {}
            orig(elems)
        }
    }($.cleanData),
    $.widget = function(name, base, prototype) {
        var existingConstructor, constructor, basePrototype, proxiedPrototype = {}, namespace = name.split(".")[0];
        name = name.split(".")[1];
        var fullName = namespace + "-" + name;
        return prototype || (prototype = base,
        base = $.Widget),
        $.isArray(prototype) && (prototype = $.extend.apply(null, [{}].concat(prototype))),
        $.expr[":"][fullName.toLowerCase()] = function(elem) {
            return !!$.data(elem, fullName)
        }
        ,
        $[namespace] = $[namespace] || {},
        existingConstructor = $[namespace][name],
        constructor = $[namespace][name] = function(options, element) {
            return this._createWidget ? void (arguments.length && this._createWidget(options, element)) : new constructor(options,element)
        }
        ,
        $.extend(constructor, existingConstructor, {
            version: prototype.version,
            _proto: $.extend({}, prototype),
            _childConstructors: []
        }),
        basePrototype = new base,
        basePrototype.options = $.widget.extend({}, basePrototype.options),
        $.each(prototype, function(prop, value) {
            return $.isFunction(value) ? void (proxiedPrototype[prop] = function() {
                function _super() {
                    return base.prototype[prop].apply(this, arguments)
                }
                function _superApply(args) {
                    return base.prototype[prop].apply(this, args)
                }
                return function() {
                    var returnValue, __super = this._super, __superApply = this._superApply;
                    return this._super = _super,
                    this._superApply = _superApply,
                    returnValue = value.apply(this, arguments),
                    this._super = __super,
                    this._superApply = __superApply,
                    returnValue
                }
            }()) : void (proxiedPrototype[prop] = value)
        }),
        constructor.prototype = $.widget.extend(basePrototype, {
            widgetEventPrefix: existingConstructor ? basePrototype.widgetEventPrefix || name : name
        }, proxiedPrototype, {
            constructor: constructor,
            namespace: namespace,
            widgetName: name,
            widgetFullName: fullName
        }),
        existingConstructor ? ($.each(existingConstructor._childConstructors, function(i, child) {
            var childPrototype = child.prototype;
            $.widget(childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto)
        }),
        delete existingConstructor._childConstructors) : base._childConstructors.push(constructor),
        $.widget.bridge(name, constructor),
        constructor
    }
    ,
    $.widget.extend = function(target) {
        for (var key, value, input = widgetSlice.call(arguments, 1), inputIndex = 0, inputLength = input.length; inputLength > inputIndex; inputIndex++)
            for (key in input[inputIndex])
                value = input[inputIndex][key],
                input[inputIndex].hasOwnProperty(key) && void 0 !== value && ($.isPlainObject(value) ? target[key] = $.isPlainObject(target[key]) ? $.widget.extend({}, target[key], value) : $.widget.extend({}, value) : target[key] = value);
        return target
    }
    ,
    $.widget.bridge = function(name, object) {
        var fullName = object.prototype.widgetFullName || name;
        $.fn[name] = function(options) {
            var isMethodCall = "string" == typeof options
              , args = widgetSlice.call(arguments, 1)
              , returnValue = this;
            return isMethodCall ? this.length || "instance" !== options ? this.each(function() {
                var methodValue, instance = $.data(this, fullName);
                return "instance" === options ? (returnValue = instance,
                !1) : instance ? $.isFunction(instance[options]) && "_" !== options.charAt(0) ? (methodValue = instance[options].apply(instance, args),
                methodValue !== instance && void 0 !== methodValue ? (returnValue = methodValue && methodValue.jquery ? returnValue.pushStack(methodValue.get()) : methodValue,
                !1) : void 0) : $.error("no such method '" + options + "' for " + name + " widget instance") : $.error("cannot call methods on " + name + " prior to initialization; attempted to call method '" + options + "'")
            }) : returnValue = void 0 : (args.length && (options = $.widget.extend.apply(null, [options].concat(args))),
            this.each(function() {
                var instance = $.data(this, fullName);
                instance ? (instance.option(options || {}),
                instance._init && instance._init()) : $.data(this, fullName, new object(options,this))
            })),
            returnValue
        }
    }
    ,
    $.Widget = function() {}
    ,
    $.Widget._childConstructors = [],
    $.Widget.prototype = {
        widgetName: "widget",
        widgetEventPrefix: "",
        defaultElement: "<div>",
        options: {
            classes: {},
            disabled: !1,
            create: null
        },
        _createWidget: function(options, element) {
            element = $(element || this.defaultElement || this)[0],
            this.element = $(element),
            this.uuid = widgetUuid++,
            this.eventNamespace = "." + this.widgetName + this.uuid,
            this.bindings = $(),
            this.hoverable = $(),
            this.focusable = $(),
            this.classesElementLookup = {},
            element !== this && ($.data(element, this.widgetFullName, this),
            this._on(!0, this.element, {
                remove: function(event) {
                    event.target === element && this.destroy()
                }
            }),
            this.document = $(element.style ? element.ownerDocument : element.document || element),
            this.window = $(this.document[0].defaultView || this.document[0].parentWindow)),
            this.options = $.widget.extend({}, this.options, this._getCreateOptions(), options),
            this._create(),
            this.options.disabled && this._setOptionDisabled(this.options.disabled),
            this._trigger("create", null, this._getCreateEventData()),
            this._init()
        },
        _getCreateOptions: function() {
            return {}
        },
        _getCreateEventData: $.noop,
        _create: $.noop,
        _init: $.noop,
        destroy: function() {
            var that = this;
            this._destroy(),
            $.each(this.classesElementLookup, function(key, value) {
                that._removeClass(value, key)
            }),
            this.element.off(this.eventNamespace).removeData(this.widgetFullName),
            this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),
            this.bindings.off(this.eventNamespace)
        },
        _destroy: $.noop,
        widget: function() {
            return this.element
        },
        option: function(key, value) {
            var parts, curOption, i, options = key;
            if (0 === arguments.length)
                return $.widget.extend({}, this.options);
            if ("string" == typeof key)
                if (options = {},
                parts = key.split("."),
                key = parts.shift(),
                parts.length) {
                    for (curOption = options[key] = $.widget.extend({}, this.options[key]),
                    i = 0; i < parts.length - 1; i++)
                        curOption[parts[i]] = curOption[parts[i]] || {},
                        curOption = curOption[parts[i]];
                    if (key = parts.pop(),
                    1 === arguments.length)
                        return void 0 === curOption[key] ? null : curOption[key];
                    curOption[key] = value
                } else {
                    if (1 === arguments.length)
                        return void 0 === this.options[key] ? null : this.options[key];
                    options[key] = value
                }
            return this._setOptions(options),
            this
        },
        _setOptions: function(options) {
            var key;
            for (key in options)
                this._setOption(key, options[key]);
            return this
        },
        _setOption: function(key, value) {
            return "classes" === key && this._setOptionClasses(value),
            this.options[key] = value,
            "disabled" === key && this._setOptionDisabled(value),
            this
        },
        _setOptionClasses: function(value) {
            var classKey, elements, currentElements;
            for (classKey in value)
                currentElements = this.classesElementLookup[classKey],
                value[classKey] !== this.options.classes[classKey] && currentElements && currentElements.length && (elements = $(currentElements.get()),
                this._removeClass(currentElements, classKey),
                elements.addClass(this._classes({
                    element: elements,
                    keys: classKey,
                    classes: value,
                    add: !0
                })))
        },
        _setOptionDisabled: function(value) {
            this._toggleClass(this.widget(), this.widgetFullName + "-disabled", null, !!value),
            value && (this._removeClass(this.hoverable, null, "ui-state-hover"),
            this._removeClass(this.focusable, null, "ui-state-focus"))
        },
        enable: function() {
            return this._setOptions({
                disabled: !1
            })
        },
        disable: function() {
            return this._setOptions({
                disabled: !0
            })
        },
        _classes: function(options) {
            function processClassString(classes, checkOption) {
                var current, i;
                for (i = 0; i < classes.length; i++)
                    current = that.classesElementLookup[classes[i]] || $(),
                    current = $(options.add ? $.unique(current.get().concat(options.element.get())) : current.not(options.element).get()),
                    that.classesElementLookup[classes[i]] = current,
                    full.push(classes[i]),
                    checkOption && options.classes[classes[i]] && full.push(options.classes[classes[i]])
            }
            var full = []
              , that = this;
            return options = $.extend({
                element: this.element,
                classes: this.options.classes || {}
            }, options),
            this._on(options.element, {
                remove: "_untrackClassesElement"
            }),
            options.keys && processClassString(options.keys.match(/\S+/g) || [], !0),
            options.extra && processClassString(options.extra.match(/\S+/g) || []),
            full.join(" ")
        },
        _untrackClassesElement: function(event) {
            var that = this;
            $.each(that.classesElementLookup, function(key, value) {
                -1 !== $.inArray(event.target, value) && (that.classesElementLookup[key] = $(value.not(event.target).get()))
            })
        },
        _removeClass: function(element, keys, extra) {
            return this._toggleClass(element, keys, extra, !1)
        },
        _addClass: function(element, keys, extra) {
            return this._toggleClass(element, keys, extra, !0)
        },
        _toggleClass: function(element, keys, extra, add) {
            add = "boolean" == typeof add ? add : extra;
            var shift = "string" == typeof element || null === element
              , options = {
                extra: shift ? keys : extra,
                keys: shift ? element : keys,
                element: shift ? this.element : element,
                add: add
            };
            return options.element.toggleClass(this._classes(options), add),
            this
        },
        _on: function(suppressDisabledCheck, element, handlers) {
            var delegateElement, instance = this;
            "boolean" != typeof suppressDisabledCheck && (handlers = element,
            element = suppressDisabledCheck,
            suppressDisabledCheck = !1),
            handlers ? (element = delegateElement = $(element),
            this.bindings = this.bindings.add(element)) : (handlers = element,
            element = this.element,
            delegateElement = this.widget()),
            $.each(handlers, function(event, handler) {
                function handlerProxy() {
                    return suppressDisabledCheck || instance.options.disabled !== !0 && !$(this).hasClass("ui-state-disabled") ? ("string" == typeof handler ? instance[handler] : handler).apply(instance, arguments) : void 0
                }
                "string" != typeof handler && (handlerProxy.guid = handler.guid = handler.guid || handlerProxy.guid || $.guid++);
                var match = event.match(/^([\w:-]*)\s*(.*)$/)
                  , eventName = match[1] + instance.eventNamespace
                  , selector = match[2];
                selector ? delegateElement.on(eventName, selector, handlerProxy) : element.on(eventName, handlerProxy)
            })
        },
        _off: function(element, eventName) {
            eventName = (eventName || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace,
            element.off(eventName).off(eventName),
            this.bindings = $(this.bindings.not(element).get()),
            this.focusable = $(this.focusable.not(element).get()),
            this.hoverable = $(this.hoverable.not(element).get())
        },
        _delay: function(handler, delay) {
            function handlerProxy() {
                return ("string" == typeof handler ? instance[handler] : handler).apply(instance, arguments)
            }
            var instance = this;
            return setTimeout(handlerProxy, delay || 0)
        },
        _hoverable: function(element) {
            this.hoverable = this.hoverable.add(element),
            this._on(element, {
                mouseenter: function(event) {
                    this._addClass($(event.currentTarget), null, "ui-state-hover")
                },
                mouseleave: function(event) {
                    this._removeClass($(event.currentTarget), null, "ui-state-hover")
                }
            })
        },
        _focusable: function(element) {
            this.focusable = this.focusable.add(element),
            this._on(element, {
                focusin: function(event) {
                    this._addClass($(event.currentTarget), null, "ui-state-focus")
                },
                focusout: function(event) {
                    this._removeClass($(event.currentTarget), null, "ui-state-focus")
                }
            })
        },
        _trigger: function(type, event, data) {
            var prop, orig, callback = this.options[type];
            if (data = data || {},
            event = $.Event(event),
            event.type = (type === this.widgetEventPrefix ? type : this.widgetEventPrefix + type).toLowerCase(),
            event.target = this.element[0],
            orig = event.originalEvent)
                for (prop in orig)
                    prop in event || (event[prop] = orig[prop]);
            return this.element.trigger(event, data),
            !($.isFunction(callback) && callback.apply(this.element[0], [event].concat(data)) === !1 || event.isDefaultPrevented())
        }
    },
    $.each({
        show: "fadeIn",
        hide: "fadeOut"
    }, function(method, defaultEffect) {
        $.Widget.prototype["_" + method] = function(element, options, callback) {
            "string" == typeof options && (options = {
                effect: options
            });
            var hasOptions, effectName = options ? options === !0 || "number" == typeof options ? defaultEffect : options.effect || defaultEffect : method;
            options = options || {},
            "number" == typeof options && (options = {
                duration: options
            }),
            hasOptions = !$.isEmptyObject(options),
            options.complete = callback,
            options.delay && element.delay(options.delay),
            hasOptions && $.effects && $.effects.effect[effectName] ? element[method](options) : effectName !== method && element[effectName] ? element[effectName](options.duration, options.easing, callback) : element.queue(function(next) {
                $(this)[method](),
                callback && callback.call(element[0]),
                next()
            })
        }
    }),
    $.widget
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../effect"], factory) : factory(jQuery)
}(function($) {
    return $.effects.define("blind", "hide", function(options, done) {
        var map = {
            up: ["bottom", "top"],
            vertical: ["bottom", "top"],
            down: ["top", "bottom"],
            left: ["right", "left"],
            horizontal: ["right", "left"],
            right: ["left", "right"]
        }
          , element = $(this)
          , direction = options.direction || "up"
          , start = element.cssClip()
          , animate = {
            clip: $.extend({}, start)
        }
          , placeholder = $.effects.createPlaceholder(element);
        animate.clip[map[direction][0]] = animate.clip[map[direction][1]],
        "show" === options.mode && (element.cssClip(animate.clip),
        placeholder && placeholder.css($.effects.clipToBox(animate)),
        animate.clip = start),
        placeholder && placeholder.animate($.effects.clipToBox(animate), options.duration, options.easing),
        element.animate(animate, {
            queue: !1,
            duration: options.duration,
            easing: options.easing,
            complete: done
        })
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../effect"], factory) : factory(jQuery)
}(function($) {
    return $.effects.define("bounce", function(options, done) {
        var upAnim, downAnim, refValue, element = $(this), mode = options.mode, hide = "hide" === mode, show = "show" === mode, direction = options.direction || "up", distance = options.distance, times = options.times || 5, anims = 2 * times + (show || hide ? 1 : 0), speed = options.duration / anims, easing = options.easing, ref = "up" === direction || "down" === direction ? "top" : "left", motion = "up" === direction || "left" === direction, i = 0, queuelen = element.queue().length;
        for ($.effects.createPlaceholder(element),
        refValue = element.css(ref),
        distance || (distance = element["top" === ref ? "outerHeight" : "outerWidth"]() / 3),
        show && (downAnim = {
            opacity: 1
        },
        downAnim[ref] = refValue,
        element.css("opacity", 0).css(ref, motion ? 2 * -distance : 2 * distance).animate(downAnim, speed, easing)),
        hide && (distance /= Math.pow(2, times - 1)),
        downAnim = {},
        downAnim[ref] = refValue; times > i; i++)
            upAnim = {},
            upAnim[ref] = (motion ? "-=" : "+=") + distance,
            element.animate(upAnim, speed, easing).animate(downAnim, speed, easing),
            distance = hide ? 2 * distance : distance / 2;
        hide && (upAnim = {
            opacity: 0
        },
        upAnim[ref] = (motion ? "-=" : "+=") + distance,
        element.animate(upAnim, speed, easing)),
        element.queue(done),
        $.effects.unshift(element, queuelen, anims + 1)
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../effect"], factory) : factory(jQuery)
}(function($) {
    return $.effects.define("clip", "hide", function(options, done) {
        var start, animate = {}, element = $(this), direction = options.direction || "vertical", both = "both" === direction, horizontal = both || "horizontal" === direction, vertical = both || "vertical" === direction;
        start = element.cssClip(),
        animate.clip = {
            top: vertical ? (start.bottom - start.top) / 2 : start.top,
            right: horizontal ? (start.right - start.left) / 2 : start.right,
            bottom: vertical ? (start.bottom - start.top) / 2 : start.bottom,
            left: horizontal ? (start.right - start.left) / 2 : start.left
        },
        $.effects.createPlaceholder(element),
        "show" === options.mode && (element.cssClip(animate.clip),
        animate.clip = start),
        element.animate(animate, {
            queue: !1,
            duration: options.duration,
            easing: options.easing,
            complete: done
        })
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../effect"], factory) : factory(jQuery)
}(function($) {
    return $.effects.define("drop", "hide", function(options, done) {
        var distance, element = $(this), mode = options.mode, show = "show" === mode, direction = options.direction || "left", ref = "up" === direction || "down" === direction ? "top" : "left", motion = "up" === direction || "left" === direction ? "-=" : "+=", oppositeMotion = "+=" === motion ? "-=" : "+=", animation = {
            opacity: 0
        };
        $.effects.createPlaceholder(element),
        distance = options.distance || element["top" === ref ? "outerHeight" : "outerWidth"](!0) / 2,
        animation[ref] = motion + distance,
        show && (element.css(animation),
        animation[ref] = oppositeMotion + distance,
        animation.opacity = 1),
        element.animate(animation, {
            queue: !1,
            duration: options.duration,
            easing: options.easing,
            complete: done
        })
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../effect"], factory) : factory(jQuery)
}(function($) {
    return $.effects.define("explode", "hide", function(options, done) {
        function childComplete() {
            pieces.push(this),
            pieces.length === rows * cells && animComplete()
        }
        function animComplete() {
            element.css({
                visibility: "visible"
            }),
            $(pieces).remove(),
            done()
        }
        var i, j, left, top, mx, my, rows = options.pieces ? Math.round(Math.sqrt(options.pieces)) : 3, cells = rows, element = $(this), mode = options.mode, show = "show" === mode, offset = element.show().css("visibility", "hidden").offset(), width = Math.ceil(element.outerWidth() / cells), height = Math.ceil(element.outerHeight() / rows), pieces = [];
        for (i = 0; rows > i; i++)
            for (top = offset.top + i * height,
            my = i - (rows - 1) / 2,
            j = 0; cells > j; j++)
                left = offset.left + j * width,
                mx = j - (cells - 1) / 2,
                element.clone().appendTo("body").wrap("<div></div>").css({
                    position: "absolute",
                    visibility: "visible",
                    left: -j * width,
                    top: -i * height
                }).parent().addClass("ui-effects-explode").css({
                    position: "absolute",
                    overflow: "hidden",
                    width: width,
                    height: height,
                    left: left + (show ? mx * width : 0),
                    top: top + (show ? my * height : 0),
                    opacity: show ? 0 : 1
                }).animate({
                    left: left + (show ? 0 : mx * width),
                    top: top + (show ? 0 : my * height),
                    opacity: show ? 1 : 0
                }, options.duration || 500, options.easing, childComplete)
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../effect"], factory) : factory(jQuery)
}(function($) {
    return $.effects.define("fade", "toggle", function(options, done) {
        var show = "show" === options.mode;
        $(this).css("opacity", show ? 0 : 1).animate({
            opacity: show ? 1 : 0
        }, {
            queue: !1,
            duration: options.duration,
            easing: options.easing,
            complete: done
        })
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../effect"], factory) : factory(jQuery)
}(function($) {
    return $.effects.define("fold", "hide", function(options, done) {
        var element = $(this)
          , mode = options.mode
          , show = "show" === mode
          , hide = "hide" === mode
          , size = options.size || 15
          , percent = /([0-9]+)%/.exec(size)
          , horizFirst = !!options.horizFirst
          , ref = horizFirst ? ["right", "bottom"] : ["bottom", "right"]
          , duration = options.duration / 2
          , placeholder = $.effects.createPlaceholder(element)
          , start = element.cssClip()
          , animation1 = {
            clip: $.extend({}, start)
        }
          , animation2 = {
            clip: $.extend({}, start)
        }
          , distance = [start[ref[0]], start[ref[1]]]
          , queuelen = element.queue().length;
        percent && (size = parseInt(percent[1], 10) / 100 * distance[hide ? 0 : 1]),
        animation1.clip[ref[0]] = size,
        animation2.clip[ref[0]] = size,
        animation2.clip[ref[1]] = 0,
        show && (element.cssClip(animation2.clip),
        placeholder && placeholder.css($.effects.clipToBox(animation2)),
        animation2.clip = start),
        element.queue(function(next) {
            placeholder && placeholder.animate($.effects.clipToBox(animation1), duration, options.easing).animate($.effects.clipToBox(animation2), duration, options.easing),
            next()
        }).animate(animation1, duration, options.easing).animate(animation2, duration, options.easing).queue(done),
        $.effects.unshift(element, queuelen, 4)
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../effect"], factory) : factory(jQuery)
}(function($) {
    return $.effects.define("highlight", "show", function(options, done) {
        var element = $(this)
          , animation = {
            backgroundColor: element.css("backgroundColor")
        };
        "hide" === options.mode && (animation.opacity = 0),
        $.effects.saveStyle(element),
        element.css({
            backgroundImage: "none",
            backgroundColor: options.color || "#ffff99"
        }).animate(animation, {
            queue: !1,
            duration: options.duration,
            easing: options.easing,
            complete: done
        })
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../effect"], factory) : factory(jQuery)
}(function($) {
    return $.effects.define("size", function(options, done) {
        var baseline, factor, temp, element = $(this), cProps = ["fontSize"], vProps = ["borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom"], hProps = ["borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight"], mode = options.mode, restore = "effect" !== mode, scale = options.scale || "both", origin = options.origin || ["middle", "center"], position = element.css("position"), pos = element.position(), original = $.effects.scaledDimensions(element), from = options.from || original, to = options.to || $.effects.scaledDimensions(element, 0);
        $.effects.createPlaceholder(element),
        "show" === mode && (temp = from,
        from = to,
        to = temp),
        factor = {
            from: {
                y: from.height / original.height,
                x: from.width / original.width
            },
            to: {
                y: to.height / original.height,
                x: to.width / original.width
            }
        },
        "box" !== scale && "both" !== scale || (factor.from.y !== factor.to.y && (from = $.effects.setTransition(element, vProps, factor.from.y, from),
        to = $.effects.setTransition(element, vProps, factor.to.y, to)),
        factor.from.x !== factor.to.x && (from = $.effects.setTransition(element, hProps, factor.from.x, from),
        to = $.effects.setTransition(element, hProps, factor.to.x, to))),
        "content" !== scale && "both" !== scale || factor.from.y !== factor.to.y && (from = $.effects.setTransition(element, cProps, factor.from.y, from),
        to = $.effects.setTransition(element, cProps, factor.to.y, to)),
        origin && (baseline = $.effects.getBaseline(origin, original),
        from.top = (original.outerHeight - from.outerHeight) * baseline.y + pos.top,
        from.left = (original.outerWidth - from.outerWidth) * baseline.x + pos.left,
        to.top = (original.outerHeight - to.outerHeight) * baseline.y + pos.top,
        to.left = (original.outerWidth - to.outerWidth) * baseline.x + pos.left),
        element.css(from),
        "content" !== scale && "both" !== scale || (vProps = vProps.concat(["marginTop", "marginBottom"]).concat(cProps),
        hProps = hProps.concat(["marginLeft", "marginRight"]),
        element.find("*[width]").each(function() {
            var child = $(this)
              , childOriginal = $.effects.scaledDimensions(child)
              , childFrom = {
                height: childOriginal.height * factor.from.y,
                width: childOriginal.width * factor.from.x,
                outerHeight: childOriginal.outerHeight * factor.from.y,
                outerWidth: childOriginal.outerWidth * factor.from.x
            }
              , childTo = {
                height: childOriginal.height * factor.to.y,
                width: childOriginal.width * factor.to.x,
                outerHeight: childOriginal.height * factor.to.y,
                outerWidth: childOriginal.width * factor.to.x
            };
            factor.from.y !== factor.to.y && (childFrom = $.effects.setTransition(child, vProps, factor.from.y, childFrom),
            childTo = $.effects.setTransition(child, vProps, factor.to.y, childTo)),
            factor.from.x !== factor.to.x && (childFrom = $.effects.setTransition(child, hProps, factor.from.x, childFrom),
            childTo = $.effects.setTransition(child, hProps, factor.to.x, childTo)),
            restore && $.effects.saveStyle(child),
            child.css(childFrom),
            child.animate(childTo, options.duration, options.easing, function() {
                restore && $.effects.restoreStyle(child)
            })
        })),
        element.animate(to, {
            queue: !1,
            duration: options.duration,
            easing: options.easing,
            complete: function() {
                var offset = element.offset();
                0 === to.opacity && element.css("opacity", from.opacity),
                restore || (element.css("position", "static" === position ? "relative" : position).offset(offset),
                $.effects.saveStyle(element)),
                done()
            }
        })
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../effect", "./effect-size"], factory) : factory(jQuery)
}(function($) {
    return $.effects.define("scale", function(options, done) {
        var el = $(this)
          , mode = options.mode
          , percent = parseInt(options.percent, 10) || (0 === parseInt(options.percent, 10) ? 0 : "effect" !== mode ? 0 : 100)
          , newOptions = $.extend(!0, {
            from: $.effects.scaledDimensions(el),
            to: $.effects.scaledDimensions(el, percent, options.direction || "both"),
            origin: options.origin || ["middle", "center"]
        }, options);
        options.fade && (newOptions.from.opacity = 1,
        newOptions.to.opacity = 0),
        $.effects.effect.size.call(this, newOptions, done)
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../effect", "./effect-scale"], factory) : factory(jQuery)
}(function($) {
    return $.effects.define("puff", "hide", function(options, done) {
        var newOptions = $.extend(!0, {}, options, {
            fade: !0,
            percent: parseInt(options.percent, 10) || 150
        });
        $.effects.effect.scale.call(this, newOptions, done)
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../effect"], factory) : factory(jQuery)
}(function($) {
    return $.effects.define("pulsate", "show", function(options, done) {
        var element = $(this)
          , mode = options.mode
          , show = "show" === mode
          , hide = "hide" === mode
          , showhide = show || hide
          , anims = 2 * (options.times || 5) + (showhide ? 1 : 0)
          , duration = options.duration / anims
          , animateTo = 0
          , i = 1
          , queuelen = element.queue().length;
        for (!show && element.is(":visible") || (element.css("opacity", 0).show(),
        animateTo = 1); anims > i; i++)
            element.animate({
                opacity: animateTo
            }, duration, options.easing),
            animateTo = 1 - animateTo;
        element.animate({
            opacity: animateTo
        }, duration, options.easing),
        element.queue(done),
        $.effects.unshift(element, queuelen, anims + 1)
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../effect"], factory) : factory(jQuery)
}(function($) {
    return $.effects.define("shake", function(options, done) {
        var i = 1
          , element = $(this)
          , direction = options.direction || "left"
          , distance = options.distance || 20
          , times = options.times || 3
          , anims = 2 * times + 1
          , speed = Math.round(options.duration / anims)
          , ref = "up" === direction || "down" === direction ? "top" : "left"
          , positiveMotion = "up" === direction || "left" === direction
          , animation = {}
          , animation1 = {}
          , animation2 = {}
          , queuelen = element.queue().length;
        for ($.effects.createPlaceholder(element),
        animation[ref] = (positiveMotion ? "-=" : "+=") + distance,
        animation1[ref] = (positiveMotion ? "+=" : "-=") + 2 * distance,
        animation2[ref] = (positiveMotion ? "-=" : "+=") + 2 * distance,
        element.animate(animation, speed, options.easing); times > i; i++)
            element.animate(animation1, speed, options.easing).animate(animation2, speed, options.easing);
        element.animate(animation1, speed, options.easing).animate(animation, speed / 2, options.easing).queue(done),
        $.effects.unshift(element, queuelen, anims + 1)
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../effect"], factory) : factory(jQuery)
}(function($) {
    return $.effects.define("slide", "show", function(options, done) {
        var startClip, startRef, element = $(this), map = {
            up: ["bottom", "top"],
            down: ["top", "bottom"],
            left: ["right", "left"],
            right: ["left", "right"]
        }, mode = options.mode, direction = options.direction || "left", ref = "up" === direction || "down" === direction ? "top" : "left", positiveMotion = "up" === direction || "left" === direction, distance = options.distance || element["top" === ref ? "outerHeight" : "outerWidth"](!0), animation = {};
        $.effects.createPlaceholder(element),
        startClip = element.cssClip(),
        startRef = element.position()[ref],
        animation[ref] = (positiveMotion ? -1 : 1) * distance + startRef,
        animation.clip = element.cssClip(),
        animation.clip[map[direction][1]] = animation.clip[map[direction][0]],
        "show" === mode && (element.cssClip(animation.clip),
        element.css(ref, animation[ref]),
        animation.clip = startClip,
        animation[ref] = startRef),
        element.animate(animation, {
            queue: !1,
            duration: options.duration,
            easing: options.easing,
            complete: done
        })
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../effect"], factory) : factory(jQuery)
}(function($) {
    var effect;
    return $.uiBackCompat !== !1 && (effect = $.effects.define("transfer", function(options, done) {
        $(this).transfer(options, done)
    })),
    effect
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../keycode", "../unique-id", "../widget"], factory) : factory(jQuery)
}(function($) {
    return $.widget("ui.accordion", {
        version: "1.12.1",
        options: {
            active: 0,
            animate: {},
            classes: {
                "ui-accordion-header": "ui-corner-top",
                "ui-accordion-header-collapsed": "ui-corner-all",
                "ui-accordion-content": "ui-corner-bottom"
            },
            collapsible: !1,
            event: "click",
            header: "> li > :first-child, > :not(li):even",
            heightStyle: "auto",
            icons: {
                activeHeader: "ui-icon-triangle-1-s",
                header: "ui-icon-triangle-1-e"
            },
            activate: null,
            beforeActivate: null
        },
        hideProps: {
            borderTopWidth: "hide",
            borderBottomWidth: "hide",
            paddingTop: "hide",
            paddingBottom: "hide",
            height: "hide"
        },
        showProps: {
            borderTopWidth: "show",
            borderBottomWidth: "show",
            paddingTop: "show",
            paddingBottom: "show",
            height: "show"
        },
        _create: function() {
            var options = this.options;
            this.prevShow = this.prevHide = $(),
            this._addClass("ui-accordion", "ui-widget ui-helper-reset"),
            this.element.attr("role", "tablist"),
            options.collapsible || options.active !== !1 && null != options.active || (options.active = 0),
            this._processPanels(),
            options.active < 0 && (options.active += this.headers.length),
            this._refresh()
        },
        _getCreateEventData: function() {
            return {
                header: this.active,
                panel: this.active.length ? this.active.next() : $()
            }
        },
        _createIcons: function() {
            var icon, children, icons = this.options.icons;
            icons && (icon = $("<span>"),
            this._addClass(icon, "ui-accordion-header-icon", "ui-icon " + icons.header),
            icon.prependTo(this.headers),
            children = this.active.children(".ui-accordion-header-icon"),
            this._removeClass(children, icons.header)._addClass(children, null, icons.activeHeader)._addClass(this.headers, "ui-accordion-icons"))
        },
        _destroyIcons: function() {
            this._removeClass(this.headers, "ui-accordion-icons"),
            this.headers.children(".ui-accordion-header-icon").remove()
        },
        _destroy: function() {
            var contents;
            this.element.removeAttr("role"),
            this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),
            this._destroyIcons(),
            contents = this.headers.next().css("display", "").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),
            "content" !== this.options.heightStyle && contents.css("height", "")
        },
        _setOption: function(key, value) {
            return "active" === key ? void this._activate(value) : ("event" === key && (this.options.event && this._off(this.headers, this.options.event),
            this._setupEvents(value)),
            this._super(key, value),
            "collapsible" !== key || value || this.options.active !== !1 || this._activate(0),
            void ("icons" === key && (this._destroyIcons(),
            value && this._createIcons())))
        },
        _setOptionDisabled: function(value) {
            this._super(value),
            this.element.attr("aria-disabled", value),
            this._toggleClass(null, "ui-state-disabled", !!value),
            this._toggleClass(this.headers.add(this.headers.next()), null, "ui-state-disabled", !!value)
        },
        _keydown: function(event) {
            if (!event.altKey && !event.ctrlKey) {
                var keyCode = $.ui.keyCode
                  , length = this.headers.length
                  , currentIndex = this.headers.index(event.target)
                  , toFocus = !1;
                switch (event.keyCode) {
                case keyCode.RIGHT:
                case keyCode.DOWN:
                    toFocus = this.headers[(currentIndex + 1) % length];
                    break;
                case keyCode.LEFT:
                case keyCode.UP:
                    toFocus = this.headers[(currentIndex - 1 + length) % length];
                    break;
                case keyCode.SPACE:
                case keyCode.ENTER:
                    this._eventHandler(event);
                    break;
                case keyCode.HOME:
                    toFocus = this.headers[0];
                    break;
                case keyCode.END:
                    toFocus = this.headers[length - 1]
                }
                toFocus && ($(event.target).attr("tabIndex", -1),
                $(toFocus).attr("tabIndex", 0),
                $(toFocus).trigger("focus"),
                event.preventDefault())
            }
        },
        _panelKeyDown: function(event) {
            event.keyCode === $.ui.keyCode.UP && event.ctrlKey && $(event.currentTarget).prev().trigger("focus")
        },
        refresh: function() {
            var options = this.options;
            this._processPanels(),
            options.active === !1 && options.collapsible === !0 || !this.headers.length ? (options.active = !1,
            this.active = $()) : options.active === !1 ? this._activate(0) : this.active.length && !$.contains(this.element[0], this.active[0]) ? this.headers.length === this.headers.find(".ui-state-disabled").length ? (options.active = !1,
            this.active = $()) : this._activate(Math.max(0, options.active - 1)) : options.active = this.headers.index(this.active),
            this._destroyIcons(),
            this._refresh()
        },
        _processPanels: function() {
            var prevHeaders = this.headers
              , prevPanels = this.panels;
            this.headers = this.element.find(this.options.header),
            this._addClass(this.headers, "ui-accordion-header ui-accordion-header-collapsed", "ui-state-default"),
            this.panels = this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),
            this._addClass(this.panels, "ui-accordion-content", "ui-helper-reset ui-widget-content"),
            prevPanels && (this._off(prevHeaders.not(this.headers)),
            this._off(prevPanels.not(this.panels)))
        },
        _refresh: function() {
            var maxHeight, options = this.options, heightStyle = options.heightStyle, parent = this.element.parent();
            this.active = this._findActive(options.active),
            this._addClass(this.active, "ui-accordion-header-active", "ui-state-active")._removeClass(this.active, "ui-accordion-header-collapsed"),
            this._addClass(this.active.next(), "ui-accordion-content-active"),
            this.active.next().show(),
            this.headers.attr("role", "tab").each(function() {
                var header = $(this)
                  , headerId = header.uniqueId().attr("id")
                  , panel = header.next()
                  , panelId = panel.uniqueId().attr("id");
                header.attr("aria-controls", panelId),
                panel.attr("aria-labelledby", headerId)
            }).next().attr("role", "tabpanel"),
            this.headers.not(this.active).attr({
                "aria-selected": "false",
                "aria-expanded": "false",
                tabIndex: -1
            }).next().attr({
                "aria-hidden": "true"
            }).hide(),
            this.active.length ? this.active.attr({
                "aria-selected": "true",
                "aria-expanded": "true",
                tabIndex: 0
            }).next().attr({
                "aria-hidden": "false"
            }) : this.headers.eq(0).attr("tabIndex", 0),
            this._createIcons(),
            this._setupEvents(options.event),
            "fill" === heightStyle ? (maxHeight = parent.height(),
            this.element.siblings(":visible").each(function() {
                var elem = $(this)
                  , position = elem.css("position");
                "absolute" !== position && "fixed" !== position && (maxHeight -= elem.outerHeight(!0))
            }),
            this.headers.each(function() {
                maxHeight -= $(this).outerHeight(!0)
            }),
            this.headers.next().each(function() {
                $(this).height(Math.max(0, maxHeight - $(this).innerHeight() + $(this).height()))
            }).css("overflow", "auto")) : "auto" === heightStyle && (maxHeight = 0,
            this.headers.next().each(function() {
                var isVisible = $(this).is(":visible");
                isVisible || $(this).show(),
                maxHeight = Math.max(maxHeight, $(this).css("height", "").height()),
                isVisible || $(this).hide()
            }).height(maxHeight))
        },
        _activate: function(index) {
            var active = this._findActive(index)[0];
            active !== this.active[0] && (active = active || this.active[0],
            this._eventHandler({
                target: active,
                currentTarget: active,
                preventDefault: $.noop
            }))
        },
        _findActive: function(selector) {
            return "number" == typeof selector ? this.headers.eq(selector) : $()
        },
        _setupEvents: function(event) {
            var events = {
                keydown: "_keydown"
            };
            event && $.each(event.split(" "), function(index, eventName) {
                events[eventName] = "_eventHandler"
            }),
            this._off(this.headers.add(this.headers.next())),
            this._on(this.headers, events),
            this._on(this.headers.next(), {
                keydown: "_panelKeyDown"
            }),
            this._hoverable(this.headers),
            this._focusable(this.headers)
        },
        _eventHandler: function(event) {
            var activeChildren, clickedChildren, options = this.options, active = this.active, clicked = $(event.currentTarget), clickedIsActive = clicked[0] === active[0], collapsing = clickedIsActive && options.collapsible, toShow = collapsing ? $() : clicked.next(), toHide = active.next(), eventData = {
                oldHeader: active,
                oldPanel: toHide,
                newHeader: collapsing ? $() : clicked,
                newPanel: toShow
            };
            event.preventDefault(),
            clickedIsActive && !options.collapsible || this._trigger("beforeActivate", event, eventData) === !1 || (options.active = collapsing ? !1 : this.headers.index(clicked),
            this.active = clickedIsActive ? $() : clicked,
            this._toggle(eventData),
            this._removeClass(active, "ui-accordion-header-active", "ui-state-active"),
            options.icons && (activeChildren = active.children(".ui-accordion-header-icon"),
            this._removeClass(activeChildren, null, options.icons.activeHeader)._addClass(activeChildren, null, options.icons.header)),
            clickedIsActive || (this._removeClass(clicked, "ui-accordion-header-collapsed")._addClass(clicked, "ui-accordion-header-active", "ui-state-active"),
            options.icons && (clickedChildren = clicked.children(".ui-accordion-header-icon"),
            this._removeClass(clickedChildren, null, options.icons.header)._addClass(clickedChildren, null, options.icons.activeHeader)),
            this._addClass(clicked.next(), "ui-accordion-content-active")))
        },
        _toggle: function(data) {
            var toShow = data.newPanel
              , toHide = this.prevShow.length ? this.prevShow : data.oldPanel;
            this.prevShow.add(this.prevHide).stop(!0, !0),
            this.prevShow = toShow,
            this.prevHide = toHide,
            this.options.animate ? this._animate(toShow, toHide, data) : (toHide.hide(),
            toShow.show(),
            this._toggleComplete(data)),
            toHide.attr({
                "aria-hidden": "true"
            }),
            toHide.prev().attr({
                "aria-selected": "false",
                "aria-expanded": "false"
            }),
            toShow.length && toHide.length ? toHide.prev().attr({
                tabIndex: -1,
                "aria-expanded": "false"
            }) : toShow.length && this.headers.filter(function() {
                return 0 === parseInt($(this).attr("tabIndex"), 10)
            }).attr("tabIndex", -1),
            toShow.attr("aria-hidden", "false").prev().attr({
                "aria-selected": "true",
                "aria-expanded": "true",
                tabIndex: 0
            })
        },
        _animate: function(toShow, toHide, data) {
            var total, easing, duration, that = this, adjust = 0, boxSizing = toShow.css("box-sizing"), down = toShow.length && (!toHide.length || toShow.index() < toHide.index()), animate = this.options.animate || {}, options = down && animate.down || animate, complete = function() {
                that._toggleComplete(data)
            };
            return "number" == typeof options && (duration = options),
            "string" == typeof options && (easing = options),
            easing = easing || options.easing || animate.easing,
            duration = duration || options.duration || animate.duration,
            toHide.length ? toShow.length ? (total = toShow.show().outerHeight(),
            toHide.animate(this.hideProps, {
                duration: duration,
                easing: easing,
                step: function(now, fx) {
                    fx.now = Math.round(now)
                }
            }),
            void toShow.hide().animate(this.showProps, {
                duration: duration,
                easing: easing,
                complete: complete,
                step: function(now, fx) {
                    fx.now = Math.round(now),
                    "height" !== fx.prop ? "content-box" === boxSizing && (adjust += fx.now) : "content" !== that.options.heightStyle && (fx.now = Math.round(total - toHide.outerHeight() - adjust),
                    adjust = 0)
                }
            })) : toHide.animate(this.hideProps, duration, easing, complete) : toShow.animate(this.showProps, duration, easing, complete)
        },
        _toggleComplete: function(data) {
            var toHide = data.oldPanel
              , prev = toHide.prev();
            this._removeClass(toHide, "ui-accordion-content-active"),
            this._removeClass(prev, "ui-accordion-header-active")._addClass(prev, "ui-accordion-header-collapsed"),
            toHide.length && (toHide.parent()[0].className = toHide.parent()[0].className),
            this._trigger("activate", null, data)
        }
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../keycode", "../position", "../safe-active-element", "../unique-id", "../version", "../widget"], factory) : factory(jQuery)
}(function($) {
    return $.widget("ui.menu", {
        version: "1.12.1",
        defaultElement: "<ul>",
        delay: 300,
        options: {
            icons: {
                submenu: "ui-icon-caret-1-e"
            },
            items: "> *",
            menus: "ul",
            position: {
                my: "left top",
                at: "right top"
            },
            role: "menu",
            blur: null,
            focus: null,
            select: null
        },
        _create: function() {
            this.activeMenu = this.element,
            this.mouseHandled = !1,
            this.element.uniqueId().attr({
                role: this.options.role,
                tabIndex: 0
            }),
            this._addClass("ui-menu", "ui-widget ui-widget-content"),
            this._on({
                "mousedown .ui-menu-item": function(event) {
                    event.preventDefault()
                },
                "click .ui-menu-item": function(event) {
                    var target = $(event.target)
                      , active = $($.ui.safeActiveElement(this.document[0]));
                    !this.mouseHandled && target.not(".ui-state-disabled").length && (this.select(event),
                    event.isPropagationStopped() || (this.mouseHandled = !0),
                    target.has(".ui-menu").length ? this.expand(event) : !this.element.is(":focus") && active.closest(".ui-menu").length && (this.element.trigger("focus", [!0]),
                    this.active && 1 === this.active.parents(".ui-menu").length && clearTimeout(this.timer)))
                },
                "mouseenter .ui-menu-item": function(event) {
                    if (!this.previousFilter) {
                        var actualTarget = $(event.target).closest(".ui-menu-item")
                          , target = $(event.currentTarget);
                        actualTarget[0] === target[0] && (this._removeClass(target.siblings().children(".ui-state-active"), null, "ui-state-active"),
                        this.focus(event, target))
                    }
                },
                mouseleave: "collapseAll",
                "mouseleave .ui-menu": "collapseAll",
                focus: function(event, keepActiveItem) {
                    var item = this.active || this.element.find(this.options.items).eq(0);
                    keepActiveItem || this.focus(event, item)
                },
                blur: function(event) {
                    this._delay(function() {
                        var notContained = !$.contains(this.element[0], $.ui.safeActiveElement(this.document[0]));
                        notContained && this.collapseAll(event)
                    })
                },
                keydown: "_keydown"
            }),
            this.refresh(),
            this._on(this.document, {
                click: function(event) {
                    this._closeOnDocumentClick(event) && this.collapseAll(event),
                    this.mouseHandled = !1
                }
            })
        },
        _destroy: function() {
            var items = this.element.find(".ui-menu-item").removeAttr("role aria-disabled")
              , submenus = items.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");
            this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),
            submenus.children().each(function() {
                var elem = $(this);
                elem.data("ui-menu-submenu-caret") && elem.remove()
            })
        },
        _keydown: function(event) {
            var match, prev, character, skip, preventDefault = !0;
            switch (event.keyCode) {
            case $.ui.keyCode.PAGE_UP:
                this.previousPage(event);
                break;
            case $.ui.keyCode.PAGE_DOWN:
                this.nextPage(event);
                break;
            case $.ui.keyCode.HOME:
                this._move("first", "first", event);
                break;
            case $.ui.keyCode.END:
                this._move("last", "last", event);
                break;
            case $.ui.keyCode.UP:
                this.previous(event);
                break;
            case $.ui.keyCode.DOWN:
                this.next(event);
                break;
            case $.ui.keyCode.LEFT:
                this.collapse(event);
                break;
            case $.ui.keyCode.RIGHT:
                this.active && !this.active.is(".ui-state-disabled") && this.expand(event);
                break;
            case $.ui.keyCode.ENTER:
            case $.ui.keyCode.SPACE:
                this._activate(event);
                break;
            case $.ui.keyCode.ESCAPE:
                this.collapse(event);
                break;
            default:
                preventDefault = !1,
                prev = this.previousFilter || "",
                skip = !1,
                character = event.keyCode >= 96 && event.keyCode <= 105 ? (event.keyCode - 96).toString() : String.fromCharCode(event.keyCode),
                clearTimeout(this.filterTimer),
                character === prev ? skip = !0 : character = prev + character,
                match = this._filterMenuItems(character),
                match = skip && -1 !== match.index(this.active.next()) ? this.active.nextAll(".ui-menu-item") : match,
                match.length || (character = String.fromCharCode(event.keyCode),
                match = this._filterMenuItems(character)),
                match.length ? (this.focus(event, match),
                this.previousFilter = character,
                this.filterTimer = this._delay(function() {
                    delete this.previousFilter
                }, 1e3)) : delete this.previousFilter
            }
            preventDefault && event.preventDefault()
        },
        _activate: function(event) {
            this.active && !this.active.is(".ui-state-disabled") && (this.active.children("[aria-haspopup='true']").length ? this.expand(event) : this.select(event))
        },
        refresh: function() {
            var menus, items, newSubmenus, newItems, newWrappers, that = this, icon = this.options.icons.submenu, submenus = this.element.find(this.options.menus);
            this._toggleClass("ui-menu-icons", null, !!this.element.find(".ui-icon").length),
            newSubmenus = submenus.filter(":not(.ui-menu)").hide().attr({
                role: this.options.role,
                "aria-hidden": "true",
                "aria-expanded": "false"
            }).each(function() {
                var menu = $(this)
                  , item = menu.prev()
                  , submenuCaret = $("<span>").data("ui-menu-submenu-caret", !0);
                that._addClass(submenuCaret, "ui-menu-icon", "ui-icon " + icon),
                item.attr("aria-haspopup", "true").prepend(submenuCaret),
                menu.attr("aria-labelledby", item.attr("id"))
            }),
            this._addClass(newSubmenus, "ui-menu", "ui-widget ui-widget-content ui-front"),
            menus = submenus.add(this.element),
            items = menus.find(this.options.items),
            items.not(".ui-menu-item").each(function() {
                var item = $(this);
                that._isDivider(item) && that._addClass(item, "ui-menu-divider", "ui-widget-content")
            }),
            newItems = items.not(".ui-menu-item, .ui-menu-divider"),
            newWrappers = newItems.children().not(".ui-menu").uniqueId().attr({
                tabIndex: -1,
                role: this._itemRole()
            }),
            this._addClass(newItems, "ui-menu-item")._addClass(newWrappers, "ui-menu-item-wrapper"),
            items.filter(".ui-state-disabled").attr("aria-disabled", "true"),
            this.active && !$.contains(this.element[0], this.active[0]) && this.blur()
        },
        _itemRole: function() {
            return {
                menu: "menuitem",
                listbox: "option"
            }[this.options.role]
        },
        _setOption: function(key, value) {
            if ("icons" === key) {
                var icons = this.element.find(".ui-menu-icon");
                this._removeClass(icons, null, this.options.icons.submenu)._addClass(icons, null, value.submenu)
            }
            this._super(key, value)
        },
        _setOptionDisabled: function(value) {
            this._super(value),
            this.element.attr("aria-disabled", String(value)),
            this._toggleClass(null, "ui-state-disabled", !!value)
        },
        focus: function(event, item) {
            var nested, focused, activeParent;
            this.blur(event, event && "focus" === event.type),
            this._scrollIntoView(item),
            this.active = item.first(),
            focused = this.active.children(".ui-menu-item-wrapper"),
            this._addClass(focused, null, "ui-state-active"),
            this.options.role && this.element.attr("aria-activedescendant", focused.attr("id")),
            activeParent = this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),
            this._addClass(activeParent, null, "ui-state-active"),
            event && "keydown" === event.type ? this._close() : this.timer = this._delay(function() {
                this._close()
            }, this.delay),
            nested = item.children(".ui-menu"),
            nested.length && event && /^mouse/.test(event.type) && this._startOpening(nested),
            this.activeMenu = item.parent(),
            this._trigger("focus", event, {
                item: item
            })
        },
        _scrollIntoView: function(item) {
            var borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;
            this._hasScroll() && (borderTop = parseFloat($.css(this.activeMenu[0], "borderTopWidth")) || 0,
            paddingTop = parseFloat($.css(this.activeMenu[0], "paddingTop")) || 0,
            offset = item.offset().top - this.activeMenu.offset().top - borderTop - paddingTop,
            scroll = this.activeMenu.scrollTop(),
            elementHeight = this.activeMenu.height(),
            itemHeight = item.outerHeight(),
            0 > offset ? this.activeMenu.scrollTop(scroll + offset) : offset + itemHeight > elementHeight && this.activeMenu.scrollTop(scroll + offset - elementHeight + itemHeight))
        },
        blur: function(event, fromFocus) {
            fromFocus || clearTimeout(this.timer),
            this.active && (this._removeClass(this.active.children(".ui-menu-item-wrapper"), null, "ui-state-active"),
            this._trigger("blur", event, {
                item: this.active
            }),
            this.active = null)
        },
        _startOpening: function(submenu) {
            clearTimeout(this.timer),
            "true" === submenu.attr("aria-hidden") && (this.timer = this._delay(function() {
                this._close(),
                this._open(submenu)
            }, this.delay))
        },
        _open: function(submenu) {
            var position = $.extend({
                of: this.active
            }, this.options.position);
            clearTimeout(this.timer),
            this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden", "true"),
            submenu.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(position)
        },
        collapseAll: function(event, all) {
            clearTimeout(this.timer),
            this.timer = this._delay(function() {
                var currentMenu = all ? this.element : $(event && event.target).closest(this.element.find(".ui-menu"));
                currentMenu.length || (currentMenu = this.element),
                this._close(currentMenu),
                this.blur(event),
                this._removeClass(currentMenu.find(".ui-state-active"), null, "ui-state-active"),
                this.activeMenu = currentMenu
            }, this.delay)
        },
        _close: function(startMenu) {
            startMenu || (startMenu = this.active ? this.active.parent() : this.element),
            startMenu.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false")
        },
        _closeOnDocumentClick: function(event) {
            return !$(event.target).closest(".ui-menu").length
        },
        _isDivider: function(item) {
            return !/[^\-\u2014\u2013\s]/.test(item.text())
        },
        collapse: function(event) {
            var newItem = this.active && this.active.parent().closest(".ui-menu-item", this.element);
            newItem && newItem.length && (this._close(),
            this.focus(event, newItem))
        },
        expand: function(event) {
            var newItem = this.active && this.active.children(".ui-menu ").find(this.options.items).first();
            newItem && newItem.length && (this._open(newItem.parent()),
            this._delay(function() {
                this.focus(event, newItem)
            }))
        },
        next: function(event) {
            this._move("next", "first", event)
        },
        previous: function(event) {
            this._move("prev", "last", event)
        },
        isFirstItem: function() {
            return this.active && !this.active.prevAll(".ui-menu-item").length
        },
        isLastItem: function() {
            return this.active && !this.active.nextAll(".ui-menu-item").length
        },
        _move: function(direction, filter, event) {
            var next;
            this.active && (next = "first" === direction || "last" === direction ? this.active["first" === direction ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1) : this.active[direction + "All"](".ui-menu-item").eq(0)),
            next && next.length && this.active || (next = this.activeMenu.find(this.options.items)[filter]()),
            this.focus(event, next)
        },
        nextPage: function(event) {
            var item, base, height;
            return this.active ? void (this.isLastItem() || (this._hasScroll() ? (base = this.active.offset().top,
            height = this.element.height(),
            this.active.nextAll(".ui-menu-item").each(function() {
                return item = $(this),
                item.offset().top - base - height < 0
            }),
            this.focus(event, item)) : this.focus(event, this.activeMenu.find(this.options.items)[this.active ? "last" : "first"]()))) : void this.next(event)
        },
        previousPage: function(event) {
            var item, base, height;
            return this.active ? void (this.isFirstItem() || (this._hasScroll() ? (base = this.active.offset().top,
            height = this.element.height(),
            this.active.prevAll(".ui-menu-item").each(function() {
                return item = $(this),
                item.offset().top - base + height > 0
            }),
            this.focus(event, item)) : this.focus(event, this.activeMenu.find(this.options.items).first()))) : void this.next(event)
        },
        _hasScroll: function() {
            return this.element.outerHeight() < this.element.prop("scrollHeight")
        },
        select: function(event) {
            this.active = this.active || $(event.target).closest(".ui-menu-item");
            var ui = {
                item: this.active
            };
            this.active.has(".ui-menu").length || this.collapseAll(event, !0),
            this._trigger("select", event, ui)
        },
        _filterMenuItems: function(character) {
            var escapedCharacter = character.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
              , regex = new RegExp("^" + escapedCharacter,"i");
            return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function() {
                return regex.test($.trim($(this).children(".ui-menu-item-wrapper").text()))
            })
        }
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./menu", "../keycode", "../position", "../safe-active-element", "../version", "../widget"], factory) : factory(jQuery)
}(function($) {
    return $.widget("ui.autocomplete", {
        version: "1.12.1",
        defaultElement: "<input>",
        options: {
            appendTo: null,
            autoFocus: !1,
            delay: 300,
            minLength: 1,
            position: {
                my: "left top",
                at: "left bottom",
                collision: "none"
            },
            source: null,
            change: null,
            close: null,
            focus: null,
            open: null,
            response: null,
            search: null,
            select: null
        },
        requestIndex: 0,
        pending: 0,
        _create: function() {
            var suppressKeyPress, suppressKeyPressRepeat, suppressInput, nodeName = this.element[0].nodeName.toLowerCase(), isTextarea = "textarea" === nodeName, isInput = "input" === nodeName;
            this.isMultiLine = isTextarea || !isInput && this._isContentEditable(this.element),
            this.valueMethod = this.element[isTextarea || isInput ? "val" : "text"],
            this.isNewMenu = !0,
            this._addClass("ui-autocomplete-input"),
            this.element.attr("autocomplete", "off"),
            this._on(this.element, {
                keydown: function(event) {
                    if (this.element.prop("readOnly"))
                        return suppressKeyPress = !0,
                        suppressInput = !0,
                        void (suppressKeyPressRepeat = !0);
                    suppressKeyPress = !1,
                    suppressInput = !1,
                    suppressKeyPressRepeat = !1;
                    var keyCode = $.ui.keyCode;
                    switch (event.keyCode) {
                    case keyCode.PAGE_UP:
                        suppressKeyPress = !0,
                        this._move("previousPage", event);
                        break;
                    case keyCode.PAGE_DOWN:
                        suppressKeyPress = !0,
                        this._move("nextPage", event);
                        break;
                    case keyCode.UP:
                        suppressKeyPress = !0,
                        this._keyEvent("previous", event);
                        break;
                    case keyCode.DOWN:
                        suppressKeyPress = !0,
                        this._keyEvent("next", event);
                        break;
                    case keyCode.ENTER:
                        this.menu.active && (suppressKeyPress = !0,
                        event.preventDefault(),
                        this.menu.select(event));
                        break;
                    case keyCode.TAB:
                        this.menu.active && this.menu.select(event);
                        break;
                    case keyCode.ESCAPE:
                        this.menu.element.is(":visible") && (this.isMultiLine || this._value(this.term),
                        this.close(event),
                        event.preventDefault());
                        break;
                    default:
                        suppressKeyPressRepeat = !0,
                        this._searchTimeout(event)
                    }
                },
                keypress: function(event) {
                    if (suppressKeyPress)
                        return suppressKeyPress = !1,
                        void (this.isMultiLine && !this.menu.element.is(":visible") || event.preventDefault());
                    if (!suppressKeyPressRepeat) {
                        var keyCode = $.ui.keyCode;
                        switch (event.keyCode) {
                        case keyCode.PAGE_UP:
                            this._move("previousPage", event);
                            break;
                        case keyCode.PAGE_DOWN:
                            this._move("nextPage", event);
                            break;
                        case keyCode.UP:
                            this._keyEvent("previous", event);
                            break;
                        case keyCode.DOWN:
                            this._keyEvent("next", event)
                        }
                    }
                },
                input: function(event) {
                    return suppressInput ? (suppressInput = !1,
                    void event.preventDefault()) : void this._searchTimeout(event)
                },
                focus: function() {
                    this.selectedItem = null,
                    this.previous = this._value()
                },
                blur: function(event) {
                    return this.cancelBlur ? void delete this.cancelBlur : (clearTimeout(this.searching),
                    this.close(event),
                    void this._change(event))
                }
            }),
            this._initSource(),
            this.menu = $("<ul>").appendTo(this._appendTo()).menu({
                role: null
            }).hide().menu("instance"),
            this._addClass(this.menu.element, "ui-autocomplete", "ui-front"),
            this._on(this.menu.element, {
                mousedown: function(event) {
                    event.preventDefault(),
                    this.cancelBlur = !0,
                    this._delay(function() {
                        delete this.cancelBlur,
                        this.element[0] !== $.ui.safeActiveElement(this.document[0]) && this.element.trigger("focus")
                    })
                },
                menufocus: function(event, ui) {
                    var label, item;
                    return this.isNewMenu && (this.isNewMenu = !1,
                    event.originalEvent && /^mouse/.test(event.originalEvent.type)) ? (this.menu.blur(),
                    void this.document.one("mousemove", function() {
                        $(event.target).trigger(event.originalEvent)
                    })) : (item = ui.item.data("ui-autocomplete-item"),
                    !1 !== this._trigger("focus", event, {
                        item: item
                    }) && event.originalEvent && /^key/.test(event.originalEvent.type) && this._value(item.value),
                    label = ui.item.attr("aria-label") || item.value,
                    void (label && $.trim(label).length && (this.liveRegion.children().hide(),
                    $("<div>").text(label).appendTo(this.liveRegion))))
                },
                menuselect: function(event, ui) {
                    var item = ui.item.data("ui-autocomplete-item")
                      , previous = this.previous;
                    this.element[0] !== $.ui.safeActiveElement(this.document[0]) && (this.element.trigger("focus"),
                    this.previous = previous,
                    this._delay(function() {
                        this.previous = previous,
                        this.selectedItem = item
                    })),
                    !1 !== this._trigger("select", event, {
                        item: item
                    }) && this._value(item.value),
                    this.term = this._value(),
                    this.close(event),
                    this.selectedItem = item
                }
            }),
            this.liveRegion = $("<div>", {
                role: "status",
                "aria-live": "assertive",
                "aria-relevant": "additions"
            }).appendTo(this.document[0].body),
            this._addClass(this.liveRegion, null, "ui-helper-hidden-accessible"),
            this._on(this.window, {
                beforeunload: function() {
                    this.element.removeAttr("autocomplete")
                }
            })
        },
        _destroy: function() {
            clearTimeout(this.searching),
            this.element.removeAttr("autocomplete"),
            this.menu.element.remove(),
            this.liveRegion.remove()
        },
        _setOption: function(key, value) {
            this._super(key, value),
            "source" === key && this._initSource(),
            "appendTo" === key && this.menu.element.appendTo(this._appendTo()),
            "disabled" === key && value && this.xhr && this.xhr.abort()
        },
        _isEventTargetInWidget: function(event) {
            var menuElement = this.menu.element[0];
            return event.target === this.element[0] || event.target === menuElement || $.contains(menuElement, event.target)
        },
        _closeOnClickOutside: function(event) {
            this._isEventTargetInWidget(event) || this.close()
        },
        _appendTo: function() {
            var element = this.options.appendTo;
            return element && (element = element.jquery || element.nodeType ? $(element) : this.document.find(element).eq(0)),
            element && element[0] || (element = this.element.closest(".ui-front, dialog")),
            element.length || (element = this.document[0].body),
            element
        },
        _initSource: function() {
            var array, url, that = this;
            $.isArray(this.options.source) ? (array = this.options.source,
            this.source = function(request, response) {
                response($.ui.autocomplete.filter(array, request.term))
            }
            ) : "string" == typeof this.options.source ? (url = this.options.source,
            this.source = function(request, response) {
                that.xhr && that.xhr.abort(),
                that.xhr = $.ajax({
                    url: url,
                    data: request,
                    dataType: "json",
                    success: function(data) {
                        response(data)
                    },
                    error: function() {
                        response([])
                    }
                })
            }
            ) : this.source = this.options.source
        },
        _searchTimeout: function(event) {
            clearTimeout(this.searching),
            this.searching = this._delay(function() {
                var equalValues = this.term === this._value()
                  , menuVisible = this.menu.element.is(":visible")
                  , modifierKey = event.altKey || event.ctrlKey || event.metaKey || event.shiftKey;
                equalValues && (!equalValues || menuVisible || modifierKey) || (this.selectedItem = null,
                this.search(null, event))
            }, this.options.delay)
        },
        search: function(value, event) {
            return value = null != value ? value : this._value(),
            this.term = this._value(),
            value.length < this.options.minLength ? this.close(event) : this._trigger("search", event) !== !1 ? this._search(value) : void 0
        },
        _search: function(value) {
            this.pending++,
            this._addClass("ui-autocomplete-loading"),
            this.cancelSearch = !1,
            this.source({
                term: value
            }, this._response())
        },
        _response: function() {
            var index = ++this.requestIndex;
            return $.proxy(function(content) {
                index === this.requestIndex && this.__response(content),
                this.pending--,
                this.pending || this._removeClass("ui-autocomplete-loading")
            }, this)
        },
        __response: function(content) {
            content && (content = this._normalize(content)),
            this._trigger("response", null, {
                content: content
            }),
            !this.options.disabled && content && content.length && !this.cancelSearch ? (this._suggest(content),
            this._trigger("open")) : this._close()
        },
        close: function(event) {
            this.cancelSearch = !0,
            this._close(event)
        },
        _close: function(event) {
            this._off(this.document, "mousedown"),
            this.menu.element.is(":visible") && (this.menu.element.hide(),
            this.menu.blur(),
            this.isNewMenu = !0,
            this._trigger("close", event))
        },
        _change: function(event) {
            this.previous !== this._value() && this._trigger("change", event, {
                item: this.selectedItem
            })
        },
        _normalize: function(items) {
            return items.length && items[0].label && items[0].value ? items : $.map(items, function(item) {
                return "string" == typeof item ? {
                    label: item,
                    value: item
                } : $.extend({}, item, {
                    label: item.label || item.value,
                    value: item.value || item.label
                })
            })
        },
        _suggest: function(items) {
            var ul = this.menu.element.empty();
            this._renderMenu(ul, items),
            this.isNewMenu = !0,
            this.menu.refresh(),
            ul.show(),
            this._resizeMenu(),
            ul.position($.extend({
                of: this.element
            }, this.options.position)),
            this.options.autoFocus && this.menu.next(),
            this._on(this.document, {
                mousedown: "_closeOnClickOutside"
            })
        },
        _resizeMenu: function() {
            var ul = this.menu.element;
            ul.outerWidth(Math.max(ul.width("").outerWidth() + 1, this.element.outerWidth()))
        },
        _renderMenu: function(ul, items) {
            var that = this;
            $.each(items, function(index, item) {
                that._renderItemData(ul, item)
            })
        },
        _renderItemData: function(ul, item) {
            return this._renderItem(ul, item).data("ui-autocomplete-item", item)
        },
        _renderItem: function(ul, item) {
            return $("<li>").append($("<div>").text(item.label)).appendTo(ul)
        },
        _move: function(direction, event) {
            return this.menu.element.is(":visible") ? this.menu.isFirstItem() && /^previous/.test(direction) || this.menu.isLastItem() && /^next/.test(direction) ? (this.isMultiLine || this._value(this.term),
            void this.menu.blur()) : void this.menu[direction](event) : void this.search(null, event)
        },
        widget: function() {
            return this.menu.element
        },
        _value: function() {
            return this.valueMethod.apply(this.element, arguments)
        },
        _keyEvent: function(keyEvent, event) {
            this.isMultiLine && !this.menu.element.is(":visible") || (this._move(keyEvent, event),
            event.preventDefault())
        },
        _isContentEditable: function(element) {
            if (!element.length)
                return !1;
            var editable = element.prop("contentEditable");
            return "inherit" === editable ? this._isContentEditable(element.parent()) : "true" === editable
        }
    }),
    $.extend($.ui.autocomplete, {
        escapeRegex: function(value) {
            return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
        },
        filter: function(array, term) {
            var matcher = new RegExp($.ui.autocomplete.escapeRegex(term),"i");
            return $.grep(array, function(value) {
                return matcher.test(value.label || value.value || value)
            })
        }
    }),
    $.widget("ui.autocomplete", $.ui.autocomplete, {
        options: {
            messages: {
                noResults: "No search results.",
                results: function(amount) {
                    return amount + (amount > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate."
                }
            }
        },
        __response: function(content) {
            var message;
            this._superApply(arguments),
            this.options.disabled || this.cancelSearch || (message = content && content.length ? this.options.messages.results(content.length) : this.options.messages.noResults,
            this.liveRegion.children().hide(),
            $("<div>").text(message).appendTo(this.liveRegion))
        }
    }),
    $.ui.autocomplete
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../widget"], factory) : factory(jQuery)
}(function($) {
    var controlgroupCornerRegex = /ui-corner-([a-z]){2,6}/g;
    return $.widget("ui.controlgroup", {
        version: "1.12.1",
        defaultElement: "<div>",
        options: {
            direction: "horizontal",
            disabled: null,
            onlyVisible: !0,
            items: {
                button: "input[type=button], input[type=submit], input[type=reset], button, a",
                controlgroupLabel: ".ui-controlgroup-label",
                checkboxradio: "input[type='checkbox'], input[type='radio']",
                selectmenu: "select",
                spinner: ".ui-spinner-input"
            }
        },
        _create: function() {
            this._enhance()
        },
        _enhance: function() {
            this.element.attr("role", "toolbar"),
            this.refresh()
        },
        _destroy: function() {
            this._callChildMethod("destroy"),
            this.childWidgets.removeData("ui-controlgroup-data"),
            this.element.removeAttr("role"),
            this.options.items.controlgroupLabel && this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()
        },
        _initWidgets: function() {
            var that = this
              , childWidgets = [];
            $.each(this.options.items, function(widget, selector) {
                var labels, options = {};
                return selector ? "controlgroupLabel" === widget ? (labels = that.element.find(selector),
                labels.each(function() {
                    var element = $(this);
                    element.children(".ui-controlgroup-label-contents").length || element.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")
                }),
                that._addClass(labels, null, "ui-widget ui-widget-content ui-state-default"),
                void (childWidgets = childWidgets.concat(labels.get()))) : void ($.fn[widget] && (options = that["_" + widget + "Options"] ? that["_" + widget + "Options"]("middle") : {
                    classes: {}
                },
                that.element.find(selector).each(function() {
                    var element = $(this)
                      , instance = element[widget]("instance")
                      , instanceOptions = $.widget.extend({}, options);
                    if ("button" !== widget || !element.parent(".ui-spinner").length) {
                        instance || (instance = element[widget]()[widget]("instance")),
                        instance && (instanceOptions.classes = that._resolveClassesValues(instanceOptions.classes, instance)),
                        element[widget](instanceOptions);
                        var widgetElement = element[widget]("widget");
                        $.data(widgetElement[0], "ui-controlgroup-data", instance ? instance : element[widget]("instance")),
                        childWidgets.push(widgetElement[0])
                    }
                }))) : void 0
            }),
            this.childWidgets = $($.unique(childWidgets)),
            this._addClass(this.childWidgets, "ui-controlgroup-item")
        },
        _callChildMethod: function(method) {
            this.childWidgets.each(function() {
                var element = $(this)
                  , data = element.data("ui-controlgroup-data");
                data && data[method] && data[method]()
            })
        },
        _updateCornerClass: function(element, position) {
            var remove = "ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"
              , add = this._buildSimpleOptions(position, "label").classes.label;
            this._removeClass(element, null, remove),
            this._addClass(element, null, add)
        },
        _buildSimpleOptions: function(position, key) {
            var direction = "vertical" === this.options.direction
              , result = {
                classes: {}
            };
            return result.classes[key] = {
                middle: "",
                first: "ui-corner-" + (direction ? "top" : "left"),
                last: "ui-corner-" + (direction ? "bottom" : "right"),
                only: "ui-corner-all"
            }[position],
            result
        },
        _spinnerOptions: function(position) {
            var options = this._buildSimpleOptions(position, "ui-spinner");
            return options.classes["ui-spinner-up"] = "",
            options.classes["ui-spinner-down"] = "",
            options
        },
        _buttonOptions: function(position) {
            return this._buildSimpleOptions(position, "ui-button")
        },
        _checkboxradioOptions: function(position) {
            return this._buildSimpleOptions(position, "ui-checkboxradio-label")
        },
        _selectmenuOptions: function(position) {
            var direction = "vertical" === this.options.direction;
            return {
                width: direction ? "auto" : !1,
                classes: {
                    middle: {
                        "ui-selectmenu-button-open": "",
                        "ui-selectmenu-button-closed": ""
                    },
                    first: {
                        "ui-selectmenu-button-open": "ui-corner-" + (direction ? "top" : "tl"),
                        "ui-selectmenu-button-closed": "ui-corner-" + (direction ? "top" : "left")
                    },
                    last: {
                        "ui-selectmenu-button-open": direction ? "" : "ui-corner-tr",
                        "ui-selectmenu-button-closed": "ui-corner-" + (direction ? "bottom" : "right")
                    },
                    only: {
                        "ui-selectmenu-button-open": "ui-corner-top",
                        "ui-selectmenu-button-closed": "ui-corner-all"
                    }
                }[position]
            }
        },
        _resolveClassesValues: function(classes, instance) {
            var result = {};
            return $.each(classes, function(key) {
                var current = instance.options.classes[key] || "";
                current = $.trim(current.replace(controlgroupCornerRegex, "")),
                result[key] = (current + " " + classes[key]).replace(/\s+/g, " ")
            }),
            result
        },
        _setOption: function(key, value) {
            return "direction" === key && this._removeClass("ui-controlgroup-" + this.options.direction),
            this._super(key, value),
            "disabled" === key ? void this._callChildMethod(value ? "disable" : "enable") : void this.refresh()
        },
        refresh: function() {
            var children, that = this;
            this._addClass("ui-controlgroup ui-controlgroup-" + this.options.direction),
            "horizontal" === this.options.direction && this._addClass(null, "ui-helper-clearfix"),
            this._initWidgets(),
            children = this.childWidgets,
            this.options.onlyVisible && (children = children.filter(":visible")),
            children.length && ($.each(["first", "last"], function(index, value) {
                var instance = children[value]().data("ui-controlgroup-data");
                if (instance && that["_" + instance.widgetName + "Options"]) {
                    var options = that["_" + instance.widgetName + "Options"](1 === children.length ? "only" : value);
                    options.classes = that._resolveClassesValues(options.classes, instance),
                    instance.element[instance.widgetName](options)
                } else
                    that._updateCornerClass(children[value](), value)
            }),
            this._callChildMethod("refresh"))
        }
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../escape-selector", "../form-reset-mixin", "../labels", "../widget"], factory) : factory(jQuery)
}(function($) {
    return $.widget("ui.checkboxradio", [$.ui.formResetMixin, {
        version: "1.12.1",
        options: {
            disabled: null,
            label: null,
            icon: !0,
            classes: {
                "ui-checkboxradio-label": "ui-corner-all",
                "ui-checkboxradio-icon": "ui-corner-all"
            }
        },
        _getCreateOptions: function() {
            var disabled, labels, that = this, options = this._super() || {};
            return this._readType(),
            labels = this.element.labels(),
            this.label = $(labels[labels.length - 1]),
            this.label.length || $.error("No label found for checkboxradio widget"),
            this.originalLabel = "",
            this.label.contents().not(this.element[0]).each(function() {
                that.originalLabel += 3 === this.nodeType ? $(this).text() : this.outerHTML
            }),
            this.originalLabel && (options.label = this.originalLabel),
            disabled = this.element[0].disabled,
            null != disabled && (options.disabled = disabled),
            options
        },
        _create: function() {
            var checked = this.element[0].checked;
            this._bindFormResetHandler(),
            null == this.options.disabled && (this.options.disabled = this.element[0].disabled),
            this._setOption("disabled", this.options.disabled),
            this._addClass("ui-checkboxradio", "ui-helper-hidden-accessible"),
            this._addClass(this.label, "ui-checkboxradio-label", "ui-button ui-widget"),
            "radio" === this.type && this._addClass(this.label, "ui-checkboxradio-radio-label"),
            this.options.label && this.options.label !== this.originalLabel ? this._updateLabel() : this.originalLabel && (this.options.label = this.originalLabel),
            this._enhance(),
            checked && (this._addClass(this.label, "ui-checkboxradio-checked", "ui-state-active"),
            this.icon && this._addClass(this.icon, null, "ui-state-hover")),
            this._on({
                change: "_toggleClasses",
                focus: function() {
                    this._addClass(this.label, null, "ui-state-focus ui-visual-focus")
                },
                blur: function() {
                    this._removeClass(this.label, null, "ui-state-focus ui-visual-focus")
                }
            })
        },
        _readType: function() {
            var nodeName = this.element[0].nodeName.toLowerCase();
            this.type = this.element[0].type,
            "input" === nodeName && /radio|checkbox/.test(this.type) || $.error("Can't create checkboxradio on element.nodeName=" + nodeName + " and element.type=" + this.type)
        },
        _enhance: function() {
            this._updateIcon(this.element[0].checked)
        },
        widget: function() {
            return this.label
        },
        _getRadioGroup: function() {
            var group, name = this.element[0].name, nameSelector = "input[name='" + $.ui.escapeSelector(name) + "']";
            return name ? (group = this.form.length ? $(this.form[0].elements).filter(nameSelector) : $(nameSelector).filter(function() {
                return 0 === $(this).form().length
            }),
            group.not(this.element)) : $([])
        },
        _toggleClasses: function() {
            var checked = this.element[0].checked;
            this._toggleClass(this.label, "ui-checkboxradio-checked", "ui-state-active", checked),
            this.options.icon && "checkbox" === this.type && this._toggleClass(this.icon, null, "ui-icon-check ui-state-checked", checked)._toggleClass(this.icon, null, "ui-icon-blank", !checked),
            "radio" === this.type && this._getRadioGroup().each(function() {
                var instance = $(this).checkboxradio("instance");
                instance && instance._removeClass(instance.label, "ui-checkboxradio-checked", "ui-state-active")
            })
        },
        _destroy: function() {
            this._unbindFormResetHandler(),
            this.icon && (this.icon.remove(),
            this.iconSpace.remove())
        },
        _setOption: function(key, value) {
            return "label" !== key || value ? (this._super(key, value),
            "disabled" === key ? (this._toggleClass(this.label, null, "ui-state-disabled", value),
            void (this.element[0].disabled = value)) : void this.refresh()) : void 0
        },
        _updateIcon: function(checked) {
            var toAdd = "ui-icon ui-icon-background ";
            this.options.icon ? (this.icon || (this.icon = $("<span>"),
            this.iconSpace = $("<span> </span>"),
            this._addClass(this.iconSpace, "ui-checkboxradio-icon-space")),
            "checkbox" === this.type ? (toAdd += checked ? "ui-icon-check ui-state-checked" : "ui-icon-blank",
            this._removeClass(this.icon, null, checked ? "ui-icon-blank" : "ui-icon-check")) : toAdd += "ui-icon-blank",
            this._addClass(this.icon, "ui-checkboxradio-icon", toAdd),
            checked || this._removeClass(this.icon, null, "ui-icon-check ui-state-checked"),
            this.icon.prependTo(this.label).after(this.iconSpace)) : void 0 !== this.icon && (this.icon.remove(),
            this.iconSpace.remove(),
            delete this.icon)
        },
        _updateLabel: function() {
            var contents = this.label.contents().not(this.element[0]);
            this.icon && (contents = contents.not(this.icon[0])),
            this.iconSpace && (contents = contents.not(this.iconSpace[0])),
            contents.remove(),
            this.label.append(this.options.label)
        },
        refresh: function() {
            var checked = this.element[0].checked
              , isDisabled = this.element[0].disabled;
            this._updateIcon(checked),
            this._toggleClass(this.label, "ui-checkboxradio-checked", "ui-state-active", checked),
            null !== this.options.label && this._updateLabel(),
            isDisabled !== this.options.disabled && this._setOptions({
                disabled: isDisabled
            })
        }
    }]),
    $.ui.checkboxradio
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./controlgroup", "./checkboxradio", "../keycode", "../widget"], factory) : factory(jQuery)
}(function($) {
    return $.widget("ui.button", {
        version: "1.12.1",
        defaultElement: "<button>",
        options: {
            classes: {
                "ui-button": "ui-corner-all"
            },
            disabled: null,
            icon: null,
            iconPosition: "beginning",
            label: null,
            showLabel: !0
        },
        _getCreateOptions: function() {
            var disabled, options = this._super() || {};
            return this.isInput = this.element.is("input"),
            disabled = this.element[0].disabled,
            null != disabled && (options.disabled = disabled),
            this.originalLabel = this.isInput ? this.element.val() : this.element.html(),
            this.originalLabel && (options.label = this.originalLabel),
            options
        },
        _create: function() {
            !this.option.showLabel & !this.options.icon && (this.options.showLabel = !0),
            null == this.options.disabled && (this.options.disabled = this.element[0].disabled || !1),
            this.hasTitle = !!this.element.attr("title"),
            this.options.label && this.options.label !== this.originalLabel && (this.isInput ? this.element.val(this.options.label) : this.element.html(this.options.label)),
            this._addClass("ui-button", "ui-widget"),
            this._setOption("disabled", this.options.disabled),
            this._enhance(),
            this.element.is("a") && this._on({
                keyup: function(event) {
                    event.keyCode === $.ui.keyCode.SPACE && (event.preventDefault(),
                    this.element[0].click ? this.element[0].click() : this.element.trigger("click"))
                }
            })
        },
        _enhance: function() {
            this.element.is("button") || this.element.attr("role", "button"),
            this.options.icon && (this._updateIcon("icon", this.options.icon),
            this._updateTooltip())
        },
        _updateTooltip: function() {
            this.title = this.element.attr("title"),
            this.options.showLabel || this.title || this.element.attr("title", this.options.label)
        },
        _updateIcon: function(option, value) {
            var icon = "iconPosition" !== option
              , position = icon ? this.options.iconPosition : value
              , displayBlock = "top" === position || "bottom" === position;
            this.icon ? icon && this._removeClass(this.icon, null, this.options.icon) : (this.icon = $("<span>"),
            this._addClass(this.icon, "ui-button-icon", "ui-icon"),
            this.options.showLabel || this._addClass("ui-button-icon-only")),
            icon && this._addClass(this.icon, null, value),
            this._attachIcon(position),
            displayBlock ? (this._addClass(this.icon, null, "ui-widget-icon-block"),
            this.iconSpace && this.iconSpace.remove()) : (this.iconSpace || (this.iconSpace = $("<span> </span>"),
            this._addClass(this.iconSpace, "ui-button-icon-space")),
            this._removeClass(this.icon, null, "ui-wiget-icon-block"),
            this._attachIconSpace(position))
        },
        _destroy: function() {
            this.element.removeAttr("role"),
            this.icon && this.icon.remove(),
            this.iconSpace && this.iconSpace.remove(),
            this.hasTitle || this.element.removeAttr("title")
        },
        _attachIconSpace: function(iconPosition) {
            this.icon[/^(?:end|bottom)/.test(iconPosition) ? "before" : "after"](this.iconSpace)
        },
        _attachIcon: function(iconPosition) {
            this.element[/^(?:end|bottom)/.test(iconPosition) ? "append" : "prepend"](this.icon)
        },
        _setOptions: function(options) {
            var newShowLabel = void 0 === options.showLabel ? this.options.showLabel : options.showLabel
              , newIcon = void 0 === options.icon ? this.options.icon : options.icon;
            newShowLabel || newIcon || (options.showLabel = !0),
            this._super(options)
        },
        _setOption: function(key, value) {
            "icon" === key && (value ? this._updateIcon(key, value) : this.icon && (this.icon.remove(),
            this.iconSpace && this.iconSpace.remove())),
            "iconPosition" === key && this._updateIcon(key, value),
            "showLabel" === key && (this._toggleClass("ui-button-icon-only", null, !value),
            this._updateTooltip()),
            "label" === key && (this.isInput ? this.element.val(value) : (this.element.html(value),
            this.icon && (this._attachIcon(this.options.iconPosition),
            this._attachIconSpace(this.options.iconPosition)))),
            this._super(key, value),
            "disabled" === key && (this._toggleClass(null, "ui-state-disabled", value),
            this.element[0].disabled = value,
            value && this.element.blur())
        },
        refresh: function() {
            var isDisabled = this.element.is("input, button") ? this.element[0].disabled : this.element.hasClass("ui-button-disabled");
            isDisabled !== this.options.disabled && this._setOptions({
                disabled: isDisabled
            }),
            this._updateTooltip()
        }
    }),
    $.uiBackCompat !== !1 && ($.widget("ui.button", $.ui.button, {
        options: {
            text: !0,
            icons: {
                primary: null,
                secondary: null
            }
        },
        _create: function() {
            this.options.showLabel && !this.options.text && (this.options.showLabel = this.options.text),
            !this.options.showLabel && this.options.text && (this.options.text = this.options.showLabel),
            this.options.icon || !this.options.icons.primary && !this.options.icons.secondary ? this.options.icon && (this.options.icons.primary = this.options.icon) : this.options.icons.primary ? this.options.icon = this.options.icons.primary : (this.options.icon = this.options.icons.secondary,
            this.options.iconPosition = "end"),
            this._super()
        },
        _setOption: function(key, value) {
            return "text" === key ? void this._super("showLabel", value) : ("showLabel" === key && (this.options.text = value),
            "icon" === key && (this.options.icons.primary = value),
            "icons" === key && (value.primary ? (this._super("icon", value.primary),
            this._super("iconPosition", "beginning")) : value.secondary && (this._super("icon", value.secondary),
            this._super("iconPosition", "end"))),
            void this._superApply(arguments))
        }
    }),
    $.fn.button = function(orig) {
        return function() {
            return !this.length || this.length && "INPUT" !== this[0].tagName || this.length && "INPUT" === this[0].tagName && "checkbox" !== this.attr("type") && "radio" !== this.attr("type") ? orig.apply(this, arguments) : ($.ui.checkboxradio || $.error("Checkboxradio widget missing"),
            0 === arguments.length ? this.checkboxradio({
                icon: !1
            }) : this.checkboxradio.apply(this, arguments))
        }
    }($.fn.button),
    $.fn.buttonset = function() {
        return $.ui.controlgroup || $.error("Controlgroup widget missing"),
        "option" === arguments[0] && "items" === arguments[1] && arguments[2] ? this.controlgroup.apply(this, [arguments[0], "items.button", arguments[2]]) : "option" === arguments[0] && "items" === arguments[1] ? this.controlgroup.apply(this, [arguments[0], "items.button"]) : ("object" == typeof arguments[0] && arguments[0].items && (arguments[0].items = {
            button: arguments[0].items
        }),
        this.controlgroup.apply(this, arguments))
    }
    ),
    $.ui.button
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../keycode"], factory) : factory(jQuery)
}(function($) {
    function datepicker_getZindex(elem) {
        for (var position, value; elem.length && elem[0] !== document; ) {
            if (position = elem.css("position"),
            ("absolute" === position || "relative" === position || "fixed" === position) && (value = parseInt(elem.css("zIndex"), 10),
            !isNaN(value) && 0 !== value))
                return value;
            elem = elem.parent()
        }
        return 0
    }
    function Datepicker() {
        this._curInst = null,
        this._keyEvent = !1,
        this._disabledInputs = [],
        this._datepickerShowing = !1,
        this._inDialog = !1,
        this._mainDivId = "ui-datepicker-div",
        this._inlineClass = "ui-datepicker-inline",
        this._appendClass = "ui-datepicker-append",
        this._triggerClass = "ui-datepicker-trigger",
        this._dialogClass = "ui-datepicker-dialog",
        this._disableClass = "ui-datepicker-disabled",
        this._unselectableClass = "ui-datepicker-unselectable",
        this._currentClass = "ui-datepicker-current-day",
        this._dayOverClass = "ui-datepicker-days-cell-over",
        this.regional = [],
        this.regional[""] = {
            closeText: "Done",
            prevText: "Prev",
            nextText: "Next",
            currentText: "Today",
            monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
            dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
            weekHeader: "Wk",
            dateFormat: "mm/dd/yy",
            firstDay: 0,
            isRTL: !1,
            showMonthAfterYear: !1,
            yearSuffix: ""
        },
        this._defaults = {
            showOn: "focus",
            showAnim: "fadeIn",
            showOptions: {},
            defaultDate: null,
            appendText: "",
            buttonText: "...",
            buttonImage: "",
            buttonImageOnly: !1,
            hideIfNoPrevNext: !1,
            navigationAsDateFormat: !1,
            gotoCurrent: !1,
            changeMonth: !1,
            changeYear: !1,
            yearRange: "c-10:c+10",
            showOtherMonths: !1,
            selectOtherMonths: !1,
            showWeek: !1,
            calculateWeek: this.iso8601Week,
            shortYearCutoff: "+10",
            minDate: null,
            maxDate: null,
            duration: "fast",
            beforeShowDay: null,
            beforeShow: null,
            onSelect: null,
            onChangeMonthYear: null,
            onClose: null,
            numberOfMonths: 1,
            showCurrentAtPos: 0,
            stepMonths: 1,
            stepBigMonths: 12,
            altField: "",
            altFormat: "",
            constrainInput: !0,
            showButtonPanel: !1,
            autoSize: !1,
            disabled: !1
        },
        $.extend(this._defaults, this.regional[""]),
        this.regional.en = $.extend(!0, {}, this.regional[""]),
        this.regional["en-US"] = $.extend(!0, {}, this.regional.en),
        this.dpDiv = datepicker_bindHover($("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))
    }
    function datepicker_bindHover(dpDiv) {
        var selector = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
        return dpDiv.on("mouseout", selector, function() {
            $(this).removeClass("ui-state-hover"),
            -1 !== this.className.indexOf("ui-datepicker-prev") && $(this).removeClass("ui-datepicker-prev-hover"),
            -1 !== this.className.indexOf("ui-datepicker-next") && $(this).removeClass("ui-datepicker-next-hover")
        }).on("mouseover", selector, datepicker_handleMouseover)
    }
    function datepicker_handleMouseover() {
        $.datepicker._isDisabledDatepicker(datepicker_instActive.inline ? datepicker_instActive.dpDiv.parent()[0] : datepicker_instActive.input[0]) || ($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
        $(this).addClass("ui-state-hover"),
        -1 !== this.className.indexOf("ui-datepicker-prev") && $(this).addClass("ui-datepicker-prev-hover"),
        -1 !== this.className.indexOf("ui-datepicker-next") && $(this).addClass("ui-datepicker-next-hover"))
    }
    function datepicker_extendRemove(target, props) {
        $.extend(target, props);
        for (var name in props)
            null == props[name] && (target[name] = props[name]);
        return target
    }
    $.extend($.ui, {
        datepicker: {
            version: "1.12.1"
        }
    });
    var datepicker_instActive;
    return $.extend(Datepicker.prototype, {
        markerClassName: "hasDatepicker",
        maxRows: 4,
        _widgetDatepicker: function() {
            return this.dpDiv
        },
        setDefaults: function(settings) {
            return datepicker_extendRemove(this._defaults, settings || {}),
            this
        },
        _attachDatepicker: function(target, settings) {
            var nodeName, inline, inst;
            nodeName = target.nodeName.toLowerCase(),
            inline = "div" === nodeName || "span" === nodeName,
            target.id || (this.uuid += 1,
            target.id = "dp" + this.uuid),
            inst = this._newInst($(target), inline),
            inst.settings = $.extend({}, settings || {}),
            "input" === nodeName ? this._connectDatepicker(target, inst) : inline && this._inlineDatepicker(target, inst)
        },
        _newInst: function(target, inline) {
            var id = target[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1");
            return {
                id: id,
                input: target,
                selectedDay: 0,
                selectedMonth: 0,
                selectedYear: 0,
                drawMonth: 0,
                drawYear: 0,
                inline: inline,
                dpDiv: inline ? datepicker_bindHover($("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")) : this.dpDiv
            }
        },
        _connectDatepicker: function(target, inst) {
            var input = $(target);
            inst.append = $([]),
            inst.trigger = $([]),
            input.hasClass(this.markerClassName) || (this._attachments(input, inst),
            input.addClass(this.markerClassName).on("keydown", this._doKeyDown).on("keypress", this._doKeyPress).on("keyup", this._doKeyUp),
            this._autoSize(inst),
            $.data(target, "datepicker", inst),
            inst.settings.disabled && this._disableDatepicker(target))
        },
        _attachments: function(input, inst) {
            var showOn, buttonText, buttonImage, appendText = this._get(inst, "appendText"), isRTL = this._get(inst, "isRTL");
            inst.append && inst.append.remove(),
            appendText && (inst.append = $("<span class='" + this._appendClass + "'>" + appendText + "</span>"),
            input[isRTL ? "before" : "after"](inst.append)),
            input.off("focus", this._showDatepicker),
            inst.trigger && inst.trigger.remove(),
            showOn = this._get(inst, "showOn"),
            "focus" !== showOn && "both" !== showOn || input.on("focus", this._showDatepicker),
            "button" !== showOn && "both" !== showOn || (buttonText = this._get(inst, "buttonText"),
            buttonImage = this._get(inst, "buttonImage"),
            inst.trigger = $(this._get(inst, "buttonImageOnly") ? $("<img/>").addClass(this._triggerClass).attr({
                src: buttonImage,
                alt: buttonText,
                title: buttonText
            }) : $("<button type='button'></button>").addClass(this._triggerClass).html(buttonImage ? $("<img/>").attr({
                src: buttonImage,
                alt: buttonText,
                title: buttonText
            }) : buttonText)),
            input[isRTL ? "before" : "after"](inst.trigger),
            inst.trigger.on("click", function() {
                return $.datepicker._datepickerShowing && $.datepicker._lastInput === input[0] ? $.datepicker._hideDatepicker() : $.datepicker._datepickerShowing && $.datepicker._lastInput !== input[0] ? ($.datepicker._hideDatepicker(),
                $.datepicker._showDatepicker(input[0])) : $.datepicker._showDatepicker(input[0]),
                !1
            }))
        },
        _autoSize: function(inst) {
            if (this._get(inst, "autoSize") && !inst.inline) {
                var findMax, max, maxI, i, date = new Date(2009,11,20), dateFormat = this._get(inst, "dateFormat");
                dateFormat.match(/[DM]/) && (findMax = function(names) {
                    for (max = 0,
                    maxI = 0,
                    i = 0; i < names.length; i++)
                        names[i].length > max && (max = names[i].length,
                        maxI = i);
                    return maxI
                }
                ,
                date.setMonth(findMax(this._get(inst, dateFormat.match(/MM/) ? "monthNames" : "monthNamesShort"))),
                date.setDate(findMax(this._get(inst, dateFormat.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - date.getDay())),
                inst.input.attr("size", this._formatDate(inst, date).length)
            }
        },
        _inlineDatepicker: function(target, inst) {
            var divSpan = $(target);
            divSpan.hasClass(this.markerClassName) || (divSpan.addClass(this.markerClassName).append(inst.dpDiv),
            $.data(target, "datepicker", inst),
            this._setDate(inst, this._getDefaultDate(inst), !0),
            this._updateDatepicker(inst),
            this._updateAlternate(inst),
            inst.settings.disabled && this._disableDatepicker(target),
            inst.dpDiv.css("display", "block"))
        },
        _dialogDatepicker: function(input, date, onSelect, settings, pos) {
            var id, browserWidth, browserHeight, scrollX, scrollY, inst = this._dialogInst;
            return inst || (this.uuid += 1,
            id = "dp" + this.uuid,
            this._dialogInput = $("<input type='text' id='" + id + "' style='position: absolute; top: -100px; width: 0px;'/>"),
            this._dialogInput.on("keydown", this._doKeyDown),
            $("body").append(this._dialogInput),
            inst = this._dialogInst = this._newInst(this._dialogInput, !1),
            inst.settings = {},
            $.data(this._dialogInput[0], "datepicker", inst)),
            datepicker_extendRemove(inst.settings, settings || {}),
            date = date && date.constructor === Date ? this._formatDate(inst, date) : date,
            this._dialogInput.val(date),
            this._pos = pos ? pos.length ? pos : [pos.pageX, pos.pageY] : null,
            this._pos || (browserWidth = document.documentElement.clientWidth,
            browserHeight = document.documentElement.clientHeight,
            scrollX = document.documentElement.scrollLeft || document.body.scrollLeft,
            scrollY = document.documentElement.scrollTop || document.body.scrollTop,
            this._pos = [browserWidth / 2 - 100 + scrollX, browserHeight / 2 - 150 + scrollY]),
            this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"),
            inst.settings.onSelect = onSelect,
            this._inDialog = !0,
            this.dpDiv.addClass(this._dialogClass),
            this._showDatepicker(this._dialogInput[0]),
            $.blockUI && $.blockUI(this.dpDiv),
            $.data(this._dialogInput[0], "datepicker", inst),
            this
        },
        _destroyDatepicker: function(target) {
            var nodeName, $target = $(target), inst = $.data(target, "datepicker");
            $target.hasClass(this.markerClassName) && (nodeName = target.nodeName.toLowerCase(),
            $.removeData(target, "datepicker"),
            "input" === nodeName ? (inst.append.remove(),
            inst.trigger.remove(),
            $target.removeClass(this.markerClassName).off("focus", this._showDatepicker).off("keydown", this._doKeyDown).off("keypress", this._doKeyPress).off("keyup", this._doKeyUp)) : "div" !== nodeName && "span" !== nodeName || $target.removeClass(this.markerClassName).empty(),
            datepicker_instActive === inst && (datepicker_instActive = null))
        },
        _enableDatepicker: function(target) {
            var nodeName, inline, $target = $(target), inst = $.data(target, "datepicker");
            $target.hasClass(this.markerClassName) && (nodeName = target.nodeName.toLowerCase(),
            "input" === nodeName ? (target.disabled = !1,
            inst.trigger.filter("button").each(function() {
                this.disabled = !1
            }).end().filter("img").css({
                opacity: "1.0",
                cursor: ""
            })) : "div" !== nodeName && "span" !== nodeName || (inline = $target.children("." + this._inlineClass),
            inline.children().removeClass("ui-state-disabled"),
            inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !1)),
            this._disabledInputs = $.map(this._disabledInputs, function(value) {
                return value === target ? null : value
            }))
        },
        _disableDatepicker: function(target) {
            var nodeName, inline, $target = $(target), inst = $.data(target, "datepicker");
            $target.hasClass(this.markerClassName) && (nodeName = target.nodeName.toLowerCase(),
            "input" === nodeName ? (target.disabled = !0,
            inst.trigger.filter("button").each(function() {
                this.disabled = !0
            }).end().filter("img").css({
                opacity: "0.5",
                cursor: "default"
            })) : "div" !== nodeName && "span" !== nodeName || (inline = $target.children("." + this._inlineClass),
            inline.children().addClass("ui-state-disabled"),
            inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !0)),
            this._disabledInputs = $.map(this._disabledInputs, function(value) {
                return value === target ? null : value
            }),
            this._disabledInputs[this._disabledInputs.length] = target)
        },
        _isDisabledDatepicker: function(target) {
            if (!target)
                return !1;
            for (var i = 0; i < this._disabledInputs.length; i++)
                if (this._disabledInputs[i] === target)
                    return !0;
            return !1
        },
        _getInst: function(target) {
            try {
                return $.data(target, "datepicker")
            } catch (err) {
                throw "Missing instance data for this datepicker"
            }
        },
        _optionDatepicker: function(target, name, value) {
            var settings, date, minDate, maxDate, inst = this._getInst(target);
            return 2 === arguments.length && "string" == typeof name ? "defaults" === name ? $.extend({}, $.datepicker._defaults) : inst ? "all" === name ? $.extend({}, inst.settings) : this._get(inst, name) : null : (settings = name || {},
            "string" == typeof name && (settings = {},
            settings[name] = value),
            void (inst && (this._curInst === inst && this._hideDatepicker(),
            date = this._getDateDatepicker(target, !0),
            minDate = this._getMinMaxDate(inst, "min"),
            maxDate = this._getMinMaxDate(inst, "max"),
            datepicker_extendRemove(inst.settings, settings),
            null !== minDate && void 0 !== settings.dateFormat && void 0 === settings.minDate && (inst.settings.minDate = this._formatDate(inst, minDate)),
            null !== maxDate && void 0 !== settings.dateFormat && void 0 === settings.maxDate && (inst.settings.maxDate = this._formatDate(inst, maxDate)),
            "disabled"in settings && (settings.disabled ? this._disableDatepicker(target) : this._enableDatepicker(target)),
            this._attachments($(target), inst),
            this._autoSize(inst),
            this._setDate(inst, date),
            this._updateAlternate(inst),
            this._updateDatepicker(inst))))
        },
        _changeDatepicker: function(target, name, value) {
            this._optionDatepicker(target, name, value)
        },
        _refreshDatepicker: function(target) {
            var inst = this._getInst(target);
            inst && this._updateDatepicker(inst)
        },
        _setDateDatepicker: function(target, date) {
            var inst = this._getInst(target);
            inst && (this._setDate(inst, date),
            this._updateDatepicker(inst),
            this._updateAlternate(inst))
        },
        _getDateDatepicker: function(target, noDefault) {
            var inst = this._getInst(target);
            return inst && !inst.inline && this._setDateFromField(inst, noDefault),
            inst ? this._getDate(inst) : null
        },
        _doKeyDown: function(event) {
            var onSelect, dateStr, sel, inst = $.datepicker._getInst(event.target), handled = !0, isRTL = inst.dpDiv.is(".ui-datepicker-rtl");
            if (inst._keyEvent = !0,
            $.datepicker._datepickerShowing)
                switch (event.keyCode) {
                case 9:
                    $.datepicker._hideDatepicker(),
                    handled = !1;
                    break;
                case 13:
                    return sel = $("td." + $.datepicker._dayOverClass + ":not(." + $.datepicker._currentClass + ")", inst.dpDiv),
                    sel[0] && $.datepicker._selectDay(event.target, inst.selectedMonth, inst.selectedYear, sel[0]),
                    onSelect = $.datepicker._get(inst, "onSelect"),
                    onSelect ? (dateStr = $.datepicker._formatDate(inst),
                    onSelect.apply(inst.input ? inst.input[0] : null, [dateStr, inst])) : $.datepicker._hideDatepicker(),
                    !1;
                case 27:
                    $.datepicker._hideDatepicker();
                    break;
                case 33:
                    $.datepicker._adjustDate(event.target, event.ctrlKey ? -$.datepicker._get(inst, "stepBigMonths") : -$.datepicker._get(inst, "stepMonths"), "M");
                    break;
                case 34:
                    $.datepicker._adjustDate(event.target, event.ctrlKey ? +$.datepicker._get(inst, "stepBigMonths") : +$.datepicker._get(inst, "stepMonths"), "M");
                    break;
                case 35:
                    (event.ctrlKey || event.metaKey) && $.datepicker._clearDate(event.target),
                    handled = event.ctrlKey || event.metaKey;
                    break;
                case 36:
                    (event.ctrlKey || event.metaKey) && $.datepicker._gotoToday(event.target),
                    handled = event.ctrlKey || event.metaKey;
                    break;
                case 37:
                    (event.ctrlKey || event.metaKey) && $.datepicker._adjustDate(event.target, isRTL ? 1 : -1, "D"),
                    handled = event.ctrlKey || event.metaKey,
                    event.originalEvent.altKey && $.datepicker._adjustDate(event.target, event.ctrlKey ? -$.datepicker._get(inst, "stepBigMonths") : -$.datepicker._get(inst, "stepMonths"), "M");
                    break;
                case 38:
                    (event.ctrlKey || event.metaKey) && $.datepicker._adjustDate(event.target, -7, "D"),
                    handled = event.ctrlKey || event.metaKey;
                    break;
                case 39:
                    (event.ctrlKey || event.metaKey) && $.datepicker._adjustDate(event.target, isRTL ? -1 : 1, "D"),
                    handled = event.ctrlKey || event.metaKey,
                    event.originalEvent.altKey && $.datepicker._adjustDate(event.target, event.ctrlKey ? +$.datepicker._get(inst, "stepBigMonths") : +$.datepicker._get(inst, "stepMonths"), "M");
                    break;
                case 40:
                    (event.ctrlKey || event.metaKey) && $.datepicker._adjustDate(event.target, 7, "D"),
                    handled = event.ctrlKey || event.metaKey;
                    break;
                default:
                    handled = !1
                }
            else
                36 === event.keyCode && event.ctrlKey ? $.datepicker._showDatepicker(this) : handled = !1;
            handled && (event.preventDefault(),
            event.stopPropagation())
        },
        _doKeyPress: function(event) {
            var chars, chr, inst = $.datepicker._getInst(event.target);
            return $.datepicker._get(inst, "constrainInput") ? (chars = $.datepicker._possibleChars($.datepicker._get(inst, "dateFormat")),
            chr = String.fromCharCode(null == event.charCode ? event.keyCode : event.charCode),
            event.ctrlKey || event.metaKey || " " > chr || !chars || chars.indexOf(chr) > -1) : void 0
        },
        _doKeyUp: function(event) {
            var date, inst = $.datepicker._getInst(event.target);
            if (inst.input.val() !== inst.lastVal)
                try {
                    date = $.datepicker.parseDate($.datepicker._get(inst, "dateFormat"), inst.input ? inst.input.val() : null, $.datepicker._getFormatConfig(inst)),
                    date && ($.datepicker._setDateFromField(inst),
                    $.datepicker._updateAlternate(inst),
                    $.datepicker._updateDatepicker(inst))
                } catch (err) {}
            return !0
        },
        _showDatepicker: function(input) {
            if (input = input.target || input,
            "input" !== input.nodeName.toLowerCase() && (input = $("input", input.parentNode)[0]),
            !$.datepicker._isDisabledDatepicker(input) && $.datepicker._lastInput !== input) {
                var inst, beforeShow, beforeShowSettings, isFixed, offset, showAnim, duration;
                inst = $.datepicker._getInst(input),
                $.datepicker._curInst && $.datepicker._curInst !== inst && ($.datepicker._curInst.dpDiv.stop(!0, !0),
                inst && $.datepicker._datepickerShowing && $.datepicker._hideDatepicker($.datepicker._curInst.input[0])),
                beforeShow = $.datepicker._get(inst, "beforeShow"),
                beforeShowSettings = beforeShow ? beforeShow.apply(input, [input, inst]) : {},
                beforeShowSettings !== !1 && (datepicker_extendRemove(inst.settings, beforeShowSettings),
                inst.lastVal = null,
                $.datepicker._lastInput = input,
                $.datepicker._setDateFromField(inst),
                $.datepicker._inDialog && (input.value = ""),
                $.datepicker._pos || ($.datepicker._pos = $.datepicker._findPos(input),
                $.datepicker._pos[1] += input.offsetHeight),
                isFixed = !1,
                $(input).parents().each(function() {
                    return isFixed |= "fixed" === $(this).css("position"),
                    !isFixed
                }),
                offset = {
                    left: $.datepicker._pos[0],
                    top: $.datepicker._pos[1]
                },
                $.datepicker._pos = null,
                inst.dpDiv.empty(),
                inst.dpDiv.css({
                    position: "absolute",
                    display: "block",
                    top: "-1000px"
                }),
                $.datepicker._updateDatepicker(inst),
                offset = $.datepicker._checkOffset(inst, offset, isFixed),
                inst.dpDiv.css({
                    position: $.datepicker._inDialog && $.blockUI ? "static" : isFixed ? "fixed" : "absolute",
                    display: "none",
                    left: offset.left + "px",
                    top: offset.top + "px"
                }),
                inst.inline || (showAnim = $.datepicker._get(inst, "showAnim"),
                duration = $.datepicker._get(inst, "duration"),
                inst.dpDiv.css("z-index", datepicker_getZindex($(input)) + 1),
                $.datepicker._datepickerShowing = !0,
                $.effects && $.effects.effect[showAnim] ? inst.dpDiv.show(showAnim, $.datepicker._get(inst, "showOptions"), duration) : inst.dpDiv[showAnim || "show"](showAnim ? duration : null),
                $.datepicker._shouldFocusInput(inst) && inst.input.trigger("focus"),
                $.datepicker._curInst = inst))
            }
        },
        _updateDatepicker: function(inst) {
            this.maxRows = 4,
            datepicker_instActive = inst,
            inst.dpDiv.empty().append(this._generateHTML(inst)),
            this._attachHandlers(inst);
            var origyearshtml, numMonths = this._getNumberOfMonths(inst), cols = numMonths[1], width = 17, activeCell = inst.dpDiv.find("." + this._dayOverClass + " a");
            activeCell.length > 0 && datepicker_handleMouseover.apply(activeCell.get(0)),
            inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),
            cols > 1 && inst.dpDiv.addClass("ui-datepicker-multi-" + cols).css("width", width * cols + "em"),
            inst.dpDiv[(1 !== numMonths[0] || 1 !== numMonths[1] ? "add" : "remove") + "Class"]("ui-datepicker-multi"),
            inst.dpDiv[(this._get(inst, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl"),
            inst === $.datepicker._curInst && $.datepicker._datepickerShowing && $.datepicker._shouldFocusInput(inst) && inst.input.trigger("focus"),
            inst.yearshtml && (origyearshtml = inst.yearshtml,
            setTimeout(function() {
                origyearshtml === inst.yearshtml && inst.yearshtml && inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml),
                origyearshtml = inst.yearshtml = null
            }, 0))
        },
        _shouldFocusInput: function(inst) {
            return inst.input && inst.input.is(":visible") && !inst.input.is(":disabled") && !inst.input.is(":focus")
        },
        _checkOffset: function(inst, offset, isFixed) {
            var dpWidth = inst.dpDiv.outerWidth()
              , dpHeight = inst.dpDiv.outerHeight()
              , inputWidth = inst.input ? inst.input.outerWidth() : 0
              , inputHeight = inst.input ? inst.input.outerHeight() : 0
              , viewWidth = document.documentElement.clientWidth + (isFixed ? 0 : $(document).scrollLeft())
              , viewHeight = document.documentElement.clientHeight + (isFixed ? 0 : $(document).scrollTop());
            return offset.left -= this._get(inst, "isRTL") ? dpWidth - inputWidth : 0,
            offset.left -= isFixed && offset.left === inst.input.offset().left ? $(document).scrollLeft() : 0,
            offset.top -= isFixed && offset.top === inst.input.offset().top + inputHeight ? $(document).scrollTop() : 0,
            offset.left -= Math.min(offset.left, offset.left + dpWidth > viewWidth && viewWidth > dpWidth ? Math.abs(offset.left + dpWidth - viewWidth) : 0),
            offset.top -= Math.min(offset.top, offset.top + dpHeight > viewHeight && viewHeight > dpHeight ? Math.abs(dpHeight + inputHeight) : 0),
            offset
        },
        _findPos: function(obj) {
            for (var position, inst = this._getInst(obj), isRTL = this._get(inst, "isRTL"); obj && ("hidden" === obj.type || 1 !== obj.nodeType || $.expr.filters.hidden(obj)); )
                obj = obj[isRTL ? "previousSibling" : "nextSibling"];
            return position = $(obj).offset(),
            [position.left, position.top]
        },
        _hideDatepicker: function(input) {
            var showAnim, duration, postProcess, onClose, inst = this._curInst;
            !inst || input && inst !== $.data(input, "datepicker") || this._datepickerShowing && (showAnim = this._get(inst, "showAnim"),
            duration = this._get(inst, "duration"),
            postProcess = function() {
                $.datepicker._tidyDialog(inst)
            }
            ,
            $.effects && ($.effects.effect[showAnim] || $.effects[showAnim]) ? inst.dpDiv.hide(showAnim, $.datepicker._get(inst, "showOptions"), duration, postProcess) : inst.dpDiv["slideDown" === showAnim ? "slideUp" : "fadeIn" === showAnim ? "fadeOut" : "hide"](showAnim ? duration : null, postProcess),
            showAnim || postProcess(),
            this._datepickerShowing = !1,
            onClose = this._get(inst, "onClose"),
            onClose && onClose.apply(inst.input ? inst.input[0] : null, [inst.input ? inst.input.val() : "", inst]),
            this._lastInput = null,
            this._inDialog && (this._dialogInput.css({
                position: "absolute",
                left: "0",
                top: "-100px"
            }),
            $.blockUI && ($.unblockUI(),
            $("body").append(this.dpDiv))),
            this._inDialog = !1)
        },
        _tidyDialog: function(inst) {
            inst.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")
        },
        _checkExternalClick: function(event) {
            if ($.datepicker._curInst) {
                var $target = $(event.target)
                  , inst = $.datepicker._getInst($target[0]);
                ($target[0].id === $.datepicker._mainDivId || 0 !== $target.parents("#" + $.datepicker._mainDivId).length || $target.hasClass($.datepicker.markerClassName) || $target.closest("." + $.datepicker._triggerClass).length || !$.datepicker._datepickerShowing || $.datepicker._inDialog && $.blockUI) && (!$target.hasClass($.datepicker.markerClassName) || $.datepicker._curInst === inst) || $.datepicker._hideDatepicker()
            }
        },
        _adjustDate: function(id, offset, period) {
            var target = $(id)
              , inst = this._getInst(target[0]);
            this._isDisabledDatepicker(target[0]) || (this._adjustInstDate(inst, offset + ("M" === period ? this._get(inst, "showCurrentAtPos") : 0), period),
            this._updateDatepicker(inst))
        },
        _gotoToday: function(id) {
            var date, target = $(id), inst = this._getInst(target[0]);
            this._get(inst, "gotoCurrent") && inst.currentDay ? (inst.selectedDay = inst.currentDay,
            inst.drawMonth = inst.selectedMonth = inst.currentMonth,
            inst.drawYear = inst.selectedYear = inst.currentYear) : (date = new Date,
            inst.selectedDay = date.getDate(),
            inst.drawMonth = inst.selectedMonth = date.getMonth(),
            inst.drawYear = inst.selectedYear = date.getFullYear()),
            this._notifyChange(inst),
            this._adjustDate(target)
        },
        _selectMonthYear: function(id, select, period) {
            var target = $(id)
              , inst = this._getInst(target[0]);
            inst["selected" + ("M" === period ? "Month" : "Year")] = inst["draw" + ("M" === period ? "Month" : "Year")] = parseInt(select.options[select.selectedIndex].value, 10),
            this._notifyChange(inst),
            this._adjustDate(target)
        },
        _selectDay: function(id, month, year, td) {
            var inst, target = $(id);
            $(td).hasClass(this._unselectableClass) || this._isDisabledDatepicker(target[0]) || (inst = this._getInst(target[0]),
            inst.selectedDay = inst.currentDay = $("a", td).html(),
            inst.selectedMonth = inst.currentMonth = month,
            inst.selectedYear = inst.currentYear = year,
            this._selectDate(id, this._formatDate(inst, inst.currentDay, inst.currentMonth, inst.currentYear)))
        },
        _clearDate: function(id) {
            var target = $(id);
            this._selectDate(target, "")
        },
        _selectDate: function(id, dateStr) {
            var onSelect, target = $(id), inst = this._getInst(target[0]);
            dateStr = null != dateStr ? dateStr : this._formatDate(inst),
            inst.input && inst.input.val(dateStr),
            this._updateAlternate(inst),
            onSelect = this._get(inst, "onSelect"),
            onSelect ? onSelect.apply(inst.input ? inst.input[0] : null, [dateStr, inst]) : inst.input && inst.input.trigger("change"),
            inst.inline ? this._updateDatepicker(inst) : (this._hideDatepicker(),
            this._lastInput = inst.input[0],
            "object" != typeof inst.input[0] && inst.input.trigger("focus"),
            this._lastInput = null)
        },
        _updateAlternate: function(inst) {
            var altFormat, date, dateStr, altField = this._get(inst, "altField");
            altField && (altFormat = this._get(inst, "altFormat") || this._get(inst, "dateFormat"),
            date = this._getDate(inst),
            dateStr = this.formatDate(altFormat, date, this._getFormatConfig(inst)),
            $(altField).val(dateStr))
        },
        noWeekends: function(date) {
            var day = date.getDay();
            return [day > 0 && 6 > day, ""]
        },
        iso8601Week: function(date) {
            var time, checkDate = new Date(date.getTime());
            return checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7)),
            time = checkDate.getTime(),
            checkDate.setMonth(0),
            checkDate.setDate(1),
            Math.floor(Math.round((time - checkDate) / 864e5) / 7) + 1
        },
        parseDate: function(format, value, settings) {
            if (null == format || null == value)
                throw "Invalid arguments";
            if (value = "object" == typeof value ? value.toString() : value + "",
            "" === value)
                return null;
            var iFormat, dim, extra, date, iValue = 0, shortYearCutoffTemp = (settings ? settings.shortYearCutoff : null) || this._defaults.shortYearCutoff, shortYearCutoff = "string" != typeof shortYearCutoffTemp ? shortYearCutoffTemp : (new Date).getFullYear() % 100 + parseInt(shortYearCutoffTemp, 10), dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort, dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames, monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort, monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames, year = -1, month = -1, day = -1, doy = -1, literal = !1, lookAhead = function(match) {
                var matches = iFormat + 1 < format.length && format.charAt(iFormat + 1) === match;
                return matches && iFormat++,
                matches
            }, getNumber = function(match) {
                var isDoubled = lookAhead(match)
                  , size = "@" === match ? 14 : "!" === match ? 20 : "y" === match && isDoubled ? 4 : "o" === match ? 3 : 2
                  , minSize = "y" === match ? size : 1
                  , digits = new RegExp("^\\d{" + minSize + "," + size + "}")
                  , num = value.substring(iValue).match(digits);
                if (!num)
                    throw "Missing number at position " + iValue;
                return iValue += num[0].length,
                parseInt(num[0], 10)
            }, getName = function(match, shortNames, longNames) {
                var index = -1
                  , names = $.map(lookAhead(match) ? longNames : shortNames, function(v, k) {
                    return [[k, v]]
                }).sort(function(a, b) {
                    return -(a[1].length - b[1].length)
                });
                if ($.each(names, function(i, pair) {
                    var name = pair[1];
                    return value.substr(iValue, name.length).toLowerCase() === name.toLowerCase() ? (index = pair[0],
                    iValue += name.length,
                    !1) : void 0
                }),
                -1 !== index)
                    return index + 1;
                throw "Unknown name at position " + iValue
            }, checkLiteral = function() {
                if (value.charAt(iValue) !== format.charAt(iFormat))
                    throw "Unexpected literal at position " + iValue;
                iValue++
            };
            for (iFormat = 0; iFormat < format.length; iFormat++)
                if (literal)
                    "'" !== format.charAt(iFormat) || lookAhead("'") ? checkLiteral() : literal = !1;
                else
                    switch (format.charAt(iFormat)) {
                    case "d":
                        day = getNumber("d");
                        break;
                    case "D":
                        getName("D", dayNamesShort, dayNames);
                        break;
                    case "o":
                        doy = getNumber("o");
                        break;
                    case "m":
                        month = getNumber("m");
                        break;
                    case "M":
                        month = getName("M", monthNamesShort, monthNames);
                        break;
                    case "y":
                        year = getNumber("y");
                        break;
                    case "@":
                        date = new Date(getNumber("@")),
                        year = date.getFullYear(),
                        month = date.getMonth() + 1,
                        day = date.getDate();
                        break;
                    case "!":
                        date = new Date((getNumber("!") - this._ticksTo1970) / 1e4),
                        year = date.getFullYear(),
                        month = date.getMonth() + 1,
                        day = date.getDate();
                        break;
                    case "'":
                        lookAhead("'") ? checkLiteral() : literal = !0;
                        break;
                    default:
                        checkLiteral()
                    }
            if (iValue < value.length && (extra = value.substr(iValue),
            !/^\s+/.test(extra)))
                throw "Extra/unparsed characters found in date: " + extra;
            if (-1 === year ? year = (new Date).getFullYear() : 100 > year && (year += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (shortYearCutoff >= year ? 0 : -100)),
            doy > -1)
                for (month = 1,
                day = doy; ; ) {
                    if (dim = this._getDaysInMonth(year, month - 1),
                    dim >= day)
                        break;
                    month++,
                    day -= dim
                }
            if (date = this._daylightSavingAdjust(new Date(year,month - 1,day)),
            date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day)
                throw "Invalid date";
            return date
        },
        ATOM: "yy-mm-dd",
        COOKIE: "D, dd M yy",
        ISO_8601: "yy-mm-dd",
        RFC_822: "D, d M y",
        RFC_850: "DD, dd-M-y",
        RFC_1036: "D, d M y",
        RFC_1123: "D, d M yy",
        RFC_2822: "D, d M yy",
        RSS: "D, d M y",
        TICKS: "!",
        TIMESTAMP: "@",
        W3C: "yy-mm-dd",
        _ticksTo1970: 24 * (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)) * 60 * 60 * 1e7,
        formatDate: function(format, date, settings) {
            if (!date)
                return "";
            var iFormat, dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort, dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames, monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort, monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames, lookAhead = function(match) {
                var matches = iFormat + 1 < format.length && format.charAt(iFormat + 1) === match;
                return matches && iFormat++,
                matches
            }, formatNumber = function(match, value, len) {
                var num = "" + value;
                if (lookAhead(match))
                    for (; num.length < len; )
                        num = "0" + num;
                return num
            }, formatName = function(match, value, shortNames, longNames) {
                return lookAhead(match) ? longNames[value] : shortNames[value]
            }, output = "", literal = !1;
            if (date)
                for (iFormat = 0; iFormat < format.length; iFormat++)
                    if (literal)
                        "'" !== format.charAt(iFormat) || lookAhead("'") ? output += format.charAt(iFormat) : literal = !1;
                    else
                        switch (format.charAt(iFormat)) {
                        case "d":
                            output += formatNumber("d", date.getDate(), 2);
                            break;
                        case "D":
                            output += formatName("D", date.getDay(), dayNamesShort, dayNames);
                            break;
                        case "o":
                            output += formatNumber("o", Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime() - new Date(date.getFullYear(),0,0).getTime()) / 864e5), 3);
                            break;
                        case "m":
                            output += formatNumber("m", date.getMonth() + 1, 2);
                            break;
                        case "M":
                            output += formatName("M", date.getMonth(), monthNamesShort, monthNames);
                            break;
                        case "y":
                            output += lookAhead("y") ? date.getFullYear() : (date.getFullYear() % 100 < 10 ? "0" : "") + date.getFullYear() % 100;
                            break;
                        case "@":
                            output += date.getTime();
                            break;
                        case "!":
                            output += 1e4 * date.getTime() + this._ticksTo1970;
                            break;
                        case "'":
                            lookAhead("'") ? output += "'" : literal = !0;
                            break;
                        default:
                            output += format.charAt(iFormat)
                        }
            return output
        },
        _possibleChars: function(format) {
            var iFormat, chars = "", literal = !1, lookAhead = function(match) {
                var matches = iFormat + 1 < format.length && format.charAt(iFormat + 1) === match;
                return matches && iFormat++,
                matches
            };
            for (iFormat = 0; iFormat < format.length; iFormat++)
                if (literal)
                    "'" !== format.charAt(iFormat) || lookAhead("'") ? chars += format.charAt(iFormat) : literal = !1;
                else
                    switch (format.charAt(iFormat)) {
                    case "d":
                    case "m":
                    case "y":
                    case "@":
                        chars += "0123456789";
                        break;
                    case "D":
                    case "M":
                        return null;
                    case "'":
                        lookAhead("'") ? chars += "'" : literal = !0;
                        break;
                    default:
                        chars += format.charAt(iFormat)
                    }
            return chars
        },
        _get: function(inst, name) {
            return void 0 !== inst.settings[name] ? inst.settings[name] : this._defaults[name]
        },
        _setDateFromField: function(inst, noDefault) {
            if (inst.input.val() !== inst.lastVal) {
                var dateFormat = this._get(inst, "dateFormat")
                  , dates = inst.lastVal = inst.input ? inst.input.val() : null
                  , defaultDate = this._getDefaultDate(inst)
                  , date = defaultDate
                  , settings = this._getFormatConfig(inst);
                try {
                    date = this.parseDate(dateFormat, dates, settings) || defaultDate
                } catch (event) {
                    dates = noDefault ? "" : dates
                }
                inst.selectedDay = date.getDate(),
                inst.drawMonth = inst.selectedMonth = date.getMonth(),
                inst.drawYear = inst.selectedYear = date.getFullYear(),
                inst.currentDay = dates ? date.getDate() : 0,
                inst.currentMonth = dates ? date.getMonth() : 0,
                inst.currentYear = dates ? date.getFullYear() : 0,
                this._adjustInstDate(inst)
            }
        },
        _getDefaultDate: function(inst) {
            return this._restrictMinMax(inst, this._determineDate(inst, this._get(inst, "defaultDate"), new Date))
        },
        _determineDate: function(inst, date, defaultDate) {
            var offsetNumeric = function(offset) {
                var date = new Date;
                return date.setDate(date.getDate() + offset),
                date
            }
              , offsetString = function(offset) {
                try {
                    return $.datepicker.parseDate($.datepicker._get(inst, "dateFormat"), offset, $.datepicker._getFormatConfig(inst))
                } catch (e) {}
                for (var date = (offset.toLowerCase().match(/^c/) ? $.datepicker._getDate(inst) : null) || new Date, year = date.getFullYear(), month = date.getMonth(), day = date.getDate(), pattern = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g, matches = pattern.exec(offset); matches; ) {
                    switch (matches[2] || "d") {
                    case "d":
                    case "D":
                        day += parseInt(matches[1], 10);
                        break;
                    case "w":
                    case "W":
                        day += 7 * parseInt(matches[1], 10);
                        break;
                    case "m":
                    case "M":
                        month += parseInt(matches[1], 10),
                        day = Math.min(day, $.datepicker._getDaysInMonth(year, month));
                        break;
                    case "y":
                    case "Y":
                        year += parseInt(matches[1], 10),
                        day = Math.min(day, $.datepicker._getDaysInMonth(year, month))
                    }
                    matches = pattern.exec(offset)
                }
                return new Date(year,month,day)
            }
              , newDate = null == date || "" === date ? defaultDate : "string" == typeof date ? offsetString(date) : "number" == typeof date ? isNaN(date) ? defaultDate : offsetNumeric(date) : new Date(date.getTime());
            return newDate = newDate && "Invalid Date" === newDate.toString() ? defaultDate : newDate,
            newDate && (newDate.setHours(0),
            newDate.setMinutes(0),
            newDate.setSeconds(0),
            newDate.setMilliseconds(0)),
            this._daylightSavingAdjust(newDate)
        },
        _daylightSavingAdjust: function(date) {
            return date ? (date.setHours(date.getHours() > 12 ? date.getHours() + 2 : 0),
            date) : null
        },
        _setDate: function(inst, date, noChange) {
            var clear = !date
              , origMonth = inst.selectedMonth
              , origYear = inst.selectedYear
              , newDate = this._restrictMinMax(inst, this._determineDate(inst, date, new Date));
            inst.selectedDay = inst.currentDay = newDate.getDate(),
            inst.drawMonth = inst.selectedMonth = inst.currentMonth = newDate.getMonth(),
            inst.drawYear = inst.selectedYear = inst.currentYear = newDate.getFullYear(),
            origMonth === inst.selectedMonth && origYear === inst.selectedYear || noChange || this._notifyChange(inst),
            this._adjustInstDate(inst),
            inst.input && inst.input.val(clear ? "" : this._formatDate(inst))
        },
        _getDate: function(inst) {
            var startDate = !inst.currentYear || inst.input && "" === inst.input.val() ? null : this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));
            return startDate
        },
        _attachHandlers: function(inst) {
            var stepMonths = this._get(inst, "stepMonths")
              , id = "#" + inst.id.replace(/\\\\/g, "\\");
            inst.dpDiv.find("[data-handler]").map(function() {
                var handler = {
                    prev: function() {
                        $.datepicker._adjustDate(id, -stepMonths, "M")
                    },
                    next: function() {
                        $.datepicker._adjustDate(id, +stepMonths, "M")
                    },
                    hide: function() {
                        $.datepicker._hideDatepicker()
                    },
                    today: function() {
                        $.datepicker._gotoToday(id)
                    },
                    selectDay: function() {
                        return $.datepicker._selectDay(id, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this),
                        !1
                    },
                    selectMonth: function() {
                        return $.datepicker._selectMonthYear(id, this, "M"),
                        !1
                    },
                    selectYear: function() {
                        return $.datepicker._selectMonthYear(id, this, "Y"),
                        !1
                    }
                };
                $(this).on(this.getAttribute("data-event"), handler[this.getAttribute("data-handler")])
            })
        },
        _generateHTML: function(inst) {
            var maxDraw, prevText, prev, nextText, next, currentText, gotoDate, controls, buttonPanel, firstDay, showWeek, dayNames, dayNamesMin, monthNames, monthNamesShort, beforeShowDay, showOtherMonths, selectOtherMonths, defaultDate, html, dow, row, group, col, selectedDate, cornerClass, calender, thead, day, daysInMonth, leadDays, curRows, numRows, printDate, dRow, tbody, daySettings, otherMonth, unselectable, tempDate = new Date, today = this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())), isRTL = this._get(inst, "isRTL"), showButtonPanel = this._get(inst, "showButtonPanel"), hideIfNoPrevNext = this._get(inst, "hideIfNoPrevNext"), navigationAsDateFormat = this._get(inst, "navigationAsDateFormat"), numMonths = this._getNumberOfMonths(inst), showCurrentAtPos = this._get(inst, "showCurrentAtPos"), stepMonths = this._get(inst, "stepMonths"), isMultiMonth = 1 !== numMonths[0] || 1 !== numMonths[1], currentDate = this._daylightSavingAdjust(inst.currentDay ? new Date(inst.currentYear,inst.currentMonth,inst.currentDay) : new Date(9999,9,9)), minDate = this._getMinMaxDate(inst, "min"), maxDate = this._getMinMaxDate(inst, "max"), drawMonth = inst.drawMonth - showCurrentAtPos, drawYear = inst.drawYear;
            if (0 > drawMonth && (drawMonth += 12,
            drawYear--),
            maxDate)
                for (maxDraw = this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth() - numMonths[0] * numMonths[1] + 1,maxDate.getDate())),
                maxDraw = minDate && minDate > maxDraw ? minDate : maxDraw; this._daylightSavingAdjust(new Date(drawYear,drawMonth,1)) > maxDraw; )
                    drawMonth--,
                    0 > drawMonth && (drawMonth = 11,
                    drawYear--);
            for (inst.drawMonth = drawMonth,
            inst.drawYear = drawYear,
            prevText = this._get(inst, "prevText"),
            prevText = navigationAsDateFormat ? this.formatDate(prevText, this._daylightSavingAdjust(new Date(drawYear,drawMonth - stepMonths,1)), this._getFormatConfig(inst)) : prevText,
            prev = this._canAdjustMonth(inst, -1, drawYear, drawMonth) ? "<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='" + prevText + "'><span class='ui-icon ui-icon-circle-triangle-" + (isRTL ? "e" : "w") + "'>" + prevText + "</span></a>" : hideIfNoPrevNext ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='" + prevText + "'><span class='ui-icon ui-icon-circle-triangle-" + (isRTL ? "e" : "w") + "'>" + prevText + "</span></a>",
            nextText = this._get(inst, "nextText"),
            nextText = navigationAsDateFormat ? this.formatDate(nextText, this._daylightSavingAdjust(new Date(drawYear,drawMonth + stepMonths,1)), this._getFormatConfig(inst)) : nextText,
            next = this._canAdjustMonth(inst, 1, drawYear, drawMonth) ? "<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='" + nextText + "'><span class='ui-icon ui-icon-circle-triangle-" + (isRTL ? "w" : "e") + "'>" + nextText + "</span></a>" : hideIfNoPrevNext ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='" + nextText + "'><span class='ui-icon ui-icon-circle-triangle-" + (isRTL ? "w" : "e") + "'>" + nextText + "</span></a>",
            currentText = this._get(inst, "currentText"),
            gotoDate = this._get(inst, "gotoCurrent") && inst.currentDay ? currentDate : today,
            currentText = navigationAsDateFormat ? this.formatDate(currentText, gotoDate, this._getFormatConfig(inst)) : currentText,
            controls = inst.inline ? "" : "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" + this._get(inst, "closeText") + "</button>",
            buttonPanel = showButtonPanel ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (isRTL ? controls : "") + (this._isInRange(inst, gotoDate) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>" + currentText + "</button>" : "") + (isRTL ? "" : controls) + "</div>" : "",
            firstDay = parseInt(this._get(inst, "firstDay"), 10),
            firstDay = isNaN(firstDay) ? 0 : firstDay,
            showWeek = this._get(inst, "showWeek"),
            dayNames = this._get(inst, "dayNames"),
            dayNamesMin = this._get(inst, "dayNamesMin"),
            monthNames = this._get(inst, "monthNames"),
            monthNamesShort = this._get(inst, "monthNamesShort"),
            beforeShowDay = this._get(inst, "beforeShowDay"),
            showOtherMonths = this._get(inst, "showOtherMonths"),
            selectOtherMonths = this._get(inst, "selectOtherMonths"),
            defaultDate = this._getDefaultDate(inst),
            html = "",
            row = 0; row < numMonths[0]; row++) {
                for (group = "",
                this.maxRows = 4,
                col = 0; col < numMonths[1]; col++) {
                    if (selectedDate = this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay)),
                    cornerClass = " ui-corner-all",
                    calender = "",
                    isMultiMonth) {
                        if (calender += "<div class='ui-datepicker-group",
                        numMonths[1] > 1)
                            switch (col) {
                            case 0:
                                calender += " ui-datepicker-group-first",
                                cornerClass = " ui-corner-" + (isRTL ? "right" : "left");
                                break;
                            case numMonths[1] - 1:
                                calender += " ui-datepicker-group-last",
                                cornerClass = " ui-corner-" + (isRTL ? "left" : "right");
                                break;
                            default:
                                calender += " ui-datepicker-group-middle",
                                cornerClass = ""
                            }
                        calender += "'>"
                    }
                    for (calender += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + cornerClass + "'>" + (/all|left/.test(cornerClass) && 0 === row ? isRTL ? next : prev : "") + (/all|right/.test(cornerClass) && 0 === row ? isRTL ? prev : next : "") + this._generateMonthYearHeader(inst, drawMonth, drawYear, minDate, maxDate, row > 0 || col > 0, monthNames, monthNamesShort) + "</div><table class='ui-datepicker-calendar'><thead><tr>",
                    thead = showWeek ? "<th class='ui-datepicker-week-col'>" + this._get(inst, "weekHeader") + "</th>" : "",
                    dow = 0; 7 > dow; dow++)
                        day = (dow + firstDay) % 7,
                        thead += "<th scope='col'" + ((dow + firstDay + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + "><span title='" + dayNames[day] + "'>" + dayNamesMin[day] + "</span></th>";
                    for (calender += thead + "</tr></thead><tbody>",
                    daysInMonth = this._getDaysInMonth(drawYear, drawMonth),
                    drawYear === inst.selectedYear && drawMonth === inst.selectedMonth && (inst.selectedDay = Math.min(inst.selectedDay, daysInMonth)),
                    leadDays = (this._getFirstDayOfMonth(drawYear, drawMonth) - firstDay + 7) % 7,
                    curRows = Math.ceil((leadDays + daysInMonth) / 7),
                    numRows = isMultiMonth && this.maxRows > curRows ? this.maxRows : curRows,
                    this.maxRows = numRows,
                    printDate = this._daylightSavingAdjust(new Date(drawYear,drawMonth,1 - leadDays)),
                    dRow = 0; numRows > dRow; dRow++) {
                        for (calender += "<tr>",
                        tbody = showWeek ? "<td class='ui-datepicker-week-col'>" + this._get(inst, "calculateWeek")(printDate) + "</td>" : "",
                        dow = 0; 7 > dow; dow++)
                            daySettings = beforeShowDay ? beforeShowDay.apply(inst.input ? inst.input[0] : null, [printDate]) : [!0, ""],
                            otherMonth = printDate.getMonth() !== drawMonth,
                            unselectable = otherMonth && !selectOtherMonths || !daySettings[0] || minDate && minDate > printDate || maxDate && printDate > maxDate,
                            tbody += "<td class='" + ((dow + firstDay + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (otherMonth ? " ui-datepicker-other-month" : "") + (printDate.getTime() === selectedDate.getTime() && drawMonth === inst.selectedMonth && inst._keyEvent || defaultDate.getTime() === printDate.getTime() && defaultDate.getTime() === selectedDate.getTime() ? " " + this._dayOverClass : "") + (unselectable ? " " + this._unselectableClass + " ui-state-disabled" : "") + (otherMonth && !showOtherMonths ? "" : " " + daySettings[1] + (printDate.getTime() === currentDate.getTime() ? " " + this._currentClass : "") + (printDate.getTime() === today.getTime() ? " ui-datepicker-today" : "")) + "'" + (otherMonth && !showOtherMonths || !daySettings[2] ? "" : " title='" + daySettings[2].replace(/'/g, "&#39;") + "'") + (unselectable ? "" : " data-handler='selectDay' data-event='click' data-month='" + printDate.getMonth() + "' data-year='" + printDate.getFullYear() + "'") + ">" + (otherMonth && !showOtherMonths ? "&#xa0;" : unselectable ? "<span class='ui-state-default'>" + printDate.getDate() + "</span>" : "<a class='ui-state-default" + (printDate.getTime() === today.getTime() ? " ui-state-highlight" : "") + (printDate.getTime() === currentDate.getTime() ? " ui-state-active" : "") + (otherMonth ? " ui-priority-secondary" : "") + "' href='#'>" + printDate.getDate() + "</a>") + "</td>",
                            printDate.setDate(printDate.getDate() + 1),
                            printDate = this._daylightSavingAdjust(printDate);
                        calender += tbody + "</tr>"
                    }
                    drawMonth++,
                    drawMonth > 11 && (drawMonth = 0,
                    drawYear++),
                    calender += "</tbody></table>" + (isMultiMonth ? "</div>" + (numMonths[0] > 0 && col === numMonths[1] - 1 ? "<div class='ui-datepicker-row-break'></div>" : "") : ""),
                    group += calender
                }
                html += group
            }
            return html += buttonPanel,
            inst._keyEvent = !1,
            html
        },
        _generateMonthYearHeader: function(inst, drawMonth, drawYear, minDate, maxDate, secondary, monthNames, monthNamesShort) {
            var inMinYear, inMaxYear, month, years, thisYear, determineYear, year, endYear, changeMonth = this._get(inst, "changeMonth"), changeYear = this._get(inst, "changeYear"), showMonthAfterYear = this._get(inst, "showMonthAfterYear"), html = "<div class='ui-datepicker-title'>", monthHtml = "";
            if (secondary || !changeMonth)
                monthHtml += "<span class='ui-datepicker-month'>" + monthNames[drawMonth] + "</span>";
            else {
                for (inMinYear = minDate && minDate.getFullYear() === drawYear,
                inMaxYear = maxDate && maxDate.getFullYear() === drawYear,
                monthHtml += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",
                month = 0; 12 > month; month++)
                    (!inMinYear || month >= minDate.getMonth()) && (!inMaxYear || month <= maxDate.getMonth()) && (monthHtml += "<option value='" + month + "'" + (month === drawMonth ? " selected='selected'" : "") + ">" + monthNamesShort[month] + "</option>");
                monthHtml += "</select>"
            }
            if (showMonthAfterYear || (html += monthHtml + (!secondary && changeMonth && changeYear ? "" : "&#xa0;")),
            !inst.yearshtml)
                if (inst.yearshtml = "",
                secondary || !changeYear)
                    html += "<span class='ui-datepicker-year'>" + drawYear + "</span>";
                else {
                    for (years = this._get(inst, "yearRange").split(":"),
                    thisYear = (new Date).getFullYear(),
                    determineYear = function(value) {
                        var year = value.match(/c[+\-].*/) ? drawYear + parseInt(value.substring(1), 10) : value.match(/[+\-].*/) ? thisYear + parseInt(value, 10) : parseInt(value, 10);
                        return isNaN(year) ? thisYear : year
                    }
                    ,
                    year = determineYear(years[0]),
                    endYear = Math.max(year, determineYear(years[1] || "")),
                    year = minDate ? Math.max(year, minDate.getFullYear()) : year,
                    endYear = maxDate ? Math.min(endYear, maxDate.getFullYear()) : endYear,
                    inst.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>"; endYear >= year; year++)
                        inst.yearshtml += "<option value='" + year + "'" + (year === drawYear ? " selected='selected'" : "") + ">" + year + "</option>";
                    inst.yearshtml += "</select>",
                    html += inst.yearshtml,
                    inst.yearshtml = null
                }
            return html += this._get(inst, "yearSuffix"),
            showMonthAfterYear && (html += (!secondary && changeMonth && changeYear ? "" : "&#xa0;") + monthHtml),
            html += "</div>"
        },
        _adjustInstDate: function(inst, offset, period) {
            var year = inst.selectedYear + ("Y" === period ? offset : 0)
              , month = inst.selectedMonth + ("M" === period ? offset : 0)
              , day = Math.min(inst.selectedDay, this._getDaysInMonth(year, month)) + ("D" === period ? offset : 0)
              , date = this._restrictMinMax(inst, this._daylightSavingAdjust(new Date(year,month,day)));
            inst.selectedDay = date.getDate(),
            inst.drawMonth = inst.selectedMonth = date.getMonth(),
            inst.drawYear = inst.selectedYear = date.getFullYear(),
            "M" !== period && "Y" !== period || this._notifyChange(inst)
        },
        _restrictMinMax: function(inst, date) {
            var minDate = this._getMinMaxDate(inst, "min")
              , maxDate = this._getMinMaxDate(inst, "max")
              , newDate = minDate && minDate > date ? minDate : date;
            return maxDate && newDate > maxDate ? maxDate : newDate
        },
        _notifyChange: function(inst) {
            var onChange = this._get(inst, "onChangeMonthYear");
            onChange && onChange.apply(inst.input ? inst.input[0] : null, [inst.selectedYear, inst.selectedMonth + 1, inst])
        },
        _getNumberOfMonths: function(inst) {
            var numMonths = this._get(inst, "numberOfMonths");
            return null == numMonths ? [1, 1] : "number" == typeof numMonths ? [1, numMonths] : numMonths
        },
        _getMinMaxDate: function(inst, minMax) {
            return this._determineDate(inst, this._get(inst, minMax + "Date"), null)
        },
        _getDaysInMonth: function(year, month) {
            return 32 - this._daylightSavingAdjust(new Date(year,month,32)).getDate()
        },
        _getFirstDayOfMonth: function(year, month) {
            return new Date(year,month,1).getDay()
        },
        _canAdjustMonth: function(inst, offset, curYear, curMonth) {
            var numMonths = this._getNumberOfMonths(inst)
              , date = this._daylightSavingAdjust(new Date(curYear,curMonth + (0 > offset ? offset : numMonths[0] * numMonths[1]),1));
            return 0 > offset && date.setDate(this._getDaysInMonth(date.getFullYear(), date.getMonth())),
            this._isInRange(inst, date)
        },
        _isInRange: function(inst, date) {
            var yearSplit, currentYear, minDate = this._getMinMaxDate(inst, "min"), maxDate = this._getMinMaxDate(inst, "max"), minYear = null, maxYear = null, years = this._get(inst, "yearRange");
            return years && (yearSplit = years.split(":"),
            currentYear = (new Date).getFullYear(),
            minYear = parseInt(yearSplit[0], 10),
            maxYear = parseInt(yearSplit[1], 10),
            yearSplit[0].match(/[+\-].*/) && (minYear += currentYear),
            yearSplit[1].match(/[+\-].*/) && (maxYear += currentYear)),
            (!minDate || date.getTime() >= minDate.getTime()) && (!maxDate || date.getTime() <= maxDate.getTime()) && (!minYear || date.getFullYear() >= minYear) && (!maxYear || date.getFullYear() <= maxYear)
        },
        _getFormatConfig: function(inst) {
            var shortYearCutoff = this._get(inst, "shortYearCutoff");
            return shortYearCutoff = "string" != typeof shortYearCutoff ? shortYearCutoff : (new Date).getFullYear() % 100 + parseInt(shortYearCutoff, 10),
            {
                shortYearCutoff: shortYearCutoff,
                dayNamesShort: this._get(inst, "dayNamesShort"),
                dayNames: this._get(inst, "dayNames"),
                monthNamesShort: this._get(inst, "monthNamesShort"),
                monthNames: this._get(inst, "monthNames")
            }
        },
        _formatDate: function(inst, day, month, year) {
            day || (inst.currentDay = inst.selectedDay,
            inst.currentMonth = inst.selectedMonth,
            inst.currentYear = inst.selectedYear);
            var date = day ? "object" == typeof day ? day : this._daylightSavingAdjust(new Date(year,month,day)) : this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));
            return this.formatDate(this._get(inst, "dateFormat"), date, this._getFormatConfig(inst))
        }
    }),
    $.fn.datepicker = function(options) {
        if (!this.length)
            return this;
        $.datepicker.initialized || ($(document).on("mousedown", $.datepicker._checkExternalClick),
        $.datepicker.initialized = !0),
        0 === $("#" + $.datepicker._mainDivId).length && $("body").append($.datepicker.dpDiv);
        var otherArgs = Array.prototype.slice.call(arguments, 1);
        return "string" != typeof options || "isDisabled" !== options && "getDate" !== options && "widget" !== options ? "option" === options && 2 === arguments.length && "string" == typeof arguments[1] ? $.datepicker["_" + options + "Datepicker"].apply($.datepicker, [this[0]].concat(otherArgs)) : this.each(function() {
            "string" == typeof options ? $.datepicker["_" + options + "Datepicker"].apply($.datepicker, [this].concat(otherArgs)) : $.datepicker._attachDatepicker(this, options)
        }) : $.datepicker["_" + options + "Datepicker"].apply($.datepicker, [this[0]].concat(otherArgs))
    }
    ,
    $.datepicker = new Datepicker,
    $.datepicker.initialized = !1,
    $.datepicker.uuid = (new Date).getTime(),
    $.datepicker.version = "1.12.1",
    $.datepicker
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../ie", "../version", "../widget"], factory) : factory(jQuery)
}(function($) {
    var mouseHandled = !1;
    return $(document).on("mouseup", function() {
        mouseHandled = !1
    }),
    $.widget("ui.mouse", {
        version: "1.12.1",
        options: {
            cancel: "input, textarea, button, select, option",
            distance: 1,
            delay: 0
        },
        _mouseInit: function() {
            var that = this;
            this.element.on("mousedown." + this.widgetName, function(event) {
                return that._mouseDown(event)
            }).on("click." + this.widgetName, function(event) {
                return !0 === $.data(event.target, that.widgetName + ".preventClickEvent") ? ($.removeData(event.target, that.widgetName + ".preventClickEvent"),
                event.stopImmediatePropagation(),
                !1) : void 0
            }),
            this.started = !1
        },
        _mouseDestroy: function() {
            this.element.off("." + this.widgetName),
            this._mouseMoveDelegate && this.document.off("mousemove." + this.widgetName, this._mouseMoveDelegate).off("mouseup." + this.widgetName, this._mouseUpDelegate)
        },
        _mouseDown: function(event) {
            if (!mouseHandled) {
                this._mouseMoved = !1,
                this._mouseStarted && this._mouseUp(event),
                this._mouseDownEvent = event;
                var that = this
                  , btnIsLeft = 1 === event.which
                  , elIsCancel = "string" == typeof this.options.cancel && event.target.nodeName ? $(event.target).closest(this.options.cancel).length : !1;
                return btnIsLeft && !elIsCancel && this._mouseCapture(event) ? (this.mouseDelayMet = !this.options.delay,
                this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function() {
                    that.mouseDelayMet = !0
                }, this.options.delay)),
                this._mouseDistanceMet(event) && this._mouseDelayMet(event) && (this._mouseStarted = this._mouseStart(event) !== !1,
                !this._mouseStarted) ? (event.preventDefault(),
                !0) : (!0 === $.data(event.target, this.widgetName + ".preventClickEvent") && $.removeData(event.target, this.widgetName + ".preventClickEvent"),
                this._mouseMoveDelegate = function(event) {
                    return that._mouseMove(event)
                }
                ,
                this._mouseUpDelegate = function(event) {
                    return that._mouseUp(event)
                }
                ,
                this.document.on("mousemove." + this.widgetName, this._mouseMoveDelegate).on("mouseup." + this.widgetName, this._mouseUpDelegate),
                event.preventDefault(),
                mouseHandled = !0,
                !0)) : !0
            }
        },
        _mouseMove: function(event) {
            if (this._mouseMoved) {
                if ($.ui.ie && (!document.documentMode || document.documentMode < 9) && !event.button)
                    return this._mouseUp(event);
                if (!event.which)
                    if (event.originalEvent.altKey || event.originalEvent.ctrlKey || event.originalEvent.metaKey || event.originalEvent.shiftKey)
                        this.ignoreMissingWhich = !0;
                    else if (!this.ignoreMissingWhich)
                        return this._mouseUp(event)
            }
            return (event.which || event.button) && (this._mouseMoved = !0),
            this._mouseStarted ? (this._mouseDrag(event),
            event.preventDefault()) : (this._mouseDistanceMet(event) && this._mouseDelayMet(event) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, event) !== !1,
            this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event)),
            !this._mouseStarted)
        },
        _mouseUp: function(event) {
            this.document.off("mousemove." + this.widgetName, this._mouseMoveDelegate).off("mouseup." + this.widgetName, this._mouseUpDelegate),
            this._mouseStarted && (this._mouseStarted = !1,
            event.target === this._mouseDownEvent.target && $.data(event.target, this.widgetName + ".preventClickEvent", !0),
            this._mouseStop(event)),
            this._mouseDelayTimer && (clearTimeout(this._mouseDelayTimer),
            delete this._mouseDelayTimer),
            this.ignoreMissingWhich = !1,
            mouseHandled = !1,
            event.preventDefault()
        },
        _mouseDistanceMet: function(event) {
            return Math.max(Math.abs(this._mouseDownEvent.pageX - event.pageX), Math.abs(this._mouseDownEvent.pageY - event.pageY)) >= this.options.distance
        },
        _mouseDelayMet: function() {
            return this.mouseDelayMet
        },
        _mouseStart: function() {},
        _mouseDrag: function() {},
        _mouseStop: function() {},
        _mouseCapture: function() {
            return !0
        }
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./mouse", "../data", "../plugin", "../safe-active-element", "../safe-blur", "../scroll-parent", "../version", "../widget"], factory) : factory(jQuery)
}(function($) {
    return $.widget("ui.draggable", $.ui.mouse, {
        version: "1.12.1",
        widgetEventPrefix: "drag",
        options: {
            addClasses: !0,
            appendTo: "parent",
            axis: !1,
            connectToSortable: !1,
            containment: !1,
            cursor: "auto",
            cursorAt: !1,
            grid: !1,
            handle: !1,
            helper: "original",
            iframeFix: !1,
            opacity: !1,
            refreshPositions: !1,
            revert: !1,
            revertDuration: 500,
            scope: "default",
            scroll: !0,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            snap: !1,
            snapMode: "both",
            snapTolerance: 20,
            stack: !1,
            zIndex: !1,
            drag: null,
            start: null,
            stop: null
        },
        _create: function() {
            "original" === this.options.helper && this._setPositionRelative(),
            this.options.addClasses && this._addClass("ui-draggable"),
            this._setHandleClassName(),
            this._mouseInit()
        },
        _setOption: function(key, value) {
            this._super(key, value),
            "handle" === key && (this._removeHandleClassName(),
            this._setHandleClassName())
        },
        _destroy: function() {
            return (this.helper || this.element).is(".ui-draggable-dragging") ? void (this.destroyOnClear = !0) : (this._removeHandleClassName(),
            void this._mouseDestroy())
        },
        _mouseCapture: function(event) {
            var o = this.options;
            return this.helper || o.disabled || $(event.target).closest(".ui-resizable-handle").length > 0 ? !1 : (this.handle = this._getHandle(event),
            this.handle ? (this._blurActiveElement(event),
            this._blockFrames(o.iframeFix === !0 ? "iframe" : o.iframeFix),
            !0) : !1)
        },
        _blockFrames: function(selector) {
            this.iframeBlocks = this.document.find(selector).map(function() {
                var iframe = $(this);
                return $("<div>").css("position", "absolute").appendTo(iframe.parent()).outerWidth(iframe.outerWidth()).outerHeight(iframe.outerHeight()).offset(iframe.offset())[0]
            })
        },
        _unblockFrames: function() {
            this.iframeBlocks && (this.iframeBlocks.remove(),
            delete this.iframeBlocks)
        },
        _blurActiveElement: function(event) {
            var activeElement = $.ui.safeActiveElement(this.document[0])
              , target = $(event.target);
            target.closest(activeElement).length || $.ui.safeBlur(activeElement)
        },
        _mouseStart: function(event) {
            var o = this.options;
            return this.helper = this._createHelper(event),
            this._addClass(this.helper, "ui-draggable-dragging"),
            this._cacheHelperProportions(),
            $.ui.ddmanager && ($.ui.ddmanager.current = this),
            this._cacheMargins(),
            this.cssPosition = this.helper.css("position"),
            this.scrollParent = this.helper.scrollParent(!0),
            this.offsetParent = this.helper.offsetParent(),
            this.hasFixedAncestor = this.helper.parents().filter(function() {
                return "fixed" === $(this).css("position")
            }).length > 0,
            this.positionAbs = this.element.offset(),
            this._refreshOffsets(event),
            this.originalPosition = this.position = this._generatePosition(event, !1),
            this.originalPageX = event.pageX,
            this.originalPageY = event.pageY,
            o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt),
            this._setContainment(),
            this._trigger("start", event) === !1 ? (this._clear(),
            !1) : (this._cacheHelperProportions(),
            $.ui.ddmanager && !o.dropBehaviour && $.ui.ddmanager.prepareOffsets(this, event),
            this._mouseDrag(event, !0),
            $.ui.ddmanager && $.ui.ddmanager.dragStart(this, event),
            !0)
        },
        _refreshOffsets: function(event) {
            this.offset = {
                top: this.positionAbs.top - this.margins.top,
                left: this.positionAbs.left - this.margins.left,
                scroll: !1,
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            },
            this.offset.click = {
                left: event.pageX - this.offset.left,
                top: event.pageY - this.offset.top
            }
        },
        _mouseDrag: function(event, noPropagation) {
            if (this.hasFixedAncestor && (this.offset.parent = this._getParentOffset()),
            this.position = this._generatePosition(event, !0),
            this.positionAbs = this._convertPositionTo("absolute"),
            !noPropagation) {
                var ui = this._uiHash();
                if (this._trigger("drag", event, ui) === !1)
                    return this._mouseUp(new $.Event("mouseup",event)),
                    !1;
                this.position = ui.position
            }
            return this.helper[0].style.left = this.position.left + "px",
            this.helper[0].style.top = this.position.top + "px",
            $.ui.ddmanager && $.ui.ddmanager.drag(this, event),
            !1
        },
        _mouseStop: function(event) {
            var that = this
              , dropped = !1;
            return $.ui.ddmanager && !this.options.dropBehaviour && (dropped = $.ui.ddmanager.drop(this, event)),
            this.dropped && (dropped = this.dropped,
            this.dropped = !1),
            "invalid" === this.options.revert && !dropped || "valid" === this.options.revert && dropped || this.options.revert === !0 || $.isFunction(this.options.revert) && this.options.revert.call(this.element, dropped) ? $(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
                that._trigger("stop", event) !== !1 && that._clear()
            }) : this._trigger("stop", event) !== !1 && this._clear(),
            !1
        },
        _mouseUp: function(event) {
            return this._unblockFrames(),
            $.ui.ddmanager && $.ui.ddmanager.dragStop(this, event),
            this.handleElement.is(event.target) && this.element.trigger("focus"),
            $.ui.mouse.prototype._mouseUp.call(this, event)
        },
        cancel: function() {
            return this.helper.is(".ui-draggable-dragging") ? this._mouseUp(new $.Event("mouseup",{
                target: this.element[0]
            })) : this._clear(),
            this
        },
        _getHandle: function(event) {
            return this.options.handle ? !!$(event.target).closest(this.element.find(this.options.handle)).length : !0
        },
        _setHandleClassName: function() {
            this.handleElement = this.options.handle ? this.element.find(this.options.handle) : this.element,
            this._addClass(this.handleElement, "ui-draggable-handle")
        },
        _removeHandleClassName: function() {
            this._removeClass(this.handleElement, "ui-draggable-handle")
        },
        _createHelper: function(event) {
            var o = this.options
              , helperIsFunction = $.isFunction(o.helper)
              , helper = helperIsFunction ? $(o.helper.apply(this.element[0], [event])) : "clone" === o.helper ? this.element.clone().removeAttr("id") : this.element;
            return helper.parents("body").length || helper.appendTo("parent" === o.appendTo ? this.element[0].parentNode : o.appendTo),
            helperIsFunction && helper[0] === this.element[0] && this._setPositionRelative(),
            helper[0] === this.element[0] || /(fixed|absolute)/.test(helper.css("position")) || helper.css("position", "absolute"),
            helper
        },
        _setPositionRelative: function() {
            /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative")
        },
        _adjustOffsetFromHelper: function(obj) {
            "string" == typeof obj && (obj = obj.split(" ")),
            $.isArray(obj) && (obj = {
                left: +obj[0],
                top: +obj[1] || 0
            }),
            "left"in obj && (this.offset.click.left = obj.left + this.margins.left),
            "right"in obj && (this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left),
            "top"in obj && (this.offset.click.top = obj.top + this.margins.top),
            "bottom"in obj && (this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top)
        },
        _isRootNode: function(element) {
            return /(html|body)/i.test(element.tagName) || element === this.document[0]
        },
        _getParentOffset: function() {
            var po = this.offsetParent.offset()
              , document = this.document[0];
            return "absolute" === this.cssPosition && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0]) && (po.left += this.scrollParent.scrollLeft(),
            po.top += this.scrollParent.scrollTop()),
            this._isRootNode(this.offsetParent[0]) && (po = {
                top: 0,
                left: 0
            }),
            {
                top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            }
        },
        _getRelativeOffset: function() {
            if ("relative" !== this.cssPosition)
                return {
                    top: 0,
                    left: 0
                };
            var p = this.element.position()
              , scrollIsRootNode = this._isRootNode(this.scrollParent[0]);
            return {
                top: p.top - (parseInt(this.helper.css("top"), 10) || 0) + (scrollIsRootNode ? 0 : this.scrollParent.scrollTop()),
                left: p.left - (parseInt(this.helper.css("left"), 10) || 0) + (scrollIsRootNode ? 0 : this.scrollParent.scrollLeft())
            }
        },
        _cacheMargins: function() {
            this.margins = {
                left: parseInt(this.element.css("marginLeft"), 10) || 0,
                top: parseInt(this.element.css("marginTop"), 10) || 0,
                right: parseInt(this.element.css("marginRight"), 10) || 0,
                bottom: parseInt(this.element.css("marginBottom"), 10) || 0
            }
        },
        _cacheHelperProportions: function() {
            this.helperProportions = {
                width: this.helper.outerWidth(),
                height: this.helper.outerHeight()
            }
        },
        _setContainment: function() {
            var isUserScrollable, c, ce, o = this.options, document = this.document[0];
            return this.relativeContainer = null,
            o.containment ? "window" === o.containment ? void (this.containment = [$(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, $(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, $(window).scrollLeft() + $(window).width() - this.helperProportions.width - this.margins.left, $(window).scrollTop() + ($(window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]) : "document" === o.containment ? void (this.containment = [0, 0, $(document).width() - this.helperProportions.width - this.margins.left, ($(document).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]) : o.containment.constructor === Array ? void (this.containment = o.containment) : ("parent" === o.containment && (o.containment = this.helper[0].parentNode),
            c = $(o.containment),
            ce = c[0],
            void (ce && (isUserScrollable = /(scroll|auto)/.test(c.css("overflow")),
            this.containment = [(parseInt(c.css("borderLeftWidth"), 10) || 0) + (parseInt(c.css("paddingLeft"), 10) || 0), (parseInt(c.css("borderTopWidth"), 10) || 0) + (parseInt(c.css("paddingTop"), 10) || 0), (isUserScrollable ? Math.max(ce.scrollWidth, ce.offsetWidth) : ce.offsetWidth) - (parseInt(c.css("borderRightWidth"), 10) || 0) - (parseInt(c.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (isUserScrollable ? Math.max(ce.scrollHeight, ce.offsetHeight) : ce.offsetHeight) - (parseInt(c.css("borderBottomWidth"), 10) || 0) - (parseInt(c.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom],
            this.relativeContainer = c))) : void (this.containment = null)
        },
        _convertPositionTo: function(d, pos) {
            pos || (pos = this.position);
            var mod = "absolute" === d ? 1 : -1
              , scrollIsRootNode = this._isRootNode(this.scrollParent[0]);
            return {
                top: pos.top + this.offset.relative.top * mod + this.offset.parent.top * mod - ("fixed" === this.cssPosition ? -this.offset.scroll.top : scrollIsRootNode ? 0 : this.offset.scroll.top) * mod,
                left: pos.left + this.offset.relative.left * mod + this.offset.parent.left * mod - ("fixed" === this.cssPosition ? -this.offset.scroll.left : scrollIsRootNode ? 0 : this.offset.scroll.left) * mod
            }
        },
        _generatePosition: function(event, constrainPosition) {
            var containment, co, top, left, o = this.options, scrollIsRootNode = this._isRootNode(this.scrollParent[0]), pageX = event.pageX, pageY = event.pageY;
            return scrollIsRootNode && this.offset.scroll || (this.offset.scroll = {
                top: this.scrollParent.scrollTop(),
                left: this.scrollParent.scrollLeft()
            }),
            constrainPosition && (this.containment && (this.relativeContainer ? (co = this.relativeContainer.offset(),
            containment = [this.containment[0] + co.left, this.containment[1] + co.top, this.containment[2] + co.left, this.containment[3] + co.top]) : containment = this.containment,
            event.pageX - this.offset.click.left < containment[0] && (pageX = containment[0] + this.offset.click.left),
            event.pageY - this.offset.click.top < containment[1] && (pageY = containment[1] + this.offset.click.top),
            event.pageX - this.offset.click.left > containment[2] && (pageX = containment[2] + this.offset.click.left),
            event.pageY - this.offset.click.top > containment[3] && (pageY = containment[3] + this.offset.click.top)),
            o.grid && (top = o.grid[1] ? this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY,
            pageY = containment ? top - this.offset.click.top >= containment[1] || top - this.offset.click.top > containment[3] ? top : top - this.offset.click.top >= containment[1] ? top - o.grid[1] : top + o.grid[1] : top,
            left = o.grid[0] ? this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX,
            pageX = containment ? left - this.offset.click.left >= containment[0] || left - this.offset.click.left > containment[2] ? left : left - this.offset.click.left >= containment[0] ? left - o.grid[0] : left + o.grid[0] : left),
            "y" === o.axis && (pageX = this.originalPageX),
            "x" === o.axis && (pageY = this.originalPageY)),
            {
                top: pageY - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.offset.scroll.top : scrollIsRootNode ? 0 : this.offset.scroll.top),
                left: pageX - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.offset.scroll.left : scrollIsRootNode ? 0 : this.offset.scroll.left)
            }
        },
        _clear: function() {
            this._removeClass(this.helper, "ui-draggable-dragging"),
            this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(),
            this.helper = null,
            this.cancelHelperRemoval = !1,
            this.destroyOnClear && this.destroy()
        },
        _trigger: function(type, event, ui) {
            return ui = ui || this._uiHash(),
            $.ui.plugin.call(this, type, [event, ui, this], !0),
            /^(drag|start|stop)/.test(type) && (this.positionAbs = this._convertPositionTo("absolute"),
            ui.offset = this.positionAbs),
            $.Widget.prototype._trigger.call(this, type, event, ui)
        },
        plugins: {},
        _uiHash: function() {
            return {
                helper: this.helper,
                position: this.position,
                originalPosition: this.originalPosition,
                offset: this.positionAbs
            }
        }
    }),
    $.ui.plugin.add("draggable", "connectToSortable", {
        start: function(event, ui, draggable) {
            var uiSortable = $.extend({}, ui, {
                item: draggable.element
            });
            draggable.sortables = [],
            $(draggable.options.connectToSortable).each(function() {
                var sortable = $(this).sortable("instance");
                sortable && !sortable.options.disabled && (draggable.sortables.push(sortable),
                sortable.refreshPositions(),
                sortable._trigger("activate", event, uiSortable))
            })
        },
        stop: function(event, ui, draggable) {
            var uiSortable = $.extend({}, ui, {
                item: draggable.element
            });
            draggable.cancelHelperRemoval = !1,
            $.each(draggable.sortables, function() {
                var sortable = this;
                sortable.isOver ? (sortable.isOver = 0,
                draggable.cancelHelperRemoval = !0,
                sortable.cancelHelperRemoval = !1,
                sortable._storedCSS = {
                    position: sortable.placeholder.css("position"),
                    top: sortable.placeholder.css("top"),
                    left: sortable.placeholder.css("left")
                },
                sortable._mouseStop(event),
                sortable.options.helper = sortable.options._helper) : (sortable.cancelHelperRemoval = !0,
                sortable._trigger("deactivate", event, uiSortable))
            })
        },
        drag: function(event, ui, draggable) {
            $.each(draggable.sortables, function() {
                var innermostIntersecting = !1
                  , sortable = this;
                sortable.positionAbs = draggable.positionAbs,
                sortable.helperProportions = draggable.helperProportions,
                sortable.offset.click = draggable.offset.click,
                sortable._intersectsWith(sortable.containerCache) && (innermostIntersecting = !0,
                $.each(draggable.sortables, function() {
                    return this.positionAbs = draggable.positionAbs,
                    this.helperProportions = draggable.helperProportions,
                    this.offset.click = draggable.offset.click,
                    this !== sortable && this._intersectsWith(this.containerCache) && $.contains(sortable.element[0], this.element[0]) && (innermostIntersecting = !1),
                    innermostIntersecting
                })),
                innermostIntersecting ? (sortable.isOver || (sortable.isOver = 1,
                draggable._parent = ui.helper.parent(),
                sortable.currentItem = ui.helper.appendTo(sortable.element).data("ui-sortable-item", !0),
                sortable.options._helper = sortable.options.helper,
                sortable.options.helper = function() {
                    return ui.helper[0]
                }
                ,
                event.target = sortable.currentItem[0],
                sortable._mouseCapture(event, !0),
                sortable._mouseStart(event, !0, !0),
                sortable.offset.click.top = draggable.offset.click.top,
                sortable.offset.click.left = draggable.offset.click.left,
                sortable.offset.parent.left -= draggable.offset.parent.left - sortable.offset.parent.left,
                sortable.offset.parent.top -= draggable.offset.parent.top - sortable.offset.parent.top,
                draggable._trigger("toSortable", event),
                draggable.dropped = sortable.element,
                $.each(draggable.sortables, function() {
                    this.refreshPositions()
                }),
                draggable.currentItem = draggable.element,
                sortable.fromOutside = draggable),
                sortable.currentItem && (sortable._mouseDrag(event),
                ui.position = sortable.position)) : sortable.isOver && (sortable.isOver = 0,
                sortable.cancelHelperRemoval = !0,
                sortable.options._revert = sortable.options.revert,
                sortable.options.revert = !1,
                sortable._trigger("out", event, sortable._uiHash(sortable)),
                sortable._mouseStop(event, !0),
                sortable.options.revert = sortable.options._revert,
                sortable.options.helper = sortable.options._helper,
                sortable.placeholder && sortable.placeholder.remove(),
                ui.helper.appendTo(draggable._parent),
                draggable._refreshOffsets(event),
                ui.position = draggable._generatePosition(event, !0),
                draggable._trigger("fromSortable", event),
                draggable.dropped = !1,
                $.each(draggable.sortables, function() {
                    this.refreshPositions()
                }))
            })
        }
    }),
    $.ui.plugin.add("draggable", "cursor", {
        start: function(event, ui, instance) {
            var t = $("body")
              , o = instance.options;
            t.css("cursor") && (o._cursor = t.css("cursor")),
            t.css("cursor", o.cursor)
        },
        stop: function(event, ui, instance) {
            var o = instance.options;
            o._cursor && $("body").css("cursor", o._cursor)
        }
    }),
    $.ui.plugin.add("draggable", "opacity", {
        start: function(event, ui, instance) {
            var t = $(ui.helper)
              , o = instance.options;
            t.css("opacity") && (o._opacity = t.css("opacity")),
            t.css("opacity", o.opacity)
        },
        stop: function(event, ui, instance) {
            var o = instance.options;
            o._opacity && $(ui.helper).css("opacity", o._opacity)
        }
    }),
    $.ui.plugin.add("draggable", "scroll", {
        start: function(event, ui, i) {
            i.scrollParentNotHidden || (i.scrollParentNotHidden = i.helper.scrollParent(!1)),
            i.scrollParentNotHidden[0] !== i.document[0] && "HTML" !== i.scrollParentNotHidden[0].tagName && (i.overflowOffset = i.scrollParentNotHidden.offset())
        },
        drag: function(event, ui, i) {
            var o = i.options
              , scrolled = !1
              , scrollParent = i.scrollParentNotHidden[0]
              , document = i.document[0];
            scrollParent !== document && "HTML" !== scrollParent.tagName ? (o.axis && "x" === o.axis || (i.overflowOffset.top + scrollParent.offsetHeight - event.pageY < o.scrollSensitivity ? scrollParent.scrollTop = scrolled = scrollParent.scrollTop + o.scrollSpeed : event.pageY - i.overflowOffset.top < o.scrollSensitivity && (scrollParent.scrollTop = scrolled = scrollParent.scrollTop - o.scrollSpeed)),
            o.axis && "y" === o.axis || (i.overflowOffset.left + scrollParent.offsetWidth - event.pageX < o.scrollSensitivity ? scrollParent.scrollLeft = scrolled = scrollParent.scrollLeft + o.scrollSpeed : event.pageX - i.overflowOffset.left < o.scrollSensitivity && (scrollParent.scrollLeft = scrolled = scrollParent.scrollLeft - o.scrollSpeed))) : (o.axis && "x" === o.axis || (event.pageY - $(document).scrollTop() < o.scrollSensitivity ? scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed) : $(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity && (scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed))),
            o.axis && "y" === o.axis || (event.pageX - $(document).scrollLeft() < o.scrollSensitivity ? scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed) : $(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity && (scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed)))),
            scrolled !== !1 && $.ui.ddmanager && !o.dropBehaviour && $.ui.ddmanager.prepareOffsets(i, event)
        }
    }),
    $.ui.plugin.add("draggable", "snap", {
        start: function(event, ui, i) {
            var o = i.options;
            i.snapElements = [],
            $(o.snap.constructor !== String ? o.snap.items || ":data(ui-draggable)" : o.snap).each(function() {
                var $t = $(this)
                  , $o = $t.offset();
                this !== i.element[0] && i.snapElements.push({
                    item: this,
                    width: $t.outerWidth(),
                    height: $t.outerHeight(),
                    top: $o.top,
                    left: $o.left
                })
            })
        },
        drag: function(event, ui, inst) {
            var ts, bs, ls, rs, l, r, t, b, i, first, o = inst.options, d = o.snapTolerance, x1 = ui.offset.left, x2 = x1 + inst.helperProportions.width, y1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;
            for (i = inst.snapElements.length - 1; i >= 0; i--)
                l = inst.snapElements[i].left - inst.margins.left,
                r = l + inst.snapElements[i].width,
                t = inst.snapElements[i].top - inst.margins.top,
                b = t + inst.snapElements[i].height,
                l - d > x2 || x1 > r + d || t - d > y2 || y1 > b + d || !$.contains(inst.snapElements[i].item.ownerDocument, inst.snapElements[i].item) ? (inst.snapElements[i].snapping && inst.options.snap.release && inst.options.snap.release.call(inst.element, event, $.extend(inst._uiHash(), {
                    snapItem: inst.snapElements[i].item
                })),
                inst.snapElements[i].snapping = !1) : ("inner" !== o.snapMode && (ts = Math.abs(t - y2) <= d,
                bs = Math.abs(b - y1) <= d,
                ls = Math.abs(l - x2) <= d,
                rs = Math.abs(r - x1) <= d,
                ts && (ui.position.top = inst._convertPositionTo("relative", {
                    top: t - inst.helperProportions.height,
                    left: 0
                }).top),
                bs && (ui.position.top = inst._convertPositionTo("relative", {
                    top: b,
                    left: 0
                }).top),
                ls && (ui.position.left = inst._convertPositionTo("relative", {
                    top: 0,
                    left: l - inst.helperProportions.width
                }).left),
                rs && (ui.position.left = inst._convertPositionTo("relative", {
                    top: 0,
                    left: r
                }).left)),
                first = ts || bs || ls || rs,
                "outer" !== o.snapMode && (ts = Math.abs(t - y1) <= d,
                bs = Math.abs(b - y2) <= d,
                ls = Math.abs(l - x1) <= d,
                rs = Math.abs(r - x2) <= d,
                ts && (ui.position.top = inst._convertPositionTo("relative", {
                    top: t,
                    left: 0
                }).top),
                bs && (ui.position.top = inst._convertPositionTo("relative", {
                    top: b - inst.helperProportions.height,
                    left: 0
                }).top),
                ls && (ui.position.left = inst._convertPositionTo("relative", {
                    top: 0,
                    left: l
                }).left),
                rs && (ui.position.left = inst._convertPositionTo("relative", {
                    top: 0,
                    left: r - inst.helperProportions.width
                }).left)),
                !inst.snapElements[i].snapping && (ts || bs || ls || rs || first) && inst.options.snap.snap && inst.options.snap.snap.call(inst.element, event, $.extend(inst._uiHash(), {
                    snapItem: inst.snapElements[i].item
                })),
                inst.snapElements[i].snapping = ts || bs || ls || rs || first)
        }
    }),
    $.ui.plugin.add("draggable", "stack", {
        start: function(event, ui, instance) {
            var min, o = instance.options, group = $.makeArray($(o.stack)).sort(function(a, b) {
                return (parseInt($(a).css("zIndex"), 10) || 0) - (parseInt($(b).css("zIndex"), 10) || 0)
            });
            group.length && (min = parseInt($(group[0]).css("zIndex"), 10) || 0,
            $(group).each(function(i) {
                $(this).css("zIndex", min + i)
            }),
            this.css("zIndex", min + group.length))
        }
    }),
    $.ui.plugin.add("draggable", "zIndex", {
        start: function(event, ui, instance) {
            var t = $(ui.helper)
              , o = instance.options;
            t.css("zIndex") && (o._zIndex = t.css("zIndex")),
            t.css("zIndex", o.zIndex)
        },
        stop: function(event, ui, instance) {
            var o = instance.options;
            o._zIndex && $(ui.helper).css("zIndex", o._zIndex)
        }
    }),
    $.ui.draggable
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./mouse", "../disable-selection", "../plugin", "../version", "../widget"], factory) : factory(jQuery)
}(function($) {
    return $.widget("ui.resizable", $.ui.mouse, {
        version: "1.12.1",
        widgetEventPrefix: "resize",
        options: {
            alsoResize: !1,
            animate: !1,
            animateDuration: "slow",
            animateEasing: "swing",
            aspectRatio: !1,
            autoHide: !1,
            classes: {
                "ui-resizable-se": "ui-icon ui-icon-gripsmall-diagonal-se"
            },
            containment: !1,
            ghost: !1,
            grid: !1,
            handles: "e,s,se",
            helper: !1,
            maxHeight: null,
            maxWidth: null,
            minHeight: 10,
            minWidth: 10,
            zIndex: 90,
            resize: null,
            start: null,
            stop: null
        },
        _num: function(value) {
            return parseFloat(value) || 0
        },
        _isNumber: function(value) {
            return !isNaN(parseFloat(value))
        },
        _hasScroll: function(el, a) {
            if ("hidden" === $(el).css("overflow"))
                return !1;
            var scroll = a && "left" === a ? "scrollLeft" : "scrollTop"
              , has = !1;
            return el[scroll] > 0 ? !0 : (el[scroll] = 1,
            has = el[scroll] > 0,
            el[scroll] = 0,
            has)
        },
        _create: function() {
            var margins, o = this.options, that = this;
            this._addClass("ui-resizable"),
            $.extend(this, {
                _aspectRatio: !!o.aspectRatio,
                aspectRatio: o.aspectRatio,
                originalElement: this.element,
                _proportionallyResizeElements: [],
                _helper: o.helper || o.ghost || o.animate ? o.helper || "ui-resizable-helper" : null
            }),
            this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i) && (this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
                position: this.element.css("position"),
                width: this.element.outerWidth(),
                height: this.element.outerHeight(),
                top: this.element.css("top"),
                left: this.element.css("left")
            })),
            this.element = this.element.parent().data("ui-resizable", this.element.resizable("instance")),
            this.elementIsWrapper = !0,
            margins = {
                marginTop: this.originalElement.css("marginTop"),
                marginRight: this.originalElement.css("marginRight"),
                marginBottom: this.originalElement.css("marginBottom"),
                marginLeft: this.originalElement.css("marginLeft")
            },
            this.element.css(margins),
            this.originalElement.css("margin", 0),
            this.originalResizeStyle = this.originalElement.css("resize"),
            this.originalElement.css("resize", "none"),
            this._proportionallyResizeElements.push(this.originalElement.css({
                position: "static",
                zoom: 1,
                display: "block"
            })),
            this.originalElement.css(margins),
            this._proportionallyResize()),
            this._setupHandles(),
            o.autoHide && $(this.element).on("mouseenter", function() {
                o.disabled || (that._removeClass("ui-resizable-autohide"),
                that._handles.show())
            }).on("mouseleave", function() {
                o.disabled || that.resizing || (that._addClass("ui-resizable-autohide"),
                that._handles.hide())
            }),
            this._mouseInit()
        },
        _destroy: function() {
            this._mouseDestroy();
            var wrapper, _destroy = function(exp) {
                $(exp).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()
            };
            return this.elementIsWrapper && (_destroy(this.element),
            wrapper = this.element,
            this.originalElement.css({
                position: wrapper.css("position"),
                width: wrapper.outerWidth(),
                height: wrapper.outerHeight(),
                top: wrapper.css("top"),
                left: wrapper.css("left")
            }).insertAfter(wrapper),
            wrapper.remove()),
            this.originalElement.css("resize", this.originalResizeStyle),
            _destroy(this.originalElement),
            this
        },
        _setOption: function(key, value) {
            switch (this._super(key, value),
            key) {
            case "handles":
                this._removeHandles(),
                this._setupHandles()
            }
        },
        _setupHandles: function() {
            var handle, i, n, hname, axis, o = this.options, that = this;
            if (this.handles = o.handles || ($(".ui-resizable-handle", this.element).length ? {
                n: ".ui-resizable-n",
                e: ".ui-resizable-e",
                s: ".ui-resizable-s",
                w: ".ui-resizable-w",
                se: ".ui-resizable-se",
                sw: ".ui-resizable-sw",
                ne: ".ui-resizable-ne",
                nw: ".ui-resizable-nw"
            } : "e,s,se"),
            this._handles = $(),
            this.handles.constructor === String)
                for ("all" === this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw"),
                n = this.handles.split(","),
                this.handles = {},
                i = 0; i < n.length; i++)
                    handle = $.trim(n[i]),
                    hname = "ui-resizable-" + handle,
                    axis = $("<div>"),
                    this._addClass(axis, "ui-resizable-handle " + hname),
                    axis.css({
                        zIndex: o.zIndex
                    }),
                    this.handles[handle] = ".ui-resizable-" + handle,
                    this.element.append(axis);
            this._renderAxis = function(target) {
                var i, axis, padPos, padWrapper;
                target = target || this.element;
                for (i in this.handles)
                    this.handles[i].constructor === String ? this.handles[i] = this.element.children(this.handles[i]).first().show() : (this.handles[i].jquery || this.handles[i].nodeType) && (this.handles[i] = $(this.handles[i]),
                    this._on(this.handles[i], {
                        mousedown: that._mouseDown
                    })),
                    this.elementIsWrapper && this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i) && (axis = $(this.handles[i], this.element),
                    padWrapper = /sw|ne|nw|se|n|s/.test(i) ? axis.outerHeight() : axis.outerWidth(),
                    padPos = ["padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left"].join(""),
                    target.css(padPos, padWrapper),
                    this._proportionallyResize()),
                    this._handles = this._handles.add(this.handles[i])
            }
            ,
            this._renderAxis(this.element),
            this._handles = this._handles.add(this.element.find(".ui-resizable-handle")),
            this._handles.disableSelection(),
            this._handles.on("mouseover", function() {
                that.resizing || (this.className && (axis = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),
                that.axis = axis && axis[1] ? axis[1] : "se")
            }),
            o.autoHide && (this._handles.hide(),
            this._addClass("ui-resizable-autohide"))
        },
        _removeHandles: function() {
            this._handles.remove()
        },
        _mouseCapture: function(event) {
            var i, handle, capture = !1;
            for (i in this.handles)
                handle = $(this.handles[i])[0],
                (handle === event.target || $.contains(handle, event.target)) && (capture = !0);
            return !this.options.disabled && capture
        },
        _mouseStart: function(event) {
            var curleft, curtop, cursor, o = this.options, el = this.element;
            return this.resizing = !0,
            this._renderProxy(),
            curleft = this._num(this.helper.css("left")),
            curtop = this._num(this.helper.css("top")),
            o.containment && (curleft += $(o.containment).scrollLeft() || 0,
            curtop += $(o.containment).scrollTop() || 0),
            this.offset = this.helper.offset(),
            this.position = {
                left: curleft,
                top: curtop
            },
            this.size = this._helper ? {
                width: this.helper.width(),
                height: this.helper.height()
            } : {
                width: el.width(),
                height: el.height()
            },
            this.originalSize = this._helper ? {
                width: el.outerWidth(),
                height: el.outerHeight()
            } : {
                width: el.width(),
                height: el.height()
            },
            this.sizeDiff = {
                width: el.outerWidth() - el.width(),
                height: el.outerHeight() - el.height()
            },
            this.originalPosition = {
                left: curleft,
                top: curtop
            },
            this.originalMousePosition = {
                left: event.pageX,
                top: event.pageY
            },
            this.aspectRatio = "number" == typeof o.aspectRatio ? o.aspectRatio : this.originalSize.width / this.originalSize.height || 1,
            cursor = $(".ui-resizable-" + this.axis).css("cursor"),
            $("body").css("cursor", "auto" === cursor ? this.axis + "-resize" : cursor),
            this._addClass("ui-resizable-resizing"),
            this._propagate("start", event),
            !0
        },
        _mouseDrag: function(event) {
            var data, props, smp = this.originalMousePosition, a = this.axis, dx = event.pageX - smp.left || 0, dy = event.pageY - smp.top || 0, trigger = this._change[a];
            return this._updatePrevProperties(),
            trigger ? (data = trigger.apply(this, [event, dx, dy]),
            this._updateVirtualBoundaries(event.shiftKey),
            (this._aspectRatio || event.shiftKey) && (data = this._updateRatio(data, event)),
            data = this._respectSize(data, event),
            this._updateCache(data),
            this._propagate("resize", event),
            props = this._applyChanges(),
            !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(),
            $.isEmptyObject(props) || (this._updatePrevProperties(),
            this._trigger("resize", event, this.ui()),
            this._applyChanges()),
            !1) : !1
        },
        _mouseStop: function(event) {
            this.resizing = !1;
            var pr, ista, soffseth, soffsetw, s, left, top, o = this.options, that = this;
            return this._helper && (pr = this._proportionallyResizeElements,
            ista = pr.length && /textarea/i.test(pr[0].nodeName),
            soffseth = ista && this._hasScroll(pr[0], "left") ? 0 : that.sizeDiff.height,
            soffsetw = ista ? 0 : that.sizeDiff.width,
            s = {
                width: that.helper.width() - soffsetw,
                height: that.helper.height() - soffseth
            },
            left = parseFloat(that.element.css("left")) + (that.position.left - that.originalPosition.left) || null,
            top = parseFloat(that.element.css("top")) + (that.position.top - that.originalPosition.top) || null,
            o.animate || this.element.css($.extend(s, {
                top: top,
                left: left
            })),
            that.helper.height(that.size.height),
            that.helper.width(that.size.width),
            this._helper && !o.animate && this._proportionallyResize()),
            $("body").css("cursor", "auto"),
            this._removeClass("ui-resizable-resizing"),
            this._propagate("stop", event),
            this._helper && this.helper.remove(),
            !1
        },
        _updatePrevProperties: function() {
            this.prevPosition = {
                top: this.position.top,
                left: this.position.left
            },
            this.prevSize = {
                width: this.size.width,
                height: this.size.height
            }
        },
        _applyChanges: function() {
            var props = {};
            return this.position.top !== this.prevPosition.top && (props.top = this.position.top + "px"),
            this.position.left !== this.prevPosition.left && (props.left = this.position.left + "px"),
            this.size.width !== this.prevSize.width && (props.width = this.size.width + "px"),
            this.size.height !== this.prevSize.height && (props.height = this.size.height + "px"),
            this.helper.css(props),
            props
        },
        _updateVirtualBoundaries: function(forceAspectRatio) {
            var pMinWidth, pMaxWidth, pMinHeight, pMaxHeight, b, o = this.options;
            b = {
                minWidth: this._isNumber(o.minWidth) ? o.minWidth : 0,
                maxWidth: this._isNumber(o.maxWidth) ? o.maxWidth : 1 / 0,
                minHeight: this._isNumber(o.minHeight) ? o.minHeight : 0,
                maxHeight: this._isNumber(o.maxHeight) ? o.maxHeight : 1 / 0
            },
            (this._aspectRatio || forceAspectRatio) && (pMinWidth = b.minHeight * this.aspectRatio,
            pMinHeight = b.minWidth / this.aspectRatio,
            pMaxWidth = b.maxHeight * this.aspectRatio,
            pMaxHeight = b.maxWidth / this.aspectRatio,
            pMinWidth > b.minWidth && (b.minWidth = pMinWidth),
            pMinHeight > b.minHeight && (b.minHeight = pMinHeight),
            pMaxWidth < b.maxWidth && (b.maxWidth = pMaxWidth),
            pMaxHeight < b.maxHeight && (b.maxHeight = pMaxHeight)),
            this._vBoundaries = b
        },
        _updateCache: function(data) {
            this.offset = this.helper.offset(),
            this._isNumber(data.left) && (this.position.left = data.left),
            this._isNumber(data.top) && (this.position.top = data.top),
            this._isNumber(data.height) && (this.size.height = data.height),
            this._isNumber(data.width) && (this.size.width = data.width)
        },
        _updateRatio: function(data) {
            var cpos = this.position
              , csize = this.size
              , a = this.axis;
            return this._isNumber(data.height) ? data.width = data.height * this.aspectRatio : this._isNumber(data.width) && (data.height = data.width / this.aspectRatio),
            "sw" === a && (data.left = cpos.left + (csize.width - data.width),
            data.top = null),
            "nw" === a && (data.top = cpos.top + (csize.height - data.height),
            data.left = cpos.left + (csize.width - data.width)),
            data
        },
        _respectSize: function(data) {
            var o = this._vBoundaries
              , a = this.axis
              , ismaxw = this._isNumber(data.width) && o.maxWidth && o.maxWidth < data.width
              , ismaxh = this._isNumber(data.height) && o.maxHeight && o.maxHeight < data.height
              , isminw = this._isNumber(data.width) && o.minWidth && o.minWidth > data.width
              , isminh = this._isNumber(data.height) && o.minHeight && o.minHeight > data.height
              , dw = this.originalPosition.left + this.originalSize.width
              , dh = this.originalPosition.top + this.originalSize.height
              , cw = /sw|nw|w/.test(a)
              , ch = /nw|ne|n/.test(a);
            return isminw && (data.width = o.minWidth),
            isminh && (data.height = o.minHeight),
            ismaxw && (data.width = o.maxWidth),
            ismaxh && (data.height = o.maxHeight),
            isminw && cw && (data.left = dw - o.minWidth),
            ismaxw && cw && (data.left = dw - o.maxWidth),
            isminh && ch && (data.top = dh - o.minHeight),
            ismaxh && ch && (data.top = dh - o.maxHeight),
            data.width || data.height || data.left || !data.top ? data.width || data.height || data.top || !data.left || (data.left = null) : data.top = null,
            data
        },
        _getPaddingPlusBorderDimensions: function(element) {
            for (var i = 0, widths = [], borders = [element.css("borderTopWidth"), element.css("borderRightWidth"), element.css("borderBottomWidth"), element.css("borderLeftWidth")], paddings = [element.css("paddingTop"), element.css("paddingRight"), element.css("paddingBottom"), element.css("paddingLeft")]; 4 > i; i++)
                widths[i] = parseFloat(borders[i]) || 0,
                widths[i] += parseFloat(paddings[i]) || 0;
            return {
                height: widths[0] + widths[2],
                width: widths[1] + widths[3]
            }
        },
        _proportionallyResize: function() {
            if (this._proportionallyResizeElements.length)
                for (var prel, i = 0, element = this.helper || this.element; i < this._proportionallyResizeElements.length; i++)
                    prel = this._proportionallyResizeElements[i],
                    this.outerDimensions || (this.outerDimensions = this._getPaddingPlusBorderDimensions(prel)),
                    prel.css({
                        height: element.height() - this.outerDimensions.height || 0,
                        width: element.width() - this.outerDimensions.width || 0
                    })
        },
        _renderProxy: function() {
            var el = this.element
              , o = this.options;
            this.elementOffset = el.offset(),
            this._helper ? (this.helper = this.helper || $("<div style='overflow:hidden;'></div>"),
            this._addClass(this.helper, this._helper),
            this.helper.css({
                width: this.element.outerWidth(),
                height: this.element.outerHeight(),
                position: "absolute",
                left: this.elementOffset.left + "px",
                top: this.elementOffset.top + "px",
                zIndex: ++o.zIndex
            }),
            this.helper.appendTo("body").disableSelection()) : this.helper = this.element
        },
        _change: {
            e: function(event, dx) {
                return {
                    width: this.originalSize.width + dx
                }
            },
            w: function(event, dx) {
                var cs = this.originalSize
                  , sp = this.originalPosition;
                return {
                    left: sp.left + dx,
                    width: cs.width - dx
                }
            },
            n: function(event, dx, dy) {
                var cs = this.originalSize
                  , sp = this.originalPosition;
                return {
                    top: sp.top + dy,
                    height: cs.height - dy
                }
            },
            s: function(event, dx, dy) {
                return {
                    height: this.originalSize.height + dy
                }
            },
            se: function(event, dx, dy) {
                return $.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]))
            },
            sw: function(event, dx, dy) {
                return $.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]))
            },
            ne: function(event, dx, dy) {
                return $.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]))
            },
            nw: function(event, dx, dy) {
                return $.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]))
            }
        },
        _propagate: function(n, event) {
            $.ui.plugin.call(this, n, [event, this.ui()]),
            "resize" !== n && this._trigger(n, event, this.ui())
        },
        plugins: {},
        ui: function() {
            return {
                originalElement: this.originalElement,
                element: this.element,
                helper: this.helper,
                position: this.position,
                size: this.size,
                originalSize: this.originalSize,
                originalPosition: this.originalPosition
            }
        }
    }),
    $.ui.plugin.add("resizable", "animate", {
        stop: function(event) {
            var that = $(this).resizable("instance")
              , o = that.options
              , pr = that._proportionallyResizeElements
              , ista = pr.length && /textarea/i.test(pr[0].nodeName)
              , soffseth = ista && that._hasScroll(pr[0], "left") ? 0 : that.sizeDiff.height
              , soffsetw = ista ? 0 : that.sizeDiff.width
              , style = {
                width: that.size.width - soffsetw,
                height: that.size.height - soffseth
            }
              , left = parseFloat(that.element.css("left")) + (that.position.left - that.originalPosition.left) || null
              , top = parseFloat(that.element.css("top")) + (that.position.top - that.originalPosition.top) || null;
            that.element.animate($.extend(style, top && left ? {
                top: top,
                left: left
            } : {}), {
                duration: o.animateDuration,
                easing: o.animateEasing,
                step: function() {
                    var data = {
                        width: parseFloat(that.element.css("width")),
                        height: parseFloat(that.element.css("height")),
                        top: parseFloat(that.element.css("top")),
                        left: parseFloat(that.element.css("left"))
                    };
                    pr && pr.length && $(pr[0]).css({
                        width: data.width,
                        height: data.height
                    }),
                    that._updateCache(data),
                    that._propagate("resize", event)
                }
            })
        }
    }),
    $.ui.plugin.add("resizable", "containment", {
        start: function() {
            var element, p, co, ch, cw, width, height, that = $(this).resizable("instance"), o = that.options, el = that.element, oc = o.containment, ce = oc instanceof $ ? oc.get(0) : /parent/.test(oc) ? el.parent().get(0) : oc;
            ce && (that.containerElement = $(ce),
            /document/.test(oc) || oc === document ? (that.containerOffset = {
                left: 0,
                top: 0
            },
            that.containerPosition = {
                left: 0,
                top: 0
            },
            that.parentData = {
                element: $(document),
                left: 0,
                top: 0,
                width: $(document).width(),
                height: $(document).height() || document.body.parentNode.scrollHeight
            }) : (element = $(ce),
            p = [],
            $(["Top", "Right", "Left", "Bottom"]).each(function(i, name) {
                p[i] = that._num(element.css("padding" + name))
            }),
            that.containerOffset = element.offset(),
            that.containerPosition = element.position(),
            that.containerSize = {
                height: element.innerHeight() - p[3],
                width: element.innerWidth() - p[1]
            },
            co = that.containerOffset,
            ch = that.containerSize.height,
            cw = that.containerSize.width,
            width = that._hasScroll(ce, "left") ? ce.scrollWidth : cw,
            height = that._hasScroll(ce) ? ce.scrollHeight : ch,
            that.parentData = {
                element: ce,
                left: co.left,
                top: co.top,
                width: width,
                height: height
            }))
        },
        resize: function(event) {
            var woset, hoset, isParent, isOffsetRelative, that = $(this).resizable("instance"), o = that.options, co = that.containerOffset, cp = that.position, pRatio = that._aspectRatio || event.shiftKey, cop = {
                top: 0,
                left: 0
            }, ce = that.containerElement, continueResize = !0;
            ce[0] !== document && /static/.test(ce.css("position")) && (cop = co),
            cp.left < (that._helper ? co.left : 0) && (that.size.width = that.size.width + (that._helper ? that.position.left - co.left : that.position.left - cop.left),
            pRatio && (that.size.height = that.size.width / that.aspectRatio,
            continueResize = !1),
            that.position.left = o.helper ? co.left : 0),
            cp.top < (that._helper ? co.top : 0) && (that.size.height = that.size.height + (that._helper ? that.position.top - co.top : that.position.top),
            pRatio && (that.size.width = that.size.height * that.aspectRatio,
            continueResize = !1),
            that.position.top = that._helper ? co.top : 0),
            isParent = that.containerElement.get(0) === that.element.parent().get(0),
            isOffsetRelative = /relative|absolute/.test(that.containerElement.css("position")),
            isParent && isOffsetRelative ? (that.offset.left = that.parentData.left + that.position.left,
            that.offset.top = that.parentData.top + that.position.top) : (that.offset.left = that.element.offset().left,
            that.offset.top = that.element.offset().top),
            woset = Math.abs(that.sizeDiff.width + (that._helper ? that.offset.left - cop.left : that.offset.left - co.left)),
            hoset = Math.abs(that.sizeDiff.height + (that._helper ? that.offset.top - cop.top : that.offset.top - co.top)),
            woset + that.size.width >= that.parentData.width && (that.size.width = that.parentData.width - woset,
            pRatio && (that.size.height = that.size.width / that.aspectRatio,
            continueResize = !1)),
            hoset + that.size.height >= that.parentData.height && (that.size.height = that.parentData.height - hoset,
            pRatio && (that.size.width = that.size.height * that.aspectRatio,
            continueResize = !1)),
            continueResize || (that.position.left = that.prevPosition.left,
            that.position.top = that.prevPosition.top,
            that.size.width = that.prevSize.width,
            that.size.height = that.prevSize.height)
        },
        stop: function() {
            var that = $(this).resizable("instance")
              , o = that.options
              , co = that.containerOffset
              , cop = that.containerPosition
              , ce = that.containerElement
              , helper = $(that.helper)
              , ho = helper.offset()
              , w = helper.outerWidth() - that.sizeDiff.width
              , h = helper.outerHeight() - that.sizeDiff.height;
            that._helper && !o.animate && /relative/.test(ce.css("position")) && $(this).css({
                left: ho.left - cop.left - co.left,
                width: w,
                height: h
            }),
            that._helper && !o.animate && /static/.test(ce.css("position")) && $(this).css({
                left: ho.left - cop.left - co.left,
                width: w,
                height: h
            })
        }
    }),
    $.ui.plugin.add("resizable", "alsoResize", {
        start: function() {
            var that = $(this).resizable("instance")
              , o = that.options;
            $(o.alsoResize).each(function() {
                var el = $(this);
                el.data("ui-resizable-alsoresize", {
                    width: parseFloat(el.width()),
                    height: parseFloat(el.height()),
                    left: parseFloat(el.css("left")),
                    top: parseFloat(el.css("top"))
                })
            })
        },
        resize: function(event, ui) {
            var that = $(this).resizable("instance")
              , o = that.options
              , os = that.originalSize
              , op = that.originalPosition
              , delta = {
                height: that.size.height - os.height || 0,
                width: that.size.width - os.width || 0,
                top: that.position.top - op.top || 0,
                left: that.position.left - op.left || 0
            };
            $(o.alsoResize).each(function() {
                var el = $(this)
                  , start = $(this).data("ui-resizable-alsoresize")
                  , style = {}
                  , css = el.parents(ui.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];
                $.each(css, function(i, prop) {
                    var sum = (start[prop] || 0) + (delta[prop] || 0);
                    sum && sum >= 0 && (style[prop] = sum || null)
                }),
                el.css(style)
            })
        },
        stop: function() {
            $(this).removeData("ui-resizable-alsoresize")
        }
    }),
    $.ui.plugin.add("resizable", "ghost", {
        start: function() {
            var that = $(this).resizable("instance")
              , cs = that.size;
            that.ghost = that.originalElement.clone(),
            that.ghost.css({
                opacity: .25,
                display: "block",
                position: "relative",
                height: cs.height,
                width: cs.width,
                margin: 0,
                left: 0,
                top: 0
            }),
            that._addClass(that.ghost, "ui-resizable-ghost"),
            $.uiBackCompat !== !1 && "string" == typeof that.options.ghost && that.ghost.addClass(this.options.ghost),
            that.ghost.appendTo(that.helper)
        },
        resize: function() {
            var that = $(this).resizable("instance");
            that.ghost && that.ghost.css({
                position: "relative",
                height: that.size.height,
                width: that.size.width
            })
        },
        stop: function() {
            var that = $(this).resizable("instance");
            that.ghost && that.helper && that.helper.get(0).removeChild(that.ghost.get(0))
        }
    }),
    $.ui.plugin.add("resizable", "grid", {
        resize: function() {
            var outerDimensions, that = $(this).resizable("instance"), o = that.options, cs = that.size, os = that.originalSize, op = that.originalPosition, a = that.axis, grid = "number" == typeof o.grid ? [o.grid, o.grid] : o.grid, gridX = grid[0] || 1, gridY = grid[1] || 1, ox = Math.round((cs.width - os.width) / gridX) * gridX, oy = Math.round((cs.height - os.height) / gridY) * gridY, newWidth = os.width + ox, newHeight = os.height + oy, isMaxWidth = o.maxWidth && o.maxWidth < newWidth, isMaxHeight = o.maxHeight && o.maxHeight < newHeight, isMinWidth = o.minWidth && o.minWidth > newWidth, isMinHeight = o.minHeight && o.minHeight > newHeight;
            o.grid = grid,
            isMinWidth && (newWidth += gridX),
            isMinHeight && (newHeight += gridY),
            isMaxWidth && (newWidth -= gridX),
            isMaxHeight && (newHeight -= gridY),
            /^(se|s|e)$/.test(a) ? (that.size.width = newWidth,
            that.size.height = newHeight) : /^(ne)$/.test(a) ? (that.size.width = newWidth,
            that.size.height = newHeight,
            that.position.top = op.top - oy) : /^(sw)$/.test(a) ? (that.size.width = newWidth,
            that.size.height = newHeight,
            that.position.left = op.left - ox) : ((0 >= newHeight - gridY || 0 >= newWidth - gridX) && (outerDimensions = that._getPaddingPlusBorderDimensions(this)),
            newHeight - gridY > 0 ? (that.size.height = newHeight,
            that.position.top = op.top - oy) : (newHeight = gridY - outerDimensions.height,
            that.size.height = newHeight,
            that.position.top = op.top + os.height - newHeight),
            newWidth - gridX > 0 ? (that.size.width = newWidth,
            that.position.left = op.left - ox) : (newWidth = gridX - outerDimensions.width,
            that.size.width = newWidth,
            that.position.left = op.left + os.width - newWidth))
        }
    }),
    $.ui.resizable
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./button", "./draggable", "./mouse", "./resizable", "../focusable", "../keycode", "../position", "../safe-active-element", "../safe-blur", "../tabbable", "../unique-id", "../version", "../widget"], factory) : factory(jQuery)
}(function($) {
    return $.widget("ui.dialog", {
        version: "1.12.1",
        options: {
            appendTo: "body",
            autoOpen: !0,
            buttons: [],
            classes: {
                "ui-dialog": "ui-corner-all",
                "ui-dialog-titlebar": "ui-corner-all"
            },
            closeOnEscape: !0,
            closeText: "Close",
            draggable: !0,
            hide: null,
            height: "auto",
            maxHeight: null,
            maxWidth: null,
            minHeight: 150,
            minWidth: 150,
            modal: !1,
            position: {
                my: "center",
                at: "center",
                of: window,
                collision: "fit",
                using: function(pos) {
                    var topOffset = $(this).css(pos).offset().top;
                    0 > topOffset && $(this).css("top", pos.top - topOffset)
                }
            },
            resizable: !0,
            show: null,
            title: null,
            width: 300,
            beforeClose: null,
            close: null,
            drag: null,
            dragStart: null,
            dragStop: null,
            focus: null,
            open: null,
            resize: null,
            resizeStart: null,
            resizeStop: null
        },
        sizeRelatedOptions: {
            buttons: !0,
            height: !0,
            maxHeight: !0,
            maxWidth: !0,
            minHeight: !0,
            minWidth: !0,
            width: !0
        },
        resizableRelatedOptions: {
            maxHeight: !0,
            maxWidth: !0,
            minHeight: !0,
            minWidth: !0
        },
        _create: function() {
            this.originalCss = {
                display: this.element[0].style.display,
                width: this.element[0].style.width,
                minHeight: this.element[0].style.minHeight,
                maxHeight: this.element[0].style.maxHeight,
                height: this.element[0].style.height
            },
            this.originalPosition = {
                parent: this.element.parent(),
                index: this.element.parent().children().index(this.element)
            },
            this.originalTitle = this.element.attr("title"),
            null == this.options.title && null != this.originalTitle && (this.options.title = this.originalTitle),
            this.options.disabled && (this.options.disabled = !1),
            this._createWrapper(),
            this.element.show().removeAttr("title").appendTo(this.uiDialog),
            this._addClass("ui-dialog-content", "ui-widget-content"),
            this._createTitlebar(),
            this._createButtonPane(),
            this.options.draggable && $.fn.draggable && this._makeDraggable(),
            this.options.resizable && $.fn.resizable && this._makeResizable(),
            this._isOpen = !1,
            this._trackFocus()
        },
        _init: function() {
            this.options.autoOpen && this.open()
        },
        _appendTo: function() {
            var element = this.options.appendTo;
            return element && (element.jquery || element.nodeType) ? $(element) : this.document.find(element || "body").eq(0)
        },
        _destroy: function() {
            var next, originalPosition = this.originalPosition;
            this._untrackInstance(),
            this._destroyOverlay(),
            this.element.removeUniqueId().css(this.originalCss).detach(),
            this.uiDialog.remove(),
            this.originalTitle && this.element.attr("title", this.originalTitle),
            next = originalPosition.parent.children().eq(originalPosition.index),
            next.length && next[0] !== this.element[0] ? next.before(this.element) : originalPosition.parent.append(this.element)
        },
        widget: function() {
            return this.uiDialog
        },
        disable: $.noop,
        enable: $.noop,
        close: function(event) {
            var that = this;
            this._isOpen && this._trigger("beforeClose", event) !== !1 && (this._isOpen = !1,
            this._focusedElement = null,
            this._destroyOverlay(),
            this._untrackInstance(),
            this.opener.filter(":focusable").trigger("focus").length || $.ui.safeBlur($.ui.safeActiveElement(this.document[0])),
            this._hide(this.uiDialog, this.options.hide, function() {
                that._trigger("close", event)
            }))
        },
        isOpen: function() {
            return this._isOpen
        },
        moveToTop: function() {
            this._moveToTop()
        },
        _moveToTop: function(event, silent) {
            var moved = !1
              , zIndices = this.uiDialog.siblings(".ui-front:visible").map(function() {
                return +$(this).css("z-index")
            }).get()
              , zIndexMax = Math.max.apply(null, zIndices);
            return zIndexMax >= +this.uiDialog.css("z-index") && (this.uiDialog.css("z-index", zIndexMax + 1),
            moved = !0),
            moved && !silent && this._trigger("focus", event),
            moved
        },
        open: function() {
            var that = this;
            return this._isOpen ? void (this._moveToTop() && this._focusTabbable()) : (this._isOpen = !0,
            this.opener = $($.ui.safeActiveElement(this.document[0])),
            this._size(),
            this._position(),
            this._createOverlay(),
            this._moveToTop(null, !0),
            this.overlay && this.overlay.css("z-index", this.uiDialog.css("z-index") - 1),
            this._show(this.uiDialog, this.options.show, function() {
                that._focusTabbable(),
                that._trigger("focus")
            }),
            this._makeFocusTarget(),
            void this._trigger("open"))
        },
        _focusTabbable: function() {
            var hasFocus = this._focusedElement;
            hasFocus || (hasFocus = this.element.find("[autofocus]")),
            hasFocus.length || (hasFocus = this.element.find(":tabbable")),
            hasFocus.length || (hasFocus = this.uiDialogButtonPane.find(":tabbable")),
            hasFocus.length || (hasFocus = this.uiDialogTitlebarClose.filter(":tabbable")),
            hasFocus.length || (hasFocus = this.uiDialog),
            hasFocus.eq(0).trigger("focus")
        },
        _keepFocus: function(event) {
            function checkFocus() {
                var activeElement = $.ui.safeActiveElement(this.document[0])
                  , isActive = this.uiDialog[0] === activeElement || $.contains(this.uiDialog[0], activeElement);
                isActive || this._focusTabbable()
            }
            event.preventDefault(),
            checkFocus.call(this),
            this._delay(checkFocus)
        },
        _createWrapper: function() {
            this.uiDialog = $("<div>").hide().attr({
                tabIndex: -1,
                role: "dialog"
            }).appendTo(this._appendTo()),
            this._addClass(this.uiDialog, "ui-dialog", "ui-widget ui-widget-content ui-front"),
            this._on(this.uiDialog, {
                keydown: function(event) {
                    if (this.options.closeOnEscape && !event.isDefaultPrevented() && event.keyCode && event.keyCode === $.ui.keyCode.ESCAPE)
                        return event.preventDefault(),
                        void this.close(event);
                    if (event.keyCode === $.ui.keyCode.TAB && !event.isDefaultPrevented()) {
                        var tabbables = this.uiDialog.find(":tabbable")
                          , first = tabbables.filter(":first")
                          , last = tabbables.filter(":last");
                        event.target !== last[0] && event.target !== this.uiDialog[0] || event.shiftKey ? event.target !== first[0] && event.target !== this.uiDialog[0] || !event.shiftKey || (this._delay(function() {
                            last.trigger("focus")
                        }),
                        event.preventDefault()) : (this._delay(function() {
                            first.trigger("focus")
                        }),
                        event.preventDefault())
                    }
                },
                mousedown: function(event) {
                    this._moveToTop(event) && this._focusTabbable()
                }
            }),
            this.element.find("[aria-describedby]").length || this.uiDialog.attr({
                "aria-describedby": this.element.uniqueId().attr("id")
            })
        },
        _createTitlebar: function() {
            var uiDialogTitle;
            this.uiDialogTitlebar = $("<div>"),
            this._addClass(this.uiDialogTitlebar, "ui-dialog-titlebar", "ui-widget-header ui-helper-clearfix"),
            this._on(this.uiDialogTitlebar, {
                mousedown: function(event) {
                    $(event.target).closest(".ui-dialog-titlebar-close") || this.uiDialog.trigger("focus")
                }
            }),
            this.uiDialogTitlebarClose = $("<button type='button'></button>").button({
                label: $("<a>").text(this.options.closeText).html(),
                icon: "ui-icon-closethick",
                showLabel: !1
            }).appendTo(this.uiDialogTitlebar),
            this._addClass(this.uiDialogTitlebarClose, "ui-dialog-titlebar-close"),
            this._on(this.uiDialogTitlebarClose, {
                click: function(event) {
                    event.preventDefault(),
                    this.close(event)
                }
            }),
            uiDialogTitle = $("<span>").uniqueId().prependTo(this.uiDialogTitlebar),
            this._addClass(uiDialogTitle, "ui-dialog-title"),
            this._title(uiDialogTitle),
            this.uiDialogTitlebar.prependTo(this.uiDialog),
            this.uiDialog.attr({
                "aria-labelledby": uiDialogTitle.attr("id")
            })
        },
        _title: function(title) {
            this.options.title ? title.text(this.options.title) : title.html("&#160;")
        },
        _createButtonPane: function() {
            this.uiDialogButtonPane = $("<div>"),
            this._addClass(this.uiDialogButtonPane, "ui-dialog-buttonpane", "ui-widget-content ui-helper-clearfix"),
            this.uiButtonSet = $("<div>").appendTo(this.uiDialogButtonPane),
            this._addClass(this.uiButtonSet, "ui-dialog-buttonset"),
            this._createButtons()
        },
        _createButtons: function() {
            var that = this
              , buttons = this.options.buttons;
            return this.uiDialogButtonPane.remove(),
            this.uiButtonSet.empty(),
            $.isEmptyObject(buttons) || $.isArray(buttons) && !buttons.length ? void this._removeClass(this.uiDialog, "ui-dialog-buttons") : ($.each(buttons, function(name, props) {
                var click, buttonOptions;
                props = $.isFunction(props) ? {
                    click: props,
                    text: name
                } : props,
                props = $.extend({
                    type: "button"
                }, props),
                click = props.click,
                buttonOptions = {
                    icon: props.icon,
                    iconPosition: props.iconPosition,
                    showLabel: props.showLabel,
                    icons: props.icons,
                    text: props.text
                },
                delete props.click,
                delete props.icon,
                delete props.iconPosition,
                delete props.showLabel,
                delete props.icons,
                "boolean" == typeof props.text && delete props.text,
                $("<button></button>", props).button(buttonOptions).appendTo(that.uiButtonSet).on("click", function() {
                    click.apply(that.element[0], arguments)
                })
            }),
            this._addClass(this.uiDialog, "ui-dialog-buttons"),
            void this.uiDialogButtonPane.appendTo(this.uiDialog))
        },
        _makeDraggable: function() {
            function filteredUi(ui) {
                return {
                    position: ui.position,
                    offset: ui.offset
                }
            }
            var that = this
              , options = this.options;
            this.uiDialog.draggable({
                cancel: ".ui-dialog-content, .ui-dialog-titlebar-close",
                handle: ".ui-dialog-titlebar",
                containment: "document",
                start: function(event, ui) {
                    that._addClass($(this), "ui-dialog-dragging"),
                    that._blockFrames(),
                    that._trigger("dragStart", event, filteredUi(ui))
                },
                drag: function(event, ui) {
                    that._trigger("drag", event, filteredUi(ui))
                },
                stop: function(event, ui) {
                    var left = ui.offset.left - that.document.scrollLeft()
                      , top = ui.offset.top - that.document.scrollTop();
                    options.position = {
                        my: "left top",
                        at: "left" + (left >= 0 ? "+" : "") + left + " top" + (top >= 0 ? "+" : "") + top,
                        of: that.window
                    },
                    that._removeClass($(this), "ui-dialog-dragging"),
                    that._unblockFrames(),
                    that._trigger("dragStop", event, filteredUi(ui))
                }
            })
        },
        _makeResizable: function() {
            function filteredUi(ui) {
                return {
                    originalPosition: ui.originalPosition,
                    originalSize: ui.originalSize,
                    position: ui.position,
                    size: ui.size
                }
            }
            var that = this
              , options = this.options
              , handles = options.resizable
              , position = this.uiDialog.css("position")
              , resizeHandles = "string" == typeof handles ? handles : "n,e,s,w,se,sw,ne,nw";
            this.uiDialog.resizable({
                cancel: ".ui-dialog-content",
                containment: "document",
                alsoResize: this.element,
                maxWidth: options.maxWidth,
                maxHeight: options.maxHeight,
                minWidth: options.minWidth,
                minHeight: this._minHeight(),
                handles: resizeHandles,
                start: function(event, ui) {
                    that._addClass($(this), "ui-dialog-resizing"),
                    that._blockFrames(),
                    that._trigger("resizeStart", event, filteredUi(ui))
                },
                resize: function(event, ui) {
                    that._trigger("resize", event, filteredUi(ui))
                },
                stop: function(event, ui) {
                    var offset = that.uiDialog.offset()
                      , left = offset.left - that.document.scrollLeft()
                      , top = offset.top - that.document.scrollTop();
                    options.height = that.uiDialog.height(),
                    options.width = that.uiDialog.width(),
                    options.position = {
                        my: "left top",
                        at: "left" + (left >= 0 ? "+" : "") + left + " top" + (top >= 0 ? "+" : "") + top,
                        of: that.window
                    },
                    that._removeClass($(this), "ui-dialog-resizing"),
                    that._unblockFrames(),
                    that._trigger("resizeStop", event, filteredUi(ui))
                }
            }).css("position", position)
        },
        _trackFocus: function() {
            this._on(this.widget(), {
                focusin: function(event) {
                    this._makeFocusTarget(),
                    this._focusedElement = $(event.target)
                }
            })
        },
        _makeFocusTarget: function() {
            this._untrackInstance(),
            this._trackingInstances().unshift(this)
        },
        _untrackInstance: function() {
            var instances = this._trackingInstances()
              , exists = $.inArray(this, instances);
            -1 !== exists && instances.splice(exists, 1)
        },
        _trackingInstances: function() {
            var instances = this.document.data("ui-dialog-instances");
            return instances || (instances = [],
            this.document.data("ui-dialog-instances", instances)),
            instances
        },
        _minHeight: function() {
            var options = this.options;
            return "auto" === options.height ? options.minHeight : Math.min(options.minHeight, options.height)
        },
        _position: function() {
            var isVisible = this.uiDialog.is(":visible");
            isVisible || this.uiDialog.show(),
            this.uiDialog.position(this.options.position),
            isVisible || this.uiDialog.hide()
        },
        _setOptions: function(options) {
            var that = this
              , resize = !1
              , resizableOptions = {};
            $.each(options, function(key, value) {
                that._setOption(key, value),
                key in that.sizeRelatedOptions && (resize = !0),
                key in that.resizableRelatedOptions && (resizableOptions[key] = value)
            }),
            resize && (this._size(),
            this._position()),
            this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", resizableOptions)
        },
        _setOption: function(key, value) {
            var isDraggable, isResizable, uiDialog = this.uiDialog;
            "disabled" !== key && (this._super(key, value),
            "appendTo" === key && this.uiDialog.appendTo(this._appendTo()),
            "buttons" === key && this._createButtons(),
            "closeText" === key && this.uiDialogTitlebarClose.button({
                label: $("<a>").text("" + this.options.closeText).html()
            }),
            "draggable" === key && (isDraggable = uiDialog.is(":data(ui-draggable)"),
            isDraggable && !value && uiDialog.draggable("destroy"),
            !isDraggable && value && this._makeDraggable()),
            "position" === key && this._position(),
            "resizable" === key && (isResizable = uiDialog.is(":data(ui-resizable)"),
            isResizable && !value && uiDialog.resizable("destroy"),
            isResizable && "string" == typeof value && uiDialog.resizable("option", "handles", value),
            isResizable || value === !1 || this._makeResizable()),
            "title" === key && this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))
        },
        _size: function() {
            var nonContentHeight, minContentHeight, maxContentHeight, options = this.options;
            this.element.show().css({
                width: "auto",
                minHeight: 0,
                maxHeight: "none",
                height: 0
            }),
            options.minWidth > options.width && (options.width = options.minWidth),
            nonContentHeight = this.uiDialog.css({
                height: "auto",
                width: options.width
            }).outerHeight(),
            minContentHeight = Math.max(0, options.minHeight - nonContentHeight),
            maxContentHeight = "number" == typeof options.maxHeight ? Math.max(0, options.maxHeight - nonContentHeight) : "none",
            "auto" === options.height ? this.element.css({
                minHeight: minContentHeight,
                maxHeight: maxContentHeight,
                height: "auto"
            }) : this.element.height(Math.max(0, options.height - nonContentHeight)),
            this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight())
        },
        _blockFrames: function() {
            this.iframeBlocks = this.document.find("iframe").map(function() {
                var iframe = $(this);
                return $("<div>").css({
                    position: "absolute",
                    width: iframe.outerWidth(),
                    height: iframe.outerHeight()
                }).appendTo(iframe.parent()).offset(iframe.offset())[0]
            })
        },
        _unblockFrames: function() {
            this.iframeBlocks && (this.iframeBlocks.remove(),
            delete this.iframeBlocks)
        },
        _allowInteraction: function(event) {
            return $(event.target).closest(".ui-dialog").length ? !0 : !!$(event.target).closest(".ui-datepicker").length
        },
        _createOverlay: function() {
            if (this.options.modal) {
                var isOpening = !0;
                this._delay(function() {
                    isOpening = !1
                }),
                this.document.data("ui-dialog-overlays") || this._on(this.document, {
                    focusin: function(event) {
                        isOpening || this._allowInteraction(event) || (event.preventDefault(),
                        this._trackingInstances()[0]._focusTabbable())
                    }
                }),
                this.overlay = $("<div>").appendTo(this._appendTo()),
                this._addClass(this.overlay, null, "ui-widget-overlay ui-front"),
                this._on(this.overlay, {
                    mousedown: "_keepFocus"
                }),
                this.document.data("ui-dialog-overlays", (this.document.data("ui-dialog-overlays") || 0) + 1)
            }
        },
        _destroyOverlay: function() {
            if (this.options.modal && this.overlay) {
                var overlays = this.document.data("ui-dialog-overlays") - 1;
                overlays ? this.document.data("ui-dialog-overlays", overlays) : (this._off(this.document, "focusin"),
                this.document.removeData("ui-dialog-overlays")),
                this.overlay.remove(),
                this.overlay = null
            }
        }
    }),
    $.uiBackCompat !== !1 && $.widget("ui.dialog", $.ui.dialog, {
        options: {
            dialogClass: ""
        },
        _createWrapper: function() {
            this._super(),
            this.uiDialog.addClass(this.options.dialogClass)
        },
        _setOption: function(key, value) {
            "dialogClass" === key && this.uiDialog.removeClass(this.options.dialogClass).addClass(value),
            this._superApply(arguments)
        }
    }),
    $.ui.dialog
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./draggable", "./mouse", "../version", "../widget"], factory) : factory(jQuery)
}(function($) {
    $.widget("ui.droppable", {
        version: "1.12.1",
        widgetEventPrefix: "drop",
        options: {
            accept: "*",
            addClasses: !0,
            greedy: !1,
            scope: "default",
            tolerance: "intersect",
            activate: null,
            deactivate: null,
            drop: null,
            out: null,
            over: null
        },
        _create: function() {
            var proportions, o = this.options, accept = o.accept;
            this.isover = !1,
            this.isout = !0,
            this.accept = $.isFunction(accept) ? accept : function(d) {
                return d.is(accept)
            }
            ,
            this.proportions = function() {
                return arguments.length ? void (proportions = arguments[0]) : proportions ? proportions : proportions = {
                    width: this.element[0].offsetWidth,
                    height: this.element[0].offsetHeight
                }
            }
            ,
            this._addToManager(o.scope),
            o.addClasses && this._addClass("ui-droppable")
        },
        _addToManager: function(scope) {
            $.ui.ddmanager.droppables[scope] = $.ui.ddmanager.droppables[scope] || [],
            $.ui.ddmanager.droppables[scope].push(this)
        },
        _splice: function(drop) {
            for (var i = 0; i < drop.length; i++)
                drop[i] === this && drop.splice(i, 1)
        },
        _destroy: function() {
            var drop = $.ui.ddmanager.droppables[this.options.scope];
            this._splice(drop)
        },
        _setOption: function(key, value) {
            if ("accept" === key)
                this.accept = $.isFunction(value) ? value : function(d) {
                    return d.is(value)
                }
                ;
            else if ("scope" === key) {
                var drop = $.ui.ddmanager.droppables[this.options.scope];
                this._splice(drop),
                this._addToManager(value)
            }
            this._super(key, value)
        },
        _activate: function(event) {
            var draggable = $.ui.ddmanager.current;
            this._addActiveClass(),
            draggable && this._trigger("activate", event, this.ui(draggable))
        },
        _deactivate: function(event) {
            var draggable = $.ui.ddmanager.current;
            this._removeActiveClass(),
            draggable && this._trigger("deactivate", event, this.ui(draggable))
        },
        _over: function(event) {
            var draggable = $.ui.ddmanager.current;
            draggable && (draggable.currentItem || draggable.element)[0] !== this.element[0] && this.accept.call(this.element[0], draggable.currentItem || draggable.element) && (this._addHoverClass(),
            this._trigger("over", event, this.ui(draggable)))
        },
        _out: function(event) {
            var draggable = $.ui.ddmanager.current;
            draggable && (draggable.currentItem || draggable.element)[0] !== this.element[0] && this.accept.call(this.element[0], draggable.currentItem || draggable.element) && (this._removeHoverClass(),
            this._trigger("out", event, this.ui(draggable)))
        },
        _drop: function(event, custom) {
            var draggable = custom || $.ui.ddmanager.current
              , childrenIntersection = !1;
            return draggable && (draggable.currentItem || draggable.element)[0] !== this.element[0] ? (this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function() {
                var inst = $(this).droppable("instance");
                return inst.options.greedy && !inst.options.disabled && inst.options.scope === draggable.options.scope && inst.accept.call(inst.element[0], draggable.currentItem || draggable.element) && intersect(draggable, $.extend(inst, {
                    offset: inst.element.offset()
                }), inst.options.tolerance, event) ? (childrenIntersection = !0,
                !1) : void 0
            }),
            childrenIntersection ? !1 : this.accept.call(this.element[0], draggable.currentItem || draggable.element) ? (this._removeActiveClass(),
            this._removeHoverClass(),
            this._trigger("drop", event, this.ui(draggable)),
            this.element) : !1) : !1
        },
        ui: function(c) {
            return {
                draggable: c.currentItem || c.element,
                helper: c.helper,
                position: c.position,
                offset: c.positionAbs
            }
        },
        _addHoverClass: function() {
            this._addClass("ui-droppable-hover")
        },
        _removeHoverClass: function() {
            this._removeClass("ui-droppable-hover")
        },
        _addActiveClass: function() {
            this._addClass("ui-droppable-active")
        },
        _removeActiveClass: function() {
            this._removeClass("ui-droppable-active")
        }
    });
    var intersect = $.ui.intersect = function() {
        function isOverAxis(x, reference, size) {
            return x >= reference && reference + size > x
        }
        return function(draggable, droppable, toleranceMode, event) {
            if (!droppable.offset)
                return !1;
            var x1 = (draggable.positionAbs || draggable.position.absolute).left + draggable.margins.left
              , y1 = (draggable.positionAbs || draggable.position.absolute).top + draggable.margins.top
              , x2 = x1 + draggable.helperProportions.width
              , y2 = y1 + draggable.helperProportions.height
              , l = droppable.offset.left
              , t = droppable.offset.top
              , r = l + droppable.proportions().width
              , b = t + droppable.proportions().height;
            switch (toleranceMode) {
            case "fit":
                return x1 >= l && r >= x2 && y1 >= t && b >= y2;
            case "intersect":
                return l < x1 + draggable.helperProportions.width / 2 && x2 - draggable.helperProportions.width / 2 < r && t < y1 + draggable.helperProportions.height / 2 && y2 - draggable.helperProportions.height / 2 < b;
            case "pointer":
                return isOverAxis(event.pageY, t, droppable.proportions().height) && isOverAxis(event.pageX, l, droppable.proportions().width);
            case "touch":
                return (y1 >= t && b >= y1 || y2 >= t && b >= y2 || t > y1 && y2 > b) && (x1 >= l && r >= x1 || x2 >= l && r >= x2 || l > x1 && x2 > r);
            default:
                return !1
            }
        }
    }();
    return $.ui.ddmanager = {
        current: null,
        droppables: {
            "default": []
        },
        prepareOffsets: function(t, event) {
            var i, j, m = $.ui.ddmanager.droppables[t.options.scope] || [], type = event ? event.type : null, list = (t.currentItem || t.element).find(":data(ui-droppable)").addBack();
            droppablesLoop: for (i = 0; i < m.length; i++)
                if (!(m[i].options.disabled || t && !m[i].accept.call(m[i].element[0], t.currentItem || t.element))) {
                    for (j = 0; j < list.length; j++)
                        if (list[j] === m[i].element[0]) {
                            m[i].proportions().height = 0;
                            continue droppablesLoop
                        }
                    m[i].visible = "none" !== m[i].element.css("display"),
                    m[i].visible && ("mousedown" === type && m[i]._activate.call(m[i], event),
                    m[i].offset = m[i].element.offset(),
                    m[i].proportions({
                        width: m[i].element[0].offsetWidth,
                        height: m[i].element[0].offsetHeight
                    }))
                }
        },
        drop: function(draggable, event) {
            var dropped = !1;
            return $.each(($.ui.ddmanager.droppables[draggable.options.scope] || []).slice(), function() {
                this.options && (!this.options.disabled && this.visible && intersect(draggable, this, this.options.tolerance, event) && (dropped = this._drop.call(this, event) || dropped),
                !this.options.disabled && this.visible && this.accept.call(this.element[0], draggable.currentItem || draggable.element) && (this.isout = !0,
                this.isover = !1,
                this._deactivate.call(this, event)))
            }),
            dropped
        },
        dragStart: function(draggable, event) {
            draggable.element.parentsUntil("body").on("scroll.droppable", function() {
                draggable.options.refreshPositions || $.ui.ddmanager.prepareOffsets(draggable, event)
            })
        },
        drag: function(draggable, event) {
            draggable.options.refreshPositions && $.ui.ddmanager.prepareOffsets(draggable, event),
            $.each($.ui.ddmanager.droppables[draggable.options.scope] || [], function() {
                if (!this.options.disabled && !this.greedyChild && this.visible) {
                    var parentInstance, scope, parent, intersects = intersect(draggable, this, this.options.tolerance, event), c = !intersects && this.isover ? "isout" : intersects && !this.isover ? "isover" : null;
                    c && (this.options.greedy && (scope = this.options.scope,
                    parent = this.element.parents(":data(ui-droppable)").filter(function() {
                        return $(this).droppable("instance").options.scope === scope
                    }),
                    parent.length && (parentInstance = $(parent[0]).droppable("instance"),
                    parentInstance.greedyChild = "isover" === c)),
                    parentInstance && "isover" === c && (parentInstance.isover = !1,
                    parentInstance.isout = !0,
                    parentInstance._out.call(parentInstance, event)),
                    this[c] = !0,
                    this["isout" === c ? "isover" : "isout"] = !1,
                    this["isover" === c ? "_over" : "_out"].call(this, event),
                    parentInstance && "isout" === c && (parentInstance.isout = !1,
                    parentInstance.isover = !0,
                    parentInstance._over.call(parentInstance, event)))
                }
            })
        },
        dragStop: function(draggable, event) {
            draggable.element.parentsUntil("body").off("scroll.droppable"),
            draggable.options.refreshPositions || $.ui.ddmanager.prepareOffsets(draggable, event)
        }
    },
    $.uiBackCompat !== !1 && $.widget("ui.droppable", $.ui.droppable, {
        options: {
            hoverClass: !1,
            activeClass: !1
        },
        _addActiveClass: function() {
            this._super(),
            this.options.activeClass && this.element.addClass(this.options.activeClass)
        },
        _removeActiveClass: function() {
            this._super(),
            this.options.activeClass && this.element.removeClass(this.options.activeClass)
        },
        _addHoverClass: function() {
            this._super(),
            this.options.hoverClass && this.element.addClass(this.options.hoverClass)
        },
        _removeHoverClass: function() {
            this._super(),
            this.options.hoverClass && this.element.removeClass(this.options.hoverClass)
        }
    }),
    $.ui.droppable
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../version", "../widget"], factory) : factory(jQuery)
}(function($) {
    return $.widget("ui.progressbar", {
        version: "1.12.1",
        options: {
            classes: {
                "ui-progressbar": "ui-corner-all",
                "ui-progressbar-value": "ui-corner-left",
                "ui-progressbar-complete": "ui-corner-right"
            },
            max: 100,
            value: 0,
            change: null,
            complete: null
        },
        min: 0,
        _create: function() {
            this.oldValue = this.options.value = this._constrainedValue(),
            this.element.attr({
                role: "progressbar",
                "aria-valuemin": this.min
            }),
            this._addClass("ui-progressbar", "ui-widget ui-widget-content"),
            this.valueDiv = $("<div>").appendTo(this.element),
            this._addClass(this.valueDiv, "ui-progressbar-value", "ui-widget-header"),
            this._refreshValue()
        },
        _destroy: function() {
            this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),
            this.valueDiv.remove()
        },
        value: function(newValue) {
            return void 0 === newValue ? this.options.value : (this.options.value = this._constrainedValue(newValue),
            void this._refreshValue())
        },
        _constrainedValue: function(newValue) {
            return void 0 === newValue && (newValue = this.options.value),
            this.indeterminate = newValue === !1,
            "number" != typeof newValue && (newValue = 0),
            this.indeterminate ? !1 : Math.min(this.options.max, Math.max(this.min, newValue))
        },
        _setOptions: function(options) {
            var value = options.value;
            delete options.value,
            this._super(options),
            this.options.value = this._constrainedValue(value),
            this._refreshValue()
        },
        _setOption: function(key, value) {
            "max" === key && (value = Math.max(this.min, value)),
            this._super(key, value)
        },
        _setOptionDisabled: function(value) {
            this._super(value),
            this.element.attr("aria-disabled", value),
            this._toggleClass(null, "ui-state-disabled", !!value)
        },
        _percentage: function() {
            return this.indeterminate ? 100 : 100 * (this.options.value - this.min) / (this.options.max - this.min)
        },
        _refreshValue: function() {
            var value = this.options.value
              , percentage = this._percentage();
            this.valueDiv.toggle(this.indeterminate || value > this.min).width(percentage.toFixed(0) + "%"),
            this._toggleClass(this.valueDiv, "ui-progressbar-complete", null, value === this.options.max)._toggleClass("ui-progressbar-indeterminate", null, this.indeterminate),
            this.indeterminate ? (this.element.removeAttr("aria-valuenow"),
            this.overlayDiv || (this.overlayDiv = $("<div>").appendTo(this.valueDiv),
            this._addClass(this.overlayDiv, "ui-progressbar-overlay"))) : (this.element.attr({
                "aria-valuemax": this.options.max,
                "aria-valuenow": value
            }),
            this.overlayDiv && (this.overlayDiv.remove(),
            this.overlayDiv = null)),
            this.oldValue !== value && (this.oldValue = value,
            this._trigger("change")),
            value === this.options.max && this._trigger("complete")
        }
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./mouse", "../version", "../widget"], factory) : factory(jQuery)
}(function($) {
    return $.widget("ui.selectable", $.ui.mouse, {
        version: "1.12.1",
        options: {
            appendTo: "body",
            autoRefresh: !0,
            distance: 0,
            filter: "*",
            tolerance: "touch",
            selected: null,
            selecting: null,
            start: null,
            stop: null,
            unselected: null,
            unselecting: null
        },
        _create: function() {
            var that = this;
            this._addClass("ui-selectable"),
            this.dragged = !1,
            this.refresh = function() {
                that.elementPos = $(that.element[0]).offset(),
                that.selectees = $(that.options.filter, that.element[0]),
                that._addClass(that.selectees, "ui-selectee"),
                that.selectees.each(function() {
                    var $this = $(this)
                      , selecteeOffset = $this.offset()
                      , pos = {
                        left: selecteeOffset.left - that.elementPos.left,
                        top: selecteeOffset.top - that.elementPos.top
                    };
                    $.data(this, "selectable-item", {
                        element: this,
                        $element: $this,
                        left: pos.left,
                        top: pos.top,
                        right: pos.left + $this.outerWidth(),
                        bottom: pos.top + $this.outerHeight(),
                        startselected: !1,
                        selected: $this.hasClass("ui-selected"),
                        selecting: $this.hasClass("ui-selecting"),
                        unselecting: $this.hasClass("ui-unselecting")
                    })
                })
            }
            ,
            this.refresh(),
            this._mouseInit(),
            this.helper = $("<div>"),
            this._addClass(this.helper, "ui-selectable-helper")
        },
        _destroy: function() {
            this.selectees.removeData("selectable-item"),
            this._mouseDestroy()
        },
        _mouseStart: function(event) {
            var that = this
              , options = this.options;
            this.opos = [event.pageX, event.pageY],
            this.elementPos = $(this.element[0]).offset(),
            this.options.disabled || (this.selectees = $(options.filter, this.element[0]),
            this._trigger("start", event),
            $(options.appendTo).append(this.helper),
            this.helper.css({
                left: event.pageX,
                top: event.pageY,
                width: 0,
                height: 0
            }),
            options.autoRefresh && this.refresh(),
            this.selectees.filter(".ui-selected").each(function() {
                var selectee = $.data(this, "selectable-item");
                selectee.startselected = !0,
                event.metaKey || event.ctrlKey || (that._removeClass(selectee.$element, "ui-selected"),
                selectee.selected = !1,
                that._addClass(selectee.$element, "ui-unselecting"),
                selectee.unselecting = !0,
                that._trigger("unselecting", event, {
                    unselecting: selectee.element
                }))
            }),
            $(event.target).parents().addBack().each(function() {
                var doSelect, selectee = $.data(this, "selectable-item");
                return selectee ? (doSelect = !event.metaKey && !event.ctrlKey || !selectee.$element.hasClass("ui-selected"),
                that._removeClass(selectee.$element, doSelect ? "ui-unselecting" : "ui-selected")._addClass(selectee.$element, doSelect ? "ui-selecting" : "ui-unselecting"),
                selectee.unselecting = !doSelect,
                selectee.selecting = doSelect,
                selectee.selected = doSelect,
                doSelect ? that._trigger("selecting", event, {
                    selecting: selectee.element
                }) : that._trigger("unselecting", event, {
                    unselecting: selectee.element
                }),
                !1) : void 0
            }))
        },
        _mouseDrag: function(event) {
            if (this.dragged = !0,
            !this.options.disabled) {
                var tmp, that = this, options = this.options, x1 = this.opos[0], y1 = this.opos[1], x2 = event.pageX, y2 = event.pageY;
                return x1 > x2 && (tmp = x2,
                x2 = x1,
                x1 = tmp),
                y1 > y2 && (tmp = y2,
                y2 = y1,
                y1 = tmp),
                this.helper.css({
                    left: x1,
                    top: y1,
                    width: x2 - x1,
                    height: y2 - y1
                }),
                this.selectees.each(function() {
                    var selectee = $.data(this, "selectable-item")
                      , hit = !1
                      , offset = {};
                    selectee && selectee.element !== that.element[0] && (offset.left = selectee.left + that.elementPos.left,
                    offset.right = selectee.right + that.elementPos.left,
                    offset.top = selectee.top + that.elementPos.top,
                    offset.bottom = selectee.bottom + that.elementPos.top,
                    "touch" === options.tolerance ? hit = !(offset.left > x2 || offset.right < x1 || offset.top > y2 || offset.bottom < y1) : "fit" === options.tolerance && (hit = offset.left > x1 && offset.right < x2 && offset.top > y1 && offset.bottom < y2),
                    hit ? (selectee.selected && (that._removeClass(selectee.$element, "ui-selected"),
                    selectee.selected = !1),
                    selectee.unselecting && (that._removeClass(selectee.$element, "ui-unselecting"),
                    selectee.unselecting = !1),
                    selectee.selecting || (that._addClass(selectee.$element, "ui-selecting"),
                    selectee.selecting = !0,
                    that._trigger("selecting", event, {
                        selecting: selectee.element
                    }))) : (selectee.selecting && ((event.metaKey || event.ctrlKey) && selectee.startselected ? (that._removeClass(selectee.$element, "ui-selecting"),
                    selectee.selecting = !1,
                    that._addClass(selectee.$element, "ui-selected"),
                    selectee.selected = !0) : (that._removeClass(selectee.$element, "ui-selecting"),
                    selectee.selecting = !1,
                    selectee.startselected && (that._addClass(selectee.$element, "ui-unselecting"),
                    selectee.unselecting = !0),
                    that._trigger("unselecting", event, {
                        unselecting: selectee.element
                    }))),
                    selectee.selected && (event.metaKey || event.ctrlKey || selectee.startselected || (that._removeClass(selectee.$element, "ui-selected"),
                    selectee.selected = !1,
                    that._addClass(selectee.$element, "ui-unselecting"),
                    selectee.unselecting = !0,
                    that._trigger("unselecting", event, {
                        unselecting: selectee.element
                    })))))
                }),
                !1
            }
        },
        _mouseStop: function(event) {
            var that = this;
            return this.dragged = !1,
            $(".ui-unselecting", this.element[0]).each(function() {
                var selectee = $.data(this, "selectable-item");
                that._removeClass(selectee.$element, "ui-unselecting"),
                selectee.unselecting = !1,
                selectee.startselected = !1,
                that._trigger("unselected", event, {
                    unselected: selectee.element
                })
            }),
            $(".ui-selecting", this.element[0]).each(function() {
                var selectee = $.data(this, "selectable-item");
                that._removeClass(selectee.$element, "ui-selecting")._addClass(selectee.$element, "ui-selected"),
                selectee.selecting = !1,
                selectee.selected = !0,
                selectee.startselected = !0,
                that._trigger("selected", event, {
                    selected: selectee.element
                })
            }),
            this._trigger("stop", event),
            this.helper.remove(),
            !1
        }
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./menu", "../escape-selector", "../form-reset-mixin", "../keycode", "../labels", "../position", "../unique-id", "../version", "../widget"], factory) : factory(jQuery)
}(function($) {
    return $.widget("ui.selectmenu", [$.ui.formResetMixin, {
        version: "1.12.1",
        defaultElement: "<select>",
        options: {
            appendTo: null,
            classes: {
                "ui-selectmenu-button-open": "ui-corner-top",
                "ui-selectmenu-button-closed": "ui-corner-all"
            },
            disabled: null,
            icons: {
                button: "ui-icon-triangle-1-s"
            },
            position: {
                my: "left top",
                at: "left bottom",
                collision: "none"
            },
            width: !1,
            change: null,
            close: null,
            focus: null,
            open: null,
            select: null
        },
        _create: function() {
            var selectmenuId = this.element.uniqueId().attr("id");
            this.ids = {
                element: selectmenuId,
                button: selectmenuId + "-button",
                menu: selectmenuId + "-menu"
            },
            this._drawButton(),
            this._drawMenu(),
            this._bindFormResetHandler(),
            this._rendered = !1,
            this.menuItems = $()
        },
        _drawButton: function() {
            var icon, that = this, item = this._parseOption(this.element.find("option:selected"), this.element[0].selectedIndex);
            this.labels = this.element.labels().attr("for", this.ids.button),
            this._on(this.labels, {
                click: function(event) {
                    this.button.focus(),
                    event.preventDefault()
                }
            }),
            this.element.hide(),
            this.button = $("<span>", {
                tabindex: this.options.disabled ? -1 : 0,
                id: this.ids.button,
                role: "combobox",
                "aria-expanded": "false",
                "aria-autocomplete": "list",
                "aria-owns": this.ids.menu,
                "aria-haspopup": "true",
                title: this.element.attr("title")
            }).insertAfter(this.element),
            this._addClass(this.button, "ui-selectmenu-button ui-selectmenu-button-closed", "ui-button ui-widget"),
            icon = $("<span>").appendTo(this.button),
            this._addClass(icon, "ui-selectmenu-icon", "ui-icon " + this.options.icons.button),
            this.buttonItem = this._renderButtonItem(item).appendTo(this.button),
            this.options.width !== !1 && this._resizeButton(),
            this._on(this.button, this._buttonEvents),
            this.button.one("focusin", function() {
                that._rendered || that._refreshMenu()
            })
        },
        _drawMenu: function() {
            var that = this;
            this.menu = $("<ul>", {
                "aria-hidden": "true",
                "aria-labelledby": this.ids.button,
                id: this.ids.menu
            }),
            this.menuWrap = $("<div>").append(this.menu),
            this._addClass(this.menuWrap, "ui-selectmenu-menu", "ui-front"),
            this.menuWrap.appendTo(this._appendTo()),
            this.menuInstance = this.menu.menu({
                classes: {
                    "ui-menu": "ui-corner-bottom"
                },
                role: "listbox",
                select: function(event, ui) {
                    event.preventDefault(),
                    that._setSelection(),
                    that._select(ui.item.data("ui-selectmenu-item"), event)
                },
                focus: function(event, ui) {
                    var item = ui.item.data("ui-selectmenu-item");
                    null != that.focusIndex && item.index !== that.focusIndex && (that._trigger("focus", event, {
                        item: item
                    }),
                    that.isOpen || that._select(item, event)),
                    that.focusIndex = item.index,
                    that.button.attr("aria-activedescendant", that.menuItems.eq(item.index).attr("id"))
                }
            }).menu("instance"),
            this.menuInstance._off(this.menu, "mouseleave"),
            this.menuInstance._closeOnDocumentClick = function() {
                return !1
            }
            ,
            this.menuInstance._isDivider = function() {
                return !1
            }
        },
        refresh: function() {
            this._refreshMenu(),
            this.buttonItem.replaceWith(this.buttonItem = this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item") || {})),
            null === this.options.width && this._resizeButton()
        },
        _refreshMenu: function() {
            var item, options = this.element.find("option");
            this.menu.empty(),
            this._parseOptions(options),
            this._renderMenu(this.menu, this.items),
            this.menuInstance.refresh(),
            this.menuItems = this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),
            this._rendered = !0,
            options.length && (item = this._getSelectedItem(),
            this.menuInstance.focus(null, item),
            this._setAria(item.data("ui-selectmenu-item")),
            this._setOption("disabled", this.element.prop("disabled")))
        },
        open: function(event) {
            this.options.disabled || (this._rendered ? (this._removeClass(this.menu.find(".ui-state-active"), null, "ui-state-active"),
            this.menuInstance.focus(null, this._getSelectedItem())) : this._refreshMenu(),
            this.menuItems.length && (this.isOpen = !0,
            this._toggleAttr(),
            this._resizeMenu(),
            this._position(),
            this._on(this.document, this._documentClick),
            this._trigger("open", event)))
        },
        _position: function() {
            this.menuWrap.position($.extend({
                of: this.button
            }, this.options.position))
        },
        close: function(event) {
            this.isOpen && (this.isOpen = !1,
            this._toggleAttr(),
            this.range = null,
            this._off(this.document),
            this._trigger("close", event))
        },
        widget: function() {
            return this.button
        },
        menuWidget: function() {
            return this.menu
        },
        _renderButtonItem: function(item) {
            var buttonItem = $("<span>");
            return this._setText(buttonItem, item.label),
            this._addClass(buttonItem, "ui-selectmenu-text"),
            buttonItem
        },
        _renderMenu: function(ul, items) {
            var that = this
              , currentOptgroup = "";
            $.each(items, function(index, item) {
                var li;
                item.optgroup !== currentOptgroup && (li = $("<li>", {
                    text: item.optgroup
                }),
                that._addClass(li, "ui-selectmenu-optgroup", "ui-menu-divider" + (item.element.parent("optgroup").prop("disabled") ? " ui-state-disabled" : "")),
                li.appendTo(ul),
                currentOptgroup = item.optgroup),
                that._renderItemData(ul, item)
            })
        },
        _renderItemData: function(ul, item) {
            return this._renderItem(ul, item).data("ui-selectmenu-item", item)
        },
        _renderItem: function(ul, item) {
            var li = $("<li>")
              , wrapper = $("<div>", {
                title: item.element.attr("title")
            });
            return item.disabled && this._addClass(li, null, "ui-state-disabled"),
            this._setText(wrapper, item.label),
            li.append(wrapper).appendTo(ul)
        },
        _setText: function(element, value) {
            value ? element.text(value) : element.html("&#160;")
        },
        _move: function(direction, event) {
            var item, next, filter = ".ui-menu-item";
            this.isOpen ? item = this.menuItems.eq(this.focusIndex).parent("li") : (item = this.menuItems.eq(this.element[0].selectedIndex).parent("li"),
            filter += ":not(.ui-state-disabled)"),
            next = "first" === direction || "last" === direction ? item["first" === direction ? "prevAll" : "nextAll"](filter).eq(-1) : item[direction + "All"](filter).eq(0),
            next.length && this.menuInstance.focus(event, next)
        },
        _getSelectedItem: function() {
            return this.menuItems.eq(this.element[0].selectedIndex).parent("li")
        },
        _toggle: function(event) {
            this[this.isOpen ? "close" : "open"](event)
        },
        _setSelection: function() {
            var selection;
            this.range && (window.getSelection ? (selection = window.getSelection(),
            selection.removeAllRanges(),
            selection.addRange(this.range)) : this.range.select(),
            this.button.focus())
        },
        _documentClick: {
            mousedown: function(event) {
                this.isOpen && ($(event.target).closest(".ui-selectmenu-menu, #" + $.ui.escapeSelector(this.ids.button)).length || this.close(event))
            }
        },
        _buttonEvents: {
            mousedown: function() {
                var selection;
                window.getSelection ? (selection = window.getSelection(),
                selection.rangeCount && (this.range = selection.getRangeAt(0))) : this.range = document.selection.createRange()
            },
            click: function(event) {
                this._setSelection(),
                this._toggle(event)
            },
            keydown: function(event) {
                var preventDefault = !0;
                switch (event.keyCode) {
                case $.ui.keyCode.TAB:
                case $.ui.keyCode.ESCAPE:
                    this.close(event),
                    preventDefault = !1;
                    break;
                case $.ui.keyCode.ENTER:
                    this.isOpen && this._selectFocusedItem(event);
                    break;
                case $.ui.keyCode.UP:
                    event.altKey ? this._toggle(event) : this._move("prev", event);
                    break;
                case $.ui.keyCode.DOWN:
                    event.altKey ? this._toggle(event) : this._move("next", event);
                    break;
                case $.ui.keyCode.SPACE:
                    this.isOpen ? this._selectFocusedItem(event) : this._toggle(event);
                    break;
                case $.ui.keyCode.LEFT:
                    this._move("prev", event);
                    break;
                case $.ui.keyCode.RIGHT:
                    this._move("next", event);
                    break;
                case $.ui.keyCode.HOME:
                case $.ui.keyCode.PAGE_UP:
                    this._move("first", event);
                    break;
                case $.ui.keyCode.END:
                case $.ui.keyCode.PAGE_DOWN:
                    this._move("last", event);
                    break;
                default:
                    this.menu.trigger(event),
                    preventDefault = !1
                }
                preventDefault && event.preventDefault()
            }
        },
        _selectFocusedItem: function(event) {
            var item = this.menuItems.eq(this.focusIndex).parent("li");
            item.hasClass("ui-state-disabled") || this._select(item.data("ui-selectmenu-item"), event)
        },
        _select: function(item, event) {
            var oldIndex = this.element[0].selectedIndex;
            this.element[0].selectedIndex = item.index,
            this.buttonItem.replaceWith(this.buttonItem = this._renderButtonItem(item)),
            this._setAria(item),
            this._trigger("select", event, {
                item: item
            }),
            item.index !== oldIndex && this._trigger("change", event, {
                item: item
            }),
            this.close(event)
        },
        _setAria: function(item) {
            var id = this.menuItems.eq(item.index).attr("id");
            this.button.attr({
                "aria-labelledby": id,
                "aria-activedescendant": id
            }),
            this.menu.attr("aria-activedescendant", id)
        },
        _setOption: function(key, value) {
            if ("icons" === key) {
                var icon = this.button.find("span.ui-icon");
                this._removeClass(icon, null, this.options.icons.button)._addClass(icon, null, value.button)
            }
            this._super(key, value),
            "appendTo" === key && this.menuWrap.appendTo(this._appendTo()),
            "width" === key && this._resizeButton()
        },
        _setOptionDisabled: function(value) {
            this._super(value),
            this.menuInstance.option("disabled", value),
            this.button.attr("aria-disabled", value),
            this._toggleClass(this.button, null, "ui-state-disabled", value),
            this.element.prop("disabled", value),
            value ? (this.button.attr("tabindex", -1),
            this.close()) : this.button.attr("tabindex", 0)
        },
        _appendTo: function() {
            var element = this.options.appendTo;
            return element && (element = element.jquery || element.nodeType ? $(element) : this.document.find(element).eq(0)),
            element && element[0] || (element = this.element.closest(".ui-front, dialog")),
            element.length || (element = this.document[0].body),
            element
        },
        _toggleAttr: function() {
            this.button.attr("aria-expanded", this.isOpen),
            this._removeClass(this.button, "ui-selectmenu-button-" + (this.isOpen ? "closed" : "open"))._addClass(this.button, "ui-selectmenu-button-" + (this.isOpen ? "open" : "closed"))._toggleClass(this.menuWrap, "ui-selectmenu-open", null, this.isOpen),
            this.menu.attr("aria-hidden", !this.isOpen)
        },
        _resizeButton: function() {
            var width = this.options.width;
            return width === !1 ? void this.button.css("width", "") : (null === width && (width = this.element.show().outerWidth(),
            this.element.hide()),
            void this.button.outerWidth(width))
        },
        _resizeMenu: function() {
            this.menu.outerWidth(Math.max(this.button.outerWidth(), this.menu.width("").outerWidth() + 1))
        },
        _getCreateOptions: function() {
            var options = this._super();
            return options.disabled = this.element.prop("disabled"),
            options
        },
        _parseOptions: function(options) {
            var that = this
              , data = [];
            options.each(function(index, item) {
                data.push(that._parseOption($(item), index))
            }),
            this.items = data
        },
        _parseOption: function(option, index) {
            var optgroup = option.parent("optgroup");
            return {
                element: option,
                index: index,
                value: option.val(),
                label: option.text(),
                optgroup: optgroup.attr("label") || "",
                disabled: optgroup.prop("disabled") || option.prop("disabled")
            }
        },
        _destroy: function() {
            this._unbindFormResetHandler(),
            this.menuWrap.remove(),
            this.button.remove(),
            this.element.show(),
            this.element.removeUniqueId(),
            this.labels.attr("for", this.ids.element)
        }
    }])
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./mouse", "../keycode", "../version", "../widget"], factory) : factory(jQuery)
}(function($) {
    return $.widget("ui.slider", $.ui.mouse, {
        version: "1.12.1",
        widgetEventPrefix: "slide",
        options: {
            animate: !1,
            classes: {
                "ui-slider": "ui-corner-all",
                "ui-slider-handle": "ui-corner-all",
                "ui-slider-range": "ui-corner-all ui-widget-header"
            },
            distance: 0,
            max: 100,
            min: 0,
            orientation: "horizontal",
            range: !1,
            step: 1,
            value: 0,
            values: null,
            change: null,
            slide: null,
            start: null,
            stop: null
        },
        numPages: 5,
        _create: function() {
            this._keySliding = !1,
            this._mouseSliding = !1,
            this._animateOff = !0,
            this._handleIndex = null,
            this._detectOrientation(),
            this._mouseInit(),
            this._calculateNewMax(),
            this._addClass("ui-slider ui-slider-" + this.orientation, "ui-widget ui-widget-content"),
            this._refresh(),
            this._animateOff = !1
        },
        _refresh: function() {
            this._createRange(),
            this._createHandles(),
            this._setupEvents(),
            this._refreshValue()
        },
        _createHandles: function() {
            var i, handleCount, options = this.options, existingHandles = this.element.find(".ui-slider-handle"), handle = "<span tabindex='0'></span>", handles = [];
            for (handleCount = options.values && options.values.length || 1,
            existingHandles.length > handleCount && (existingHandles.slice(handleCount).remove(),
            existingHandles = existingHandles.slice(0, handleCount)),
            i = existingHandles.length; handleCount > i; i++)
                handles.push(handle);
            this.handles = existingHandles.add($(handles.join("")).appendTo(this.element)),
            this._addClass(this.handles, "ui-slider-handle", "ui-state-default"),
            this.handle = this.handles.eq(0),
            this.handles.each(function(i) {
                $(this).data("ui-slider-handle-index", i).attr("tabIndex", 0)
            })
        },
        _createRange: function() {
            var options = this.options;
            options.range ? (options.range === !0 && (options.values ? options.values.length && 2 !== options.values.length ? options.values = [options.values[0], options.values[0]] : $.isArray(options.values) && (options.values = options.values.slice(0)) : options.values = [this._valueMin(), this._valueMin()]),
            this.range && this.range.length ? (this._removeClass(this.range, "ui-slider-range-min ui-slider-range-max"),
            this.range.css({
                left: "",
                bottom: ""
            })) : (this.range = $("<div>").appendTo(this.element),
            this._addClass(this.range, "ui-slider-range")),
            "min" !== options.range && "max" !== options.range || this._addClass(this.range, "ui-slider-range-" + options.range)) : (this.range && this.range.remove(),
            this.range = null)
        },
        _setupEvents: function() {
            this._off(this.handles),
            this._on(this.handles, this._handleEvents),
            this._hoverable(this.handles),
            this._focusable(this.handles)
        },
        _destroy: function() {
            this.handles.remove(),
            this.range && this.range.remove(),
            this._mouseDestroy()
        },
        _mouseCapture: function(event) {
            var position, normValue, distance, closestHandle, index, allowed, offset, mouseOverHandle, that = this, o = this.options;
            return o.disabled ? !1 : (this.elementSize = {
                width: this.element.outerWidth(),
                height: this.element.outerHeight()
            },
            this.elementOffset = this.element.offset(),
            position = {
                x: event.pageX,
                y: event.pageY
            },
            normValue = this._normValueFromMouse(position),
            distance = this._valueMax() - this._valueMin() + 1,
            this.handles.each(function(i) {
                var thisDistance = Math.abs(normValue - that.values(i));
                (distance > thisDistance || distance === thisDistance && (i === that._lastChangedValue || that.values(i) === o.min)) && (distance = thisDistance,
                closestHandle = $(this),
                index = i)
            }),
            allowed = this._start(event, index),
            allowed === !1 ? !1 : (this._mouseSliding = !0,
            this._handleIndex = index,
            this._addClass(closestHandle, null, "ui-state-active"),
            closestHandle.trigger("focus"),
            offset = closestHandle.offset(),
            mouseOverHandle = !$(event.target).parents().addBack().is(".ui-slider-handle"),
            this._clickOffset = mouseOverHandle ? {
                left: 0,
                top: 0
            } : {
                left: event.pageX - offset.left - closestHandle.width() / 2,
                top: event.pageY - offset.top - closestHandle.height() / 2 - (parseInt(closestHandle.css("borderTopWidth"), 10) || 0) - (parseInt(closestHandle.css("borderBottomWidth"), 10) || 0) + (parseInt(closestHandle.css("marginTop"), 10) || 0)
            },
            this.handles.hasClass("ui-state-hover") || this._slide(event, index, normValue),
            this._animateOff = !0,
            !0))
        },
        _mouseStart: function() {
            return !0
        },
        _mouseDrag: function(event) {
            var position = {
                x: event.pageX,
                y: event.pageY
            }
              , normValue = this._normValueFromMouse(position);
            return this._slide(event, this._handleIndex, normValue),
            !1
        },
        _mouseStop: function(event) {
            return this._removeClass(this.handles, null, "ui-state-active"),
            this._mouseSliding = !1,
            this._stop(event, this._handleIndex),
            this._change(event, this._handleIndex),
            this._handleIndex = null,
            this._clickOffset = null,
            this._animateOff = !1,
            !1
        },
        _detectOrientation: function() {
            this.orientation = "vertical" === this.options.orientation ? "vertical" : "horizontal"
        },
        _normValueFromMouse: function(position) {
            var pixelTotal, pixelMouse, percentMouse, valueTotal, valueMouse;
            return "horizontal" === this.orientation ? (pixelTotal = this.elementSize.width,
            pixelMouse = position.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (pixelTotal = this.elementSize.height,
            pixelMouse = position.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)),
            percentMouse = pixelMouse / pixelTotal,
            percentMouse > 1 && (percentMouse = 1),
            0 > percentMouse && (percentMouse = 0),
            "vertical" === this.orientation && (percentMouse = 1 - percentMouse),
            valueTotal = this._valueMax() - this._valueMin(),
            valueMouse = this._valueMin() + percentMouse * valueTotal,
            this._trimAlignValue(valueMouse)
        },
        _uiHash: function(index, value, values) {
            var uiHash = {
                handle: this.handles[index],
                handleIndex: index,
                value: void 0 !== value ? value : this.value()
            };
            return this._hasMultipleValues() && (uiHash.value = void 0 !== value ? value : this.values(index),
            uiHash.values = values || this.values()),
            uiHash
        },
        _hasMultipleValues: function() {
            return this.options.values && this.options.values.length
        },
        _start: function(event, index) {
            return this._trigger("start", event, this._uiHash(index))
        },
        _slide: function(event, index, newVal) {
            var allowed, otherVal, currentValue = this.value(), newValues = this.values();
            this._hasMultipleValues() && (otherVal = this.values(index ? 0 : 1),
            currentValue = this.values(index),
            2 === this.options.values.length && this.options.range === !0 && (newVal = 0 === index ? Math.min(otherVal, newVal) : Math.max(otherVal, newVal)),
            newValues[index] = newVal),
            newVal !== currentValue && (allowed = this._trigger("slide", event, this._uiHash(index, newVal, newValues)),
            allowed !== !1 && (this._hasMultipleValues() ? this.values(index, newVal) : this.value(newVal)))
        },
        _stop: function(event, index) {
            this._trigger("stop", event, this._uiHash(index))
        },
        _change: function(event, index) {
            this._keySliding || this._mouseSliding || (this._lastChangedValue = index,
            this._trigger("change", event, this._uiHash(index)))
        },
        value: function(newValue) {
            return arguments.length ? (this.options.value = this._trimAlignValue(newValue),
            this._refreshValue(),
            void this._change(null, 0)) : this._value()
        },
        values: function(index, newValue) {
            var vals, newValues, i;
            if (arguments.length > 1)
                return this.options.values[index] = this._trimAlignValue(newValue),
                this._refreshValue(),
                void this._change(null, index);
            if (!arguments.length)
                return this._values();
            if (!$.isArray(arguments[0]))
                return this._hasMultipleValues() ? this._values(index) : this.value();
            for (vals = this.options.values,
            newValues = arguments[0],
            i = 0; i < vals.length; i += 1)
                vals[i] = this._trimAlignValue(newValues[i]),
                this._change(null, i);
            this._refreshValue()
        },
        _setOption: function(key, value) {
            var i, valsLength = 0;
            switch ("range" === key && this.options.range === !0 && ("min" === value ? (this.options.value = this._values(0),
            this.options.values = null) : "max" === value && (this.options.value = this._values(this.options.values.length - 1),
            this.options.values = null)),
            $.isArray(this.options.values) && (valsLength = this.options.values.length),
            this._super(key, value),
            key) {
            case "orientation":
                this._detectOrientation(),
                this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-" + this.orientation),
                this._refreshValue(),
                this.options.range && this._refreshRange(value),
                this.handles.css("horizontal" === value ? "bottom" : "left", "");
                break;
            case "value":
                this._animateOff = !0,
                this._refreshValue(),
                this._change(null, 0),
                this._animateOff = !1;
                break;
            case "values":
                for (this._animateOff = !0,
                this._refreshValue(),
                i = valsLength - 1; i >= 0; i--)
                    this._change(null, i);
                this._animateOff = !1;
                break;
            case "step":
            case "min":
            case "max":
                this._animateOff = !0,
                this._calculateNewMax(),
                this._refreshValue(),
                this._animateOff = !1;
                break;
            case "range":
                this._animateOff = !0,
                this._refresh(),
                this._animateOff = !1
            }
        },
        _setOptionDisabled: function(value) {
            this._super(value),
            this._toggleClass(null, "ui-state-disabled", !!value)
        },
        _value: function() {
            var val = this.options.value;
            return val = this._trimAlignValue(val)
        },
        _values: function(index) {
            var val, vals, i;
            if (arguments.length)
                return val = this.options.values[index],
                val = this._trimAlignValue(val);
            if (this._hasMultipleValues()) {
                for (vals = this.options.values.slice(),
                i = 0; i < vals.length; i += 1)
                    vals[i] = this._trimAlignValue(vals[i]);
                return vals
            }
            return []
        },
        _trimAlignValue: function(val) {
            if (val <= this._valueMin())
                return this._valueMin();
            if (val >= this._valueMax())
                return this._valueMax();
            var step = this.options.step > 0 ? this.options.step : 1
              , valModStep = (val - this._valueMin()) % step
              , alignValue = val - valModStep;
            return 2 * Math.abs(valModStep) >= step && (alignValue += valModStep > 0 ? step : -step),
            parseFloat(alignValue.toFixed(5))
        },
        _calculateNewMax: function() {
            var max = this.options.max
              , min = this._valueMin()
              , step = this.options.step
              , aboveMin = Math.round((max - min) / step) * step;
            max = aboveMin + min,
            max > this.options.max && (max -= step),
            this.max = parseFloat(max.toFixed(this._precision()))
        },
        _precision: function() {
            var precision = this._precisionOf(this.options.step);
            return null !== this.options.min && (precision = Math.max(precision, this._precisionOf(this.options.min))),
            precision
        },
        _precisionOf: function(num) {
            var str = num.toString()
              , decimal = str.indexOf(".");
            return -1 === decimal ? 0 : str.length - decimal - 1
        },
        _valueMin: function() {
            return this.options.min
        },
        _valueMax: function() {
            return this.max
        },
        _refreshRange: function(orientation) {
            "vertical" === orientation && this.range.css({
                width: "",
                left: ""
            }),
            "horizontal" === orientation && this.range.css({
                height: "",
                bottom: ""
            })
        },
        _refreshValue: function() {
            var lastValPercent, valPercent, value, valueMin, valueMax, oRange = this.options.range, o = this.options, that = this, animate = this._animateOff ? !1 : o.animate, _set = {};
            this._hasMultipleValues() ? this.handles.each(function(i) {
                valPercent = (that.values(i) - that._valueMin()) / (that._valueMax() - that._valueMin()) * 100,
                _set["horizontal" === that.orientation ? "left" : "bottom"] = valPercent + "%",
                $(this).stop(1, 1)[animate ? "animate" : "css"](_set, o.animate),
                that.options.range === !0 && ("horizontal" === that.orientation ? (0 === i && that.range.stop(1, 1)[animate ? "animate" : "css"]({
                    left: valPercent + "%"
                }, o.animate),
                1 === i && that.range[animate ? "animate" : "css"]({
                    width: valPercent - lastValPercent + "%"
                }, {
                    queue: !1,
                    duration: o.animate
                })) : (0 === i && that.range.stop(1, 1)[animate ? "animate" : "css"]({
                    bottom: valPercent + "%"
                }, o.animate),
                1 === i && that.range[animate ? "animate" : "css"]({
                    height: valPercent - lastValPercent + "%"
                }, {
                    queue: !1,
                    duration: o.animate
                }))),
                lastValPercent = valPercent
            }) : (value = this.value(),
            valueMin = this._valueMin(),
            valueMax = this._valueMax(),
            valPercent = valueMax !== valueMin ? (value - valueMin) / (valueMax - valueMin) * 100 : 0,
            _set["horizontal" === this.orientation ? "left" : "bottom"] = valPercent + "%",
            this.handle.stop(1, 1)[animate ? "animate" : "css"](_set, o.animate),
            "min" === oRange && "horizontal" === this.orientation && this.range.stop(1, 1)[animate ? "animate" : "css"]({
                width: valPercent + "%"
            }, o.animate),
            "max" === oRange && "horizontal" === this.orientation && this.range.stop(1, 1)[animate ? "animate" : "css"]({
                width: 100 - valPercent + "%"
            }, o.animate),
            "min" === oRange && "vertical" === this.orientation && this.range.stop(1, 1)[animate ? "animate" : "css"]({
                height: valPercent + "%"
            }, o.animate),
            "max" === oRange && "vertical" === this.orientation && this.range.stop(1, 1)[animate ? "animate" : "css"]({
                height: 100 - valPercent + "%"
            }, o.animate))
        },
        _handleEvents: {
            keydown: function(event) {
                var allowed, curVal, newVal, step, index = $(event.target).data("ui-slider-handle-index");
                switch (event.keyCode) {
                case $.ui.keyCode.HOME:
                case $.ui.keyCode.END:
                case $.ui.keyCode.PAGE_UP:
                case $.ui.keyCode.PAGE_DOWN:
                case $.ui.keyCode.UP:
                case $.ui.keyCode.RIGHT:
                case $.ui.keyCode.DOWN:
                case $.ui.keyCode.LEFT:
                    if (event.preventDefault(),
                    !this._keySliding && (this._keySliding = !0,
                    this._addClass($(event.target), null, "ui-state-active"),
                    allowed = this._start(event, index),
                    allowed === !1))
                        return
                }
                switch (step = this.options.step,
                curVal = newVal = this._hasMultipleValues() ? this.values(index) : this.value(),
                event.keyCode) {
                case $.ui.keyCode.HOME:
                    newVal = this._valueMin();
                    break;
                case $.ui.keyCode.END:
                    newVal = this._valueMax();
                    break;
                case $.ui.keyCode.PAGE_UP:
                    newVal = this._trimAlignValue(curVal + (this._valueMax() - this._valueMin()) / this.numPages);
                    break;
                case $.ui.keyCode.PAGE_DOWN:
                    newVal = this._trimAlignValue(curVal - (this._valueMax() - this._valueMin()) / this.numPages);
                    break;
                case $.ui.keyCode.UP:
                case $.ui.keyCode.RIGHT:
                    if (curVal === this._valueMax())
                        return;
                    newVal = this._trimAlignValue(curVal + step);
                    break;
                case $.ui.keyCode.DOWN:
                case $.ui.keyCode.LEFT:
                    if (curVal === this._valueMin())
                        return;
                    newVal = this._trimAlignValue(curVal - step)
                }
                this._slide(event, index, newVal)
            },
            keyup: function(event) {
                var index = $(event.target).data("ui-slider-handle-index");
                this._keySliding && (this._keySliding = !1,
                this._stop(event, index),
                this._change(event, index),
                this._removeClass($(event.target), null, "ui-state-active"))
            }
        }
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./mouse", "../data", "../ie", "../scroll-parent", "../version", "../widget"], factory) : factory(jQuery)
}(function($) {
    return $.widget("ui.sortable", $.ui.mouse, {
        version: "1.12.1",
        widgetEventPrefix: "sort",
        ready: !1,
        options: {
            appendTo: "parent",
            axis: !1,
            connectWith: !1,
            containment: !1,
            cursor: "auto",
            cursorAt: !1,
            dropOnEmpty: !0,
            forcePlaceholderSize: !1,
            forceHelperSize: !1,
            grid: !1,
            handle: !1,
            helper: "original",
            items: "> *",
            opacity: !1,
            placeholder: !1,
            revert: !1,
            scroll: !0,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            scope: "default",
            tolerance: "intersect",
            zIndex: 1e3,
            activate: null,
            beforeStop: null,
            change: null,
            deactivate: null,
            out: null,
            over: null,
            receive: null,
            remove: null,
            sort: null,
            start: null,
            stop: null,
            update: null
        },
        _isOverAxis: function(x, reference, size) {
            return x >= reference && reference + size > x
        },
        _isFloating: function(item) {
            return /left|right/.test(item.css("float")) || /inline|table-cell/.test(item.css("display"))
        },
        _create: function() {
            this.containerCache = {},
            this._addClass("ui-sortable"),
            this.refresh(),
            this.offset = this.element.offset(),
            this._mouseInit(),
            this._setHandleClassName(),
            this.ready = !0
        },
        _setOption: function(key, value) {
            this._super(key, value),
            "handle" === key && this._setHandleClassName()
        },
        _setHandleClassName: function() {
            var that = this;
            this._removeClass(this.element.find(".ui-sortable-handle"), "ui-sortable-handle"),
            $.each(this.items, function() {
                that._addClass(this.instance.options.handle ? this.item.find(this.instance.options.handle) : this.item, "ui-sortable-handle")
            })
        },
        _destroy: function() {
            this._mouseDestroy();
            for (var i = this.items.length - 1; i >= 0; i--)
                this.items[i].item.removeData(this.widgetName + "-item");
            return this
        },
        _mouseCapture: function(event, overrideHandle) {
            var currentItem = null
              , validHandle = !1
              , that = this;
            return this.reverting ? !1 : this.options.disabled || "static" === this.options.type ? !1 : (this._refreshItems(event),
            $(event.target).parents().each(function() {
                return $.data(this, that.widgetName + "-item") === that ? (currentItem = $(this),
                !1) : void 0
            }),
            $.data(event.target, that.widgetName + "-item") === that && (currentItem = $(event.target)),
            currentItem && (!this.options.handle || overrideHandle || ($(this.options.handle, currentItem).find("*").addBack().each(function() {
                this === event.target && (validHandle = !0)
            }),
            validHandle)) ? (this.currentItem = currentItem,
            this._removeCurrentsFromItems(),
            !0) : !1)
        },
        _mouseStart: function(event, overrideHandle, noActivation) {
            var i, body, o = this.options;
            if (this.currentContainer = this,
            this.refreshPositions(),
            this.helper = this._createHelper(event),
            this._cacheHelperProportions(),
            this._cacheMargins(),
            this.scrollParent = this.helper.scrollParent(),
            this.offset = this.currentItem.offset(),
            this.offset = {
                top: this.offset.top - this.margins.top,
                left: this.offset.left - this.margins.left
            },
            $.extend(this.offset, {
                click: {
                    left: event.pageX - this.offset.left,
                    top: event.pageY - this.offset.top
                },
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            }),
            this.helper.css("position", "absolute"),
            this.cssPosition = this.helper.css("position"),
            this.originalPosition = this._generatePosition(event),
            this.originalPageX = event.pageX,
            this.originalPageY = event.pageY,
            o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt),
            this.domPosition = {
                prev: this.currentItem.prev()[0],
                parent: this.currentItem.parent()[0]
            },
            this.helper[0] !== this.currentItem[0] && this.currentItem.hide(),
            this._createPlaceholder(),
            o.containment && this._setContainment(),
            o.cursor && "auto" !== o.cursor && (body = this.document.find("body"),
            this.storedCursor = body.css("cursor"),
            body.css("cursor", o.cursor),
            this.storedStylesheet = $("<style>*{ cursor: " + o.cursor + " !important; }</style>").appendTo(body)),
            o.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")),
            this.helper.css("opacity", o.opacity)),
            o.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")),
            this.helper.css("zIndex", o.zIndex)),
            this.scrollParent[0] !== this.document[0] && "HTML" !== this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()),
            this._trigger("start", event, this._uiHash()),
            this._preserveHelperProportions || this._cacheHelperProportions(),
            !noActivation)
                for (i = this.containers.length - 1; i >= 0; i--)
                    this.containers[i]._trigger("activate", event, this._uiHash(this));
            return $.ui.ddmanager && ($.ui.ddmanager.current = this),
            $.ui.ddmanager && !o.dropBehaviour && $.ui.ddmanager.prepareOffsets(this, event),
            this.dragging = !0,
            this._addClass(this.helper, "ui-sortable-helper"),
            this._mouseDrag(event),
            !0
        },
        _mouseDrag: function(event) {
            var i, item, itemElement, intersection, o = this.options, scrolled = !1;
            for (this.position = this._generatePosition(event),
            this.positionAbs = this._convertPositionTo("absolute"),
            this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs),
            this.options.scroll && (this.scrollParent[0] !== this.document[0] && "HTML" !== this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - event.pageY < o.scrollSensitivity ? this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop + o.scrollSpeed : event.pageY - this.overflowOffset.top < o.scrollSensitivity && (this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop - o.scrollSpeed),
            this.overflowOffset.left + this.scrollParent[0].offsetWidth - event.pageX < o.scrollSensitivity ? this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft + o.scrollSpeed : event.pageX - this.overflowOffset.left < o.scrollSensitivity && (this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft - o.scrollSpeed)) : (event.pageY - this.document.scrollTop() < o.scrollSensitivity ? scrolled = this.document.scrollTop(this.document.scrollTop() - o.scrollSpeed) : this.window.height() - (event.pageY - this.document.scrollTop()) < o.scrollSensitivity && (scrolled = this.document.scrollTop(this.document.scrollTop() + o.scrollSpeed)),
            event.pageX - this.document.scrollLeft() < o.scrollSensitivity ? scrolled = this.document.scrollLeft(this.document.scrollLeft() - o.scrollSpeed) : this.window.width() - (event.pageX - this.document.scrollLeft()) < o.scrollSensitivity && (scrolled = this.document.scrollLeft(this.document.scrollLeft() + o.scrollSpeed))),
            scrolled !== !1 && $.ui.ddmanager && !o.dropBehaviour && $.ui.ddmanager.prepareOffsets(this, event)),
            this.positionAbs = this._convertPositionTo("absolute"),
            this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"),
            this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"),
            i = this.items.length - 1; i >= 0; i--)
                if (item = this.items[i],
                itemElement = item.item[0],
                intersection = this._intersectsWithPointer(item),
                intersection && item.instance === this.currentContainer && itemElement !== this.currentItem[0] && this.placeholder[1 === intersection ? "next" : "prev"]()[0] !== itemElement && !$.contains(this.placeholder[0], itemElement) && ("semi-dynamic" === this.options.type ? !$.contains(this.element[0], itemElement) : !0)) {
                    if (this.direction = 1 === intersection ? "down" : "up",
                    "pointer" !== this.options.tolerance && !this._intersectsWithSides(item))
                        break;
                    this._rearrange(event, item),
                    this._trigger("change", event, this._uiHash());
                    break
                }
            return this._contactContainers(event),
            $.ui.ddmanager && $.ui.ddmanager.drag(this, event),
            this._trigger("sort", event, this._uiHash()),
            this.lastPositionAbs = this.positionAbs,
            !1
        },
        _mouseStop: function(event, noPropagation) {
            if (event) {
                if ($.ui.ddmanager && !this.options.dropBehaviour && $.ui.ddmanager.drop(this, event),
                this.options.revert) {
                    var that = this
                      , cur = this.placeholder.offset()
                      , axis = this.options.axis
                      , animation = {};
                    axis && "x" !== axis || (animation.left = cur.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollLeft)),
                    axis && "y" !== axis || (animation.top = cur.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollTop)),
                    this.reverting = !0,
                    $(this.helper).animate(animation, parseInt(this.options.revert, 10) || 500, function() {
                        that._clear(event)
                    })
                } else
                    this._clear(event, noPropagation);
                return !1
            }
        },
        cancel: function() {
            if (this.dragging) {
                this._mouseUp(new $.Event("mouseup",{
                    target: null
                })),
                "original" === this.options.helper ? (this.currentItem.css(this._storedCSS),
                this._removeClass(this.currentItem, "ui-sortable-helper")) : this.currentItem.show();
                for (var i = this.containers.length - 1; i >= 0; i--)
                    this.containers[i]._trigger("deactivate", null, this._uiHash(this)),
                    this.containers[i].containerCache.over && (this.containers[i]._trigger("out", null, this._uiHash(this)),
                    this.containers[i].containerCache.over = 0)
            }
            return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
            "original" !== this.options.helper && this.helper && this.helper[0].parentNode && this.helper.remove(),
            $.extend(this, {
                helper: null,
                dragging: !1,
                reverting: !1,
                _noFinalSort: null
            }),
            this.domPosition.prev ? $(this.domPosition.prev).after(this.currentItem) : $(this.domPosition.parent).prepend(this.currentItem)),
            this
        },
        serialize: function(o) {
            var items = this._getItemsAsjQuery(o && o.connected)
              , str = [];
            return o = o || {},
            $(items).each(function() {
                var res = ($(o.item || this).attr(o.attribute || "id") || "").match(o.expression || /(.+)[\-=_](.+)/);
                res && str.push((o.key || res[1] + "[]") + "=" + (o.key && o.expression ? res[1] : res[2]))
            }),
            !str.length && o.key && str.push(o.key + "="),
            str.join("&")
        },
        toArray: function(o) {
            var items = this._getItemsAsjQuery(o && o.connected)
              , ret = [];
            return o = o || {},
            items.each(function() {
                ret.push($(o.item || this).attr(o.attribute || "id") || "")
            }),
            ret
        },
        _intersectsWith: function(item) {
            var x1 = this.positionAbs.left
              , x2 = x1 + this.helperProportions.width
              , y1 = this.positionAbs.top
              , y2 = y1 + this.helperProportions.height
              , l = item.left
              , r = l + item.width
              , t = item.top
              , b = t + item.height
              , dyClick = this.offset.click.top
              , dxClick = this.offset.click.left
              , isOverElementHeight = "x" === this.options.axis || y1 + dyClick > t && b > y1 + dyClick
              , isOverElementWidth = "y" === this.options.axis || x1 + dxClick > l && r > x1 + dxClick
              , isOverElement = isOverElementHeight && isOverElementWidth;
            return "pointer" === this.options.tolerance || this.options.forcePointerForContainers || "pointer" !== this.options.tolerance && this.helperProportions[this.floating ? "width" : "height"] > item[this.floating ? "width" : "height"] ? isOverElement : l < x1 + this.helperProportions.width / 2 && x2 - this.helperProportions.width / 2 < r && t < y1 + this.helperProportions.height / 2 && y2 - this.helperProportions.height / 2 < b
        },
        _intersectsWithPointer: function(item) {
            var verticalDirection, horizontalDirection, isOverElementHeight = "x" === this.options.axis || this._isOverAxis(this.positionAbs.top + this.offset.click.top, item.top, item.height), isOverElementWidth = "y" === this.options.axis || this._isOverAxis(this.positionAbs.left + this.offset.click.left, item.left, item.width), isOverElement = isOverElementHeight && isOverElementWidth;
            return isOverElement ? (verticalDirection = this._getDragVerticalDirection(),
            horizontalDirection = this._getDragHorizontalDirection(),
            this.floating ? "right" === horizontalDirection || "down" === verticalDirection ? 2 : 1 : verticalDirection && ("down" === verticalDirection ? 2 : 1)) : !1
        },
        _intersectsWithSides: function(item) {
            var isOverBottomHalf = this._isOverAxis(this.positionAbs.top + this.offset.click.top, item.top + item.height / 2, item.height)
              , isOverRightHalf = this._isOverAxis(this.positionAbs.left + this.offset.click.left, item.left + item.width / 2, item.width)
              , verticalDirection = this._getDragVerticalDirection()
              , horizontalDirection = this._getDragHorizontalDirection();
            return this.floating && horizontalDirection ? "right" === horizontalDirection && isOverRightHalf || "left" === horizontalDirection && !isOverRightHalf : verticalDirection && ("down" === verticalDirection && isOverBottomHalf || "up" === verticalDirection && !isOverBottomHalf)
        },
        _getDragVerticalDirection: function() {
            var delta = this.positionAbs.top - this.lastPositionAbs.top;
            return 0 !== delta && (delta > 0 ? "down" : "up");
        },
        _getDragHorizontalDirection: function() {
            var delta = this.positionAbs.left - this.lastPositionAbs.left;
            return 0 !== delta && (delta > 0 ? "right" : "left")
        },
        refresh: function(event) {
            return this._refreshItems(event),
            this._setHandleClassName(),
            this.refreshPositions(),
            this
        },
        _connectWith: function() {
            var options = this.options;
            return options.connectWith.constructor === String ? [options.connectWith] : options.connectWith
        },
        _getItemsAsjQuery: function(connected) {
            function addItems() {
                items.push(this)
            }
            var i, j, cur, inst, items = [], queries = [], connectWith = this._connectWith();
            if (connectWith && connected)
                for (i = connectWith.length - 1; i >= 0; i--)
                    for (cur = $(connectWith[i], this.document[0]),
                    j = cur.length - 1; j >= 0; j--)
                        inst = $.data(cur[j], this.widgetFullName),
                        inst && inst !== this && !inst.options.disabled && queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element) : $(inst.options.items, inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), inst]);
            for (queries.push([$.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                options: this.options,
                item: this.currentItem
            }) : $(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]),
            i = queries.length - 1; i >= 0; i--)
                queries[i][0].each(addItems);
            return $(items)
        },
        _removeCurrentsFromItems: function() {
            var list = this.currentItem.find(":data(" + this.widgetName + "-item)");
            this.items = $.grep(this.items, function(item) {
                for (var j = 0; j < list.length; j++)
                    if (list[j] === item.item[0])
                        return !1;
                return !0
            })
        },
        _refreshItems: function(event) {
            this.items = [],
            this.containers = [this];
            var i, j, cur, inst, targetData, _queries, item, queriesLength, items = this.items, queries = [[$.isFunction(this.options.items) ? this.options.items.call(this.element[0], event, {
                item: this.currentItem
            }) : $(this.options.items, this.element), this]], connectWith = this._connectWith();
            if (connectWith && this.ready)
                for (i = connectWith.length - 1; i >= 0; i--)
                    for (cur = $(connectWith[i], this.document[0]),
                    j = cur.length - 1; j >= 0; j--)
                        inst = $.data(cur[j], this.widgetFullName),
                        inst && inst !== this && !inst.options.disabled && (queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element[0], event, {
                            item: this.currentItem
                        }) : $(inst.options.items, inst.element), inst]),
                        this.containers.push(inst));
            for (i = queries.length - 1; i >= 0; i--)
                for (targetData = queries[i][1],
                _queries = queries[i][0],
                j = 0,
                queriesLength = _queries.length; queriesLength > j; j++)
                    item = $(_queries[j]),
                    item.data(this.widgetName + "-item", targetData),
                    items.push({
                        item: item,
                        instance: targetData,
                        width: 0,
                        height: 0,
                        left: 0,
                        top: 0
                    })
        },
        refreshPositions: function(fast) {
            this.floating = this.items.length ? "x" === this.options.axis || this._isFloating(this.items[0].item) : !1,
            this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
            var i, item, t, p;
            for (i = this.items.length - 1; i >= 0; i--)
                item = this.items[i],
                item.instance !== this.currentContainer && this.currentContainer && item.item[0] !== this.currentItem[0] || (t = this.options.toleranceElement ? $(this.options.toleranceElement, item.item) : item.item,
                fast || (item.width = t.outerWidth(),
                item.height = t.outerHeight()),
                p = t.offset(),
                item.left = p.left,
                item.top = p.top);
            if (this.options.custom && this.options.custom.refreshContainers)
                this.options.custom.refreshContainers.call(this);
            else
                for (i = this.containers.length - 1; i >= 0; i--)
                    p = this.containers[i].element.offset(),
                    this.containers[i].containerCache.left = p.left,
                    this.containers[i].containerCache.top = p.top,
                    this.containers[i].containerCache.width = this.containers[i].element.outerWidth(),
                    this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
            return this
        },
        _createPlaceholder: function(that) {
            that = that || this;
            var className, o = that.options;
            o.placeholder && o.placeholder.constructor !== String || (className = o.placeholder,
            o.placeholder = {
                element: function() {
                    var nodeName = that.currentItem[0].nodeName.toLowerCase()
                      , element = $("<" + nodeName + ">", that.document[0]);
                    return that._addClass(element, "ui-sortable-placeholder", className || that.currentItem[0].className)._removeClass(element, "ui-sortable-helper"),
                    "tbody" === nodeName ? that._createTrPlaceholder(that.currentItem.find("tr").eq(0), $("<tr>", that.document[0]).appendTo(element)) : "tr" === nodeName ? that._createTrPlaceholder(that.currentItem, element) : "img" === nodeName && element.attr("src", that.currentItem.attr("src")),
                    className || element.css("visibility", "hidden"),
                    element
                },
                update: function(container, p) {
                    className && !o.forcePlaceholderSize || (p.height() || p.height(that.currentItem.innerHeight() - parseInt(that.currentItem.css("paddingTop") || 0, 10) - parseInt(that.currentItem.css("paddingBottom") || 0, 10)),
                    p.width() || p.width(that.currentItem.innerWidth() - parseInt(that.currentItem.css("paddingLeft") || 0, 10) - parseInt(that.currentItem.css("paddingRight") || 0, 10)))
                }
            }),
            that.placeholder = $(o.placeholder.element.call(that.element, that.currentItem)),
            that.currentItem.after(that.placeholder),
            o.placeholder.update(that, that.placeholder)
        },
        _createTrPlaceholder: function(sourceTr, targetTr) {
            var that = this;
            sourceTr.children().each(function() {
                $("<td>&#160;</td>", that.document[0]).attr("colspan", $(this).attr("colspan") || 1).appendTo(targetTr)
            })
        },
        _contactContainers: function(event) {
            var i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, cur, nearBottom, floating, axis, innermostContainer = null, innermostIndex = null;
            for (i = this.containers.length - 1; i >= 0; i--)
                if (!$.contains(this.currentItem[0], this.containers[i].element[0]))
                    if (this._intersectsWith(this.containers[i].containerCache)) {
                        if (innermostContainer && $.contains(this.containers[i].element[0], innermostContainer.element[0]))
                            continue;
                        innermostContainer = this.containers[i],
                        innermostIndex = i
                    } else
                        this.containers[i].containerCache.over && (this.containers[i]._trigger("out", event, this._uiHash(this)),
                        this.containers[i].containerCache.over = 0);
            if (innermostContainer)
                if (1 === this.containers.length)
                    this.containers[innermostIndex].containerCache.over || (this.containers[innermostIndex]._trigger("over", event, this._uiHash(this)),
                    this.containers[innermostIndex].containerCache.over = 1);
                else {
                    for (dist = 1e4,
                    itemWithLeastDistance = null,
                    floating = innermostContainer.floating || this._isFloating(this.currentItem),
                    posProperty = floating ? "left" : "top",
                    sizeProperty = floating ? "width" : "height",
                    axis = floating ? "pageX" : "pageY",
                    j = this.items.length - 1; j >= 0; j--)
                        $.contains(this.containers[innermostIndex].element[0], this.items[j].item[0]) && this.items[j].item[0] !== this.currentItem[0] && (cur = this.items[j].item.offset()[posProperty],
                        nearBottom = !1,
                        event[axis] - cur > this.items[j][sizeProperty] / 2 && (nearBottom = !0),
                        Math.abs(event[axis] - cur) < dist && (dist = Math.abs(event[axis] - cur),
                        itemWithLeastDistance = this.items[j],
                        this.direction = nearBottom ? "up" : "down"));
                    if (!itemWithLeastDistance && !this.options.dropOnEmpty)
                        return;
                    if (this.currentContainer === this.containers[innermostIndex])
                        return void (this.currentContainer.containerCache.over || (this.containers[innermostIndex]._trigger("over", event, this._uiHash()),
                        this.currentContainer.containerCache.over = 1));
                    itemWithLeastDistance ? this._rearrange(event, itemWithLeastDistance, null, !0) : this._rearrange(event, null, this.containers[innermostIndex].element, !0),
                    this._trigger("change", event, this._uiHash()),
                    this.containers[innermostIndex]._trigger("change", event, this._uiHash(this)),
                    this.currentContainer = this.containers[innermostIndex],
                    this.options.placeholder.update(this.currentContainer, this.placeholder),
                    this.containers[innermostIndex]._trigger("over", event, this._uiHash(this)),
                    this.containers[innermostIndex].containerCache.over = 1
                }
        },
        _createHelper: function(event) {
            var o = this.options
              , helper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event, this.currentItem])) : "clone" === o.helper ? this.currentItem.clone() : this.currentItem;
            return helper.parents("body").length || $("parent" !== o.appendTo ? o.appendTo : this.currentItem[0].parentNode)[0].appendChild(helper[0]),
            helper[0] === this.currentItem[0] && (this._storedCSS = {
                width: this.currentItem[0].style.width,
                height: this.currentItem[0].style.height,
                position: this.currentItem.css("position"),
                top: this.currentItem.css("top"),
                left: this.currentItem.css("left")
            }),
            helper[0].style.width && !o.forceHelperSize || helper.width(this.currentItem.width()),
            helper[0].style.height && !o.forceHelperSize || helper.height(this.currentItem.height()),
            helper
        },
        _adjustOffsetFromHelper: function(obj) {
            "string" == typeof obj && (obj = obj.split(" ")),
            $.isArray(obj) && (obj = {
                left: +obj[0],
                top: +obj[1] || 0
            }),
            "left"in obj && (this.offset.click.left = obj.left + this.margins.left),
            "right"in obj && (this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left),
            "top"in obj && (this.offset.click.top = obj.top + this.margins.top),
            "bottom"in obj && (this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top)
        },
        _getParentOffset: function() {
            this.offsetParent = this.helper.offsetParent();
            var po = this.offsetParent.offset();
            return "absolute" === this.cssPosition && this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0]) && (po.left += this.scrollParent.scrollLeft(),
            po.top += this.scrollParent.scrollTop()),
            (this.offsetParent[0] === this.document[0].body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && $.ui.ie) && (po = {
                top: 0,
                left: 0
            }),
            {
                top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            }
        },
        _getRelativeOffset: function() {
            if ("relative" === this.cssPosition) {
                var p = this.currentItem.position();
                return {
                    top: p.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    left: p.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                }
            }
            return {
                top: 0,
                left: 0
            }
        },
        _cacheMargins: function() {
            this.margins = {
                left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                top: parseInt(this.currentItem.css("marginTop"), 10) || 0
            }
        },
        _cacheHelperProportions: function() {
            this.helperProportions = {
                width: this.helper.outerWidth(),
                height: this.helper.outerHeight()
            }
        },
        _setContainment: function() {
            var ce, co, over, o = this.options;
            "parent" === o.containment && (o.containment = this.helper[0].parentNode),
            "document" !== o.containment && "window" !== o.containment || (this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, "document" === o.containment ? this.document.width() : this.window.width() - this.helperProportions.width - this.margins.left, ("document" === o.containment ? this.document.height() || document.body.parentNode.scrollHeight : this.window.height() || this.document[0].body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]),
            /^(document|window|parent)$/.test(o.containment) || (ce = $(o.containment)[0],
            co = $(o.containment).offset(),
            over = "hidden" !== $(ce).css("overflow"),
            this.containment = [co.left + (parseInt($(ce).css("borderLeftWidth"), 10) || 0) + (parseInt($(ce).css("paddingLeft"), 10) || 0) - this.margins.left, co.top + (parseInt($(ce).css("borderTopWidth"), 10) || 0) + (parseInt($(ce).css("paddingTop"), 10) || 0) - this.margins.top, co.left + (over ? Math.max(ce.scrollWidth, ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css("borderLeftWidth"), 10) || 0) - (parseInt($(ce).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, co.top + (over ? Math.max(ce.scrollHeight, ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css("borderTopWidth"), 10) || 0) - (parseInt($(ce).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top])
        },
        _convertPositionTo: function(d, pos) {
            pos || (pos = this.position);
            var mod = "absolute" === d ? 1 : -1
              , scroll = "absolute" !== this.cssPosition || this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent
              , scrollIsRootNode = /(html|body)/i.test(scroll[0].tagName);
            return {
                top: pos.top + this.offset.relative.top * mod + this.offset.parent.top * mod - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : scrollIsRootNode ? 0 : scroll.scrollTop()) * mod,
                left: pos.left + this.offset.relative.left * mod + this.offset.parent.left * mod - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft()) * mod
            }
        },
        _generatePosition: function(event) {
            var top, left, o = this.options, pageX = event.pageX, pageY = event.pageY, scroll = "absolute" !== this.cssPosition || this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, scrollIsRootNode = /(html|body)/i.test(scroll[0].tagName);
            return "relative" !== this.cssPosition || this.scrollParent[0] !== this.document[0] && this.scrollParent[0] !== this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset()),
            this.originalPosition && (this.containment && (event.pageX - this.offset.click.left < this.containment[0] && (pageX = this.containment[0] + this.offset.click.left),
            event.pageY - this.offset.click.top < this.containment[1] && (pageY = this.containment[1] + this.offset.click.top),
            event.pageX - this.offset.click.left > this.containment[2] && (pageX = this.containment[2] + this.offset.click.left),
            event.pageY - this.offset.click.top > this.containment[3] && (pageY = this.containment[3] + this.offset.click.top)),
            o.grid && (top = this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1],
            pageY = this.containment ? top - this.offset.click.top >= this.containment[1] && top - this.offset.click.top <= this.containment[3] ? top : top - this.offset.click.top >= this.containment[1] ? top - o.grid[1] : top + o.grid[1] : top,
            left = this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0],
            pageX = this.containment ? left - this.offset.click.left >= this.containment[0] && left - this.offset.click.left <= this.containment[2] ? left : left - this.offset.click.left >= this.containment[0] ? left - o.grid[0] : left + o.grid[0] : left)),
            {
                top: pageY - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : scrollIsRootNode ? 0 : scroll.scrollTop()),
                left: pageX - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft())
            }
        },
        _rearrange: function(event, i, a, hardRefresh) {
            a ? a[0].appendChild(this.placeholder[0]) : i.item[0].parentNode.insertBefore(this.placeholder[0], "down" === this.direction ? i.item[0] : i.item[0].nextSibling),
            this.counter = this.counter ? ++this.counter : 1;
            var counter = this.counter;
            this._delay(function() {
                counter === this.counter && this.refreshPositions(!hardRefresh)
            })
        },
        _clear: function(event, noPropagation) {
            function delayEvent(type, instance, container) {
                return function(event) {
                    container._trigger(type, event, instance._uiHash(instance))
                }
            }
            this.reverting = !1;
            var i, delayedTriggers = [];
            if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem),
            this._noFinalSort = null,
            this.helper[0] === this.currentItem[0]) {
                for (i in this._storedCSS)
                    "auto" !== this._storedCSS[i] && "static" !== this._storedCSS[i] || (this._storedCSS[i] = "");
                this.currentItem.css(this._storedCSS),
                this._removeClass(this.currentItem, "ui-sortable-helper")
            } else
                this.currentItem.show();
            for (this.fromOutside && !noPropagation && delayedTriggers.push(function(event) {
                this._trigger("receive", event, this._uiHash(this.fromOutside))
            }),
            !this.fromOutside && this.domPosition.prev === this.currentItem.prev().not(".ui-sortable-helper")[0] && this.domPosition.parent === this.currentItem.parent()[0] || noPropagation || delayedTriggers.push(function(event) {
                this._trigger("update", event, this._uiHash())
            }),
            this !== this.currentContainer && (noPropagation || (delayedTriggers.push(function(event) {
                this._trigger("remove", event, this._uiHash())
            }),
            delayedTriggers.push(function(c) {
                return function(event) {
                    c._trigger("receive", event, this._uiHash(this))
                }
            }
            .call(this, this.currentContainer)),
            delayedTriggers.push(function(c) {
                return function(event) {
                    c._trigger("update", event, this._uiHash(this))
                }
            }
            .call(this, this.currentContainer)))),
            i = this.containers.length - 1; i >= 0; i--)
                noPropagation || delayedTriggers.push(delayEvent("deactivate", this, this.containers[i])),
                this.containers[i].containerCache.over && (delayedTriggers.push(delayEvent("out", this, this.containers[i])),
                this.containers[i].containerCache.over = 0);
            if (this.storedCursor && (this.document.find("body").css("cursor", this.storedCursor),
            this.storedStylesheet.remove()),
            this._storedOpacity && this.helper.css("opacity", this._storedOpacity),
            this._storedZIndex && this.helper.css("zIndex", "auto" === this._storedZIndex ? "" : this._storedZIndex),
            this.dragging = !1,
            noPropagation || this._trigger("beforeStop", event, this._uiHash()),
            this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
            this.cancelHelperRemoval || (this.helper[0] !== this.currentItem[0] && this.helper.remove(),
            this.helper = null),
            !noPropagation) {
                for (i = 0; i < delayedTriggers.length; i++)
                    delayedTriggers[i].call(this, event);
                this._trigger("stop", event, this._uiHash())
            }
            return this.fromOutside = !1,
            !this.cancelHelperRemoval
        },
        _trigger: function() {
            $.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel()
        },
        _uiHash: function(_inst) {
            var inst = _inst || this;
            return {
                helper: inst.helper,
                placeholder: inst.placeholder || $([]),
                position: inst.position,
                originalPosition: inst.originalPosition,
                offset: inst.positionAbs,
                item: inst.currentItem,
                sender: _inst ? _inst.element : null
            }
        }
    })
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "./button", "../version", "../keycode", "../safe-active-element", "../widget"], factory) : factory(jQuery)
}(function($) {
    function spinnerModifer(fn) {
        return function() {
            var previous = this.element.val();
            fn.apply(this, arguments),
            this._refresh(),
            previous !== this.element.val() && this._trigger("change")
        }
    }
    return $.widget("ui.spinner", {
        version: "1.12.1",
        defaultElement: "<input>",
        widgetEventPrefix: "spin",
        options: {
            classes: {
                "ui-spinner": "ui-corner-all",
                "ui-spinner-down": "ui-corner-br",
                "ui-spinner-up": "ui-corner-tr"
            },
            culture: null,
            icons: {
                down: "ui-icon-triangle-1-s",
                up: "ui-icon-triangle-1-n"
            },
            incremental: !0,
            max: null,
            min: null,
            numberFormat: null,
            page: 10,
            step: 1,
            change: null,
            spin: null,
            start: null,
            stop: null
        },
        _create: function() {
            this._setOption("max", this.options.max),
            this._setOption("min", this.options.min),
            this._setOption("step", this.options.step),
            "" !== this.value() && this._value(this.element.val(), !0),
            this._draw(),
            this._on(this._events),
            this._refresh(),
            this._on(this.window, {
                beforeunload: function() {
                    this.element.removeAttr("autocomplete")
                }
            })
        },
        _getCreateOptions: function() {
            var options = this._super()
              , element = this.element;
            return $.each(["min", "max", "step"], function(i, option) {
                var value = element.attr(option);
                null != value && value.length && (options[option] = value)
            }),
            options
        },
        _events: {
            keydown: function(event) {
                this._start(event) && this._keydown(event) && event.preventDefault()
            },
            keyup: "_stop",
            focus: function() {
                this.previous = this.element.val()
            },
            blur: function(event) {
                return this.cancelBlur ? void delete this.cancelBlur : (this._stop(),
                this._refresh(),
                void (this.previous !== this.element.val() && this._trigger("change", event)))
            },
            mousewheel: function(event, delta) {
                if (delta) {
                    if (!this.spinning && !this._start(event))
                        return !1;
                    this._spin((delta > 0 ? 1 : -1) * this.options.step, event),
                    clearTimeout(this.mousewheelTimer),
                    this.mousewheelTimer = this._delay(function() {
                        this.spinning && this._stop(event)
                    }, 100),
                    event.preventDefault()
                }
            },
            "mousedown .ui-spinner-button": function(event) {
                function checkFocus() {
                    var isActive = this.element[0] === $.ui.safeActiveElement(this.document[0]);
                    isActive || (this.element.trigger("focus"),
                    this.previous = previous,
                    this._delay(function() {
                        this.previous = previous
                    }))
                }
                var previous;
                previous = this.element[0] === $.ui.safeActiveElement(this.document[0]) ? this.previous : this.element.val(),
                event.preventDefault(),
                checkFocus.call(this),
                this.cancelBlur = !0,
                this._delay(function() {
                    delete this.cancelBlur,
                    checkFocus.call(this)
                }),
                this._start(event) !== !1 && this._repeat(null, $(event.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, event)
            },
            "mouseup .ui-spinner-button": "_stop",
            "mouseenter .ui-spinner-button": function(event) {
                return $(event.currentTarget).hasClass("ui-state-active") ? this._start(event) === !1 ? !1 : void this._repeat(null, $(event.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, event) : void 0
            },
            "mouseleave .ui-spinner-button": "_stop"
        },
        _enhance: function() {
            this.uiSpinner = this.element.attr("autocomplete", "off").wrap("<span>").parent().append("<a></a><a></a>")
        },
        _draw: function() {
            this._enhance(),
            this._addClass(this.uiSpinner, "ui-spinner", "ui-widget ui-widget-content"),
            this._addClass("ui-spinner-input"),
            this.element.attr("role", "spinbutton"),
            this.buttons = this.uiSpinner.children("a").attr("tabIndex", -1).attr("aria-hidden", !0).button({
                classes: {
                    "ui-button": ""
                }
            }),
            this._removeClass(this.buttons, "ui-corner-all"),
            this._addClass(this.buttons.first(), "ui-spinner-button ui-spinner-up"),
            this._addClass(this.buttons.last(), "ui-spinner-button ui-spinner-down"),
            this.buttons.first().button({
                icon: this.options.icons.up,
                showLabel: !1
            }),
            this.buttons.last().button({
                icon: this.options.icons.down,
                showLabel: !1
            }),
            this.buttons.height() > Math.ceil(.5 * this.uiSpinner.height()) && this.uiSpinner.height() > 0 && this.uiSpinner.height(this.uiSpinner.height())
        },
        _keydown: function(event) {
            var options = this.options
              , keyCode = $.ui.keyCode;
            switch (event.keyCode) {
            case keyCode.UP:
                return this._repeat(null, 1, event),
                !0;
            case keyCode.DOWN:
                return this._repeat(null, -1, event),
                !0;
            case keyCode.PAGE_UP:
                return this._repeat(null, options.page, event),
                !0;
            case keyCode.PAGE_DOWN:
                return this._repeat(null, -options.page, event),
                !0
            }
            return !1
        },
        _start: function(event) {
            return this.spinning || this._trigger("start", event) !== !1 ? (this.counter || (this.counter = 1),
            this.spinning = !0,
            !0) : !1
        },
        _repeat: function(i, steps, event) {
            i = i || 500,
            clearTimeout(this.timer),
            this.timer = this._delay(function() {
                this._repeat(40, steps, event)
            }, i),
            this._spin(steps * this.options.step, event)
        },
        _spin: function(step, event) {
            var value = this.value() || 0;
            this.counter || (this.counter = 1),
            value = this._adjustValue(value + step * this._increment(this.counter)),
            this.spinning && this._trigger("spin", event, {
                value: value
            }) === !1 || (this._value(value),
            this.counter++)
        },
        _increment: function(i) {
            var incremental = this.options.incremental;
            return incremental ? $.isFunction(incremental) ? incremental(i) : Math.floor(i * i * i / 5e4 - i * i / 500 + 17 * i / 200 + 1) : 1
        },
        _precision: function() {
            var precision = this._precisionOf(this.options.step);
            return null !== this.options.min && (precision = Math.max(precision, this._precisionOf(this.options.min))),
            precision
        },
        _precisionOf: function(num) {
            var str = num.toString()
              , decimal = str.indexOf(".");
            return -1 === decimal ? 0 : str.length - decimal - 1
        },
        _adjustValue: function(value) {
            var base, aboveMin, options = this.options;
            return base = null !== options.min ? options.min : 0,
            aboveMin = value - base,
            aboveMin = Math.round(aboveMin / options.step) * options.step,
            value = base + aboveMin,
            value = parseFloat(value.toFixed(this._precision())),
            null !== options.max && value > options.max ? options.max : null !== options.min && value < options.min ? options.min : value
        },
        _stop: function(event) {
            this.spinning && (clearTimeout(this.timer),
            clearTimeout(this.mousewheelTimer),
            this.counter = 0,
            this.spinning = !1,
            this._trigger("stop", event))
        },
        _setOption: function(key, value) {
            var prevValue, first, last;
            return "culture" === key || "numberFormat" === key ? (prevValue = this._parse(this.element.val()),
            this.options[key] = value,
            void this.element.val(this._format(prevValue))) : ("max" !== key && "min" !== key && "step" !== key || "string" == typeof value && (value = this._parse(value)),
            "icons" === key && (first = this.buttons.first().find(".ui-icon"),
            this._removeClass(first, null, this.options.icons.up),
            this._addClass(first, null, value.up),
            last = this.buttons.last().find(".ui-icon"),
            this._removeClass(last, null, this.options.icons.down),
            this._addClass(last, null, value.down)),
            void this._super(key, value))
        },
        _setOptionDisabled: function(value) {
            this._super(value),
            this._toggleClass(this.uiSpinner, null, "ui-state-disabled", !!value),
            this.element.prop("disabled", !!value),
            this.buttons.button(value ? "disable" : "enable")
        },
        _setOptions: spinnerModifer(function(options) {
            this._super(options)
        }),
        _parse: function(val) {
            return "string" == typeof val && "" !== val && (val = window.Globalize && this.options.numberFormat ? Globalize.parseFloat(val, 10, this.options.culture) : +val),
            "" === val || isNaN(val) ? null : val
        },
        _format: function(value) {
            return "" === value ? "" : window.Globalize && this.options.numberFormat ? Globalize.format(value, this.options.numberFormat, this.options.culture) : value
        },
        _refresh: function() {
            this.element.attr({
                "aria-valuemin": this.options.min,
                "aria-valuemax": this.options.max,
                "aria-valuenow": this._parse(this.element.val())
            })
        },
        isValid: function() {
            var value = this.value();
            return null === value ? !1 : value === this._adjustValue(value)
        },
        _value: function(value, allowAny) {
            var parsed;
            "" !== value && (parsed = this._parse(value),
            null !== parsed && (allowAny || (parsed = this._adjustValue(parsed)),
            value = this._format(parsed))),
            this.element.val(value),
            this._refresh()
        },
        _destroy: function() {
            this.element.prop("disabled", !1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),
            this.uiSpinner.replaceWith(this.element)
        },
        stepUp: spinnerModifer(function(steps) {
            this._stepUp(steps)
        }),
        _stepUp: function(steps) {
            this._start() && (this._spin((steps || 1) * this.options.step),
            this._stop())
        },
        stepDown: spinnerModifer(function(steps) {
            this._stepDown(steps)
        }),
        _stepDown: function(steps) {
            this._start() && (this._spin((steps || 1) * -this.options.step),
            this._stop())
        },
        pageUp: spinnerModifer(function(pages) {
            this._stepUp((pages || 1) * this.options.page)
        }),
        pageDown: spinnerModifer(function(pages) {
            this._stepDown((pages || 1) * this.options.page)
        }),
        value: function(newVal) {
            return arguments.length ? void spinnerModifer(this._value).call(this, newVal) : this._parse(this.element.val())
        },
        widget: function() {
            return this.uiSpinner
        }
    }),
    $.uiBackCompat !== !1 && $.widget("ui.spinner", $.ui.spinner, {
        _enhance: function() {
            this.uiSpinner = this.element.attr("autocomplete", "off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())
        },
        _uiSpinnerHtml: function() {
            return "<span>"
        },
        _buttonHtml: function() {
            return "<a></a><a></a>"
        }
    }),
    $.ui.spinner
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../escape-selector", "../keycode", "../safe-active-element", "../unique-id", "../version", "../widget"], factory) : factory(jQuery)
}(function($) {
    return $.widget("ui.tabs", {
        version: "1.12.1",
        delay: 300,
        options: {
            active: null,
            classes: {
                "ui-tabs": "ui-corner-all",
                "ui-tabs-nav": "ui-corner-all",
                "ui-tabs-panel": "ui-corner-bottom",
                "ui-tabs-tab": "ui-corner-top"
            },
            collapsible: !1,
            event: "click",
            heightStyle: "content",
            hide: null,
            show: null,
            activate: null,
            beforeActivate: null,
            beforeLoad: null,
            load: null
        },
        _isLocal: function() {
            var rhash = /#.*$/;
            return function(anchor) {
                var anchorUrl, locationUrl;
                anchorUrl = anchor.href.replace(rhash, ""),
                locationUrl = location.href.replace(rhash, "");
                try {
                    anchorUrl = decodeURIComponent(anchorUrl)
                } catch (error) {}
                try {
                    locationUrl = decodeURIComponent(locationUrl)
                } catch (error) {}
                return anchor.hash.length > 1 && anchorUrl === locationUrl
            }
        }(),
        _create: function() {
            var that = this
              , options = this.options;
            this.running = !1,
            this._addClass("ui-tabs", "ui-widget ui-widget-content"),
            this._toggleClass("ui-tabs-collapsible", null, options.collapsible),
            this._processTabs(),
            options.active = this._initialActive(),
            $.isArray(options.disabled) && (options.disabled = $.unique(options.disabled.concat($.map(this.tabs.filter(".ui-state-disabled"), function(li) {
                return that.tabs.index(li)
            }))).sort()),
            this.options.active !== !1 && this.anchors.length ? this.active = this._findActive(options.active) : this.active = $(),
            this._refresh(),
            this.active.length && this.load(options.active)
        },
        _initialActive: function() {
            var active = this.options.active
              , collapsible = this.options.collapsible
              , locationHash = location.hash.substring(1);
            return null === active && (locationHash && this.tabs.each(function(i, tab) {
                return $(tab).attr("aria-controls") === locationHash ? (active = i,
                !1) : void 0
            }),
            null === active && (active = this.tabs.index(this.tabs.filter(".ui-tabs-active"))),
            null !== active && -1 !== active || (active = this.tabs.length ? 0 : !1)),
            active !== !1 && (active = this.tabs.index(this.tabs.eq(active)),
            -1 === active && (active = collapsible ? !1 : 0)),
            !collapsible && active === !1 && this.anchors.length && (active = 0),
            active
        },
        _getCreateEventData: function() {
            return {
                tab: this.active,
                panel: this.active.length ? this._getPanelForTab(this.active) : $()
            }
        },
        _tabKeydown: function(event) {
            var focusedTab = $($.ui.safeActiveElement(this.document[0])).closest("li")
              , selectedIndex = this.tabs.index(focusedTab)
              , goingForward = !0;
            if (!this._handlePageNav(event)) {
                switch (event.keyCode) {
                case $.ui.keyCode.RIGHT:
                case $.ui.keyCode.DOWN:
                    selectedIndex++;
                    break;
                case $.ui.keyCode.UP:
                case $.ui.keyCode.LEFT:
                    goingForward = !1,
                    selectedIndex--;
                    break;
                case $.ui.keyCode.END:
                    selectedIndex = this.anchors.length - 1;
                    break;
                case $.ui.keyCode.HOME:
                    selectedIndex = 0;
                    break;
                case $.ui.keyCode.SPACE:
                    return event.preventDefault(),
                    clearTimeout(this.activating),
                    void this._activate(selectedIndex);
                case $.ui.keyCode.ENTER:
                    return event.preventDefault(),
                    clearTimeout(this.activating),
                    void this._activate(selectedIndex === this.options.active ? !1 : selectedIndex);
                default:
                    return
                }
                event.preventDefault(),
                clearTimeout(this.activating),
                selectedIndex = this._focusNextTab(selectedIndex, goingForward),
                event.ctrlKey || event.metaKey || (focusedTab.attr("aria-selected", "false"),
                this.tabs.eq(selectedIndex).attr("aria-selected", "true"),
                this.activating = this._delay(function() {
                    this.option("active", selectedIndex)
                }, this.delay))
            }
        },
        _panelKeydown: function(event) {
            this._handlePageNav(event) || event.ctrlKey && event.keyCode === $.ui.keyCode.UP && (event.preventDefault(),
            this.active.trigger("focus"))
        },
        _handlePageNav: function(event) {
            return event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP ? (this._activate(this._focusNextTab(this.options.active - 1, !1)),
            !0) : event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN ? (this._activate(this._focusNextTab(this.options.active + 1, !0)),
            !0) : void 0
        },
        _findNextTab: function(index, goingForward) {
            function constrain() {
                return index > lastTabIndex && (index = 0),
                0 > index && (index = lastTabIndex),
                index
            }
            for (var lastTabIndex = this.tabs.length - 1; -1 !== $.inArray(constrain(), this.options.disabled); )
                index = goingForward ? index + 1 : index - 1;
            return index
        },
        _focusNextTab: function(index, goingForward) {
            return index = this._findNextTab(index, goingForward),
            this.tabs.eq(index).trigger("focus"),
            index
        },
        _setOption: function(key, value) {
            return "active" === key ? void this._activate(value) : (this._super(key, value),
            "collapsible" === key && (this._toggleClass("ui-tabs-collapsible", null, value),
            value || this.options.active !== !1 || this._activate(0)),
            "event" === key && this._setupEvents(value),
            void ("heightStyle" === key && this._setupHeightStyle(value)))
        },
        _sanitizeSelector: function(hash) {
            return hash ? hash.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&") : ""
        },
        refresh: function() {
            var options = this.options
              , lis = this.tablist.children(":has(a[href])");
            options.disabled = $.map(lis.filter(".ui-state-disabled"), function(tab) {
                return lis.index(tab)
            }),
            this._processTabs(),
            options.active !== !1 && this.anchors.length ? this.active.length && !$.contains(this.tablist[0], this.active[0]) ? this.tabs.length === options.disabled.length ? (options.active = !1,
            this.active = $()) : this._activate(this._findNextTab(Math.max(0, options.active - 1), !1)) : options.active = this.tabs.index(this.active) : (options.active = !1,
            this.active = $()),
            this._refresh()
        },
        _refresh: function() {
            this._setOptionDisabled(this.options.disabled),
            this._setupEvents(this.options.event),
            this._setupHeightStyle(this.options.heightStyle),
            this.tabs.not(this.active).attr({
                "aria-selected": "false",
                "aria-expanded": "false",
                tabIndex: -1
            }),
            this.panels.not(this._getPanelForTab(this.active)).hide().attr({
                "aria-hidden": "true"
            }),
            this.active.length ? (this.active.attr({
                "aria-selected": "true",
                "aria-expanded": "true",
                tabIndex: 0
            }),
            this._addClass(this.active, "ui-tabs-active", "ui-state-active"),
            this._getPanelForTab(this.active).show().attr({
                "aria-hidden": "false"
            })) : this.tabs.eq(0).attr("tabIndex", 0)
        },
        _processTabs: function() {
            var that = this
              , prevTabs = this.tabs
              , prevAnchors = this.anchors
              , prevPanels = this.panels;
            this.tablist = this._getList().attr("role", "tablist"),
            this._addClass(this.tablist, "ui-tabs-nav", "ui-helper-reset ui-helper-clearfix ui-widget-header"),
            this.tablist.on("mousedown" + this.eventNamespace, "> li", function(event) {
                $(this).is(".ui-state-disabled") && event.preventDefault()
            }).on("focus" + this.eventNamespace, ".ui-tabs-anchor", function() {
                $(this).closest("li").is(".ui-state-disabled") && this.blur()
            }),
            this.tabs = this.tablist.find("> li:has(a[href])").attr({
                role: "tab",
                tabIndex: -1
            }),
            this._addClass(this.tabs, "ui-tabs-tab", "ui-state-default"),
            this.anchors = this.tabs.map(function() {
                return $("a", this)[0]
            }).attr({
                role: "presentation",
                tabIndex: -1
            }),
            this._addClass(this.anchors, "ui-tabs-anchor"),
            this.panels = $(),
            this.anchors.each(function(i, anchor) {
                var selector, panel, panelId, anchorId = $(anchor).uniqueId().attr("id"), tab = $(anchor).closest("li"), originalAriaControls = tab.attr("aria-controls");
                that._isLocal(anchor) ? (selector = anchor.hash,
                panelId = selector.substring(1),
                panel = that.element.find(that._sanitizeSelector(selector))) : (panelId = tab.attr("aria-controls") || $({}).uniqueId()[0].id,
                selector = "#" + panelId,
                panel = that.element.find(selector),
                panel.length || (panel = that._createPanel(panelId),
                panel.insertAfter(that.panels[i - 1] || that.tablist)),
                panel.attr("aria-live", "polite")),
                panel.length && (that.panels = that.panels.add(panel)),
                originalAriaControls && tab.data("ui-tabs-aria-controls", originalAriaControls),
                tab.attr({
                    "aria-controls": panelId,
                    "aria-labelledby": anchorId
                }),
                panel.attr("aria-labelledby", anchorId)
            }),
            this.panels.attr("role", "tabpanel"),
            this._addClass(this.panels, "ui-tabs-panel", "ui-widget-content"),
            prevTabs && (this._off(prevTabs.not(this.tabs)),
            this._off(prevAnchors.not(this.anchors)),
            this._off(prevPanels.not(this.panels)))
        },
        _getList: function() {
            return this.tablist || this.element.find("ol, ul").eq(0)
        },
        _createPanel: function(id) {
            return $("<div>").attr("id", id).data("ui-tabs-destroy", !0)
        },
        _setOptionDisabled: function(disabled) {
            var currentItem, li, i;
            for ($.isArray(disabled) && (disabled.length ? disabled.length === this.anchors.length && (disabled = !0) : disabled = !1),
            i = 0; li = this.tabs[i]; i++)
                currentItem = $(li),
                disabled === !0 || -1 !== $.inArray(i, disabled) ? (currentItem.attr("aria-disabled", "true"),
                this._addClass(currentItem, null, "ui-state-disabled")) : (currentItem.removeAttr("aria-disabled"),
                this._removeClass(currentItem, null, "ui-state-disabled"));
            this.options.disabled = disabled,
            this._toggleClass(this.widget(), this.widgetFullName + "-disabled", null, disabled === !0)
        },
        _setupEvents: function(event) {
            var events = {};
            event && $.each(event.split(" "), function(index, eventName) {
                events[eventName] = "_eventHandler"
            }),
            this._off(this.anchors.add(this.tabs).add(this.panels)),
            this._on(!0, this.anchors, {
                click: function(event) {
                    event.preventDefault()
                }
            }),
            this._on(this.anchors, events),
            this._on(this.tabs, {
                keydown: "_tabKeydown"
            }),
            this._on(this.panels, {
                keydown: "_panelKeydown"
            }),
            this._focusable(this.tabs),
            this._hoverable(this.tabs)
        },
        _setupHeightStyle: function(heightStyle) {
            var maxHeight, parent = this.element.parent();
            "fill" === heightStyle ? (maxHeight = parent.height(),
            maxHeight -= this.element.outerHeight() - this.element.height(),
            this.element.siblings(":visible").each(function() {
                var elem = $(this)
                  , position = elem.css("position");
                "absolute" !== position && "fixed" !== position && (maxHeight -= elem.outerHeight(!0))
            }),
            this.element.children().not(this.panels).each(function() {
                maxHeight -= $(this).outerHeight(!0)
            }),
            this.panels.each(function() {
                $(this).height(Math.max(0, maxHeight - $(this).innerHeight() + $(this).height()))
            }).css("overflow", "auto")) : "auto" === heightStyle && (maxHeight = 0,
            this.panels.each(function() {
                maxHeight = Math.max(maxHeight, $(this).height("").height())
            }).height(maxHeight))
        },
        _eventHandler: function(event) {
            var options = this.options
              , active = this.active
              , anchor = $(event.currentTarget)
              , tab = anchor.closest("li")
              , clickedIsActive = tab[0] === active[0]
              , collapsing = clickedIsActive && options.collapsible
              , toShow = collapsing ? $() : this._getPanelForTab(tab)
              , toHide = active.length ? this._getPanelForTab(active) : $()
              , eventData = {
                oldTab: active,
                oldPanel: toHide,
                newTab: collapsing ? $() : tab,
                newPanel: toShow
            };
            event.preventDefault(),
            tab.hasClass("ui-state-disabled") || tab.hasClass("ui-tabs-loading") || this.running || clickedIsActive && !options.collapsible || this._trigger("beforeActivate", event, eventData) === !1 || (options.active = collapsing ? !1 : this.tabs.index(tab),
            this.active = clickedIsActive ? $() : tab,
            this.xhr && this.xhr.abort(),
            toHide.length || toShow.length || $.error("jQuery UI Tabs: Mismatching fragment identifier."),
            toShow.length && this.load(this.tabs.index(tab), event),
            this._toggle(event, eventData))
        },
        _toggle: function(event, eventData) {
            function complete() {
                that.running = !1,
                that._trigger("activate", event, eventData)
            }
            function show() {
                that._addClass(eventData.newTab.closest("li"), "ui-tabs-active", "ui-state-active"),
                toShow.length && that.options.show ? that._show(toShow, that.options.show, complete) : (toShow.show(),
                complete())
            }
            var that = this
              , toShow = eventData.newPanel
              , toHide = eventData.oldPanel;
            this.running = !0,
            toHide.length && this.options.hide ? this._hide(toHide, this.options.hide, function() {
                that._removeClass(eventData.oldTab.closest("li"), "ui-tabs-active", "ui-state-active"),
                show()
            }) : (this._removeClass(eventData.oldTab.closest("li"), "ui-tabs-active", "ui-state-active"),
            toHide.hide(),
            show()),
            toHide.attr("aria-hidden", "true"),
            eventData.oldTab.attr({
                "aria-selected": "false",
                "aria-expanded": "false"
            }),
            toShow.length && toHide.length ? eventData.oldTab.attr("tabIndex", -1) : toShow.length && this.tabs.filter(function() {
                return 0 === $(this).attr("tabIndex")
            }).attr("tabIndex", -1),
            toShow.attr("aria-hidden", "false"),
            eventData.newTab.attr({
                "aria-selected": "true",
                "aria-expanded": "true",
                tabIndex: 0
            })
        },
        _activate: function(index) {
            var anchor, active = this._findActive(index);
            active[0] !== this.active[0] && (active.length || (active = this.active),
            anchor = active.find(".ui-tabs-anchor")[0],
            this._eventHandler({
                target: anchor,
                currentTarget: anchor,
                preventDefault: $.noop
            }))
        },
        _findActive: function(index) {
            return index === !1 ? $() : this.tabs.eq(index)
        },
        _getIndex: function(index) {
            return "string" == typeof index && (index = this.anchors.index(this.anchors.filter("[href$='" + $.ui.escapeSelector(index) + "']"))),
            index
        },
        _destroy: function() {
            this.xhr && this.xhr.abort(),
            this.tablist.removeAttr("role").off(this.eventNamespace),
            this.anchors.removeAttr("role tabIndex").removeUniqueId(),
            this.tabs.add(this.panels).each(function() {
                $.data(this, "ui-tabs-destroy") ? $(this).remove() : $(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")
            }),
            this.tabs.each(function() {
                var li = $(this)
                  , prev = li.data("ui-tabs-aria-controls");
                prev ? li.attr("aria-controls", prev).removeData("ui-tabs-aria-controls") : li.removeAttr("aria-controls")
            }),
            this.panels.show(),
            "content" !== this.options.heightStyle && this.panels.css("height", "")
        },
        enable: function(index) {
            var disabled = this.options.disabled;
            disabled !== !1 && (void 0 === index ? disabled = !1 : (index = this._getIndex(index),
            disabled = $.isArray(disabled) ? $.map(disabled, function(num) {
                return num !== index ? num : null
            }) : $.map(this.tabs, function(li, num) {
                return num !== index ? num : null
            })),
            this._setOptionDisabled(disabled))
        },
        disable: function(index) {
            var disabled = this.options.disabled;
            if (disabled !== !0) {
                if (void 0 === index)
                    disabled = !0;
                else {
                    if (index = this._getIndex(index),
                    -1 !== $.inArray(index, disabled))
                        return;
                    disabled = $.isArray(disabled) ? $.merge([index], disabled).sort() : [index]
                }
                this._setOptionDisabled(disabled)
            }
        },
        load: function(index, event) {
            index = this._getIndex(index);
            var that = this
              , tab = this.tabs.eq(index)
              , anchor = tab.find(".ui-tabs-anchor")
              , panel = this._getPanelForTab(tab)
              , eventData = {
                tab: tab,
                panel: panel
            }
              , complete = function(jqXHR, status) {
                "abort" === status && that.panels.stop(!1, !0),
                that._removeClass(tab, "ui-tabs-loading"),
                panel.removeAttr("aria-busy"),
                jqXHR === that.xhr && delete that.xhr
            };
            this._isLocal(anchor[0]) || (this.xhr = $.ajax(this._ajaxSettings(anchor, event, eventData)),
            this.xhr && "canceled" !== this.xhr.statusText && (this._addClass(tab, "ui-tabs-loading"),
            panel.attr("aria-busy", "true"),
            this.xhr.done(function(response, status, jqXHR) {
                setTimeout(function() {
                    panel.html(response),
                    that._trigger("load", event, eventData),
                    complete(jqXHR, status)
                }, 1)
            }).fail(function(jqXHR, status) {
                setTimeout(function() {
                    complete(jqXHR, status)
                }, 1)
            })))
        },
        _ajaxSettings: function(anchor, event, eventData) {
            var that = this;
            return {
                url: anchor.attr("href").replace(/#.*$/, ""),
                beforeSend: function(jqXHR, settings) {
                    return that._trigger("beforeLoad", event, $.extend({
                        jqXHR: jqXHR,
                        ajaxSettings: settings
                    }, eventData))
                }
            }
        },
        _getPanelForTab: function(tab) {
            var id = $(tab).attr("aria-controls");
            return this.element.find(this._sanitizeSelector("#" + id))
        }
    }),
    $.uiBackCompat !== !1 && $.widget("ui.tabs", $.ui.tabs, {
        _processTabs: function() {
            this._superApply(arguments),
            this._addClass(this.tabs, "ui-tab")
        }
    }),
    $.ui.tabs
}),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery", "../keycode", "../position", "../unique-id", "../version", "../widget"], factory) : factory(jQuery)
}(function($) {
    return $.widget("ui.tooltip", {
        version: "1.12.1",
        options: {
            classes: {
                "ui-tooltip": "ui-corner-all ui-widget-shadow"
            },
            content: function() {
                var title = $(this).attr("title") || "";
                return $("<a>").text(title).html()
            },
            hide: !0,
            items: "[title]:not([disabled])",
            position: {
                my: "left top+15",
                at: "left bottom",
                collision: "flipfit flip"
            },
            show: !0,
            track: !1,
            close: null,
            open: null
        },
        _addDescribedBy: function(elem, id) {
            var describedby = (elem.attr("aria-describedby") || "").split(/\s+/);
            describedby.push(id),
            elem.data("ui-tooltip-id", id).attr("aria-describedby", $.trim(describedby.join(" ")))
        },
        _removeDescribedBy: function(elem) {
            var id = elem.data("ui-tooltip-id")
              , describedby = (elem.attr("aria-describedby") || "").split(/\s+/)
              , index = $.inArray(id, describedby);
            -1 !== index && describedby.splice(index, 1),
            elem.removeData("ui-tooltip-id"),
            describedby = $.trim(describedby.join(" ")),
            describedby ? elem.attr("aria-describedby", describedby) : elem.removeAttr("aria-describedby")
        },
        _create: function() {
            this._on({
                mouseover: "open",
                focusin: "open"
            }),
            this.tooltips = {},
            this.parents = {},
            this.liveRegion = $("<div>").attr({
                role: "log",
                "aria-live": "assertive",
                "aria-relevant": "additions"
            }).appendTo(this.document[0].body),
            this._addClass(this.liveRegion, null, "ui-helper-hidden-accessible"),
            this.disabledTitles = $([])
        },
        _setOption: function(key, value) {
            var that = this;
            this._super(key, value),
            "content" === key && $.each(this.tooltips, function(id, tooltipData) {
                that._updateContent(tooltipData.element)
            })
        },
        _setOptionDisabled: function(value) {
            this[value ? "_disable" : "_enable"]()
        },
        _disable: function() {
            var that = this;
            $.each(this.tooltips, function(id, tooltipData) {
                var event = $.Event("blur");
                event.target = event.currentTarget = tooltipData.element[0],
                that.close(event, !0)
            }),
            this.disabledTitles = this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function() {
                var element = $(this);
                return element.is("[title]") ? element.data("ui-tooltip-title", element.attr("title")).removeAttr("title") : void 0
            }))
        },
        _enable: function() {
            this.disabledTitles.each(function() {
                var element = $(this);
                element.data("ui-tooltip-title") && element.attr("title", element.data("ui-tooltip-title"))
            }),
            this.disabledTitles = $([])
        },
        open: function(event) {
            var that = this
              , target = $(event ? event.target : this.element).closest(this.options.items);
            target.length && !target.data("ui-tooltip-id") && (target.attr("title") && target.data("ui-tooltip-title", target.attr("title")),
            target.data("ui-tooltip-open", !0),
            event && "mouseover" === event.type && target.parents().each(function() {
                var blurEvent, parent = $(this);
                parent.data("ui-tooltip-open") && (blurEvent = $.Event("blur"),
                blurEvent.target = blurEvent.currentTarget = this,
                that.close(blurEvent, !0)),
                parent.attr("title") && (parent.uniqueId(),
                that.parents[this.id] = {
                    element: this,
                    title: parent.attr("title")
                },
                parent.attr("title", ""))
            }),
            this._registerCloseHandlers(event, target),
            this._updateContent(target, event))
        },
        _updateContent: function(target, event) {
            var content, contentOption = this.options.content, that = this, eventType = event ? event.type : null;
            return "string" == typeof contentOption || contentOption.nodeType || contentOption.jquery ? this._open(event, target, contentOption) : (content = contentOption.call(target[0], function(response) {
                that._delay(function() {
                    target.data("ui-tooltip-open") && (event && (event.type = eventType),
                    this._open(event, target, response))
                })
            }),
            void (content && this._open(event, target, content)))
        },
        _open: function(event, target, content) {
            function position(event) {
                positionOption.of = event,
                tooltip.is(":hidden") || tooltip.position(positionOption)
            }
            var tooltipData, tooltip, delayedShow, a11yContent, positionOption = $.extend({}, this.options.position);
            if (content) {
                if (tooltipData = this._find(target))
                    return void tooltipData.tooltip.find(".ui-tooltip-content").html(content);
                target.is("[title]") && (event && "mouseover" === event.type ? target.attr("title", "") : target.removeAttr("title")),
                tooltipData = this._tooltip(target),
                tooltip = tooltipData.tooltip,
                this._addDescribedBy(target, tooltip.attr("id")),
                tooltip.find(".ui-tooltip-content").html(content),
                this.liveRegion.children().hide(),
                a11yContent = $("<div>").html(tooltip.find(".ui-tooltip-content").html()),
                a11yContent.removeAttr("name").find("[name]").removeAttr("name"),
                a11yContent.removeAttr("id").find("[id]").removeAttr("id"),
                a11yContent.appendTo(this.liveRegion),
                this.options.track && event && /^mouse/.test(event.type) ? (this._on(this.document, {
                    mousemove: position
                }),
                position(event)) : tooltip.position($.extend({
                    of: target
                }, this.options.position)),
                tooltip.hide(),
                this._show(tooltip, this.options.show),
                this.options.track && this.options.show && this.options.show.delay && (delayedShow = this.delayedShow = setInterval(function() {
                    tooltip.is(":visible") && (position(positionOption.of),
                    clearInterval(delayedShow))
                }, $.fx.interval)),
                this._trigger("open", event, {
                    tooltip: tooltip
                })
            }
        },
        _registerCloseHandlers: function(event, target) {
            var events = {
                keyup: function(event) {
                    if (event.keyCode === $.ui.keyCode.ESCAPE) {
                        var fakeEvent = $.Event(event);
                        fakeEvent.currentTarget = target[0],
                        this.close(fakeEvent, !0)
                    }
                }
            };
            target[0] !== this.element[0] && (events.remove = function() {
                this._removeTooltip(this._find(target).tooltip)
            }
            ),
            event && "mouseover" !== event.type || (events.mouseleave = "close"),
            event && "focusin" !== event.type || (events.focusout = "close"),
            this._on(!0, target, events)
        },
        close: function(event) {
            var tooltip, that = this, target = $(event ? event.currentTarget : this.element), tooltipData = this._find(target);
            return tooltipData ? (tooltip = tooltipData.tooltip,
            void (tooltipData.closing || (clearInterval(this.delayedShow),
            target.data("ui-tooltip-title") && !target.attr("title") && target.attr("title", target.data("ui-tooltip-title")),
            this._removeDescribedBy(target),
            tooltipData.hiding = !0,
            tooltip.stop(!0),
            this._hide(tooltip, this.options.hide, function() {
                that._removeTooltip($(this))
            }),
            target.removeData("ui-tooltip-open"),
            this._off(target, "mouseleave focusout keyup"),
            target[0] !== this.element[0] && this._off(target, "remove"),
            this._off(this.document, "mousemove"),
            event && "mouseleave" === event.type && $.each(this.parents, function(id, parent) {
                $(parent.element).attr("title", parent.title),
                delete that.parents[id]
            }),
            tooltipData.closing = !0,
            this._trigger("close", event, {
                tooltip: tooltip
            }),
            tooltipData.hiding || (tooltipData.closing = !1)))) : void target.removeData("ui-tooltip-open")
        },
        _tooltip: function(element) {
            var tooltip = $("<div>").attr("role", "tooltip")
              , content = $("<div>").appendTo(tooltip)
              , id = tooltip.uniqueId().attr("id");
            return this._addClass(content, "ui-tooltip-content"),
            this._addClass(tooltip, "ui-tooltip", "ui-widget ui-widget-content"),
            tooltip.appendTo(this._appendTo(element)),
            this.tooltips[id] = {
                element: element,
                tooltip: tooltip
            }
        },
        _find: function(target) {
            var id = target.data("ui-tooltip-id");
            return id ? this.tooltips[id] : null
        },
        _removeTooltip: function(tooltip) {
            tooltip.remove(),
            delete this.tooltips[tooltip.attr("id")]
        },
        _appendTo: function(target) {
            var element = target.closest(".ui-front, dialog");
            return element.length || (element = this.document[0].body),
            element
        },
        _destroy: function() {
            var that = this;
            $.each(this.tooltips, function(id, tooltipData) {
                var event = $.Event("blur")
                  , element = tooltipData.element;
                event.target = event.currentTarget = element[0],
                that.close(event, !0),
                $("#" + id).remove(),
                element.data("ui-tooltip-title") && (element.attr("title") || element.attr("title", element.data("ui-tooltip-title")),
                element.removeData("ui-tooltip-title"))
            }),
            this.liveRegion.remove()
        }
    }),
    $.uiBackCompat !== !1 && $.widget("ui.tooltip", $.ui.tooltip, {
        options: {
            tooltipClass: null
        },
        _tooltip: function() {
            var tooltipData = this._superApply(arguments);
            return this.options.tooltipClass && tooltipData.tooltip.addClass(this.options.tooltipClass),
            tooltipData
        }
    }),
    $.ui.tooltip
}),
"undefined" == typeof jQuery)
    throw new Error("Bootstrap's JavaScript requires jQuery");
+function($) {
    "use strict";
    var version = $.fn.jquery.split(" ")[0].split(".");
    if (version[0] < 2 && version[1] < 9 || 1 == version[0] && 9 == version[1] && version[2] < 1)
        throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")
}(jQuery),
+function($) {
    "use strict";
    function transitionEnd() {
        var el = document.createElement("bootstrap")
          , transEndEventNames = {
            WebkitTransition: "webkitTransitionEnd",
            MozTransition: "transitionend",
            OTransition: "oTransitionEnd otransitionend",
            transition: "transitionend"
        };
        for (var name in transEndEventNames)
            if (void 0 !== el.style[name])
                return {
                    end: transEndEventNames[name]
                };
        return !1
    }
    $.fn.emulateTransitionEnd = function(duration) {
        var called = !1
          , $el = this;
        $(this).one("bsTransitionEnd", function() {
            called = !0
        });
        var callback = function() {
            called || $($el).trigger($.support.transition.end)
        };
        return setTimeout(callback, duration),
        this
    }
    ,
    $(function() {
        $.support.transition = transitionEnd(),
        $.support.transition && ($.event.special.bsTransitionEnd = {
            bindType: $.support.transition.end,
            delegateType: $.support.transition.end,
            handle: function(e) {
                return $(e.target).is(this) ? e.handleObj.handler.apply(this, arguments) : void 0
            }
        })
    })
}(jQuery),
+function($) {
    "use strict";
    function Plugin(option) {
        return this.each(function() {
            var $this = $(this)
              , data = $this.data("bs.alert");
            data || $this.data("bs.alert", data = new Alert(this)),
            "string" == typeof option && data[option].call($this)
        })
    }
    var dismiss = '[data-dismiss="alert"]'
      , Alert = function(el) {
        $(el).on("click", dismiss, this.close)
    };
    Alert.VERSION = "3.3.5",
    Alert.TRANSITION_DURATION = 150,
    Alert.prototype.close = function(e) {
        function removeElement() {
            $parent.detach().trigger("closed.bs.alert").remove()
        }
        var $this = $(this)
          , selector = $this.attr("data-target");
        selector || (selector = $this.attr("href"),
        selector = selector && selector.replace(/.*(?=#[^\s]*$)/, ""));
        var $parent = $(selector);
        e && e.preventDefault(),
        $parent.length || ($parent = $this.closest(".alert")),
        $parent.trigger(e = $.Event("close.bs.alert")),
        e.isDefaultPrevented() || ($parent.removeClass("in"),
        $.support.transition && $parent.hasClass("fade") ? $parent.one("bsTransitionEnd", removeElement).emulateTransitionEnd(Alert.TRANSITION_DURATION) : removeElement())
    }
    ;
    var old = $.fn.alert;
    $.fn.alert = Plugin,
    $.fn.alert.Constructor = Alert,
    $.fn.alert.noConflict = function() {
        return $.fn.alert = old,
        this
    }
    ,
    $(document).on("click.bs.alert.data-api", dismiss, Alert.prototype.close)
}(jQuery),
+function($) {
    "use strict";
    function Plugin(option) {
        return this.each(function() {
            var $this = $(this)
              , data = $this.data("bs.button")
              , options = "object" == typeof option && option;
            data || $this.data("bs.button", data = new Button(this,options)),
            "toggle" == option ? data.toggle() : option && data.setState(option)
        })
    }
    var Button = function(element, options) {
        this.$element = $(element),
        this.options = $.extend({}, Button.DEFAULTS, options),
        this.isLoading = !1
    };
    Button.VERSION = "3.3.5",
    Button.DEFAULTS = {
        loadingText: "loading..."
    },
    Button.prototype.setState = function(state) {
        var d = "disabled"
          , $el = this.$element
          , val = $el.is("input") ? "val" : "html"
          , data = $el.data();
        state += "Text",
        null == data.resetText && $el.data("resetText", $el[val]()),
        setTimeout($.proxy(function() {
            $el[val](null == data[state] ? this.options[state] : data[state]),
            "loadingText" == state ? (this.isLoading = !0,
            $el.addClass(d).attr(d, d)) : this.isLoading && (this.isLoading = !1,
            $el.removeClass(d).removeAttr(d))
        }, this), 0)
    }
    ,
    Button.prototype.toggle = function() {
        var changed = !0
          , $parent = this.$element.closest('[data-toggle="buttons"]');
        if ($parent.length) {
            var $input = this.$element.find("input");
            "radio" == $input.prop("type") ? ($input.prop("checked") && (changed = !1),
            $parent.find(".active").removeClass("active"),
            this.$element.addClass("active")) : "checkbox" == $input.prop("type") && ($input.prop("checked") !== this.$element.hasClass("active") && (changed = !1),
            this.$element.toggleClass("active")),
            $input.prop("checked", this.$element.hasClass("active")),
            changed && $input.trigger("change")
        } else
            this.$element.attr("aria-pressed", !this.$element.hasClass("active")),
            this.$element.toggleClass("active")
    }
    ;
    var old = $.fn.button;
    $.fn.button = Plugin,
    $.fn.button.Constructor = Button,
    $.fn.button.noConflict = function() {
        return $.fn.button = old,
        this
    }
    ,
    $(document).on("click.bs.button.data-api", '[data-toggle^="button"]', function(e) {
        var $btn = $(e.target);
        $btn.hasClass("btn") || ($btn = $btn.closest(".btn")),
        Plugin.call($btn, "toggle"),
        $(e.target).is('input[type="radio"]') || $(e.target).is('input[type="checkbox"]') || e.preventDefault()
    }).on("focus.bs.button.data-api blur.bs.button.data-api", '[data-toggle^="button"]', function(e) {
        $(e.target).closest(".btn").toggleClass("focus", /^focus(in)?$/.test(e.type))
    })
}(jQuery),
+function($) {
    "use strict";
    function Plugin(option) {
        return this.each(function() {
            var $this = $(this)
              , data = $this.data("bs.carousel")
              , options = $.extend({}, Carousel.DEFAULTS, $this.data(), "object" == typeof option && option)
              , action = "string" == typeof option ? option : options.slide;
            data || $this.data("bs.carousel", data = new Carousel(this,options)),
            "number" == typeof option ? data.to(option) : action ? data[action]() : options.interval && data.pause().cycle()
        })
    }
    var Carousel = function(element, options) {
        this.$element = $(element),
        this.$indicators = this.$element.find(".carousel-indicators"),
        this.options = options,
        this.paused = null,
        this.sliding = null,
        this.interval = null,
        this.$active = null,
        this.$items = null,
        this.options.keyboard && this.$element.on("keydown.bs.carousel", $.proxy(this.keydown, this)),
        "hover" == this.options.pause && !("ontouchstart"in document.documentElement) && this.$element.on("mouseenter.bs.carousel", $.proxy(this.pause, this)).on("mouseleave.bs.carousel", $.proxy(this.cycle, this))
    };
    Carousel.VERSION = "3.3.5",
    Carousel.TRANSITION_DURATION = 600,
    Carousel.DEFAULTS = {
        interval: 5e3,
        pause: "hover",
        wrap: !0,
        keyboard: !0
    },
    Carousel.prototype.keydown = function(e) {
        if (!/input|textarea/i.test(e.target.tagName)) {
            switch (e.which) {
            case 37:
                this.prev();
                break;
            case 39:
                this.next();
                break;
            default:
                return
            }
            e.preventDefault()
        }
    }
    ,
    Carousel.prototype.cycle = function(e) {
        return e || (this.paused = !1),
        this.interval && clearInterval(this.interval),
        this.options.interval && !this.paused && (this.interval = setInterval($.proxy(this.next, this), this.options.interval)),
        this
    }
    ,
    Carousel.prototype.getItemIndex = function(item) {
        return this.$items = item.parent().children(".item"),
        this.$items.index(item || this.$active)
    }
    ,
    Carousel.prototype.getItemForDirection = function(direction, active) {
        var activeIndex = this.getItemIndex(active)
          , willWrap = "prev" == direction && 0 === activeIndex || "next" == direction && activeIndex == this.$items.length - 1;
        if (willWrap && !this.options.wrap)
            return active;
        var delta = "prev" == direction ? -1 : 1
          , itemIndex = (activeIndex + delta) % this.$items.length;
        return this.$items.eq(itemIndex)
    }
    ,
    Carousel.prototype.to = function(pos) {
        var that = this
          , activeIndex = this.getItemIndex(this.$active = this.$element.find(".item.active"));
        return pos > this.$items.length - 1 || 0 > pos ? void 0 : this.sliding ? this.$element.one("slid.bs.carousel", function() {
            that.to(pos)
        }) : activeIndex == pos ? this.pause().cycle() : this.slide(pos > activeIndex ? "next" : "prev", this.$items.eq(pos))
    }
    ,
    Carousel.prototype.pause = function(e) {
        return e || (this.paused = !0),
        this.$element.find(".next, .prev").length && $.support.transition && (this.$element.trigger($.support.transition.end),
        this.cycle(!0)),
        this.interval = clearInterval(this.interval),
        this
    }
    ,
    Carousel.prototype.next = function() {
        return this.sliding ? void 0 : this.slide("next")
    }
    ,
    Carousel.prototype.prev = function() {
        return this.sliding ? void 0 : this.slide("prev")
    }
    ,
    Carousel.prototype.slide = function(type, next) {
        var $active = this.$element.find(".item.active")
          , $next = next || this.getItemForDirection(type, $active)
          , isCycling = this.interval
          , direction = "next" == type ? "left" : "right"
          , that = this;
        if ($next.hasClass("active"))
            return this.sliding = !1;
        var relatedTarget = $next[0]
          , slideEvent = $.Event("slide.bs.carousel", {
            relatedTarget: relatedTarget,
            direction: direction
        });
        if (this.$element.trigger(slideEvent),
        !slideEvent.isDefaultPrevented()) {
            if (this.sliding = !0,
            isCycling && this.pause(),
            this.$indicators.length) {
                this.$indicators.find(".active").removeClass("active");
                var $nextIndicator = $(this.$indicators.children()[this.getItemIndex($next)]);
                $nextIndicator && $nextIndicator.addClass("active")
            }
            var slidEvent = $.Event("slid.bs.carousel", {
                relatedTarget: relatedTarget,
                direction: direction
            });
            return $.support.transition && this.$element.hasClass("slide") ? ($next.addClass(type),
            $next[0].offsetWidth,
            $active.addClass(direction),
            $next.addClass(direction),
            $active.one("bsTransitionEnd", function() {
                $next.removeClass([type, direction].join(" ")).addClass("active"),
                $active.removeClass(["active", direction].join(" ")),
                that.sliding = !1,
                setTimeout(function() {
                    that.$element.trigger(slidEvent)
                }, 0)
            }).emulateTransitionEnd(Carousel.TRANSITION_DURATION)) : ($active.removeClass("active"),
            $next.addClass("active"),
            this.sliding = !1,
            this.$element.trigger(slidEvent)),
            isCycling && this.cycle(),
            this
        }
    }
    ;
    var old = $.fn.carousel;
    $.fn.carousel = Plugin,
    $.fn.carousel.Constructor = Carousel,
    $.fn.carousel.noConflict = function() {
        return $.fn.carousel = old,
        this
    }
    ;
    var clickHandler = function(e) {
        var href, $this = $(this), $target = $($this.attr("data-target") || (href = $this.attr("href")) && href.replace(/.*(?=#[^\s]+$)/, ""));
        if ($target.hasClass("carousel")) {
            var options = $.extend({}, $target.data(), $this.data())
              , slideIndex = $this.attr("data-slide-to");
            slideIndex && (options.interval = !1),
            Plugin.call($target, options),
            slideIndex && $target.data("bs.carousel").to(slideIndex),
            e.preventDefault()
        }
    };
    $(document).on("click.bs.carousel.data-api", "[data-slide]", clickHandler).on("click.bs.carousel.data-api", "[data-slide-to]", clickHandler),
    $(window).on("load", function() {
        $('[data-ride="carousel"]').each(function() {
            var $carousel = $(this);
            Plugin.call($carousel, $carousel.data())
        })
    })
}(jQuery),
+function($) {
    "use strict";
    function getTargetFromTrigger($trigger) {
        var href, target = $trigger.attr("data-target") || (href = $trigger.attr("href")) && href.replace(/.*(?=#[^\s]+$)/, "");
        return $(target)
    }
    function Plugin(option) {
        return this.each(function() {
            var $this = $(this)
              , data = $this.data("bs.collapse")
              , options = $.extend({}, Collapse.DEFAULTS, $this.data(), "object" == typeof option && option);
            !data && options.toggle && /show|hide/.test(option) && (options.toggle = !1),
            data || $this.data("bs.collapse", data = new Collapse(this,options)),
            "string" == typeof option && data[option]()
        })
    }
    var Collapse = function(element, options) {
        this.$element = $(element),
        this.options = $.extend({}, Collapse.DEFAULTS, options),
        this.$trigger = $('[data-toggle="collapse"][href="#' + element.id + '"],[data-toggle="collapse"][data-target="#' + element.id + '"]'),
        this.transitioning = null,
        this.options.parent ? this.$parent = this.getParent() : this.addAriaAndCollapsedClass(this.$element, this.$trigger),
        this.options.toggle && this.toggle()
    };
    Collapse.VERSION = "3.3.5",
    Collapse.TRANSITION_DURATION = 350,
    Collapse.DEFAULTS = {
        toggle: !0
    },
    Collapse.prototype.dimension = function() {
        var hasWidth = this.$element.hasClass("width");
        return hasWidth ? "width" : "height"
    }
    ,
    Collapse.prototype.show = function() {
        if (!this.transitioning && !this.$element.hasClass("in")) {
            var activesData, actives = this.$parent && this.$parent.children(".panel").children(".in, .collapsing");
            if (!(actives && actives.length && (activesData = actives.data("bs.collapse"),
            activesData && activesData.transitioning))) {
                var startEvent = $.Event("show.bs.collapse");
                if (this.$element.trigger(startEvent),
                !startEvent.isDefaultPrevented()) {
                    actives && actives.length && (Plugin.call(actives, "hide"),
                    activesData || actives.data("bs.collapse", null));
                    var dimension = this.dimension();
                    this.$element.removeClass("collapse").addClass("collapsing")[dimension](0).attr("aria-expanded", !0),
                    this.$trigger.removeClass("collapsed").attr("aria-expanded", !0),
                    this.transitioning = 1;
                    var complete = function() {
                        this.$element.removeClass("collapsing").addClass("collapse in")[dimension](""),
                        this.transitioning = 0,
                        this.$element.trigger("shown.bs.collapse")
                    };
                    if (!$.support.transition)
                        return complete.call(this);
                    var scrollSize = $.camelCase(["scroll", dimension].join("-"));
                    this.$element.one("bsTransitionEnd", $.proxy(complete, this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])
                }
            }
        }
    }
    ,
    Collapse.prototype.hide = function() {
        if (!this.transitioning && this.$element.hasClass("in")) {
            var startEvent = $.Event("hide.bs.collapse");
            if (this.$element.trigger(startEvent),
            !startEvent.isDefaultPrevented()) {
                var dimension = this.dimension();
                this.$element[dimension](this.$element[dimension]())[0].offsetHeight,
                this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded", !1),
                this.$trigger.addClass("collapsed").attr("aria-expanded", !1),
                this.transitioning = 1;
                var complete = function() {
                    this.transitioning = 0,
                    this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")
                };
                return $.support.transition ? void this.$element[dimension](0).one("bsTransitionEnd", $.proxy(complete, this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION) : complete.call(this)
            }
        }
    }
    ,
    Collapse.prototype.toggle = function() {
        this[this.$element.hasClass("in") ? "hide" : "show"]()
    }
    ,
    Collapse.prototype.getParent = function() {
        return $(this.options.parent).find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]').each($.proxy(function(i, element) {
            var $element = $(element);
            this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)
        }, this)).end()
    }
    ,
    Collapse.prototype.addAriaAndCollapsedClass = function($element, $trigger) {
        var isOpen = $element.hasClass("in");
        $element.attr("aria-expanded", isOpen),
        $trigger.toggleClass("collapsed", !isOpen).attr("aria-expanded", isOpen)
    }
    ;
    var old = $.fn.collapse;
    $.fn.collapse = Plugin,
    $.fn.collapse.Constructor = Collapse,
    $.fn.collapse.noConflict = function() {
        return $.fn.collapse = old,
        this
    }
    ,
    $(document).on("click.bs.collapse.data-api", '[data-toggle="collapse"]', function(e) {
        var $this = $(this);
        $this.attr("data-target") || e.preventDefault();
        var $target = getTargetFromTrigger($this)
          , data = $target.data("bs.collapse")
          , option = data ? "toggle" : $this.data();
        Plugin.call($target, option)
    })
}(jQuery),
+function($) {
    "use strict";
    function getParent($this) {
        var selector = $this.attr("data-target");
        selector || (selector = $this.attr("href"),
        selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, ""));
        var $parent = selector && $(selector);
        return $parent && $parent.length ? $parent : $this.parent()
    }
    function clearMenus(e) {
        e && 3 === e.which || ($(backdrop).remove(),
        $(toggle).each(function() {
            var $this = $(this)
              , $parent = getParent($this)
              , relatedTarget = {
                relatedTarget: this
            };
            $parent.hasClass("open") && (e && "click" == e.type && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target) || ($parent.trigger(e = $.Event("hide.bs.dropdown", relatedTarget)),
            e.isDefaultPrevented() || ($this.attr("aria-expanded", "false"),
            $parent.removeClass("open").trigger("hidden.bs.dropdown", relatedTarget))))
        }))
    }
    function Plugin(option) {
        return this.each(function() {
            var $this = $(this)
              , data = $this.data("bs.dropdown");
            data || $this.data("bs.dropdown", data = new Dropdown(this)),
            "string" == typeof option && data[option].call($this)
        })
    }
    var backdrop = ".dropdown-backdrop"
      , toggle = '[data-toggle="dropdown"]'
      , Dropdown = function(element) {
        $(element).on("click.bs.dropdown", this.toggle)
    };
    Dropdown.VERSION = "3.3.5",
    Dropdown.prototype.toggle = function(e) {
        var $this = $(this);
        if (!$this.is(".disabled, :disabled")) {
            var $parent = getParent($this)
              , isActive = $parent.hasClass("open");
            if (clearMenus(),
            !isActive) {
                "ontouchstart"in document.documentElement && !$parent.closest(".navbar-nav").length && $(document.createElement("div")).addClass("dropdown-backdrop").insertAfter($(this)).on("click", clearMenus);
                var relatedTarget = {
                    relatedTarget: this
                };
                if ($parent.trigger(e = $.Event("show.bs.dropdown", relatedTarget)),
                e.isDefaultPrevented())
                    return;
                $this.trigger("focus").attr("aria-expanded", "true"),
                $parent.toggleClass("open").trigger("shown.bs.dropdown", relatedTarget)
            }
            return !1
        }
    }
    ,
    Dropdown.prototype.keydown = function(e) {
        if (/(38|40|27|32)/.test(e.which) && !/input|textarea/i.test(e.target.tagName)) {
            var $this = $(this);
            if (e.preventDefault(),
            e.stopPropagation(),
            !$this.is(".disabled, :disabled")) {
                var $parent = getParent($this)
                  , isActive = $parent.hasClass("open");
                if (!isActive && 27 != e.which || isActive && 27 == e.which)
                    return 27 == e.which && $parent.find(toggle).trigger("focus"),
                    $this.trigger("click");
                var desc = " li:not(.disabled):visible a"
                  , $items = $parent.find(".dropdown-menu" + desc);
                if ($items.length) {
                    var index = $items.index(e.target);
                    38 == e.which && index > 0 && index--,
                    40 == e.which && index < $items.length - 1 && index++,
                    ~index || (index = 0),
                    $items.eq(index).trigger("focus")
                }
            }
        }
    }
    ;
    var old = $.fn.dropdown;
    $.fn.dropdown = Plugin,
    $.fn.dropdown.Constructor = Dropdown,
    $.fn.dropdown.noConflict = function() {
        return $.fn.dropdown = old,
        this
    }
    ,
    $(document).on("click.bs.dropdown.data-api", clearMenus).on("click.bs.dropdown.data-api", ".dropdown form", function(e) {
        e.stopPropagation()
    }).on("click.bs.dropdown.data-api", toggle, Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api", toggle, Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api", ".dropdown-menu", Dropdown.prototype.keydown)
}(jQuery),
+function($) {
    "use strict";
    function Plugin(option, _relatedTarget) {
        return this.each(function() {
            var $this = $(this)
              , data = $this.data("bs.modal")
              , options = $.extend({}, Modal.DEFAULTS, $this.data(), "object" == typeof option && option);
            data || $this.data("bs.modal", data = new Modal(this,options)),
            "string" == typeof option ? data[option](_relatedTarget) : options.show && data.show(_relatedTarget)
        })
    }
    var Modal = function(element, options) {
        this.options = options,
        this.$body = $(document.body),
        this.$element = $(element),
        this.$dialog = this.$element.find(".modal-dialog"),
        this.$backdrop = null,
        this.isShown = null,
        this.originalBodyPad = null,
        this.scrollbarWidth = 0,
        this.ignoreBackdropClick = !1,
        this.options.remote && this.$element.find(".modal-content").load(this.options.remote, $.proxy(function() {
            this.$element.trigger("loaded.bs.modal")
        }, this))
    };
    Modal.VERSION = "3.3.5",
    Modal.TRANSITION_DURATION = 300,
    Modal.BACKDROP_TRANSITION_DURATION = 150,
    Modal.DEFAULTS = {
        backdrop: !0,
        keyboard: !0,
        show: !0
    },
    Modal.prototype.toggle = function(_relatedTarget) {
        return this.isShown ? this.hide() : this.show(_relatedTarget)
    }
    ,
    Modal.prototype.show = function(_relatedTarget) {
        var that = this
          , e = $.Event("show.bs.modal", {
            relatedTarget: _relatedTarget
        });
        this.$element.trigger(e),
        this.isShown || e.isDefaultPrevented() || (this.isShown = !0,
        this.checkScrollbar(),
        this.setScrollbar(),
        this.$body.addClass("modal-open"),
        this.escape(),
        this.resize(),
        this.$element.on("click.dismiss.bs.modal", '[data-dismiss="modal"]', $.proxy(this.hide, this)),
        this.$dialog.on("mousedown.dismiss.bs.modal", function() {
            that.$element.one("mouseup.dismiss.bs.modal", function(e) {
                $(e.target).is(that.$element) && (that.ignoreBackdropClick = !0)
            })
        }),
        this.backdrop(function() {
            var transition = $.support.transition && that.$element.hasClass("fade");
            that.$element.parent().length || that.$element.appendTo(that.$body),
            that.$element.show().scrollTop(0),
            that.adjustDialog(),
            transition && that.$element[0].offsetWidth,
            that.$element.addClass("in"),
            that.enforceFocus();
            var e = $.Event("shown.bs.modal", {
                relatedTarget: _relatedTarget
            });
            transition ? that.$dialog.one("bsTransitionEnd", function() {
                that.$element.trigger("focus").trigger(e)
            }).emulateTransitionEnd(Modal.TRANSITION_DURATION) : that.$element.trigger("focus").trigger(e)
        }))
    }
    ,
    Modal.prototype.hide = function(e) {
        e && e.preventDefault(),
        e = $.Event("hide.bs.modal"),
        this.$element.trigger(e),
        this.isShown && !e.isDefaultPrevented() && (this.isShown = !1,
        this.escape(),
        this.resize(),
        $(document).off("focusin.bs.modal"),
        this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),
        this.$dialog.off("mousedown.dismiss.bs.modal"),
        $.support.transition && this.$element.hasClass("fade") ? this.$element.one("bsTransitionEnd", $.proxy(this.hideModal, this)).emulateTransitionEnd(Modal.TRANSITION_DURATION) : this.hideModal())
    }
    ,
    Modal.prototype.enforceFocus = function() {
        $(document).off("focusin.bs.modal").on("focusin.bs.modal", $.proxy(function(e) {
            this.$element[0] === e.target || this.$element.has(e.target).length || this.$element.trigger("focus")
        }, this))
    }
    ,
    Modal.prototype.escape = function() {
        this.isShown && this.options.keyboard ? this.$element.on("keydown.dismiss.bs.modal", $.proxy(function(e) {
            27 == e.which && this.hide()
        }, this)) : this.isShown || this.$element.off("keydown.dismiss.bs.modal")
    }
    ,
    Modal.prototype.resize = function() {
        this.isShown ? $(window).on("resize.bs.modal", $.proxy(this.handleUpdate, this)) : $(window).off("resize.bs.modal")
    }
    ,
    Modal.prototype.hideModal = function() {
        var that = this;
        this.$element.hide(),
        this.backdrop(function() {
            that.$body.removeClass("modal-open"),
            that.resetAdjustments(),
            that.resetScrollbar(),
            that.$element.trigger("hidden.bs.modal")
        })
    }
    ,
    Modal.prototype.removeBackdrop = function() {
        this.$backdrop && this.$backdrop.remove(),
        this.$backdrop = null
    }
    ,
    Modal.prototype.backdrop = function(callback) {
        var that = this
          , animate = this.$element.hasClass("fade") ? "fade" : "";
        if (this.isShown && this.options.backdrop) {
            var doAnimate = $.support.transition && animate;
            if (this.$backdrop = $(document.createElement("div")).addClass("modal-backdrop " + animate).appendTo(this.$body),
            this.$element.on("click.dismiss.bs.modal", $.proxy(function(e) {
                return this.ignoreBackdropClick ? void (this.ignoreBackdropClick = !1) : void (e.target === e.currentTarget && ("static" == this.options.backdrop ? this.$element[0].focus() : this.hide()))
            }, this)),
            doAnimate && this.$backdrop[0].offsetWidth,
            this.$backdrop.addClass("in"),
            !callback)
                return;
            doAnimate ? this.$backdrop.one("bsTransitionEnd", callback).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) : callback()
        } else if (!this.isShown && this.$backdrop) {
            this.$backdrop.removeClass("in");
            var callbackRemove = function() {
                that.removeBackdrop(),
                callback && callback()
            };
            $.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one("bsTransitionEnd", callbackRemove).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) : callbackRemove()
        } else
            callback && callback()
    }
    ,
    Modal.prototype.handleUpdate = function() {
        this.adjustDialog()
    }
    ,
    Modal.prototype.adjustDialog = function() {
        var modalIsOverflowing = this.$element[0].scrollHeight > document.documentElement.clientHeight;
        this.$element.css({
            paddingLeft: !this.bodyIsOverflowing && modalIsOverflowing ? this.scrollbarWidth : "",
            paddingRight: this.bodyIsOverflowing && !modalIsOverflowing ? this.scrollbarWidth : ""
        })
    }
    ,
    Modal.prototype.resetAdjustments = function() {
        this.$element.css({
            paddingLeft: "",
            paddingRight: ""
        })
    }
    ,
    Modal.prototype.checkScrollbar = function() {
        var fullWindowWidth = window.innerWidth;
        if (!fullWindowWidth) {
            var documentElementRect = document.documentElement.getBoundingClientRect();
            fullWindowWidth = documentElementRect.right - Math.abs(documentElementRect.left)
        }
        this.bodyIsOverflowing = document.body.clientWidth < fullWindowWidth,
        this.scrollbarWidth = this.measureScrollbar()
    }
    ,
    Modal.prototype.setScrollbar = function() {
        var bodyPad = parseInt(this.$body.css("padding-right") || 0, 10);
        this.originalBodyPad = document.body.style.paddingRight || "",
        this.bodyIsOverflowing && this.$body.css("padding-right", bodyPad + this.scrollbarWidth)
    }
    ,
    Modal.prototype.resetScrollbar = function() {
        this.$body.css("padding-right", this.originalBodyPad)
    }
    ,
    Modal.prototype.measureScrollbar = function() {
        var scrollDiv = document.createElement("div");
        scrollDiv.className = "modal-scrollbar-measure",
        this.$body.append(scrollDiv);
        var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;
        return this.$body[0].removeChild(scrollDiv),
        scrollbarWidth
    }
    ;
    var old = $.fn.modal;
    $.fn.modal = Plugin,
    $.fn.modal.Constructor = Modal,
    $.fn.modal.noConflict = function() {
        return $.fn.modal = old,
        this
    }
    ,
    $(document).on("click.bs.modal.data-api", '[data-toggle="modal"]', function(e) {
        var $this = $(this)
          , href = $this.attr("href")
          , $target = $($this.attr("data-target") || href && href.replace(/.*(?=#[^\s]+$)/, ""))
          , option = $target.data("bs.modal") ? "toggle" : $.extend({
            remote: !/#/.test(href) && href
        }, $target.data(), $this.data());
        $this.is("a") && e.preventDefault(),
        $target.one("show.bs.modal", function(showEvent) {
            showEvent.isDefaultPrevented() || $target.one("hidden.bs.modal", function() {
                $this.is(":visible") && $this.trigger("focus")
            })
        }),
        Plugin.call($target, option, this)
    })
}(jQuery),
+function($) {
    "use strict";
    function Plugin(option) {
        return this.each(function() {
            var $this = $(this)
              , data = $this.data("bs.tooltip")
              , options = "object" == typeof option && option;
            !data && /destroy|hide/.test(option) || (data || $this.data("bs.tooltip", data = new Tooltip(this,options)),
            "string" == typeof option && data[option]())
        })
    }
    var Tooltip = function(element, options) {
        this.type = null,
        this.options = null,
        this.enabled = null,
        this.timeout = null,
        this.hoverState = null,
        this.$element = null,
        this.inState = null,
        this.init("tooltip", element, options)
    };
    Tooltip.VERSION = "3.3.5",
    Tooltip.TRANSITION_DURATION = 150,
    Tooltip.DEFAULTS = {
        animation: !0,
        placement: "top",
        selector: !1,
        template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
        trigger: "hover focus",
        title: "",
        delay: 0,
        html: !1,
        container: !1,
        viewport: {
            selector: "body",
            padding: 0
        }
    },
    Tooltip.prototype.init = function(type, element, options) {
        if (this.enabled = !0,
        this.type = type,
        this.$element = $(element),
        this.options = this.getOptions(options),
        this.$viewport = this.options.viewport && $($.isFunction(this.options.viewport) ? this.options.viewport.call(this, this.$element) : this.options.viewport.selector || this.options.viewport),
        this.inState = {
            click: !1,
            hover: !1,
            focus: !1
        },
        this.$element[0]instanceof document.constructor && !this.options.selector)
            throw new Error("`selector` option must be specified when initializing " + this.type + " on the window.document object!");
        for (var triggers = this.options.trigger.split(" "), i = triggers.length; i--; ) {
            var trigger = triggers[i];
            if ("click" == trigger)
                this.$element.on("click." + this.type, this.options.selector, $.proxy(this.toggle, this));
            else if ("manual" != trigger) {
                var eventIn = "hover" == trigger ? "mouseenter" : "focusin"
                  , eventOut = "hover" == trigger ? "mouseleave" : "focusout";
                this.$element.on(eventIn + "." + this.type, this.options.selector, $.proxy(this.enter, this)),
                this.$element.on(eventOut + "." + this.type, this.options.selector, $.proxy(this.leave, this))
            }
        }
        this.options.selector ? this._options = $.extend({}, this.options, {
            trigger: "manual",
            selector: ""
        }) : this.fixTitle()
    }
    ,
    Tooltip.prototype.getDefaults = function() {
        return Tooltip.DEFAULTS
    }
    ,
    Tooltip.prototype.getOptions = function(options) {
        return options = $.extend({}, this.getDefaults(), this.$element.data(), options),
        options.delay && "number" == typeof options.delay && (options.delay = {
            show: options.delay,
            hide: options.delay
        }),
        options
    }
    ,
    Tooltip.prototype.getDelegateOptions = function() {
        var options = {}
          , defaults = this.getDefaults();
        return this._options && $.each(this._options, function(key, value) {
            defaults[key] != value && (options[key] = value)
        }),
        options
    }
    ,
    Tooltip.prototype.enter = function(obj) {
        var self = obj instanceof this.constructor ? obj : $(obj.currentTarget).data("bs." + this.type);
        return self || (self = new this.constructor(obj.currentTarget,this.getDelegateOptions()),
        $(obj.currentTarget).data("bs." + this.type, self)),
        obj instanceof $.Event && (self.inState["focusin" == obj.type ? "focus" : "hover"] = !0),
        self.tip().hasClass("in") || "in" == self.hoverState ? void (self.hoverState = "in") : (clearTimeout(self.timeout),
        self.hoverState = "in",
        self.options.delay && self.options.delay.show ? void (self.timeout = setTimeout(function() {
            "in" == self.hoverState && self.show()
        }, self.options.delay.show)) : self.show())
    }
    ,
    Tooltip.prototype.isInStateTrue = function() {
        for (var key in this.inState)
            if (this.inState[key])
                return !0;
        return !1
    }
    ,
    Tooltip.prototype.leave = function(obj) {
        var self = obj instanceof this.constructor ? obj : $(obj.currentTarget).data("bs." + this.type);
        return self || (self = new this.constructor(obj.currentTarget,this.getDelegateOptions()),
        $(obj.currentTarget).data("bs." + this.type, self)),
        obj instanceof $.Event && (self.inState["focusout" == obj.type ? "focus" : "hover"] = !1),
        self.isInStateTrue() ? void 0 : (clearTimeout(self.timeout),
        self.hoverState = "out",
        self.options.delay && self.options.delay.hide ? void (self.timeout = setTimeout(function() {
            "out" == self.hoverState && self.hide()
        }, self.options.delay.hide)) : self.hide())
    }
    ,
    Tooltip.prototype.show = function() {
        var e = $.Event("show.bs." + this.type);
        if (this.hasContent() && this.enabled) {
            this.$element.trigger(e);
            var inDom = $.contains(this.$element[0].ownerDocument.documentElement, this.$element[0]);
            if (e.isDefaultPrevented() || !inDom)
                return;
            var that = this
              , $tip = this.tip()
              , tipId = this.getUID(this.type);
            this.setContent(),
            $tip.attr("id", tipId),
            this.$element.attr("aria-describedby", tipId),
            this.options.animation && $tip.addClass("fade");
            var placement = "function" == typeof this.options.placement ? this.options.placement.call(this, $tip[0], this.$element[0]) : this.options.placement
              , autoToken = /\s?auto?\s?/i
              , autoPlace = autoToken.test(placement);
            autoPlace && (placement = placement.replace(autoToken, "") || "top"),
            $tip.detach().css({
                top: 0,
                left: 0,
                display: "block"
            }).addClass(placement).data("bs." + this.type, this),
            this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element),
            this.$element.trigger("inserted.bs." + this.type);
            var pos = this.getPosition()
              , actualWidth = $tip[0].offsetWidth
              , actualHeight = $tip[0].offsetHeight;
            if (autoPlace) {
                var orgPlacement = placement
                  , viewportDim = this.getPosition(this.$viewport);
                placement = "bottom" == placement && pos.bottom + actualHeight > viewportDim.bottom ? "top" : "top" == placement && pos.top - actualHeight < viewportDim.top ? "bottom" : "right" == placement && pos.right + actualWidth > viewportDim.width ? "left" : "left" == placement && pos.left - actualWidth < viewportDim.left ? "right" : placement,
                $tip.removeClass(orgPlacement).addClass(placement)
            }
            var calculatedOffset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight);
            this.applyPlacement(calculatedOffset, placement);
            var complete = function() {
                var prevHoverState = that.hoverState;
                that.$element.trigger("shown.bs." + that.type),
                that.hoverState = null,
                "out" == prevHoverState && that.leave(that)
            };
            $.support.transition && this.$tip.hasClass("fade") ? $tip.one("bsTransitionEnd", complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION) : complete()
        }
    }
    ,
    Tooltip.prototype.applyPlacement = function(offset, placement) {
        var $tip = this.tip()
          , width = $tip[0].offsetWidth
          , height = $tip[0].offsetHeight
          , marginTop = parseInt($tip.css("margin-top"), 10)
          , marginLeft = parseInt($tip.css("margin-left"), 10);
        isNaN(marginTop) && (marginTop = 0),
        isNaN(marginLeft) && (marginLeft = 0),
        offset.top += marginTop,
        offset.left += marginLeft,
        $.offset.setOffset($tip[0], $.extend({
            using: function(props) {
                $tip.css({
                    top: Math.round(props.top),
                    left: Math.round(props.left)
                })
            }
        }, offset), 0),
        $tip.addClass("in");
        var actualWidth = $tip[0].offsetWidth
          , actualHeight = $tip[0].offsetHeight;
        "top" == placement && actualHeight != height && (offset.top = offset.top + height - actualHeight);
        var delta = this.getViewportAdjustedDelta(placement, offset, actualWidth, actualHeight);
        delta.left ? offset.left += delta.left : offset.top += delta.top;
        var isVertical = /top|bottom/.test(placement)
          , arrowDelta = isVertical ? 2 * delta.left - width + actualWidth : 2 * delta.top - height + actualHeight
          , arrowOffsetPosition = isVertical ? "offsetWidth" : "offsetHeight";
        $tip.offset(offset),
        this.replaceArrow(arrowDelta, $tip[0][arrowOffsetPosition], isVertical)
    }
    ,
    Tooltip.prototype.replaceArrow = function(delta, dimension, isVertical) {
        this.arrow().css(isVertical ? "left" : "top", 50 * (1 - delta / dimension) + "%").css(isVertical ? "top" : "left", "")
    }
    ,
    Tooltip.prototype.setContent = function() {
        var $tip = this.tip()
          , title = this.getTitle();
        $tip.find(".tooltip-inner")[this.options.html ? "html" : "text"](title),
        $tip.removeClass("fade in top bottom left right")
    }
    ,
    Tooltip.prototype.hide = function(callback) {
        function complete() {
            "in" != that.hoverState && $tip.detach(),
            that.$element.removeAttr("aria-describedby").trigger("hidden.bs." + that.type),
            callback && callback()
        }
        var that = this
          , $tip = $(this.$tip)
          , e = $.Event("hide.bs." + this.type);
        return this.$element.trigger(e),
        e.isDefaultPrevented() ? void 0 : ($tip.removeClass("in"),
        $.support.transition && $tip.hasClass("fade") ? $tip.one("bsTransitionEnd", complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION) : complete(),
        this.hoverState = null,
        this)
    }
    ,
    Tooltip.prototype.fixTitle = function() {
        var $e = this.$element;
        ($e.attr("title") || "string" != typeof $e.attr("data-original-title")) && $e.attr("data-original-title", $e.attr("title") || "").attr("title", "")
    }
    ,
    Tooltip.prototype.hasContent = function() {
        return this.getTitle()
    }
    ,
    Tooltip.prototype.getPosition = function($element) {
        $element = $element || this.$element;
        var el = $element[0]
          , isBody = "BODY" == el.tagName
          , elRect = el.getBoundingClientRect();
        null == elRect.width && (elRect = $.extend({}, elRect, {
            width: elRect.right - elRect.left,
            height: elRect.bottom - elRect.top
        }));
        var elOffset = isBody ? {
            top: 0,
            left: 0
        } : $element.offset()
          , scroll = {
            scroll: isBody ? document.documentElement.scrollTop || document.body.scrollTop : $element.scrollTop()
        }
          , outerDims = isBody ? {
            width: $(window).width(),
            height: $(window).height()
        } : null;
        return $.extend({}, elRect, scroll, outerDims, elOffset)
    }
    ,
    Tooltip.prototype.getCalculatedOffset = function(placement, pos, actualWidth, actualHeight) {
        return "bottom" == placement ? {
            top: pos.top + pos.height,
            left: pos.left + pos.width / 2 - actualWidth / 2
        } : "top" == placement ? {
            top: pos.top - actualHeight,
            left: pos.left + pos.width / 2 - actualWidth / 2
        } : "left" == placement ? {
            top: pos.top + pos.height / 2 - actualHeight / 2,
            left: pos.left - actualWidth
        } : {
            top: pos.top + pos.height / 2 - actualHeight / 2,
            left: pos.left + pos.width
        }
    }
    ,
    Tooltip.prototype.getViewportAdjustedDelta = function(placement, pos, actualWidth, actualHeight) {
        var delta = {
            top: 0,
            left: 0
        };
        if (!this.$viewport)
            return delta;
        var viewportPadding = this.options.viewport && this.options.viewport.padding || 0
          , viewportDimensions = this.getPosition(this.$viewport);
        if (/right|left/.test(placement)) {
            var topEdgeOffset = pos.top - viewportPadding - viewportDimensions.scroll
              , bottomEdgeOffset = pos.top + viewportPadding - viewportDimensions.scroll + actualHeight;
            topEdgeOffset < viewportDimensions.top ? delta.top = viewportDimensions.top - topEdgeOffset : bottomEdgeOffset > viewportDimensions.top + viewportDimensions.height && (delta.top = viewportDimensions.top + viewportDimensions.height - bottomEdgeOffset)
        } else {
            var leftEdgeOffset = pos.left - viewportPadding
              , rightEdgeOffset = pos.left + viewportPadding + actualWidth;
            leftEdgeOffset < viewportDimensions.left ? delta.left = viewportDimensions.left - leftEdgeOffset : rightEdgeOffset > viewportDimensions.right && (delta.left = viewportDimensions.left + viewportDimensions.width - rightEdgeOffset)
        }
        return delta
    }
    ,
    Tooltip.prototype.getTitle = function() {
        var title, $e = this.$element, o = this.options;
        return title = $e.attr("data-original-title") || ("function" == typeof o.title ? o.title.call($e[0]) : o.title)
    }
    ,
    Tooltip.prototype.getUID = function(prefix) {
        do
            prefix += ~~(1e6 * Math.random());
        while (document.getElementById(prefix));
        return prefix
    }
    ,
    Tooltip.prototype.tip = function() {
        if (!this.$tip && (this.$tip = $(this.options.template),
        1 != this.$tip.length))
            throw new Error(this.type + " `template` option must consist of exactly 1 top-level element!");
        return this.$tip
    }
    ,
    Tooltip.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow")
    }
    ,
    Tooltip.prototype.enable = function() {
        this.enabled = !0
    }
    ,
    Tooltip.prototype.disable = function() {
        this.enabled = !1
    }
    ,
    Tooltip.prototype.toggleEnabled = function() {
        this.enabled = !this.enabled
    }
    ,
    Tooltip.prototype.toggle = function(e) {
        var self = this;
        e && (self = $(e.currentTarget).data("bs." + this.type),
        self || (self = new this.constructor(e.currentTarget,this.getDelegateOptions()),
        $(e.currentTarget).data("bs." + this.type, self))),
        e ? (self.inState.click = !self.inState.click,
        self.isInStateTrue() ? self.enter(self) : self.leave(self)) : self.tip().hasClass("in") ? self.leave(self) : self.enter(self)
    }
    ,
    Tooltip.prototype.destroy = function() {
        var that = this;
        clearTimeout(this.timeout),
        this.hide(function() {
            that.$element.off("." + that.type).removeData("bs." + that.type),
            that.$tip && that.$tip.detach(),
            that.$tip = null,
            that.$arrow = null,
            that.$viewport = null
        })
    }
    ;
    var old = $.fn.tooltip;
    $.fn.tooltip = Plugin,
    $.fn.tooltip.Constructor = Tooltip,
    $.fn.tooltip.noConflict = function() {
        return $.fn.tooltip = old,
        this
    }
}(jQuery),
+function($) {
    "use strict";
    function Plugin(option) {
        return this.each(function() {
            var $this = $(this)
              , data = $this.data("bs.popover")
              , options = "object" == typeof option && option;
            !data && /destroy|hide/.test(option) || (data || $this.data("bs.popover", data = new Popover(this,options)),
            "string" == typeof option && data[option]())
        })
    }
    var Popover = function(element, options) {
        this.init("popover", element, options)
    };
    if (!$.fn.tooltip)
        throw new Error("Popover requires tooltip.js");
    Popover.VERSION = "3.3.5",
    Popover.DEFAULTS = $.extend({}, $.fn.tooltip.Constructor.DEFAULTS, {
        placement: "right",
        trigger: "click",
        content: "",
        template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
    }),
    Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype),
    Popover.prototype.constructor = Popover,
    Popover.prototype.getDefaults = function() {
        return Popover.DEFAULTS
    }
    ,
    Popover.prototype.setContent = function() {
        var $tip = this.tip()
          , title = this.getTitle()
          , content = this.getContent();
        $tip.find(".popover-title")[this.options.html ? "html" : "text"](title),
        $tip.find(".popover-content").children().detach().end()[this.options.html ? "string" == typeof content ? "html" : "append" : "text"](content),
        $tip.removeClass("fade top bottom left right in"),
        $tip.find(".popover-title").html() || $tip.find(".popover-title").hide()
    }
    ,
    Popover.prototype.hasContent = function() {
        return this.getTitle() || this.getContent()
    }
    ,
    Popover.prototype.getContent = function() {
        var $e = this.$element
          , o = this.options;
        return $e.attr("data-content") || ("function" == typeof o.content ? o.content.call($e[0]) : o.content)
    }
    ,
    Popover.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".arrow")
    }
    ;
    var old = $.fn.popover;
    $.fn.popover = Plugin,
    $.fn.popover.Constructor = Popover,
    $.fn.popover.noConflict = function() {
        return $.fn.popover = old,
        this
    }
}(jQuery),
+function($) {
    "use strict";
    function ScrollSpy(element, options) {
        this.$body = $(document.body),
        this.$scrollElement = $($(element).is(document.body) ? window : element),
        this.options = $.extend({}, ScrollSpy.DEFAULTS, options),
        this.selector = (this.options.target || "") + " .nav li > a",
        this.offsets = [],
        this.targets = [],
        this.activeTarget = null,
        this.scrollHeight = 0,
        this.$scrollElement.on("scroll.bs.scrollspy", $.proxy(this.process, this)),
        this.refresh(),
        this.process()
    }
    function Plugin(option) {
        return this.each(function() {
            var $this = $(this)
              , data = $this.data("bs.scrollspy")
              , options = "object" == typeof option && option;
            data || $this.data("bs.scrollspy", data = new ScrollSpy(this,options)),
            "string" == typeof option && data[option]()
        })
    }
    ScrollSpy.VERSION = "3.3.5",
    ScrollSpy.DEFAULTS = {
        offset: 10
    },
    ScrollSpy.prototype.getScrollHeight = function() {
        return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
    }
    ,
    ScrollSpy.prototype.refresh = function() {
        var that = this
          , offsetMethod = "offset"
          , offsetBase = 0;
        this.offsets = [],
        this.targets = [],
        this.scrollHeight = this.getScrollHeight(),
        $.isWindow(this.$scrollElement[0]) || (offsetMethod = "position",
        offsetBase = this.$scrollElement.scrollTop()),
        this.$body.find(this.selector).map(function() {
            var $el = $(this)
              , href = $el.data("target") || $el.attr("href")
              , $href = /^#./.test(href) && $(href);
            return $href && $href.length && $href.is(":visible") && [[$href[offsetMethod]().top + offsetBase, href]] || null
        }).sort(function(a, b) {
            return a[0] - b[0]
        }).each(function() {
            that.offsets.push(this[0]),
            that.targets.push(this[1])
        })
    }
    ,
    ScrollSpy.prototype.process = function() {
        var i, scrollTop = this.$scrollElement.scrollTop() + this.options.offset, scrollHeight = this.getScrollHeight(), maxScroll = this.options.offset + scrollHeight - this.$scrollElement.height(), offsets = this.offsets, targets = this.targets, activeTarget = this.activeTarget;
        if (this.scrollHeight != scrollHeight && this.refresh(),
        scrollTop >= maxScroll)
            return activeTarget != (i = targets[targets.length - 1]) && this.activate(i);
        if (activeTarget && scrollTop < offsets[0])
            return this.activeTarget = null,
            this.clear();
        for (i = offsets.length; i--; )
            activeTarget != targets[i] && scrollTop >= offsets[i] && (void 0 === offsets[i + 1] || scrollTop < offsets[i + 1]) && this.activate(targets[i])
    }
    ,
    ScrollSpy.prototype.activate = function(target) {
        this.activeTarget = target,
        this.clear();
        var selector = this.selector + '[data-target="' + target + '"],' + this.selector + '[href="' + target + '"]'
          , active = $(selector).parents("li").addClass("active");
        active.parent(".dropdown-menu").length && (active = active.closest("li.dropdown").addClass("active")),
        active.trigger("activate.bs.scrollspy")
    }
    ,
    ScrollSpy.prototype.clear = function() {
        $(this.selector).parentsUntil(this.options.target, ".active").removeClass("active")
    }
    ;
    var old = $.fn.scrollspy;
    $.fn.scrollspy = Plugin,
    $.fn.scrollspy.Constructor = ScrollSpy,
    $.fn.scrollspy.noConflict = function() {
        return $.fn.scrollspy = old,
        this
    }
    ,
    $(window).on("load.bs.scrollspy.data-api", function() {
        $('[data-spy="scroll"]').each(function() {
            var $spy = $(this);
            Plugin.call($spy, $spy.data())
        })
    })
}(jQuery),
+function($) {
    "use strict";
    function Plugin(option) {
        return this.each(function() {
            var $this = $(this)
              , data = $this.data("bs.tab");
            data || $this.data("bs.tab", data = new Tab(this)),
            "string" == typeof option && data[option]()
        })
    }
    var Tab = function(element) {
        this.element = $(element)
    };
    Tab.VERSION = "3.3.5",
    Tab.TRANSITION_DURATION = 150,
    Tab.prototype.show = function() {
        var $this = this.element
          , $ul = $this.closest("ul:not(.dropdown-menu)")
          , selector = $this.data("target");
        if (selector || (selector = $this.attr("href"),
        selector = selector && selector.replace(/.*(?=#[^\s]*$)/, "")),
        !$this.parent("li").hasClass("active")) {
            var $previous = $ul.find(".active:last a")
              , hideEvent = $.Event("hide.bs.tab", {
                relatedTarget: $this[0]
            })
              , showEvent = $.Event("show.bs.tab", {
                relatedTarget: $previous[0]
            });
            if ($previous.trigger(hideEvent),
            $this.trigger(showEvent),
            !showEvent.isDefaultPrevented() && !hideEvent.isDefaultPrevented()) {
                var $target = $(selector);
                this.activate($this.closest("li"), $ul),
                this.activate($target, $target.parent(), function() {
                    $previous.trigger({
                        type: "hidden.bs.tab",
                        relatedTarget: $this[0]
                    }),
                    $this.trigger({
                        type: "shown.bs.tab",
                        relatedTarget: $previous[0]
                    })
                })
            }
        }
    }
    ,
    Tab.prototype.activate = function(element, container, callback) {
        function next() {
            $active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded", !1),
            element.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded", !0),
            transition ? (element[0].offsetWidth,
            element.addClass("in")) : element.removeClass("fade"),
            element.parent(".dropdown-menu").length && element.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded", !0),
            callback && callback()
        }
        var $active = container.find("> .active")
          , transition = callback && $.support.transition && ($active.length && $active.hasClass("fade") || !!container.find("> .fade").length);
        $active.length && transition ? $active.one("bsTransitionEnd", next).emulateTransitionEnd(Tab.TRANSITION_DURATION) : next(),
        $active.removeClass("in")
    }
    ;
    var old = $.fn.tab;
    $.fn.tab = Plugin,
    $.fn.tab.Constructor = Tab,
    $.fn.tab.noConflict = function() {
        return $.fn.tab = old,
        this
    }
    ;
    var clickHandler = function(e) {
        e.preventDefault(),
        Plugin.call($(this), "show")
    };
    $(document).on("click.bs.tab.data-api", '[data-toggle="tab"]', clickHandler).on("click.bs.tab.data-api", '[data-toggle="pill"]', clickHandler)
}(jQuery),
+function($) {
    "use strict";
    function Plugin(option) {
        return this.each(function() {
            var $this = $(this)
              , data = $this.data("bs.affix")
              , options = "object" == typeof option && option;
            data || $this.data("bs.affix", data = new Affix(this,options)),
            "string" == typeof option && data[option]()
        })
    }
    var Affix = function(element, options) {
        this.options = $.extend({}, Affix.DEFAULTS, options),
        this.$target = $(this.options.target).on("scroll.bs.affix.data-api", $.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", $.proxy(this.checkPositionWithEventLoop, this)),
        this.$element = $(element),
        this.affixed = null,
        this.unpin = null,
        this.pinnedOffset = null,
        this.checkPosition()
    };
    Affix.VERSION = "3.3.5",
    Affix.RESET = "affix affix-top affix-bottom",
    Affix.DEFAULTS = {
        offset: 0,
        target: window
    },
    Affix.prototype.getState = function(scrollHeight, height, offsetTop, offsetBottom) {
        var scrollTop = this.$target.scrollTop()
          , position = this.$element.offset()
          , targetHeight = this.$target.height();
        if (null != offsetTop && "top" == this.affixed)
            return offsetTop > scrollTop ? "top" : !1;
        if ("bottom" == this.affixed)
            return null != offsetTop ? scrollTop + this.unpin <= position.top ? !1 : "bottom" : scrollHeight - offsetBottom >= scrollTop + targetHeight ? !1 : "bottom";
        var initializing = null == this.affixed
          , colliderTop = initializing ? scrollTop : position.top
          , colliderHeight = initializing ? targetHeight : height;
        return null != offsetTop && offsetTop >= scrollTop ? "top" : null != offsetBottom && colliderTop + colliderHeight >= scrollHeight - offsetBottom ? "bottom" : !1
    }
    ,
    Affix.prototype.getPinnedOffset = function() {
        if (this.pinnedOffset)
            return this.pinnedOffset;
        this.$element.removeClass(Affix.RESET).addClass("affix");
        var scrollTop = this.$target.scrollTop()
          , position = this.$element.offset();
        return this.pinnedOffset = position.top - scrollTop
    }
    ,
    Affix.prototype.checkPositionWithEventLoop = function() {
        setTimeout($.proxy(this.checkPosition, this), 1)
    }
    ,
    Affix.prototype.checkPosition = function() {
        if (this.$element.is(":visible")) {
            var height = this.$element.height()
              , offset = this.options.offset
              , offsetTop = offset.top
              , offsetBottom = offset.bottom
              , scrollHeight = Math.max($(document).height(), $(document.body).height());
            "object" != typeof offset && (offsetBottom = offsetTop = offset),
            "function" == typeof offsetTop && (offsetTop = offset.top(this.$element)),
            "function" == typeof offsetBottom && (offsetBottom = offset.bottom(this.$element));
            var affix = this.getState(scrollHeight, height, offsetTop, offsetBottom);
            if (this.affixed != affix) {
                null != this.unpin && this.$element.css("top", "");
                var affixType = "affix" + (affix ? "-" + affix : "")
                  , e = $.Event(affixType + ".bs.affix");
                if (this.$element.trigger(e),
                e.isDefaultPrevented())
                    return;
                this.affixed = affix,
                this.unpin = "bottom" == affix ? this.getPinnedOffset() : null,
                this.$element.removeClass(Affix.RESET).addClass(affixType).trigger(affixType.replace("affix", "affixed") + ".bs.affix")
            }
            "bottom" == affix && this.$element.offset({
                top: scrollHeight - height - offsetBottom
            })
        }
    }
    ;
    var old = $.fn.affix;
    $.fn.affix = Plugin,
    $.fn.affix.Constructor = Affix,
    $.fn.affix.noConflict = function() {
        return $.fn.affix = old,
        this
    }
    ,
    $(window).on("load", function() {
        $('[data-spy="affix"]').each(function() {
            var $spy = $(this)
              , data = $spy.data();
            data.offset = data.offset || {},
            null != data.offsetBottom && (data.offset.bottom = data.offsetBottom),
            null != data.offsetTop && (data.offset.top = data.offsetTop),
            Plugin.call($spy, data)
        })
    })
}(jQuery),
function($, undefined) {
    "use strict";
    $.rails !== undefined && $.error("jquery-ujs has already been loaded!");
    var rails, $document = $(document);
    $.rails = rails = {
        linkClickSelector: "a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",
        buttonClickSelector: "button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",
        inputChangeSelector: "select[data-remote], input[data-remote], textarea[data-remote]",
        formSubmitSelector: "form",
        formInputClickSelector: "form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",
        disableSelector: "input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",
        enableSelector: "input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",
        requiredInputSelector: "input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",
        fileInputSelector: "input[name][type=file]:not([disabled])",
        linkDisableSelector: "a[data-disable-with], a[data-disable]",
        buttonDisableSelector: "button[data-remote][data-disable-with], button[data-remote][data-disable]",
        csrfToken: function() {
            return $("meta[name=csrf-token]").attr("content")
        },
        csrfParam: function() {
            return $("meta[name=csrf-param]").attr("content")
        },
        CSRFProtection: function(xhr) {
            var token = rails.csrfToken();
            token && xhr.setRequestHeader("X-CSRF-Token", token)
        },
        refreshCSRFTokens: function() {
            $('form input[name="' + rails.csrfParam() + '"]').val(rails.csrfToken())
        },
        fire: function(obj, name, data) {
            var event = $.Event(name);
            return obj.trigger(event, data),
            event.result !== !1
        },
        confirm: function(message) {
            return confirm(message)
        },
        ajax: function(options) {
            return $.ajax(options)
        },
        href: function(element) {
            return element[0].href
        },
        isRemote: function(element) {
            return element.data("remote") !== undefined && element.data("remote") !== !1
        },
        handleRemote: function(element) {
            var method, url, data, withCredentials, dataType, options;
            if (rails.fire(element, "ajax:before")) {
                if (withCredentials = element.data("with-credentials") || null,
                dataType = element.data("type") || $.ajaxSettings && $.ajaxSettings.dataType,
                element.is("form")) {
                    method = element.data("ujs:submit-button-formmethod") || element.attr("method"),
                    url = element.data("ujs:submit-button-formaction") || element.attr("action"),
                    data = $(element[0]).serializeArray();
                    var button = element.data("ujs:submit-button");
                    button && (data.push(button),
                    element.data("ujs:submit-button", null)),
                    element.data("ujs:submit-button-formmethod", null),
                    element.data("ujs:submit-button-formaction", null)
                } else
                    element.is(rails.inputChangeSelector) ? (method = element.data("method"),
                    url = element.data("url"),
                    data = element.serialize(),
                    element.data("params") && (data = data + "&" + element.data("params"))) : element.is(rails.buttonClickSelector) ? (method = element.data("method") || "get",
                    url = element.data("url"),
                    data = element.serialize(),
                    element.data("params") && (data = data + "&" + element.data("params"))) : (method = element.data("method"),
                    url = rails.href(element),
                    data = element.data("params") || null);
                return options = {
                    type: method || "GET",
                    data: data,
                    dataType: dataType,
                    beforeSend: function(xhr, settings) {
                        return settings.dataType === undefined && xhr.setRequestHeader("accept", "*/*;q=0.5, " + settings.accepts.script),
                        rails.fire(element, "ajax:beforeSend", [xhr, settings]) ? void element.trigger("ajax:send", xhr) : !1
                    },
                    success: function(data, status, xhr) {
                        element.trigger("ajax:success", [data, status, xhr])
                    },
                    complete: function(xhr, status) {
                        element.trigger("ajax:complete", [xhr, status])
                    },
                    error: function(xhr, status, error) {
                        element.trigger("ajax:error", [xhr, status, error])
                    },
                    crossDomain: rails.isCrossDomain(url)
                },
                withCredentials && (options.xhrFields = {
                    withCredentials: withCredentials
                }),
                url && (options.url = url),
                rails.ajax(options)
            }
            return !1
        },
        isCrossDomain: function(url) {
            var originAnchor = document.createElement("a");
            originAnchor.href = location.href;
            var urlAnchor = document.createElement("a");
            try {
                return urlAnchor.href = url,
                urlAnchor.href = urlAnchor.href,
                !((!urlAnchor.protocol || ":" === urlAnchor.protocol) && !urlAnchor.host || originAnchor.protocol + "//" + originAnchor.host == urlAnchor.protocol + "//" + urlAnchor.host)
            } catch (e) {
                return !0
            }
        },
        handleMethod: function(link) {
            var href = rails.href(link)
              , method = link.data("method")
              , target = link.attr("target")
              , csrfToken = rails.csrfToken()
              , csrfParam = rails.csrfParam()
              , form = $('<form method="post" action="' + href + '"></form>')
              , metadataInput = '<input name="_method" value="' + method + '" type="hidden" />';
            csrfParam === undefined || csrfToken === undefined || rails.isCrossDomain(href) || (metadataInput += '<input name="' + csrfParam + '" value="' + csrfToken + '" type="hidden" />'),
            target && form.attr("target", target),
            form.hide().append(metadataInput).appendTo("body"),
            form.submit()
        },
        formElements: function(form, selector) {
            return form.is("form") ? $(form[0].elements).filter(selector) : form.find(selector)
        },
        disableFormElements: function(form) {
            rails.formElements(form, rails.disableSelector).each(function() {
                rails.disableFormElement($(this))
            })
        },
        disableFormElement: function(element) {
            var method, replacement;
            method = element.is("button") ? "html" : "val",
            replacement = element.data("disable-with"),
            replacement !== undefined && (element.data("ujs:enable-with", element[method]()),
            element[method](replacement)),
            element.prop("disabled", !0),
            element.data("ujs:disabled", !0)
        },
        enableFormElements: function(form) {
            rails.formElements(form, rails.enableSelector).each(function() {
                rails.enableFormElement($(this))
            })
        },
        enableFormElement: function(element) {
            var method = element.is("button") ? "html" : "val";
            element.data("ujs:enable-with") !== undefined && (element[method](element.data("ujs:enable-with")),
            element.removeData("ujs:enable-with")),
            element.prop("disabled", !1),
            element.removeData("ujs:disabled")
        },
        allowAction: function(element) {
            var callback, message = element.data("confirm"), answer = !1;
            if (!message)
                return !0;
            if (rails.fire(element, "confirm")) {
                try {
                    answer = rails.confirm(message)
                } catch (e) {
                    (console.error || console.log).call(console, e.stack || e)
                }
                callback = rails.fire(element, "confirm:complete", [answer])
            }
            return answer && callback
        },
        blankInputs: function(form, specifiedSelector, nonBlank) {
            var input, valueToCheck, radiosForNameWithNoneSelected, radioName, foundInputs = $(), selector = specifiedSelector || "input,textarea", requiredInputs = form.find(selector), checkedRadioButtonNames = {};
            return requiredInputs.each(function() {
                input = $(this),
                input.is("input[type=radio]") ? (radioName = input.attr("name"),
                checkedRadioButtonNames[radioName] || (0 === form.find('input[type=radio]:checked[name="' + radioName + '"]').length && (radiosForNameWithNoneSelected = form.find('input[type=radio][name="' + radioName + '"]'),
                foundInputs = foundInputs.add(radiosForNameWithNoneSelected)),
                checkedRadioButtonNames[radioName] = radioName)) : (valueToCheck = input.is("input[type=checkbox],input[type=radio]") ? input.is(":checked") : !!input.val(),
                valueToCheck === nonBlank && (foundInputs = foundInputs.add(input)))
            }),
            foundInputs.length ? foundInputs : !1
        },
        nonBlankInputs: function(form, specifiedSelector) {
            return rails.blankInputs(form, specifiedSelector, !0)
        },
        stopEverything: function(e) {
            return $(e.target).trigger("ujs:everythingStopped"),
            e.stopImmediatePropagation(),
            !1
        },
        disableElement: function(element) {
            var replacement = element.data("disable-with");
            replacement !== undefined && (element.data("ujs:enable-with", element.html()),
            element.html(replacement)),
            element.bind("click.railsDisable", function(e) {
                return rails.stopEverything(e)
            }),
            element.data("ujs:disabled", !0)
        },
        enableElement: function(element) {
            element.data("ujs:enable-with") !== undefined && (element.html(element.data("ujs:enable-with")),
            element.removeData("ujs:enable-with")),
            element.unbind("click.railsDisable"),
            element.removeData("ujs:disabled")
        }
    },
    rails.fire($document, "rails:attachBindings") && ($.ajaxPrefilter(function(options, originalOptions, xhr) {
        options.crossDomain || rails.CSRFProtection(xhr)
    }),
    $(window).on("pageshow.rails", function() {
        $($.rails.enableSelector).each(function() {
            var element = $(this);
            element.data("ujs:disabled") && $.rails.enableFormElement(element)
        }),
        $($.rails.linkDisableSelector).each(function() {
            var element = $(this);
            element.data("ujs:disabled") && $.rails.enableElement(element)
        })
    }),
    $document.on("ajax:complete", rails.linkDisableSelector, function() {
        rails.enableElement($(this))
    }),
    $document.on("ajax:complete", rails.buttonDisableSelector, function() {
        rails.enableFormElement($(this))
    }),
    $document.on("click.rails", rails.linkClickSelector, function(e) {
        var link = $(this)
          , method = link.data("method")
          , data = link.data("params")
          , metaClick = e.metaKey || e.ctrlKey;
        if (!rails.allowAction(link))
            return rails.stopEverything(e);
        if (!metaClick && link.is(rails.linkDisableSelector) && rails.disableElement(link),
        rails.isRemote(link)) {
            if (metaClick && (!method || "GET" === method) && !data)
                return !0;
            var handleRemote = rails.handleRemote(link);
            return handleRemote === !1 ? rails.enableElement(link) : handleRemote.fail(function() {
                rails.enableElement(link)
            }),
            !1
        }
        return method ? (rails.handleMethod(link),
        !1) : void 0
    }),
    $document.on("click.rails", rails.buttonClickSelector, function(e) {
        var button = $(this);
        if (!rails.allowAction(button) || !rails.isRemote(button))
            return rails.stopEverything(e);
        button.is(rails.buttonDisableSelector) && rails.disableFormElement(button);
        var handleRemote = rails.handleRemote(button);
        return handleRemote === !1 ? rails.enableFormElement(button) : handleRemote.fail(function() {
            rails.enableFormElement(button)
        }),
        !1
    }),
    $document.on("change.rails", rails.inputChangeSelector, function(e) {
        var link = $(this);
        return rails.allowAction(link) && rails.isRemote(link) ? (rails.handleRemote(link),
        !1) : rails.stopEverything(e)
    }),
    $document.on("submit.rails", rails.formSubmitSelector, function(e) {
        var blankRequiredInputs, nonBlankFileInputs, form = $(this), remote = rails.isRemote(form);
        if (!rails.allowAction(form))
            return rails.stopEverything(e);
        if (form.attr("novalidate") === undefined)
            if (form.data("ujs:formnovalidate-button") === undefined) {
                if (blankRequiredInputs = rails.blankInputs(form, rails.requiredInputSelector, !1),
                blankRequiredInputs && rails.fire(form, "ajax:aborted:required", [blankRequiredInputs]))
                    return rails.stopEverything(e)
            } else
                form.data("ujs:formnovalidate-button", undefined);
        if (remote) {
            if (nonBlankFileInputs = rails.nonBlankInputs(form, rails.fileInputSelector)) {
                setTimeout(function() {
                    rails.disableFormElements(form)
                }, 13);
                var aborted = rails.fire(form, "ajax:aborted:file", [nonBlankFileInputs]);
                return aborted || setTimeout(function() {
                    rails.enableFormElements(form)
                }, 13),
                aborted
            }
            return rails.handleRemote(form),
            !1
        }
        setTimeout(function() {
            rails.disableFormElements(form)
        }, 13)
    }),
    $document.on("click.rails", rails.formInputClickSelector, function(event) {
        var button = $(this);
        if (!rails.allowAction(button))
            return rails.stopEverything(event);
        var name = button.attr("name")
          , data = name ? {
            name: name,
            value: button.val()
        } : null
          , form = button.closest("form");
        0 === form.length && (form = $("#" + button.attr("form"))),
        form.data("ujs:submit-button", data),
        form.data("ujs:formnovalidate-button", button.attr("formnovalidate")),
        form.data("ujs:submit-button-formaction", button.attr("formaction")),
        form.data("ujs:submit-button-formmethod", button.attr("formmethod"))
    }),
    $document.on("ajax:send.rails", rails.formSubmitSelector, function(event) {
        this === event.target && rails.disableFormElements($(this))
    }),
    $document.on("ajax:complete.rails", rails.formSubmitSelector, function(event) {
        this === event.target && rails.enableFormElements($(this))
    }),
    $(function() {
        rails.refreshCSRFTokens()
    }))
}(jQuery),
function(factory) {
    "function" == typeof define && define.amd ? define(["jquery"], factory) : factory("object" == typeof exports ? require("jquery") : jQuery)
}(function(jQuery) {
    var S2 = function() {
        if (jQuery && jQuery.fn && jQuery.fn.select2 && jQuery.fn.select2.amd)
            var S2 = jQuery.fn.select2.amd;
        var S2;
        return function() {
            if (!S2 || !S2.requirejs) {
                S2 ? require = S2 : S2 = {};
                var requirejs, require, define;
                !function(undef) {
                    function hasProp(obj, prop) {
                        return hasOwn.call(obj, prop)
                    }
                    function normalize(name, baseName) {
                        var nameParts, nameSegment, mapValue, foundMap, lastIndex, foundI, foundStarMap, starI, i, j, part, baseParts = baseName && baseName.split("/"), map = config.map, starMap = map && map["*"] || {};
                        if (name && "." === name.charAt(0))
                            if (baseName) {
                                for (name = name.split("/"),
                                lastIndex = name.length - 1,
                                config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex]) && (name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, "")),
                                name = baseParts.slice(0, baseParts.length - 1).concat(name),
                                i = 0; i < name.length; i += 1)
                                    if (part = name[i],
                                    "." === part)
                                        name.splice(i, 1),
                                        i -= 1;
                                    else if (".." === part) {
                                        if (1 === i && (".." === name[2] || ".." === name[0]))
                                            break;
                                        i > 0 && (name.splice(i - 1, 2),
                                        i -= 2)
                                    }
                                name = name.join("/")
                            } else
                                0 === name.indexOf("./") && (name = name.substring(2));
                        if ((baseParts || starMap) && map) {
                            for (nameParts = name.split("/"),
                            i = nameParts.length; i > 0; i -= 1) {
                                if (nameSegment = nameParts.slice(0, i).join("/"),
                                baseParts)
                                    for (j = baseParts.length; j > 0; j -= 1)
                                        if (mapValue = map[baseParts.slice(0, j).join("/")],
                                        mapValue && (mapValue = mapValue[nameSegment])) {
                                            foundMap = mapValue,
                                            foundI = i;
                                            break
                                        }
                                if (foundMap)
                                    break;
                                !foundStarMap && starMap && starMap[nameSegment] && (foundStarMap = starMap[nameSegment],
                                starI = i)
                            }
                            !foundMap && foundStarMap && (foundMap = foundStarMap,
                            foundI = starI),
                            foundMap && (nameParts.splice(0, foundI, foundMap),
                            name = nameParts.join("/"))
                        }
                        return name
                    }
                    function makeRequire(relName, forceSync) {
                        return function() {
                            var args = aps.call(arguments, 0);
                            return "string" != typeof args[0] && 1 === args.length && args.push(null),
                            req.apply(undef, args.concat([relName, forceSync]))
                        }
                    }
                    function makeNormalize(relName) {
                        return function(name) {
                            return normalize(name, relName)
                        }
                    }
                    function makeLoad(depName) {
                        return function(value) {
                            defined[depName] = value
                        }
                    }
                    function callDep(name) {
                        if (hasProp(waiting, name)) {
                            var args = waiting[name];
                            delete waiting[name],
                            defining[name] = !0,
                            main.apply(undef, args)
                        }
                        if (!hasProp(defined, name) && !hasProp(defining, name))
                            throw new Error("No " + name);
                        return defined[name]
                    }
                    function splitPrefix(name) {
                        var prefix, index = name ? name.indexOf("!") : -1;
                        return index > -1 && (prefix = name.substring(0, index),
                        name = name.substring(index + 1, name.length)),
                        [prefix, name]
                    }
                    function makeConfig(name) {
                        return function() {
                            return config && config.config && config.config[name] || {}
                        }
                    }
                    var main, req, makeMap, handlers, defined = {}, waiting = {}, config = {}, defining = {}, hasOwn = Object.prototype.hasOwnProperty, aps = [].slice, jsSuffixRegExp = /\.js$/;
                    makeMap = function(name, relName) {
                        var plugin, parts = splitPrefix(name), prefix = parts[0];
                        return name = parts[1],
                        prefix && (prefix = normalize(prefix, relName),
                        plugin = callDep(prefix)),
                        prefix ? name = plugin && plugin.normalize ? plugin.normalize(name, makeNormalize(relName)) : normalize(name, relName) : (name = normalize(name, relName),
                        parts = splitPrefix(name),
                        prefix = parts[0],
                        name = parts[1],
                        prefix && (plugin = callDep(prefix))),
                        {
                            f: prefix ? prefix + "!" + name : name,
                            n: name,
                            pr: prefix,
                            p: plugin
                        }
                    }
                    ,
                    handlers = {
                        require: function(name) {
                            return makeRequire(name)
                        },
                        exports: function(name) {
                            var e = defined[name];
                            return "undefined" != typeof e ? e : defined[name] = {}
                        },
                        module: function(name) {
                            return {
                                id: name,
                                uri: "",
                                exports: defined[name],
                                config: makeConfig(name)
                            }
                        }
                    },
                    main = function(name, deps, callback, relName) {
                        var cjsModule, depName, ret, map, i, usingExports, args = [], callbackType = typeof callback;
                        if (relName = relName || name,
                        "undefined" === callbackType || "function" === callbackType) {
                            for (deps = !deps.length && callback.length ? ["require", "exports", "module"] : deps,
                            i = 0; i < deps.length; i += 1)
                                if (map = makeMap(deps[i], relName),
                                depName = map.f,
                                "require" === depName)
                                    args[i] = handlers.require(name);
                                else if ("exports" === depName)
                                    args[i] = handlers.exports(name),
                                    usingExports = !0;
                                else if ("module" === depName)
                                    cjsModule = args[i] = handlers.module(name);
                                else if (hasProp(defined, depName) || hasProp(waiting, depName) || hasProp(defining, depName))
                                    args[i] = callDep(depName);
                                else {
                                    if (!map.p)
                                        throw new Error(name + " missing " + depName);
                                    map.p.load(map.n, makeRequire(relName, !0), makeLoad(depName), {}),
                                    args[i] = defined[depName]
                                }
                            ret = callback ? callback.apply(defined[name], args) : void 0,
                            name && (cjsModule && cjsModule.exports !== undef && cjsModule.exports !== defined[name] ? defined[name] = cjsModule.exports : ret === undef && usingExports || (defined[name] = ret))
                        } else
                            name && (defined[name] = callback)
                    }
                    ,
                    requirejs = require = req = function(deps, callback, relName, forceSync, alt) {
                        if ("string" == typeof deps)
                            return handlers[deps] ? handlers[deps](callback) : callDep(makeMap(deps, callback).f);
                        if (!deps.splice) {
                            if (config = deps,
                            config.deps && req(config.deps, config.callback),
                            !callback)
                                return;
                            callback.splice ? (deps = callback,
                            callback = relName,
                            relName = null) : deps = undef
                        }
                        return callback = callback || function() {}
                        ,
                        "function" == typeof relName && (relName = forceSync,
                        forceSync = alt),
                        forceSync ? main(undef, deps, callback, relName) : setTimeout(function() {
                            main(undef, deps, callback, relName)
                        }, 4),
                        req
                    }
                    ,
                    req.config = function(cfg) {
                        return req(cfg)
                    }
                    ,
                    requirejs._defined = defined,
                    define = function(name, deps, callback) {
                        if ("string" != typeof name)
                            throw new Error("See almond README: incorrect module build, no module name");
                        deps.splice || (callback = deps,
                        deps = []),
                        hasProp(defined, name) || hasProp(waiting, name) || (waiting[name] = [name, deps, callback])
                    }
                    ,
                    define.amd = {
                        jQuery: !0
                    }
                }(),
                S2.requirejs = requirejs,
                S2.require = require,
                S2.define = define
            }
        }(),
        S2.define("almond", function() {}),
        S2.define("jquery", [], function() {
            var _$ = jQuery || $;
            return null == _$ && console && console.error && console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),
            _$
        }),
        S2.define("select2/utils", ["jquery"], function($) {
            function getMethods(theClass) {
                var proto = theClass.prototype
                  , methods = [];
                for (var methodName in proto) {
                    var m = proto[methodName];
                    "function" == typeof m && "constructor" !== methodName && methods.push(methodName)
                }
                return methods
            }
            var Utils = {};
            Utils.Extend = function(ChildClass, SuperClass) {
                function BaseConstructor() {
                    this.constructor = ChildClass
                }
                var __hasProp = {}.hasOwnProperty;
                for (var key in SuperClass)
                    __hasProp.call(SuperClass, key) && (ChildClass[key] = SuperClass[key]);
                return BaseConstructor.prototype = SuperClass.prototype,
                ChildClass.prototype = new BaseConstructor,
                ChildClass.__super__ = SuperClass.prototype,
                ChildClass
            }
            ,
            Utils.Decorate = function(SuperClass, DecoratorClass) {
                function DecoratedClass() {
                    var unshift = Array.prototype.unshift
                      , argCount = DecoratorClass.prototype.constructor.length
                      , calledConstructor = SuperClass.prototype.constructor;
                    argCount > 0 && (unshift.call(arguments, SuperClass.prototype.constructor),
                    calledConstructor = DecoratorClass.prototype.constructor),
                    calledConstructor.apply(this, arguments)
                }
                function ctr() {
                    this.constructor = DecoratedClass
                }
                var decoratedMethods = getMethods(DecoratorClass)
                  , superMethods = getMethods(SuperClass);
                DecoratorClass.displayName = SuperClass.displayName,
                DecoratedClass.prototype = new ctr;
                for (var m = 0; m < superMethods.length; m++) {
                    var superMethod = superMethods[m];
                    DecoratedClass.prototype[superMethod] = SuperClass.prototype[superMethod]
                }
                for (var calledMethod = (function(methodName) {
                    var originalMethod = function() {};
                    methodName in DecoratedClass.prototype && (originalMethod = DecoratedClass.prototype[methodName]);
                    var decoratedMethod = DecoratorClass.prototype[methodName];
                    return function() {
                        var unshift = Array.prototype.unshift;
                        return unshift.call(arguments, originalMethod),
                        decoratedMethod.apply(this, arguments)
                    }
                }
                ), d = 0; d < decoratedMethods.length; d++) {
                    var decoratedMethod = decoratedMethods[d];
                    DecoratedClass.prototype[decoratedMethod] = calledMethod(decoratedMethod)
                }
                return DecoratedClass
            }
            ;
            var Observable = function() {
                this.listeners = {}
            };
            return Observable.prototype.on = function(event, callback) {
                this.listeners = this.listeners || {},
                event in this.listeners ? this.listeners[event].push(callback) : this.listeners[event] = [callback]
            }
            ,
            Observable.prototype.trigger = function(event) {
                var slice = Array.prototype.slice;
                this.listeners = this.listeners || {},
                event in this.listeners && this.invoke(this.listeners[event], slice.call(arguments, 1)),
                "*"in this.listeners && this.invoke(this.listeners["*"], arguments)
            }
            ,
            Observable.prototype.invoke = function(listeners, params) {
                for (var i = 0, len = listeners.length; len > i; i++)
                    listeners[i].apply(this, params)
            }
            ,
            Utils.Observable = Observable,
            Utils.generateChars = function(length) {
                for (var chars = "", i = 0; length > i; i++) {
                    var randomChar = Math.floor(36 * Math.random());
                    chars += randomChar.toString(36)
                }
                return chars
            }
            ,
            Utils.bind = function(func, context) {
                return function() {
                    func.apply(context, arguments)
                }
            }
            ,
            Utils._convertData = function(data) {
                for (var originalKey in data) {
                    var keys = originalKey.split("-")
                      , dataLevel = data;
                    if (1 !== keys.length) {
                        for (var k = 0; k < keys.length; k++) {
                            var key = keys[k];
                            key = key.substring(0, 1).toLowerCase() + key.substring(1),
                            key in dataLevel || (dataLevel[key] = {}),
                            k == keys.length - 1 && (dataLevel[key] = data[originalKey]),
                            dataLevel = dataLevel[key]
                        }
                        delete data[originalKey]
                    }
                }
                return data
            }
            ,
            Utils.hasScroll = function(index, el) {
                var $el = $(el)
                  , overflowX = el.style.overflowX
                  , overflowY = el.style.overflowY;
                return overflowX !== overflowY || "hidden" !== overflowY && "visible" !== overflowY ? "scroll" === overflowX || "scroll" === overflowY ? !0 : $el.innerHeight() < el.scrollHeight || $el.innerWidth() < el.scrollWidth : !1
            }
            ,
            Utils.escapeMarkup = function(markup) {
                var replaceMap = {
                    "\\": "&#92;",
                    "&": "&amp;",
                    "<": "&lt;",
                    ">": "&gt;",
                    '"': "&quot;",
                    "'": "&#39;",
                    "/": "&#47;"
                };
                return "string" != typeof markup ? markup : String(markup).replace(/[&<>"'\/\\]/g, function(match) {
                    return replaceMap[match]
                })
            }
            ,
            Utils.appendMany = function($element, $nodes) {
                if ("1.7" === $.fn.jquery.substr(0, 3)) {
                    var $jqNodes = $();
                    $.map($nodes, function(node) {
                        $jqNodes = $jqNodes.add(node)
                    }),
                    $nodes = $jqNodes
                }
                $element.append($nodes)
            }
            ,
            Utils
        }),
        S2.define("select2/results", ["jquery", "./utils"], function($, Utils) {
            function Results($element, options, dataAdapter) {
                this.$element = $element,
                this.data = dataAdapter,
                this.options = options,
                Results.__super__.constructor.call(this)
            }
            return Utils.Extend(Results, Utils.Observable),
            Results.prototype.render = function() {
                var $results = $('<ul class="select2-results__options" role="tree"></ul>');
                return this.options.get("multiple") && $results.attr("aria-multiselectable", "true"),
                this.$results = $results,
                $results
            }
            ,
            Results.prototype.clear = function() {
                this.$results.empty()
            }
            ,
            Results.prototype.displayMessage = function(params) {
                var escapeMarkup = this.options.get("escapeMarkup");
                this.clear(),
                this.hideLoading();
                var $message = $('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>')
                  , message = this.options.get("translations").get(params.message);
                $message.append(escapeMarkup(message(params.args))),
                $message[0].className += " select2-results__message",
                this.$results.append($message)
            }
            ,
            Results.prototype.hideMessages = function() {
                this.$results.find(".select2-results__message").remove()
            }
            ,
            Results.prototype.append = function(data) {
                this.hideLoading();
                var $options = [];
                if (null == data.results || 0 === data.results.length)
                    return void (0 === this.$results.children().length && this.trigger("results:message", {
                        message: "noResults"
                    }));
                data.results = this.sort(data.results);
                for (var d = 0; d < data.results.length; d++) {
                    var item = data.results[d]
                      , $option = this.option(item);
                    $options.push($option)
                }
                this.$results.append($options)
            }
            ,
            Results.prototype.position = function($results, $dropdown) {
                var $resultsContainer = $dropdown.find(".select2-results");
                $resultsContainer.append($results)
            }
            ,
            Results.prototype.sort = function(data) {
                var sorter = this.options.get("sorter");
                return sorter(data)
            }
            ,
            Results.prototype.setClasses = function() {
                var self = this;
                this.data.current(function(selected) {
                    var selectedIds = $.map(selected, function(s) {
                        return s.id.toString()
                    })
                      , $options = self.$results.find(".select2-results__option[aria-selected]");
                    $options.each(function() {
                        var $option = $(this)
                          , item = $.data(this, "data")
                          , id = "" + item.id;
                        null != item.element && item.element.selected || null == item.element && $.inArray(id, selectedIds) > -1 ? $option.attr("aria-selected", "true") : $option.attr("aria-selected", "false")
                    });
                    var $selected = $options.filter("[aria-selected=true]");
                    $selected.length > 0 ? $selected.first().trigger("mouseenter") : $options.first().trigger("mouseenter")
                })
            }
            ,
            Results.prototype.showLoading = function(params) {
                this.hideLoading();
                var loadingMore = this.options.get("translations").get("searching")
                  , loading = {
                    disabled: !0,
                    loading: !0,
                    text: loadingMore(params)
                }
                  , $loading = this.option(loading);
                $loading.className += " loading-results",
                this.$results.prepend($loading)
            }
            ,
            Results.prototype.hideLoading = function() {
                this.$results.find(".loading-results").remove()
            }
            ,
            Results.prototype.option = function(data) {
                var option = document.createElement("li");
                option.className = "select2-results__option";
                var attrs = {
                    role: "treeitem",
                    "aria-selected": "false"
                };
                data.disabled && (delete attrs["aria-selected"],
                attrs["aria-disabled"] = "true"),
                null == data.id && delete attrs["aria-selected"],
                null != data._resultId && (option.id = data._resultId),
                data.title && (option.title = data.title),
                data.children && (attrs.role = "group",
                attrs["aria-label"] = data.text,
                delete attrs["aria-selected"]);
                for (var attr in attrs) {
                    var val = attrs[attr];
                    option.setAttribute(attr, val)
                }
                if (data.children) {
                    var $option = $(option)
                      , label = document.createElement("strong");
                    label.className = "select2-results__group";
                    $(label);
                    this.template(data, label);
                    for (var $children = [], c = 0; c < data.children.length; c++) {
                        var child = data.children[c]
                          , $child = this.option(child);
                        $children.push($child)
                    }
                    var $childrenContainer = $("<ul></ul>", {
                        "class": "select2-results__options select2-results__options--nested"
                    });
                    $childrenContainer.append($children),
                    $option.append(label),
                    $option.append($childrenContainer)
                } else
                    this.template(data, option);
                return $.data(option, "data", data),
                option
            }
            ,
            Results.prototype.bind = function(container) {
                var self = this
                  , id = container.id + "-results";
                this.$results.attr("id", id),
                container.on("results:all", function(params) {
                    self.clear(),
                    self.append(params.data),
                    container.isOpen() && self.setClasses()
                }),
                container.on("results:append", function(params) {
                    self.append(params.data),
                    container.isOpen() && self.setClasses()
                }),
                container.on("query", function(params) {
                    self.hideMessages(),
                    self.showLoading(params)
                }),
                container.on("select", function() {
                    container.isOpen() && self.setClasses()
                }),
                container.on("unselect", function() {
                    container.isOpen() && self.setClasses()
                }),
                container.on("open", function() {
                    self.$results.attr("aria-expanded", "true"),
                    self.$results.attr("aria-hidden", "false"),
                    self.setClasses(),
                    self.ensureHighlightVisible()
                }),
                container.on("close", function() {
                    self.$results.attr("aria-expanded", "false"),
                    self.$results.attr("aria-hidden", "true"),
                    self.$results.removeAttr("aria-activedescendant")
                }),
                container.on("results:toggle", function() {
                    var $highlighted = self.getHighlightedResults();
                    0 !== $highlighted.length && $highlighted.trigger("mouseup")
                }),
                container.on("results:select", function() {
                    var $highlighted = self.getHighlightedResults();
                    if (0 !== $highlighted.length) {
                        var data = $highlighted.data("data");
                        "true" == $highlighted.attr("aria-selected") ? self.trigger("close", {}) : self.trigger("select", {
                            data: data
                        })
                    }
                }),
                container.on("results:previous", function() {
                    var $highlighted = self.getHighlightedResults()
                      , $options = self.$results.find("[aria-selected]")
                      , currentIndex = $options.index($highlighted);
                    if (0 !== currentIndex) {
                        var nextIndex = currentIndex - 1;
                        0 === $highlighted.length && (nextIndex = 0);
                        var $next = $options.eq(nextIndex);
                        $next.trigger("mouseenter");
                        var currentOffset = self.$results.offset().top
                          , nextTop = $next.offset().top
                          , nextOffset = self.$results.scrollTop() + (nextTop - currentOffset);
                        0 === nextIndex ? self.$results.scrollTop(0) : 0 > nextTop - currentOffset && self.$results.scrollTop(nextOffset)
                    }
                }),
                container.on("results:next", function() {
                    var $highlighted = self.getHighlightedResults()
                      , $options = self.$results.find("[aria-selected]")
                      , currentIndex = $options.index($highlighted)
                      , nextIndex = currentIndex + 1;
                    if (!(nextIndex >= $options.length)) {
                        var $next = $options.eq(nextIndex);
                        $next.trigger("mouseenter");
                        var currentOffset = self.$results.offset().top + self.$results.outerHeight(!1)
                          , nextBottom = $next.offset().top + $next.outerHeight(!1)
                          , nextOffset = self.$results.scrollTop() + nextBottom - currentOffset;
                        0 === nextIndex ? self.$results.scrollTop(0) : nextBottom > currentOffset && self.$results.scrollTop(nextOffset)
                    }
                }),
                container.on("results:focus", function(params) {
                    params.element.addClass("select2-results__option--highlighted")
                }),
                container.on("results:message", function(params) {
                    self.displayMessage(params)
                }),
                $.fn.mousewheel && this.$results.on("mousewheel", function(e) {
                    var top = self.$results.scrollTop()
                      , bottom = self.$results.get(0).scrollHeight - self.$results.scrollTop() + e.deltaY
                      , isAtTop = e.deltaY > 0 && top - e.deltaY <= 0
                      , isAtBottom = e.deltaY < 0 && bottom <= self.$results.height();
                    isAtTop ? (self.$results.scrollTop(0),
                    e.preventDefault(),
                    e.stopPropagation()) : isAtBottom && (self.$results.scrollTop(self.$results.get(0).scrollHeight - self.$results.height()),
                    e.preventDefault(),
                    e.stopPropagation())
                }),
                this.$results.on("mouseup", ".select2-results__option[aria-selected]", function(evt) {
                    var $this = $(this)
                      , data = $this.data("data");
                    return "true" === $this.attr("aria-selected") ? void (self.options.get("multiple") ? self.trigger("unselect", {
                        originalEvent: evt,
                        data: data
                    }) : self.trigger("close", {})) : void self.trigger("select", {
                        originalEvent: evt,
                        data: data
                    })
                }),
                this.$results.on("mouseenter", ".select2-results__option[aria-selected]", function() {
                    var data = $(this).data("data");
                    self.getHighlightedResults().removeClass("select2-results__option--highlighted"),
                    self.trigger("results:focus", {
                        data: data,
                        element: $(this)
                    })
                })
            }
            ,
            Results.prototype.getHighlightedResults = function() {
                var $highlighted = this.$results.find(".select2-results__option--highlighted");
                return $highlighted
            }
            ,
            Results.prototype.destroy = function() {
                this.$results.remove()
            }
            ,
            Results.prototype.ensureHighlightVisible = function() {
                var $highlighted = this.getHighlightedResults();
                if (0 !== $highlighted.length) {
                    var $options = this.$results.find("[aria-selected]")
                      , currentIndex = $options.index($highlighted)
                      , currentOffset = this.$results.offset().top
                      , nextTop = $highlighted.offset().top
                      , nextOffset = this.$results.scrollTop() + (nextTop - currentOffset)
                      , offsetDelta = nextTop - currentOffset;
                    nextOffset -= 2 * $highlighted.outerHeight(!1),
                    2 >= currentIndex ? this.$results.scrollTop(0) : (offsetDelta > this.$results.outerHeight() || 0 > offsetDelta) && this.$results.scrollTop(nextOffset)
                }
            }
            ,
            Results.prototype.template = function(result, container) {
                var template = this.options.get("templateResult")
                  , escapeMarkup = this.options.get("escapeMarkup")
                  , content = template(result, container);
                null == content ? container.style.display = "none" : "string" == typeof content ? container.innerHTML = escapeMarkup(content) : $(container).append(content)
            }
            ,
            Results
        }),
        S2.define("select2/keys", [], function() {
            var KEYS = {
                BACKSPACE: 8,
                TAB: 9,
                ENTER: 13,
                SHIFT: 16,
                CTRL: 17,
                ALT: 18,
                ESC: 27,
                SPACE: 32,
                PAGE_UP: 33,
                PAGE_DOWN: 34,
                END: 35,
                HOME: 36,
                LEFT: 37,
                UP: 38,
                RIGHT: 39,
                DOWN: 40,
                DELETE: 46
            };
            return KEYS
        }),
        S2.define("select2/selection/base", ["jquery", "../utils", "../keys"], function($, Utils, KEYS) {
            function BaseSelection($element, options) {
                this.$element = $element,
                this.options = options,
                BaseSelection.__super__.constructor.call(this)
            }
            return Utils.Extend(BaseSelection, Utils.Observable),
            BaseSelection.prototype.render = function() {
                var $selection = $('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');
                return this._tabindex = 0,
                null != this.$element.data("old-tabindex") ? this._tabindex = this.$element.data("old-tabindex") : null != this.$element.attr("tabindex") && (this._tabindex = this.$element.attr("tabindex")),
                $selection.attr("title", this.$element.attr("title")),
                $selection.attr("tabindex", this._tabindex),
                this.$selection = $selection,
                $selection
            }
            ,
            BaseSelection.prototype.bind = function(container) {
                var self = this
                  , resultsId = (container.id + "-container",
                container.id + "-results");
                this.container = container,
                this.$selection.on("focus", function(evt) {
                    self.trigger("focus", evt)
                }),
                this.$selection.on("blur", function(evt) {
                    self._handleBlur(evt)
                }),
                this.$selection.on("keydown", function(evt) {
                    self.trigger("keypress", evt),
                    evt.which === KEYS.SPACE && evt.preventDefault()
                }),
                container.on("results:focus", function(params) {
                    self.$selection.attr("aria-activedescendant", params.data._resultId)
                }),
                container.on("selection:update", function(params) {
                    self.update(params.data)
                }),
                container.on("open", function() {
                    self.$selection.attr("aria-expanded", "true"),
                    self.$selection.attr("aria-owns", resultsId),
                    self._attachCloseHandler(container)
                }),
                container.on("close", function() {
                    self.$selection.attr("aria-expanded", "false"),
                    self.$selection.removeAttr("aria-activedescendant"),
                    self.$selection.removeAttr("aria-owns"),
                    self.$selection.focus(),
                    self._detachCloseHandler(container)
                }),
                container.on("enable", function() {
                    self.$selection.attr("tabindex", self._tabindex)
                }),
                container.on("disable", function() {
                    self.$selection.attr("tabindex", "-1")
                })
            }
            ,
            BaseSelection.prototype._handleBlur = function(evt) {
                var self = this;
                window.setTimeout(function() {
                    document.activeElement == self.$selection[0] || $.contains(self.$selection[0], document.activeElement) || self.trigger("blur", evt)
                }, 1)
            }
            ,
            BaseSelection.prototype._attachCloseHandler = function(container) {
                $(document.body).on("mousedown.select2." + container.id, function(e) {
                    var $target = $(e.target)
                      , $select = $target.closest(".select2")
                      , $all = $(".select2.select2-container--open");
                    $all.each(function() {
                        var $this = $(this);
                        if (this != $select[0]) {
                            var $element = $this.data("element");
                            $element.select2("close")
                        }
                    })
                })
            }
            ,
            BaseSelection.prototype._detachCloseHandler = function(container) {
                $(document.body).off("mousedown.select2." + container.id)
            }
            ,
            BaseSelection.prototype.position = function($selection, $container) {
                var $selectionContainer = $container.find(".selection");
                $selectionContainer.append($selection)
            }
            ,
            BaseSelection.prototype.destroy = function() {
                this._detachCloseHandler(this.container)
            }
            ,
            BaseSelection.prototype.update = function() {
                throw new Error("The `update` method must be defined in child classes.")
            }
            ,
            BaseSelection
        }),
        S2.define("select2/selection/single", ["jquery", "./base", "../utils", "../keys"], function($, BaseSelection, Utils) {
            function SingleSelection() {
                SingleSelection.__super__.constructor.apply(this, arguments)
            }
            return Utils.Extend(SingleSelection, BaseSelection),
            SingleSelection.prototype.render = function() {
                var $selection = SingleSelection.__super__.render.call(this);
                return $selection.addClass("select2-selection--single"),
                $selection.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),
                $selection
            }
            ,
            SingleSelection.prototype.bind = function(container) {
                var self = this;
                SingleSelection.__super__.bind.apply(this, arguments);
                var id = container.id + "-container";
                this.$selection.find(".select2-selection__rendered").attr("id", id),
                this.$selection.attr("aria-labelledby", id),
                this.$selection.on("mousedown", function(evt) {
                    1 === evt.which && self.trigger("toggle", {
                        originalEvent: evt
                    })
                }),
                this.$selection.on("focus", function() {}),
                this.$selection.on("blur", function() {}),
                container.on("selection:update", function(params) {
                    self.update(params.data)
                })
            }
            ,
            SingleSelection.prototype.clear = function() {
                this.$selection.find(".select2-selection__rendered").empty()
            }
            ,
            SingleSelection.prototype.display = function(data, container) {
                var template = this.options.get("templateSelection")
                  , escapeMarkup = this.options.get("escapeMarkup");
                return escapeMarkup(template(data, container))
            }
            ,
            SingleSelection.prototype.selectionContainer = function() {
                return $("<span></span>")
            }
            ,
            SingleSelection.prototype.update = function(data) {
                if (0 === data.length)
                    return void this.clear();
                var selection = data[0]
                  , $rendered = this.$selection.find(".select2-selection__rendered")
                  , formatted = this.display(selection, $rendered);
                $rendered.empty().append(formatted),
                $rendered.prop("title", selection.title || selection.text)
            }
            ,
            SingleSelection
        }),
        S2.define("select2/selection/multiple", ["jquery", "./base", "../utils"], function($, BaseSelection, Utils) {
            function MultipleSelection() {
                MultipleSelection.__super__.constructor.apply(this, arguments)
            }
            return Utils.Extend(MultipleSelection, BaseSelection),
            MultipleSelection.prototype.render = function() {
                var $selection = MultipleSelection.__super__.render.call(this);
                return $selection.addClass("select2-selection--multiple"),
                $selection.html('<ul class="select2-selection__rendered"></ul>'),
                $selection
            }
            ,
            MultipleSelection.prototype.bind = function() {
                var self = this;
                MultipleSelection.__super__.bind.apply(this, arguments),
                this.$selection.on("click", function(evt) {
                    self.trigger("toggle", {
                        originalEvent: evt
                    })
                }),
                this.$selection.on("click", ".select2-selection__choice__remove", function(evt) {
                    if (!self.options.get("disabled")) {
                        var $remove = $(this)
                          , $selection = $remove.parent()
                          , data = $selection.data("data");
                        self.trigger("unselect", {
                            originalEvent: evt,
                            data: data
                        })
                    }
                })
            }
            ,
            MultipleSelection.prototype.clear = function() {
                this.$selection.find(".select2-selection__rendered").empty()
            }
            ,
            MultipleSelection.prototype.display = function(data, container) {
                var template = this.options.get("templateSelection")
                  , escapeMarkup = this.options.get("escapeMarkup");
                return escapeMarkup(template(data, container))
            }
            ,
            MultipleSelection.prototype.selectionContainer = function() {
                var $container = $('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');
                return $container
            }
            ,
            MultipleSelection.prototype.update = function(data) {
                if (this.clear(),
                0 !== data.length) {
                    for (var $selections = [], d = 0; d < data.length; d++) {
                        var selection = data[d]
                          , $selection = this.selectionContainer()
                          , formatted = this.display(selection, $selection);
                        $selection.append(formatted),
                        $selection.prop("title", selection.title || selection.text),
                        $selection.data("data", selection),
                        $selections.push($selection)
                    }
                    var $rendered = this.$selection.find(".select2-selection__rendered");
                    Utils.appendMany($rendered, $selections)
                }
            }
            ,
            MultipleSelection
        }),
        S2.define("select2/selection/placeholder", ["../utils"], function() {
            function Placeholder(decorated, $element, options) {
                this.placeholder = this.normalizePlaceholder(options.get("placeholder")),
                decorated.call(this, $element, options)
            }
            return Placeholder.prototype.normalizePlaceholder = function(_, placeholder) {
                return "string" == typeof placeholder && (placeholder = {
                    id: "",
                    text: placeholder
                }),
                placeholder
            }
            ,
            Placeholder.prototype.createPlaceholder = function(decorated, placeholder) {
                var $placeholder = this.selectionContainer();
                return $placeholder.html(this.display(placeholder)),
                $placeholder.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),
                $placeholder
            }
            ,
            Placeholder.prototype.update = function(decorated, data) {
                var singlePlaceholder = 1 == data.length && data[0].id != this.placeholder.id
                  , multipleSelections = data.length > 1;
                if (multipleSelections || singlePlaceholder)
                    return decorated.call(this, data);
                this.clear();
                var $placeholder = this.createPlaceholder(this.placeholder);
                this.$selection.find(".select2-selection__rendered").append($placeholder)
            }
            ,
            Placeholder
        }),
        S2.define("select2/selection/allowClear", ["jquery", "../keys"], function($, KEYS) {
            function AllowClear() {}
            return AllowClear.prototype.bind = function(decorated, container, $container) {
                var self = this;
                decorated.call(this, container, $container),
                null == this.placeholder && this.options.get("debug") && window.console && console.error && console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),
                this.$selection.on("mousedown", ".select2-selection__clear", function(evt) {
                    self._handleClear(evt)
                }),
                container.on("keypress", function(evt) {
                    self._handleKeyboardClear(evt, container)
                })
            }
            ,
            AllowClear.prototype._handleClear = function(_, evt) {
                if (!this.options.get("disabled")) {
                    var $clear = this.$selection.find(".select2-selection__clear");
                    if (0 !== $clear.length) {
                        evt.stopPropagation();
                        for (var data = $clear.data("data"), d = 0; d < data.length; d++) {
                            var unselectData = {
                                data: data[d]
                            };
                            if (this.trigger("unselect", unselectData),
                            unselectData.prevented)
                                return
                        }
                        this.$element.val(this.placeholder.id).trigger("change"),
                        this.trigger("toggle", {})
                    }
                }
            }
            ,
            AllowClear.prototype._handleKeyboardClear = function(_, evt, container) {
                container.isOpen() || evt.which != KEYS.DELETE && evt.which != KEYS.BACKSPACE || this._handleClear(evt)
            }
            ,
            AllowClear.prototype.update = function(decorated, data) {
                if (decorated.call(this, data),
                !(this.$selection.find(".select2-selection__placeholder").length > 0 || 0 === data.length)) {
                    var $remove = $('<span class="select2-selection__clear">&times;</span>');
                    $remove.data("data", data),
                    this.$selection.find(".select2-selection__rendered").prepend($remove)
                }
            }
            ,
            AllowClear
        }),
        S2.define("select2/selection/search", ["jquery", "../utils", "../keys"], function($, Utils, KEYS) {
            function Search(decorated, $element, options) {
                decorated.call(this, $element, options)
            }
            return Search.prototype.render = function(decorated) {
                var $search = $('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');
                this.$searchContainer = $search,
                this.$search = $search.find("input");
                var $rendered = decorated.call(this);
                return this._transferTabIndex(),
                $rendered
            }
            ,
            Search.prototype.bind = function(decorated, container, $container) {
                var self = this;
                decorated.call(this, container, $container),
                container.on("open", function() {
                    self.$search.trigger("focus")
                }),
                container.on("close", function() {
                    self.$search.val(""),
                    self.$search.removeAttr("aria-activedescendant"),
                    self.$search.trigger("focus")
                }),
                container.on("enable", function() {
                    self.$search.prop("disabled", !1),
                    self._transferTabIndex()
                }),
                container.on("disable", function() {
                    self.$search.prop("disabled", !0)
                }),
                container.on("focus", function() {
                    self.$search.trigger("focus")
                }),
                container.on("results:focus", function(params) {
                    self.$search.attr("aria-activedescendant", params.id)
                }),
                this.$selection.on("focusin", ".select2-search--inline", function(evt) {
                    self.trigger("focus", evt)
                }),
                this.$selection.on("focusout", ".select2-search--inline", function(evt) {
                    self._handleBlur(evt)
                }),
                this.$selection.on("keydown", ".select2-search--inline", function(evt) {
                    evt.stopPropagation(),
                    self.trigger("keypress", evt),
                    self._keyUpPrevented = evt.isDefaultPrevented();
                    var key = evt.which;
                    if (key === KEYS.BACKSPACE && "" === self.$search.val()) {
                        var $previousChoice = self.$searchContainer.prev(".select2-selection__choice");
                        if ($previousChoice.length > 0) {
                            var item = $previousChoice.data("data");
                            self.searchRemoveChoice(item),
                            evt.preventDefault()
                        }
                    }
                });
                var msie = document.documentMode
                  , disableInputEvents = msie && 11 >= msie;
                this.$selection.on("input.searchcheck", ".select2-search--inline", function() {
                    return disableInputEvents ? void self.$selection.off("input.search input.searchcheck") : void self.$selection.off("keyup.search")
                }),
                this.$selection.on("keyup.search input.search", ".select2-search--inline", function(evt) {
                    if (disableInputEvents && "input" === evt.type)
                        return void self.$selection.off("input.search input.searchcheck");
                    var key = evt.which;
                    key != KEYS.SHIFT && key != KEYS.CTRL && key != KEYS.ALT && key != KEYS.TAB && self.handleSearch(evt)
                })
            }
            ,
            Search.prototype._transferTabIndex = function() {
                this.$search.attr("tabindex", this.$selection.attr("tabindex")),
                this.$selection.attr("tabindex", "-1")
            }
            ,
            Search.prototype.createPlaceholder = function(decorated, placeholder) {
                this.$search.attr("placeholder", placeholder.text)
            }
            ,
            Search.prototype.update = function(decorated, data) {
                var searchHadFocus = this.$search[0] == document.activeElement;
                this.$search.attr("placeholder", ""),
                decorated.call(this, data),
                this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),
                this.resizeSearch(),
                searchHadFocus && this.$search.focus()
            }
            ,
            Search.prototype.handleSearch = function() {
                if (this.resizeSearch(),
                !this._keyUpPrevented) {
                    var input = this.$search.val();
                    this.trigger("query", {
                        term: input
                    })
                }
                this._keyUpPrevented = !1
            }
            ,
            Search.prototype.searchRemoveChoice = function(decorated, item) {
                this.trigger("unselect", {
                    data: item
                }),
                this.$search.val(item.text),
                this.handleSearch()
            }
            ,
            Search.prototype.resizeSearch = function() {
                this.$search.css("width", "25px");
                var width = "";
                if ("" !== this.$search.attr("placeholder"))
                    width = this.$selection.find(".select2-selection__rendered").innerWidth();
                else {
                    var minimumWidth = this.$search.val().length + 1;
                    width = .75 * minimumWidth + "em"
                }
                this.$search.css("width", width)
            }
            ,
            Search
        }),
        S2.define("select2/selection/eventRelay", ["jquery"], function($) {
            function EventRelay() {}
            return EventRelay.prototype.bind = function(decorated, container, $container) {
                var self = this
                  , relayEvents = ["open", "opening", "close", "closing", "select", "selecting", "unselect", "unselecting"]
                  , preventableEvents = ["opening", "closing", "selecting", "unselecting"];
                decorated.call(this, container, $container),
                container.on("*", function(name, params) {
                    if (-1 !== $.inArray(name, relayEvents)) {
                        params = params || {};
                        var evt = $.Event("select2:" + name, {
                            params: params
                        });
                        self.$element.trigger(evt),
                        -1 !== $.inArray(name, preventableEvents) && (params.prevented = evt.isDefaultPrevented())
                    }
                })
            }
            ,
            EventRelay
        }),
        S2.define("select2/translation", ["jquery", "require"], function($, require) {
            function Translation(dict) {
                this.dict = dict || {}
            }
            return Translation.prototype.all = function() {
                return this.dict
            }
            ,
            Translation.prototype.get = function(key) {
                return this.dict[key]
            }
            ,
            Translation.prototype.extend = function(translation) {
                this.dict = $.extend({}, translation.all(), this.dict)
            }
            ,
            Translation._cache = {},
            Translation.loadPath = function(path) {
                if (!(path in Translation._cache)) {
                    var translations = require(path);
                    Translation._cache[path] = translations
                }
                return new Translation(Translation._cache[path])
            }
            ,
            Translation
        }),
        S2.define("select2/diacritics", [], function() {
            var diacritics = {
                "\u24b6": "A",
                "\uff21": "A",
                "\xc0": "A",
                "\xc1": "A",
                "\xc2": "A",
                "\u1ea6": "A",
                "\u1ea4": "A",
                "\u1eaa": "A",
                "\u1ea8": "A",
                "\xc3": "A",
                "\u0100": "A",
                "\u0102": "A",
                "\u1eb0": "A",
                "\u1eae": "A",
                "\u1eb4": "A",
                "\u1eb2": "A",
                "\u0226": "A",
                "\u01e0": "A",
                "\xc4": "A",
                "\u01de": "A",
                "\u1ea2": "A",
                "\xc5": "A",
                "\u01fa": "A",
                "\u01cd": "A",
                "\u0200": "A",
                "\u0202": "A",
                "\u1ea0": "A",
                "\u1eac": "A",
                "\u1eb6": "A",
                "\u1e00": "A",
                "\u0104": "A",
                "\u023a": "A",
                "\u2c6f": "A",
                "\ua732": "AA",
                "\xc6": "AE",
                "\u01fc": "AE",
                "\u01e2": "AE",
                "\ua734": "AO",
                "\ua736": "AU",
                "\ua738": "AV",
                "\ua73a": "AV",
                "\ua73c": "AY",
                "\u24b7": "B",
                "\uff22": "B",
                "\u1e02": "B",
                "\u1e04": "B",
                "\u1e06": "B",
                "\u0243": "B",
                "\u0182": "B",
                "\u0181": "B",
                "\u24b8": "C",
                "\uff23": "C",
                "\u0106": "C",
                "\u0108": "C",
                "\u010a": "C",
                "\u010c": "C",
                "\xc7": "C",
                "\u1e08": "C",
                "\u0187": "C",
                "\u023b": "C",
                "\ua73e": "C",
                "\u24b9": "D",
                "\uff24": "D",
                "\u1e0a": "D",
                "\u010e": "D",
                "\u1e0c": "D",
                "\u1e10": "D",
                "\u1e12": "D",
                "\u1e0e": "D",
                "\u0110": "D",
                "\u018b": "D",
                "\u018a": "D",
                "\u0189": "D",
                "\ua779": "D",
                "\u01f1": "DZ",
                "\u01c4": "DZ",
                "\u01f2": "Dz",
                "\u01c5": "Dz",
                "\u24ba": "E",
                "\uff25": "E",
                "\xc8": "E",
                "\xc9": "E",
                "\xca": "E",
                "\u1ec0": "E",
                "\u1ebe": "E",
                "\u1ec4": "E",
                "\u1ec2": "E",
                "\u1ebc": "E",
                "\u0112": "E",
                "\u1e14": "E",
                "\u1e16": "E",
                "\u0114": "E",
                "\u0116": "E",
                "\xcb": "E",
                "\u1eba": "E",
                "\u011a": "E",
                "\u0204": "E",
                "\u0206": "E",
                "\u1eb8": "E",
                "\u1ec6": "E",
                "\u0228": "E",
                "\u1e1c": "E",
                "\u0118": "E",
                "\u1e18": "E",
                "\u1e1a": "E",
                "\u0190": "E",
                "\u018e": "E",
                "\u24bb": "F",
                "\uff26": "F",
                "\u1e1e": "F",
                "\u0191": "F",
                "\ua77b": "F",
                "\u24bc": "G",
                "\uff27": "G",
                "\u01f4": "G",
                "\u011c": "G",
                "\u1e20": "G",
                "\u011e": "G",
                "\u0120": "G",
                "\u01e6": "G",
                "\u0122": "G",
                "\u01e4": "G",
                "\u0193": "G",
                "\ua7a0": "G",
                "\ua77d": "G",
                "\ua77e": "G",
                "\u24bd": "H",
                "\uff28": "H",
                "\u0124": "H",
                "\u1e22": "H",
                "\u1e26": "H",
                "\u021e": "H",
                "\u1e24": "H",
                "\u1e28": "H",
                "\u1e2a": "H",
                "\u0126": "H",
                "\u2c67": "H",
                "\u2c75": "H",
                "\ua78d": "H",
                "\u24be": "I",
                "\uff29": "I",
                "\xcc": "I",
                "\xcd": "I",
                "\xce": "I",
                "\u0128": "I",
                "\u012a": "I",
                "\u012c": "I",
                "\u0130": "I",
                "\xcf": "I",
                "\u1e2e": "I",
                "\u1ec8": "I",
                "\u01cf": "I",
                "\u0208": "I",
                "\u020a": "I",
                "\u1eca": "I",
                "\u012e": "I",
                "\u1e2c": "I",
                "\u0197": "I",
                "\u24bf": "J",
                "\uff2a": "J",
                "\u0134": "J",
                "\u0248": "J",
                "\u24c0": "K",
                "\uff2b": "K",
                "\u1e30": "K",
                "\u01e8": "K",
                "\u1e32": "K",
                "\u0136": "K",
                "\u1e34": "K",
                "\u0198": "K",
                "\u2c69": "K",
                "\ua740": "K",
                "\ua742": "K",
                "\ua744": "K",
                "\ua7a2": "K",
                "\u24c1": "L",
                "\uff2c": "L",
                "\u013f": "L",
                "\u0139": "L",
                "\u013d": "L",
                "\u1e36": "L",
                "\u1e38": "L",
                "\u013b": "L",
                "\u1e3c": "L",
                "\u1e3a": "L",
                "\u0141": "L",
                "\u023d": "L",
                "\u2c62": "L",
                "\u2c60": "L",
                "\ua748": "L",
                "\ua746": "L",
                "\ua780": "L",
                "\u01c7": "LJ",
                "\u01c8": "Lj",
                "\u24c2": "M",
                "\uff2d": "M",
                "\u1e3e": "M",
                "\u1e40": "M",
                "\u1e42": "M",
                "\u2c6e": "M",
                "\u019c": "M",
                "\u24c3": "N",
                "\uff2e": "N",
                "\u01f8": "N",
                "\u0143": "N",
                "\xd1": "N",
                "\u1e44": "N",
                "\u0147": "N",
                "\u1e46": "N",
                "\u0145": "N",
                "\u1e4a": "N",
                "\u1e48": "N",
                "\u0220": "N",
                "\u019d": "N",
                "\ua790": "N",
                "\ua7a4": "N",
                "\u01ca": "NJ",
                "\u01cb": "Nj",
                "\u24c4": "O",
                "\uff2f": "O",
                "\xd2": "O",
                "\xd3": "O",
                "\xd4": "O",
                "\u1ed2": "O",
                "\u1ed0": "O",
                "\u1ed6": "O",
                "\u1ed4": "O",
                "\xd5": "O",
                "\u1e4c": "O",
                "\u022c": "O",
                "\u1e4e": "O",
                "\u014c": "O",
                "\u1e50": "O",
                "\u1e52": "O",
                "\u014e": "O",
                "\u022e": "O",
                "\u0230": "O",
                "\xd6": "O",
                "\u022a": "O",
                "\u1ece": "O",
                "\u0150": "O",
                "\u01d1": "O",
                "\u020c": "O",
                "\u020e": "O",
                "\u01a0": "O",
                "\u1edc": "O",
                "\u1eda": "O",
                "\u1ee0": "O",
                "\u1ede": "O",
                "\u1ee2": "O",
                "\u1ecc": "O",
                "\u1ed8": "O",
                "\u01ea": "O",
                "\u01ec": "O",
                "\xd8": "O",
                "\u01fe": "O",
                "\u0186": "O",
                "\u019f": "O",
                "\ua74a": "O",
                "\ua74c": "O",
                "\u01a2": "OI",
                "\ua74e": "OO",
                "\u0222": "OU",
                "\u24c5": "P",
                "\uff30": "P",
                "\u1e54": "P",
                "\u1e56": "P",
                "\u01a4": "P",
                "\u2c63": "P",
                "\ua750": "P",
                "\ua752": "P",
                "\ua754": "P",
                "\u24c6": "Q",
                "\uff31": "Q",
                "\ua756": "Q",
                "\ua758": "Q",
                "\u024a": "Q",
                "\u24c7": "R",
                "\uff32": "R",
                "\u0154": "R",
                "\u1e58": "R",
                "\u0158": "R",
                "\u0210": "R",
                "\u0212": "R",
                "\u1e5a": "R",
                "\u1e5c": "R",
                "\u0156": "R",
                "\u1e5e": "R",
                "\u024c": "R",
                "\u2c64": "R",
                "\ua75a": "R",
                "\ua7a6": "R",
                "\ua782": "R",
                "\u24c8": "S",
                "\uff33": "S",
                "\u1e9e": "S",
                "\u015a": "S",
                "\u1e64": "S",
                "\u015c": "S",
                "\u1e60": "S",
                "\u0160": "S",
                "\u1e66": "S",
                "\u1e62": "S",
                "\u1e68": "S",
                "\u0218": "S",
                "\u015e": "S",
                "\u2c7e": "S",
                "\ua7a8": "S",
                "\ua784": "S",
                "\u24c9": "T",
                "\uff34": "T",
                "\u1e6a": "T",
                "\u0164": "T",
                "\u1e6c": "T",
                "\u021a": "T",
                "\u0162": "T",
                "\u1e70": "T",
                "\u1e6e": "T",
                "\u0166": "T",
                "\u01ac": "T",
                "\u01ae": "T",
                "\u023e": "T",
                "\ua786": "T",
                "\ua728": "TZ",
                "\u24ca": "U",
                "\uff35": "U",
                "\xd9": "U",
                "\xda": "U",
                "\xdb": "U",
                "\u0168": "U",
                "\u1e78": "U",
                "\u016a": "U",
                "\u1e7a": "U",
                "\u016c": "U",
                "\xdc": "U",
                "\u01db": "U",
                "\u01d7": "U",
                "\u01d5": "U",
                "\u01d9": "U",
                "\u1ee6": "U",
                "\u016e": "U",
                "\u0170": "U",
                "\u01d3": "U",
                "\u0214": "U",
                "\u0216": "U",
                "\u01af": "U",
                "\u1eea": "U",
                "\u1ee8": "U",
                "\u1eee": "U",
                "\u1eec": "U",
                "\u1ef0": "U",
                "\u1ee4": "U",
                "\u1e72": "U",
                "\u0172": "U",
                "\u1e76": "U",
                "\u1e74": "U",
                "\u0244": "U",
                "\u24cb": "V",
                "\uff36": "V",
                "\u1e7c": "V",
                "\u1e7e": "V",
                "\u01b2": "V",
                "\ua75e": "V",
                "\u0245": "V",
                "\ua760": "VY",
                "\u24cc": "W",
                "\uff37": "W",
                "\u1e80": "W",
                "\u1e82": "W",
                "\u0174": "W",
                "\u1e86": "W",
                "\u1e84": "W",
                "\u1e88": "W",
                "\u2c72": "W",
                "\u24cd": "X",
                "\uff38": "X",
                "\u1e8a": "X",
                "\u1e8c": "X",
                "\u24ce": "Y",
                "\uff39": "Y",
                "\u1ef2": "Y",
                "\xdd": "Y",
                "\u0176": "Y",
                "\u1ef8": "Y",
                "\u0232": "Y",
                "\u1e8e": "Y",
                "\u0178": "Y",
                "\u1ef6": "Y",
                "\u1ef4": "Y",
                "\u01b3": "Y",
                "\u024e": "Y",
                "\u1efe": "Y",
                "\u24cf": "Z",
                "\uff3a": "Z",
                "\u0179": "Z",
                "\u1e90": "Z",
                "\u017b": "Z",
                "\u017d": "Z",
                "\u1e92": "Z",
                "\u1e94": "Z",
                "\u01b5": "Z",
                "\u0224": "Z",
                "\u2c7f": "Z",
                "\u2c6b": "Z",
                "\ua762": "Z",
                "\u24d0": "a",
                "\uff41": "a",
                "\u1e9a": "a",
                "\xe0": "a",
                "\xe1": "a",
                "\xe2": "a",
                "\u1ea7": "a",
                "\u1ea5": "a",
                "\u1eab": "a",
                "\u1ea9": "a",
                "\xe3": "a",
                "\u0101": "a",
                "\u0103": "a",
                "\u1eb1": "a",
                "\u1eaf": "a",
                "\u1eb5": "a",
                "\u1eb3": "a",
                "\u0227": "a",
                "\u01e1": "a",
                "\xe4": "a",
                "\u01df": "a",
                "\u1ea3": "a",
                "\xe5": "a",
                "\u01fb": "a",
                "\u01ce": "a",
                "\u0201": "a",
                "\u0203": "a",
                "\u1ea1": "a",
                "\u1ead": "a",
                "\u1eb7": "a",
                "\u1e01": "a",
                "\u0105": "a",
                "\u2c65": "a",
                "\u0250": "a",
                "\ua733": "aa",
                "\xe6": "ae",
                "\u01fd": "ae",
                "\u01e3": "ae",
                "\ua735": "ao",
                "\ua737": "au",
                "\ua739": "av",
                "\ua73b": "av",
                "\ua73d": "ay",
                "\u24d1": "b",
                "\uff42": "b",
                "\u1e03": "b",
                "\u1e05": "b",
                "\u1e07": "b",
                "\u0180": "b",
                "\u0183": "b",
                "\u0253": "b",
                "\u24d2": "c",
                "\uff43": "c",
                "\u0107": "c",
                "\u0109": "c",
                "\u010b": "c",
                "\u010d": "c",
                "\xe7": "c",
                "\u1e09": "c",
                "\u0188": "c",
                "\u023c": "c",
                "\ua73f": "c",
                "\u2184": "c",
                "\u24d3": "d",
                "\uff44": "d",
                "\u1e0b": "d",
                "\u010f": "d",
                "\u1e0d": "d",
                "\u1e11": "d",
                "\u1e13": "d",
                "\u1e0f": "d",
                "\u0111": "d",
                "\u018c": "d",
                "\u0256": "d",
                "\u0257": "d",
                "\ua77a": "d",
                "\u01f3": "dz",
                "\u01c6": "dz",
                "\u24d4": "e",
                "\uff45": "e",
                "\xe8": "e",
                "\xe9": "e",
                "\xea": "e",
                "\u1ec1": "e",
                "\u1ebf": "e",
                "\u1ec5": "e",
                "\u1ec3": "e",
                "\u1ebd": "e",
                "\u0113": "e",
                "\u1e15": "e",
                "\u1e17": "e",
                "\u0115": "e",
                "\u0117": "e",
                "\xeb": "e",
                "\u1ebb": "e",
                "\u011b": "e",
                "\u0205": "e",
                "\u0207": "e",
                "\u1eb9": "e",
                "\u1ec7": "e",
                "\u0229": "e",
                "\u1e1d": "e",
                "\u0119": "e",
                "\u1e19": "e",
                "\u1e1b": "e",
                "\u0247": "e",
                "\u025b": "e",
                "\u01dd": "e",
                "\u24d5": "f",
                "\uff46": "f",
                "\u1e1f": "f",
                "\u0192": "f",
                "\ua77c": "f",
                "\u24d6": "g",
                "\uff47": "g",
                "\u01f5": "g",
                "\u011d": "g",
                "\u1e21": "g",
                "\u011f": "g",
                "\u0121": "g",
                "\u01e7": "g",
                "\u0123": "g",
                "\u01e5": "g",
                "\u0260": "g",
                "\ua7a1": "g",
                "\u1d79": "g",
                "\ua77f": "g",
                "\u24d7": "h",
                "\uff48": "h",
                "\u0125": "h",
                "\u1e23": "h",
                "\u1e27": "h",
                "\u021f": "h",
                "\u1e25": "h",
                "\u1e29": "h",
                "\u1e2b": "h",
                "\u1e96": "h",
                "\u0127": "h",
                "\u2c68": "h",
                "\u2c76": "h",
                "\u0265": "h",
                "\u0195": "hv",
                "\u24d8": "i",
                "\uff49": "i",
                "\xec": "i",
                "\xed": "i",
                "\xee": "i",
                "\u0129": "i",
                "\u012b": "i",
                "\u012d": "i",
                "\xef": "i",
                "\u1e2f": "i",
                "\u1ec9": "i",
                "\u01d0": "i",
                "\u0209": "i",
                "\u020b": "i",
                "\u1ecb": "i",
                "\u012f": "i",
                "\u1e2d": "i",
                "\u0268": "i",
                "\u0131": "i",
                "\u24d9": "j",
                "\uff4a": "j",
                "\u0135": "j",
                "\u01f0": "j",
                "\u0249": "j",
                "\u24da": "k",
                "\uff4b": "k",
                "\u1e31": "k",
                "\u01e9": "k",
                "\u1e33": "k",
                "\u0137": "k",
                "\u1e35": "k",
                "\u0199": "k",
                "\u2c6a": "k",
                "\ua741": "k",
                "\ua743": "k",
                "\ua745": "k",
                "\ua7a3": "k",
                "\u24db": "l",
                "\uff4c": "l",
                "\u0140": "l",
                "\u013a": "l",
                "\u013e": "l",
                "\u1e37": "l",
                "\u1e39": "l",
                "\u013c": "l",
                "\u1e3d": "l",
                "\u1e3b": "l",
                "\u017f": "l",
                "\u0142": "l",
                "\u019a": "l",
                "\u026b": "l",
                "\u2c61": "l",
                "\ua749": "l",
                "\ua781": "l",
                "\ua747": "l",
                "\u01c9": "lj",
                "\u24dc": "m",
                "\uff4d": "m",
                "\u1e3f": "m",
                "\u1e41": "m",
                "\u1e43": "m",
                "\u0271": "m",
                "\u026f": "m",
                "\u24dd": "n",
                "\uff4e": "n",
                "\u01f9": "n",
                "\u0144": "n",
                "\xf1": "n",
                "\u1e45": "n",
                "\u0148": "n",
                "\u1e47": "n",
                "\u0146": "n",
                "\u1e4b": "n",
                "\u1e49": "n",
                "\u019e": "n",
                "\u0272": "n",
                "\u0149": "n",
                "\ua791": "n",
                "\ua7a5": "n",
                "\u01cc": "nj",
                "\u24de": "o",
                "\uff4f": "o",
                "\xf2": "o",
                "\xf3": "o",
                "\xf4": "o",
                "\u1ed3": "o",
                "\u1ed1": "o",
                "\u1ed7": "o",
                "\u1ed5": "o",
                "\xf5": "o",
                "\u1e4d": "o",
                "\u022d": "o",
                "\u1e4f": "o",
                "\u014d": "o",
                "\u1e51": "o",
                "\u1e53": "o",
                "\u014f": "o",
                "\u022f": "o",
                "\u0231": "o",
                "\xf6": "o",
                "\u022b": "o",
                "\u1ecf": "o",
                "\u0151": "o",
                "\u01d2": "o",
                "\u020d": "o",
                "\u020f": "o",
                "\u01a1": "o",
                "\u1edd": "o",
                "\u1edb": "o",
                "\u1ee1": "o",
                "\u1edf": "o",
                "\u1ee3": "o",
                "\u1ecd": "o",
                "\u1ed9": "o",
                "\u01eb": "o",
                "\u01ed": "o",
                "\xf8": "o",
                "\u01ff": "o",
                "\u0254": "o",
                "\ua74b": "o",
                "\ua74d": "o",
                "\u0275": "o",
                "\u01a3": "oi",
                "\u0223": "ou",
                "\ua74f": "oo",
                "\u24df": "p",
                "\uff50": "p",
                "\u1e55": "p",
                "\u1e57": "p",
                "\u01a5": "p",
                "\u1d7d": "p",
                "\ua751": "p",
                "\ua753": "p",
                "\ua755": "p",
                "\u24e0": "q",
                "\uff51": "q",
                "\u024b": "q",
                "\ua757": "q",
                "\ua759": "q",
                "\u24e1": "r",
                "\uff52": "r",
                "\u0155": "r",
                "\u1e59": "r",
                "\u0159": "r",
                "\u0211": "r",
                "\u0213": "r",
                "\u1e5b": "r",
                "\u1e5d": "r",
                "\u0157": "r",
                "\u1e5f": "r",
                "\u024d": "r",
                "\u027d": "r",
                "\ua75b": "r",
                "\ua7a7": "r",
                "\ua783": "r",
                "\u24e2": "s",
                "\uff53": "s",
                "\xdf": "s",
                "\u015b": "s",
                "\u1e65": "s",
                "\u015d": "s",
                "\u1e61": "s",
                "\u0161": "s",
                "\u1e67": "s",
                "\u1e63": "s",
                "\u1e69": "s",
                "\u0219": "s",
                "\u015f": "s",
                "\u023f": "s",
                "\ua7a9": "s",
                "\ua785": "s",
                "\u1e9b": "s",
                "\u24e3": "t",
                "\uff54": "t",
                "\u1e6b": "t",
                "\u1e97": "t",
                "\u0165": "t",
                "\u1e6d": "t",
                "\u021b": "t",
                "\u0163": "t",
                "\u1e71": "t",
                "\u1e6f": "t",
                "\u0167": "t",
                "\u01ad": "t",
                "\u0288": "t",
                "\u2c66": "t",
                "\ua787": "t",
                "\ua729": "tz",
                "\u24e4": "u",
                "\uff55": "u",
                "\xf9": "u",
                "\xfa": "u",
                "\xfb": "u",
                "\u0169": "u",
                "\u1e79": "u",
                "\u016b": "u",
                "\u1e7b": "u",
                "\u016d": "u",
                "\xfc": "u",
                "\u01dc": "u",
                "\u01d8": "u",
                "\u01d6": "u",
                "\u01da": "u",
                "\u1ee7": "u",
                "\u016f": "u",
                "\u0171": "u",
                "\u01d4": "u",
                "\u0215": "u",
                "\u0217": "u",
                "\u01b0": "u",
                "\u1eeb": "u",
                "\u1ee9": "u",
                "\u1eef": "u",
                "\u1eed": "u",
                "\u1ef1": "u",
                "\u1ee5": "u",
                "\u1e73": "u",
                "\u0173": "u",
                "\u1e77": "u",
                "\u1e75": "u",
                "\u0289": "u",
                "\u24e5": "v",
                "\uff56": "v",
                "\u1e7d": "v",
                "\u1e7f": "v",
                "\u028b": "v",
                "\ua75f": "v",
                "\u028c": "v",
                "\ua761": "vy",
                "\u24e6": "w",
                "\uff57": "w",
                "\u1e81": "w",
                "\u1e83": "w",
                "\u0175": "w",
                "\u1e87": "w",
                "\u1e85": "w",
                "\u1e98": "w",
                "\u1e89": "w",
                "\u2c73": "w",
                "\u24e7": "x",
                "\uff58": "x",
                "\u1e8b": "x",
                "\u1e8d": "x",
                "\u24e8": "y",
                "\uff59": "y",
                "\u1ef3": "y",
                "\xfd": "y",
                "\u0177": "y",
                "\u1ef9": "y",
                "\u0233": "y",
                "\u1e8f": "y",
                "\xff": "y",
                "\u1ef7": "y",
                "\u1e99": "y",
                "\u1ef5": "y",
                "\u01b4": "y",
                "\u024f": "y",
                "\u1eff": "y",
                "\u24e9": "z",
                "\uff5a": "z",
                "\u017a": "z",
                "\u1e91": "z",
                "\u017c": "z",
                "\u017e": "z",
                "\u1e93": "z",
                "\u1e95": "z",
                "\u01b6": "z",
                "\u0225": "z",
                "\u0240": "z",
                "\u2c6c": "z",
                "\ua763": "z",
                "\u0386": "\u0391",
                "\u0388": "\u0395",
                "\u0389": "\u0397",
                "\u038a": "\u0399",
                "\u03aa": "\u0399",
                "\u038c": "\u039f",
                "\u038e": "\u03a5",
                "\u03ab": "\u03a5",
                "\u038f": "\u03a9",
                "\u03ac": "\u03b1",
                "\u03ad": "\u03b5",
                "\u03ae": "\u03b7",
                "\u03af": "\u03b9",
                "\u03ca": "\u03b9",
                "\u0390": "\u03b9",
                "\u03cc": "\u03bf",
                "\u03cd": "\u03c5",
                "\u03cb": "\u03c5",
                "\u03b0": "\u03c5",
                "\u03c9": "\u03c9",
                "\u03c2": "\u03c3"
            };
            return diacritics
        }),
        S2.define("select2/data/base", ["../utils"], function(Utils) {
            function BaseAdapter() {
                BaseAdapter.__super__.constructor.call(this)
            }
            return Utils.Extend(BaseAdapter, Utils.Observable),
            BaseAdapter.prototype.current = function() {
                throw new Error("The `current` method must be defined in child classes.")
            }
            ,
            BaseAdapter.prototype.query = function() {
                throw new Error("The `query` method must be defined in child classes.")
            }
            ,
            BaseAdapter.prototype.bind = function() {}
            ,
            BaseAdapter.prototype.destroy = function() {}
            ,
            BaseAdapter.prototype.generateResultId = function(container, data) {
                var id = container.id + "-result-";
                return id += Utils.generateChars(4),
                id += null != data.id ? "-" + data.id.toString() : "-" + Utils.generateChars(4)
            }
            ,
            BaseAdapter
        }),
        S2.define("select2/data/select", ["./base", "../utils", "jquery"], function(BaseAdapter, Utils, $) {
            function SelectAdapter($element, options) {
                this.$element = $element,
                this.options = options,
                SelectAdapter.__super__.constructor.call(this)
            }
            return Utils.Extend(SelectAdapter, BaseAdapter),
            SelectAdapter.prototype.current = function(callback) {
                var data = []
                  , self = this;
                this.$element.find(":selected").each(function() {
                    var $option = $(this)
                      , option = self.item($option);
                    data.push(option)
                }),
                callback(data)
            }
            ,
            SelectAdapter.prototype.select = function(data) {
                var self = this;
                if (data.selected = !0,
                $(data.element).is("option"))
                    return data.element.selected = !0,
                    void this.$element.trigger("change");
                if (this.$element.prop("multiple"))
                    this.current(function(currentData) {
                        var val = [];
                        data = [data],
                        data.push.apply(data, currentData);
                        for (var d = 0; d < data.length; d++) {
                            var id = data[d].id;
                            -1 === $.inArray(id, val) && val.push(id)
                        }
                        self.$element.val(val),
                        self.$element.trigger("change")
                    });
                else {
                    var val = data.id;
                    this.$element.val(val),
                    this.$element.trigger("change")
                }
            }
            ,
            SelectAdapter.prototype.unselect = function(data) {
                var self = this;
                if (this.$element.prop("multiple"))
                    return data.selected = !1,
                    $(data.element).is("option") ? (data.element.selected = !1,
                    void this.$element.trigger("change")) : void this.current(function(currentData) {
                        for (var val = [], d = 0; d < currentData.length; d++) {
                            var id = currentData[d].id;
                            id !== data.id && -1 === $.inArray(id, val) && val.push(id)
                        }
                        self.$element.val(val),
                        self.$element.trigger("change")
                    })
            }
            ,
            SelectAdapter.prototype.bind = function(container) {
                var self = this;
                this.container = container,
                container.on("select", function(params) {
                    self.select(params.data)
                }),
                container.on("unselect", function(params) {
                    self.unselect(params.data)
                })
            }
            ,
            SelectAdapter.prototype.destroy = function() {
                this.$element.find("*").each(function() {
                    $.removeData(this, "data")
                })
            }
            ,
            SelectAdapter.prototype.query = function(params, callback) {
                var data = []
                  , self = this
                  , $options = this.$element.children();
                $options.each(function() {
                    var $option = $(this);
                    if ($option.is("option") || $option.is("optgroup")) {
                        var option = self.item($option)
                          , matches = self.matches(params, option);
                        null !== matches && data.push(matches)
                    }
                }),
                callback({
                    results: data
                })
            }
            ,
            SelectAdapter.prototype.addOptions = function($options) {
                Utils.appendMany(this.$element, $options)
            }
            ,
            SelectAdapter.prototype.option = function(data) {
                var option;
                data.children ? (option = document.createElement("optgroup"),
                option.label = data.text) : (option = document.createElement("option"),
                void 0 !== option.textContent ? option.textContent = data.text : option.innerText = data.text),
                data.id && (option.value = data.id),
                data.disabled && (option.disabled = !0),
                data.selected && (option.selected = !0),
                data.title && (option.title = data.title);
                var $option = $(option)
                  , normalizedData = this._normalizeItem(data);
                return normalizedData.element = option,
                $.data(option, "data", normalizedData),
                $option
            }
            ,
            SelectAdapter.prototype.item = function($option) {
                var data = {};
                if (data = $.data($option[0], "data"),
                null != data)
                    return data;
                if ($option.is("option"))
                    data = {
                        id: $option.val(),
                        text: $option.text(),
                        disabled: $option.prop("disabled"),
                        selected: $option.prop("selected"),
                        title: $option.prop("title")
                    };
                else if ($option.is("optgroup")) {
                    data = {
                        text: $option.prop("label"),
                        children: [],
                        title: $option.prop("title")
                    };
                    for (var $children = $option.children("option"), children = [], c = 0; c < $children.length; c++) {
                        var $child = $($children[c])
                          , child = this.item($child);
                        children.push(child)
                    }
                    data.children = children
                }
                return data = this._normalizeItem(data),
                data.element = $option[0],
                $.data($option[0], "data", data),
                data
            }
            ,
            SelectAdapter.prototype._normalizeItem = function(item) {
                $.isPlainObject(item) || (item = {
                    id: item,
                    text: item
                }),
                item = $.extend({}, {
                    text: ""
                }, item);
                var defaults = {
                    selected: !1,
                    disabled: !1
                };
                return null != item.id && (item.id = item.id.toString()),
                null != item.text && (item.text = item.text.toString()),
                null == item._resultId && item.id && null != this.container && (item._resultId = this.generateResultId(this.container, item)),
                $.extend({}, defaults, item)
            }
            ,
            SelectAdapter.prototype.matches = function(params, data) {
                var matcher = this.options.get("matcher");
                return matcher(params, data)
            }
            ,
            SelectAdapter
        }),
        S2.define("select2/data/array", ["./select", "../utils", "jquery"], function(SelectAdapter, Utils, $) {
            function ArrayAdapter($element, options) {
                var data = options.get("data") || [];
                ArrayAdapter.__super__.constructor.call(this, $element, options),
                this.addOptions(this.convertToOptions(data))
            }
            return Utils.Extend(ArrayAdapter, SelectAdapter),
            ArrayAdapter.prototype.select = function(data) {
                var $option = this.$element.find("option").filter(function(i, elm) {
                    return elm.value == data.id.toString()
                });
                0 === $option.length && ($option = this.option(data),
                this.addOptions($option)),
                ArrayAdapter.__super__.select.call(this, data)
            }
            ,
            ArrayAdapter.prototype.convertToOptions = function(data) {
                function onlyItem(item) {
                    return function() {
                        return $(this).val() == item.id
                    }
                }
                for (var self = this, $existing = this.$element.find("option"), existingIds = $existing.map(function() {
                    return self.item($(this)).id
                }).get(), $options = [], d = 0; d < data.length; d++) {
                    var item = this._normalizeItem(data[d]);
                    if ($.inArray(item.id, existingIds) >= 0) {
                        var $existingOption = $existing.filter(onlyItem(item))
                          , existingData = this.item($existingOption)
                          , newData = $.extend(!0, {}, existingData, item)
                          , $newOption = this.option(newData);
                        $existingOption.replaceWith($newOption)
                    } else {
                        var $option = this.option(item);
                        if (item.children) {
                            var $children = this.convertToOptions(item.children);
                            Utils.appendMany($option, $children)
                        }
                        $options.push($option)
                    }
                }
                return $options
            }
            ,
            ArrayAdapter
        }),
        S2.define("select2/data/ajax", ["./array", "../utils", "jquery"], function(ArrayAdapter, Utils, $) {
            function AjaxAdapter($element, options) {
                this.ajaxOptions = this._applyDefaults(options.get("ajax")),
                null != this.ajaxOptions.processResults && (this.processResults = this.ajaxOptions.processResults),
                AjaxAdapter.__super__.constructor.call(this, $element, options)
            }
            return Utils.Extend(AjaxAdapter, ArrayAdapter),
            AjaxAdapter.prototype._applyDefaults = function(options) {
                var defaults = {
                    data: function(params) {
                        return $.extend({}, params, {
                            q: params.term
                        })
                    },
                    transport: function(params, success, failure) {
                        var $request = $.ajax(params);
                        return $request.then(success),
                        $request.fail(failure),
                        $request
                    }
                };
                return $.extend({}, defaults, options, !0)
            }
            ,
            AjaxAdapter.prototype.processResults = function(results) {
                return results
            }
            ,
            AjaxAdapter.prototype.query = function(params, callback) {
                function request() {
                    var $request = options.transport(options, function(data) {
                        var results = self.processResults(data, params);
                        self.options.get("debug") && window.console && console.error && (results && results.results && $.isArray(results.results) || console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),
                        callback(results)
                    }, function() {});
                    self._request = $request
                }
                var self = this;
                null != this._request && ($.isFunction(this._request.abort) && this._request.abort(),
                this._request = null);
                var options = $.extend({
                    type: "GET"
                }, this.ajaxOptions);
                "function" == typeof options.url && (options.url = options.url.call(this.$element, params)),
                "function" == typeof options.data && (options.data = options.data.call(this.$element, params)),
                this.ajaxOptions.delay && "" !== params.term ? (this._queryTimeout && window.clearTimeout(this._queryTimeout),
                this._queryTimeout = window.setTimeout(request, this.ajaxOptions.delay)) : request()
            }
            ,
            AjaxAdapter
        }),
        S2.define("select2/data/tags", ["jquery"], function($) {
            function Tags(decorated, $element, options) {
                var tags = options.get("tags")
                  , createTag = options.get("createTag");
                if (void 0 !== createTag && (this.createTag = createTag),
                decorated.call(this, $element, options),
                $.isArray(tags))
                    for (var t = 0; t < tags.length; t++) {
                        var tag = tags[t]
                          , item = this._normalizeItem(tag)
                          , $option = this.option(item);
                        this.$element.append($option)
                    }
            }
            return Tags.prototype.query = function(decorated, params, callback) {
                function wrapper(obj, child) {
                    for (var data = obj.results, i = 0; i < data.length; i++) {
                        var option = data[i]
                          , checkChildren = null != option.children && !wrapper({
                            results: option.children
                        }, !0)
                          , checkText = option.text === params.term;
                        if (checkText || checkChildren)
                            return child ? !1 : (obj.data = data,
                            void callback(obj))
                    }
                    if (child)
                        return !0;
                    var tag = self.createTag(params);
                    if (null != tag) {
                        var $option = self.option(tag);
                        $option.attr("data-select2-tag", !0),
                        self.addOptions([$option]),
                        self.insertTag(data, tag)
                    }
                    obj.results = data,
                    callback(obj)
                }
                var self = this;
                return this._removeOldTags(),
                null == params.term || null != params.page ? void decorated.call(this, params, callback) : void decorated.call(this, params, wrapper)
            }
            ,
            Tags.prototype.createTag = function(decorated, params) {
                var term = $.trim(params.term);
                return "" === term ? null : {
                    id: term,
                    text: term
                }
            }
            ,
            Tags.prototype.insertTag = function(_, data, tag) {
                data.unshift(tag)
            }
            ,
            Tags.prototype._removeOldTags = function() {
                var $options = (this._lastTag,
                this.$element.find("option[data-select2-tag]"));
                $options.each(function() {
                    this.selected || $(this).remove()
                })
            }
            ,
            Tags
        }),
        S2.define("select2/data/tokenizer", ["jquery"], function($) {
            function Tokenizer(decorated, $element, options) {
                var tokenizer = options.get("tokenizer");
                void 0 !== tokenizer && (this.tokenizer = tokenizer),
                decorated.call(this, $element, options)
            }
            return Tokenizer.prototype.bind = function(decorated, container, $container) {
                decorated.call(this, container, $container),
                this.$search = container.dropdown.$search || container.selection.$search || $container.find(".select2-search__field")
            }
            ,
            Tokenizer.prototype.query = function(decorated, params, callback) {
                function select(data) {
                    self.trigger("select", {
                        data: data
                    })
                }
                var self = this;
                params.term = params.term || "";
                var tokenData = this.tokenizer(params, this.options, select);
                tokenData.term !== params.term && (this.$search.length && (this.$search.val(tokenData.term),
                this.$search.focus()),
                params.term = tokenData.term),
                decorated.call(this, params, callback)
            }
            ,
            Tokenizer.prototype.tokenizer = function(_, params, options, callback) {
                for (var separators = options.get("tokenSeparators") || [], term = params.term, i = 0, createTag = this.createTag || function(params) {
                    return {
                        id: params.term,
                        text: params.term
                    }
                }
                ; i < term.length; ) {
                    var termChar = term[i];
                    if (-1 !== $.inArray(termChar, separators)) {
                        var part = term.substr(0, i)
                          , partParams = $.extend({}, params, {
                            term: part
                        })
                          , data = createTag(partParams);
                        null != data ? (callback(data),
                        term = term.substr(i + 1) || "",
                        i = 0) : i++
                    } else
                        i++
                }
                return {
                    term: term
                }
            }
            ,
            Tokenizer
        }),
        S2.define("select2/data/minimumInputLength", [], function() {
            function MinimumInputLength(decorated, $e, options) {
                this.minimumInputLength = options.get("minimumInputLength"),
                decorated.call(this, $e, options)
            }
            return MinimumInputLength.prototype.query = function(decorated, params, callback) {
                return params.term = params.term || "",
                params.term.length < this.minimumInputLength ? void this.trigger("results:message", {
                    message: "inputTooShort",
                    args: {
                        minimum: this.minimumInputLength,
                        input: params.term,
                        params: params
                    }
                }) : void decorated.call(this, params, callback)
            }
            ,
            MinimumInputLength
        }),
        S2.define("select2/data/maximumInputLength", [], function() {
            function MaximumInputLength(decorated, $e, options) {
                this.maximumInputLength = options.get("maximumInputLength"),
                decorated.call(this, $e, options)
            }
            return MaximumInputLength.prototype.query = function(decorated, params, callback) {
                return params.term = params.term || "",
                this.maximumInputLength > 0 && params.term.length > this.maximumInputLength ? void this.trigger("results:message", {
                    message: "inputTooLong",
                    args: {
                        maximum: this.maximumInputLength,
                        input: params.term,
                        params: params
                    }
                }) : void decorated.call(this, params, callback)
            }
            ,
            MaximumInputLength
        }),
        S2.define("select2/data/maximumSelectionLength", [], function() {
            function MaximumSelectionLength(decorated, $e, options) {
                this.maximumSelectionLength = options.get("maximumSelectionLength"),
                decorated.call(this, $e, options)
            }
            return MaximumSelectionLength.prototype.query = function(decorated, params, callback) {
                var self = this;
                this.current(function(currentData) {
                    var count = null != currentData ? currentData.length : 0;
                    return self.maximumSelectionLength > 0 && count >= self.maximumSelectionLength ? void self.trigger("results:message", {
                        message: "maximumSelected",
                        args: {
                            maximum: self.maximumSelectionLength
                        }
                    }) : void decorated.call(self, params, callback)
                })
            }
            ,
            MaximumSelectionLength
        }),
        S2.define("select2/dropdown", ["jquery", "./utils"], function($, Utils) {
            function Dropdown($element, options) {
                this.$element = $element,
                this.options = options,
                Dropdown.__super__.constructor.call(this)
            }
            return Utils.Extend(Dropdown, Utils.Observable),
            Dropdown.prototype.render = function() {
                var $dropdown = $('<span class="select2-dropdown"><span class="select2-results"></span></span>');
                return $dropdown.attr("dir", this.options.get("dir")),
                this.$dropdown = $dropdown,
                $dropdown
            }
            ,
            Dropdown.prototype.bind = function() {}
            ,
            Dropdown.prototype.position = function() {}
            ,
            Dropdown.prototype.destroy = function() {
                this.$dropdown.remove()
            }
            ,
            Dropdown
        }),
        S2.define("select2/dropdown/search", ["jquery", "../utils"], function($) {
            function Search() {}
            return Search.prototype.render = function(decorated) {
                var $rendered = decorated.call(this)
                  , $search = $('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');
                return this.$searchContainer = $search,
                this.$search = $search.find("input"),
                $rendered.prepend($search),
                $rendered
            }
            ,
            Search.prototype.bind = function(decorated, container, $container) {
                var self = this;
                decorated.call(this, container, $container),
                this.$search.on("keydown", function(evt) {
                    self.trigger("keypress", evt),
                    self._keyUpPrevented = evt.isDefaultPrevented()
                }),
                this.$search.on("input", function() {
                    $(this).off("keyup")
                }),
                this.$search.on("keyup input", function(evt) {
                    self.handleSearch(evt)
                }),
                container.on("open", function() {
                    self.$search.attr("tabindex", 0),
                    self.$search.focus(),
                    window.setTimeout(function() {
                        self.$search.focus()
                    }, 0)
                }),
                container.on("close", function() {
                    self.$search.attr("tabindex", -1),
                    self.$search.val("")
                }),
                container.on("results:all", function(params) {
                    if (null == params.query.term || "" === params.query.term) {
                        var showSearch = self.showSearch(params);
                        showSearch ? self.$searchContainer.removeClass("select2-search--hide") : self.$searchContainer.addClass("select2-search--hide")
                    }
                })
            }
            ,
            Search.prototype.handleSearch = function() {
                if (!this._keyUpPrevented) {
                    var input = this.$search.val();
                    this.trigger("query", {
                        term: input
                    })
                }
                this._keyUpPrevented = !1
            }
            ,
            Search.prototype.showSearch = function() {
                return !0
            }
            ,
            Search
        }),
        S2.define("select2/dropdown/hidePlaceholder", [], function() {
            function HidePlaceholder(decorated, $element, options, dataAdapter) {
                this.placeholder = this.normalizePlaceholder(options.get("placeholder")),
                decorated.call(this, $element, options, dataAdapter)
            }
            return HidePlaceholder.prototype.append = function(decorated, data) {
                data.results = this.removePlaceholder(data.results),
                decorated.call(this, data)
            }
            ,
            HidePlaceholder.prototype.normalizePlaceholder = function(_, placeholder) {
                return "string" == typeof placeholder && (placeholder = {
                    id: "",
                    text: placeholder
                }),
                placeholder
            }
            ,
            HidePlaceholder.prototype.removePlaceholder = function(_, data) {
                for (var modifiedData = data.slice(0), d = data.length - 1; d >= 0; d--) {
                    var item = data[d];
                    this.placeholder.id === item.id && modifiedData.splice(d, 1)
                }
                return modifiedData
            }
            ,
            HidePlaceholder
        }),
        S2.define("select2/dropdown/infiniteScroll", ["jquery"], function($) {
            function InfiniteScroll(decorated, $element, options, dataAdapter) {
                this.lastParams = {},
                decorated.call(this, $element, options, dataAdapter),
                this.$loadingMore = this.createLoadingMore(),
                this.loading = !1
            }
            return InfiniteScroll.prototype.append = function(decorated, data) {
                this.$loadingMore.remove(),
                this.loading = !1,
                decorated.call(this, data),
                this.showLoadingMore(data) && this.$results.append(this.$loadingMore)
            }
            ,
            InfiniteScroll.prototype.bind = function(decorated, container, $container) {
                var self = this;
                decorated.call(this, container, $container),
                container.on("query", function(params) {
                    self.lastParams = params,
                    self.loading = !0
                }),
                container.on("query:append", function(params) {
                    self.lastParams = params,
                    self.loading = !0
                }),
                this.$results.on("scroll", function() {
                    var isLoadMoreVisible = $.contains(document.documentElement, self.$loadingMore[0]);
                    if (!self.loading && isLoadMoreVisible) {
                        var currentOffset = self.$results.offset().top + self.$results.outerHeight(!1)
                          , loadingMoreOffset = self.$loadingMore.offset().top + self.$loadingMore.outerHeight(!1);
                        currentOffset + 50 >= loadingMoreOffset && self.loadMore()
                    }
                })
            }
            ,
            InfiniteScroll.prototype.loadMore = function() {
                this.loading = !0;
                var params = $.extend({}, {
                    page: 1
                }, this.lastParams);
                params.page++,
                this.trigger("query:append", params)
            }
            ,
            InfiniteScroll.prototype.showLoadingMore = function(_, data) {
                return data.pagination && data.pagination.more
            }
            ,
            InfiniteScroll.prototype.createLoadingMore = function() {
                var $option = $('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>')
                  , message = this.options.get("translations").get("loadingMore");
                return $option.html(message(this.lastParams)),
                $option
            }
            ,
            InfiniteScroll
        }),
        S2.define("select2/dropdown/attachBody", ["jquery", "../utils"], function($, Utils) {
            function AttachBody(decorated, $element, options) {
                this.$dropdownParent = options.get("dropdownParent") || $(document.body),
                decorated.call(this, $element, options)
            }
            return AttachBody.prototype.bind = function(decorated, container, $container) {
                var self = this
                  , setupResultsEvents = !1;
                decorated.call(this, container, $container),
                container.on("open", function() {
                    self._showDropdown(),
                    self._attachPositioningHandler(container),
                    setupResultsEvents || (setupResultsEvents = !0,
                    container.on("results:all", function() {
                        self._positionDropdown(),
                        self._resizeDropdown()
                    }),
                    container.on("results:append", function() {
                        self._positionDropdown(),
                        self._resizeDropdown()
                    }))
                }),
                container.on("close", function() {
                    self._hideDropdown(),
                    self._detachPositioningHandler(container)
                }),
                this.$dropdownContainer.on("mousedown", function(evt) {
                    evt.stopPropagation()
                })
            }
            ,
            AttachBody.prototype.destroy = function(decorated) {
                decorated.call(this),
                this.$dropdownContainer.remove()
            }
            ,
            AttachBody.prototype.position = function(decorated, $dropdown, $container) {
                $dropdown.attr("class", $container.attr("class")),
                $dropdown.removeClass("select2"),
                $dropdown.addClass("select2-container--open"),
                $dropdown.css({
                    position: "absolute",
                    top: -999999
                }),
                this.$container = $container
            }
            ,
            AttachBody.prototype.render = function(decorated) {
                var $container = $("<span></span>")
                  , $dropdown = decorated.call(this);
                return $container.append($dropdown),
                this.$dropdownContainer = $container,
                $container
            }
            ,
            AttachBody.prototype._hideDropdown = function() {
                this.$dropdownContainer.detach()
            }
            ,
            AttachBody.prototype._attachPositioningHandler = function(decorated, container) {
                var self = this
                  , scrollEvent = "scroll.select2." + container.id
                  , resizeEvent = "resize.select2." + container.id
                  , orientationEvent = "orientationchange.select2." + container.id
                  , $watchers = this.$container.parents().filter(Utils.hasScroll);
                $watchers.each(function() {
                    $(this).data("select2-scroll-position", {
                        x: $(this).scrollLeft(),
                        y: $(this).scrollTop()
                    })
                }),
                $watchers.on(scrollEvent, function() {
                    var position = $(this).data("select2-scroll-position");
                    $(self).scrollTop(position.y)
                }),
                $(window).on(scrollEvent + " " + resizeEvent + " " + orientationEvent, function() {
                    self._positionDropdown(),
                    self._resizeDropdown()
                })
            }
            ,
            AttachBody.prototype._detachPositioningHandler = function(decorated, container) {
                var scrollEvent = "scroll.select2." + container.id
                  , resizeEvent = "resize.select2." + container.id
                  , orientationEvent = "orientationchange.select2." + container.id
                  , $watchers = this.$container.parents().filter(Utils.hasScroll);
                $watchers.off(scrollEvent),
                $(window).off(scrollEvent + " " + resizeEvent + " " + orientationEvent)
            }
            ,
            AttachBody.prototype._positionDropdown = function() {
                var $window = $(window)
                  , isCurrentlyAbove = this.$dropdown.hasClass("select2-dropdown--above")
                  , isCurrentlyBelow = this.$dropdown.hasClass("select2-dropdown--below")
                  , newDirection = null
                  , offset = (this.$container.position(),
                this.$container.offset());
                offset.bottom = offset.top + this.$container.outerHeight(!1);
                var container = {
                    height: this.$container.outerHeight(!1)
                };
                container.top = offset.top,
                container.bottom = offset.top + container.height;
                var dropdown = {
                    height: this.$dropdown.outerHeight(!1)
                }
                  , viewport = {
                    top: $window.scrollTop(),
                    bottom: $window.scrollTop() + $window.height()
                }
                  , enoughRoomAbove = viewport.top < offset.top - dropdown.height
                  , enoughRoomBelow = viewport.bottom > offset.bottom + dropdown.height
                  , css = {
                    left: offset.left,
                    top: container.bottom
                };
                if ("static" !== this.$dropdownParent[0].style.position) {
                    var parentOffset = this.$dropdownParent.offset();
                    css.top -= parentOffset.top,
                    css.left -= parentOffset.left
                }
                isCurrentlyAbove || isCurrentlyBelow || (newDirection = "below"),
                enoughRoomBelow || !enoughRoomAbove || isCurrentlyAbove ? !enoughRoomAbove && enoughRoomBelow && isCurrentlyAbove && (newDirection = "below") : newDirection = "above",
                ("above" == newDirection || isCurrentlyAbove && "below" !== newDirection) && (css.top = container.top - dropdown.height),
                null != newDirection && (this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--" + newDirection),
                this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--" + newDirection)),
                this.$dropdownContainer.css(css)
            }
            ,
            AttachBody.prototype._resizeDropdown = function() {
                var css = {
                    width: this.$container.outerWidth(!1) + "px"
                };
                this.options.get("dropdownAutoWidth") && (css.minWidth = css.width,
                css.width = "auto"),
                this.$dropdown.css(css)
            }
            ,
            AttachBody.prototype._showDropdown = function() {
                this.$dropdownContainer.appendTo(this.$dropdownParent),
                this._positionDropdown(),
                this._resizeDropdown()
            }
            ,
            AttachBody
        }),
        S2.define("select2/dropdown/minimumResultsForSearch", [], function() {
            function countResults(data) {
                for (var count = 0, d = 0; d < data.length; d++) {
                    var item = data[d];
                    item.children ? count += countResults(item.children) : count++
                }
                return count
            }
            function MinimumResultsForSearch(decorated, $element, options, dataAdapter) {
                this.minimumResultsForSearch = options.get("minimumResultsForSearch"),
                this.minimumResultsForSearch < 0 && (this.minimumResultsForSearch = 1 / 0),
                decorated.call(this, $element, options, dataAdapter)
            }
            return MinimumResultsForSearch.prototype.showSearch = function(decorated, params) {
                return countResults(params.data.results) < this.minimumResultsForSearch ? !1 : decorated.call(this, params)
            }
            ,
            MinimumResultsForSearch
        }),
        S2.define("select2/dropdown/selectOnClose", [], function() {
            function SelectOnClose() {}
            return SelectOnClose.prototype.bind = function(decorated, container, $container) {
                var self = this;
                decorated.call(this, container, $container),
                container.on("close", function() {
                    self._handleSelectOnClose()
                })
            }
            ,
            SelectOnClose.prototype._handleSelectOnClose = function() {
                var $highlightedResults = this.getHighlightedResults();
                if (!($highlightedResults.length < 1)) {
                    var data = $highlightedResults.data("data");
                    null != data.element && data.element.selected || null == data.element && data.selected || this.trigger("select", {
                        data: data
                    })
                }
            }
            ,
            SelectOnClose
        }),
        S2.define("select2/dropdown/closeOnSelect", [], function() {
            function CloseOnSelect() {}
            return CloseOnSelect.prototype.bind = function(decorated, container, $container) {
                var self = this;
                decorated.call(this, container, $container),
                container.on("select", function(evt) {
                    self._selectTriggered(evt)
                }),
                container.on("unselect", function(evt) {
                    self._selectTriggered(evt)
                })
            }
            ,
            CloseOnSelect.prototype._selectTriggered = function(_, evt) {
                var originalEvent = evt.originalEvent;
                originalEvent && originalEvent.ctrlKey || this.trigger("close", {})
            }
            ,
            CloseOnSelect
        }),
        S2.define("select2/i18n/en", [], function() {
            return {
                errorLoading: function() {
                    return "The results could not be loaded."
                },
                inputTooLong: function(args) {
                    var overChars = args.input.length - args.maximum
                      , message = "Please delete " + overChars + " character";
                    return 1 != overChars && (message += "s"),
                    message
                },
                inputTooShort: function(args) {
                    var remainingChars = args.minimum - args.input.length
                      , message = "Please enter " + remainingChars + " or more characters";
                    return message
                },
                loadingMore: function() {
                    return "Loading more results\u2026"
                },
                maximumSelected: function(args) {
                    var message = "You can only select " + args.maximum + " item";
                    return 1 != args.maximum && (message += "s"),
                    message
                },
                noResults: function() {
                    return "No results found"
                },
                searching: function() {
                    return "Searching\u2026"
                }
            }
        }),
        S2.define("select2/defaults", ["jquery", "require", "./results", "./selection/single", "./selection/multiple", "./selection/placeholder", "./selection/allowClear", "./selection/search", "./selection/eventRelay", "./utils", "./translation", "./diacritics", "./data/select", "./data/array", "./data/ajax", "./data/tags", "./data/tokenizer", "./data/minimumInputLength", "./data/maximumInputLength", "./data/maximumSelectionLength", "./dropdown", "./dropdown/search", "./dropdown/hidePlaceholder", "./dropdown/infiniteScroll", "./dropdown/attachBody", "./dropdown/minimumResultsForSearch", "./dropdown/selectOnClose", "./dropdown/closeOnSelect", "./i18n/en"], function($, require, ResultsList, SingleSelection, MultipleSelection, Placeholder, AllowClear, SelectionSearch, EventRelay, Utils, Translation, DIACRITICS, SelectData, ArrayData, AjaxData, Tags, Tokenizer, MinimumInputLength, MaximumInputLength, MaximumSelectionLength, Dropdown, DropdownSearch, HidePlaceholder, InfiniteScroll, AttachBody, MinimumResultsForSearch, SelectOnClose, CloseOnSelect, EnglishTranslation) {
            function Defaults() {
                this.reset()
            }
            Defaults.prototype.apply = function(options) {
                if (options = $.extend({}, this.defaults, options),
                null == options.dataAdapter) {
                    if (null != options.ajax ? options.dataAdapter = AjaxData : null != options.data ? options.dataAdapter = ArrayData : options.dataAdapter = SelectData,
                    options.minimumInputLength > 0 && (options.dataAdapter = Utils.Decorate(options.dataAdapter, MinimumInputLength)),
                    options.maximumInputLength > 0 && (options.dataAdapter = Utils.Decorate(options.dataAdapter, MaximumInputLength)),
                    options.maximumSelectionLength > 0 && (options.dataAdapter = Utils.Decorate(options.dataAdapter, MaximumSelectionLength)),
                    options.tags && (options.dataAdapter = Utils.Decorate(options.dataAdapter, Tags)),
                    null == options.tokenSeparators && null == options.tokenizer || (options.dataAdapter = Utils.Decorate(options.dataAdapter, Tokenizer)),
                    null != options.query) {
                        var Query = require(options.amdBase + "compat/query");
                        options.dataAdapter = Utils.Decorate(options.dataAdapter, Query)
                    }
                    if (null != options.initSelection) {
                        var InitSelection = require(options.amdBase + "compat/initSelection");
                        options.dataAdapter = Utils.Decorate(options.dataAdapter, InitSelection)
                    }
                }
                if (null == options.resultsAdapter && (options.resultsAdapter = ResultsList,
                null != options.ajax && (options.resultsAdapter = Utils.Decorate(options.resultsAdapter, InfiniteScroll)),
                null != options.placeholder && (options.resultsAdapter = Utils.Decorate(options.resultsAdapter, HidePlaceholder)),
                options.selectOnClose && (options.resultsAdapter = Utils.Decorate(options.resultsAdapter, SelectOnClose))),
                null == options.dropdownAdapter) {
                    if (options.multiple)
                        options.dropdownAdapter = Dropdown;
                    else {
                        var SearchableDropdown = Utils.Decorate(Dropdown, DropdownSearch);
                        options.dropdownAdapter = SearchableDropdown
                    }
                    if (0 !== options.minimumResultsForSearch && (options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, MinimumResultsForSearch)),
                    options.closeOnSelect && (options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, CloseOnSelect)),
                    null != options.dropdownCssClass || null != options.dropdownCss || null != options.adaptDropdownCssClass) {
                        var DropdownCSS = require(options.amdBase + "compat/dropdownCss");
                        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownCSS)
                    }
                    options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, AttachBody)
                }
                if (null == options.selectionAdapter) {
                    if (options.multiple ? options.selectionAdapter = MultipleSelection : options.selectionAdapter = SingleSelection,
                    null != options.placeholder && (options.selectionAdapter = Utils.Decorate(options.selectionAdapter, Placeholder)),
                    options.allowClear && (options.selectionAdapter = Utils.Decorate(options.selectionAdapter, AllowClear)),
                    options.multiple && (options.selectionAdapter = Utils.Decorate(options.selectionAdapter, SelectionSearch)),
                    null != options.containerCssClass || null != options.containerCss || null != options.adaptContainerCssClass) {
                        var ContainerCSS = require(options.amdBase + "compat/containerCss");
                        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, ContainerCSS)
                    }
                    options.selectionAdapter = Utils.Decorate(options.selectionAdapter, EventRelay)
                }
                if ("string" == typeof options.language)
                    if (options.language.indexOf("-") > 0) {
                        var languageParts = options.language.split("-")
                          , baseLanguage = languageParts[0];
                        options.language = [options.language, baseLanguage]
                    } else
                        options.language = [options.language];
                if ($.isArray(options.language)) {
                    var languages = new Translation;
                    options.language.push("en");
                    for (var languageNames = options.language, l = 0; l < languageNames.length; l++) {
                        var name = languageNames[l]
                          , language = {};
                        try {
                            language = Translation.loadPath(name)
                        } catch (e) {
                            try {
                                name = this.defaults.amdLanguageBase + name,
                                language = Translation.loadPath(name)
                            } catch (ex) {
                                options.debug && window.console && console.warn && console.warn('Select2: The language file for "' + name + '" could not be automatically loaded. A fallback will be used instead.');
                                continue
                            }
                        }
                        languages.extend(language)
                    }
                    options.translations = languages
                } else {
                    var baseTranslation = Translation.loadPath(this.defaults.amdLanguageBase + "en")
                      , customTranslation = new Translation(options.language);
                    customTranslation.extend(baseTranslation),
                    options.translations = customTranslation
                }
                return options
            }
            ,
            Defaults.prototype.reset = function() {
                function stripDiacritics(text) {
                    function match(a) {
                        return DIACRITICS[a] || a
                    }
                    return text.replace(/[^\u0000-\u007E]/g, match)
                }
                function matcher(params, data) {
                    if ("" === $.trim(params.term))
                        return data;
                    if (data.children && data.children.length > 0) {
                        for (var match = $.extend(!0, {}, data), c = data.children.length - 1; c >= 0; c--) {
                            var child = data.children[c]
                              , matches = matcher(params, child);
                            null == matches && match.children.splice(c, 1)
                        }
                        return match.children.length > 0 ? match : matcher(params, match)
                    }
                    var original = stripDiacritics(data.text).toUpperCase()
                      , term = stripDiacritics(params.term).toUpperCase();
                    return original.indexOf(term) > -1 ? data : null
                }
                this.defaults = {
                    amdBase: "./",
                    amdLanguageBase: "./i18n/",
                    closeOnSelect: !0,
                    debug: !1,
                    dropdownAutoWidth: !1,
                    escapeMarkup: Utils.escapeMarkup,
                    language: EnglishTranslation,
                    matcher: matcher,
                    minimumInputLength: 0,
                    maximumInputLength: 0,
                    maximumSelectionLength: 0,
                    minimumResultsForSearch: 0,
                    selectOnClose: !1,
                    sorter: function(data) {
                        return data
                    },
                    templateResult: function(result) {
                        return result.text
                    },
                    templateSelection: function(selection) {
                        return selection.text
                    },
                    theme: "default",
                    width: "resolve"
                }
            }
            ,
            Defaults.prototype.set = function(key, value) {
                var camelKey = $.camelCase(key)
                  , data = {};
                data[camelKey] = value;
                var convertedData = Utils._convertData(data);
                $.extend(this.defaults, convertedData)
            }
            ;
            var defaults = new Defaults;
            return defaults
        }),
        S2.define("select2/options", ["require", "jquery", "./defaults", "./utils"], function(require, $, Defaults, Utils) {
            function Options(options, $element) {
                if (this.options = options,
                null != $element && this.fromElement($element),
                this.options = Defaults.apply(this.options),
                $element && $element.is("input")) {
                    var InputCompat = require(this.get("amdBase") + "compat/inputData");
                    this.options.dataAdapter = Utils.Decorate(this.options.dataAdapter, InputCompat)
                }
            }
            return Options.prototype.fromElement = function($e) {
                var excludedData = ["select2"];
                null == this.options.multiple && (this.options.multiple = $e.prop("multiple")),
                null == this.options.disabled && (this.options.disabled = $e.prop("disabled")),
                null == this.options.language && ($e.prop("lang") ? this.options.language = $e.prop("lang").toLowerCase() : $e.closest("[lang]").prop("lang") && (this.options.language = $e.closest("[lang]").prop("lang"))),
                null == this.options.dir && ($e.prop("dir") ? this.options.dir = $e.prop("dir") : $e.closest("[dir]").prop("dir") ? this.options.dir = $e.closest("[dir]").prop("dir") : this.options.dir = "ltr"),
                $e.prop("disabled", this.options.disabled),
                $e.prop("multiple", this.options.multiple),
                $e.data("select2Tags") && (this.options.debug && window.console && console.warn && console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),
                $e.data("data", $e.data("select2Tags")),
                $e.data("tags", !0)),
                $e.data("ajaxUrl") && (this.options.debug && window.console && console.warn && console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),
                $e.attr("ajax--url", $e.data("ajaxUrl")),
                $e.data("ajax--url", $e.data("ajaxUrl")));
                var dataset = {};
                dataset = $.fn.jquery && "1." == $.fn.jquery.substr(0, 2) && $e[0].dataset ? $.extend(!0, {}, $e[0].dataset, $e.data()) : $e.data();
                var data = $.extend(!0, {}, dataset);
                data = Utils._convertData(data);
                for (var key in data)
                    $.inArray(key, excludedData) > -1 || ($.isPlainObject(this.options[key]) ? $.extend(this.options[key], data[key]) : this.options[key] = data[key]);
                return this
            }
            ,
            Options.prototype.get = function(key) {
                return this.options[key]
            }
            ,
            Options.prototype.set = function(key, val) {
                this.options[key] = val
            }
            ,
            Options
        }),
        S2.define("select2/core", ["jquery", "./options", "./utils", "./keys"], function($, Options, Utils, KEYS) {
            var Select2 = function($element, options) {
                null != $element.data("select2") && $element.data("select2").destroy(),
                this.$element = $element,
                this.id = this._generateId($element),
                options = options || {},
                this.options = new Options(options,$element),
                Select2.__super__.constructor.call(this);
                var tabindex = $element.attr("tabindex") || 0;
                $element.data("old-tabindex", tabindex),
                $element.attr("tabindex", "-1");
                var DataAdapter = this.options.get("dataAdapter");
                this.dataAdapter = new DataAdapter($element,this.options);
                var $container = this.render();
                this._placeContainer($container);
                var SelectionAdapter = this.options.get("selectionAdapter");
                this.selection = new SelectionAdapter($element,this.options),
                this.$selection = this.selection.render(),
                this.selection.position(this.$selection, $container);
                var DropdownAdapter = this.options.get("dropdownAdapter");
                this.dropdown = new DropdownAdapter($element,this.options),
                this.$dropdown = this.dropdown.render(),
                this.dropdown.position(this.$dropdown, $container);
                var ResultsAdapter = this.options.get("resultsAdapter");
                this.results = new ResultsAdapter($element,this.options,this.dataAdapter),
                this.$results = this.results.render(),
                this.results.position(this.$results, this.$dropdown);
                var self = this;
                this._bindAdapters(),
                this._registerDomEvents(),
                this._registerDataEvents(),
                this._registerSelectionEvents(),
                this._registerDropdownEvents(),
                this._registerResultsEvents(),
                this._registerEvents(),
                this.dataAdapter.current(function(initialData) {
                    self.trigger("selection:update", {
                        data: initialData
                    })
                }),
                $element.addClass("select2-hidden-accessible"),
                $element.attr("aria-hidden", "true"),
                this._syncAttributes(),
                $element.data("select2", this)
            };
            return Utils.Extend(Select2, Utils.Observable),
            Select2.prototype._generateId = function($element) {
                var id = "";
                return id = null != $element.attr("id") ? $element.attr("id") : null != $element.attr("name") ? $element.attr("name") + "-" + Utils.generateChars(2) : Utils.generateChars(4),
                id = "select2-" + id
            }
            ,
            Select2.prototype._placeContainer = function($container) {
                $container.insertAfter(this.$element);
                var width = this._resolveWidth(this.$element, this.options.get("width"));
                null != width && $container.css("width", width)
            }
            ,
            Select2.prototype._resolveWidth = function($element, method) {
                var WIDTH = /^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;
                if ("resolve" == method) {
                    var styleWidth = this._resolveWidth($element, "style");
                    return null != styleWidth ? styleWidth : this._resolveWidth($element, "element")
                }
                if ("element" == method) {
                    var elementWidth = $element.outerWidth(!1);
                    return 0 >= elementWidth ? "auto" : elementWidth + "px"
                }
                if ("style" == method) {
                    var style = $element.attr("style");
                    if ("string" != typeof style)
                        return null;
                    for (var attrs = style.split(";"), i = 0, l = attrs.length; l > i; i += 1) {
                        var attr = attrs[i].replace(/\s/g, "")
                          , matches = attr.match(WIDTH);
                        if (null !== matches && matches.length >= 1)
                            return matches[1]
                    }
                    return null
                }
                return method
            }
            ,
            Select2.prototype._bindAdapters = function() {
                this.dataAdapter.bind(this, this.$container),
                this.selection.bind(this, this.$container),
                this.dropdown.bind(this, this.$container),
                this.results.bind(this, this.$container)
            }
            ,
            Select2.prototype._registerDomEvents = function() {
                var self = this;
                this.$element.on("change.select2", function() {
                    self.dataAdapter.current(function(data) {
                        self.trigger("selection:update", {
                            data: data
                        })
                    })
                }),
                this._sync = Utils.bind(this._syncAttributes, this),
                this.$element[0].attachEvent && this.$element[0].attachEvent("onpropertychange", this._sync);
                var observer = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
                null != observer ? (this._observer = new observer(function(mutations) {
                    $.each(mutations, self._sync)
                }
                ),
                this._observer.observe(this.$element[0], {
                    attributes: !0,
                    subtree: !1
                })) : this.$element[0].addEventListener && this.$element[0].addEventListener("DOMAttrModified", self._sync, !1)
            }
            ,
            Select2.prototype._registerDataEvents = function() {
                var self = this;
                this.dataAdapter.on("*", function(name, params) {
                    self.trigger(name, params)
                })
            }
            ,
            Select2.prototype._registerSelectionEvents = function() {
                var self = this
                  , nonRelayEvents = ["toggle", "focus"];
                this.selection.on("toggle", function() {
                    self.toggleDropdown()
                }),
                this.selection.on("focus", function(params) {
                    self.focus(params)
                }),
                this.selection.on("*", function(name, params) {
                    -1 === $.inArray(name, nonRelayEvents) && self.trigger(name, params)
                })
            }
            ,
            Select2.prototype._registerDropdownEvents = function() {
                var self = this;
                this.dropdown.on("*", function(name, params) {
                    self.trigger(name, params)
                })
            }
            ,
            Select2.prototype._registerResultsEvents = function() {
                var self = this;
                this.results.on("*", function(name, params) {
                    self.trigger(name, params)
                })
            }
            ,
            Select2.prototype._registerEvents = function() {
                var self = this;
                this.on("open", function() {
                    self.$container.addClass("select2-container--open")
                }),
                this.on("close", function() {
                    self.$container.removeClass("select2-container--open")
                }),
                this.on("enable", function() {
                    self.$container.removeClass("select2-container--disabled")
                }),
                this.on("disable", function() {
                    self.$container.addClass("select2-container--disabled")
                }),
                this.on("blur", function() {
                    self.$container.removeClass("select2-container--focus")
                }),
                this.on("query", function(params) {
                    self.isOpen() || self.trigger("open", {}),
                    this.dataAdapter.query(params, function(data) {
                        self.trigger("results:all", {
                            data: data,
                            query: params
                        })
                    })
                }),
                this.on("query:append", function(params) {
                    this.dataAdapter.query(params, function(data) {
                        self.trigger("results:append", {
                            data: data,
                            query: params
                        })
                    })
                }),
                this.on("keypress", function(evt) {
                    var key = evt.which;
                    self.isOpen() ? key === KEYS.ESC || key === KEYS.TAB || key === KEYS.UP && evt.altKey ? (self.close(),
                    evt.preventDefault()) : key === KEYS.ENTER ? (self.trigger("results:select", {}),
                    evt.preventDefault()) : key === KEYS.SPACE && evt.ctrlKey ? (self.trigger("results:toggle", {}),
                    evt.preventDefault()) : key === KEYS.UP ? (self.trigger("results:previous", {}),
                    evt.preventDefault()) : key === KEYS.DOWN && (self.trigger("results:next", {}),
                    evt.preventDefault()) : (key === KEYS.ENTER || key === KEYS.SPACE || key === KEYS.DOWN && evt.altKey) && (self.open(),
                    evt.preventDefault())
                })
            }
            ,
            Select2.prototype._syncAttributes = function() {
                this.options.set("disabled", this.$element.prop("disabled")),
                this.options.get("disabled") ? (this.isOpen() && this.close(),
                this.trigger("disable", {})) : this.trigger("enable", {})
            }
            ,
            Select2.prototype.trigger = function(name, args) {
                var actualTrigger = Select2.__super__.trigger
                  , preTriggerMap = {
                    open: "opening",
                    close: "closing",
                    select: "selecting",
                    unselect: "unselecting"
                };
                if (void 0 === args && (args = {}),
                name in preTriggerMap) {
                    var preTriggerName = preTriggerMap[name]
                      , preTriggerArgs = {
                        prevented: !1,
                        name: name,
                        args: args
                    };
                    if (actualTrigger.call(this, preTriggerName, preTriggerArgs),
                    preTriggerArgs.prevented)
                        return void (args.prevented = !0)
                }
                actualTrigger.call(this, name, args)
            }
            ,
            Select2.prototype.toggleDropdown = function() {
                this.options.get("disabled") || (this.isOpen() ? this.close() : this.open())
            }
            ,
            Select2.prototype.open = function() {
                this.isOpen() || this.trigger("query", {})
            }
            ,
            Select2.prototype.close = function() {
                this.isOpen() && this.trigger("close", {})
            }
            ,
            Select2.prototype.isOpen = function() {
                return this.$container.hasClass("select2-container--open")
            }
            ,
            Select2.prototype.hasFocus = function() {
                return this.$container.hasClass("select2-container--focus")
            }
            ,
            Select2.prototype.focus = function() {
                this.hasFocus() || (this.$container.addClass("select2-container--focus"),
                this.trigger("focus", {}))
            }
            ,
            Select2.prototype.enable = function(args) {
                this.options.get("debug") && window.console && console.warn && console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),
                null != args && 0 !== args.length || (args = [!0]);
                var disabled = !args[0];
                this.$element.prop("disabled", disabled)
            }
            ,
            Select2.prototype.data = function() {
                this.options.get("debug") && arguments.length > 0 && window.console && console.warn && console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');
                var data = [];
                return this.dataAdapter.current(function(currentData) {
                    data = currentData
                }),
                data
            }
            ,
            Select2.prototype.val = function(args) {
                if (this.options.get("debug") && window.console && console.warn && console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),
                null == args || 0 === args.length)
                    return this.$element.val();
                var newVal = args[0];
                $.isArray(newVal) && (newVal = $.map(newVal, function(obj) {
                    return obj.toString()
                })),
                this.$element.val(newVal).trigger("change")
            }
            ,
            Select2.prototype.destroy = function() {
                this.$container.remove(),
                this.$element[0].detachEvent && this.$element[0].detachEvent("onpropertychange", this._sync),
                null != this._observer ? (this._observer.disconnect(),
                this._observer = null) : this.$element[0].removeEventListener && this.$element[0].removeEventListener("DOMAttrModified", this._sync, !1),
                this._sync = null,
                this.$element.off(".select2"),
                this.$element.attr("tabindex", this.$element.data("old-tabindex")),
                this.$element.removeClass("select2-hidden-accessible"),
                this.$element.attr("aria-hidden", "false"),
                this.$element.removeData("select2"),
                this.dataAdapter.destroy(),
                this.selection.destroy(),
                this.dropdown.destroy(),
                this.results.destroy(),
                this.dataAdapter = null,
                this.selection = null,
                this.dropdown = null,
                this.results = null
            }
            ,
            Select2.prototype.render = function() {
                var $container = $('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');
                return $container.attr("dir", this.options.get("dir")),
                this.$container = $container,
                this.$container.addClass("select2-container--" + this.options.get("theme")),
                $container.data("element", this.$element),
                $container
            }
            ,
            Select2
        }),
        S2.define("jquery-mousewheel", ["jquery"], function($) {
            return $
        }),
        S2.define("jquery.select2", ["jquery", "jquery-mousewheel", "./select2/core", "./select2/defaults"], function($, _, Select2, Defaults) {
            if (null == $.fn.select2) {
                var thisMethods = ["open", "close", "destroy"];
                $.fn.select2 = function(options) {
                    if (options = options || {},
                    "object" == typeof options)
                        return this.each(function() {
                            var instanceOptions = $.extend(!0, {}, options);
                            new Select2($(this),instanceOptions)
                        }),
                        this;
                    if ("string" == typeof options) {
                        var ret;
                        return this.each(function() {
                            var instance = $(this).data("select2");
                            null == instance && window.console && console.error && console.error("The select2('" + options + "') method was called on an element that is not using Select2.");
                            var args = Array.prototype.slice.call(arguments, 1);
                            ret = instance[options].apply(instance, args)
                        }),
                        $.inArray(options, thisMethods) > -1 ? this : ret
                    }
                    throw new Error("Invalid arguments for Select2: " + options)
                }
            }
            return null == $.fn.select2.defaults && ($.fn.select2.defaults = Defaults),
            Select2
        }),
        {
            define: S2.define,
            require: S2.require
        }
    }()
      , select2 = S2.require("jquery.select2");
    return jQuery.fn.select2.amd = S2,
    select2
}),
!function(a, b) {
    "use strict";
    function c(a) {
        if (a = a[0],
        a.previousElementSibling)
            return b.element(a.previousElementSibling);
        for (var c = a.previousSibling; null != c && 1 != c.nodeType; )
            c = c.previousSibling;
        return b.element(c)
    }
    function d(a, b) {
        var d = c(a);
        d.length > 0 ? d.after(b) : a.parent().prepend(b)
    }
    function e(a, c) {
        return a instanceof b.element && (a = a[0]),
        null !== h ? a[h](c) : void 0
    }
    var f = b.module("angular-sortable-view", []);
    f.directive("svRoot", [function() {
        function a(a, b, c) {
            return c ? a.x - b.x < 0 : a.y - b.y < 0
        }
        function b(a) {
            return g[a]
        }
        function c(a) {
            delete g[a]
        }
        var f, g = Object.create(null);
        return {
            restrict: "A",
            controller: ["$scope", "$attrs", "$interpolate", "$parse", function(h, i, j, k) {
                var l = j(i.svRoot)(h) || h.$id;
                g[l] || (g[l] = []);
                var m, n, o, p, q, r, s, t = !1, u = k(i.svOnSort);
                i.svOnStart = i.$$element[0].attributes["sv-on-start"],
                i.svOnStart = i.svOnStart && i.svOnStart.value;
                var v = k(i.svOnStart);
                if (this.sortingInProgress = function() {
                    return f
                }
                ,
                i.svGrid) {
                    if (t = "true" === i.svGrid ? !0 : "false" === i.svGrid ? !1 : null,
                    null === t)
                        throw "Invalid value of sv-grid attribute"
                } else
                    h.$watchCollection(function() {
                        return b(l)
                    }, function(a) {
                        t = !1;
                        var b = a.filter(function(a) {
                            return !a.container
                        }).map(function(a) {
                            return {
                                part: a.getPart().id,
                                y: a.element[0].getBoundingClientRect().top
                            }
                        })
                          , c = Object.create(null);
                        b.forEach(function(a) {
                            c[a.part] ? c[a.part].push(a.y) : c[a.part] = [a.y]
                        }),
                        Object.keys(c).forEach(function(a) {
                            c[a].sort(),
                            c[a].forEach(function(b, d) {
                                d < c[a].length - 1 && b > 0 && b === c[a][d + 1] && (t = !0)
                            })
                        })
                    });
                this.$moveUpdate = function(c, g, i, j, k, u, w) {
                    var x = i[0].getBoundingClientRect();
                    "element" === c.tolerance && (g = {
                        x: ~~(x.left + x.width / 2),
                        y: ~~(x.top + x.height / 2)
                    }),
                    f = !0,
                    m = [],
                    n || (k ? (n = k.clone(),
                    n.removeClass("ng-hide")) : (n = j.clone(),
                    n.addClass("sv-visibility-hidden"),
                    n.addClass("sv-placeholder"),
                    n.css({
                        height: x.height + "px",
                        width: x.width + "px"
                    })),
                    s = j[0].nextSibling,
                    j.after(n),
                    j[0].parentNode.removeChild(j[0]),
                    j.removeClass("sv-visibility-hidden"),
                    q = j,
                    o = c,
                    p = i,
                    v(h, {
                        $helper: p,
                        $part: u.model(u.scope),
                        $index: w,
                        $item: u.model(u.scope)[w]
                    })),
                    p[0].reposition({
                        x: g.x + document.body.scrollLeft - g.offset.x * x.width,
                        y: g.y + document.body.scrollTop - g.offset.y * x.height
                    }),
                    b(l).forEach(function(b) {
                        if (null == c.containment || e(b.element, c.containment) || e(b.element, c.containment + " *")) {
                            var d = b.element[0].getBoundingClientRect()
                              , f = {
                                x: ~~(d.left + d.width / 2),
                                y: ~~(d.top + d.height / 2)
                            };
                            b.container || !b.element[0].scrollHeight && !b.element[0].scrollWidth || m.push({
                                element: b.element,
                                q: (f.x - g.x) * (f.x - g.x) + (f.y - g.y) * (f.y - g.y),
                                view: b.getPart(),
                                targetIndex: b.getIndex(),
                                after: a(f, g, t)
                            }),
                            b.container && !b.element[0].querySelector("[sv-element]:not(.sv-placeholder):not(.sv-source)") && m.push({
                                element: b.element,
                                q: (f.x - g.x) * (f.x - g.x) + (f.y - g.y) * (f.y - g.y),
                                view: b.getPart(),
                                targetIndex: 0,
                                container: !0
                            })
                        }
                    });
                    var y = n[0].getBoundingClientRect()
                      , z = {
                        x: ~~(y.left + y.width / 2),
                        y: ~~(y.top + y.height / 2)
                    };
                    m.push({
                        q: (z.x - g.x) * (z.x - g.x) + (z.y - g.y) * (z.y - g.y),
                        element: n,
                        placeholder: !0
                    }),
                    m.sort(function(a, b) {
                        return a.q - b.q
                    }),
                    m.forEach(function(a, b) {
                        0 !== b || a.placeholder || a.container ? 0 === b && a.container ? (r = a,
                        a.element.append(n)) : a.element.removeClass("sv-candidate") : (r = a,
                        a.element.addClass("sv-candidate"),
                        a.after ? a.element.after(n) : d(a.element, n))
                    })
                }
                ,
                this.$drop = function(a, b, c) {
                    function d() {
                        if (f = !1,
                        n.remove(),
                        p.remove(),
                        s.parentNode.insertBefore(q[0], s),
                        m = void 0,
                        n = void 0,
                        c = void 0,
                        p = void 0,
                        q = void 0,
                        r) {
                            r.element.removeClass("sv-candidate");
                            var d = a.model(a.scope).splice(b, 1)
                              , e = r.targetIndex;
                            r.view === a && r.targetIndex > b && e--,
                            r.after && e++,
                            r.view.model(r.view.scope).splice(e, 0, d[0]),
                            (r.view !== a || b !== e) && u(h, {
                                $partTo: r.view.model(r.view.scope),
                                $partFrom: a.model(a.scope),
                                $item: d[0],
                                $indexTo: e,
                                $indexFrom: b
                            }),
                            h.$root.$$phase || h.$apply()
                        }
                        r = void 0
                    }
                    if (n)
                        if (c.revert) {
                            var e = n[0].getBoundingClientRect()
                              , g = p[0].getBoundingClientRect()
                              , i = Math.sqrt(Math.pow(g.top - e.top, 2) + Math.pow(g.left - e.left, 2))
                              , j = +c.revert * i / 200;
                            j = Math.min(j, +c.revert),
                            ["-webkit-", "-moz-", "-ms-", "-o-", ""].forEach(function(a) {
                                "undefined" != typeof p[0].style[a + "transition"] && (p[0].style[a + "transition"] = "all " + j + "ms ease")
                            }),
                            setTimeout(d, j),
                            p.css({
                                top: e.top + document.body.scrollTop + "px",
                                left: e.left + document.body.scrollLeft + "px"
                            })
                        } else
                            d()
                }
                ,
                this.addToSortableElements = function(a) {
                    b(l).push(a)
                }
                ,
                this.removeFromSortableElements = function(a) {
                    var d = b(l)
                      , e = d.indexOf(a);
                    e > -1 && (d.splice(e, 1),
                    0 === d.length && c(l))
                }
            }
            ]
        }
    }
    ]),
    f.directive("svPart", ["$parse", function(a) {
        return {
            restrict: "A",
            require: "^svRoot",
            controller: ["$scope", function(a) {
                a.$ctrl = this,
                this.getPart = function() {
                    return a.part
                }
                ,
                this.$drop = function(b, c) {
                    a.$sortableRoot.$drop(a.part, b, c)
                }
            }
            ],
            scope: !0,
            link: function(b, c, d, e) {
                if (!d.svPart)
                    throw new Error("no model provided");
                var f = a(d.svPart);
                if (!f.assign)
                    throw new Error("model not assignable");
                b.part = {
                    id: b.$id,
                    element: c,
                    model: f,
                    scope: b
                },
                b.$sortableRoot = e;
                var g = {
                    element: c,
                    getPart: b.$ctrl.getPart,
                    container: !0
                };
                e.addToSortableElements(g),
                b.$on("$destroy", function() {
                    e.removeFromSortableElements(g)
                })
            }
        }
    }
    ]),
    f.directive("svElement", ["$parse", function(a) {
        return {
            restrict: "A",
            require: ["^svPart", "^svRoot"],
            controller: ["$scope", function(a) {
                a.$ctrl = this
            }
            ],
            link: function(c, d, e, f) {
                function g(g) {
                    function h(a) {
                        m || (d.parent().prepend(p),
                        m = !0),
                        f[1].$moveUpdate(j, {
                            x: a.clientX,
                            y: a.clientY,
                            offset: s
                        }, p, d, l, f[0].getPart(), c.$index)
                    }
                    if (!f[1].sortingInProgress() && 0 == g.button) {
                        m = !1;
                        var j = a(e.svElement)(c);
                        if (j = b.extend({}, {
                            tolerance: "pointer",
                            revert: 200,
                            containment: "html"
                        }, j),
                        j.containment)
                            var o = i.call(d, j.containment)[0].getBoundingClientRect();
                        var p, q = d, r = d[0].getBoundingClientRect();
                        k || (k = f[0].helper),
                        l || (l = f[0].placeholder),
                        k ? (p = k.clone(),
                        p.removeClass("ng-hide"),
                        p.css({
                            left: r.left + document.body.scrollLeft + "px",
                            top: r.top + document.body.scrollTop + "px"
                        }),
                        q.addClass("sv-visibility-hidden")) : (p = q.clone(),
                        p.addClass("sv-helper").css({
                            left: r.left + document.body.scrollLeft + "px",
                            top: r.top + document.body.scrollTop + "px",
                            width: r.width + "px"
                        })),
                        p[0].reposition = function(a) {
                            var b = a.x
                              , c = a.y
                              , d = p[0].getBoundingClientRect()
                              , e = document.body;
                            o && (c < o.top + e.scrollTop && (c = o.top + e.scrollTop),
                            c + d.height > o.top + e.scrollTop + o.height && (c = o.top + e.scrollTop + o.height - d.height),
                            b < o.left + e.scrollLeft && (b = o.left + e.scrollLeft),
                            b + d.width > o.left + e.scrollLeft + o.width && (b = o.left + e.scrollLeft + o.width - d.width)),
                            this.style.left = b - e.scrollLeft + "px",
                            this.style.top = c - e.scrollTop + "px"
                        }
                        ;
                        var s = {
                            x: (g.clientX - r.left) / r.width,
                            y: (g.clientY - r.top) / r.height
                        };
                        n.addClass("sv-sorting-in-progress"),
                        n.on("mousemove", h).on("mouseup", function t() {
                            n.off("mousemove", h),
                            n.off("mouseup", t),
                            n.removeClass("sv-sorting-in-progress"),
                            m && f[0].$drop(c.$index, j)
                        })
                    }
                }
                var h = {
                    element: d,
                    getPart: f[0].getPart,
                    getIndex: function() {
                        return c.$index
                    }
                };
                f[1].addToSortableElements(h),
                c.$on("$destroy", function() {
                    f[1].removeFromSortableElements(h)
                });
                var j = d;
                j.on("mousedown", g),
                c.$watch("$ctrl.handle", function(a) {
                    a && (j.off("mousedown", g),
                    j = a,
                    j.on("mousedown", g))
                });
                var k;
                c.$watch("$ctrl.helper", function(a) {
                    a && (k = a)
                });
                var l;
                c.$watch("$ctrl.placeholder", function(a) {
                    a && (l = a)
                });
                var m, n = (b.element(document.body),
                b.element(document.documentElement))
            }
        }
    }
    ]),
    f.directive("svHandle", function() {
        return {
            require: "?^svElement",
            link: function(a, b, c, d) {
                d && (d.handle = b)
            }
        }
    }),
    f.directive("svHelper", function() {
        return {
            require: ["?^svPart", "?^svElement"],
            link: function(a, b, c, d) {
                b.addClass("sv-helper").addClass("ng-hide"),
                d[1] ? d[1].helper = b : d[0] && (d[0].helper = b)
            }
        }
    }),
    f.directive("svPlaceholder", function() {
        return {
            require: ["?^svPart", "?^svElement"],
            link: function(a, b, c, d) {
                b.addClass("sv-placeholder").addClass("ng-hide"),
                d[1] ? d[1].placeholder = b : d[0] && (d[0].placeholder = b)
            }
        }
    }),
    b.element(document.head).append(["<style>.sv-helper{position: fixed !important;z-index: 99999;margin: 0 !important;}.sv-candidate{}.sv-placeholder{}.sv-sorting-in-progress{-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}.sv-visibility-hidden{visibility: hidden !important;opacity: 0 !important;}</style>"].join(""));
    var g = document.documentElement
      , h = g.matches ? "matches" : g.matchesSelector ? "matchesSelector" : g.webkitMatches ? "webkitMatches" : g.webkitMatchesSelector ? "webkitMatchesSelector" : g.msMatches ? "msMatches" : g.msMatchesSelector ? "msMatchesSelector" : g.mozMatches ? "mozMatches" : g.mozMatchesSelector ? "mozMatchesSelector" : null;
    if (null == h)
        throw "This browser doesn't support the HTMLElement.matches method";
    var i = b.element.prototype.closest || function(a) {
        for (var c = this[0].parentNode; c !== document.documentElement && !c[h](a); )
            c = c.parentNode;
        return c[h](a) ? b.element(c) : b.element()
    }
}(window, window.angular),
function($) {
    $.jgrid = {
        defaults: {
            recordtext: "View {0} - {1} of {2}",
            emptyrecords: "No records to view",
            loadtext: "Loading...",
            pgtext: "Page {0} of {1}"
        },
        search: {
            caption: "Search...",
            Find: "Find",
            Reset: "Reset",
            odata: ["equal", "not equal", "less", "less or equal", "greater", "greater or equal", "begins with", "does not begin with", "is in", "is not in", "ends with", "does not end with", "contains", "does not contain"],
            groupOps: [{
                op: "AND",
                text: "all"
            }, {
                op: "OR",
                text: "any"
            }],
            matchText: " match",
            rulesText: " rules"
        },
        edit: {
            addCaption: "Add Record",
            editCaption: "Edit Record",
            bSubmit: "Submit",
            bCancel: "Cancel",
            bClose: "Close",
            saveData: "Data has been changed! Save changes?",
            bYes: "Yes",
            bNo: "No",
            bExit: "Cancel",
            msg: {
                required: "Field is required",
                number: "Please, enter valid number",
                minValue: "value must be greater than or equal to ",
                maxValue: "value must be less than or equal to",
                email: "is not a valid e-mail",
                integer: "Please, enter valid integer value",
                date: "Please, enter valid date value",
                url: "is not a valid URL. Prefix required ('http://' or 'https://')",
                nodefined: " is not defined!",
                novalue: " return value is required!",
                customarray: "Custom function should return array!",
                customfcheck: "Custom function should be present in case of custom checking!"
            }
        },
        view: {
            caption: "View Record",
            bClose: "Close"
        },
        del: {
            caption: "Delete",
            msg: "Delete selected record(s)?",
            bSubmit: "Delete",
            bCancel: "Cancel"
        },
        nav: {
            edittext: "",
            edittitle: "Edit selected row",
            addtext: "",
            addtitle: "Add new row",
            deltext: "",
            deltitle: "Delete selected row",
            searchtext: "",
            searchtitle: "Find records",
            refreshtext: "",
            refreshtitle: "Reload Grid",
            alertcap: "Warning",
            alerttext: "Please, select row",
            viewtext: "",
            viewtitle: "View selected row"
        },
        col: {
            caption: "Select columns",
            bSubmit: "Ok",
            bCancel: "Cancel"
        },
        errors: {
            errcap: "Error",
            nourl: "No url is set",
            norecords: "No records to process",
            model: "Length of colNames <> colModel!"
        },
        formatter: {
            integer: {
                thousandsSeparator: " ",
                defaultValue: "0"
            },
            number: {
                decimalSeparator: ".",
                thousandsSeparator: " ",
                decimalPlaces: 2,
                defaultValue: "0.00"
            },
            currency: {
                decimalSeparator: ".",
                thousandsSeparator: " ",
                decimalPlaces: 2,
                prefix: "",
                suffix: "",
                defaultValue: "0.00"
            },
            date: {
                dayNames: ["Sun", "Mon", "Tue", "Wed", "Thr", "Fri", "Sat", "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
                monthNames: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
                AmPm: ["am", "pm", "AM", "PM"],
                S: function(j) {
                    return 11 > j || j > 13 ? ["st", "nd", "rd", "th"][Math.min((j - 1) % 10, 3)] : "th"
                },
                srcformat: "Y-m-d",
                newformat: "d/m/Y",
                masks: {
                    ISO8601Long: "Y-m-d H:i:s",
                    ISO8601Short: "Y-m-d",
                    ShortDate: "n/j/Y",
                    LongDate: "l, F d, Y",
                    FullDateTime: "l, F d, Y g:i:s A",
                    MonthDay: "F d",
                    ShortTime: "g:i A",
                    LongTime: "g:i:s A",
                    SortableDateTime: "Y-m-d\\TH:i:s",
                    UniversalSortableDateTime: "Y-m-d H:i:sO",
                    YearMonth: "F, Y"
                },
                reformatAfterEdit: !1
            },
            baseLinkUrl: "",
            showAction: "",
            target: "",
            checkbox: {
                disabled: !0
            },
            idName: "id"
        }
    }
}(jQuery),
function() {
    function s(a, b) {
        var c;
        a || (a = {});
        for (c in b)
            a[c] = b[c];
        return a
    }
    function la() {
        for (var a = 0, b = arguments, c = b.length, d = {}; c > a; a++)
            d[b[a++]] = b[a];
        return d
    }
    function A(a, b) {
        return parseInt(a, b || 10)
    }
    function ma(a) {
        return "string" == typeof a
    }
    function Z(a) {
        return "object" == typeof a
    }
    function Fa(a) {
        return "[object Array]" === Object.prototype.toString.call(a)
    }
    function Ga(a) {
        return "number" == typeof a
    }
    function na(a) {
        return K.log(a) / K.LN10
    }
    function ca(a) {
        return K.pow(10, a)
    }
    function ya(a, b) {
        for (var c = a.length; c--; )
            if (a[c] === b) {
                a.splice(c, 1);
                break
            }
    }
    function u(a) {
        return a !== x && null !== a
    }
    function B(a, b, c) {
        var d, e;
        if (ma(b))
            u(c) ? a.setAttribute(b, c) : a && a.getAttribute && (e = a.getAttribute(b));
        else if (u(b) && Z(b))
            for (d in b)
                a.setAttribute(d, b[d]);
        return e
    }
    function oa(a) {
        return Fa(a) ? a : [a]
    }
    function p() {
        var b, c, a = arguments, d = a.length;
        for (b = 0; d > b; b++)
            if (c = a[b],
            "undefined" != typeof c && null !== c)
                return c
    }
    function G(a, b) {
        Ha && b && b.opacity !== x && (b.filter = "alpha(opacity=" + 100 * b.opacity + ")"),
        s(a.style, b)
    }
    function S(a, b, c, d, e) {
        return a = z.createElement(a),
        b && s(a, b),
        e && G(a, {
            padding: 0,
            border: T,
            margin: 0
        }),
        c && G(a, c),
        d && d.appendChild(a),
        a
    }
    function da(a, b) {
        var c = function() {};
        return c.prototype = new a,
        s(c.prototype, b),
        c
    }
    function Ia(a, b, c, d) {
        var e = O.lang
          , f = a;
        -1 === b ? (b = (a || 0).toString(),
        a = b.indexOf(".") > -1 ? b.split(".")[1].length : 0) : a = isNaN(b = N(b)) ? 2 : b;
        var b = a
          , c = void 0 === c ? e.decimalPoint : c
          , d = void 0 === d ? e.thousandsSep : d
          , e = 0 > f ? "-" : ""
          , a = String(A(f = N(+f || 0).toFixed(b)))
          , g = a.length > 3 ? a.length % 3 : 0;
        return e + (g ? a.substr(0, g) + d : "") + a.substr(g).replace(/(\d{3})(?=\d)/g, "$1" + d) + (b ? c + N(f - a).toFixed(b).slice(2) : "")
    }
    function sa(a, b) {
        return Array((b || 2) + 1 - String(a).length).join(0) + a
    }
    function hb(a, b, c, d) {
        var e, c = p(c, 1);
        for (e = a / c,
        b || (b = [1, 2, 2.5, 5, 10],
        d && d.allowDecimals === !1 && (1 === c ? b = [1, 2, 5, 10] : .1 >= c && (b = [1 / c]))),
        d = 0; d < b.length && (a = b[d],
        !(e <= (b[d] + (b[d + 1] || b[d])) / 2)); d++)
            ;
        return a *= c
    }
    function Nb(a, b) {
        var g, c = b || [[zb, [1, 2, 5, 10, 20, 25, 50, 100, 200, 500]], [ib, [1, 2, 5, 10, 15, 30]], [Ua, [1, 2, 5, 10, 15, 30]], [Ja, [1, 2, 3, 4, 6, 8, 12]], [pa, [1, 2]], [Va, [1, 2]], [Ka, [1, 2, 3, 4, 6]], [ta, null]], d = c[c.length - 1], e = D[d[0]], f = d[1];
        for (g = 0; g < c.length && (d = c[g],
        e = D[d[0]],
        f = d[1],
        !(c[g + 1] && a <= (e * f[f.length - 1] + D[c[g + 1][0]]) / 2)); g++)
            ;
        return e === D[ta] && 5 * e > a && (f = [1, 2, 5]),
        e === D[ta] && 5 * e > a && (f = [1, 2, 5]),
        c = hb(a / e, f),
        {
            unitRange: e,
            count: c,
            unitName: d[0]
        }
    }
    function Ob(a, b, c, d) {
        var h, e = [], f = {}, g = O.global.useUTC, i = new Date(b), b = a.unitRange, j = a.count;
        b >= D[ib] && (i.setMilliseconds(0),
        i.setSeconds(b >= D[Ua] ? 0 : j * V(i.getSeconds() / j))),
        b >= D[Ua] && i[Ab](b >= D[Ja] ? 0 : j * V(i[jb]() / j)),
        b >= D[Ja] && i[Bb](b >= D[pa] ? 0 : j * V(i[kb]() / j)),
        b >= D[pa] && i[lb](b >= D[Ka] ? 1 : j * V(i[La]() / j)),
        b >= D[Ka] && (i[Cb](b >= D[ta] ? 0 : j * V(i[Wa]() / j)),
        h = i[Xa]()),
        b >= D[ta] && (h -= h % j,
        i[Db](h)),
        b === D[Va] && i[lb](i[La]() - i[mb]() + p(d, 1)),
        d = 1,
        h = i[Xa]();
        for (var k = i.getTime(), l = i[Wa](), m = i[La](), i = g ? 0 : (864e5 + 6e4 * i.getTimezoneOffset()) % 864e5; c > k; )
            e.push(k),
            b === D[ta] ? k = Ya(h + d * j, 0) : b === D[Ka] ? k = Ya(h, l + d * j) : g || b !== D[pa] && b !== D[Va] ? (k += b * j,
            b <= D[Ja] && k % D[pa] === i && (f[k] = pa)) : k = Ya(h, l, m + d * j * (b === D[pa] ? 1 : 7)),
            d++;
        return e.push(k),
        e.info = s(a, {
            higherRanks: f,
            totalRange: b * j
        }),
        e
    }
    function Eb() {
        this.symbol = this.color = 0
    }
    function Fb(a, b) {
        var d, e, c = a.length;
        for (e = 0; c > e; e++)
            a[e].ss_i = e;
        for (a.sort(function(a, c) {
            return d = b(a, c),
            0 === d ? a.ss_i - c.ss_i : d
        }),
        e = 0; c > e; e++)
            delete a[e].ss_i
    }
    function Ma(a) {
        for (var b = a.length, c = a[0]; b--; )
            a[b] < c && (c = a[b]);
        return c
    }
    function za(a) {
        for (var b = a.length, c = a[0]; b--; )
            a[b] > c && (c = a[b]);
        return c
    }
    function Aa(a, b) {
        for (var c in a)
            a[c] && a[c] !== b && a[c].destroy && a[c].destroy(),
            delete a[c]
    }
    function Na(a) {
        Za || (Za = S(ia)),
        a && Za.appendChild(a),
        Za.innerHTML = ""
    }
    function $a(a, b) {
        var c = "Highcharts error #" + a + ": www.highcharts.com/errors/" + a;
        if (b)
            throw c;
        L.console && console.log(c)
    }
    function ja(a) {
        return parseFloat(a.toPrecision(14))
    }
    function ua(a, b) {
        Oa = p(a, b.animation)
    }
    function Gb() {
        var a = O.global.useUTC
          , b = a ? "getUTC" : "get"
          , c = a ? "setUTC" : "set";
        Ya = a ? Date.UTC : function(a, b, c, g, h, i) {
            return new Date(a,b,p(c, 1),p(g, 0),p(h, 0),p(i, 0)).getTime()
        }
        ,
        jb = b + "Minutes",
        kb = b + "Hours",
        mb = b + "Day",
        La = b + "Date",
        Wa = b + "Month",
        Xa = b + "FullYear",
        Ab = c + "Minutes",
        Bb = c + "Hours",
        lb = c + "Date",
        Cb = c + "Month",
        Db = c + "FullYear"
    }
    function va() {}
    function Pa(a, b, c) {
        this.axis = a,
        this.pos = b,
        this.type = c || "",
        this.isNew = !0,
        c || this.addLabel()
    }
    function nb(a, b) {
        return this.axis = a,
        b && (this.options = b,
        this.id = b.id),
        this
    }
    function Hb(a, b, c, d, e) {
        var f = a.chart.inverted;
        this.axis = a,
        this.isNegative = c,
        this.options = b,
        this.x = d,
        this.stack = e,
        this.alignOptions = {
            align: b.align || (f ? c ? "left" : "right" : "center"),
            verticalAlign: b.verticalAlign || (f ? "middle" : c ? "bottom" : "top"),
            y: p(b.y, f ? 4 : c ? 14 : -6),
            x: p(b.x, f ? c ? -6 : 6 : 0)
        },
        this.textAlign = b.textAlign || (f ? c ? "right" : "left" : "center")
    }
    function ob() {
        this.init.apply(this, arguments)
    }
    function pb(a, b) {
        var c = b.borderWidth
          , d = b.style
          , e = A(d.padding);
        this.chart = a,
        this.options = b,
        this.crosshairs = [],
        this.now = {
            x: 0,
            y: 0
        },
        this.isHidden = !0,
        this.label = a.renderer.label("", 0, 0, b.shape, null, null, b.useHTML, null, "tooltip").attr({
            padding: e,
            fill: b.backgroundColor,
            "stroke-width": c,
            r: b.borderRadius,
            zIndex: 8
        }).css(d).css({
            padding: 0
        }).hide().add(),
        $ || this.label.shadow(b.shadow),
        this.shared = b.shared
    }
    function qb(a, b) {
        var c = $ ? "" : b.chart.zoomType;
        this.zoomX = /x/.test(c),
        this.zoomY = /y/.test(c),
        this.options = b,
        this.chart = a,
        this.init(a, b.tooltip)
    }
    function rb(a) {
        this.init(a)
    }
    function sb(a, b) {
        var c, d = a.series;
        a.series = null,
        c = C(O, a),
        c.series = a.series = d;
        var d = c.chart
          , e = d.margin
          , e = Z(e) ? e : [e, e, e, e];
        this.optionsMarginTop = p(d.marginTop, e[0]),
        this.optionsMarginRight = p(d.marginRight, e[1]),
        this.optionsMarginBottom = p(d.marginBottom, e[2]),
        this.optionsMarginLeft = p(d.marginLeft, e[3]),
        this.runChartClick = (e = d.events) && !!e.click,
        this.callback = b,
        this.isResizing = 0,
        this.options = c,
        this.axes = [],
        this.series = [],
        this.hasCartesianSeries = d.showAxes,
        this.init(e)
    }
    var x, Ra, Za, O, cb, Oa, vb, D, Ya, jb, kb, mb, La, Wa, Xa, Ab, Bb, lb, Cb, Db, z = document, L = window, K = Math, t = K.round, V = K.floor, wa = K.ceil, v = K.max, P = K.min, N = K.abs, W = K.cos, aa = K.sin, xa = K.PI, ab = 2 * xa / 360, Ba = navigator.userAgent, Ib = L.opera, Ha = /msie/i.test(Ba) && !Ib, Qa = 8 === z.documentMode, tb = /AppleWebKit/.test(Ba), bb = /Firefox/.test(Ba), fa = !!z.createElementNS && !!z.createElementNS("http://www.w3.org/2000/svg", "svg").createSVGRect, Pb = bb && parseInt(Ba.split("Firefox/")[1], 10) < 4, $ = !fa && !Ha && !!z.createElement("canvas").getContext, ga = z.documentElement.ontouchstart !== x, Jb = {}, ub = 0, Ca = function() {}, ia = "div", T = "none", wb = "rgba(192,192,192," + (fa ? 1e-6 : .002) + ")", zb = "millisecond", ib = "second", Ua = "minute", Ja = "hour", pa = "day", Va = "week", Ka = "month", ta = "year", ba = {};
    L.Highcharts = {},
    cb = function(a, b, c) {
        if (!u(b) || isNaN(b))
            return "Invalid date";
        var e, a = p(a, "%Y-%m-%d %H:%M:%S"), d = new Date(b), f = d[kb](), g = d[mb](), h = d[La](), i = d[Wa](), j = d[Xa](), k = O.lang, l = k.weekdays, b = {
            a: l[g].substr(0, 3),
            A: l[g],
            d: sa(h),
            e: h,
            b: k.shortMonths[i],
            B: k.months[i],
            m: sa(i + 1),
            y: j.toString().substr(2, 2),
            Y: j,
            H: sa(f),
            I: sa(f % 12 || 12),
            l: f % 12 || 12,
            M: sa(d[jb]()),
            p: 12 > f ? "AM" : "PM",
            P: 12 > f ? "am" : "pm",
            S: sa(d.getSeconds()),
            L: sa(t(b % 1e3), 3)
        };
        for (e in b)
            a = a.replace("%" + e, b[e]);
        return c ? a.substr(0, 1).toUpperCase() + a.substr(1) : a
    }
    ,
    Eb.prototype = {
        wrapColor: function(a) {
            this.color >= a && (this.color = 0)
        },
        wrapSymbol: function(a) {
            this.symbol >= a && (this.symbol = 0)
        }
    },
    D = la(zb, 1, ib, 1e3, Ua, 6e4, Ja, 36e5, pa, 864e5, Va, 6048e5, Ka, 2592e6, ta, 31556952e3),
    vb = {
        init: function(a, b, c) {
            var g, h, i, b = b || "", d = a.shift, e = b.indexOf("C") > -1, f = e ? 7 : 3, b = b.split(" "), c = [].concat(c), j = function(a) {
                for (g = a.length; g--; )
                    "M" === a[g] && a.splice(g + 1, 0, a[g + 1], a[g + 2], a[g + 1], a[g + 2])
            };
            if (e && (j(b),
            j(c)),
            a.isArea && (h = b.splice(b.length - 6, 6),
            i = c.splice(c.length - 6, 6)),
            d <= c.length / f)
                for (; d--; )
                    c = [].concat(c).splice(0, f).concat(c);
            if (a.shift = 0,
            b.length)
                for (a = c.length; b.length < a; )
                    d = [].concat(b).splice(b.length - f, f),
                    e && (d[f - 6] = d[f - 2],
                    d[f - 5] = d[f - 1]),
                    b = b.concat(d);
            return h && (b = b.concat(h),
            c = c.concat(i)),
            [b, c]
        },
        step: function(a, b, c, d) {
            var e = []
              , f = a.length;
            if (1 === c)
                e = d;
            else if (f === b.length && 1 > c)
                for (; f--; )
                    d = parseFloat(a[f]),
                    e[f] = isNaN(d) ? a[f] : c * parseFloat(b[f] - d) + d;
            else
                e = b;
            return e
        }
    },
    function(a) {
        L.HighchartsAdapter = L.HighchartsAdapter || a && {
            init: function(b) {
                var e, c = a.fx, d = c.step, f = a.Tween, g = f && f.propHooks;
                a.extend(a.easing, {
                    easeOutQuad: function(a, b, c, d, e) {
                        return -d * (b /= e) * (b - 2) + c
                    }
                }),
                a.each(["cur", "_default", "width", "height"], function(a, b) {
                    var k, l, e = d;
                    "cur" === b ? e = c.prototype : "_default" === b && f && (e = g[b],
                    b = "set"),
                    (k = e[b]) && (e[b] = function(c) {
                        return c = a ? c : this,
                        l = c.elem,
                        l.attr ? l.attr(c.prop, "cur" === b ? x : c.now) : k.apply(this, arguments)
                    }
                    )
                }),
                e = function(a) {
                    var d, c = a.elem;
                    a.started || (d = b.init(c, c.d, c.toD),
                    a.start = d[0],
                    a.end = d[1],
                    a.started = !0),
                    c.attr("d", b.step(a.start, a.end, a.pos, c.toD))
                }
                ,
                f ? g.d = {
                    set: e
                } : d.d = e,
                this.each = Array.prototype.forEach ? function(a, b) {
                    return Array.prototype.forEach.call(a, b)
                }
                : function(a, b) {
                    for (var c = 0, d = a.length; d > c; c++)
                        if (b.call(a[c], a[c], c, a) === !1)
                            return c
                }
            },
            getScript: a.getScript,
            inArray: a.inArray,
            adapterRun: function(b, c) {
                return a(b)[c]()
            },
            grep: a.grep,
            map: function(a, c) {
                for (var d = [], e = 0, f = a.length; f > e; e++)
                    d[e] = c.call(a[e], a[e], e, a);
                return d
            },
            merge: function() {
                var b = arguments;
                return a.extend(!0, null, b[0], b[1], b[2], b[3])
            },
            offset: function(b) {
                return a(b).offset()
            },
            addEvent: function(b, c, d) {
                a(b).bind(c, d)
            },
            removeEvent: function(b, c, d) {
                var e = z.removeEventListener ? "removeEventListener" : "detachEvent";
                z[e] && !b[e] && (b[e] = function() {}
                ),
                a(b).unbind(c, d)
            },
            fireEvent: function(b, c, d, e) {
                var h, f = a.Event(c), g = "detached" + c;
                !Ha && d && (delete d.layerX,
                delete d.layerY),
                s(f, d),
                b[c] && (b[g] = b[c],
                b[c] = null),
                a.each(["preventDefault", "stopPropagation"], function(a, b) {
                    var c = f[b];
                    f[b] = function() {
                        try {
                            c.call(f)
                        } catch (a) {
                            "preventDefault" === b && (h = !0)
                        }
                    }
                }),
                a(b).trigger(f),
                b[g] && (b[c] = b[g],
                b[g] = null),
                e && !f.isDefaultPrevented() && !h && e(f)
            },
            washMouseEvent: function(a) {
                var c = a.originalEvent || a;
                return c.pageX = a.pageX,
                c.pageY = a.pageY,
                c
            },
            animate: function(b, c, d) {
                var e = a(b);
                c.d && (b.toD = c.d,
                c.d = 1),
                e.stop(),
                e.animate(c, d)
            },
            stop: function(b) {
                a(b).stop()
            }
        }
    }(L.jQuery);
    var X = L.HighchartsAdapter
      , F = X || {};
    X && X.init.call(X, vb);
    var db = F.adapterRun
      , Qb = F.getScript
      , Rb = F.inArray
      , n = F.each
      , Kb = F.grep
      , Sb = F.offset
      , Sa = F.map
      , C = F.merge
      , H = F.addEvent
      , U = F.removeEvent
      , E = F.fireEvent
      , Lb = F.washMouseEvent
      , xb = F.animate
      , eb = F.stop
      , F = {
        enabled: !0,
        align: "center",
        x: 0,
        y: 15,
        style: {
            color: "#666",
            fontSize: "11px",
            lineHeight: "14px"
        }
    };
    O = {
        colors: "#4572A7,#AA4643,#89A54E,#80699B,#3D96AE,#DB843D,#92A8CD,#A47D7C,#B5CA92".split(","),
        symbols: ["circle", "diamond", "square", "triangle", "triangle-down"],
        lang: {
            loading: "Loading...",
            months: "January,February,March,April,May,June,July,August,September,October,November,December".split(","),
            shortMonths: "Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),
            weekdays: "Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),
            decimalPoint: ".",
            numericSymbols: "k,M,G,T,P,E".split(","),
            resetZoom: "Reset zoom",
            resetZoomTitle: "Reset zoom level 1:1",
            thousandsSep: ","
        },
        global: {
            useUTC: !0,
            canvasToolsURL: "http://code.highcharts.com/2.3.2/modules/canvas-tools.js",
            VMLRadialGradientURL: "http://code.highcharts.com/2.3.2/gfx/vml-radial-gradient.png"
        },
        chart: {
            borderColor: "#4572A7",
            borderRadius: 5,
            defaultSeriesType: "line",
            ignoreHiddenSeries: !0,
            spacingTop: 10,
            spacingRight: 10,
            spacingBottom: 15,
            spacingLeft: 10,
            style: {
                fontFamily: '"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',
                fontSize: "12px"
            },
            backgroundColor: "#FFFFFF",
            plotBorderColor: "#C0C0C0",
            resetZoomButton: {
                theme: {
                    zIndex: 20
                },
                position: {
                    align: "right",
                    x: -10,
                    y: 10
                }
            }
        },
        title: {
            text: "Chart title",
            align: "center",
            y: 15,
            style: {
                color: "#3E576F",
                fontSize: "16px"
            }
        },
        subtitle: {
            text: "",
            align: "center",
            y: 30,
            style: {
                color: "#6D869F"
            }
        },
        plotOptions: {
            line: {
                allowPointSelect: !1,
                showCheckbox: !1,
                animation: {
                    duration: 1e3
                },
                events: {},
                lineWidth: 2,
                shadow: !0,
                marker: {
                    enabled: !0,
                    lineWidth: 0,
                    radius: 4,
                    lineColor: "#FFFFFF",
                    states: {
                        hover: {
                            enabled: !0
                        },
                        select: {
                            fillColor: "#FFFFFF",
                            lineColor: "#000000",
                            lineWidth: 2
                        }
                    }
                },
                point: {
                    events: {}
                },
                dataLabels: C(F, {
                    enabled: !1,
                    y: -6,
                    formatter: function() {
                        return this.y
                    }
                }),
                cropThreshold: 300,
                pointRange: 0,
                showInLegend: !0,
                states: {
                    hover: {
                        marker: {}
                    },
                    select: {
                        marker: {}
                    }
                },
                stickyTracking: !0
            }
        },
        labels: {
            style: {
                position: "absolute",
                color: "#3E576F"
            }
        },
        legend: {
            enabled: !0,
            align: "center",
            layout: "horizontal",
            labelFormatter: function() {
                return this.name
            },
            borderWidth: 1,
            borderColor: "#909090",
            borderRadius: 5,
            navigation: {
                activeColor: "#3E576F",
                inactiveColor: "#CCC"
            },
            shadow: !1,
            itemStyle: {
                cursor: "pointer",
                color: "#3E576F",
                fontSize: "12px"
            },
            itemHoverStyle: {
                color: "#000"
            },
            itemHiddenStyle: {
                color: "#CCC"
            },
            itemCheckboxStyle: {
                position: "absolute",
                width: "13px",
                height: "13px"
            },
            symbolWidth: 16,
            symbolPadding: 5,
            verticalAlign: "bottom",
            x: 0,
            y: 0
        },
        loading: {
            labelStyle: {
                fontWeight: "bold",
                position: "relative",
                top: "1em"
            },
            style: {
                position: "absolute",
                backgroundColor: "white",
                opacity: .5,
                textAlign: "center"
            }
        },
        tooltip: {
            enabled: !0,
            backgroundColor: "rgba(255, 255, 255, .85)",
            borderWidth: 2,
            borderRadius: 5,
            dateTimeLabelFormats: {
                millisecond: "%A, %b %e, %H:%M:%S.%L",
                second: "%A, %b %e, %H:%M:%S",
                minute: "%A, %b %e, %H:%M",
                hour: "%A, %b %e, %H:%M",
                day: "%A, %b %e, %Y",
                week: "Week from %A, %b %e, %Y",
                month: "%B %Y",
                year: "%Y"
            },
            headerFormat: '<span style="font-size: 10px">{point.key}</span><br/>',
            pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',
            shadow: !0,
            shared: $,
            snap: ga ? 25 : 10,
            style: {
                color: "#333333",
                fontSize: "12px",
                padding: "5px",
                whiteSpace: "nowrap"
            }
        },
        credits: {
            enabled: !0,
            text: "Highcharts.com",
            href: "http://www.highcharts.com",
            position: {
                align: "right",
                x: -10,
                verticalAlign: "bottom",
                y: -5
            },
            style: {
                cursor: "pointer",
                color: "#909090",
                fontSize: "10px"
            }
        }
    };
    var Y = O.plotOptions
      , X = Y.line;
    Gb();
    var qa = function(a) {
        var c, b = [];
        return function(a) {
            (c = /rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(a)) ? b = [A(c[1]), A(c[2]), A(c[3]), parseFloat(c[4], 10)] : (c = /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a)) && (b = [A(c[1], 16), A(c[2], 16), A(c[3], 16), 1])
        }(a),
        {
            get: function(c) {
                return b && !isNaN(b[0]) ? "rgb" === c ? "rgb(" + b[0] + "," + b[1] + "," + b[2] + ")" : "a" === c ? b[3] : "rgba(" + b.join(",") + ")" : a
            },
            brighten: function(a) {
                if (Ga(a) && 0 !== a) {
                    var c;
                    for (c = 0; 3 > c; c++)
                        b[c] += A(255 * a),
                        b[c] < 0 && (b[c] = 0),
                        b[c] > 255 && (b[c] = 255)
                }
                return this
            },
            setOpacity: function(a) {
                return b[3] = a,
                this
            }
        }
    };
    va.prototype = {
        init: function(a, b) {
            this.element = "span" === b ? S(b) : z.createElementNS("http://www.w3.org/2000/svg", b),
            this.renderer = a,
            this.attrSetters = {}
        },
        animate: function(a, b, c) {
            b = p(b, Oa, !0),
            eb(this),
            b ? (b = C(b),
            c && (b.complete = c),
            xb(this, a, b)) : (this.attr(a),
            c && c())
        },
        attr: function(a, b) {
            var c, d, e, f, j, m, o, g = this.element, h = g.nodeName, i = this.renderer, k = this.attrSetters, l = this.shadows, r = this;
            if (ma(a) && u(b) && (c = a,
            a = {},
            a[c] = b),
            ma(a))
                c = a,
                "circle" === h ? c = {
                    x: "cx",
                    y: "cy"
                }[c] || c : "strokeWidth" === c && (c = "stroke-width"),
                r = B(g, c) || this[c] || 0,
                "d" !== c && "visibility" !== c && (r = parseFloat(r));
            else
                for (c in a)
                    if (j = !1,
                    d = a[c],
                    e = k[c] && k[c].call(this, d, c),
                    e !== !1) {
                        if (e !== x && (d = e),
                        "d" === c)
                            d && d.join && (d = d.join(" ")),
                            /(NaN| {2}|^$)/.test(d) && (d = "M 0 0");
                        else if ("x" === c && "text" === h) {
                            for (e = 0; e < g.childNodes.length; e++)
                                f = g.childNodes[e],
                                B(f, "x") === B(g, "x") && B(f, "x", d);
                            this.rotation && B(g, "transform", "rotate(" + this.rotation + " " + d + " " + A(a.y || B(g, "y")) + ")")
                        } else if ("fill" === c)
                            d = i.color(d, g, c);
                        else if ("circle" !== h || "x" !== c && "y" !== c)
                            if ("rect" === h && "r" === c)
                                B(g, {
                                    rx: d,
                                    ry: d
                                }),
                                j = !0;
                            else if ("translateX" === c || "translateY" === c || "rotation" === c || "verticalAlign" === c)
                                j = o = !0;
                            else if ("stroke" === c)
                                d = i.color(d, g, c);
                            else if ("dashstyle" === c) {
                                if (c = "stroke-dasharray",
                                d = d && d.toLowerCase(),
                                "solid" === d)
                                    d = T;
                                else if (d) {
                                    for (d = d.replace("shortdashdotdot", "3,1,1,1,1,1,").replace("shortdashdot", "3,1,1,1").replace("shortdot", "1,1,").replace("shortdash", "3,1,").replace("longdash", "8,3,").replace(/dot/g, "1,3,").replace("dash", "4,3,").replace(/,$/, "").split(","),
                                    e = d.length; e--; )
                                        d[e] = A(d[e]) * a["stroke-width"];
                                    d = d.join(",")
                                }
                            } else
                                "isTracker" === c ? this[c] = d : "width" === c ? d = A(d) : "align" === c ? (c = "text-anchor",
                                d = {
                                    left: "start",
                                    center: "middle",
                                    right: "end"
                                }[d]) : "title" === c && (e = g.getElementsByTagName("title")[0],
                                e || (e = z.createElementNS("http://www.w3.org/2000/svg", "title"),
                                g.appendChild(e)),
                                e.textContent = d);
                        else
                            c = {
                                x: "cx",
                                y: "cy"
                            }[c] || c;
                        if ("strokeWidth" === c && (c = "stroke-width"),
                        tb && "stroke-width" === c && 0 === d && (d = 1e-6),
                        this.symbolName && /^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(c) && (m || (this.symbolAttr(a),
                        m = !0),
                        j = !0),
                        l && /^(width|height|visibility|x|y|d|transform)$/.test(c))
                            for (e = l.length; e--; )
                                B(l[e], c, "height" === c ? v(d - (l[e].cutHeight || 0), 0) : d);
                        ("width" === c || "height" === c) && "rect" === h && 0 > d && (d = 0),
                        this[c] = d,
                        o && this.updateTransform(),
                        "text" === c ? (d !== this.textStr && delete this.bBox,
                        this.textStr = d,
                        this.added && i.buildText(this)) : j || B(g, c, d)
                    }
            return r
        },
        symbolAttr: function(a) {
            var b = this;
            n("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","), function(c) {
                b[c] = p(a[c], b[c])
            }),
            b.attr({
                d: b.renderer.symbols[b.symbolName](b.x, b.y, b.width, b.height, b)
            })
        },
        clip: function(a) {
            return this.attr("clip-path", a ? "url(" + this.renderer.url + "#" + a.id + ")" : T)
        },
        crisp: function(a, b, c, d, e) {
            var f, i, g = {}, h = {}, a = a || this.strokeWidth || this.attr && this.attr("stroke-width") || 0;
            i = t(a) % 2 / 2,
            h.x = V(b || this.x || 0) + i,
            h.y = V(c || this.y || 0) + i,
            h.width = V((d || this.width || 0) - 2 * i),
            h.height = V((e || this.height || 0) - 2 * i),
            h.strokeWidth = a;
            for (f in h)
                this[f] !== h[f] && (this[f] = g[f] = h[f]);
            return g
        },
        css: function(a) {
            var c, b = this.element, b = a && a.width && "text" === b.nodeName, d = "", e = function(a, b) {
                return "-" + b.toLowerCase()
            };
            if (a && a.color && (a.fill = a.color),
            this.styles = a = s(this.styles, a),
            Ha && !fa)
                b && delete a.width,
                G(this.element, a);
            else {
                for (c in a)
                    d += c.replace(/([A-Z])/g, e) + ":" + a[c] + ";";
                this.attr({
                    style: d
                })
            }
            return b && this.added && this.renderer.buildText(this),
            this
        },
        on: function(a, b) {
            var c = b;
            return ga && "click" === a && (a = "touchstart",
            c = function(a) {
                a.preventDefault(),
                b()
            }
            ),
            this.element["on" + a] = c,
            this
        },
        setRadialReference: function(a) {
            return this.element.radialReference = a,
            this
        },
        translate: function(a, b) {
            return this.attr({
                translateX: a,
                translateY: b
            })
        },
        invert: function() {
            return this.inverted = !0,
            this.updateTransform(),
            this
        },
        htmlCss: function(a) {
            var b = this.element;
            return (b = a && "SPAN" === b.tagName && a.width) && (delete a.width,
            this.textWidth = b,
            this.updateTransform()),
            this.styles = s(this.styles, a),
            G(this.element, a),
            this
        },
        htmlGetBBox: function() {
            var a = this.element
              , b = this.bBox;
            return b || ("text" === a.nodeName && (a.style.position = "absolute"),
            b = this.bBox = {
                x: a.offsetLeft,
                y: a.offsetTop,
                width: a.offsetWidth,
                height: a.offsetHeight
            }),
            b
        },
        htmlUpdateTransform: function() {
            if (this.added) {
                var a = this.renderer
                  , b = this.element
                  , c = this.translateX || 0
                  , d = this.translateY || 0
                  , e = this.x || 0
                  , f = this.y || 0
                  , g = this.textAlign || "left"
                  , h = {
                    left: 0,
                    center: .5,
                    right: 1
                }[g]
                  , i = g && "left" !== g
                  , j = this.shadows;
                if ((c || d) && (G(b, {
                    marginLeft: c,
                    marginTop: d
                }),
                j && n(j, function(a) {
                    G(a, {
                        marginLeft: c + 1,
                        marginTop: d + 1
                    })
                })),
                this.inverted && n(b.childNodes, function(c) {
                    a.invertChild(c, b)
                }),
                "SPAN" === b.tagName) {
                    var k, l, m, ea, j = this.rotation, o = 0, r = 1, o = 0;
                    m = A(this.textWidth);
                    var q = this.xCorr || 0
                      , y = this.yCorr || 0
                      , M = [j, g, b.innerHTML, this.textWidth].join(",");
                    k = {},
                    M !== this.cTT && (u(j) && (a.isSVG ? (q = Ha ? "-ms" : tb ? "-webkit" : bb ? "-moz" : Ib ? "-o" : "",
                    k[q + "-transform"] = k.transform = "rotate(" + j + "deg)") : (o = j * ab,
                    r = W(o),
                    o = aa(o),
                    k.filter = j ? ["progid:DXImageTransform.Microsoft.Matrix(M11=", r, ", M12=", -o, ", M21=", o, ", M22=", r, ", sizingMethod='auto expand')"].join("") : T),
                    G(b, k)),
                    k = p(this.elemWidth, b.offsetWidth),
                    l = p(this.elemHeight, b.offsetHeight),
                    k > m && /[ \-]/.test(b.innerText) && (G(b, {
                        width: m + "px",
                        display: "block",
                        whiteSpace: "normal"
                    }),
                    k = m),
                    m = a.fontMetrics(b.style.fontSize).b,
                    q = 0 > r && -k,
                    y = 0 > o && -l,
                    ea = 0 > r * o,
                    q += o * m * (ea ? 1 - h : h),
                    y -= r * m * (j ? ea ? h : 1 - h : 1),
                    i && (q -= k * h * (0 > r ? -1 : 1),
                    j && (y -= l * h * (0 > o ? -1 : 1)),
                    G(b, {
                        textAlign: g
                    })),
                    this.xCorr = q,
                    this.yCorr = y),
                    G(b, {
                        left: e + q + "px",
                        top: f + y + "px"
                    }),
                    this.cTT = M
                }
            } else
                this.alignOnAdd = !0
        },
        updateTransform: function() {
            var a = this.translateX || 0
              , b = this.translateY || 0
              , c = this.inverted
              , d = this.rotation
              , e = [];
            c && (a += this.attr("width"),
            b += this.attr("height")),
            (a || b) && e.push("translate(" + a + "," + b + ")"),
            c ? e.push("rotate(90) scale(-1,1)") : d && e.push("rotate(" + d + " " + (this.x || 0) + " " + (this.y || 0) + ")"),
            e.length && B(this.element, "transform", e.join(" "))
        },
        toFront: function() {
            var a = this.element;
            return a.parentNode.appendChild(a),
            this
        },
        align: function(a, b, c) {
            a ? (this.alignOptions = a,
            this.alignByTranslate = b,
            c || this.renderer.alignedObjects.push(this)) : (a = this.alignOptions,
            b = this.alignByTranslate);
            var c = p(c, this.renderer)
              , d = a.align
              , e = a.verticalAlign
              , f = (c.x || 0) + (a.x || 0)
              , g = (c.y || 0) + (a.y || 0)
              , h = {};
            return /^(right|center)$/.test(d) && (f += (c.width - (a.width || 0)) / {
                right: 1,
                center: 2
            }[d]),
            h[b ? "translateX" : "x"] = t(f),
            /^(bottom|middle)$/.test(e) && (g += (c.height - (a.height || 0)) / ({
                bottom: 1,
                middle: 2
            }[e] || 1)),
            h[b ? "translateY" : "y"] = t(g),
            this[this.placed ? "animate" : "attr"](h),
            this.placed = !0,
            this.alignAttr = h,
            this
        },
        getBBox: function() {
            var c, a = this.bBox, b = this.renderer, d = this.rotation;
            c = this.element;
            var e = d * ab;
            if (!a) {
                if ("http://www.w3.org/2000/svg" === c.namespaceURI || b.forExport) {
                    try {
                        a = c.getBBox ? s({}, c.getBBox()) : {
                            width: c.offsetWidth,
                            height: c.offsetHeight
                        }
                    } catch (f) {}
                    (!a || a.width < 0) && (a = {
                        width: 0,
                        height: 0
                    })
                } else
                    a = this.htmlGetBBox();
                b.isSVG && (b = a.width,
                c = a.height,
                d) && (a.width = N(c * aa(e)) + N(b * W(e)),
                a.height = N(c * W(e)) + N(b * aa(e))),
                this.bBox = a
            }
            return a
        },
        show: function() {
            return this.attr({
                visibility: "visible"
            })
        },
        hide: function() {
            return this.attr({
                visibility: "hidden"
            })
        },
        add: function(a) {
            var h, b = this.renderer, c = a || b, d = c.element || b.box, e = d.childNodes, f = this.element, g = B(f, "zIndex");
            if (a && (this.parentGroup = a),
            this.parentInverted = a && a.inverted,
            void 0 !== this.textStr && b.buildText(this),
            g && (c.handleZ = !0,
            g = A(g)),
            c.handleZ)
                for (c = 0; c < e.length; c++)
                    if (a = e[c],
                    b = B(a, "zIndex"),
                    a !== f && (A(b) > g || !u(g) && u(b))) {
                        d.insertBefore(f, a),
                        h = !0;
                        break
                    }
            return h || d.appendChild(f),
            this.added = !0,
            E(this, "add"),
            this
        },
        safeRemoveChild: function(a) {
            var b = a.parentNode;
            b && b.removeChild(a)
        },
        destroy: function() {
            var e, f, a = this, b = a.element || {}, c = a.shadows, d = a.box;
            if (b.onclick = b.onmouseout = b.onmouseover = b.onmousemove = null,
            eb(a),
            a.clipPath && (a.clipPath = a.clipPath.destroy()),
            a.stops) {
                for (f = 0; f < a.stops.length; f++)
                    a.stops[f] = a.stops[f].destroy();
                a.stops = null
            }
            a.safeRemoveChild(b),
            c && n(c, function(b) {
                a.safeRemoveChild(b)
            }),
            d && d.destroy(),
            ya(a.renderer.alignedObjects, a);
            for (e in a)
                delete a[e];
            return null
        },
        empty: function() {
            for (var a = this.element, b = a.childNodes, c = b.length; c--; )
                a.removeChild(b[c])
        },
        shadow: function(a, b, c) {
            var e, f, h, i, j, k, d = [], g = this.element;
            if (a) {
                for (i = p(a.width, 3),
                j = (a.opacity || .15) / i,
                k = this.parentInverted ? "(-1,-1)" : "(" + (a.offsetX || 1) + ", " + (a.offsetY || 1) + ")",
                e = 1; i >= e; e++)
                    f = g.cloneNode(0),
                    h = 2 * i + 1 - 2 * e,
                    B(f, {
                        isShadow: "true",
                        stroke: a.color || "black",
                        "stroke-opacity": j * e,
                        "stroke-width": h,
                        transform: "translate" + k,
                        fill: T
                    }),
                    c && (B(f, "height", v(B(f, "height") - h, 0)),
                    f.cutHeight = h),
                    b ? b.element.appendChild(f) : g.parentNode.insertBefore(f, g),
                    d.push(f);
                this.shadows = d
            }
            return this
        }
    };
    var ra = function() {
        this.init.apply(this, arguments)
    };
    ra.prototype = {
        Element: va,
        init: function(a, b, c, d) {
            var f, e = location;
            f = this.createElement("svg").attr({
                xmlns: "http://www.w3.org/2000/svg",
                version: "1.1"
            }),
            a.appendChild(f.element),
            this.isSVG = !0,
            this.box = f.element,
            this.boxWrapper = f,
            this.alignedObjects = [],
            this.url = (bb || tb) && z.getElementsByTagName("base").length ? e.href.replace(/#.*?$/, "").replace(/([\('\)])/g, "\\$1").replace(/ /g, "%20") : "",
            this.defs = this.createElement("defs").add(),
            this.forExport = d,
            this.gradients = {},
            this.setSize(b, c, !1);
            var g;
            bb && a.getBoundingClientRect && (this.subPixelFix = b = function() {
                G(a, {
                    left: 0,
                    top: 0
                }),
                g = a.getBoundingClientRect(),
                G(a, {
                    left: wa(g.left) - g.left + "px",
                    top: wa(g.top) - g.top + "px"
                })
            }
            ,
            b(),
            H(L, "resize", b))
        },
        isHidden: function() {
            return !this.boxWrapper.getBBox().width
        },
        destroy: function() {
            var a = this.defs;
            return this.box = null,
            this.boxWrapper = this.boxWrapper.destroy(),
            Aa(this.gradients || {}),
            this.gradients = null,
            a && (this.defs = a.destroy()),
            this.subPixelFix && U(L, "resize", this.subPixelFix),
            this.alignedObjects = null
        },
        createElement: function(a) {
            var b = new this.Element;
            return b.init(this, a),
            b
        },
        draw: function() {},
        buildText: function(a) {
            for (var k, b = a.element, c = p(a.textStr, "").toString().replace(/<(b|strong)>/g, '<span style="font-weight:bold">').replace(/<(i|em)>/g, '<span style="font-style:italic">').replace(/<a/g, "<span").replace(/<\/(b|strong|i|em|a)>/g, "</span>").split(/<br.*?>/g), d = b.childNodes, e = /style="([^"]+)"/, f = /href="([^"]+)"/, g = B(b, "x"), h = a.styles, i = h && A(h.width), j = h && h.lineHeight, h = d.length, l = []; h--; )
                b.removeChild(d[h]);
            i && !a.added && this.box.appendChild(b),
            "" === c[c.length - 1] && c.pop(),
            n(c, function(c, d) {
                var h, q, ea = 0, c = c.replace(/<span/g, "|||<span").replace(/<\/span>/g, "</span>|||");
                h = c.split("|||"),
                n(h, function(c) {
                    if ("" !== c || 1 === h.length) {
                        var m = {}
                          , p = z.createElementNS("http://www.w3.org/2000/svg", "tspan");
                        if (e.test(c) && B(p, "style", c.match(e)[1].replace(/(;| |^)color([ :])/, "$1fill$2")),
                        f.test(c) && (B(p, "onclick", 'location.href="' + c.match(f)[1] + '"'),
                        G(p, {
                            cursor: "pointer"
                        })),
                        c = (c.replace(/<(.|\n)*?>/g, "") || " ").replace(/&lt;/g, "<").replace(/&gt;/g, ">"),
                        p.appendChild(z.createTextNode(c)),
                        ea ? m.dx = 3 : m.x = g,
                        !ea) {
                            if (d) {
                                if (!fa && a.renderer.forExport && G(p, {
                                    display: "block"
                                }),
                                q = L.getComputedStyle && A(L.getComputedStyle(k, null).getPropertyValue("line-height")),
                                !q || isNaN(q)) {
                                    var n;
                                    (n = j) || (n = k.offsetHeight) || (l[d] = b.getBBox ? b.getBBox().height : a.renderer.fontMetrics(b.style.fontSize).h,
                                    n = t(l[d] - (l[d - 1] || 0)) || 18),
                                    q = n
                                }
                                B(p, "dy", q)
                            }
                            k = p
                        }
                        if (B(p, m),
                        b.appendChild(p),
                        ea++,
                        i)
                            for (var c = c.replace(/-/g, "- ").split(" "), I = []; c.length || I.length; )
                                delete a.bBox,
                                n = a.getBBox().width,
                                m = n > i,
                                m && 1 !== c.length ? (p.removeChild(p.firstChild),
                                I.unshift(c.pop())) : (c = I,
                                I = [],
                                c.length && (p = z.createElementNS("http://www.w3.org/2000/svg", "tspan"),
                                B(p, {
                                    dy: j || 16,
                                    x: g
                                }),
                                b.appendChild(p),
                                n > i && (i = n))),
                                c.length && p.appendChild(z.createTextNode(c.join(" ").replace(/- /g, "-")))
                    }
                })
            })
        },
        button: function(a, b, c, d, e, f, g) {
            var j, k, l, m, o, h = this.label(a, b, c), i = 0, a = {
                x1: 0,
                y1: 0,
                x2: 0,
                y2: 1
            }, e = C(la("stroke-width", 1, "stroke", "#999", "fill", la("linearGradient", a, "stops", [[0, "#FFF"], [1, "#DDD"]]), "r", 3, "padding", 3, "style", la("color", "black")), e);
            return l = e.style,
            delete e.style,
            f = C(e, la("stroke", "#68A", "fill", la("linearGradient", a, "stops", [[0, "#FFF"], [1, "#ACF"]])), f),
            m = f.style,
            delete f.style,
            g = C(e, la("stroke", "#68A", "fill", la("linearGradient", a, "stops", [[0, "#9BD"], [1, "#CDF"]])), g),
            o = g.style,
            delete g.style,
            H(h.element, "mouseenter", function() {
                h.attr(f).css(m)
            }),
            H(h.element, "mouseleave", function() {
                j = [e, f, g][i],
                k = [l, m, o][i],
                h.attr(j).css(k)
            }),
            h.setState = function(a) {
                (i = a) ? 2 === a && h.attr(g).css(o) : h.attr(e).css(l)
            }
            ,
            h.on("click", function() {
                d.call(h)
            }).attr(e).css(s({
                cursor: "default"
            }, l))
        },
        crispLine: function(a, b) {
            return a[1] === a[4] && (a[1] = a[4] = t(a[1]) - b % 2 / 2),
            a[2] === a[5] && (a[2] = a[5] = t(a[2]) + b % 2 / 2),
            a
        },
        path: function(a) {
            var b = {
                fill: T
            };
            return Fa(a) ? b.d = a : Z(a) && s(b, a),
            this.createElement("path").attr(b)
        },
        circle: function(a, b, c) {
            return a = Z(a) ? a : {
                x: a,
                y: b,
                r: c
            },
            this.createElement("circle").attr(a)
        },
        arc: function(a, b, c, d, e, f) {
            return Z(a) && (b = a.y,
            c = a.r,
            d = a.innerR,
            e = a.start,
            f = a.end,
            a = a.x),
            this.symbol("arc", a || 0, b || 0, c || 0, c || 0, {
                innerR: d || 0,
                start: e || 0,
                end: f || 0
            })
        },
        rect: function(a, b, c, d, e, f) {
            return e = Z(a) ? a.r : e,
            e = this.createElement("rect").attr({
                rx: e,
                ry: e,
                fill: T
            }),
            e.attr(Z(a) ? a : e.crisp(f, a, b, v(c, 0), v(d, 0)))
        },
        setSize: function(a, b, c) {
            var d = this.alignedObjects
              , e = d.length;
            for (this.width = a,
            this.height = b,
            this.boxWrapper[p(c, !0) ? "animate" : "attr"]({
                width: a,
                height: b
            }); e--; )
                d[e].align()
        },
        g: function(a) {
            var b = this.createElement("g");
            return u(a) ? b.attr({
                "class": "highcharts-" + a
            }) : b
        },
        image: function(a, b, c, d, e) {
            var f = {
                preserveAspectRatio: T
            };
            return arguments.length > 1 && s(f, {
                x: b,
                y: c,
                width: d,
                height: e
            }),
            f = this.createElement("image").attr(f),
            f.element.setAttributeNS ? f.element.setAttributeNS("http://www.w3.org/1999/xlink", "href", a) : f.element.setAttribute("hc-svg-href", a),
            f
        },
        symbol: function(a, b, c, d, e, f) {
            var g, j, k, h = this.symbols[a], h = h && h(t(b), t(c), d, e, f), i = /^url\((.*?)\)$/;
            return h ? (g = this.path(h),
            s(g, {
                symbolName: a,
                x: b,
                y: c,
                width: d,
                height: e
            }),
            f && s(g, f)) : i.test(a) && (k = function(a, b) {
                a.attr({
                    width: b[0],
                    height: b[1]
                }),
                a.alignByTranslate || a.translate(-t(b[0] / 2), -t(b[1] / 2))
            }
            ,
            j = a.match(i)[1],
            a = Jb[j],
            g = this.image(j).attr({
                x: b,
                y: c
            }),
            a ? k(g, a) : (g.attr({
                width: 0,
                height: 0
            }),
            S("img", {
                onload: function() {
                    k(g, Jb[j] = [this.width, this.height])
                },
                src: j
            }))),
            g
        },
        symbols: {
            circle: function(a, b, c, d) {
                var e = .166 * c;
                return ["M", a + c / 2, b, "C", a + c + e, b, a + c + e, b + d, a + c / 2, b + d, "C", a - e, b + d, a - e, b, a + c / 2, b, "Z"]
            },
            square: function(a, b, c, d) {
                return ["M", a, b, "L", a + c, b, a + c, b + d, a, b + d, "Z"]
            },
            triangle: function(a, b, c, d) {
                return ["M", a + c / 2, b, "L", a + c, b + d, a, b + d, "Z"]
            },
            "triangle-down": function(a, b, c, d) {
                return ["M", a, b, "L", a + c, b, a + c / 2, b + d, "Z"]
            },
            diamond: function(a, b, c, d) {
                return ["M", a + c / 2, b, "L", a + c, b + d / 2, a + c / 2, b + d, a, b + d / 2, "Z"]
            },
            arc: function(a, b, c, d, e) {
                var f = e.start
                  , c = e.r || c || d
                  , g = e.end - 1e-6
                  , d = e.innerR
                  , h = e.open
                  , i = W(f)
                  , j = aa(f)
                  , k = W(g)
                  , g = aa(g)
                  , e = e.end - f < xa ? 0 : 1;
                return ["M", a + c * i, b + c * j, "A", c, c, 0, e, 1, a + c * k, b + c * g, h ? "M" : "L", a + d * k, b + d * g, "A", d, d, 0, e, 0, a + d * i, b + d * j, h ? "" : "Z"]
            }
        },
        clipRect: function(a, b, c, d) {
            var e = "highcharts-" + ub++
              , f = this.createElement("clipPath").attr({
                id: e
            }).add(this.defs)
              , a = this.rect(a, b, c, d, 0).add(f);
            return a.id = e,
            a.clipPath = f,
            a
        },
        color: function(a, b, c) {
            var e, g, d = this, f = /^rgba/;
            if (a && a.linearGradient ? g = "linearGradient" : a && a.radialGradient && (g = "radialGradient"),
            g) {
                var i, j, k, c = a[g], h = d.gradients, b = b.radialReference;
                return c.id && h[c.id] || (Fa(c) && (a[g] = c = {
                    x1: c[0],
                    y1: c[1],
                    x2: c[2],
                    y2: c[3],
                    gradientUnits: "userSpaceOnUse"
                }),
                "radialGradient" === g && b && !u(c.gradientUnits) && s(c, {
                    cx: b[0] - b[2] / 2 + c.cx * b[2],
                    cy: b[1] - b[2] / 2 + c.cy * b[2],
                    r: c.r * b[2],
                    gradientUnits: "userSpaceOnUse"
                }),
                c.id = "highcharts-" + ub++,
                h[c.id] = i = d.createElement(g).attr(c).add(d.defs),
                i.stops = [],
                n(a.stops, function(a) {
                    f.test(a[1]) ? (e = qa(a[1]),
                    j = e.get("rgb"),
                    k = e.get("a")) : (j = a[1],
                    k = 1),
                    a = d.createElement("stop").attr({
                        offset: a[0],
                        "stop-color": j,
                        "stop-opacity": k
                    }).add(i),
                    i.stops.push(a)
                })),
                "url(" + d.url + "#" + c.id + ")"
            }
            return f.test(a) ? (e = qa(a),
            B(b, c + "-opacity", e.get("a")),
            e.get("rgb")) : (b.removeAttribute(c + "-opacity"),
            a)
        },
        text: function(a, b, c, d) {
            var e = O.chart.style;
            return d && !this.forExport ? this.html(a, b, c) : (b = t(p(b, 0)),
            c = t(p(c, 0)),
            a = this.createElement("text").attr({
                x: b,
                y: c,
                text: a
            }).css({
                fontFamily: e.fontFamily,
                fontSize: e.fontSize
            }),
            !fa && this.forExport && a.css({
                position: "absolute"
            }),
            a.x = b,
            a.y = c,
            a)
        },
        html: function(a, b, c) {
            var d = O.chart.style
              , e = this.createElement("span")
              , f = e.attrSetters
              , g = e.element
              , h = e.renderer;
            return f.text = function(a) {
                return a !== g.innerHTML && delete this.bBox,
                g.innerHTML = a,
                !1
            }
            ,
            f.x = f.y = f.align = function(a, b) {
                return "align" === b && (b = "textAlign"),
                e[b] = a,
                e.htmlUpdateTransform(),
                !1
            }
            ,
            e.attr({
                text: a,
                x: t(b),
                y: t(c)
            }).css({
                position: "absolute",
                whiteSpace: "nowrap",
                fontFamily: d.fontFamily,
                fontSize: d.fontSize
            }),
            e.css = e.htmlCss,
            h.isSVG && (e.add = function(a) {
                var b, c = h.box.parentNode, d = [];
                if (a) {
                    if (b = a.div,
                    !b) {
                        for (; a; )
                            d.push(a),
                            a = a.parentGroup;
                        n(d.reverse(), function(a) {
                            var d;
                            b = a.div = a.div || S(ia, {
                                className: B(a.element, "class")
                            }, {
                                position: "absolute",
                                left: (a.translateX || 0) + "px",
                                top: (a.translateY || 0) + "px"
                            }, b || c),
                            d = b.style,
                            s(a.attrSetters, {
                                translateX: function(a) {
                                    d.left = a + "px"
                                },
                                translateY: function(a) {
                                    d.top = a + "px"
                                },
                                visibility: function(a, b) {
                                    d[b] = a
                                }
                            })
                        })
                    }
                } else
                    b = c;
                return b.appendChild(g),
                e.added = !0,
                e.alignOnAdd && e.htmlUpdateTransform(),
                e
            }
            ),
            e
        },
        fontMetrics: function(a) {
            var a = A(a || 11)
              , a = 24 > a ? a + 4 : t(1.2 * a)
              , b = t(.8 * a);
            return {
                h: a,
                b: b
            }
        },
        label: function(a, b, c, d, e, f, g, h, i) {
            function j() {
                var c, a = o.styles, a = a && a.textAlign, b = M * (1 - y);
                c = h ? 0 : Ea,
                !u(Da) || "center" !== a && "right" !== a || (b += {
                    center: .5,
                    right: 1
                }[a] * (Da - q.width)),
                (b !== r.x || c !== r.y) && r.attr({
                    x: b,
                    y: c
                }),
                r.x = b,
                r.y = c
            }
            function k(a, b) {
                p ? p.attr(a, b) : fb[a] = b
            }
            function l() {
                r.add(o),
                o.attr({
                    text: a,
                    x: b,
                    y: c
                }),
                u(e) && o.attr({
                    anchorX: e,
                    anchorY: f
                })
            }
            var p, q, Da, w, I, J, Ea, m = this, o = m.g(i), r = m.text("", 0, 0, g).attr({
                zIndex: 1
            }), y = 0, M = 3, Q = 0, fb = {}, g = o.attrSetters;
            H(o, "add", l),
            g.width = function(a) {
                return Da = a,
                !1
            }
            ,
            g.height = function(a) {
                return w = a,
                !1
            }
            ,
            g.padding = function(a) {
                return u(a) && a !== M && (M = a,
                j()),
                !1
            }
            ,
            g.align = function(a) {
                return y = {
                    left: 0,
                    center: .5,
                    right: 1
                }[a],
                !1
            }
            ,
            g.text = function(a, b) {
                r.attr(b, a);
                var c;
                return c = r.element.style,
                q = (void 0 === Da || void 0 === w || o.styles.textAlign) && r.getBBox(),
                o.width = (Da || q.width || 0) + 2 * M,
                o.height = (w || q.height || 0) + 2 * M,
                Ea = M + m.fontMetrics(c && c.fontSize).b,
                p || (c = h ? -Ea : 0,
                o.box = p = d ? m.symbol(d, -y * M, c, o.width, o.height) : m.rect(-y * M, c, o.width, o.height, 0, fb["stroke-width"]),
                p.add(o)),
                p.attr(C({
                    width: o.width,
                    height: o.height
                }, fb)),
                fb = null,
                j(),
                !1
            }
            ,
            g["stroke-width"] = function(a, b) {
                return Q = a % 2 / 2,
                k(b, a),
                !1
            }
            ,
            g.stroke = g.fill = g.r = function(a, b) {
                return k(b, a),
                !1
            }
            ,
            g.anchorX = function(a, b) {
                return e = a,
                k(b, a + Q - I),
                !1
            }
            ,
            g.anchorY = function(a, b) {
                return f = a,
                k(b, a - J),
                !1
            }
            ,
            g.x = function(a) {
                return o.x = a,
                a -= y * ((Da || q.width) + M),
                I = t(a),
                o.attr("translateX", I),
                !1
            }
            ,
            g.y = function(a) {
                return J = o.y = t(a),
                o.attr("translateY", a),
                !1
            }
            ;
            var v = o.css;
            return s(o, {
                css: function(a) {
                    if (a) {
                        var b = {}
                          , a = C({}, a);
                        n("fontSize,fontWeight,fontFamily,color,lineHeight,width".split(","), function(c) {
                            a[c] !== x && (b[c] = a[c],
                            delete a[c])
                        }),
                        r.css(b)
                    }
                    return v.call(o, a)
                },
                getBBox: function() {
                    return p.getBBox()
                },
                shadow: function(a) {
                    return p.shadow(a),
                    o
                },
                destroy: function() {
                    U(o, "add", l),
                    U(o.element, "mouseenter"),
                    U(o.element, "mouseleave"),
                    r && (r = r.destroy()),
                    va.prototype.destroy.call(o)
                }
            })
        }
    },
    Ra = ra;
    var ka;
    if (!fa && !$) {
        ka = {
            init: function(a, b) {
                var c = ["<", b, ' filled="f" stroked="f"']
                  , d = ["position: ", "absolute", ";"];
                ("shape" === b || b === ia) && d.push("left:0;top:0;width:1px;height:1px;"),
                Qa && d.push("visibility: ", b === ia ? "hidden" : "visible"),
                c.push(' style="', d.join(""), '"/>'),
                b && (c = b === ia || "span" === b || "img" === b ? c.join("") : a.prepVML(c),
                this.element = S(c)),
                this.renderer = a,
                this.attrSetters = {}
            },
            add: function(a) {
                var b = this.renderer
                  , c = this.element
                  , d = b.box
                  , d = a ? a.element || a : d;
                return a && a.inverted && b.invertChild(c, d),
                d.appendChild(c),
                this.added = !0,
                this.alignOnAdd && !this.deferUpdateTransform && this.updateTransform(),
                E(this, "add"),
                this
            },
            updateTransform: va.prototype.htmlUpdateTransform,
            attr: function(a, b) {
                var c, d, e, k, m, f = this.element || {}, g = f.style, h = f.nodeName, i = this.renderer, j = this.symbolName, l = this.shadows, o = this.attrSetters, r = this;
                if (ma(a) && u(b) && (c = a,
                a = {},
                a[c] = b),
                ma(a))
                    c = a,
                    r = "strokeWidth" === c || "stroke-width" === c ? this.strokeweight : this[c];
                else
                    for (c in a)
                        if (d = a[c],
                        m = !1,
                        e = o[c] && o[c].call(this, d, c),
                        e !== !1 && null !== d) {
                            if (e !== x && (d = e),
                            j && /^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(c))
                                k || (this.symbolAttr(a),
                                k = !0),
                                m = !0;
                            else if ("d" === c) {
                                for (d = d || [],
                                this.d = d.join(" "),
                                e = d.length,
                                m = []; e--; )
                                    m[e] = Ga(d[e]) ? t(10 * d[e]) - 5 : "Z" === d[e] ? "x" : d[e];
                                if (d = m.join(" ") || "x",
                                f.path = d,
                                l)
                                    for (e = l.length; e--; )
                                        l[e].path = l[e].cutOff ? this.cutOffPath(d, l[e].cutOff) : d;
                                m = !0
                            } else if ("visibility" === c) {
                                if (l)
                                    for (e = l.length; e--; )
                                        l[e].style[c] = d;
                                "DIV" === h && (d = "hidden" === d ? "-999em" : 0,
                                c = "top"),
                                g[c] = d,
                                m = !0
                            } else
                                "zIndex" === c ? (d && (g[c] = d),
                                m = !0) : "width" === c || "height" === c ? (d = v(0, d),
                                this[c] = d,
                                this.updateClipping ? (this[c] = d,
                                this.updateClipping()) : g[c] = d,
                                m = !0) : "x" === c || "y" === c ? (this[c] = d,
                                g[{
                                    x: "left",
                                    y: "top"
                                }[c]] = d) : "class" === c ? f.className = d : "stroke" === c ? (d = i.color(d, f, c),
                                c = "strokecolor") : "stroke-width" === c || "strokeWidth" === c ? (f.stroked = !!d,
                                c = "strokeweight",
                                this[c] = d,
                                Ga(d) && (d += "px")) : "dashstyle" === c ? ((f.getElementsByTagName("stroke")[0] || S(i.prepVML(["<stroke/>"]), null, null, f))[c] = d || "solid",
                                this.dashstyle = d,
                                m = !0) : "fill" === c ? "SPAN" === h ? g.color = d : (f.filled = d !== T,
                                d = i.color(d, f, c, this),
                                c = "fillcolor") : "shape" === h && "rotation" === c ? (this[c] = d,
                                f.style.left = -t(aa(d * ab) + 1) + "px",
                                f.style.top = t(W(d * ab)) + "px") : "translateX" === c || "translateY" === c || "rotation" === c ? (this[c] = d,
                                this.updateTransform(),
                                m = !0) : "text" === c && (this.bBox = null,
                                f.innerHTML = d,
                                m = !0);
                            m || (Qa ? f[c] = d : B(f, c, d))
                        }
                return r
            },
            clip: function(a) {
                var c, b = this, d = b.element, e = d.parentNode;
                return a ? (c = a.members,
                c.push(b),
                b.destroyClip = function() {
                    ya(c, b)
                }
                ,
                e && "highcharts-tracker" === e.className && !Qa && G(d, {
                    visibility: "hidden"
                }),
                a = a.getCSS(b)) : (b.destroyClip && b.destroyClip(),
                a = {
                    clip: Qa ? "inherit" : "rect(auto)"
                }),
                b.css(a)
            },
            css: va.prototype.htmlCss,
            safeRemoveChild: function(a) {
                a.parentNode && Na(a)
            },
            destroy: function() {
                return this.destroyClip && this.destroyClip(),
                va.prototype.destroy.apply(this)
            },
            empty: function() {
                for (var c, a = this.element.childNodes, b = a.length; b--; )
                    c = a[b],
                    c.parentNode.removeChild(c)
            },
            on: function(a, b) {
                return this.element["on" + a] = function() {
                    var a = L.event;
                    a.target = a.srcElement,
                    b(a)
                }
                ,
                this
            },
            cutOffPath: function(a, b) {
                var c, a = a.split(/[ ,]/);
                return c = a.length,
                9 !== c && 11 !== c || (a[c - 4] = a[c - 2] = A(a[c - 2]) - 10 * b),
                a.join(" ")
            },
            shadow: function(a, b, c) {
                var e, h, j, l, m, o, r, d = [], f = this.element, g = this.renderer, i = f.style, k = f.path;
                if (k && "string" != typeof k.value && (k = "x"),
                m = k,
                a) {
                    for (o = p(a.width, 3),
                    r = (a.opacity || .15) / o,
                    e = 1; 3 >= e; e++)
                        l = 2 * o + 1 - 2 * e,
                        c && (m = this.cutOffPath(k.value, l + .5)),
                        j = ['<shape isShadow="true" strokeweight="', l, '" filled="false" path="', m, '" coordsize="10 10" style="', f.style.cssText, '" />'],
                        h = S(g.prepVML(j), null, {
                            left: A(i.left) + (a.offsetX || 1),
                            top: A(i.top) + (a.offsetY || 1)
                        }),
                        c && (h.cutOff = l + 1),
                        j = ['<stroke color="', a.color || "black", '" opacity="', r * e, '"/>'],
                        S(g.prepVML(j), null, null, h),
                        b ? b.element.appendChild(h) : f.parentNode.insertBefore(h, f),
                        d.push(h);
                    this.shadows = d
                }
                return this
            }
        },
        ka = da(va, ka);
        var ha = {
            Element: ka,
            isIE8: Ba.indexOf("MSIE 8.0") > -1,
            init: function(a, b, c) {
                var d, e;
                this.alignedObjects = [],
                d = this.createElement(ia),
                e = d.element,
                e.style.position = "relative",
                a.appendChild(d.element),
                this.box = e,
                this.boxWrapper = d,
                this.setSize(b, c, !1),
                z.namespaces.hcv || (z.namespaces.add("hcv", "urn:schemas-microsoft-com:vml"),
                z.createStyleSheet().cssText = "hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")
            },
            isHidden: function() {
                return !this.box.offsetWidth
            },
            clipRect: function(a, b, c, d) {
                var e = this.createElement()
                  , f = Z(a);
                return s(e, {
                    members: [],
                    left: f ? a.x : a,
                    top: f ? a.y : b,
                    width: f ? a.width : c,
                    height: f ? a.height : d,
                    getCSS: function(a) {
                        var b = a.inverted
                          , c = this.top
                          , d = this.left
                          , e = d + this.width
                          , f = c + this.height
                          , c = {
                            clip: "rect(" + t(b ? d : c) + "px," + t(b ? f : e) + "px," + t(b ? e : f) + "px," + t(b ? c : d) + "px)"
                        };
                        return !b && Qa && "IMG" !== a.element.nodeName && s(c, {
                            width: e + "px",
                            height: f + "px"
                        }),
                        c
                    },
                    updateClipping: function() {
                        n(e.members, function(a) {
                            a.css(e.getCSS(a))
                        })
                    }
                })
            },
            color: function(a, b, c, d) {
                var f, h, i, e = this, g = /^rgba/, j = T;
                if (a && a.linearGradient ? i = "gradient" : a && a.radialGradient && (i = "pattern"),
                i) {
                    var k, l, o, r, p, q, y, u, m = a.linearGradient || a.radialGradient, M = "", a = a.stops, w = [], I = function() {
                        h = ['<fill colors="' + w.join(",") + '" opacity="', p, '" o:opacity2="', r, '" type="', i, '" ', M, 'focus="100%" method="any" />'],
                        S(e.prepVML(h), null, null, b)
                    };
                    if (o = a[0],
                    u = a[a.length - 1],
                    o[0] > 0 && a.unshift([0, o[1]]),
                    u[0] < 1 && a.push([1, u[1]]),
                    n(a, function(a, b) {
                        g.test(a[1]) ? (f = qa(a[1]),
                        k = f.get("rgb"),
                        l = f.get("a")) : (k = a[1],
                        l = 1),
                        w.push(100 * a[0] + "% " + k),
                        b ? (p = l,
                        q = k) : (r = l,
                        y = k)
                    }),
                    "fill" === c)
                        if ("gradient" === i)
                            c = m.x1 || m[0] || 0,
                            a = m.y1 || m[1] || 0,
                            o = m.x2 || m[2] || 0,
                            m = m.y2 || m[3] || 0,
                            M = 'angle="' + (90 - 180 * K.atan((m - a) / (o - c)) / xa) + '"',
                            I();
                        else {
                            var x, j = m.r, J = 2 * j, Q = 2 * j, t = m.cx, s = m.cy, v = b.radialReference, j = function() {
                                v && (x = d.getBBox(),
                                t += (v[0] - x.x) / x.width - .5,
                                s += (v[1] - x.y) / x.height - .5,
                                J *= v[2] / x.width,
                                Q *= v[2] / x.height),
                                M = 'src="' + O.global.VMLRadialGradientURL + '" size="' + J + "," + Q + '" origin="0.5,0.5" position="' + t + "," + s + '" color2="' + y + '" ',
                                I()
                            };
                            d.added ? j() : H(d, "add", j),
                            j = q
                        }
                    else
                        j = k
                } else
                    g.test(a) && "IMG" !== b.tagName ? (f = qa(a),
                    h = ["<", c, ' opacity="', f.get("a"), '"/>'],
                    S(this.prepVML(h), null, null, b),
                    j = f.get("rgb")) : (j = b.getElementsByTagName(c),
                    j.length && (j[0].opacity = 1),
                    j = a);
                return j
            },
            prepVML: function(a) {
                var b = this.isIE8
                  , a = a.join("");
                return b ? (a = a.replace("/>", ' xmlns="urn:schemas-microsoft-com:vml" />'),
                a = -1 === a.indexOf('style="') ? a.replace("/>", ' style="display:inline-block;behavior:url(#default#VML);" />') : a.replace('style="', 'style="display:inline-block;behavior:url(#default#VML);')) : a = a.replace("<", "<hcv:"),
                a
            },
            text: ra.prototype.html,
            path: function(a) {
                var b = {
                    coordsize: "10 10"
                };
                return Fa(a) ? b.d = a : Z(a) && s(b, a),
                this.createElement("shape").attr(b)
            },
            circle: function(a, b, c) {
                return this.symbol("circle").attr({
                    x: a - c,
                    y: b - c,
                    width: 2 * c,
                    height: 2 * c
                })
            },
            g: function(a) {
                var b;
                return a && (b = {
                    className: "highcharts-" + a,
                    "class": "highcharts-" + a
                }),
                this.createElement(ia).attr(b)
            },
            image: function(a, b, c, d, e) {
                var f = this.createElement("img").attr({
                    src: a
                });
                return arguments.length > 1 && f.css({
                    left: b,
                    top: c,
                    width: d,
                    height: e
                }),
                f
            },
            rect: function(a, b, c, d, e, f) {
                Z(a) && (b = a.y,
                c = a.width,
                d = a.height,
                f = a.strokeWidth,
                a = a.x);
                var g = this.symbol("rect");
                return g.r = e,
                g.attr(g.crisp(f, a, b, v(c, 0), v(d, 0)))
            },
            invertChild: function(a, b) {
                var c = b.style;
                G(a, {
                    flip: "x",
                    left: A(c.width) - 1,
                    top: A(c.height) - 1,
                    rotation: -90
                })
            },
            symbols: {
                arc: function(a, b, c, d, e) {
                    var f = e.start
                      , g = e.end
                      , h = e.r || c || d
                      , c = W(f)
                      , d = aa(f)
                      , i = W(g)
                      , j = aa(g)
                      , k = e.innerR
                      , l = .08 / h
                      , m = k && .1 / k || 0;
                    return g - f === 0 ? ["x"] : (l > 2 * xa - g + f ? i = -l : m > g - f && (i = W(f + m)),
                    f = ["wa", a - h, b - h, a + h, b + h, a + h * c, b + h * d, a + h * i, b + h * j],
                    e.open && !k && f.push("e", "M", a, b),
                    f.push("at", a - k, b - k, a + k, b + k, a + k * i, b + k * j, a + k * c, b + k * d, "x", "e"),
                    f)
                },
                circle: function(a, b, c, d) {
                    return ["wa", a, b, a + c, b + d, a + c, b + d / 2, a + c, b + d / 2, "e"]
                },
                rect: function(a, b, c, d, e) {
                    var h, f = a + c, g = b + d;
                    return u(e) && e.r ? (h = P(e.r, c, d),
                    f = ["M", a + h, b, "L", f - h, b, "wa", f - 2 * h, b, f, b + 2 * h, f - h, b, f, b + h, "L", f, g - h, "wa", f - 2 * h, g - 2 * h, f, g, f, g - h, f - h, g, "L", a + h, g, "wa", a, g - 2 * h, a + 2 * h, g, a + h, g, a, g - h, "L", a, b + h, "wa", a, b, a + 2 * h, b + 2 * h, a, b + h, a + h, b, "x", "e"]) : f = ra.prototype.symbols.square.apply(0, arguments),
                    f
                }
            }
        };
        ka = function() {
            this.init.apply(this, arguments)
        }
        ,
        ka.prototype = C(ra.prototype, ha),
        Ra = ka
    }
    var gb, Mb;
    $ && (gb = function() {}
    ,
    gb.prototype.symbols = {},
    Mb = function() {
        function a() {
            var d, a = b.length;
            for (d = 0; a > d; d++)
                b[d]();
            b = []
        }
        var b = [];
        return {
            push: function(c, d) {
                0 === b.length && Qb(d, a),
                b.push(c)
            }
        }
    }()),
    Ra = ka || gb || ra,
    Pa.prototype = {
        addLabel: function() {
            var l, a = this.axis, b = a.options, c = a.chart, d = a.horiz, e = a.categories, f = this.pos, g = b.labels, h = a.tickPositions, d = e && d && e.length && !g.step && !g.staggerLines && !g.rotation && c.plotWidth / h.length || !d && c.plotWidth / 2, i = f === h[0], j = f === h[h.length - 1], k = e && u(e[f]) ? e[f] : f, e = this.label, h = h.info;
            a.isDatetimeAxis && h && (l = b.dateTimeLabelFormats[h.higherRanks[f] || h.unitName]),
            this.isFirst = i,
            this.isLast = j,
            b = a.labelFormatter.call({
                axis: a,
                chart: c,
                isFirst: i,
                isLast: j,
                dateTimeLabelFormat: l,
                value: a.isLog ? ja(ca(k)) : k
            }),
            f = d && {
                width: v(1, t(d - 2 * (g.padding || 10))) + "px"
            },
            f = s(f, g.style),
            u(e) ? e && e.attr({
                text: b
            }).css(f) : (d = {
                align: g.align
            },
            Ga(g.rotation) && (d.rotation = g.rotation),
            this.label = u(b) && g.enabled ? c.renderer.text(b, 0, 0, g.useHTML).attr(d).css(f).add(a.labelGroup) : null)
        },
        getLabelSize: function() {
            var a = this.label
              , b = this.axis;
            return a ? (this.labelBBox = a.getBBox())[b.horiz ? "height" : "width"] : 0
        },
        getLabelSides: function() {
            var a = this.axis.options.labels
              , b = this.labelBBox.width
              , a = b * {
                left: 0,
                center: .5,
                right: 1
            }[a.align] - a.x;
            return [-a, b - a]
        },
        handleOverflow: function(a, b) {
            var c = !0
              , d = this.axis
              , e = d.chart
              , f = this.isFirst
              , g = this.isLast
              , h = b.x
              , i = d.reversed
              , j = d.tickPositions;
            if (f || g) {
                var k = this.getLabelSides()
                  , l = k[0]
                  , k = k[1]
                  , e = e.plotLeft
                  , m = e + d.len
                  , j = (d = d.ticks[j[a + (f ? 1 : -1)]]) && d.label.xy && d.label.xy.x + d.getLabelSides()[f ? 0 : 1];
                f && !i || g && i ? e > h + l && (h = e - l,
                d && h + k > j && (c = !1)) : h + k > m && (h = m - k,
                d && j > h + l && (c = !1)),
                b.x = h
            }
            return c
        },
        getPosition: function(a, b, c, d) {
            var e = this.axis
              , f = e.chart
              , g = d && f.oldChartHeight || f.chartHeight;
            return {
                x: a ? e.translate(b + c, null, null, d) + e.transB : e.left + e.offset + (e.opposite ? (d && f.oldChartWidth || f.chartWidth) - e.right - e.left : 0),
                y: a ? g - e.bottom + e.offset - (e.opposite ? e.height : 0) : g - e.translate(b + c, null, null, d) - e.transB
            }
        },
        getLabelPosition: function(a, b, c, d, e, f, g, h) {
            var i = this.axis
              , j = i.transA
              , k = i.reversed
              , i = i.staggerLines
              , a = a + e.x - (f && d ? f * j * (k ? -1 : 1) : 0)
              , b = b + e.y - (f && !d ? f * j * (k ? 1 : -1) : 0);
            return u(e.y) || (b += .9 * A(c.styles.lineHeight) - c.getBBox().height / 2),
            i && (b += g / (h || 1) % i * 16),
            {
                x: a,
                y: b
            }
        },
        getMarkPath: function(a, b, c, d, e, f) {
            return f.crispLine(["M", a, b, "L", a + (e ? 0 : -c), b + (e ? c : 0)], d)
        },
        render: function(a, b) {
            var c = this.axis
              , d = c.options
              , e = c.chart.renderer
              , f = c.horiz
              , g = this.type
              , h = this.label
              , i = this.pos
              , j = d.labels
              , k = this.gridLine
              , l = g ? g + "Grid" : "grid"
              , m = g ? g + "Tick" : "tick"
              , o = d[l + "LineWidth"]
              , r = d[l + "LineColor"]
              , n = d[l + "LineDashStyle"]
              , q = d[m + "Length"]
              , l = d[m + "Width"] || 0
              , y = d[m + "Color"]
              , u = d[m + "Position"]
              , m = this.mark
              , t = j.step
              , w = !0
              , I = c.tickmarkOffset
              , J = this.getPosition(f, i, I, b)
              , Q = J.x
              , J = J.y
              , v = c.staggerLines;
            o && (i = c.getPlotLinePath(i + I, o, b),
            k === x && (k = {
                stroke: r,
                "stroke-width": o
            },
            n && (k.dashstyle = n),
            g || (k.zIndex = 1),
            this.gridLine = k = o ? e.path(i).attr(k).add(c.gridGroup) : null),
            !b && k && i && k[this.isNew ? "attr" : "animate"]({
                d: i
            })),
            l && q && ("inside" === u && (q = -q),
            c.opposite && (q = -q),
            g = this.getMarkPath(Q, J, q, l, f, e),
            m ? m.animate({
                d: g
            }) : this.mark = e.path(g).attr({
                stroke: y,
                "stroke-width": l
            }).add(c.axisGroup)),
            h && !isNaN(Q) && (h.xy = J = this.getLabelPosition(Q, J, h, f, j, I, a, t),
            this.isFirst && !p(d.showFirstLabel, 1) || this.isLast && !p(d.showLastLabel, 1) ? w = !1 : !v && f && "justify" === j.overflow && !this.handleOverflow(a, J) && (w = !1),
            t && a % t && (w = !1),
            w ? (h[this.isNew ? "attr" : "animate"](J),
            h.show(),
            this.isNew = !1) : h.hide())
        },
        destroy: function() {
            Aa(this, this.axis)
        }
    },
    nb.prototype = {
        render: function() {
            var n, a = this, b = a.axis, c = b.horiz, d = (b.pointRange || 0) / 2, e = a.options, f = e.label, g = a.label, h = e.width, i = e.to, j = e.from, k = u(j) && u(i), l = e.value, m = e.dashStyle, o = a.svgElem, r = [], q = e.color, y = e.zIndex, M = e.events, t = b.chart.renderer;
            if (b.isLog && (j = na(j),
            i = na(i),
            l = na(l)),
            h)
                r = b.getPlotLinePath(l, h),
                d = {
                    stroke: q,
                    "stroke-width": h
                },
                m && (d.dashstyle = m);
            else {
                if (!k)
                    return;
                j = v(j, b.min - d),
                i = P(i, b.max + d),
                r = b.getPlotBandPath(j, i, e),
                d = {
                    fill: q
                },
                e.borderWidth && (d.stroke = e.borderColor,
                d["stroke-width"] = e.borderWidth)
            }
            if (u(y) && (d.zIndex = y),
            o)
                r ? o.animate({
                    d: r
                }, null, o.onGetPath) : (o.hide(),
                o.onGetPath = function() {
                    o.show()
                }
                );
            else if (r && r.length && (a.svgElem = o = t.path(r).attr(d).add(),
            M))
                for (n in e = function(b) {
                    o.on(b, function(c) {
                        M[b].apply(a, [c])
                    })
                }
                ,
                M)
                    e(n);
            return f && u(f.text) && r && r.length && b.width > 0 && b.height > 0 ? (f = C({
                align: c && k && "center",
                x: c ? !k && 4 : 10,
                verticalAlign: !c && k && "middle",
                y: c ? k ? 16 : 10 : k ? 6 : -4,
                rotation: c && !k && 90
            }, f),
            g || (a.label = g = t.text(f.text, 0, 0).attr({
                align: f.textAlign || f.align,
                rotation: f.rotation,
                zIndex: y
            }).css(f.style).add()),
            b = [r[1], r[4], p(r[6], r[1])],
            r = [r[2], r[5], p(r[7], r[2])],
            c = Ma(b),
            k = Ma(r),
            g.align(f, !1, {
                x: c,
                y: k,
                width: za(b) - c,
                height: za(r) - k
            }),
            g.show()) : g && g.hide(),
            a
        },
        destroy: function() {
            ya(this.axis.plotLinesAndBands, this),
            Aa(this, this.axis)
        }
    },
    Hb.prototype = {
        destroy: function() {
            Aa(this, this.axis)
        },
        setTotal: function(a) {
            this.cum = this.total = a
        },
        render: function(a) {
            var b = this.options.formatter.call(this);
            this.label ? this.label.attr({
                text: b,
                visibility: "hidden"
            }) : this.label = this.axis.chart.renderer.text(b, 0, 0).css(this.options.style).attr({
                align: this.textAlign,
                rotation: this.options.rotation,
                visibility: "hidden"
            }).add(a)
        },
        setOffset: function(a, b) {
            var c = this.axis
              , d = c.chart
              , e = d.inverted
              , f = this.isNegative
              , g = c.translate(this.total, 0, 0, 0, 1)
              , c = c.translate(0)
              , c = N(g - c)
              , h = d.xAxis[0].translate(this.x) + a
              , d = d.plotHeight
              , e = {
                x: e ? f ? g : g - c : h,
                y: e ? d - h - b : f ? d - g - c : d - g,
                width: e ? c : b,
                height: e ? b : c
            };
            this.label && this.label.align(this.alignOptions, null, e).attr({
                visibility: "visible"
            })
        }
    },
    ob.prototype = {
        defaultOptions: {
            dateTimeLabelFormats: {
                millisecond: "%H:%M:%S.%L",
                second: "%H:%M:%S",
                minute: "%H:%M",
                hour: "%H:%M",
                day: "%e. %b",
                week: "%e. %b",
                month: "%b '%y",
                year: "%Y"
            },
            endOnTick: !1,
            gridLineColor: "#C0C0C0",
            labels: F,
            lineColor: "#C0D0E0",
            lineWidth: 1,
            minPadding: .01,
            maxPadding: .01,
            minorGridLineColor: "#E0E0E0",
            minorGridLineWidth: 1,
            minorTickColor: "#A0A0A0",
            minorTickLength: 2,
            minorTickPosition: "outside",
            startOfWeek: 1,
            startOnTick: !1,
            tickColor: "#C0D0E0",
            tickLength: 5,
            tickmarkPlacement: "between",
            tickPixelInterval: 100,
            tickPosition: "outside",
            tickWidth: 1,
            title: {
                align: "middle",
                style: {
                    color: "#6D869F",
                    fontWeight: "bold"
                }
            },
            type: "linear"
        },
        defaultYAxisOptions: {
            endOnTick: !0,
            gridLineWidth: 1,
            tickPixelInterval: 72,
            showLastLabel: !0,
            labels: {
                align: "right",
                x: -8,
                y: 3
            },
            lineWidth: 0,
            maxPadding: .05,
            minPadding: .05,
            startOnTick: !0,
            tickWidth: 0,
            title: {
                rotation: 270,
                text: "Y-values"
            },
            stackLabels: {
                enabled: !1,
                formatter: function() {
                    return this.total
                },
                style: F.style
            }
        },
        defaultLeftAxisOptions: {
            labels: {
                align: "right",
                x: -8,
                y: null
            },
            title: {
                rotation: 270
            }
        },
        defaultRightAxisOptions: {
            labels: {
                align: "left",
                x: 8,
                y: null
            },
            title: {
                rotation: 90
            }
        },
        defaultBottomAxisOptions: {
            labels: {
                align: "center",
                x: 0,
                y: 14
            },
            title: {
                rotation: 0
            }
        },
        defaultTopAxisOptions: {
            labels: {
                align: "center",
                x: 0,
                y: -5
            },
            title: {
                rotation: 0
            }
        },
        init: function(a, b) {
            var c = b.isX;
            this.horiz = a.inverted ? !c : c,
            this.xOrY = (this.isXAxis = c) ? "x" : "y",
            this.opposite = b.opposite,
            this.side = this.horiz ? this.opposite ? 0 : 2 : this.opposite ? 1 : 3,
            this.setOptions(b);
            var d = this.options
              , e = d.type
              , f = "datetime" === e;
            this.labelFormatter = d.labels.formatter || this.defaultLabelFormatter,
            this.staggerLines = this.horiz && d.labels.staggerLines,
            this.userOptions = b,
            this.minPixelPadding = 0,
            this.chart = a,
            this.reversed = d.reversed,
            this.categories = d.categories,
            this.isLog = "logarithmic" === e,
            this.isLinked = u(d.linkedTo),
            this.isDatetimeAxis = f,
            this.tickmarkOffset = d.categories && "between" === d.tickmarkPlacement ? .5 : 0,
            this.ticks = {},
            this.minorTicks = {},
            this.plotLinesAndBands = [],
            this.alternateBands = {},
            this.len = 0,
            this.minRange = this.userMinRange = d.minRange || d.maxZoom,
            this.range = d.range,
            this.offset = d.offset || 0,
            this.stacks = {},
            this.min = this.max = null;
            var g, d = this.options.events;
            a.axes.push(this),
            a[c ? "xAxis" : "yAxis"].push(this),
            this.series = [],
            a.inverted && c && this.reversed === x && (this.reversed = !0),
            this.removePlotLine = this.removePlotBand = this.removePlotBandOrLine,
            this.addPlotLine = this.addPlotBand = this.addPlotBandOrLine;
            for (g in d)
                H(this, g, d[g]);
            this.isLog && (this.val2lin = na,
            this.lin2val = ca)
        },
        setOptions: function(a) {
            this.options = C(this.defaultOptions, this.isXAxis ? {} : this.defaultYAxisOptions, [this.defaultTopAxisOptions, this.defaultRightAxisOptions, this.defaultBottomAxisOptions, this.defaultLeftAxisOptions][this.side], C(O[this.isXAxis ? "xAxis" : "yAxis"], a))
        },
        defaultLabelFormatter: function() {
            var f, a = this.axis, b = this.value, c = this.dateTimeLabelFormat, d = O.lang.numericSymbols, e = d && d.length, g = a.isLog ? b : a.tickInterval;
            if (a.categories)
                f = b;
            else if (c)
                f = cb(c, b);
            else if (e && g >= 1e3)
                for (; e-- && f === x; )
                    a = Math.pow(1e3, e + 1),
                    g >= a && null !== d[e] && (f = Ia(b / a, -1) + d[e]);
            return f === x && (f = b >= 1e3 ? Ia(b, 0) : Ia(b, -1)),
            f
        },
        getSeriesExtremes: function() {
            var f, a = this, b = a.chart, c = a.stacks, d = [], e = [];
            a.hasVisibleSeries = !1,
            a.dataMin = a.dataMax = null,
            n(a.series, function(g) {
                if (g.visible || !b.options.chart.ignoreHiddenSeries) {
                    var i, j, k, l, m, o, r, n, q, t, h = g.options, y = h.threshold, s = [], w = 0;
                    if (a.hasVisibleSeries = !0,
                    a.isLog && 0 >= y && (y = h.threshold = null),
                    a.isXAxis)
                        h = g.xData,
                        h.length && (a.dataMin = P(p(a.dataMin, h[0]), Ma(h)),
                        a.dataMax = v(p(a.dataMax, h[0]), za(h)));
                    else {
                        var I, J, Q, C = g.cropped, Ea = g.xAxis.getExtremes(), A = !!g.modifyValue;
                        for (i = h.stacking,
                        a.usePercentage = "percent" === i,
                        i && (m = h.stack,
                        l = g.type + p(m, ""),
                        o = "-" + l,
                        g.stackKey = l,
                        j = d[l] || [],
                        d[l] = j,
                        k = e[o] || [],
                        e[o] = k),
                        a.usePercentage && (a.dataMin = 0,
                        a.dataMax = 99),
                        h = g.processedXData,
                        r = g.processedYData,
                        t = r.length,
                        f = 0; t > f; f++)
                            if (n = h[f],
                            q = r[f],
                            null !== q && q !== x && (i ? (J = (I = y > q) ? k : j,
                            Q = I ? o : l,
                            q = J[n] = u(J[n]) ? J[n] + q : q,
                            c[Q] || (c[Q] = {}),
                            c[Q][n] || (c[Q][n] = new Hb(a,a.options.stackLabels,I,n,m)),
                            c[Q][n].setTotal(q)) : A && (q = g.modifyValue(q)),
                            C || (h[f + 1] || n) >= Ea.min && (h[f - 1] || n) <= Ea.max))
                                if (n = q.length)
                                    for (; n--; )
                                        null !== q[n] && (s[w++] = q[n]);
                                else
                                    s[w++] = q;
                        !a.usePercentage && s.length && (a.dataMin = P(p(a.dataMin, s[0]), Ma(s)),
                        a.dataMax = v(p(a.dataMax, s[0]), za(s))),
                        u(y) && (a.dataMin >= y ? (a.dataMin = y,
                        a.ignoreMinPadding = !0) : a.dataMax < y && (a.dataMax = y,
                        a.ignoreMaxPadding = !0))
                    }
                }
            })
        },
        translate: function(a, b, c, d, e, f) {
            var g = this.len
              , h = 1
              , i = 0
              , j = d ? this.oldTransA : this.transA
              , d = d ? this.oldMin : this.min
              , e = this.options.ordinal || this.isLog && e;
            return j || (j = this.transA),
            c && (h *= -1,
            i = g),
            this.reversed && (h *= -1,
            i -= h * g),
            b ? (this.reversed && (a = g - a),
            a = a / j + d,
            e && (a = this.lin2val(a))) : (e && (a = this.val2lin(a)),
            a = h * (a - d) * j + i + h * this.minPixelPadding + (f ? j * this.pointRange / 2 : 0)),
            a
        },
        getPlotLinePath: function(a, b, c) {
            var g, h, i, l, d = this.chart, e = this.left, f = this.top, a = this.translate(a, null, null, c), j = c && d.oldChartHeight || d.chartHeight, k = c && d.oldChartWidth || d.chartWidth;
            return g = this.transB,
            c = h = t(a + g),
            g = i = t(j - a - g),
            isNaN(a) ? l = !0 : this.horiz ? (g = f,
            i = j - this.bottom,
            (e > c || c > e + this.width) && (l = !0)) : (c = e,
            h = k - this.right,
            (f > g || g > f + this.height) && (l = !0)),
            l ? null : d.renderer.crispLine(["M", c, g, "L", h, i], b || 0)
        },
        getPlotBandPath: function(a, b) {
            var c = this.getPlotLinePath(b)
              , d = this.getPlotLinePath(a);
            return d && c ? d.push(c[4], c[5], c[1], c[2]) : d = null,
            d
        },
        getLinearTickPositions: function(a, b, c) {
            for (var d, b = ja(V(b / a) * a), c = ja(wa(c / a) * a), e = []; c >= b && (e.push(b),
            b = ja(b + a),
            b !== d); )
                d = b;
            return e
        },
        getLogTickPositions: function(a, b, c, d) {
            var e = this.options
              , f = this.len
              , g = [];
            if (d || (this._minorAutoInterval = null),
            a >= .5)
                a = t(a),
                g = this.getLinearTickPositions(a, b, c);
            else if (a >= .08)
                for (var h, i, j, k, l, f = V(b), e = a > .3 ? [1, 2, 4] : a > .15 ? [1, 2, 4, 6, 8] : [1, 2, 3, 4, 5, 6, 7, 8, 9]; c + 1 > f && !l; f++)
                    for (i = e.length,
                    h = 0; i > h && !l; h++)
                        j = na(ca(f) * e[h]),
                        j > b && g.push(k),
                        k > c && (l = !0),
                        k = j;
            else
                b = ca(b),
                c = ca(c),
                a = e[d ? "minorTickInterval" : "tickInterval"],
                a = p("auto" === a ? null : a, this._minorAutoInterval, (c - b) * (e.tickPixelInterval / (d ? 5 : 1)) / ((d ? f / this.tickPositions.length : f) || 1)),
                a = hb(a, null, K.pow(10, V(K.log(a) / K.LN10))),
                g = Sa(this.getLinearTickPositions(a, b, c), na),
                d || (this._minorAutoInterval = a / 5);
            return d || (this.tickInterval = a),
            g
        },
        getMinorTickPositions: function() {
            var d, e, a = this.tickPositions, b = this.minorTickInterval, c = [];
            if (this.isLog)
                for (e = a.length,
                d = 1; e > d; d++)
                    c = c.concat(this.getLogTickPositions(b, a[d - 1], a[d], !0));
            else
                for (a = this.min + (a[0] - this.min) % b; a <= this.max; a += b)
                    c.push(a);
            return c
        },
        adjustForMinRange: function() {
            var d, f, g, h, i, j, a = this.options, b = this.min, c = this.max, e = this.dataMax - this.dataMin >= this.minRange;
            if (this.isXAxis && this.minRange === x && !this.isLog && (u(a.min) || u(a.max) ? this.minRange = null : (n(this.series, function(a) {
                for (i = a.xData,
                g = j = a.xIncrement ? 1 : i.length - 1; g > 0; g--)
                    h = i[g] - i[g - 1],
                    (f === x || f > h) && (f = h)
            }),
            this.minRange = P(5 * f, this.dataMax - this.dataMin))),
            c - b < this.minRange) {
                var k = this.minRange;
                d = (k - c + b) / 2,
                d = [b - d, p(a.min, b - d)],
                e && (d[2] = this.dataMin),
                b = za(d),
                c = [b + k, p(a.max, b + k)],
                e && (c[2] = this.dataMax),
                c = Ma(c),
                k > c - b && (d[0] = c - k,
                d[1] = p(a.min, c - k),
                b = za(d))
            }
            this.min = b,
            this.max = c
        },
        setAxisTranslation: function() {
            var c, a = this.max - this.min, b = 0, d = 0, e = 0, f = this.transA;
            this.isXAxis && (this.isLinked ? d = this.linkedParent.minPointOffset : n(this.series, function(a) {
                var f = a.pointRange
                  , i = a.options.pointPlacement
                  , j = a.closestPointRange;
                b = v(b, f),
                d = v(d, i ? 0 : f / 2),
                e = v(e, "on" === i ? 0 : f),
                !a.noSharedTooltip && u(j) && (c = u(c) ? P(c, j) : j)
            }),
            this.minPointOffset = d,
            this.pointRange = b,
            this.closestPointRange = c),
            this.oldTransA = f,
            this.translationSlope = this.transA = f = this.len / (a + e || 1),
            this.transB = this.horiz ? this.left : this.bottom,
            this.minPixelPadding = f * d
        },
        setTickPositions: function(a) {
            var b = this
              , c = b.chart
              , d = b.options
              , e = b.isLog
              , f = b.isDatetimeAxis
              , g = b.isXAxis
              , h = b.isLinked
              , i = b.options.tickPositioner
              , j = d.maxPadding
              , k = d.minPadding
              , l = d.tickInterval
              , m = d.minTickInterval
              , o = d.tickPixelInterval
              , r = b.categories;
            h ? (b.linkedParent = c[g ? "xAxis" : "yAxis"][d.linkedTo],
            c = b.linkedParent.getExtremes(),
            b.min = p(c.min, c.dataMin),
            b.max = p(c.max, c.dataMax),
            d.type !== b.linkedParent.options.type && $a(11, 1)) : (b.min = p(b.userMin, d.min, b.dataMin),
            b.max = p(b.userMax, d.max, b.dataMax)),
            e && (!a && P(b.min, p(b.dataMin, b.min)) <= 0 && $a(10, 1),
            b.min = ja(na(b.min)),
            b.max = ja(na(b.max))),
            b.range && (b.userMin = b.min = v(b.min, b.max - b.range),
            b.userMax = b.max,
            a) && (b.range = null),
            b.adjustForMinRange(),
            r || b.usePercentage || h || !u(b.min) || !u(b.max) || (c = b.max - b.min || 1,
            u(d.min) || u(b.userMin) || !k || !(b.dataMin < 0) && b.ignoreMinPadding || (b.min -= c * k),
            u(d.max) || u(b.userMax) || !j || !(b.dataMax > 0) && b.ignoreMaxPadding || (b.max += c * j)),
            b.tickInterval = b.min === b.max || void 0 === b.min || void 0 === b.max ? 1 : h && !l && o === b.linkedParent.options.tickPixelInterval ? b.linkedParent.tickInterval : p(l, r ? 1 : (b.max - b.min) * o / (b.len || 1)),
            g && !a && n(b.series, function(a) {
                a.processData(b.min !== b.oldMin || b.max !== b.oldMax)
            }),
            b.setAxisTranslation(a),
            b.beforeSetTickPositions && b.beforeSetTickPositions(),
            b.postProcessTickInterval && (b.tickInterval = b.postProcessTickInterval(b.tickInterval)),
            !l && b.tickInterval < m && (b.tickInterval = m),
            f || e || (a = K.pow(10, V(K.log(b.tickInterval) / K.LN10)),
            l) || (b.tickInterval = hb(b.tickInterval, null, a, d)),
            b.minorTickInterval = "auto" === d.minorTickInterval && b.tickInterval ? b.tickInterval / 5 : d.minorTickInterval,
            b.tickPositions = i = d.tickPositions || i && i.apply(b, [b.min, b.max]),
            i || (i = f ? (b.getNonLinearTimeTicks || Ob)(Nb(b.tickInterval, d.units), b.min, b.max, d.startOfWeek, b.ordinalPositions, b.closestPointRange, !0) : e ? b.getLogTickPositions(b.tickInterval, b.min, b.max) : b.getLinearTickPositions(b.tickInterval, b.min, b.max),
            b.tickPositions = i),
            h || (e = i[0],
            f = i[i.length - 1],
            h = b.minPointOffset || 0,
            d.startOnTick ? b.min = e : b.min - h > e && i.shift(),
            d.endOnTick ? b.max = f : b.max + h < f && i.pop())
        },
        setMaxTicks: function() {
            var a = this.chart
              , b = a.maxTicks
              , c = this.tickPositions
              , d = this.xOrY;
            b || (b = {
                x: 0,
                y: 0
            }),
            !this.isLinked && !this.isDatetimeAxis && c.length > b[d] && this.options.alignTicks !== !1 && (b[d] = c.length),
            a.maxTicks = b
        },
        adjustTickAmount: function() {
            var a = this.xOrY
              , b = this.tickPositions
              , c = this.chart.maxTicks;
            if (c && c[a] && !this.isDatetimeAxis && !this.categories && !this.isLinked && this.options.alignTicks !== !1) {
                var d = this.tickAmount
                  , e = b.length;
                if (this.tickAmount = a = c[a],
                a > e) {
                    for (; b.length < a; )
                        b.push(ja(b[b.length - 1] + this.tickInterval));
                    this.transA *= (e - 1) / (a - 1),
                    this.max = b[b.length - 1]
                }
                u(d) && a !== d && (this.isDirty = !0)
            }
        },
        setScale: function() {
            var b, c, d, e, a = this.stacks;
            if (this.oldMin = this.min,
            this.oldMax = this.max,
            this.oldAxisLength = this.len,
            this.setAxisSize(),
            e = this.len !== this.oldAxisLength,
            n(this.series, function(a) {
                (a.isDirtyData || a.isDirty || a.xAxis.isDirty) && (d = !0)
            }),
            (e || d || this.isLinked || this.userMin !== this.oldUserMin || this.userMax !== this.oldUserMax) && (this.getSeriesExtremes(),
            this.setTickPositions(),
            this.oldUserMin = this.userMin,
            this.oldUserMax = this.userMax,
            this.isDirty || (this.isDirty = e || this.min !== this.oldMin || this.max !== this.oldMax)),
            !this.isXAxis)
                for (b in a)
                    for (c in a[b])
                        a[b][c].cum = a[b][c].total;
            this.setMaxTicks()
        },
        setExtremes: function(a, b, c, d, e) {
            var f = this
              , g = f.chart
              , c = p(c, !0)
              , e = s(e, {
                min: a,
                max: b
            });
            E(f, "setExtremes", e, function() {
                f.userMin = a,
                f.userMax = b,
                f.isDirtyExtremes = !0,
                c && g.redraw(d)
            })
        },
        zoom: function(a, b) {
            return this.setExtremes(a, b, !1, x, {
                trigger: "zoom"
            }),
            !0
        },
        setAxisSize: function() {
            var a = this.chart
              , b = this.options
              , c = b.offsetLeft || 0
              , d = b.offsetRight || 0;
            this.left = p(b.left, a.plotLeft + c),
            this.top = p(b.top, a.plotTop),
            this.width = p(b.width, a.plotWidth - c + d),
            this.height = p(b.height, a.plotHeight),
            this.bottom = a.chartHeight - this.height - this.top,
            this.right = a.chartWidth - this.width - this.left,
            this.len = v(this.horiz ? this.width : this.height, 0)
        },
        getExtremes: function() {
            var a = this.isLog;
            return {
                min: a ? ja(ca(this.min)) : this.min,
                max: a ? ja(ca(this.max)) : this.max,
                dataMin: this.dataMin,
                dataMax: this.dataMax,
                userMin: this.userMin,
                userMax: this.userMax
            }
        },
        getThreshold: function(a) {
            var b = this.isLog
              , c = b ? ca(this.min) : this.min
              , b = b ? ca(this.max) : this.max;
            return c > a || null === a ? a = c : a > b && (a = b),
            this.translate(a, 0, 1, 0, 1)
        },
        addPlotBandOrLine: function(a) {
            return a = new nb(this,a).render(),
            this.plotLinesAndBands.push(a),
            a
        },
        getOffset: function() {
            var i, k, y, a = this, b = a.chart, c = b.renderer, d = a.options, e = a.tickPositions, f = a.ticks, g = a.horiz, h = a.side, j = 0, l = 0, m = d.title, o = d.labels, r = 0, ea = b.axisOffset, q = [-1, 1, 1, -1][h];
            if (a.hasData = b = a.hasVisibleSeries || u(a.min) && u(a.max) && !!e,
            a.showAxis = i = b || p(d.showEmpty, !0),
            a.axisGroup || (a.gridGroup = c.g("grid").attr({
                zIndex: d.gridZIndex || 1
            }).add(),
            a.axisGroup = c.g("axis").attr({
                zIndex: d.zIndex || 2
            }).add(),
            a.labelGroup = c.g("axis-labels").attr({
                zIndex: o.zIndex || 7
            }).add()),
            b || a.isLinked)
                n(e, function(b) {
                    f[b] ? f[b].addLabel() : f[b] = new Pa(a,b)
                }),
                n(e, function(a) {
                    0 !== h && 2 !== h && {
                        1: "left",
                        3: "right"
                    }[h] !== o.align || (r = v(f[a].getLabelSize(), r))
                }),
                a.staggerLines && (r += 16 * (a.staggerLines - 1));
            else
                for (y in f)
                    f[y].destroy(),
                    delete f[y];
            m && m.text && (a.axisTitle || (a.axisTitle = c.text(m.text, 0, 0, m.useHTML).attr({
                zIndex: 7,
                rotation: m.rotation || 0,
                align: m.textAlign || {
                    low: "left",
                    middle: "center",
                    high: "right"
                }[m.align]
            }).css(m.style).add(a.axisGroup),
            a.axisTitle.isNew = !0),
            i && (j = a.axisTitle.getBBox()[g ? "height" : "width"],
            l = p(m.margin, g ? 5 : 10),
            k = m.offset),
            a.axisTitle[i ? "show" : "hide"]()),
            a.offset = q * p(d.offset, ea[h]),
            a.axisTitleMargin = p(k, r + l + (2 !== h && r && q * d.labels[g ? "y" : "x"])),
            ea[h] = v(ea[h], a.axisTitleMargin + j + q * a.offset)
        },
        getLinePath: function(a) {
            var b = this.chart
              , c = this.opposite
              , d = this.offset
              , e = this.horiz
              , f = this.left + (c ? this.width : 0) + d;
            return this.lineTop = c = b.chartHeight - this.bottom - (c ? this.height : 0) + d,
            b.renderer.crispLine(["M", e ? this.left : f, e ? c : this.top, "L", e ? b.chartWidth - this.right : f, e ? c : b.chartHeight - this.bottom], a)
        },
        getTitlePosition: function() {
            var a = this.horiz
              , b = this.left
              , c = this.top
              , d = this.len
              , e = this.options.title
              , f = a ? b : c
              , g = this.opposite
              , h = this.offset
              , i = A(e.style.fontSize || 12)
              , d = {
                low: f + (a ? 0 : d),
                middle: f + d / 2,
                high: f + (a ? d : 0)
            }[e.align]
              , b = (a ? c + this.height : b) + (a ? 1 : -1) * (g ? -1 : 1) * this.axisTitleMargin + (2 === this.side ? i : 0);
            return {
                x: a ? d : b + (g ? this.width : 0) + h + (e.x || 0),
                y: a ? b - (g ? this.height : 0) + h : d + (e.y || 0)
            }
        },
        render: function() {
            var q, s, w, a = this, b = a.chart, c = b.renderer, d = a.options, e = a.isLog, f = a.isLinked, g = a.tickPositions, h = a.axisTitle, i = a.stacks, j = a.ticks, k = a.minorTicks, l = a.alternateBands, m = d.stackLabels, o = d.alternateGridColor, r = a.tickmarkOffset, p = d.lineWidth, y = b.hasRendered && u(a.oldMin) && !isNaN(a.oldMin), t = a.showAxis;
            if ((a.hasData || f) && (a.minorTickInterval && !a.categories && n(a.getMinorTickPositions(), function(b) {
                k[b] || (k[b] = new Pa(a,b,"minor")),
                y && k[b].isNew && k[b].render(null, !0),
                k[b].isActive = !0,
                k[b].render()
            }),
            n(g.slice(1).concat([g[0]]), function(b, c) {
                c = c === g.length - 1 ? 0 : c + 1,
                (!f || b >= a.min && b <= a.max) && (j[b] || (j[b] = new Pa(a,b)),
                y && j[b].isNew && j[b].render(c, !0),
                j[b].isActive = !0,
                j[b].render(c))
            }),
            o && n(g, function(b, c) {
                c % 2 === 0 && b < a.max && (l[b] || (l[b] = new nb(a)),
                s = b + r,
                w = g[c + 1] !== x ? g[c + 1] + r : a.max,
                l[b].options = {
                    from: e ? ca(s) : s,
                    to: e ? ca(w) : w,
                    color: o
                },
                l[b].render(),
                l[b].isActive = !0)
            }),
            a._addedPlotLB || (n((d.plotLines || []).concat(d.plotBands || []), function(b) {
                a.addPlotBandOrLine(b)
            }),
            a._addedPlotLB = !0)),
            n([j, k, l], function(a) {
                for (var b in a)
                    a[b].isActive ? a[b].isActive = !1 : (a[b].destroy(),
                    delete a[b])
            }),
            p && (q = a.getLinePath(p),
            a.axisLine ? a.axisLine.animate({
                d: q
            }) : a.axisLine = c.path(q).attr({
                stroke: d.lineColor,
                "stroke-width": p,
                zIndex: 7
            }).add(a.axisGroup),
            a.axisLine[t ? "show" : "hide"]()),
            h && t && (h[h.isNew ? "attr" : "animate"](a.getTitlePosition()),
            h.isNew = !1),
            m && m.enabled) {
                var I, J, d = a.stackTotalGroup;
                d || (a.stackTotalGroup = d = c.g("stack-labels").attr({
                    visibility: "visible",
                    zIndex: 6
                }).add()),
                d.translate(b.plotLeft, b.plotTop);
                for (I in i)
                    for (J in b = i[I])
                        b[J].render(d)
            }
            a.isDirty = !1
        },
        removePlotBandOrLine: function(a) {
            for (var b = this.plotLinesAndBands, c = b.length; c--; )
                b[c].id === a && b[c].destroy()
        },
        setTitle: function(a, b) {
            var c = this.chart
              , d = this.options
              , e = this.axisTitle;
            d.title = C(d.title, a),
            this.axisTitle = e && e.destroy(),
            this.isDirty = !0,
            p(b, !0) && c.redraw()
        },
        redraw: function() {
            var a = this.chart;
            a.tracker.resetTracker && a.tracker.resetTracker(!0),
            this.render(),
            n(this.plotLinesAndBands, function(a) {
                a.render()
            }),
            n(this.series, function(a) {
                a.isDirty = !0
            })
        },
        setCategories: function(a, b) {
            var c = this.chart;
            this.categories = this.userOptions.categories = a,
            n(this.series, function(a) {
                a.translate(),
                a.setTooltipPoints(!0)
            }),
            this.isDirty = !0,
            p(b, !0) && c.redraw()
        },
        destroy: function() {
            var c, a = this, b = a.stacks;
            U(a);
            for (c in b)
                Aa(b[c]),
                b[c] = null;
            n([a.ticks, a.minorTicks, a.alternateBands, a.plotLinesAndBands], function(a) {
                Aa(a)
            }),
            n("stackTotalGroup,axisLine,axisGroup,gridGroup,labelGroup,axisTitle".split(","), function(b) {
                a[b] && (a[b] = a[b].destroy())
            })
        }
    },
    pb.prototype = {
        destroy: function() {
            n(this.crosshairs, function(a) {
                a && a.destroy()
            }),
            this.label && (this.label = this.label.destroy())
        },
        move: function(a, b, c, d) {
            var e = this
              , f = e.now
              , g = e.options.animation !== !1 && !e.isHidden;
            s(f, {
                x: g ? (2 * f.x + a) / 3 : a,
                y: g ? (f.y + b) / 2 : b,
                anchorX: g ? (2 * f.anchorX + c) / 3 : c,
                anchorY: g ? (f.anchorY + d) / 2 : d
            }),
            e.label.attr(f),
            e.tooltipTick = g && (N(a - f.x) > 1 || N(b - f.y) > 1) ? function() {
                e.move(a, b, c, d)
            }
            : null
        },
        hide: function() {
            if (!this.isHidden) {
                var a = this.chart.hoverPoints;
                this.label.hide(),
                a && n(a, function(a) {
                    a.setState()
                }),
                this.chart.hoverPoints = null,
                this.isHidden = !0
            }
        },
        hideCrosshairs: function() {
            n(this.crosshairs, function(a) {
                a && a.hide()
            })
        },
        getAnchor: function(a, b) {
            var c, h, d = this.chart, e = d.inverted, f = 0, g = 0, a = oa(a);
            return c = a[0].tooltipPos,
            c || (n(a, function(a) {
                h = a.series.yAxis,
                f += a.plotX,
                g += (a.plotLow ? (a.plotLow + a.plotHigh) / 2 : a.plotY) + (!e && h ? h.top - d.plotTop : 0)
            }),
            f /= a.length,
            g /= a.length,
            c = [e ? d.plotWidth - g : f, this.shared && !e && a.length > 1 && b ? b.chartY - d.plotTop : e ? d.plotHeight - f : g]),
            Sa(c, t)
        },
        getPosition: function(a, b, c) {
            var l, d = this.chart, e = d.plotLeft, f = d.plotTop, g = d.plotWidth, h = d.plotHeight, i = p(this.options.distance, 12), j = c.plotX, c = c.plotY, d = j + e + (d.inverted ? i : -a - i), k = c - b + f + 15;
            return 7 > d && (d = e + j + i),
            d + a > e + g && (d -= d + a - (e + g),
            k = c - b + f - i,
            l = !0),
            f + 5 > k && (k = f + 5,
            l && c >= k && k + b >= c && (k = c + f + i)),
            k + b > f + h && (k = v(f, f + h - b - i)),
            {
                x: d,
                y: k
            }
        },
        refresh: function(a, b) {
            function c() {
                var c, a = this.points || oa(this), b = a[0].series;
                return c = [b.tooltipHeaderFormatter(a[0].key)],
                n(a, function(a) {
                    b = a.series,
                    c.push(b.tooltipFormatter && b.tooltipFormatter(a) || a.point.tooltipFormatter(b.tooltipOptions.pointFormat))
                }),
                c.push(f.footerFormat || ""),
                c.join("")
            }
            var g, h, i, k, d = this.chart, e = this.label, f = this.options, j = {}, l = [];
            k = f.formatter || c;
            var m, j = d.hoverPoints, o = f.crosshairs;
            if (i = this.shared,
            h = this.getAnchor(a, b),
            g = h[0],
            h = h[1],
            !i || a.series && a.series.noSharedTooltip ? j = a.getLabelConfig() : (d.hoverPoints = a,
            j && n(j, function(a) {
                a.setState()
            }),
            n(a, function(a) {
                a.setState("hover"),
                l.push(a.getLabelConfig())
            }),
            j = {
                x: a[0].category,
                y: a[0].y
            },
            j.points = l,
            a = a[0]),
            k = k.call(j),
            j = a.series,
            i = i || !j.isCartesian || j.tooltipOutsidePlot || d.isInsidePlot(g, h),
            k !== !1 && i ? (this.isHidden && e.show(),
            e.attr({
                text: k
            }),
            m = f.borderColor || a.color || j.color || "#606060",
            e.attr({
                stroke: m
            }),
            e = (f.positioner || this.getPosition).call(this, e.width, e.height, {
                plotX: g,
                plotY: h
            }),
            this.move(t(e.x), t(e.y), g + d.plotLeft, h + d.plotTop),
            this.isHidden = !1) : this.hide(),
            o)
                for (o = oa(o),
                e = o.length; e--; )
                    i = a.series[e ? "yAxis" : "xAxis"],
                    o[e] && i && (i = i.getPlotLinePath(e ? p(a.stackY, a.y) : a.x, 1),
                    this.crosshairs[e] ? this.crosshairs[e].attr({
                        d: i,
                        visibility: "visible"
                    }) : (j = {
                        "stroke-width": o[e].width || 1,
                        stroke: o[e].color || "#C0C0C0",
                        zIndex: o[e].zIndex || 2
                    },
                    o[e].dashStyle && (j.dashstyle = o[e].dashStyle),
                    this.crosshairs[e] = d.renderer.path(i).attr(j).add()));
            E(d, "tooltipRefresh", {
                text: k,
                x: g + d.plotLeft,
                y: h + d.plotTop,
                borderColor: m
            })
        },
        tick: function() {
            this.tooltipTick && this.tooltipTick()
        }
    },
    qb.prototype = {
        normalizeMouseEvent: function(a) {
            var b, c, d, a = a || L.event;
            return a.target || (a.target = a.srcElement),
            a = Lb(a),
            d = a.touches ? a.touches.item(0) : a,
            this.chartPosition = b = Sb(this.chart.container),
            d.pageX === x ? (c = a.x,
            b = a.y) : (c = d.pageX - b.left,
            b = d.pageY - b.top),
            s(a, {
                chartX: t(c),
                chartY: t(b)
            })
        },
        getMouseCoordinates: function(a) {
            var b = {
                xAxis: [],
                yAxis: []
            }
              , c = this.chart;
            return n(c.axes, function(d) {
                var e = d.isXAxis;
                b[e ? "xAxis" : "yAxis"].push({
                    axis: d,
                    value: d.translate(((c.inverted ? !e : e) ? a.chartX - c.plotLeft : d.top + d.len - a.chartY) - d.minPixelPadding, !0)
                })
            }),
            b
        },
        getIndex: function(a) {
            var b = this.chart;
            return b.inverted ? b.plotHeight + b.plotTop - a.chartY : a.chartX - b.plotLeft
        },
        onmousemove: function(a) {
            var e, h, i, b = this.chart, c = b.series, d = b.tooltip, f = b.hoverPoint, g = b.hoverSeries, j = b.chartWidth, k = this.getIndex(a);
            if (d && this.options.tooltip.shared && (!g || !g.noSharedTooltip)) {
                for (e = [],
                h = c.length,
                i = 0; h > i; i++)
                    c[i].visible && c[i].options.enableMouseTracking !== !1 && !c[i].noSharedTooltip && c[i].tooltipPoints.length && (b = c[i].tooltipPoints[k],
                    b._dist = N(k - b[c[i].xAxis.tooltipPosName || "plotX"]),
                    j = P(j, b._dist),
                    e.push(b));
                for (h = e.length; h--; )
                    e[h]._dist > j && e.splice(h, 1);
                e.length && e[0].plotX !== this.hoverX && (d.refresh(e, a),
                this.hoverX = e[0].plotX)
            }
            g && g.tracker && (b = g.tooltipPoints[k]) && b !== f && b.onMouseOver()
        },
        resetTracker: function(a) {
            var b = this.chart
              , c = b.hoverSeries
              , d = b.hoverPoint
              , e = b.tooltip
              , b = e && e.shared ? b.hoverPoints : d;
            (a = a && e && b) && oa(b)[0].plotX === x && (a = !1),
            a ? e.refresh(b) : (d && d.onMouseOut(),
            c && c.onMouseOut(),
            e && (e.hide(),
            e.hideCrosshairs()),
            this.hoverX = null)
        },
        setDOMEvents: function() {
            function a() {
                if (b.selectionMarker) {
                    var m, f = {
                        xAxis: [],
                        yAxis: []
                    }, g = b.selectionMarker.getBBox(), h = g.x - c.plotLeft, l = g.y - c.plotTop;
                    e && (n(c.axes, function(a) {
                        if (a.options.zoomEnabled !== !1) {
                            var b = a.isXAxis
                              , d = c.inverted ? !b : b
                              , e = a.translate(d ? h : c.plotHeight - l - g.height, !0, 0, 0, 1)
                              , d = a.translate((d ? h + g.width : c.plotHeight - l) - 2 * a.minPixelPadding, !0, 0, 0, 1);
                            !isNaN(e) && !isNaN(d) && (f[b ? "xAxis" : "yAxis"].push({
                                axis: a,
                                min: P(e, d),
                                max: v(e, d)
                            }),
                            m = !0)
                        }
                    }),
                    m && E(c, "selection", f, function(a) {
                        c.zoom(a)
                    })),
                    b.selectionMarker = b.selectionMarker.destroy()
                }
                c && (G(d, {
                    cursor: "auto"
                }),
                c.cancelClick = e,
                c.mouseIsDown = e = !1),
                U(z, ga ? "touchend" : "mouseup", a)
            }
            var e, b = this, c = b.chart, d = c.container, f = b.zoomX && !c.inverted || b.zoomY && c.inverted, g = b.zoomY && !c.inverted || b.zoomX && c.inverted;
            b.hideTooltipOnMouseMove = function(a) {
                a = Lb(a),
                b.chartPosition && c.hoverSeries && c.hoverSeries.isCartesian && !c.isInsidePlot(a.pageX - b.chartPosition.left - c.plotLeft, a.pageY - b.chartPosition.top - c.plotTop) && b.resetTracker()
            }
            ,
            b.hideTooltipOnMouseLeave = function() {
                b.resetTracker(),
                b.chartPosition = null
            }
            ,
            d.onmousedown = function(d) {
                d = b.normalizeMouseEvent(d),
                !ga && d.preventDefault && d.preventDefault(),
                c.mouseIsDown = !0,
                c.cancelClick = !1,
                c.mouseDownX = b.mouseDownX = d.chartX,
                b.mouseDownY = d.chartY,
                H(z, ga ? "touchend" : "mouseup", a)
            }
            ;
            var h = function(a) {
                if (!a || !(a.touches && a.touches.length > 1)) {
                    a = b.normalizeMouseEvent(a),
                    ga || (a.returnValue = !1);
                    var d = a.chartX
                      , h = a.chartY
                      , l = !c.isInsidePlot(d - c.plotLeft, h - c.plotTop);
                    if (ga && "touchstart" === a.type && (B(a.target, "isTracker") ? c.runTrackerClick || a.preventDefault() : !c.runChartClick && !l && a.preventDefault()),
                    l && (d < c.plotLeft ? d = c.plotLeft : d > c.plotLeft + c.plotWidth && (d = c.plotLeft + c.plotWidth),
                    h < c.plotTop ? h = c.plotTop : h > c.plotTop + c.plotHeight && (h = c.plotTop + c.plotHeight)),
                    c.mouseIsDown && "touchstart" !== a.type && (e = Math.sqrt(Math.pow(b.mouseDownX - d, 2) + Math.pow(b.mouseDownY - h, 2)),
                    e > 10)) {
                        var m = c.isInsidePlot(b.mouseDownX - c.plotLeft, b.mouseDownY - c.plotTop);
                        if (c.hasCartesianSeries && (b.zoomX || b.zoomY) && m && !b.selectionMarker && (b.selectionMarker = c.renderer.rect(c.plotLeft, c.plotTop, f ? 1 : c.plotWidth, g ? 1 : c.plotHeight, 0).attr({
                            fill: b.options.chart.selectionMarkerFill || "rgba(69,114,167,0.25)",
                            zIndex: 7
                        }).add()),
                        b.selectionMarker && f) {
                            var o = d - b.mouseDownX;
                            b.selectionMarker.attr({
                                width: N(o),
                                x: (o > 0 ? 0 : o) + b.mouseDownX
                            })
                        }
                        b.selectionMarker && g && (h -= b.mouseDownY,
                        b.selectionMarker.attr({
                            height: N(h),
                            y: (h > 0 ? 0 : h) + b.mouseDownY
                        })),
                        m && !b.selectionMarker && b.options.chart.panning && c.pan(d)
                    }
                    return l || b.onmousemove(a),
                    l || !c.hasCartesianSeries
                }
            };
            d.onmousemove = h,
            H(d, "mouseleave", b.hideTooltipOnMouseLeave),
            H(z, "mousemove", b.hideTooltipOnMouseMove),
            d.ontouchstart = function(a) {
                (b.zoomX || b.zoomY) && d.onmousedown(a),
                h(a)
            }
            ,
            d.ontouchmove = h,
            d.ontouchend = function() {
                e && b.resetTracker()
            }
            ,
            d.onclick = function(a) {
                var e, f, d = c.hoverPoint, a = b.normalizeMouseEvent(a);
                a.cancelBubble = !0,
                c.cancelClick || (d && (B(a.target, "isTracker") || B(a.target.parentNode, "isTracker")) ? (e = d.plotX,
                f = d.plotY,
                s(d, {
                    pageX: b.chartPosition.left + c.plotLeft + (c.inverted ? c.plotWidth - f : e),
                    pageY: b.chartPosition.top + c.plotTop + (c.inverted ? c.plotHeight - e : f)
                }),
                E(d.series, "click", s(a, {
                    point: d
                })),
                d.firePointEvent("click", a)) : (s(a, b.getMouseCoordinates(a)),
                c.isInsidePlot(a.chartX - c.plotLeft, a.chartY - c.plotTop) && E(c, "click", a)))
            }
        },
        destroy: function() {
            var a = this.chart
              , b = a.container;
            a.trackerGroup && (a.trackerGroup = a.trackerGroup.destroy()),
            U(b, "mouseleave", this.hideTooltipOnMouseLeave),
            U(z, "mousemove", this.hideTooltipOnMouseMove),
            b.onclick = b.onmousedown = b.onmousemove = b.ontouchstart = b.ontouchend = b.ontouchmove = null,
            clearInterval(this.tooltipInterval)
        },
        init: function(a, b) {
            a.trackerGroup || (a.trackerGroup = a.renderer.g("tracker").attr({
                zIndex: 9
            }).add()),
            b.enabled && (a.tooltip = new pb(a,b),
            this.tooltipInterval = setInterval(function() {
                a && a.tooltip && a.tooltip.tick()
            }, 32)),
            this.setDOMEvents()
        }
    },
    rb.prototype = {
        init: function(a) {
            var b = this
              , c = b.options = a.options.legend;
            if (c.enabled) {
                var d = c.itemStyle
                  , e = p(c.padding, 8)
                  , f = c.itemMarginTop || 0;
                b.baseline = A(d.fontSize) + 3 + f,
                b.itemStyle = d,
                b.itemHiddenStyle = C(d, c.itemHiddenStyle),
                b.itemMarginTop = f,
                b.padding = e,
                b.initialItemX = e,
                b.initialItemY = e - 5,
                b.maxItemWidth = 0,
                b.chart = a,
                b.itemHeight = 0,
                b.lastLineHeight = 0,
                b.render(),
                H(b.chart, "endResize", function() {
                    b.positionCheckboxes()
                })
            }
        },
        colorizeItem: function(a, b) {
            var c = this.options
              , d = a.legendItem
              , e = a.legendLine
              , f = a.legendSymbol
              , g = this.itemHiddenStyle.color
              , c = b ? c.itemStyle.color : g
              , g = b ? a.color : g;
            d && d.css({
                fill: c
            }),
            e && e.attr({
                stroke: g
            }),
            f && f.attr({
                stroke: g,
                fill: g
            })
        },
        positionItem: function(a) {
            var b = this.options
              , c = b.symbolPadding
              , b = !b.rtl
              , d = a._legendItemPos
              , e = d[0]
              , d = d[1]
              , f = a.checkbox;
            a.legendGroup && a.legendGroup.translate(b ? e : this.legendWidth - e - 2 * c - 4, d),
            f && (f.x = e,
            f.y = d)
        },
        destroyItem: function(a) {
            var b = a.checkbox;
            n(["legendItem", "legendLine", "legendSymbol", "legendGroup"], function(b) {
                a[b] && a[b].destroy()
            }),
            b && Na(a.checkbox)
        },
        destroy: function() {
            var a = this.group
              , b = this.box;
            b && (this.box = b.destroy()),
            a && (this.group = a.destroy())
        },
        positionCheckboxes: function() {
            var a = this;
            n(a.allItems, function(b) {
                var c = b.checkbox
                  , d = a.group.alignAttr;
                c && G(c, {
                    left: d.translateX + b.legendItemWidth + c.x - 20 + "px",
                    top: d.translateY + c.y + 3 + "px"
                })
            })
        },
        renderItem: function(a) {
            var q, b = this, c = b.chart, d = c.renderer, e = b.options, f = "horizontal" === e.layout, g = e.symbolWidth, h = e.symbolPadding, i = b.itemStyle, j = b.itemHiddenStyle, k = b.padding, l = !e.rtl, m = e.width, o = e.itemMarginBottom || 0, r = b.itemMarginTop, p = b.initialItemX, n = a.legendItem, y = a.series || a, u = y.options, t = u.showCheckbox;
            !n && (a.legendGroup = d.g("legend-item").attr({
                zIndex: 1
            }).add(b.scrollGroup),
            y.drawLegendSymbol(b, a),
            a.legendItem = n = d.text(e.labelFormatter.call(a), l ? g + h : -h, b.baseline, e.useHTML).css(C(a.visible ? i : j)).attr({
                align: l ? "left" : "right",
                zIndex: 2
            }).add(a.legendGroup),
            a.legendGroup.on("mouseover", function() {
                a.setState("hover"),
                n.css(b.options.itemHoverStyle)
            }).on("mouseout", function() {
                n.css(a.visible ? i : j),
                a.setState()
            }).on("click", function(b) {
                var c = function() {
                    a.setVisible()
                }
                  , b = {
                    browserEvent: b
                };
                a.firePointEvent ? a.firePointEvent("legendItemClick", b, c) : E(a, "legendItemClick", b, c)
            }),
            b.colorizeItem(a, a.visible),
            u && t) && (a.checkbox = S("input", {
                type: "checkbox",
                checked: a.selected,
                defaultChecked: a.selected
            }, e.itemCheckboxStyle, c.container),
            H(a.checkbox, "click", function(b) {
                E(a, "checkboxClick", {
                    checked: b.target.checked
                }, function() {
                    a.select()
                })
            })),
            d = n.getBBox(),
            q = a.legendItemWidth = e.itemWidth || g + h + d.width + k + (t ? 20 : 0),
            e = q,
            b.itemHeight = g = d.height,
            f && b.itemX - p + e > (m || c.chartWidth - 2 * k - p) && (b.itemX = p,
            b.itemY += r + b.lastLineHeight + o,
            b.lastLineHeight = 0),
            b.maxItemWidth = v(b.maxItemWidth, e),
            b.lastItemY = r + b.itemY + o,
            b.lastLineHeight = v(g, b.lastLineHeight),
            a._legendItemPos = [b.itemX, b.itemY],
            f ? b.itemX += e : (b.itemY += r + g + o,
            b.lastLineHeight = g),
            b.offsetWidth = m || v(f ? b.itemX - p : e, b.offsetWidth)
        },
        render: function() {
            var e, f, g, h, a = this, b = a.chart, c = b.renderer, d = a.group, i = a.box, j = a.options, k = a.padding, l = j.borderWidth, m = j.backgroundColor;
            a.itemX = a.initialItemX,
            a.itemY = a.initialItemY,
            a.offsetWidth = 0,
            a.lastItemY = 0,
            d || (a.group = d = c.g("legend").attr({
                zIndex: 7
            }).add(),
            a.contentGroup = c.g().attr({
                zIndex: 1
            }).add(d),
            a.scrollGroup = c.g().add(a.contentGroup),
            a.clipRect = c.clipRect(0, 0, 9999, b.chartHeight),
            a.contentGroup.clip(a.clipRect)),
            e = [],
            n(b.series, function(a) {
                var b = a.options;
                b.showInLegend && (e = e.concat(a.legendItems || ("point" === b.legendType ? a.data : a)))
            }),
            Fb(e, function(a, b) {
                return (a.options && a.options.legendIndex || 0) - (b.options && b.options.legendIndex || 0)
            }),
            j.reversed && e.reverse(),
            a.allItems = e,
            a.display = f = !!e.length,
            n(e, function(b) {
                a.renderItem(b)
            }),
            g = j.width || a.offsetWidth,
            h = a.lastItemY + a.lastLineHeight,
            h = a.handleOverflow(h),
            (l || m) && (g += k,
            h += k,
            i ? g > 0 && h > 0 && (i[i.isNew ? "attr" : "animate"](i.crisp(null, null, null, g, h)),
            i.isNew = !1) : (a.box = i = c.rect(0, 0, g, h, j.borderRadius, l || 0).attr({
                stroke: j.borderColor,
                "stroke-width": l || 0,
                fill: m || T
            }).add(d).shadow(j.shadow),
            i.isNew = !0),
            i[f ? "show" : "hide"]()),
            a.legendWidth = g,
            a.legendHeight = h,
            n(e, function(b) {
                a.positionItem(b)
            }),
            f && d.align(s({
                width: g,
                height: h
            }, j), !0, b.spacingBox),
            b.isResizing || this.positionCheckboxes()
        },
        handleOverflow: function(a) {
            var b = this
              , c = this.chart
              , d = c.renderer
              , e = this.options
              , f = e.y
              , f = c.spacingBox.height + ("top" === e.verticalAlign ? -f : f) - this.padding
              , g = e.maxHeight
              , h = this.clipRect
              , i = e.navigation
              , j = p(i.animation, !0)
              , k = i.arrowSize || 12
              , l = this.nav;
            return "horizontal" === e.layout && (f /= 2),
            g && (f = P(f, g)),
            a > f ? (this.clipHeight = c = f - 20,
            this.pageCount = wa(a / c),
            this.currentPage = p(this.currentPage, 1),
            this.fullHeight = a,
            h.attr({
                height: c
            }),
            l || (this.nav = l = d.g().attr({
                zIndex: 1
            }).add(this.group),
            this.up = d.symbol("triangle", 0, 0, k, k).on("click", function() {
                b.scroll(-1, j)
            }).add(l),
            this.pager = d.text("", 15, 10).css(i.style).add(l),
            this.down = d.symbol("triangle-down", 0, 0, k, k).on("click", function() {
                b.scroll(1, j)
            }).add(l)),
            b.scroll(0),
            a = f) : l && (h.attr({
                height: c.chartHeight
            }),
            l.hide(),
            this.scrollGroup.attr({
                translateY: 1
            })),
            a
        },
        scroll: function(a, b) {
            var c = this.pageCount
              , d = this.currentPage + a
              , e = this.clipHeight
              , f = this.options.navigation
              , g = f.activeColor
              , f = f.inactiveColor
              , h = this.pager
              , i = this.padding;
            d > c && (d = c),
            d > 0 && (b !== x && ua(b, this.chart),
            this.nav.attr({
                translateX: i,
                translateY: e + 7,
                visibility: "visible"
            }),
            this.up.attr({
                fill: 1 === d ? f : g
            }).css({
                cursor: 1 === d ? "default" : "pointer"
            }),
            h.attr({
                text: d + "/" + this.pageCount
            }),
            this.down.attr({
                x: 18 + this.pager.getBBox().width,
                fill: d === c ? f : g
            }).css({
                cursor: d === c ? "default" : "pointer"
            }),
            this.scrollGroup.animate({
                translateY: -P(e * (d - 1), this.fullHeight - e + i) + 1
            }),
            h.attr({
                text: d + "/" + c
            }),
            this.currentPage = d)
        }
    },
    sb.prototype = {
        initSeries: function(a) {
            var b = this.options.chart
              , b = new ba[a.type || b.type || b.defaultSeriesType];
            return b.init(this, a),
            b
        },
        addSeries: function(a, b, c) {
            var d, e = this;
            return a && (ua(c, e),
            b = p(b, !0),
            E(e, "addSeries", {
                options: a
            }, function() {
                d = e.initSeries(a),
                e.isDirtyLegend = !0,
                b && e.redraw()
            })),
            d
        },
        isInsidePlot: function(a, b, c) {
            var d = c ? b : a
              , a = c ? a : b;
            return d >= 0 && d <= this.plotWidth && a >= 0 && a <= this.plotHeight
        },
        adjustTickAmounts: function() {
            this.options.chart.alignTicks !== !1 && n(this.axes, function(a) {
                a.adjustTickAmount()
            }),
            this.maxTicks = null
        },
        redraw: function(a) {
            var g, b = this.axes, c = this.series, d = this.tracker, e = this.legend, f = this.isDirtyLegend, h = this.isDirtyBox, i = c.length, j = i, k = this.renderer, l = k.isHidden();
            for (ua(a, this),
            l && this.cloneRenderTo(); j--; )
                if (a = c[j],
                a.isDirty && a.options.stacking) {
                    g = !0;
                    break
                }
            if (g)
                for (j = i; j--; )
                    a = c[j],
                    a.options.stacking && (a.isDirty = !0);
            n(c, function(a) {
                a.isDirty && "point" === a.options.legendType && (f = !0)
            }),
            f && e.options.enabled && (e.render(),
            this.isDirtyLegend = !1),
            this.hasCartesianSeries && (this.isResizing || (this.maxTicks = null,
            n(b, function(a) {
                a.setScale()
            })),
            this.adjustTickAmounts(),
            this.getMargins(),
            n(b, function(a) {
                a.isDirtyExtremes && (a.isDirtyExtremes = !1,
                E(a, "afterSetExtremes", a.getExtremes())),
                (a.isDirty || h || g) && (a.redraw(),
                h = !0)
            })),
            h && this.drawChartBox(),
            n(c, function(a) {
                a.isDirty && a.visible && (!a.isCartesian || a.xAxis) && a.redraw()
            }),
            d && d.resetTracker && d.resetTracker(!0),
            k.draw(),
            E(this, "redraw"),
            l && this.cloneRenderTo(!0)
        },
        showLoading: function(a) {
            var b = this.options
              , c = this.loadingDiv
              , d = b.loading;
            c || (this.loadingDiv = c = S(ia, {
                className: "highcharts-loading"
            }, s(d.style, {
                left: this.plotLeft + "px",
                top: this.plotTop + "px",
                width: this.plotWidth + "px",
                height: this.plotHeight + "px",
                zIndex: 10,
                display: T
            }), this.container),
            this.loadingSpan = S("span", null, d.labelStyle, c)),
            this.loadingSpan.innerHTML = a || b.lang.loading,
            this.loadingShown || (G(c, {
                opacity: 0,
                display: ""
            }),
            xb(c, {
                opacity: d.style.opacity
            }, {
                duration: d.showDuration || 0
            }),
            this.loadingShown = !0)
        },
        hideLoading: function() {
            var a = this.options
              , b = this.loadingDiv;
            b && xb(b, {
                opacity: 0
            }, {
                duration: a.loading.hideDuration || 100,
                complete: function() {
                    G(b, {
                        display: T
                    })
                }
            }),
            this.loadingShown = !1
        },
        get: function(a) {
            var d, e, b = this.axes, c = this.series;
            for (d = 0; d < b.length; d++)
                if (b[d].options.id === a)
                    return b[d];
            for (d = 0; d < c.length; d++)
                if (c[d].options.id === a)
                    return c[d];
            for (d = 0; d < c.length; d++)
                for (e = c[d].points || [],
                b = 0; b < e.length; b++)
                    if (e[b].id === a)
                        return e[b];
            return null
        },
        getAxes: function() {
            var a = this
              , b = this.options
              , c = b.xAxis || {}
              , b = b.yAxis || {}
              , c = oa(c);
            n(c, function(a, b) {
                a.index = b,
                a.isX = !0
            }),
            b = oa(b),
            n(b, function(a, b) {
                a.index = b
            }),
            c = c.concat(b),
            n(c, function(b) {
                new ob(a,b)
            }),
            a.adjustTickAmounts()
        },
        getSelectedPoints: function() {
            var a = [];
            return n(this.series, function(b) {
                a = a.concat(Kb(b.points, function(a) {
                    return a.selected
                }))
            }),
            a
        },
        getSelectedSeries: function() {
            return Kb(this.series, function(a) {
                return a.selected
            })
        },
        showResetZoom: function() {
            var a = this
              , b = O.lang
              , c = a.options.chart.resetZoomButton
              , d = c.theme
              , e = d.states
              , f = "chart" === c.relativeTo ? null : "plotBox";
            this.resetZoomButton = a.renderer.button(b.resetZoom, null, null, function() {
                a.zoomOut()
            }, d, e && e.hover).attr({
                align: c.position.align,
                title: b.resetZoomTitle
            }).add().align(c.position, !1, a[f]),
            this.resetZoomButton.alignTo = f
        },
        zoomOut: function() {
            var a = this
              , b = a.resetZoomButton;
            E(a, "selection", {
                resetSelection: !0
            }, function() {
                a.zoom()
            }),
            b && (a.resetZoomButton = b.destroy())
        },
        zoom: function(a) {
            var c, b = this;
            !a || a.resetSelection ? n(b.axes, function(a) {
                c = a.zoom()
            }) : n(a.xAxis.concat(a.yAxis), function(a) {
                var e = a.axis;
                b.tracker[e.isXAxis ? "zoomX" : "zoomY"] && (c = e.zoom(a.min, a.max))
            }),
            b.resetZoomButton || b.showResetZoom(),
            c && b.redraw(p(b.options.chart.animation, b.pointCount < 100))
        },
        pan: function(a) {
            var b = this.xAxis[0]
              , c = this.mouseDownX
              , d = b.pointRange / 2
              , e = b.getExtremes()
              , f = b.translate(c - a, !0) + d
              , c = b.translate(c + this.plotWidth - a, !0) - d;
            (d = this.hoverPoints) && n(d, function(a) {
                a.setState()
            }),
            b.series.length && f > P(e.dataMin, e.min) && c < v(e.dataMax, e.max) && b.setExtremes(f, c, !0, !1, {
                trigger: "pan"
            }),
            this.mouseDownX = a,
            G(this.container, {
                cursor: "move"
            })
        },
        setTitle: function(a, b) {
            var e, c = this, d = c.options;
            c.chartTitleOptions = e = C(d.title, a),
            c.chartSubtitleOptions = d = C(d.subtitle, b),
            n([["title", a, e], ["subtitle", b, d]], function(a) {
                var b = a[0]
                  , d = c[b]
                  , e = a[1]
                  , a = a[2];
                d && e && (c[b] = d = d.destroy()),
                a && a.text && !d && (c[b] = c.renderer.text(a.text, 0, 0, a.useHTML).attr({
                    align: a.align,
                    "class": "highcharts-" + b,
                    zIndex: a.zIndex || 4
                }).css(a.style).add().align(a, !1, c.spacingBox))
            })
        },
        getChartSize: function() {
            var a = this.options.chart
              , b = this.renderToClone || this.renderTo;
            this.containerWidth = db(b, "width"),
            this.containerHeight = db(b, "height"),
            this.chartWidth = a.width || this.containerWidth || 600,
            this.chartHeight = a.height || (this.containerHeight > 19 ? this.containerHeight : 400)
        },
        cloneRenderTo: function(a) {
            var b = this.renderToClone
              , c = this.container;
            a ? b && (this.renderTo.appendChild(c),
            Na(b),
            delete this.renderToClone) : (c && this.renderTo.removeChild(c),
            this.renderToClone = b = this.renderTo.cloneNode(0),
            G(b, {
                position: "absolute",
                top: "-9999px",
                display: "block"
            }),
            z.body.appendChild(b),
            c && b.appendChild(c))
        },
        getContainer: function() {
            var a, c, d, e, b = this.options.chart;
            this.renderTo = a = b.renderTo,
            e = "highcharts-" + ub++,
            ma(a) && (this.renderTo = a = z.getElementById(a)),
            a || $a(13, !0),
            a.innerHTML = "",
            a.offsetWidth || this.cloneRenderTo(),
            this.getChartSize(),
            c = this.chartWidth,
            d = this.chartHeight,
            this.container = a = S(ia, {
                className: "highcharts-container" + (b.className ? " " + b.className : ""),
                id: e
            }, s({
                position: "relative",
                overflow: "hidden",
                width: c + "px",
                height: d + "px",
                textAlign: "left",
                lineHeight: "normal",
                zIndex: 0
            }, b.style), this.renderToClone || a),
            this.renderer = b.forExport ? new ra(a,c,d,!0) : new Ra(a,c,d),
            $ && this.renderer.create(this, a, c, d)
        },
        getMargins: function() {
            var e, a = this.options.chart, b = a.spacingTop, c = a.spacingRight, d = a.spacingBottom, a = a.spacingLeft, f = this.legend, g = this.optionsMarginTop, h = this.optionsMarginLeft, i = this.optionsMarginRight, j = this.optionsMarginBottom, k = this.chartTitleOptions, l = this.chartSubtitleOptions, m = this.options.legend, o = p(m.margin, 10), r = m.x, t = m.y, q = m.align, y = m.verticalAlign;
            this.resetMargins(),
            e = this.axisOffset,
            !this.title && !this.subtitle || u(this.optionsMarginTop) || (l = v(this.title && !k.floating && !k.verticalAlign && k.y || 0, this.subtitle && !l.floating && !l.verticalAlign && l.y || 0)) && (this.plotTop = v(this.plotTop, l + p(k.margin, 15) + b)),
            f.display && !m.floating && ("right" === q ? u(i) || (this.marginRight = v(this.marginRight, f.legendWidth - r + o + c)) : "left" === q ? u(h) || (this.plotLeft = v(this.plotLeft, f.legendWidth + r + o + a)) : "top" === y ? u(g) || (this.plotTop = v(this.plotTop, f.legendHeight + t + o + b)) : "bottom" !== y || u(j) || (this.marginBottom = v(this.marginBottom, f.legendHeight - t + o + d))),
            this.extraBottomMargin && (this.marginBottom += this.extraBottomMargin),
            this.extraTopMargin && (this.plotTop += this.extraTopMargin),
            this.hasCartesianSeries && n(this.axes, function(a) {
                a.getOffset()
            }),
            u(h) || (this.plotLeft += e[3]),
            u(g) || (this.plotTop += e[0]),
            u(j) || (this.marginBottom += e[2]),
            u(i) || (this.marginRight += e[1]),
            this.setChartSize()
        },
        initReflow: function() {
            function a(a) {
                var g = c.width || db(d, "width")
                  , h = c.height || db(d, "height")
                  , a = a ? a.target : L;
                g && h && (a === L || a === z) && (g === b.containerWidth && h === b.containerHeight || (clearTimeout(e),
                e = setTimeout(function() {
                    b.resize(g, h, !1)
                }, 100)),
                b.containerWidth = g,
                b.containerHeight = h)
            }
            var e, b = this, c = b.options.chart, d = b.renderTo;
            H(L, "resize", a),
            H(b, "destroy", function() {
                U(L, "resize", a)
            })
        },
        resize: function(a, b, c) {
            var e, f, j, d = this, g = d.resetZoomButton, h = d.title, i = d.subtitle;
            d.isResizing += 1,
            j = function() {
                d && E(d, "endResize", null, function() {
                    d.isResizing -= 1
                })
            }
            ,
            ua(c, d),
            d.oldChartHeight = d.chartHeight,
            d.oldChartWidth = d.chartWidth,
            u(a) && (d.chartWidth = e = t(a)),
            u(b) && (d.chartHeight = f = t(b)),
            G(d.container, {
                width: e + "px",
                height: f + "px"
            }),
            d.renderer.setSize(e, f, c),
            d.plotWidth = e - d.plotLeft - d.marginRight,
            d.plotHeight = f - d.plotTop - d.marginBottom,
            d.maxTicks = null,
            n(d.axes, function(a) {
                a.isDirty = !0,
                a.setScale()
            }),
            n(d.series, function(a) {
                a.isDirty = !0
            }),
            d.isDirtyLegend = !0,
            d.isDirtyBox = !0,
            d.getMargins(),
            a = d.spacingBox,
            h && h.align(null, null, a),
            i && i.align(null, null, a),
            g && g.align(null, null, d[g.alignTo]),
            d.redraw(c),
            d.oldChartHeight = null,
            E(d, "resize"),
            Oa === !1 ? j() : setTimeout(j, Oa && Oa.duration || 500)
        },
        setChartSize: function() {
            var i, j, k, l, a = this.inverted, b = this.chartWidth, c = this.chartHeight, d = this.options.chart, e = d.spacingTop, f = d.spacingRight, g = d.spacingBottom, h = d.spacingLeft;
            this.plotLeft = i = t(this.plotLeft),
            this.plotTop = j = t(this.plotTop),
            this.plotWidth = k = t(b - i - this.marginRight),
            this.plotHeight = l = t(c - j - this.marginBottom),
            this.plotSizeX = a ? l : k,
            this.plotSizeY = a ? k : l,
            this.plotBorderWidth = a = d.plotBorderWidth || 0,
            this.spacingBox = {
                x: h,
                y: e,
                width: b - h - f,
                height: c - e - g
            },
            this.plotBox = {
                x: i,
                y: j,
                width: k,
                height: l
            },
            this.clipBox = {
                x: a / 2,
                y: a / 2,
                width: this.plotSizeX - a,
                height: this.plotSizeY - a
            },
            n(this.axes, function(a) {
                a.setAxisSize(),
                a.setAxisTranslation()
            })
        },
        resetMargins: function() {
            var a = this.options.chart
              , b = a.spacingRight
              , c = a.spacingBottom
              , d = a.spacingLeft;
            this.plotTop = p(this.optionsMarginTop, a.spacingTop),
            this.marginRight = p(this.optionsMarginRight, b),
            this.marginBottom = p(this.optionsMarginBottom, c),
            this.plotLeft = p(this.optionsMarginLeft, d),
            this.axisOffset = [0, 0, 0, 0]
        },
        drawChartBox: function() {
            var o, a = this.options.chart, b = this.renderer, c = this.chartWidth, d = this.chartHeight, e = this.chartBackground, f = this.plotBackground, g = this.plotBorder, h = this.plotBGImage, i = a.borderWidth || 0, j = a.backgroundColor, k = a.plotBackgroundColor, l = a.plotBackgroundImage, m = a.plotBorderWidth || 0, p = this.plotLeft, n = this.plotTop, q = this.plotWidth, y = this.plotHeight, t = this.plotBox, u = this.clipRect, w = this.clipBox;
            o = i + (a.shadow ? 8 : 0),
            (i || j) && (e ? e.animate(e.crisp(null, null, null, c - o, d - o)) : (e = {
                fill: j || T
            },
            i && (e.stroke = a.borderColor,
            e["stroke-width"] = i),
            this.chartBackground = b.rect(o / 2, o / 2, c - o, d - o, a.borderRadius, i).attr(e).add().shadow(a.shadow))),
            k && (f ? f.animate(t) : this.plotBackground = b.rect(p, n, q, y, 0).attr({
                fill: k
            }).add().shadow(a.plotShadow)),
            l && (h ? h.animate(t) : this.plotBGImage = b.image(l, p, n, q, y).add()),
            u ? u.animate({
                width: w.width,
                height: w.height
            }) : this.clipRect = b.clipRect(w),
            m && (g ? g.animate(g.crisp(null, p, n, q, y)) : this.plotBorder = b.rect(p, n, q, y, 0, m).attr({
                stroke: a.plotBorderColor,
                "stroke-width": m,
                zIndex: 1
            }).add()),
            this.isDirtyBox = !1
        },
        propFromSeries: function() {
            var c, e, f, a = this, b = a.options.chart, d = a.options.series;
            n(["inverted", "angular", "polar"], function(g) {
                for (c = ba[b.type || b.defaultSeriesType],
                f = a[g] || b[g] || c && c.prototype[g],
                e = d && d.length; !f && e--; )
                    (c = ba[d[e].type]) && c.prototype[g] && (f = !0);
                a[g] = f
            })
        },
        render: function() {
            var f, a = this, b = a.axes, c = a.renderer, d = a.options, e = d.labels, d = d.credits;
            a.setTitle(),
            a.legend = new rb(a),
            n(b, function(a) {
                a.setScale()
            }),
            a.getMargins(),
            a.maxTicks = null,
            n(b, function(a) {
                a.setTickPositions(!0),
                a.setMaxTicks()
            }),
            a.adjustTickAmounts(),
            a.getMargins(),
            a.drawChartBox(),
            a.hasCartesianSeries && n(b, function(a) {
                a.render()
            }),
            a.seriesGroup || (a.seriesGroup = c.g("series-group").attr({
                zIndex: 3
            }).add()),
            n(a.series, function(a) {
                a.translate(),
                a.setTooltipPoints(),
                a.render()
            }),
            e.items && n(e.items, function(b) {
                var d = s(e.style, b.style)
                  , f = A(d.left) + a.plotLeft
                  , j = A(d.top) + a.plotTop + 12;
                delete d.left,
                delete d.top,
                c.text(b.html, f, j).attr({
                    zIndex: 2
                }).css(d).add()
            }),
            d.enabled && !a.credits && (f = d.href,
            a.credits = c.text(d.text, 0, 0).on("click", function() {
                f && (location.href = f)
            }).attr({
                align: d.position.align,
                zIndex: 8
            }).css(d.style).add().align(d.position)),
            a.hasRendered = !0
        },
        destroy: function() {
            var e, a = this, b = a.axes, c = a.series, d = a.container, f = d && d.parentNode;
            if (null !== a) {
                for (E(a, "destroy"),
                U(a),
                e = b.length; e--; )
                    b[e] = b[e].destroy();
                for (e = c.length; e--; )
                    c[e] = c[e].destroy();
                n("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,tracker,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","), function(b) {
                    var c = a[b];
                    c && (a[b] = c.destroy())
                }),
                d && (d.innerHTML = "",
                U(d),
                f && Na(d),
                d = null);
                for (e in a)
                    delete a[e];
                a = a.options = null
            }
        },
        firstRender: function() {
            var a = this
              , b = a.options
              , c = a.callback;
            !fa && L == L.top && "complete" !== z.readyState || $ && !L.canvg ? $ ? Mb.push(function() {
                a.firstRender()
            }, b.global.canvasToolsURL) : z.attachEvent("onreadystatechange", function() {
                z.detachEvent("onreadystatechange", a.firstRender),
                "complete" === z.readyState && a.firstRender()
            }) : (a.getContainer(),
            E(a, "init"),
            Highcharts.RangeSelector && b.rangeSelector.enabled && (a.rangeSelector = new Highcharts.RangeSelector(a)),
            a.resetMargins(),
            a.setChartSize(),
            a.propFromSeries(),
            a.getAxes(),
            n(b.series || [], function(b) {
                a.initSeries(b)
            }),
            Highcharts.Scroller && (b.navigator.enabled || b.scrollbar.enabled) && (a.scroller = new Highcharts.Scroller(a)),
            a.tracker = new qb(a,b),
            a.render(),
            a.renderer.draw(),
            c && c.apply(a, [a]),
            n(a.callbacks, function(b) {
                b.apply(a, [a])
            }),
            a.cloneRenderTo(!0),
            E(a, "load"))
        },
        init: function(a) {
            var c, b = this.options.chart;
            if (b.reflow !== !1 && H(this, "load", this.initReflow),
            a)
                for (c in a)
                    H(this, c, a[c]);
            this.xAxis = [],
            this.yAxis = [],
            this.animation = $ ? !1 : p(b.animation, !0),
            this.setSize = this.resize,
            this.pointCount = 0,
            this.counters = new Eb,
            this.firstRender()
        }
    },
    sb.prototype.callbacks = [];
    var Ta = function() {};
    Ta.prototype = {
        init: function(a, b, c) {
            var d = a.chart.counters;
            return this.series = a,
            this.applyOptions(b, c),
            this.pointAttr = {},
            a.options.colorByPoint && (b = a.chart.options.colors,
            this.color = this.color || b[d.color++],
            d.wrapColor(b.length)),
            a.chart.pointCount++,
            this
        },
        applyOptions: function(a, b) {
            var c = this.series
              , d = typeof a;
            this.config = a,
            "number" === d || null === a ? this.y = a : "number" == typeof a[0] ? (this.x = a[0],
            this.y = a[1]) : "object" === d && "number" != typeof a.length ? (s(this, a),
            this.options = a,
            a.dataLabels && (c._hasPointLabels = !0),
            a.marker && (c._hasPointMarkers = !0)) : "string" == typeof a[0] && (this.name = a[0],
            this.y = a[1]),
            this.x === x && (this.x = b === x ? c.autoIncrement() : b)
        },
        destroy: function() {
            var c, a = this.series.chart, b = a.hoverPoints;
            a.pointCount--,
            b && (this.setState(),
            ya(b, this),
            !b.length) && (a.hoverPoints = null),
            this === a.hoverPoint && this.onMouseOut(),
            (this.graphic || this.dataLabel) && (U(this),
            this.destroyElements()),
            this.legendItem && a.legend.destroyItem(this);
            for (c in this)
                this[c] = null
        },
        destroyElements: function() {
            for (var b, a = "graphic,tracker,dataLabel,group,connector,shadowGroup".split(","), c = 6; c--; )
                b = a[c],
                this[b] && (this[b] = this[b].destroy())
        },
        getLabelConfig: function() {
            return {
                x: this.category,
                y: this.y,
                key: this.name || this.category,
                series: this.series,
                point: this,
                percentage: this.percentage,
                total: this.total || this.stackTotal
            }
        },
        select: function(a, b) {
            var c = this
              , d = c.series.chart
              , a = p(a, !c.selected);
            c.firePointEvent(a ? "select" : "unselect", {
                accumulate: b
            }, function() {
                c.selected = a,
                c.setState(a && "select"),
                b || n(d.getSelectedPoints(), function(a) {
                    a.selected && a !== c && (a.selected = !1,
                    a.setState(""),
                    a.firePointEvent("unselect"))
                })
            })
        },
        onMouseOver: function() {
            var a = this.series
              , b = a.chart
              , c = b.tooltip
              , d = b.hoverPoint;
            d && d !== this && d.onMouseOut(),
            this.firePointEvent("mouseOver"),
            c && (!c.shared || a.noSharedTooltip) && c.refresh(this),
            this.setState("hover"),
            b.hoverPoint = this
        },
        onMouseOut: function() {
            var a = this.series.chart
              , b = a.hoverPoints;
            b && -1 !== Rb(this, b) || (this.firePointEvent("mouseOut"),
            this.setState(),
            a.hoverPoint = null)
        },
        tooltipFormatter: function(a) {
            var f, g, h, i, b = this.series, c = b.tooltipOptions, d = a.match(/\{(series|point)\.[a-zA-Z]+\}/g), e = /[{\.}]/, j = {
                y: 0,
                open: 0,
                high: 0,
                low: 0,
                close: 0,
                percentage: 1,
                total: 1
            };
            c.valuePrefix = c.valuePrefix || c.yPrefix,
            c.valueDecimals = c.valueDecimals || c.yDecimals,
            c.valueSuffix = c.valueSuffix || c.ySuffix;
            for (i in d)
                g = d[i],
                ma(g) && g !== a && (h = (" " + g).split(e),
                f = {
                    point: this,
                    series: b
                }[h[1]],
                h = h[2],
                f === this && j.hasOwnProperty(h) ? (f = j[h] ? h : "value",
                f = (c[f + "Prefix"] || "") + Ia(this[h], p(c[f + "Decimals"], -1)) + (c[f + "Suffix"] || "")) : f = f[h],
                a = a.replace(g, f));
            return a
        },
        update: function(a, b, c) {
            var g, d = this, e = d.series, f = d.graphic, h = e.data, i = h.length, j = e.chart, b = p(b, !0);
            d.firePointEvent("update", {
                options: a
            }, function() {
                for (d.applyOptions(a),
                Z(a) && (e.getAttribs(),
                f && f.attr(d.pointAttr[e.state])),
                g = 0; i > g; g++)
                    if (h[g] === d) {
                        e.xData[g] = d.x,
                        e.yData[g] = d.y,
                        e.options.data[g] = a;
                        break
                    }
                e.isDirty = !0,
                e.isDirtyData = !0,
                b && j.redraw(c)
            })
        },
        remove: function(a, b) {
            var f, c = this, d = c.series, e = d.chart, g = d.data, h = g.length;
            ua(b, e),
            a = p(a, !0),
            c.firePointEvent("remove", null, function() {
                for (f = 0; h > f; f++)
                    if (g[f] === c) {
                        g.splice(f, 1),
                        d.options.data.splice(f, 1),
                        d.xData.splice(f, 1),
                        d.yData.splice(f, 1);
                        break
                    }
                c.destroy(),
                d.isDirty = !0,
                d.isDirtyData = !0,
                a && e.redraw()
            })
        },
        firePointEvent: function(a, b, c) {
            var d = this
              , e = this.series.options;
            (e.point.events[a] || d.options && d.options.events && d.options.events[a]) && this.importEvents(),
            "click" === a && e.allowPointSelect && (c = function(a) {
                d.select(null, a.ctrlKey || a.metaKey || a.shiftKey)
            }
            ),
            E(this, a, b, c)
        },
        importEvents: function() {
            if (!this.hasImportedEvents) {
                var b, a = C(this.series.options.point, this.options).events;
                this.events = a;
                for (b in a)
                    H(this, b, a[b]);
                this.hasImportedEvents = !0
            }
        },
        setState: function(a) {
            var b = this.plotX
              , c = this.plotY
              , d = this.series
              , e = d.options.states
              , f = Y[d.type].marker && d.options.marker
              , g = f && !f.enabled
              , h = f && f.states[a]
              , i = h && h.enabled === !1
              , j = d.stateMarkerGraphic
              , k = d.chart
              , l = this.pointAttr
              , a = a || "";
            a === this.state || this.selected && "select" !== a || e[a] && e[a].enabled === !1 || a && (i || g && !h.enabled) || (this.graphic ? (e = f && this.graphic.symbolName && l[a].r,
            this.graphic.attr(C(l[a], e ? {
                x: b - e,
                y: c - e,
                width: 2 * e,
                height: 2 * e
            } : {}))) : (a && h && (e = h.radius,
            j ? j.attr({
                x: b - e,
                y: c - e
            }) : d.stateMarkerGraphic = j = k.renderer.symbol(d.symbol, b - e, c - e, 2 * e, 2 * e).attr(l[a]).add(d.markerGroup)),
            j && j[a && k.isInsidePlot(b, c) ? "show" : "hide"]()),
            this.state = a)
        }
    };
    var R = function() {};
    R.prototype = {
        isCartesian: !0,
        type: "line",
        pointClass: Ta,
        sorted: !0,
        pointAttrToOptions: {
            stroke: "lineColor",
            "stroke-width": "lineWidth",
            fill: "fillColor",
            r: "radius"
        },
        init: function(a, b) {
            var c, d;
            this.chart = a,
            this.options = b = this.setOptions(b),
            this.bindAxes(),
            s(this, {
                name: b.name,
                state: "",
                pointAttr: {},
                visible: b.visible !== !1,
                selected: b.selected === !0
            }),
            $ && (b.animation = !1),
            d = b.events;
            for (c in d)
                H(this, c, d[c]);
            (d && d.click || b.point && b.point.events && b.point.events.click || b.allowPointSelect) && (a.runTrackerClick = !0),
            this.getColor(),
            this.getSymbol(),
            this.setData(b.data, !1),
            this.isCartesian && (a.hasCartesianSeries = !0),
            a.series.push(this),
            Fb(a.series, function(a, b) {
                return (a.options.index || 0) - (b.options.index || 0)
            }),
            n(a.series, function(a, b) {
                a.index = b,
                a.name = a.name || "Series " + (b + 1)
            })
        },
        bindAxes: function() {
            var d, a = this, b = a.options, c = a.chart;
            a.isCartesian && n(["xAxis", "yAxis"], function(e) {
                n(c[e], function(c) {
                    d = c.options,
                    (b[e] === d.index || b[e] === x && 0 === d.index) && (c.series.push(a),
                    a[e] = c,
                    c.isDirty = !0)
                })
            })
        },
        autoIncrement: function() {
            var a = this.options
              , b = this.xIncrement
              , b = p(b, a.pointStart, 0);
            return this.pointInterval = p(this.pointInterval, a.pointInterval, 1),
            this.xIncrement = b + this.pointInterval,
            b
        },
        getSegments: function() {
            var c, a = -1, b = [], d = this.points, e = d.length;
            if (e)
                if (this.options.connectNulls) {
                    for (c = e; c--; )
                        null === d[c].y && d.splice(c, 1);
                    d.length && (b = [d])
                } else
                    n(d, function(c, g) {
                        null === c.y ? (g > a + 1 && b.push(d.slice(a + 1, g)),
                        a = g) : g === e - 1 && b.push(d.slice(a + 1, g + 1))
                    });
            this.segments = b
        },
        setOptions: function(a) {
            var b = this.chart.options
              , c = b.plotOptions
              , d = c[this.type]
              , e = a.data;
            return a.data = null,
            c = C(d, c.series, a),
            c.data = a.data = e,
            this.tooltipOptions = C(b.tooltip, c.tooltip),
            null === d.marker && delete c.marker,
            c
        },
        getColor: function() {
            var a = this.options
              , b = this.chart.options.colors
              , c = this.chart.counters;
            this.color = a.color || !a.colorByPoint && b[c.color++] || "gray",
            c.wrapColor(b.length)
        },
        getSymbol: function() {
            var a = this.options.marker
              , b = this.chart
              , c = b.options.symbols
              , b = b.counters;
            this.symbol = a.symbol || c[b.symbol++],
            /^url/.test(this.symbol) && (a.radius = 0),
            b.wrapSymbol(c.length)
        },
        drawLegendSymbol: function(a) {
            var g, b = this.options, c = b.marker, d = a.options.symbolWidth, e = this.chart.renderer, f = this.legendGroup, a = a.baseline;
            b.lineWidth && (g = {
                "stroke-width": b.lineWidth
            },
            b.dashStyle && (g.dashstyle = b.dashStyle),
            this.legendLine = e.path(["M", 0, a - 4, "L", d, a - 4]).attr(g).add(f)),
            c && c.enabled && (b = c.radius,
            this.legendSymbol = e.symbol(this.symbol, d / 2 - b, a - 4 - b, 2 * b, 2 * b).attr(this.pointAttr[""]).add(f))
        },
        addPoint: function(a, b, c, d) {
            var e = this.data
              , f = this.graph
              , g = this.area
              , h = this.chart
              , i = this.xData
              , j = this.yData
              , k = f && f.shift || 0
              , l = this.options.data
              , m = this.pointClass.prototype;
            ua(d, h),
            f && c && (f.shift = k + 1),
            g && (c && (g.shift = k + 1),
            g.isArea = !0),
            b = p(b, !0),
            d = {
                series: this
            },
            m.applyOptions.apply(d, [a]),
            i.push(d.x),
            j.push(m.toYData ? m.toYData.call(d) : d.y),
            l.push(a),
            c && (e[0] && e[0].remove ? e[0].remove(!1) : (e.shift(),
            i.shift(),
            j.shift(),
            l.shift())),
            this.getAttribs(),
            this.isDirtyData = this.isDirty = !0,
            b && h.redraw()
        },
        setData: function(a, b) {
            var i, c = this.points, d = this.options, e = this.initialColor, f = this.chart, g = null, h = this.xAxis, j = this.pointClass.prototype;
            this.xIncrement = null,
            this.pointRange = h && h.categories ? 1 : d.pointRange,
            u(e) && (f.counters.color = e);
            var e = []
              , k = []
              , l = a ? a.length : []
              , m = (i = this.pointArrayMap) && i.length;
            if (l > (d.turboThreshold || 1e3)) {
                for (i = 0; null === g && l > i; )
                    g = a[i],
                    i++;
                if (Ga(g)) {
                    for (j = p(d.pointStart, 0),
                    d = p(d.pointInterval, 1),
                    i = 0; l > i; i++)
                        e[i] = j,
                        k[i] = a[i],
                        j += d;
                    this.xIncrement = j
                } else if (Fa(g))
                    if (m)
                        for (i = 0; l > i; i++)
                            d = a[i],
                            e[i] = d[0],
                            k[i] = d.slice(1, m + 1);
                    else
                        for (i = 0; l > i; i++)
                            d = a[i],
                            e[i] = d[0],
                            k[i] = d[1]
            } else
                for (i = 0; l > i; i++)
                    d = {
                        series: this
                    },
                    j.applyOptions.apply(d, [a[i]]),
                    e[i] = d.x,
                    k[i] = j.toYData ? j.toYData.call(d) : d.y;
            for (ma(k[0]) && $a(14, !0),
            this.data = [],
            this.options.data = a,
            this.xData = e,
            this.yData = k,
            i = c && c.length || 0; i--; )
                c[i] && c[i].destroy && c[i].destroy();
            h && (h.minRange = h.userMinRange),
            this.isDirty = this.isDirtyData = f.isDirtyBox = !0,
            p(b, !0) && f.redraw(!1)
        },
        remove: function(a, b) {
            var c = this
              , d = c.chart
              , a = p(a, !0);
            c.isRemoving || (c.isRemoving = !0,
            E(c, "remove", null, function() {
                c.destroy(),
                d.isDirtyLegend = d.isDirtyBox = !0,
                a && d.redraw(b)
            })),
            c.isRemoving = !1
        },
        processData: function(a) {
            var g, h, b = this.xData, c = this.yData, d = b.length, e = 0, f = d, i = this.xAxis, j = this.options, k = j.cropThreshold, l = this.isCartesian;
            if (l && !this.isDirty && !i.isDirty && !this.yAxis.isDirty && !a)
                return !1;
            if (l && this.sorted && (!k || d > k || this.forceCrop))
                if (a = i.getExtremes(),
                i = a.min,
                k = a.max,
                b[d - 1] < i || b[0] > k)
                    b = [],
                    c = [];
                else if (b[0] < i || b[d - 1] > k) {
                    for (a = 0; d > a; a++)
                        if (b[a] >= i) {
                            e = v(0, a - 1);
                            break
                        }
                    for (; d > a; a++)
                        if (b[a] > k) {
                            f = a + 1;
                            break
                        }
                    b = b.slice(e, f),
                    c = c.slice(e, f),
                    g = !0
                }
            for (a = b.length - 1; a > 0; a--)
                d = b[a] - b[a - 1],
                d > 0 && (h === x || h > d) && (h = d);
            this.cropped = g,
            this.cropStart = e,
            this.processedXData = b,
            this.processedYData = c,
            null === j.pointRange && (this.pointRange = h || 1),
            this.closestPointRange = h
        },
        generatePoints: function() {
            var c, i, k, m, a = this.options.data, b = this.data, d = this.processedXData, e = this.processedYData, f = this.pointClass, g = d.length, h = this.cropStart || 0, j = this.hasGroupedData, l = [];
            for (b || j || (b = [],
            b.length = a.length,
            b = this.data = b),
            m = 0; g > m; m++)
                i = h + m,
                j ? l[m] = (new f).init(this, [d[m]].concat(oa(e[m]))) : (b[i] ? k = b[i] : a[i] !== x && (b[i] = k = (new f).init(this, a[i], d[m])),
                l[m] = k);
            if (b && (g !== (c = b.length) || j))
                for (m = 0; c > m; m++)
                    m === h && !j && (m += g),
                    b[m] && (b[m].destroyElements(),
                    b[m].plotX = x);
            this.data = b,
            this.points = l
        },
        translate: function() {
            this.processedXData || this.processData(),
            this.generatePoints();
            for (var j, a = this.chart, b = this.options, c = b.stacking, d = this.xAxis, e = d.categories, f = this.yAxis, g = this.points, h = g.length, i = !!this.modifyValue, k = f.series, l = k.length, m = "between" === b.pointPlacement; l--; )
                if (k[l].visible) {
                    k[l] === this && (j = !0);
                    break
                }
            for (l = 0; h > l; l++) {
                var k = g[l]
                  , o = k.x
                  , n = k.y
                  , s = k.low
                  , q = f.stacks[(n < b.threshold ? "-" : "") + this.stackKey];
                k.plotX = d.translate(o, 0, 0, 0, 1, m),
                c && this.visible && q && q[o] && (s = q[o],
                o = s.total,
                s.cum = s = s.cum - n,
                n = s + n,
                j && (s = p(b.threshold, f.isLog ? null : f.min)),
                "percent" === c && (s = o ? 100 * s / o : 0,
                n = o ? 100 * n / o : 0),
                k.percentage = o ? 100 * k.y / o : 0,
                k.total = k.stackTotal = o,
                k.stackY = n),
                k.yBottom = u(s) ? f.translate(s, 0, 1, 0, 1) : null,
                i && (n = this.modifyValue(n, k)),
                k.plotY = "number" == typeof n ? t(10 * f.translate(n, 0, 1, 0, 1)) / 10 : x,
                k.clientX = a.inverted ? a.plotHeight - k.plotX : k.plotX,
                k.category = e && e[k.x] !== x ? e[k.x] : k.x
            }
            this.getSegments()
        },
        setTooltipPoints: function(a) {
            var c, d, g, h, b = [], e = (c = this.xAxis) ? c.tooltipLen || c.len : this.chart.plotSizeX, f = c && c.tooltipPosName || "plotX", i = [];
            if (this.options.enableMouseTracking !== !1) {
                for (a && (this.tooltipPoints = null),
                n(this.segments || this.points, function(a) {
                    b = b.concat(a)
                }),
                c && c.reversed && (b = b.reverse()),
                a = b.length,
                h = 0; a > h; h++)
                    for (g = b[h],
                    c = b[h - 1] ? d + 1 : 0,
                    d = b[h + 1] ? v(0, V((g[f] + (b[h + 1] ? b[h + 1][f] : e)) / 2)) : e; c >= 0 && d >= c; )
                        i[c++] = g;
                this.tooltipPoints = i
            }
        },
        tooltipHeaderFormatter: function(a) {
            var f, b = this.tooltipOptions, c = b.xDateFormat, d = this.xAxis, e = d && "datetime" === d.options.type;
            if (e && !c)
                for (f in D)
                    if (D[f] >= d.closestPointRange) {
                        c = b.dateTimeLabelFormats[f];
                        break
                    }
            return b.headerFormat.replace("{point.key}", e ? cb(c, a) : a).replace("{series.name}", this.name).replace("{series.color}", this.color)
        },
        onMouseOver: function() {
            var a = this.chart
              , b = a.hoverSeries;
            b && b !== this && b.onMouseOut(),
            this.options.events.mouseOver && E(this, "mouseOver"),
            this.setState("hover"),
            a.hoverSeries = this
        },
        onMouseOut: function() {
            var a = this.options
              , b = this.chart
              , c = b.tooltip
              , d = b.hoverPoint;
            d && d.onMouseOut(),
            this && a.events.mouseOut && E(this, "mouseOut"),
            c && !a.stickyTracking && !c.shared && c.hide(),
            this.setState(),
            b.hoverSeries = null
        },
        animate: function(a) {
            var e, b = this, c = b.chart, d = c.renderer;
            e = b.options.animation;
            var h, f = c.clipBox, g = c.inverted;
            e && !Z(e) && (e = Y[b.type].animation),
            h = "_sharedClip" + e.duration + e.easing,
            a ? (a = c[h],
            e = c[h + "m"],
            a || (c[h] = a = d.clipRect(s(f, {
                width: 0
            })),
            c[h + "m"] = e = d.clipRect(-99, g ? -c.plotLeft : -c.plotTop, 99, g ? c.chartWidth : c.chartHeight)),
            b.group.clip(a),
            b.markerGroup.clip(e),
            b.sharedClipKey = h) : ((a = c[h]) && (a.animate({
                width: c.plotSizeX
            }, e),
            c[h + "m"].animate({
                width: c.plotSizeX + 99
            }, e)),
            b.animate = null,
            b.animationTimeout = setTimeout(function() {
                b.afterAnimate()
            }, e.duration))
        },
        afterAnimate: function() {
            var a = this.chart
              , b = this.sharedClipKey
              , c = this.group;
            c && this.options.clip !== !1 && (c.clip(a.clipRect),
            this.markerGroup.clip()),
            setTimeout(function() {
                b && a[b] && (a[b] = a[b].destroy(),
                a[b + "m"] = a[b + "m"].destroy())
            }, 100)
        },
        drawPoints: function() {
            var a, d, e, f, g, h, i, j, k, m, b = this.points, c = this.chart, l = this.options.marker, o = this.markerGroup;
            if (l.enabled || this._hasPointMarkers)
                for (f = b.length; f--; )
                    g = b[f],
                    d = g.plotX,
                    e = g.plotY,
                    k = g.graphic,
                    i = g.marker || {},
                    a = l.enabled && i.enabled === x || i.enabled,
                    m = c.isInsidePlot(d, e, c.inverted),
                    a && e !== x && !isNaN(e) && (a = g.pointAttr[g.selected ? "select" : ""],
                    h = a.r,
                    i = p(i.symbol, this.symbol),
                    j = 0 === i.indexOf("url"),
                    k ? k.attr({
                        visibility: m ? fa ? "inherit" : "visible" : "hidden"
                    }).animate(s({
                        x: d - h,
                        y: e - h
                    }, k.symbolName ? {
                        width: 2 * h,
                        height: 2 * h
                    } : {})) : m && (h > 0 || j) && (g.graphic = c.renderer.symbol(i, d - h, e - h, 2 * h, 2 * h).attr(a).add(o)))
        },
        convertAttribs: function(a, b, c, d) {
            var f, g, e = this.pointAttrToOptions, h = {}, a = a || {}, b = b || {}, c = c || {}, d = d || {};
            for (f in e)
                g = e[f],
                h[f] = p(a[g], b[f], c[f], d[f]);
            return h
        },
        getAttribs: function() {
            var e, j, l, a = this, b = Y[a.type].marker ? a.options.marker : a.options, c = b.states, d = c.hover, f = a.color, g = {
                stroke: f,
                fill: f
            }, h = a.points || [], i = [], k = a.pointAttrToOptions;
            for (a.options.marker ? (d.radius = d.radius || b.radius + 2,
            d.lineWidth = d.lineWidth || b.lineWidth + 1) : d.color = d.color || qa(d.color || f).brighten(d.brightness).get(),
            i[""] = a.convertAttribs(b, g),
            n(["hover", "select"], function(b) {
                i[b] = a.convertAttribs(c[b], i[""])
            }),
            a.pointAttr = i,
            f = h.length; f--; ) {
                if (g = h[f],
                (b = g.options && g.options.marker || g.options) && b.enabled === !1 && (b.radius = 0),
                e = a.options.colorByPoint,
                g.options)
                    for (l in k)
                        u(b[k[l]]) && (e = !0);
                e ? (b = b || {},
                j = [],
                c = b.states || {},
                e = c.hover = c.hover || {},
                a.options.marker || (e.color = qa(e.color || g.color).brighten(e.brightness || d.brightness).get()),
                j[""] = a.convertAttribs(s({
                    color: g.color
                }, b), i[""]),
                j.hover = a.convertAttribs(c.hover, i.hover, j[""]),
                j.select = a.convertAttribs(c.select, i.select, j[""])) : j = i,
                g.pointAttr = j
            }
        },
        destroy: function() {
            var d, e, g, h, i, a = this, b = a.chart, c = /AppleWebKit\/533/.test(Ba), f = a.data || [];
            for (E(a, "destroy"),
            U(a),
            n(["xAxis", "yAxis"], function(b) {
                (i = a[b]) && (ya(i.series, a),
                i.isDirty = !0)
            }),
            a.legendItem && a.chart.legend.destroyItem(a),
            e = f.length; e--; )
                (g = f[e]) && g.destroy && g.destroy();
            a.points = null,
            clearTimeout(a.animationTimeout),
            n("area,graph,dataLabelsGroup,group,markerGroup,tracker,trackerGroup".split(","), function(b) {
                a[b] && (d = c && "group" === b ? "hide" : "destroy",
                a[b][d]())
            }),
            b.hoverSeries === a && (b.hoverSeries = null),
            ya(b.series, a);
            for (h in a)
                delete a[h]
        },
        drawDataLabels: function() {
            var a = this
              , b = a.options
              , c = b.dataLabels;
            if (c.enabled || a._hasPointLabels) {
                var d, e, g, h, i, j, f = a.points, k = a.chart, l = k.renderer, m = k.inverted, o = a.type, r = b.stacking, s = "column" === o || "bar" === o, q = null === c.verticalAlign, y = null === c.y, v = l.fontMetrics(c.style.fontSize), A = v.h, w = v.b;
                s && (v = {
                    top: w,
                    middle: w - A / 2,
                    bottom: -A + w
                },
                r ? (q && (c = C(c, {
                    verticalAlign: "middle"
                })),
                y && (c = C(c, {
                    y: v[c.verticalAlign]
                }))) : q ? c = C(c, {
                    verticalAlign: "top"
                }) : y && (c = C(c, {
                    y: v[c.verticalAlign]
                }))),
                j = a.plotGroup("dataLabelsGroup", "data-labels", a.visible ? "visible" : "hidden", 6),
                h = c,
                n(f, function(f) {
                    var n, q, y, v, B = f.dataLabel;
                    if (c = h,
                    (g = f.options) && g.dataLabels && (c = C(c, g.dataLabels)),
                    (v = c.enabled) && (n = f.barX && f.barX + f.barW / 2 || p(f.plotX, -999),
                    q = p(f.plotY, -999),
                    y = null === c.y ? f.y >= b.threshold ? -A + w : w : c.y,
                    d = (m ? k.plotWidth - q : n) + c.x,
                    e = t((m ? k.plotHeight - n : q) + y)),
                    a.isCartesian && !k.isInsidePlot(d - c.x, e) && (v = !1),
                    B && !v)
                        f.dataLabel = B.destroy();
                    else if (v) {
                        n = c.align;
                        var z;
                        if (i = c.formatter.call(f.getLabelConfig(), c),
                        "column" === o && (d += {
                            left: -1,
                            right: 1
                        }[n] * f.barW / 2 || 0),
                        !r && m && f.y < 0 && (n = "right",
                        d -= 10),
                        c.style.color = p(c.color, c.style.color, a.color, "black"),
                        B)
                            B.attr({
                                text: i
                            }).animate({
                                x: d,
                                y: e
                            });
                        else if (u(i)) {
                            B = {
                                align: n,
                                fill: c.backgroundColor,
                                stroke: c.borderColor,
                                "stroke-width": c.borderWidth,
                                r: c.borderRadius || 0,
                                rotation: c.rotation,
                                padding: c.padding,
                                zIndex: 1
                            };
                            for (z in B)
                                B[z] === x && delete B[z];
                            B = f.dataLabel = l[c.rotation ? "text" : "label"](i, d, e, null, null, null, c.useHTML, !0).attr(B).css(c.style).add(j).shadow(c.shadow)
                        }
                        s && b.stacking && B && (z = f.barX,
                        n = f.barY,
                        q = f.barW,
                        f = f.barH,
                        B.align(c, null, {
                            x: m ? k.plotWidth - n - f : z,
                            y: m ? k.plotHeight - z - q : n,
                            width: m ? f : q,
                            height: m ? q : f
                        }))
                    }
                })
            }
        },
        getSegmentPath: function(a) {
            var b = this
              , c = [];
            return n(a, function(d, e) {
                b.getPointSpline ? c.push.apply(c, b.getPointSpline(a, d, e)) : (c.push(e ? "L" : "M"),
                e && b.options.step && c.push(d.plotX, a[e - 1].plotY),
                c.push(d.plotX, d.plotY))
            }),
            c
        },
        getGraphPath: function() {
            var c, a = this, b = [], d = [];
            return n(a.segments, function(e) {
                c = a.getSegmentPath(e),
                e.length > 1 ? b = b.concat(c) : d.push(e[0])
            }),
            a.singlePoints = d,
            a.graphPath = b
        },
        drawGraph: function() {
            var a = this.options
              , b = this.graph
              , c = this.group
              , d = a.lineColor || this.color
              , e = a.lineWidth
              , f = a.dashStyle
              , g = this.getGraphPath();
            b ? (eb(b),
            b.animate({
                d: g
            })) : e && (b = {
                stroke: d,
                "stroke-width": e,
                zIndex: 1
            },
            f && (b.dashstyle = f),
            this.graph = this.chart.renderer.path(g).attr(b).add(c).shadow(a.shadow))
        },
        invertGroups: function() {
            function a() {
                var a = {
                    width: b.yAxis.len,
                    height: b.xAxis.len
                };
                n(["group", "trackerGroup", "markerGroup"], function(c) {
                    b[c] && b[c].attr(a).invert()
                })
            }
            var b = this
              , c = b.chart;
            H(c, "resize", a),
            H(b, "destroy", function() {
                U(c, "resize", a)
            }),
            a(),
            b.invertGroups = a
        },
        plotGroup: function(a, b, c, d, e) {
            var f = this[a]
              , g = this.chart
              , h = this.xAxis
              , i = this.yAxis;
            return f || (this[a] = f = g.renderer.g(b).attr({
                visibility: c,
                zIndex: d || .1
            }).add(e)),
            f.translate(h ? h.left : g.plotLeft, i ? i.top : g.plotTop),
            f
        },
        render: function() {
            var b, a = this.chart, c = this.options, d = c.animation && !!this.animate, e = this.visible ? "visible" : "hidden", f = c.zIndex, g = this.hasRendered, h = a.seriesGroup;
            b = this.plotGroup("group", "series", e, f, h),
            this.markerGroup = this.plotGroup("markerGroup", "markers", e, f, h),
            this.drawDataLabels(),
            d && this.animate(!0),
            this.getAttribs(),
            b.inverted = a.inverted,
            this.drawGraph && this.drawGraph(),
            this.drawPoints(),
            this.options.enableMouseTracking !== !1 && this.drawTracker(),
            a.inverted && this.invertGroups(),
            c.clip !== !1 && !this.sharedClipKey && !g && (b.clip(a.clipRect),
            this.trackerGroup && this.trackerGroup.clip(a.clipRect)),
            d ? this.animate() : g || this.afterAnimate(),
            this.isDirty = this.isDirtyData = !1,
            this.hasRendered = !0
        },
        redraw: function() {
            var a = this.chart
              , b = this.isDirtyData
              , c = this.group;
            c && (a.inverted && c.attr({
                width: a.plotWidth,
                height: a.plotHeight
            }),
            c.animate({
                translateX: this.xAxis.left,
                translateY: this.yAxis.top
            })),
            this.translate(),
            this.setTooltipPoints(!0),
            this.render(),
            b && E(this, "updatedData")
        },
        setState: function(a) {
            var b = this.options
              , c = this.graph
              , d = b.states
              , b = b.lineWidth
              , a = a || "";
            this.state !== a && (this.state = a,
            d[a] && d[a].enabled === !1 || (a && (b = d[a].lineWidth || b + 1),
            c && !c.dashstyle && c.attr({
                "stroke-width": b
            }, a ? 0 : 500)))
        },
        setVisible: function(a, b) {
            var i, c = this.chart, d = this.legendItem, e = this.group, f = this.tracker, g = this.dataLabelsGroup, h = this.markerGroup, j = this.points, k = c.options.chart.ignoreHiddenSeries;
            if (i = this.visible,
            i = (this.visible = a = a === x ? !i : a) ? "show" : "hide",
            e && e[i](),
            h && h[i](),
            f)
                f[i]();
            else if (j)
                for (e = j.length; e--; )
                    f = j[e],
                    f.tracker && f.tracker[i]();
            g && g[i](),
            d && c.legend.colorizeItem(this, a),
            this.isDirty = !0,
            this.options.stacking && n(c.series, function(a) {
                a.options.stacking && a.visible && (a.isDirty = !0)
            }),
            k && (c.isDirtyBox = !0),
            b !== !1 && c.redraw(),
            E(this, i)
        },
        show: function() {
            this.setVisible(!0)
        },
        hide: function() {
            this.setVisible(!1)
        },
        select: function(a) {
            this.selected = a = a === x ? !this.selected : a,
            this.checkbox && (this.checkbox.checked = a),
            E(this, a ? "select" : "unselect")
        },
        drawTracker: function() {
            var m, a = this, b = a.options, c = b.trackByArea, d = [].concat(c ? a.areaPath : a.graphPath), e = d.length, f = a.chart, g = f.renderer, h = f.options.tooltip.snap, i = a.tracker, j = b.cursor, j = j && {
                cursor: j
            }, k = a.singlePoints, l = this.isCartesian && this.plotGroup("trackerGroup", null, "visible", b.zIndex || 1, f.trackerGroup);
            if (e && !c)
                for (m = e + 1; m--; )
                    "M" === d[m] && d.splice(m + 1, 0, d[m + 1] - h, d[m + 2], "L"),
                    (m && "M" === d[m] || m === e) && d.splice(m, 0, "L", d[m - 2] + h, d[m - 1]);
            for (m = 0; m < k.length; m++)
                e = k[m],
                d.push("M", e.plotX - h, e.plotY, "L", e.plotX + h, e.plotY);
            i ? i.attr({
                d: d
            }) : a.tracker = g.path(d).attr({
                isTracker: !0,
                "stroke-linejoin": "bevel",
                visibility: a.visible ? "visible" : "hidden",
                stroke: wb,
                fill: c ? wb : T,
                "stroke-width": b.lineWidth + (c ? 0 : 2 * h)
            }).on(ga ? "touchstart" : "mouseover", function() {
                f.hoverSeries !== a && a.onMouseOver()
            }).on("mouseout", function() {
                b.stickyTracking || a.onMouseOut()
            }).css(j).add(l)
        }
    },
    F = da(R),
    ba.line = F,
    Y.area = C(X, {
        threshold: 0
    }),
    F = da(R, {
        type: "area",
        getSegmentPath: function(a) {
            var d, b = R.prototype.getSegmentPath.call(this, a), c = [].concat(b), e = this.options;
            if (3 === b.length && c.push("L", b[1], b[2]),
            e.stacking && !this.closedStacks)
                for (d = a.length - 1; d >= 0; d--)
                    d < a.length - 1 && e.step && c.push(a[d + 1].plotX, a[d].yBottom),
                    c.push(a[d].plotX, a[d].yBottom);
            else
                this.closeSegment(c, a);
            return this.areaPath = this.areaPath.concat(c),
            b
        },
        closeSegment: function(a, b) {
            var c = this.yAxis.getThreshold(this.options.threshold);
            a.push("L", b[b.length - 1].plotX, c, "L", b[0].plotX, c)
        },
        drawGraph: function() {
            this.areaPath = [],
            R.prototype.drawGraph.apply(this);
            var a = this.areaPath
              , b = this.options
              , c = this.area;
            c ? c.animate({
                d: a
            }) : this.area = this.chart.renderer.path(a).attr({
                fill: p(b.fillColor, qa(this.color).setOpacity(b.fillOpacity || .75).get()),
                zIndex: 0
            }).add(this.group)
        },
        drawLegendSymbol: function(a, b) {
            b.legendSymbol = this.chart.renderer.rect(0, a.baseline - 11, a.options.symbolWidth, 12, 2).attr({
                zIndex: 3
            }).add(b.legendGroup)
        }
    }),
    ba.area = F,
    Y.spline = C(X),
    ha = da(R, {
        type: "spline",
        getPointSpline: function(a, b, c) {
            var h, i, j, k, d = b.plotX, e = b.plotY, f = a[c - 1], g = a[c + 1];
            if (f && g) {
                a = f.plotY,
                j = g.plotX;
                var l, g = g.plotY;
                h = (1.5 * d + f.plotX) / 2.5,
                i = (1.5 * e + a) / 2.5,
                j = (1.5 * d + j) / 2.5,
                k = (1.5 * e + g) / 2.5,
                l = (k - i) * (j - d) / (j - h) + e - k,
                i += l,
                k += l,
                i > a && i > e ? (i = v(a, e),
                k = 2 * e - i) : a > i && e > i && (i = P(a, e),
                k = 2 * e - i),
                k > g && k > e ? (k = v(g, e),
                i = 2 * e - k) : g > k && e > k && (k = P(g, e),
                i = 2 * e - k),
                b.rightContX = j,
                b.rightContY = k
            }
            return c ? (b = ["C", f.rightContX || f.plotX, f.rightContY || f.plotY, h || d, i || e, d, e],
            f.rightContX = f.rightContY = null) : b = ["M", d, e],
            b
        }
    }),
    ba.spline = ha,
    Y.areaspline = C(Y.area);
    var yb = F.prototype
      , ha = da(ha, {
        type: "areaspline",
        closedStacks: !0,
        getSegmentPath: yb.getSegmentPath,
        closeSegment: yb.closeSegment,
        drawGraph: yb.drawGraph
    });
    ba.areaspline = ha,
    Y.column = C(X, {
        borderColor: "#FFFFFF",
        borderWidth: 1,
        borderRadius: 0,
        groupPadding: .2,
        marker: null,
        pointPadding: .1,
        minPointLength: 0,
        cropThreshold: 50,
        pointRange: null,
        states: {
            hover: {
                brightness: .1,
                shadow: !1
            },
            select: {
                color: "#C0C0C0",
                borderColor: "#000000",
                shadow: !1
            }
        },
        dataLabels: {
            y: null,
            verticalAlign: null
        },
        threshold: 0
    }),
    Ca = da(R, {
        type: "column",
        tooltipOutsidePlot: !0,
        pointAttrToOptions: {
            stroke: "borderColor",
            "stroke-width": "borderWidth",
            fill: "color",
            r: "borderRadius"
        },
        init: function() {
            R.prototype.init.apply(this, arguments);
            var a = this
              , b = a.chart;
            b.hasRendered && n(b.series, function(b) {
                b.type === a.type && (b.isDirty = !0)
            })
        },
        translate: function() {
            var j, k, a = this, b = a.chart, c = a.options, d = c.stacking, e = c.borderWidth, f = 0, g = a.xAxis, h = g.reversed, i = {};
            R.prototype.translate.apply(a),
            c.grouping === !1 ? f = 1 : n(b.series, function(b) {
                var c = b.options;
                b.type === a.type && b.visible && a.options.group === c.group && (c.stacking ? (j = b.stackKey,
                i[j] === x && (i[j] = f++),
                k = i[j]) : c.grouping !== !1 && (k = f++),
                b.columnIndex = k)
            });
            var l = a.points
              , g = N(g.transA) * (g.ordinalSlope || c.pointRange || g.closestPointRange || 1)
              , m = g * c.groupPadding
              , o = (g - 2 * m) / f
              , r = c.pointWidth
              , t = u(r) ? (o - r) / 2 : o * c.pointPadding
              , q = p(r, o - 2 * t)
              , y = wa(v(q, 1 + 2 * e))
              , B = t + (m + ((h ? f - a.columnIndex : a.columnIndex) || 0) * o - g / 2) * (h ? -1 : 1)
              , A = a.yAxis.getThreshold(c.threshold)
              , w = p(c.minPointLength, 5);
            n(l, function(c) {
                var f = c.plotY
                  , g = p(c.yBottom, A)
                  , h = c.plotX + B
                  , i = wa(P(f, g))
                  , j = wa(v(f, g) - i)
                  , k = a.yAxis.stacks[(c.y < 0 ? "-" : "") + a.stackKey];
                d && a.visible && k && k[c.x] && k[c.x].setOffset(B, y),
                N(j) < w && w && (j = w,
                i = N(i - A) > w ? g - w : A - (A >= f ? w : 0)),
                s(c, {
                    barX: h,
                    barY: i,
                    barW: y,
                    barH: j,
                    pointWidth: q
                }),
                c.shapeType = "rect",
                c.shapeArgs = f = b.renderer.Element.prototype.crisp.call(0, e, h, i, y, j),
                e % 2 && (f.y -= 1,
                f.height += 1),
                c.trackerArgs = N(j) < 3 && C(c.shapeArgs, {
                    height: 6,
                    y: i - 3
                })
            })
        },
        getSymbol: Ca,
        drawLegendSymbol: F.prototype.drawLegendSymbol,
        drawGraph: Ca,
        drawPoints: function() {
            var d, e, a = this, b = a.options, c = a.chart.renderer;
            n(a.points, function(f) {
                var g = f.plotY;
                g === x || isNaN(g) || null === f.y || (d = f.graphic,
                e = f.shapeArgs,
                d ? (eb(d),
                d.animate(C(e))) : f.graphic = d = c[f.shapeType](e).attr(f.pointAttr[f.selected ? "select" : ""]).add(a.group).shadow(b.shadow, null, b.stacking && !b.borderRadius))
            })
        },
        drawTracker: function() {
            var d, e, k, l, m, a = this, b = a.chart, c = b.renderer, f = +new Date, g = a.options, h = g.cursor, i = h && {
                cursor: h
            }, j = a.isCartesian && a.plotGroup("trackerGroup", null, "visible", g.zIndex || 1, b.trackerGroup);
            n(a.points, function(h) {
                e = h.tracker,
                d = h.trackerArgs || h.shapeArgs,
                l = h.plotY,
                m = !a.isCartesian || l !== x && !isNaN(l),
                delete d.strokeWidth,
                null !== h.y && m && (e ? e.attr(d) : h.tracker = c[h.shapeType](d).attr({
                    isTracker: f,
                    fill: wb,
                    visibility: a.visible ? "visible" : "hidden"
                }).on(ga ? "touchstart" : "mouseover", function(c) {
                    k = c.relatedTarget || c.fromElement,
                    b.hoverSeries !== a && B(k, "isTracker") !== f && a.onMouseOver(),
                    h.onMouseOver()
                }).on("mouseout", function(b) {
                    g.stickyTracking || (k = b.relatedTarget || b.toElement,
                    B(k, "isTracker") === f) || a.onMouseOut()
                }).css(i).add(h.group || j))
            })
        },
        animate: function(a) {
            var b = this
              , c = b.points
              , d = b.options;
            a || (n(c, function(a) {
                var c = a.graphic
                  , a = a.shapeArgs
                  , g = b.yAxis
                  , h = d.threshold;
                c && (c.attr({
                    height: 0,
                    y: u(h) ? g.getThreshold(h) : g.translate(g.getExtremes().min, 0, 1, 0, 1)
                }),
                c.animate({
                    height: a.height,
                    y: a.y
                }, d.animation))
            }),
            b.animate = null)
        },
        remove: function() {
            var a = this
              , b = a.chart;
            b.hasRendered && n(b.series, function(b) {
                b.type === a.type && (b.isDirty = !0)
            }),
            R.prototype.remove.apply(a, arguments)
        }
    }),
    ba.column = Ca,
    Y.bar = C(Y.column, {
        dataLabels: {
            align: "left",
            x: 5,
            y: null,
            verticalAlign: "middle"
        }
    }),
    ha = da(Ca, {
        type: "bar",
        inverted: !0
    }),
    ba.bar = ha,
    Y.scatter = C(X, {
        lineWidth: 0,
        states: {
            hover: {
                lineWidth: 0
            }
        },
        tooltip: {
            headerFormat: '<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',
            pointFormat: "x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"
        }
    }),
    ha = da(R, {
        type: "scatter",
        sorted: !1,
        translate: function() {
            var a = this;
            R.prototype.translate.apply(a),
            n(a.points, function(b) {
                b.shapeType = "circle",
                b.shapeArgs = {
                    x: b.plotX,
                    y: b.plotY,
                    r: a.chart.options.tooltip.snap
                }
            })
        },
        drawTracker: function() {
            for (var e, a = this, b = a.options.cursor, b = b && {
                cursor: b
            }, c = a.points, d = c.length; d--; )
                (e = c[d].graphic) && (e.element._i = d);
            a._hasTracking ? a._hasTracking = !0 : a.markerGroup.attr({
                isTracker: !0
            }).on(ga ? "touchstart" : "mouseover", function(b) {
                a.onMouseOver(),
                b.target._i !== x && c[b.target._i].onMouseOver()
            }).on("mouseout", function() {
                a.options.stickyTracking || a.onMouseOut()
            }).css(b)
        }
    }),
    ba.scatter = ha,
    Y.pie = C(X, {
        borderColor: "#FFFFFF",
        borderWidth: 1,
        center: ["50%", "50%"],
        colorByPoint: !0,
        dataLabels: {
            distance: 30,
            enabled: !0,
            formatter: function() {
                return this.point.name
            },
            y: 5
        },
        legendType: "point",
        marker: null,
        size: "75%",
        showInLegend: !1,
        slicedOffset: 10,
        states: {
            hover: {
                brightness: .1,
                shadow: !1
            }
        }
    }),
    X = {
        type: "pie",
        isCartesian: !1,
        pointClass: da(Ta, {
            init: function() {
                Ta.prototype.init.apply(this, arguments);
                var b, a = this;
                return s(a, {
                    visible: a.visible !== !1,
                    name: p(a.name, "Slice")
                }),
                b = function() {
                    a.slice()
                }
                ,
                H(a, "select", b),
                H(a, "unselect", b),
                a
            },
            setVisible: function(a) {
                var h, b = this.series, c = b.chart, d = this.tracker, e = this.dataLabel, f = this.connector, g = this.shadowGroup;
                h = (this.visible = a = a === x ? !this.visible : a) ? "show" : "hide",
                this.group[h](),
                d && d[h](),
                e && e[h](),
                f && f[h](),
                g && g[h](),
                this.legendItem && c.legend.colorizeItem(this, a),
                !b.isDirty && b.options.ignoreHiddenPoint && (b.isDirty = !0,
                c.redraw())
            },
            slice: function(a, b, c) {
                var d = this.series.chart
                  , e = this.slicedTranslation;
                ua(c, d),
                p(b, !0),
                a = this.sliced = u(a) ? a : !this.sliced,
                a = {
                    translateX: a ? e[0] : d.plotLeft,
                    translateY: a ? e[1] : d.plotTop
                },
                this.group.animate(a),
                this.shadowGroup && this.shadowGroup.animate(a)
            }
        }),
        pointAttrToOptions: {
            stroke: "borderColor",
            "stroke-width": "borderWidth",
            fill: "color"
        },
        getColor: function() {
            this.initialColor = this.chart.counters.color
        },
        animate: function() {
            var a = this;
            n(a.points, function(b) {
                var c = b.graphic
                  , b = b.shapeArgs
                  , d = -xa / 2;
                c && (c.attr({
                    r: 0,
                    start: d,
                    end: d
                }),
                c.animate({
                    r: b.r,
                    start: b.start,
                    end: b.end
                }, a.options.animation))
            }),
            a.animate = null
        },
        setData: function(a, b) {
            R.prototype.setData.call(this, a, !1),
            this.processData(),
            this.generatePoints(),
            p(b, !0) && this.chart.redraw()
        },
        getCenter: function() {
            var f, a = this.options, b = this.chart, c = b.plotWidth, d = b.plotHeight, a = a.center.concat([a.size, a.innerSize || 0]), e = P(c, d);
            return Sa(a, function(a, b) {
                return (f = /%$/.test(a)) ? [c, d, e, e][b] * A(a) / 100 : a
            })
        },
        translate: function() {
            this.generatePoints();
            var f, h, i, j, m, o, p, a = 0, b = -.25, c = this.options, d = c.slicedOffset, e = d + c.borderWidth, g = this.chart, k = this.points, l = 2 * xa, s = c.dataLabels.distance, q = c.ignoreHiddenPoint;
            this.center = f = this.getCenter(),
            this.getX = function(a, b) {
                return j = K.asin((a - f[1]) / (f[2] / 2 + s)),
                f[0] + (b ? -1 : 1) * W(j) * (f[2] / 2 + s)
            }
            ,
            n(k, function(b) {
                a += q && !b.visible ? 0 : b.y
            }),
            n(k, function(c) {
                m = a ? c.y / a : 0,
                h = t(b * l * 1e3) / 1e3,
                q && !c.visible || (b += m),
                i = t(b * l * 1e3) / 1e3,
                c.shapeType = "arc",
                c.shapeArgs = {
                    x: f[0],
                    y: f[1],
                    r: f[2] / 2,
                    innerR: f[3] / 2,
                    start: h,
                    end: i
                },
                j = (i + h) / 2,
                c.slicedTranslation = Sa([W(j) * d + g.plotLeft, aa(j) * d + g.plotTop], t),
                o = W(j) * f[2] / 2,
                p = aa(j) * f[2] / 2,
                c.tooltipPos = [f[0] + .7 * o, f[1] + .7 * p],
                c.labelPos = [f[0] + o + W(j) * s, f[1] + p + aa(j) * s, f[0] + o + W(j) * e, f[1] + p + aa(j) * e, f[0] + o, f[1] + p, 0 > s ? "center" : l / 4 > j ? "left" : "right", j],
                c.percentage = 100 * m,
                c.total = a
            }),
            this.setTooltipPoints()
        },
        render: function() {
            this.getAttribs(),
            this.drawPoints(),
            this.options.enableMouseTracking !== !1 && this.drawTracker(),
            this.drawDataLabels(),
            this.options.animation && this.animate && this.animate(),
            this.isDirty = !1
        },
        drawPoints: function() {
            var d, e, f, h, i, a = this, b = a.chart, c = b.renderer, g = a.options.shadow;
            n(a.points, function(j) {
                e = j.graphic,
                i = j.shapeArgs,
                f = j.group,
                h = j.shadowGroup,
                g && !h && (h = j.shadowGroup = c.g("shadow").attr({
                    zIndex: 4
                }).add()),
                f || (f = j.group = c.g("point").attr({
                    zIndex: 5
                }).add()),
                d = j.sliced ? j.slicedTranslation : [b.plotLeft, b.plotTop],
                f.translate(d[0], d[1]),
                h && h.translate(d[0], d[1]),
                e ? e.animate(i) : j.graphic = e = c.arc(i).setRadialReference(a.center).attr(s(j.pointAttr[""], {
                    "stroke-linejoin": "round"
                })).add(j.group).shadow(g, h),
                j.visible === !1 && j.setVisible(!1)
            })
        },
        drawDataLabels: function() {
            var b, g, h, s, q, t, u, w, a = this.data, c = this.chart, d = this.options.dataLabels, e = p(d.connectorPadding, 10), f = p(d.connectorWidth, 1), i = p(d.softConnector, !0), j = d.distance, k = this.center, l = k[2] / 2, m = k[1], o = j > 0, r = [[], []], v = 2;
            if (d.enabled || this._hasPointLabels)
                for (R.prototype.drawDataLabels.apply(this),
                n(a, function(a) {
                    a.dataLabel && r[a.labelPos[7] < xa / 2 ? 0 : 1].push(a)
                }),
                r[1].reverse(),
                u = function(a, b) {
                    return b.y - a.y
                }
                ,
                a = r[0][0] && r[0][0].dataLabel && (r[0][0].dataLabel.getBBox().height || 21); v--; ) {
                    var z, x = [], B = [], A = r[v], C = A.length;
                    if (j > 0) {
                        for (w = m - l - j; m + l + j >= w; w += a)
                            x.push(w);
                        if (t = x.length,
                        C > t) {
                            for (h = [].concat(A),
                            h.sort(u),
                            w = C; w--; )
                                h[w].rank = w;
                            for (w = C; w--; )
                                A[w].rank >= t && A.splice(w, 1);
                            C = A.length
                        }
                        for (w = 0; C > w; w++) {
                            for (b = A[w],
                            h = b.labelPos,
                            b = 9999,
                            q = 0; t > q; q++)
                                g = N(x[q] - h[1]),
                                b > g && (b = g,
                                z = q);
                            if (w > z && null !== x[w])
                                z = w;
                            else
                                for (C - w + z > t && null !== x[w] && (z = t - C + w); null === x[z]; )
                                    z++;
                            B.push({
                                i: z,
                                y: x[z]
                            }),
                            x[z] = null
                        }
                        B.sort(u)
                    }
                    for (w = 0; C > w; w++)
                        b = A[w],
                        h = b.labelPos,
                        g = b.dataLabel,
                        t = b.visible === !1 ? "hidden" : "visible",
                        s = h[1],
                        j > 0 ? (q = B.pop(),
                        z = q.i,
                        q = q.y,
                        (s > q && null !== x[z + 1] || q > s && null !== x[z - 1]) && (q = s)) : q = s,
                        s = d.justify ? k[0] + (v ? -1 : 1) * (l + j) : this.getX(0 === z || z === x.length - 1 ? s : q, v),
                        g.attr({
                            visibility: t,
                            align: h[6]
                        })[g.moved ? "animate" : "attr"]({
                            x: s + d.x + ({
                                left: e,
                                right: -e
                            }[h[6]] || 0),
                            y: q + d.y
                        }),
                        g.moved = !0,
                        o && f && (g = b.connector,
                        h = i ? ["M", s + ("left" === h[6] ? 5 : -5), q, "C", s, q, 2 * h[2] - h[4], 2 * h[3] - h[5], h[2], h[3], "L", h[4], h[5]] : ["M", s + ("left" === h[6] ? 5 : -5), q, "L", h[2], h[3], "L", h[4], h[5]],
                        g ? (g.animate({
                            d: h
                        }),
                        g.attr("visibility", t)) : b.connector = g = this.chart.renderer.path(h).attr({
                            "stroke-width": f,
                            stroke: d.connectorColor || b.color || "#606060",
                            visibility: t,
                            zIndex: 3
                        }).translate(c.plotLeft, c.plotTop).add())
                }
        },
        drawTracker: Ca.prototype.drawTracker,
        drawLegendSymbol: F.prototype.drawLegendSymbol,
        getSymbol: function() {}
    },
    X = da(R, X),
    ba.pie = X,
    s(Highcharts, {
        Axis: ob,
        CanVGRenderer: gb,
        Chart: sb,
        Color: qa,
        Legend: rb,
        MouseTracker: qb,
        Point: Ta,
        Tick: Pa,
        Tooltip: pb,
        Renderer: Ra,
        Series: R,
        SVGRenderer: ra,
        VMLRenderer: ka,
        dateFormat: cb,
        pathAnim: vb,
        getOptions: function() {
            return O
        },
        hasBidiBug: Pb,
        numberFormat: Ia,
        seriesTypes: ba,
        setOptions: function(a) {
            return O = C(O, a),
            Gb(),
            O
        },
        addEvent: H,
        removeEvent: U,
        createElement: S,
        discardElement: Na,
        css: G,
        each: n,
        extend: s,
        map: Sa,
        merge: C,
        pick: p,
        splat: oa,
        extendClass: da,
        pInt: A,
        wrap: function(a, b, c) {
            var d = a[b];
            a[b] = function() {
                var a = Array.prototype.slice.call(arguments);
                return a.unshift(d),
                c.apply(this, a)
            }
        },
        svg: fa,
        canvas: $,
        vml: !fa && !$,
        product: "Highcharts",
        version: "2.3.2"
    })
}(),
function() {
    var n = Highcharts
      , A = n.Chart
      , B = n.addEvent
      , E = n.removeEvent
      , t = n.createElement
      , w = n.discardElement
      , u = n.css
      , x = n.merge
      , q = n.each
      , r = n.extend
      , F = Math.max
      , s = document
      , G = window
      , C = void 0 !== s.documentElement.ontouchstart
      , y = n.getOptions();
    r(y.lang, {
        downloadPNG: "Download PNG image",
        downloadJPEG: "Download JPEG image",
        downloadPDF: "Download PDF document",
        downloadSVG: "Download SVG vector image",
        exportButtonTitle: "Export to raster or vector image",
        printButtonTitle: "Print the chart"
    }),
    y.navigation = {
        menuStyle: {
            border: "1px solid #A0A0A0",
            background: "#FFFFFF"
        },
        menuItemStyle: {
            padding: "0 5px",
            background: "none",
            color: "#303030",
            fontSize: C ? "14px" : "11px"
        },
        menuItemHoverStyle: {
            background: "#4572A5",
            color: "#FFFFFF"
        },
        buttonOptions: {
            align: "right",
            backgroundColor: {
                linearGradient: [0, 0, 0, 20],
                stops: [[.4, "#F7F7F7"], [.6, "#E3E3E3"]]
            },
            borderColor: "#B0B0B0",
            borderRadius: 3,
            borderWidth: 1,
            height: 20,
            hoverBorderColor: "#909090",
            hoverSymbolFill: "#81A7CF",
            hoverSymbolStroke: "#4572A5",
            symbolFill: "#E0E0E0",
            symbolStroke: "#A0A0A0",
            symbolX: 11.5,
            symbolY: 10.5,
            verticalAlign: "top",
            width: 24,
            y: 10
        }
    },
    y.exporting = {
        type: "image/png",
        url: "http://export.highcharts.com/",
        width: 800,
        enableImages: !1,
        buttons: {
            exportButton: {
                symbol: "exportIcon",
                x: -10,
                symbolFill: "#A8BF77",
                hoverSymbolFill: "#768F3E",
                _id: "exportButton",
                _titleKey: "exportButtonTitle",
                menuItems: [{
                    textKey: "downloadPNG",
                    onclick: function() {
                        this.exportChart()
                    }
                }, {
                    textKey: "downloadJPEG",
                    onclick: function() {
                        this.exportChart({
                            type: "image/jpeg"
                        })
                    }
                }, {
                    textKey: "downloadPDF",
                    onclick: function() {
                        this.exportChart({
                            type: "application/pdf"
                        })
                    }
                }, {
                    textKey: "downloadSVG",
                    onclick: function() {
                        this.exportChart({
                            type: "image/svg+xml"
                        })
                    }
                }]
            },
            printButton: {
                symbol: "printIcon",
                x: -36,
                symbolFill: "#B5C9DF",
                hoverSymbolFill: "#779ABF",
                _id: "printButton",
                _titleKey: "printButtonTitle",
                onclick: function() {
                    this.print()
                }
            }
        }
    },
    r(A.prototype, {
        getSVG: function(b) {
            var a, f, d, k, e, j, c = this, h = x(c.options, b);
            return s.createElementNS || (s.createElementNS = function(i, g) {
                var o = s.createElement(g);
                return o.getBBox = function() {
                    return n.Renderer.prototype.Element.prototype.getBBox.apply({
                        element: o
                    })
                }
                ,
                o
            }
            ),
            b = t("div", null, {
                position: "absolute",
                top: "-9999em",
                width: c.chartWidth + "px",
                height: c.chartHeight + "px"
            }, s.body),
            r(h.chart, {
                renderTo: b,
                forExport: !0
            }),
            h.exporting.enabled = !1,
            h.exporting.enableImages || (h.chart.plotBackgroundImage = null),
            h.series = [],
            q(c.series, function(i) {
                d = i.options,
                d.animation = !1,
                d.showCheckbox = !1,
                d.visible = i.visible,
                h.exporting.enableImages || d && d.marker && /^url\(/.test(d.marker.symbol) && (d.marker.symbol = "circle"),
                d.data = [],
                q(i.data, function(g) {
                    k = g.config,
                    e = {
                        x: g.x,
                        y: g.y,
                        name: g.name
                    },
                    "object" == typeof k && g.config && k.constructor !== Array && r(e, k),
                    e.visible = g.visible,
                    d.data.push(e),
                    h.exporting.enableImages || (j = g.config && g.config.marker) && /^url\(/.test(j.symbol) && delete j.symbol
                }),
                h.series.push(d)
            }),
            a = new Highcharts.Chart(h),
            q(["xAxis", "yAxis"], function(i) {
                q(c[i], function(g, o) {
                    var l = a[i][o]
                      , m = g.getExtremes()
                      , p = m.userMin;
                    m = m.userMax,
                    void 0 === p && void 0 === m || l.setExtremes(p, m, !0, !1)
                })
            }),
            f = a.container.innerHTML,
            h = null,
            a.destroy(),
            w(b),
            f = f.replace(/zIndex="[^"]+"/g, "").replace(/isShadow="[^"]+"/g, "").replace(/symbolName="[^"]+"/g, "").replace(/jQuery[0-9]+="[^"]+"/g, "").replace(/isTracker="[^"]+"/g, "").replace(/url\([^#]+#/g, "url(#").replace(/<svg /, '<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g, " xlink:href=").replace(/&nbsp;/g, "\xa0").replace(/&shy;/g, "\xad").replace(/id=([^" >]+)/g, 'id="$1"').replace(/class=([^" ]+)/g, 'class="$1"').replace(/ transform /g, " ").replace(/:(path|rect)/g, "$1").replace(/<img ([^>]*)>/gi, "<image $1 />").replace(/<\/image>/g, "").replace(/<image ([^>]*)([^\/])>/gi, "<image $1$2 />").replace(/width=(\d+)/g, 'width="$1"').replace(/height=(\d+)/g, 'height="$1"').replace(/hc-svg-href="/g, 'xlink:href="').replace(/style="([^"]+)"/g, function(i) {
                return i.toLowerCase()
            }),
            f = f.replace(/(url\(#highcharts-[0-9]+)&quot;/g, "$1").replace(/&quot;/g, "'"),
            2 === f.match(/ xmlns="/g).length && (f = f.replace(/xmlns="[^"]+"/, "")),
            f
        },
        exportChart: function(b, c) {
            var a, f = this.getSVG(c);
            b = x(this.options.exporting, b),
            a = t("form", {
                method: "post",
                action: b.url
            }, {
                display: "none"
            }, s.body),
            q(["filename", "type", "width", "svg"], function(d) {
                t("input", {
                    type: "hidden",
                    name: d,
                    value: {
                        filename: b.filename || "chart",
                        type: b.type,
                        width: b.width,
                        svg: f
                    }[d]
                }, null, a)
            }),
            a.submit(),
            w(a)
        },
        print: function() {
            var b = this
              , c = b.container
              , a = []
              , f = c.parentNode
              , d = s.body
              , k = d.childNodes;
            b.isPrinting || (b.isPrinting = !0,
            q(k, function(e, j) {
                1 === e.nodeType && (a[j] = e.style.display,
                e.style.display = "none")
            }),
            d.appendChild(c),
            G.print(),
            setTimeout(function() {
                f.appendChild(c),
                q(k, function(e, j) {
                    1 === e.nodeType && (e.style.display = a[j])
                }),
                b.isPrinting = !1
            }, 1e3))
        },
        contextMenu: function(b, c, a, f, d, k) {
            var p, z, e = this, j = e.options.navigation, h = j.menuItemStyle, i = e.chartWidth, g = e.chartHeight, o = "cache-" + b, l = e[o], m = F(d, k);
            l || (e[o] = l = t("div", {
                className: "highcharts-" + b
            }, {
                position: "absolute",
                zIndex: 1e3,
                padding: m + "px"
            }, e.container),
            p = t("div", null, r({
                MozBoxShadow: "3px 3px 10px #888",
                WebkitBoxShadow: "3px 3px 10px #888",
                boxShadow: "3px 3px 10px #888"
            }, j.menuStyle), l),
            z = function() {
                u(l, {
                    display: "none"
                })
            }
            ,
            B(l, "mouseleave", z),
            q(c, function(v) {
                if (v) {
                    var D = t("div", {
                        onmouseover: function() {
                            u(this, j.menuItemHoverStyle)
                        },
                        onmouseout: function() {
                            u(this, h)
                        },
                        innerHTML: v.text || e.options.lang[v.textKey]
                    }, r({
                        cursor: "pointer"
                    }, h), p);
                    D[C ? "ontouchstart" : "onclick"] = function() {
                        z(),
                        v.onclick.apply(e, arguments)
                    }
                    ,
                    e.exportDivElements.push(D)
                }
            }),
            e.exportDivElements.push(p, l),
            e.exportMenuWidth = l.offsetWidth,
            e.exportMenuHeight = l.offsetHeight),
            b = {
                display: "block"
            },
            a + e.exportMenuWidth > i ? b.right = i - a - d - m + "px" : b.left = a - m + "px",
            f + k + e.exportMenuHeight > g ? b.bottom = g - f - m + "px" : b.top = f + k - m + "px",
            u(l, b)
        },
        addButton: function(b) {
            function c() {
                g.attr(m),
                i.attr(l)
            }
            var i, g, o, a = this, f = a.renderer, d = x(a.options.navigation.buttonOptions, b), k = d.onclick, e = d.menuItems, j = d.width, h = d.height;
            b = d.borderWidth;
            var l = {
                stroke: d.borderColor
            }
              , m = {
                stroke: d.symbolStroke,
                fill: d.symbolFill
            };
            a.exportDivElements || (a.exportDivElements = [],
            a.exportSVGElements = []),
            d.enabled !== !1 && (i = f.rect(0, 0, j, h, d.borderRadius, b).align(d, !0).attr(r({
                fill: d.backgroundColor,
                "stroke-width": b,
                zIndex: 19
            }, l)).add(),
            o = f.rect(0, 0, j, h, 0).align(d).attr({
                id: d._id,
                fill: "rgba(255, 255, 255, 0.001)",
                title: a.options.lang[d._titleKey],
                zIndex: 21
            }).css({
                cursor: "pointer"
            }).on("mouseover", function() {
                g.attr({
                    stroke: d.hoverSymbolStroke,
                    fill: d.hoverSymbolFill
                }),
                i.attr({
                    stroke: d.hoverBorderColor
                })
            }).on("mouseout", c).on("click", c).add(),
            e && (k = function() {
                c();
                var p = o.getBBox();
                a.contextMenu("export-menu", e, p.x, p.y, j, h)
            }
            ),
            o.on("click", function() {
                k.apply(a, arguments)
            }),
            g = f.symbol(d.symbol, d.symbolX, d.symbolY, (d.symbolSize || 12) / 2).align(d, !0).attr(r(m, {
                "stroke-width": d.symbolStrokeWidth || 1,
                zIndex: 20
            })).add(),
            a.exportSVGElements.push(i, o, g))
        },
        destroyExport: function() {
            var b, c;
            for (b = 0; b < this.exportSVGElements.length; b++)
                c = this.exportSVGElements[b],
                c.onclick = c.ontouchstart = null,
                this.exportSVGElements[b] = c.destroy();
            for (b = 0; b < this.exportDivElements.length; b++)
                c = this.exportDivElements[b],
                E(c, "mouseleave"),
                this.exportDivElements[b] = c.onmouseout = c.onmouseover = c.ontouchstart = c.onclick = null,
                w(c)
        }
    }),
    n.Renderer.prototype.symbols.exportIcon = function(b, c, a) {
        return ["M", b - a, c + a, "L", b + a, c + a, b + a, c + .5 * a, b - a, c + .5 * a, "Z", "M", b, c + .5 * a, "L", b - .5 * a, c - a / 3, b - a / 6, c - a / 3, b - a / 6, c - a, b + a / 6, c - a, b + a / 6, c - a / 3, b + .5 * a, c - a / 3, "Z"]
    }
    ,
    n.Renderer.prototype.symbols.printIcon = function(b, c, a) {
        return ["M", b - a, c + .5 * a, "L", b + a, c + .5 * a, b + a, c - a / 3, b - a, c - a / 3, "Z", "M", b - .5 * a, c - a / 3, "L", b - .5 * a, c - a, b + .5 * a, c - a, b + .5 * a, c - a / 3, "Z", "M", b - .5 * a, c + .5 * a, "L", b - .75 * a, c + a, b + .75 * a, c + a, b + .5 * a, c + .5 * a, "Z"]
    }
    ,
    A.prototype.callbacks.push(function(b) {
        var c, a = b.options.exporting, f = a.buttons;
        if (a.enabled !== !1) {
            for (c in f)
                b.addButton(f[c]);
            B(b, "destroy", b.destroyExport)
        }
    })
}(),
function($) {
    $.widget("ui.multiselect", {
        _init: function() {
            this.element.hide(),
            this.id = this.element.attr("id"),
            this.container = $('<div class="ui-multiselect ui-helper-clearfix ui-widget"></div>').insertAfter(this.element),
            this.count = 0,
            this.selectedContainer = $('<div class="selected"></div>').appendTo(this.container),
            this.availableContainer = $('<div class="available"></div>').appendTo(this.container),
            this.selectedActions = $('<div class="actions ui-widget-header ui-helper-clearfix"><span class="count">0 ' + $.ui.multiselect.locale.itemsCount + '</span><a href="#" class="remove-all">' + $.ui.multiselect.locale.removeAll + "</a></div>").appendTo(this.selectedContainer),
            this.availableActions = $('<div class="actions ui-widget-header ui-helper-clearfix"><input type="text" class="search empty ui-widget-content ui-corner-all"/><a href="#" class="add-all">' + $.ui.multiselect.locale.addAll + "</a></div>").appendTo(this.availableContainer),
            this.selectedList = $('<ul class="selected connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart", function() {
                return !1
            }).appendTo(this.selectedContainer),
            this.availableList = $('<ul class="available connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart", function() {
                return !1
            }).appendTo(this.availableContainer);
            var that = this;
            this.container.width(this.element.width() + 1),
            this.selectedContainer.width(Math.floor(this.element.width() * this.options.dividerLocation)),
            this.availableContainer.width(Math.floor(this.element.width() * (1 - this.options.dividerLocation))),
            this.selectedList.height(Math.max(this.element.height() - this.selectedActions.height(), 1)),
            this.availableList.height(Math.max(this.element.height() - this.availableActions.height(), 1)),
            this.options.animated || (this.options.show = "show",
            this.options.hide = "hide"),
            this._populateLists(this.element.find("option")),
            this.options.sortable && $("ul.selected").sortable({
                placeholder: "ui-state-highlight",
                axis: "y",
                update: function() {
                    that.selectedList.find("li").each(function() {
                        $(this).data("optionLink") && $(this).data("optionLink").remove().appendTo(that.element)
                    })
                },
                receive: function(event, ui) {
                    ui.item.data("optionLink").attr("selected", !0),
                    that.count += 1,
                    that._updateCount(),
                    that.selectedList.children(".ui-draggable").each(function() {
                        $(this).removeClass("ui-draggable"),
                        $(this).data("optionLink", ui.item.data("optionLink")),
                        $(this).data("idx", ui.item.data("idx")),
                        that._applyItemState($(this), !0)
                    }),
                    setTimeout(function() {
                        ui.item.remove()
                    }, 1)
                }
            }),
            this.options.searchable ? this._registerSearchEvents(this.availableContainer.find("input.search")) : $(".search").hide(),
            $(".remove-all").click(function() {
                return that._populateLists(that.element.find("option").removeAttr("selected")),
                !1
            }),
            $(".add-all").click(function() {
                return that._populateLists(that.element.find("option").attr("selected", "selected")),
                !1
            })
        },
        destroy: function() {
            this.element.show(),
            this.container.remove(),
            $.widget.prototype.destroy.apply(this, arguments)
        },
        _populateLists: function(options) {
            this.selectedList.children(".ui-element").remove(),
            this.availableList.children(".ui-element").remove(),
            this.count = 0;
            var that = this;
            $(options.map(function(i) {
                var item = that._getOptionNode(this).appendTo(this.selected ? that.selectedList : that.availableList).show();
                return this.selected && (that.count += 1),
                that._applyItemState(item, this.selected),
                item.data("idx", i),
                item[0]
            }));
            this._updateCount()
        },
        _updateCount: function() {
            this.selectedContainer.find("span.count").text(this.count + " " + $.ui.multiselect.locale.itemsCount)
        },
        _getOptionNode: function(option) {
            option = $(option);
            var node = $('<li class="ui-state-default ui-element" title="' + option.text() + '"><span class="ui-icon"/>' + option.text() + '<a href="#" class="action"><span class="ui-corner-all ui-icon"/></a></li>').hide();
            return node.data("optionLink", option),
            node
        },
        _cloneWithData: function(clonee) {
            var clone = clonee.clone();
            return clone.data("optionLink", clonee.data("optionLink")),
            clone.data("idx", clonee.data("idx")),
            clone
        },
        _setSelected: function(item, selected) {
            if (item.data("optionLink").attr("selected", selected),
            selected) {
                var selectedItem = this._cloneWithData(item);
                return item[this.options.hide](this.options.animated, function() {
                    $(this).remove()
                }),
                selectedItem.appendTo(this.selectedList).hide()[this.options.show](this.options.animated),
                this._applyItemState(selectedItem, !0),
                selectedItem
            }
            var items = this.availableList.find("li")
              , comparator = this.options.nodeComparator
              , succ = null
              , i = item.data("idx")
              , direction = comparator(item, $(items[i]));
            if (direction) {
                for (; i >= 0 && i < items.length; )
                    if (direction > 0 ? i++ : i--,
                    direction != comparator(item, $(items[i]))) {
                        succ = items[direction > 0 ? i : i + 1];
                        break
                    }
            } else
                succ = items[i];
            var availableItem = this._cloneWithData(item);
            return succ ? availableItem.insertBefore($(succ)) : availableItem.appendTo(this.availableList),
            item[this.options.hide](this.options.animated, function() {
                $(this).remove()
            }),
            availableItem.hide()[this.options.show](this.options.animated),
            this._applyItemState(availableItem, !1),
            availableItem
        },
        _applyItemState: function(item, selected) {
            selected ? (this.options.sortable ? item.children("span").addClass("ui-icon-arrowthick-2-n-s").removeClass("ui-helper-hidden").addClass("ui-icon") : item.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),
            item.find("a.action span").addClass("ui-icon-minus").removeClass("ui-icon-plus"),
            this._registerRemoveEvents(item.find("a.action"))) : (item.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),
            item.find("a.action span").addClass("ui-icon-plus").removeClass("ui-icon-minus"),
            this._registerAddEvents(item.find("a.action"))),
            this._registerHoverEvents(item)
        },
        _filter: function(list) {
            var input = $(this)
              , rows = list.children("li")
              , cache = rows.map(function() {
                return $(this).text().toLowerCase()
            })
              , term = $.trim(input.val().toLowerCase())
              , scores = [];
            term ? (rows.hide(),
            cache.each(function(i) {
                this.indexOf(term) > -1 && scores.push(i)
            }),
            $.each(scores, function() {
                $(rows[this]).show()
            })) : rows.show()
        },
        _registerHoverEvents: function(elements) {
            elements.removeClass("ui-state-hover"),
            elements.mouseover(function() {
                $(this).addClass("ui-state-hover")
            }),
            elements.mouseout(function() {
                $(this).removeClass("ui-state-hover")
            })
        },
        _registerAddEvents: function(elements) {
            var that = this;
            elements.click(function() {
                that._setSelected($(this).parent(), !0);
                return that.count += 1,
                that._updateCount(),
                !1
            }).each(function() {
                $(this).parent().draggable({
                    connectToSortable: "ul.selected",
                    helper: function() {
                        var selectedItem = that._cloneWithData($(this)).width($(this).width() - 50);
                        return selectedItem.width($(this).width()),
                        selectedItem
                    },
                    appendTo: ".ui-multiselect",
                    containment: ".ui-multiselect",
                    revert: "invalid"
                })
            })
        },
        _registerRemoveEvents: function(elements) {
            var that = this;
            elements.click(function() {
                return that._setSelected($(this).parent(), !1),
                that.count -= 1,
                that._updateCount(),
                !1
            })
        },
        _registerSearchEvents: function(input) {
            var that = this;
            input.focus(function() {
                $(this).addClass("ui-state-active")
            }).blur(function() {
                $(this).removeClass("ui-state-active")
            }).keypress(function(e) {
                return 13 == e.keyCode ? !1 : void 0
            }).keyup(function() {
                that._filter.apply(this, [that.availableList])
            })
        }
    }),
    $.extend($.ui.multiselect, {
        defaults: {
            sortable: !0,
            searchable: !0,
            animated: "fast",
            show: "slideDown",
            hide: "slideUp",
            dividerLocation: .6,
            nodeComparator: function(node1, node2) {
                var text1 = node1.text()
                  , text2 = node2.text();
                return text1 == text2 ? 0 : text2 > text1 ? -1 : 1
            }
        },
        locale: {
            addAll: "Add all",
            removeAll: "Remove all",
            itemsCount: "items selected"
        }
    })
}(jQuery),
function($) {
    function Timepicker() {
        this.regional = [],
        this.regional[""] = {
            currentText: "Now",
            closeText: "Done",
            ampm: !1,
            amNames: ["AM", "A"],
            pmNames: ["PM", "P"],
            timeFormat: "hh:mm tt",
            timeSuffix: "",
            timeOnlyTitle: "Choose Time",
            timeText: "Time",
            hourText: "Hour",
            minuteText: "Minute",
            secondText: "Second",
            millisecText: "Millisecond",
            timezoneText: "Time Zone"
        },
        this._defaults = {
            showButtonPanel: !0,
            timeOnly: !1,
            showHour: !0,
            showMinute: !0,
            showSecond: !1,
            showMillisec: !1,
            showTimezone: !1,
            showTime: !0,
            stepHour: 1,
            stepMinute: 1,
            stepSecond: 1,
            stepMillisec: 1,
            hour: 0,
            minute: 0,
            second: 0,
            millisec: 0,
            timezone: "+0000",
            hourMin: 0,
            minuteMin: 0,
            secondMin: 0,
            millisecMin: 0,
            hourMax: 23,
            minuteMax: 59,
            secondMax: 59,
            millisecMax: 999,
            minDateTime: null,
            maxDateTime: null,
            onSelect: null,
            hourGrid: 0,
            minuteGrid: 0,
            secondGrid: 0,
            millisecGrid: 0,
            alwaysSetTime: !0,
            separator: " ",
            altFieldTimeOnly: !0,
            showTimepicker: !0,
            timezoneIso8609: !1,
            timezoneList: null,
            addSliderAccess: !1,
            sliderAccessArgs: null
        },
        $.extend(this._defaults, this.regional[""])
    }
    function extendRemove(target, props) {
        $.extend(target, props);
        for (var name in props)
            null !== props[name] && void 0 !== props[name] || (target[name] = props[name]);
        return target
    }
    $.extend($.ui, {
        timepicker: {
            version: "0.9.9"
        }
    }),
    $.extend(Timepicker.prototype, {
        $input: null,
        $altInput: null,
        $timeObj: null,
        inst: null,
        hour_slider: null,
        minute_slider: null,
        second_slider: null,
        millisec_slider: null,
        timezone_select: null,
        hour: 0,
        minute: 0,
        second: 0,
        millisec: 0,
        timezone: "+0000",
        hourMinOriginal: null,
        minuteMinOriginal: null,
        secondMinOriginal: null,
        millisecMinOriginal: null,
        hourMaxOriginal: null,
        minuteMaxOriginal: null,
        secondMaxOriginal: null,
        millisecMaxOriginal: null,
        ampm: "",
        formattedDate: "",
        formattedTime: "",
        formattedDateTime: "",
        timezoneList: null,
        setDefaults: function(settings) {
            return extendRemove(this._defaults, settings || {}),
            this
        },
        _newInst: function($input, o) {
            var tp_inst = new Timepicker
              , inlineSettings = {};
            for (var attrName in this._defaults) {
                var attrValue = $input.attr("time:" + attrName);
                if (attrValue)
                    try {
                        inlineSettings[attrName] = eval(attrValue)
                    } catch (err) {
                        inlineSettings[attrName] = attrValue
                    }
            }
            if (tp_inst._defaults = $.extend({}, this._defaults, inlineSettings, o, {
                beforeShow: function(input, dp_inst) {
                    return $.isFunction(o.beforeShow) ? o.beforeShow(input, dp_inst, tp_inst) : void 0
                },
                onChangeMonthYear: function(year, month, dp_inst) {
                    tp_inst._updateDateTime(dp_inst),
                    $.isFunction(o.onChangeMonthYear) && o.onChangeMonthYear.call($input[0], year, month, dp_inst, tp_inst)
                },
                onClose: function(dateText, dp_inst) {
                    tp_inst.timeDefined === !0 && "" != $input.val() && tp_inst._updateDateTime(dp_inst),
                    $.isFunction(o.onClose) && o.onClose.call($input[0], dateText, dp_inst, tp_inst)
                },
                timepicker: tp_inst
            }),
            tp_inst.amNames = $.map(tp_inst._defaults.amNames, function(val) {
                return val.toUpperCase()
            }),
            tp_inst.pmNames = $.map(tp_inst._defaults.pmNames, function(val) {
                return val.toUpperCase()
            }),
            null === tp_inst._defaults.timezoneList) {
                for (var timezoneList = [], i = -11; 12 >= i; i++)
                    timezoneList.push((i >= 0 ? "+" : "-") + ("0" + Math.abs(i).toString()).slice(-2) + "00");
                tp_inst._defaults.timezoneIso8609 && (timezoneList = $.map(timezoneList, function(val) {
                    return "+0000" == val ? "Z" : val.substring(0, 3) + ":" + val.substring(3)
                })),
                tp_inst._defaults.timezoneList = timezoneList
            }
            return tp_inst.hour = tp_inst._defaults.hour,
            tp_inst.minute = tp_inst._defaults.minute,
            tp_inst.second = tp_inst._defaults.second,
            tp_inst.millisec = tp_inst._defaults.millisec,
            tp_inst.ampm = "",
            tp_inst.$input = $input,
            o.altField && (tp_inst.$altInput = $(o.altField).css({
                cursor: "pointer"
            }).focus(function() {
                $input.trigger("focus")
            })),
            0 != tp_inst._defaults.minDate && 0 != tp_inst._defaults.minDateTime || (tp_inst._defaults.minDate = new Date),
            0 != tp_inst._defaults.maxDate && 0 != tp_inst._defaults.maxDateTime || (tp_inst._defaults.maxDate = new Date),
            void 0 !== tp_inst._defaults.minDate && tp_inst._defaults.minDate instanceof Date && (tp_inst._defaults.minDateTime = new Date(tp_inst._defaults.minDate.getTime())),
            void 0 !== tp_inst._defaults.minDateTime && tp_inst._defaults.minDateTime instanceof Date && (tp_inst._defaults.minDate = new Date(tp_inst._defaults.minDateTime.getTime())),
            void 0 !== tp_inst._defaults.maxDate && tp_inst._defaults.maxDate instanceof Date && (tp_inst._defaults.maxDateTime = new Date(tp_inst._defaults.maxDate.getTime())),
            void 0 !== tp_inst._defaults.maxDateTime && tp_inst._defaults.maxDateTime instanceof Date && (tp_inst._defaults.maxDate = new Date(tp_inst._defaults.maxDateTime.getTime())),
            tp_inst
        },
        _addTimePicker: function(dp_inst) {
            var currDT = this.$altInput && this._defaults.altFieldTimeOnly ? this.$input.val() + " " + this.$altInput.val() : this.$input.val();
            this.timeDefined = this._parseTime(currDT),
            this._limitMinMaxDateTime(dp_inst, !1),
            this._injectTimePicker()
        },
        _parseTime: function(timeString, withDate) {
            var treg, regstr = this._defaults.timeFormat.toString().replace(/h{1,2}/gi, "(\\d?\\d)").replace(/m{1,2}/gi, "(\\d?\\d)").replace(/s{1,2}/gi, "(\\d?\\d)").replace(/l{1}/gi, "(\\d?\\d?\\d)").replace(/t{1,2}/gi, this._getPatternAmpm()).replace(/z{1}/gi, "(z|[-+]\\d\\d:?\\d\\d)?").replace(/\s/g, "\\s?") + this._defaults.timeSuffix + "$", order = this._getFormatPositions(), ampm = "";
            if (this.inst || (this.inst = $.datepicker._getInst(this.$input[0])),
            withDate || !this._defaults.timeOnly) {
                var dp_dateFormat = $.datepicker._get(this.inst, "dateFormat")
                  , specials = new RegExp("[.*+?|()\\[\\]{}\\\\]","g");
                regstr = "^.{" + dp_dateFormat.length + ",}?" + this._defaults.separator.replace(specials, "\\$&") + regstr
            }
            if (treg = timeString.match(new RegExp(regstr,"i"))) {
                if (-1 !== order.t && (void 0 === treg[order.t] || 0 === treg[order.t].length ? (ampm = "",
                this.ampm = "") : (ampm = -1 !== $.inArray(treg[order.t].toUpperCase(), this.amNames) ? "AM" : "PM",
                this.ampm = this._defaults["AM" == ampm ? "amNames" : "pmNames"][0])),
                -1 !== order.h && ("AM" == ampm && "12" == treg[order.h] ? this.hour = 0 : "PM" == ampm && "12" != treg[order.h] ? this.hour = (parseFloat(treg[order.h]) + 12).toFixed(0) : this.hour = Number(treg[order.h])),
                -1 !== order.m && (this.minute = Number(treg[order.m])),
                -1 !== order.s && (this.second = Number(treg[order.s])),
                -1 !== order.l && (this.millisec = Number(treg[order.l])),
                -1 !== order.z && void 0 !== treg[order.z]) {
                    var tz = treg[order.z].toUpperCase();
                    switch (tz.length) {
                    case 1:
                        tz = this._defaults.timezoneIso8609 ? "Z" : "+0000";
                        break;
                    case 5:
                        this._defaults.timezoneIso8609 && (tz = "0000" == tz.substring(1) ? "Z" : tz.substring(0, 3) + ":" + tz.substring(3));
                        break;
                    case 6:
                        this._defaults.timezoneIso8609 ? "00:00" == tz.substring(1) && (tz = "Z") : tz = "Z" == tz || "00:00" == tz.substring(1) ? "+0000" : tz.replace(/:/, "")
                    }
                    this.timezone = tz
                }
                return !0
            }
            return !1
        },
        _getPatternAmpm: function() {
            var markers = [];
            return o = this._defaults,
            o.amNames && $.merge(markers, o.amNames),
            o.pmNames && $.merge(markers, o.pmNames),
            markers = $.map(markers, function(val) {
                return val.replace(/[.*+?|()\[\]{}\\]/g, "\\$&")
            }),
            "(" + markers.join("|") + ")?"
        },
        _getFormatPositions: function() {
            var finds = this._defaults.timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|t{1,2}|z)/g)
              , orders = {
                h: -1,
                m: -1,
                s: -1,
                l: -1,
                t: -1,
                z: -1
            };
            if (finds)
                for (var i = 0; i < finds.length; i++)
                    -1 == orders[finds[i].toString().charAt(0)] && (orders[finds[i].toString().charAt(0)] = i + 1);
            return orders
        },
        _injectTimePicker: function() {
            var $dp = this.inst.dpDiv
              , o = this._defaults
              , tp_inst = this
              , hourMax = parseInt(o.hourMax - (o.hourMax - o.hourMin) % o.stepHour, 10)
              , minMax = parseInt(o.minuteMax - (o.minuteMax - o.minuteMin) % o.stepMinute, 10)
              , secMax = parseInt(o.secondMax - (o.secondMax - o.secondMin) % o.stepSecond, 10)
              , millisecMax = parseInt(o.millisecMax - (o.millisecMax - o.millisecMin) % o.stepMillisec, 10)
              , dp_id = this.inst.id.toString().replace(/([^A-Za-z0-9_])/g, "");
            if (0 === $dp.find("div#ui-timepicker-div-" + dp_id).length && o.showTimepicker) {
                var size, noDisplay = ' style="display:none;"', html = '<div class="ui-timepicker-div" id="ui-timepicker-div-' + dp_id + '"><dl><dt class="ui_tpicker_time_label" id="ui_tpicker_time_label_' + dp_id + '"' + (o.showTime ? "" : noDisplay) + ">" + o.timeText + '</dt><dd class="ui_tpicker_time" id="ui_tpicker_time_' + dp_id + '"' + (o.showTime ? "" : noDisplay) + '></dd><dt class="ui_tpicker_hour_label" id="ui_tpicker_hour_label_' + dp_id + '"' + (o.showHour ? "" : noDisplay) + ">" + o.hourText + "</dt>", hourGridSize = 0, minuteGridSize = 0, secondGridSize = 0, millisecGridSize = 0;
                if (html += '<dd class="ui_tpicker_hour"><div id="ui_tpicker_hour_' + dp_id + '"' + (o.showHour ? "" : noDisplay) + "></div>",
                o.showHour && o.hourGrid > 0) {
                    html += '<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';
                    for (var h = o.hourMin; hourMax >= h; h += parseInt(o.hourGrid, 10)) {
                        hourGridSize++;
                        var tmph = o.ampm && h > 12 ? h - 12 : h;
                        10 > tmph && (tmph = "0" + tmph),
                        o.ampm && (0 == h ? tmph = "12a" : tmph += 12 > h ? "a" : "p"),
                        html += "<td>" + tmph + "</td>"
                    }
                    html += "</tr></table></div>"
                }
                if (html += "</dd>",
                html += '<dt class="ui_tpicker_minute_label" id="ui_tpicker_minute_label_' + dp_id + '"' + (o.showMinute ? "" : noDisplay) + ">" + o.minuteText + '</dt><dd class="ui_tpicker_minute"><div id="ui_tpicker_minute_' + dp_id + '"' + (o.showMinute ? "" : noDisplay) + "></div>",
                o.showMinute && o.minuteGrid > 0) {
                    html += '<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';
                    for (var m = o.minuteMin; minMax >= m; m += parseInt(o.minuteGrid, 10))
                        minuteGridSize++,
                        html += "<td>" + (10 > m ? "0" : "") + m + "</td>";
                    html += "</tr></table></div>"
                }
                if (html += "</dd>",
                html += '<dt class="ui_tpicker_second_label" id="ui_tpicker_second_label_' + dp_id + '"' + (o.showSecond ? "" : noDisplay) + ">" + o.secondText + '</dt><dd class="ui_tpicker_second"><div id="ui_tpicker_second_' + dp_id + '"' + (o.showSecond ? "" : noDisplay) + "></div>",
                o.showSecond && o.secondGrid > 0) {
                    html += '<div style="padding-left: 1px"><table><tr>';
                    for (var s = o.secondMin; secMax >= s; s += parseInt(o.secondGrid, 10))
                        secondGridSize++,
                        html += "<td>" + (10 > s ? "0" : "") + s + "</td>";
                    html += "</tr></table></div>"
                }
                if (html += "</dd>",
                html += '<dt class="ui_tpicker_millisec_label" id="ui_tpicker_millisec_label_' + dp_id + '"' + (o.showMillisec ? "" : noDisplay) + ">" + o.millisecText + '</dt><dd class="ui_tpicker_millisec"><div id="ui_tpicker_millisec_' + dp_id + '"' + (o.showMillisec ? "" : noDisplay) + "></div>",
                o.showMillisec && o.millisecGrid > 0) {
                    html += '<div style="padding-left: 1px"><table><tr>';
                    for (var l = o.millisecMin; millisecMax >= l; l += parseInt(o.millisecGrid, 10))
                        millisecGridSize++,
                        html += "<td>" + (10 > l ? "0" : "") + l + "</td>";
                    html += "</tr></table></div>"
                }
                html += "</dd>",
                html += '<dt class="ui_tpicker_timezone_label" id="ui_tpicker_timezone_label_' + dp_id + '"' + (o.showTimezone ? "" : noDisplay) + ">" + o.timezoneText + "</dt>",
                html += '<dd class="ui_tpicker_timezone" id="ui_tpicker_timezone_' + dp_id + '"' + (o.showTimezone ? "" : noDisplay) + "></dd>",
                html += "</dl></div>",
                $tp = $(html),
                o.timeOnly === !0 && ($tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">' + o.timeOnlyTitle + "</div></div>"),
                $dp.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()),
                this.hour_slider = $tp.find("#ui_tpicker_hour_" + dp_id).slider({
                    orientation: "horizontal",
                    value: this.hour,
                    min: o.hourMin,
                    max: hourMax,
                    step: o.stepHour,
                    slide: function(event, ui) {
                        tp_inst.hour_slider.slider("option", "value", ui.value),
                        tp_inst._onTimeChange()
                    }
                }),
                this.minute_slider = $tp.find("#ui_tpicker_minute_" + dp_id).slider({
                    orientation: "horizontal",
                    value: this.minute,
                    min: o.minuteMin,
                    max: minMax,
                    step: o.stepMinute,
                    slide: function(event, ui) {
                        tp_inst.minute_slider.slider("option", "value", ui.value),
                        tp_inst._onTimeChange()
                    }
                }),
                this.second_slider = $tp.find("#ui_tpicker_second_" + dp_id).slider({
                    orientation: "horizontal",
                    value: this.second,
                    min: o.secondMin,
                    max: secMax,
                    step: o.stepSecond,
                    slide: function(event, ui) {
                        tp_inst.second_slider.slider("option", "value", ui.value),
                        tp_inst._onTimeChange()
                    }
                }),
                this.millisec_slider = $tp.find("#ui_tpicker_millisec_" + dp_id).slider({
                    orientation: "horizontal",
                    value: this.millisec,
                    min: o.millisecMin,
                    max: millisecMax,
                    step: o.stepMillisec,
                    slide: function(event, ui) {
                        tp_inst.millisec_slider.slider("option", "value", ui.value),
                        tp_inst._onTimeChange()
                    }
                }),
                this.timezone_select = $tp.find("#ui_tpicker_timezone_" + dp_id).append("<select></select>").find("select"),
                $.fn.append.apply(this.timezone_select, $.map(o.timezoneList, function(val) {
                    return $("<option />").val("object" == typeof val ? val.value : val).text("object" == typeof val ? val.label : val)
                })),
                this.timezone_select.val("undefined" != typeof this.timezone && null != this.timezone && "" != this.timezone ? this.timezone : o.timezone),
                this.timezone_select.change(function() {
                    tp_inst._onTimeChange()
                }),
                o.showHour && o.hourGrid > 0 && (size = 100 * hourGridSize * o.hourGrid / (hourMax - o.hourMin),
                $tp.find(".ui_tpicker_hour table").css({
                    width: size + "%",
                    marginLeft: size / (-2 * hourGridSize) + "%",
                    borderCollapse: "collapse"
                }).find("td").each(function() {
                    $(this).click(function() {
                        var h = $(this).html();
                        if (o.ampm) {
                            var ap = h.substring(2).toLowerCase()
                              , aph = parseInt(h.substring(0, 2), 10);
                            h = "a" == ap ? 12 == aph ? 0 : aph : 12 == aph ? 12 : aph + 12
                        }
                        tp_inst.hour_slider.slider("option", "value", h),
                        tp_inst._onTimeChange(),
                        tp_inst._onSelectHandler()
                    }).css({
                        cursor: "pointer",
                        width: 100 / hourGridSize + "%",
                        textAlign: "center",
                        overflow: "hidden"
                    })
                })),
                o.showMinute && o.minuteGrid > 0 && (size = 100 * minuteGridSize * o.minuteGrid / (minMax - o.minuteMin),
                $tp.find(".ui_tpicker_minute table").css({
                    width: size + "%",
                    marginLeft: size / (-2 * minuteGridSize) + "%",
                    borderCollapse: "collapse"
                }).find("td").each(function() {
                    $(this).click(function() {
                        tp_inst.minute_slider.slider("option", "value", $(this).html()),
                        tp_inst._onTimeChange(),
                        tp_inst._onSelectHandler()
                    }).css({
                        cursor: "pointer",
                        width: 100 / minuteGridSize + "%",
                        textAlign: "center",
                        overflow: "hidden"
                    })
                })),
                o.showSecond && o.secondGrid > 0 && $tp.find(".ui_tpicker_second table").css({
                    width: size + "%",
                    marginLeft: size / (-2 * secondGridSize) + "%",
                    borderCollapse: "collapse"
                }).find("td").each(function() {
                    $(this).click(function() {
                        tp_inst.second_slider.slider("option", "value", $(this).html()),
                        tp_inst._onTimeChange(),
                        tp_inst._onSelectHandler()
                    }).css({
                        cursor: "pointer",
                        width: 100 / secondGridSize + "%",
                        textAlign: "center",
                        overflow: "hidden"
                    })
                }),
                o.showMillisec && o.millisecGrid > 0 && $tp.find(".ui_tpicker_millisec table").css({
                    width: size + "%",
                    marginLeft: size / (-2 * millisecGridSize) + "%",
                    borderCollapse: "collapse"
                }).find("td").each(function() {
                    $(this).click(function() {
                        tp_inst.millisec_slider.slider("option", "value", $(this).html()),
                        tp_inst._onTimeChange(),
                        tp_inst._onSelectHandler()
                    }).css({
                        cursor: "pointer",
                        width: 100 / millisecGridSize + "%",
                        textAlign: "center",
                        overflow: "hidden"
                    })
                });
                var $buttonPanel = $dp.find(".ui-datepicker-buttonpane");
                if ($buttonPanel.length ? $buttonPanel.before($tp) : $dp.append($tp),
                this.$timeObj = $tp.find("#ui_tpicker_time_" + dp_id),
                null !== this.inst) {
                    var timeDefined = this.timeDefined;
                    this._onTimeChange(),
                    this.timeDefined = timeDefined
                }
                var onSelectDelegate = function() {
                    tp_inst._onSelectHandler()
                };
                if (this.hour_slider.bind("slidestop", onSelectDelegate),
                this.minute_slider.bind("slidestop", onSelectDelegate),
                this.second_slider.bind("slidestop", onSelectDelegate),
                this.millisec_slider.bind("slidestop", onSelectDelegate),
                this._defaults.addSliderAccess) {
                    var sliderAccessArgs = this._defaults.sliderAccessArgs;
                    setTimeout(function() {
                        if (0 == $tp.find(".ui-slider-access").length) {
                            $tp.find(".ui-slider:visible").sliderAccess(sliderAccessArgs);
                            var sliderAccessWidth = $tp.find(".ui-slider-access:eq(0)").outerWidth(!0);
                            sliderAccessWidth && $tp.find("table:visible").each(function() {
                                var $g = $(this)
                                  , oldWidth = $g.outerWidth()
                                  , oldMarginLeft = $g.css("marginLeft").toString().replace("%", "")
                                  , newWidth = oldWidth - sliderAccessWidth
                                  , newMarginLeft = oldMarginLeft * newWidth / oldWidth + "%";
                                $g.css({
                                    width: newWidth,
                                    marginLeft: newMarginLeft
                                })
                            })
                        }
                    }, 0)
                }
            }
        },
        _limitMinMaxDateTime: function(dp_inst, adjustSliders) {
            var o = this._defaults
              , dp_date = new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay);
            if (this._defaults.showTimepicker) {
                if (null !== $.datepicker._get(dp_inst, "minDateTime") && void 0 !== $.datepicker._get(dp_inst, "minDateTime") && dp_date) {
                    var minDateTime = $.datepicker._get(dp_inst, "minDateTime")
                      , minDateTimeDate = new Date(minDateTime.getFullYear(),minDateTime.getMonth(),minDateTime.getDate(),0,0,0,0);
                    null !== this.hourMinOriginal && null !== this.minuteMinOriginal && null !== this.secondMinOriginal && null !== this.millisecMinOriginal || (this.hourMinOriginal = o.hourMin,
                    this.minuteMinOriginal = o.minuteMin,
                    this.secondMinOriginal = o.secondMin,
                    this.millisecMinOriginal = o.millisecMin),
                    dp_inst.settings.timeOnly || minDateTimeDate.getTime() == dp_date.getTime() ? (this._defaults.hourMin = minDateTime.getHours(),
                    this.hour <= this._defaults.hourMin ? (this.hour = this._defaults.hourMin,
                    this._defaults.minuteMin = minDateTime.getMinutes(),
                    this.minute <= this._defaults.minuteMin ? (this.minute = this._defaults.minuteMin,
                    this._defaults.secondMin = minDateTime.getSeconds()) : this.second <= this._defaults.secondMin ? (this.second = this._defaults.secondMin,
                    this._defaults.millisecMin = minDateTime.getMilliseconds()) : (this.millisec < this._defaults.millisecMin && (this.millisec = this._defaults.millisecMin),
                    this._defaults.millisecMin = this.millisecMinOriginal)) : (this._defaults.minuteMin = this.minuteMinOriginal,
                    this._defaults.secondMin = this.secondMinOriginal,
                    this._defaults.millisecMin = this.millisecMinOriginal)) : (this._defaults.hourMin = this.hourMinOriginal,
                    this._defaults.minuteMin = this.minuteMinOriginal,
                    this._defaults.secondMin = this.secondMinOriginal,
                    this._defaults.millisecMin = this.millisecMinOriginal)
                }
                if (null !== $.datepicker._get(dp_inst, "maxDateTime") && void 0 !== $.datepicker._get(dp_inst, "maxDateTime") && dp_date) {
                    var maxDateTime = $.datepicker._get(dp_inst, "maxDateTime")
                      , maxDateTimeDate = new Date(maxDateTime.getFullYear(),maxDateTime.getMonth(),maxDateTime.getDate(),0,0,0,0);
                    null !== this.hourMaxOriginal && null !== this.minuteMaxOriginal && null !== this.secondMaxOriginal || (this.hourMaxOriginal = o.hourMax,
                    this.minuteMaxOriginal = o.minuteMax,
                    this.secondMaxOriginal = o.secondMax,
                    this.millisecMaxOriginal = o.millisecMax),
                    dp_inst.settings.timeOnly || maxDateTimeDate.getTime() == dp_date.getTime() ? (this._defaults.hourMax = maxDateTime.getHours(),
                    this.hour >= this._defaults.hourMax ? (this.hour = this._defaults.hourMax,
                    this._defaults.minuteMax = maxDateTime.getMinutes(),
                    this.minute >= this._defaults.minuteMax ? (this.minute = this._defaults.minuteMax,
                    this._defaults.secondMax = maxDateTime.getSeconds()) : this.second >= this._defaults.secondMax ? (this.second = this._defaults.secondMax,
                    this._defaults.millisecMax = maxDateTime.getMilliseconds()) : (this.millisec > this._defaults.millisecMax && (this.millisec = this._defaults.millisecMax),
                    this._defaults.millisecMax = this.millisecMaxOriginal)) : (this._defaults.minuteMax = this.minuteMaxOriginal,
                    this._defaults.secondMax = this.secondMaxOriginal,
                    this._defaults.millisecMax = this.millisecMaxOriginal)) : (this._defaults.hourMax = this.hourMaxOriginal,
                    this._defaults.minuteMax = this.minuteMaxOriginal,
                    this._defaults.secondMax = this.secondMaxOriginal,
                    this._defaults.millisecMax = this.millisecMaxOriginal)
                }
                if (void 0 !== adjustSliders && adjustSliders === !0) {
                    var hourMax = parseInt(this._defaults.hourMax - (this._defaults.hourMax - this._defaults.hourMin) % this._defaults.stepHour, 10)
                      , minMax = parseInt(this._defaults.minuteMax - (this._defaults.minuteMax - this._defaults.minuteMin) % this._defaults.stepMinute, 10)
                      , secMax = parseInt(this._defaults.secondMax - (this._defaults.secondMax - this._defaults.secondMin) % this._defaults.stepSecond, 10)
                      , millisecMax = parseInt(this._defaults.millisecMax - (this._defaults.millisecMax - this._defaults.millisecMin) % this._defaults.stepMillisec, 10);
                    this.hour_slider && this.hour_slider.slider("option", {
                        min: this._defaults.hourMin,
                        max: hourMax
                    }).slider("value", this.hour),
                    this.minute_slider && this.minute_slider.slider("option", {
                        min: this._defaults.minuteMin,
                        max: minMax
                    }).slider("value", this.minute),
                    this.second_slider && this.second_slider.slider("option", {
                        min: this._defaults.secondMin,
                        max: secMax
                    }).slider("value", this.second),
                    this.millisec_slider && this.millisec_slider.slider("option", {
                        min: this._defaults.millisecMin,
                        max: millisecMax
                    }).slider("value", this.millisec)
                }
            }
        },
        _onTimeChange: function() {
            var hour = this.hour_slider ? this.hour_slider.slider("value") : !1
              , minute = this.minute_slider ? this.minute_slider.slider("value") : !1
              , second = this.second_slider ? this.second_slider.slider("value") : !1
              , millisec = this.millisec_slider ? this.millisec_slider.slider("value") : !1
              , timezone = this.timezone_select ? this.timezone_select.val() : !1
              , o = this._defaults;
            "object" == typeof hour && (hour = !1),
            "object" == typeof minute && (minute = !1),
            "object" == typeof second && (second = !1),
            "object" == typeof millisec && (millisec = !1),
            "object" == typeof timezone && (timezone = !1),
            hour !== !1 && (hour = parseInt(hour, 10)),
            minute !== !1 && (minute = parseInt(minute, 10)),
            second !== !1 && (second = parseInt(second, 10)),
            millisec !== !1 && (millisec = parseInt(millisec, 10));
            var ampm = o[12 > hour ? "amNames" : "pmNames"][0]
              , hasChanged = hour != this.hour || minute != this.minute || second != this.second || millisec != this.millisec || this.ampm.length > 0 && 12 > hour != (-1 !== $.inArray(this.ampm.toUpperCase(), this.amNames)) || timezone != this.timezone;
            hasChanged && (hour !== !1 && (this.hour = hour),
            minute !== !1 && (this.minute = minute),
            second !== !1 && (this.second = second),
            millisec !== !1 && (this.millisec = millisec),
            timezone !== !1 && (this.timezone = timezone),
            this.inst || (this.inst = $.datepicker._getInst(this.$input[0])),
            this._limitMinMaxDateTime(this.inst, !0)),
            o.ampm && (this.ampm = ampm),
            this.formattedTime = $.datepicker.formatTime(this._defaults.timeFormat, this, this._defaults),
            this.$timeObj && this.$timeObj.text(this.formattedTime + o.timeSuffix),
            this.timeDefined = !0,
            hasChanged && this._updateDateTime()
        },
        _onSelectHandler: function() {
            var onSelect = this._defaults.onSelect
              , inputEl = this.$input ? this.$input[0] : null;
            onSelect && inputEl && onSelect.apply(inputEl, [this.formattedDateTime, this])
        },
        _formatTime: function(time, format) {
            time = time || {
                hour: this.hour,
                minute: this.minute,
                second: this.second,
                millisec: this.millisec,
                ampm: this.ampm,
                timezone: this.timezone
            };
            var tmptime = (format || this._defaults.timeFormat).toString();
            return tmptime = $.datepicker.formatTime(tmptime, time, this._defaults),
            arguments.length ? tmptime : void (this.formattedTime = tmptime)
        },
        _updateDateTime: function(dp_inst) {
            dp_inst = this.inst || dp_inst;
            var dt = $.datepicker._daylightSavingAdjust(new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay))
              , dateFmt = $.datepicker._get(dp_inst, "dateFormat")
              , formatCfg = $.datepicker._getFormatConfig(dp_inst)
              , timeAvailable = null !== dt && this.timeDefined;
            this.formattedDate = $.datepicker.formatDate(dateFmt, null === dt ? new Date : dt, formatCfg);
            var formattedDateTime = this.formattedDate;
            void 0 !== dp_inst.lastVal && dp_inst.lastVal.length > 0 && 0 === this.$input.val().length || (this._defaults.timeOnly === !0 ? formattedDateTime = this.formattedTime : this._defaults.timeOnly !== !0 && (this._defaults.alwaysSetTime || timeAvailable) && (formattedDateTime += this._defaults.separator + this.formattedTime + this._defaults.timeSuffix),
            this.formattedDateTime = formattedDateTime,
            this._defaults.showTimepicker ? this.$altInput && this._defaults.altFieldTimeOnly === !0 ? (this.$altInput.val(this.formattedTime),
            this.$input.val(this.formattedDate)) : this.$altInput ? (this.$altInput.val(formattedDateTime),
            this.$input.val(formattedDateTime)) : this.$input.val(formattedDateTime) : this.$input.val(this.formattedDate),
            this.$input.trigger("change"))
        }
    }),
    $.fn.extend({
        timepicker: function(o) {
            o = o || {};
            var tmp_args = arguments;
            return "object" == typeof o && (tmp_args[0] = $.extend(o, {
                timeOnly: !0
            })),
            $(this).each(function() {
                $.fn.datetimepicker.apply($(this), tmp_args)
            })
        },
        datetimepicker: function(o) {
            o = o || {};
            var tmp_args = arguments;
            return "string" == typeof o ? "getDate" == o ? $.fn.datepicker.apply($(this[0]), tmp_args) : this.each(function() {
                var $t = $(this);
                $t.datepicker.apply($t, tmp_args)
            }) : this.each(function() {
                var $t = $(this);
                $t.datepicker($.timepicker._newInst($t, o)._defaults)
            })
        }
    }),
    $.datepicker.formatTime = function(format, time, options) {
        options = options || {},
        options = $.extend($.timepicker._defaults, options),
        time = $.extend({
            hour: 0,
            minute: 0,
            second: 0,
            millisec: 0,
            timezone: "+0000"
        }, time);
        var tmptime = format
          , ampmName = options.amNames[0]
          , hour = parseInt(time.hour, 10);
        return options.ampm && (hour > 11 && (ampmName = options.pmNames[0],
        hour > 12 && (hour %= 12)),
        0 === hour && (hour = 12)),
        tmptime = tmptime.replace(/(?:hh?|mm?|ss?|[tT]{1,2}|[lz])/g, function(match) {
            switch (match.toLowerCase()) {
            case "hh":
                return ("0" + hour).slice(-2);
            case "h":
                return hour;
            case "mm":
                return ("0" + time.minute).slice(-2);
            case "m":
                return time.minute;
            case "ss":
                return ("0" + time.second).slice(-2);
            case "s":
                return time.second;
            case "l":
                return ("00" + time.millisec).slice(-3);
            case "z":
                return time.timezone;
            case "t":
            case "tt":
                return options.ampm ? (1 == match.length && (ampmName = ampmName.charAt(0)),
                "T" == match.charAt(0) ? ampmName.toUpperCase() : ampmName.toLowerCase()) : ""
            }
        }),
        tmptime = $.trim(tmptime)
    }
    ,
    $.datepicker._base_selectDate = $.datepicker._selectDate,
    $.datepicker._selectDate = function(id, dateStr) {
        var inst = this._getInst($(id)[0])
          , tp_inst = this._get(inst, "timepicker");
        tp_inst ? (tp_inst._limitMinMaxDateTime(inst, !0),
        inst.inline = inst.stay_open = !0,
        this._base_selectDate(id, dateStr),
        inst.inline = inst.stay_open = !1,
        this._notifyChange(inst),
        this._updateDatepicker(inst)) : this._base_selectDate(id, dateStr)
    }
    ,
    $.datepicker._base_updateDatepicker = $.datepicker._updateDatepicker,
    $.datepicker._updateDatepicker = function(inst) {
        var input = inst.input[0];
        if (!($.datepicker._curInst && $.datepicker._curInst != inst && $.datepicker._datepickerShowing && $.datepicker._lastInput != input || "boolean" == typeof inst.stay_open && inst.stay_open !== !1)) {
            this._base_updateDatepicker(inst);
            var tp_inst = this._get(inst, "timepicker");
            tp_inst && tp_inst._addTimePicker(inst)
        }
    }
    ,
    $.datepicker._base_doKeyPress = $.datepicker._doKeyPress,
    $.datepicker._doKeyPress = function(event) {
        var inst = $.datepicker._getInst(event.target)
          , tp_inst = $.datepicker._get(inst, "timepicker");
        if (tp_inst && $.datepicker._get(inst, "constrainInput")) {
            var ampm = tp_inst._defaults.ampm
              , dateChars = $.datepicker._possibleChars($.datepicker._get(inst, "dateFormat"))
              , datetimeChars = tp_inst._defaults.timeFormat.toString().replace(/[hms]/g, "").replace(/TT/g, ampm ? "APM" : "").replace(/Tt/g, ampm ? "AaPpMm" : "").replace(/tT/g, ampm ? "AaPpMm" : "").replace(/T/g, ampm ? "AP" : "").replace(/tt/g, ampm ? "apm" : "").replace(/t/g, ampm ? "ap" : "") + " " + tp_inst._defaults.separator + tp_inst._defaults.timeSuffix + (tp_inst._defaults.showTimezone ? tp_inst._defaults.timezoneList.join("") : "") + tp_inst._defaults.amNames.join("") + tp_inst._defaults.pmNames.join("") + dateChars
              , chr = String.fromCharCode(void 0 === event.charCode ? event.keyCode : event.charCode);
            return event.ctrlKey || " " > chr || !dateChars || datetimeChars.indexOf(chr) > -1
        }
        return $.datepicker._base_doKeyPress(event)
    }
    ,
    $.datepicker._base_doKeyUp = $.datepicker._doKeyUp,
    $.datepicker._doKeyUp = function(event) {
        var inst = $.datepicker._getInst(event.target)
          , tp_inst = $.datepicker._get(inst, "timepicker");
        if (tp_inst && tp_inst._defaults.timeOnly && inst.input.val() != inst.lastVal)
            try {
                $.datepicker._updateDatepicker(inst)
            } catch (err) {
                $.datepicker.log(err)
            }
        return $.datepicker._base_doKeyUp(event)
    }
    ,
    $.datepicker._base_gotoToday = $.datepicker._gotoToday,
    $.datepicker._gotoToday = function(id) {
        var inst = this._getInst($(id)[0])
          , $dp = inst.dpDiv;
        this._base_gotoToday(id);
        var now = new Date
          , tp_inst = this._get(inst, "timepicker");
        if (tp_inst && tp_inst._defaults.showTimezone && tp_inst.timezone_select) {
            var tzoffset = now.getTimezoneOffset()
              , tzsign = tzoffset > 0 ? "-" : "+";
            tzoffset = Math.abs(tzoffset);
            var tzmin = tzoffset % 60;
            tzoffset = tzsign + ("0" + (tzoffset - tzmin) / 60).slice(-2) + ("0" + tzmin).slice(-2),
            tp_inst._defaults.timezoneIso8609 && (tzoffset = tzoffset.substring(0, 3) + ":" + tzoffset.substring(3)),
            tp_inst.timezone_select.val(tzoffset)
        }
        this._setTime(inst, now),
        $(".ui-datepicker-today", $dp).click()
    }
    ,
    $.datepicker._disableTimepickerDatepicker = function(target) {
        var inst = this._getInst(target)
          , tp_inst = this._get(inst, "timepicker");
        $(target).datepicker("getDate"),
        tp_inst && (tp_inst._defaults.showTimepicker = !1,
        tp_inst._updateDateTime(inst))
    }
    ,
    $.datepicker._enableTimepickerDatepicker = function(target) {
        var inst = this._getInst(target)
          , tp_inst = this._get(inst, "timepicker");
        $(target).datepicker("getDate"),
        tp_inst && (tp_inst._defaults.showTimepicker = !0,
        tp_inst._addTimePicker(inst),
        tp_inst._updateDateTime(inst))
    }
    ,
    $.datepicker._setTime = function(inst, date) {
        var tp_inst = this._get(inst, "timepicker");
        if (tp_inst) {
            var defaults = tp_inst._defaults
              , hour = date ? date.getHours() : defaults.hour
              , minute = date ? date.getMinutes() : defaults.minute
              , second = date ? date.getSeconds() : defaults.second
              , millisec = date ? date.getMilliseconds() : defaults.millisec;
            (hour < defaults.hourMin || hour > defaults.hourMax || minute < defaults.minuteMin || minute > defaults.minuteMax || second < defaults.secondMin || second > defaults.secondMax || millisec < defaults.millisecMin || millisec > defaults.millisecMax) && (hour = defaults.hourMin,
            minute = defaults.minuteMin,
            second = defaults.secondMin,
            millisec = defaults.millisecMin),
            tp_inst.hour = hour,
            tp_inst.minute = minute,
            tp_inst.second = second,
            tp_inst.millisec = millisec,
            tp_inst.hour_slider && tp_inst.hour_slider.slider("value", hour),
            tp_inst.minute_slider && tp_inst.minute_slider.slider("value", minute),
            tp_inst.second_slider && tp_inst.second_slider.slider("value", second),
            tp_inst.millisec_slider && tp_inst.millisec_slider.slider("value", millisec),
            tp_inst._onTimeChange(),
            tp_inst._updateDateTime(inst)
        }
    }
    ,
    $.datepicker._setTimeDatepicker = function(target, date, withDate) {
        var inst = this._getInst(target)
          , tp_inst = this._get(inst, "timepicker");
        if (tp_inst) {
            this._setDateFromField(inst);
            var tp_date;
            date && ("string" == typeof date ? (tp_inst._parseTime(date, withDate),
            tp_date = new Date,
            tp_date.setHours(tp_inst.hour, tp_inst.minute, tp_inst.second, tp_inst.millisec)) : tp_date = new Date(date.getTime()),
            "Invalid Date" == tp_date.toString() && (tp_date = void 0),
            this._setTime(inst, tp_date))
        }
    }
    ,
    $.datepicker._base_setDateDatepicker = $.datepicker._setDateDatepicker,
    $.datepicker._setDateDatepicker = function(target, date) {
        var inst = this._getInst(target)
          , tp_date = date instanceof Date ? new Date(date.getTime()) : date;
        this._updateDatepicker(inst),
        this._base_setDateDatepicker.apply(this, arguments),
        this._setTimeDatepicker(target, tp_date, !0)
    }
    ,
    $.datepicker._base_getDateDatepicker = $.datepicker._getDateDatepicker,
    $.datepicker._getDateDatepicker = function(target, noDefault) {
        var inst = this._getInst(target)
          , tp_inst = this._get(inst, "timepicker");
        if (tp_inst) {
            this._setDateFromField(inst, noDefault);
            var date = this._getDate(inst);
            return date && tp_inst._parseTime($(target).val(), tp_inst.timeOnly) && date.setHours(tp_inst.hour, tp_inst.minute, tp_inst.second, tp_inst.millisec),
            date
        }
        return this._base_getDateDatepicker(target, noDefault)
    }
    ,
    $.datepicker._base_parseDate = $.datepicker.parseDate,
    $.datepicker.parseDate = function(format, value, settings) {
        var date;
        try {
            date = this._base_parseDate(format, value, settings)
        } catch (err) {
            if (!(err.indexOf(":") >= 0))
                throw err;
            date = this._base_parseDate(format, value.substring(0, value.length - (err.length - err.indexOf(":") - 2)), settings)
        }
        return date
    }
    ,
    $.datepicker._base_formatDate = $.datepicker._formatDate,
    $.datepicker._formatDate = function(inst, day, month, year) {
        var tp_inst = this._get(inst, "timepicker");
        if (tp_inst) {
            if (day) {
                this._base_formatDate(inst, day, month, year)
            }
            return tp_inst._updateDateTime(inst),
            tp_inst.$input.val()
        }
        return this._base_formatDate(inst)
    }
    ,
    $.datepicker._base_optionDatepicker = $.datepicker._optionDatepicker,
    $.datepicker._optionDatepicker = function(target, name, value) {
        var inst = this._getInst(target)
          , tp_inst = this._get(inst, "timepicker");
        if (tp_inst) {
            var min, max, onselect;
            "string" == typeof name ? "minDate" === name || "minDateTime" === name ? min = value : "maxDate" === name || "maxDateTime" === name ? max = value : "onSelect" === name && (onselect = value) : "object" == typeof name && (name.minDate ? min = name.minDate : name.minDateTime ? min = name.minDateTime : name.maxDate ? max = name.maxDate : name.maxDateTime && (max = name.maxDateTime)),
            min ? (min = 0 == min ? new Date : new Date(min),
            tp_inst._defaults.minDate = min,
            tp_inst._defaults.minDateTime = min) : max ? (max = 0 == max ? new Date : new Date(max),
            tp_inst._defaults.maxDate = max,
            tp_inst._defaults.maxDateTime = max) : onselect && (tp_inst._defaults.onSelect = onselect)
        }
        return void 0 === value ? this._base_optionDatepicker(target, name) : this._base_optionDatepicker(target, name, value)
    }
    ,
    $.timepicker = new Timepicker,
    $.timepicker.version = "0.9.9"
}(jQuery),
function($) {
    function _wls(n, v) {
        var c;
        if ("string" == typeof n && "string" == typeof v)
            return localStorage[n] = v,
            !0;
        if ("object" == typeof n && "undefined" == typeof v) {
            for (c in n)
                n.hasOwnProperty(c) && (localStorage[c] = n[c]);
            return !0
        }
        return !1
    }
    function wc(n, v) {
        var dt, e, c;
        if (dt = new Date,
        dt.setTime(dt.getTime() + 31536e6),
        e = "; expires=" + dt.toGMTString(),
        "string" == typeof n && "string" == typeof v)
            return document.cookie = n + "=" + v + e + "; path=/",
            !0;
        if ("object" == typeof n && "undefined" == typeof v) {
            for (c in n)
                n.hasOwnProperty(c) && (document.cookie = c + "=" + n[c] + e + "; path=/");
            return !0
        }
        return !1
    }
    function wls(n, v) {
        try {
            return _wls(n, v)
        } catch (e) {
            return wc(n, v)
        }
    }
    function _rls(n) {
        return localStorage[n]
    }
    function rc(n) {
        var nn, ca, i, c;
        for (nn = n + "=",
        ca = document.cookie.split(";"),
        i = 0; i < ca.length; i++) {
            for (c = ca[i]; " " === c.charAt(0); )
                c = c.substring(1, c.length);
            if (0 === c.indexOf(nn))
                return c.substring(nn.length, c.length)
        }
        return null
    }
    function rls(n) {
        try {
            return _rls(n)
        } catch (e) {
            return rc(n)
        }
    }
    function _dls(n) {
        return delete localStorage[n]
    }
    function dc(n) {
        return wc(n, "", -1)
    }
    function dls(n) {
        try {
            return _dls(n)
        } catch (e) {
            return dc(n)
        }
    }
    var isLS = "undefined" != typeof window.localStorage;
    $.extend({
        Storage: {
            set: isLS ? wls : wc,
            get: isLS ? rls : rc,
            remove: isLS ? dls : dc
        }
    })
}(jQuery),
!function(a) {
    "function" == typeof define && define.amd ? define(["jquery"], function(b) {
        a(b)
    }) : "object" == typeof module && "object" == typeof module.exports ? module.exports = a(require("jquery")) : a(window.jQuery)
}(function(a) {
    "use strict";
    function b(a) {
        void 0 === a && (a = window.navigator.userAgent),
        a = a.toLowerCase();
        var b = /(edge)\/([\w.]+)/.exec(a) || /(opr)[\/]([\w.]+)/.exec(a) || /(chrome)[ \/]([\w.]+)/.exec(a) || /(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a) || /(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a) || /(webkit)[ \/]([\w.]+)/.exec(a) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a) || /(msie) ([\w.]+)/.exec(a) || a.indexOf("trident") >= 0 && /(rv)(?::| )([\w.]+)/.exec(a) || a.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a) || []
          , c = /(ipad)/.exec(a) || /(ipod)/.exec(a) || /(iphone)/.exec(a) || /(kindle)/.exec(a) || /(silk)/.exec(a) || /(android)/.exec(a) || /(windows phone)/.exec(a) || /(win)/.exec(a) || /(mac)/.exec(a) || /(linux)/.exec(a) || /(cros)/.exec(a) || /(playbook)/.exec(a) || /(bb)/.exec(a) || /(blackberry)/.exec(a) || []
          , d = {}
          , e = {
            browser: b[5] || b[3] || b[1] || "",
            version: b[2] || b[4] || "0",
            versionNumber: b[4] || b[2] || "0",
            platform: c[0] || ""
        };
        if (e.browser && (d[e.browser] = !0,
        d.version = e.version,
        d.versionNumber = parseInt(e.versionNumber, 10)),
        e.platform && (d[e.platform] = !0),
        (d.android || d.bb || d.blackberry || d.ipad || d.iphone || d.ipod || d.kindle || d.playbook || d.silk || d["windows phone"]) && (d.mobile = !0),
        (d.cros || d.mac || d.linux || d.win) && (d.desktop = !0),
        (d.chrome || d.opr || d.safari) && (d.webkit = !0),
        d.rv || d.edge) {
            var f = "msie";
            e.browser = f,
            d[f] = !0
        }
        if (d.safari && d.blackberry) {
            var g = "blackberry";
            e.browser = g,
            d[g] = !0
        }
        if (d.safari && d.playbook) {
            var h = "playbook";
            e.browser = h,
            d[h] = !0
        }
        if (d.bb) {
            var i = "blackberry";
            e.browser = i,
            d[i] = !0
        }
        if (d.opr) {
            var j = "opera";
            e.browser = j,
            d[j] = !0
        }
        if (d.safari && d.android) {
            var k = "android";
            e.browser = k,
            d[k] = !0
        }
        if (d.safari && d.kindle) {
            var l = "kindle";
            e.browser = l,
            d[l] = !0
        }
        if (d.safari && d.silk) {
            var m = "silk";
            e.browser = m,
            d[m] = !0
        }
        return d.name = e.browser,
        d.platform = e.platform,
        d
    }
    return window.jQBrowser = b(window.navigator.userAgent),
    window.jQBrowser.uaMatch = b,
    a && (a.browser = window.jQBrowser),
    window.jQBrowser
}),
function($) {
    $.fn.editable = function(target, options) {
        if ("disable" == target)
            return void $(this).data("disabled.editable", !0);
        if ("enable" == target)
            return void $(this).data("disabled.editable", !1);
        if ("destroy" == target)
            return void $(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");
        var settings = $.extend({}, $.fn.editable.defaults, {
            target: target
        }, options)
          , plugin = $.editable.types[settings.type].plugin || function() {}
          , submit = $.editable.types[settings.type].submit || function() {}
          , buttons = $.editable.types[settings.type].buttons || $.editable.types.defaults.buttons
          , content = $.editable.types[settings.type].content || $.editable.types.defaults.content
          , element = $.editable.types[settings.type].element || $.editable.types.defaults.element
          , reset = $.editable.types[settings.type].reset || $.editable.types.defaults.reset
          , callback = settings.callback || function() {}
          , onedit = settings.onedit || function() {}
          , onsubmit = settings.onsubmit || function() {}
          , onreset = settings.onreset || function() {}
          , onerror = settings.onerror || reset;
        return settings.tooltip && $(this).attr("title", settings.tooltip),
        settings.autowidth = "auto" == settings.width,
        settings.autoheight = "auto" == settings.height,
        this.each(function() {
            var self = this
              , savedwidth = $(self).width()
              , savedheight = $(self).height();
            $(this).data("event.editable", settings.event),
            $.trim($(this).html()) || $(this).html(settings.placeholder),
            $(this).bind(settings.event, function(e) {
                if (!0 !== $(this).data("disabled.editable") && !self.editing && !1 !== onedit.apply(this, [settings, self])) {
                    e.preventDefault(),
                    e.stopPropagation(),
                    settings.tooltip && $(self).removeAttr("title"),
                    0 == $(self).width() ? (settings.width = savedwidth,
                    settings.height = savedheight) : ("none" != settings.width && (settings.width = settings.autowidth ? $(self).width() : settings.width),
                    "none" != settings.height && (settings.height = settings.autoheight ? $(self).height() : settings.height)),
                    $(this).html().toLowerCase().replace(/(;|")/g, "") == settings.placeholder.toLowerCase().replace(/(;|")/g, "") && $(this).html(""),
                    self.editing = !0,
                    self.revert = $(self).html(),
                    $(self).html("");
                    var form = $("<form />");
                    settings.cssclass && ("inherit" == settings.cssclass ? form.attr("class", $(self).attr("class")) : form.attr("class", settings.cssclass)),
                    settings.style && ("inherit" == settings.style ? (form.attr("style", $(self).attr("style")),
                    form.css("display", $(self).css("display"))) : form.attr("style", settings.style));
                    var input_content, input = element.apply(form, [settings, self]);
                    if (settings.loadurl) {
                        var t = setTimeout(function() {
                            input.disabled = !0,
                            content.apply(form, [settings.loadtext, settings, self])
                        }, 100)
                          , loaddata = {};
                        loaddata[settings.id] = self.id,
                        $.isFunction(settings.loaddata) ? $.extend(loaddata, settings.loaddata.apply(self, [self.revert, settings])) : $.extend(loaddata, settings.loaddata),
                        $.ajax({
                            type: settings.loadtype,
                            url: settings.loadurl,
                            data: loaddata,
                            async: !1,
                            success: function(result) {
                                window.clearTimeout(t),
                                input_content = result,
                                input.disabled = !1
                            }
                        })
                    } else
                        settings.data ? (input_content = settings.data,
                        $.isFunction(settings.data) && (input_content = settings.data.apply(self, [self.revert, settings]))) : input_content = self.revert;
                    content.apply(form, [input_content, settings, self]),
                    input.attr("name", settings.name),
                    buttons.apply(form, [settings, self]),
                    $(self).append(form),
                    plugin.apply(form, [settings, self]),
                    $(":input:visible:enabled:first", form).focus(),
                    settings.select && input.select(),
                    input.keydown(function(e) {
                        27 == e.keyCode && (e.preventDefault(),
                        reset.apply(form, [settings, self]))
                    });
                    var t;
                    "cancel" == settings.onblur ? input.blur(function() {
                        t = setTimeout(function() {
                            reset.apply(form, [settings, self])
                        }, 500)
                    }) : "submit" == settings.onblur ? input.blur(function() {
                        t = setTimeout(function() {
                            form.submit()
                        }, 200)
                    }) : $.isFunction(settings.onblur) ? input.blur(function() {
                        settings.onblur.apply(self, [input.val(), settings])
                    }) : input.blur(function() {}),
                    form.submit(function(e) {
                        if (t && clearTimeout(t),
                        e.preventDefault(),
                        !1 !== onsubmit.apply(form, [settings, self]) && !1 !== submit.apply(form, [settings, self]))
                            if ($.isFunction(settings.target)) {
                                var str = settings.target.apply(self, [input.val(), settings]);
                                $(self).html(str),
                                self.editing = !1,
                                callback.apply(self, [self.innerHTML, settings]),
                                $.trim($(self).html()) || $(self).html(settings.placeholder)
                            } else {
                                var submitdata = {};
                                submitdata[settings.name] = input.val(),
                                submitdata[settings.id] = self.id,
                                $.isFunction(settings.submitdata) ? $.extend(submitdata, settings.submitdata.apply(self, [self.revert, settings])) : $.extend(submitdata, settings.submitdata),
                                "PUT" == settings.method && (submitdata._method = "put"),
                                $(self).html(settings.indicator);
                                var ajaxoptions = {
                                    type: "POST",
                                    data: submitdata,
                                    dataType: "html",
                                    url: settings.target,
                                    success: function(result) {
                                        "html" == ajaxoptions.dataType && $(self).html(result),
                                        self.editing = !1,
                                        callback.apply(self, [result, settings]),
                                        $.trim($(self).html()) || $(self).html(settings.placeholder)
                                    },
                                    error: function(xhr) {
                                        onerror.apply(form, [settings, self, xhr])
                                    }
                                };
                                $.extend(ajaxoptions, settings.ajaxoptions),
                                $.ajax(ajaxoptions)
                            }
                        return $(self).attr("title", settings.tooltip),
                        !1
                    })
                }
            }),
            this.reset = function(form) {
                this.editing && !1 !== onreset.apply(form, [settings, self]) && ($(self).html(self.revert),
                self.editing = !1,
                $.trim($(self).html()) || $(self).html(settings.placeholder),
                settings.tooltip && $(self).attr("title", settings.tooltip))
            }
        })
    }
    ,
    $.editable = {
        types: {
            defaults: {
                element: function() {
                    var input = $('<input type="hidden"></input>');
                    return $(this).append(input),
                    input
                },
                content: function(string) {
                    $(":input:first", this).val(string)
                },
                reset: function(settings, original) {
                    original.reset(this)
                },
                buttons: function(settings, original) {
                    var form = this;
                    if (settings.submit) {
                        if (settings.submit.match(/>$/))
                            var submit = $(settings.submit).click(function() {
                                "submit" != submit.attr("type") && form.submit()
                            });
                        else {
                            var submit = $('<button type="submit" />');
                            submit.html(settings.submit)
                        }
                        $(this).append(submit)
                    }
                    if (settings.cancel) {
                        if (settings.cancel.match(/>$/))
                            var cancel = $(settings.cancel);
                        else {
                            var cancel = $('<button type="cancel" />');
                            cancel.html(settings.cancel)
                        }
                        $(this).append(cancel),
                        $(cancel).click(function() {
                            if ($.isFunction($.editable.types[settings.type].reset))
                                var reset = $.editable.types[settings.type].reset;
                            else
                                var reset = $.editable.types.defaults.reset;
                            return reset.apply(form, [settings, original]),
                            !1
                        })
                    }
                }
            },
            text: {
                element: function(settings) {
                    var input = $("<input />");
                    return "none" != settings.width && input.width(settings.width),
                    "none" != settings.height && input.height(settings.height),
                    input.attr("autocomplete", "off"),
                    $(this).append(input),
                    input
                }
            },
            textarea: {
                element: function(settings) {
                    var textarea = $("<textarea />");
                    return settings.rows ? textarea.attr("rows", settings.rows) : "none" != settings.height && textarea.height(settings.height),
                    settings.cols ? textarea.attr("cols", settings.cols) : "none" != settings.width && textarea.width(settings.width),
                    $(this).append(textarea),
                    textarea
                }
            },
            select: {
                element: function() {
                    var select = $("<select />");
                    return $(this).append(select),
                    select
                },
                content: function(data, settings, original) {
                    if (String == data.constructor)
                        eval("var json = " + data);
                    else
                        var json = data;
                    for (var key in json)
                        if (json.hasOwnProperty(key) && "selected" != key) {
                            var option = $("<option />").val(key).append(json[key]);
                            $("select", this).append(option)
                        }
                    $("select", this).children().each(function() {
                        $(this).val() != json.selected && $(this).text() != $.trim(original.revert) || $(this).attr("selected", "selected")
                    })
                }
            }
        },
        addInputType: function(name, input) {
            $.editable.types[name] = input
        }
    },
    $.fn.editable.defaults = {
        name: "value",
        id: "id",
        type: "text",
        width: "auto",
        height: "auto",
        event: "click.editable",
        onblur: "cancel",
        loadtype: "GET",
        loadtext: "Loading...",
        placeholder: "Click to edit",
        loaddata: {},
        submitdata: {},
        ajaxoptions: {}
    }
}(jQuery),
function(factory) {
    "use strict";
    "function" == typeof define && define.amd ? define(["jquery"], factory) : factory(jQuery)
}(function($) {
    "use strict";
    function _pivotfilter(fn, context) {
        var i, value, length, result = [];
        if (!this || "function" != typeof fn || fn instanceof RegExp)
            throw new TypeError;
        for (length = this.length,
        i = 0; length > i; i++)
            if (this.hasOwnProperty(i) && (value = this[i],
            fn.call(context, value, i, this))) {
                result.push(value);
                break
            }
        return result
    }
    $.jgrid = $.jgrid || {},
    $.jgrid.hasOwnProperty("defaults") || ($.jgrid.defaults = {}),
    $.extend($.jgrid, {
        version: "4.8.2",
        htmlDecode: function(value) {
            return value && ("&nbsp;" === value || "&#160;" === value || 1 === value.length && 160 === value.charCodeAt(0)) ? "" : value ? String(value).replace(/&gt;/g, ">").replace(/&lt;/g, "<").replace(/&quot;/g, '"').replace(/&amp;/g, "&") : value
        },
        htmlEncode: function(value) {
            return value ? String(value).replace(/&/g, "&amp;").replace(/\"/g, "&quot;").replace(/</g, "&lt;").replace(/>/g, "&gt;") : value
        },
        template: function(format) {
            var j, args = $.makeArray(arguments).slice(1), al = args.length;
            return null == format && (format = ""),
            format.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g, function(m, i) {
                if (!isNaN(parseInt(i, 10)))
                    return args[parseInt(i, 10)];
                for (j = 0; al > j; j++)
                    if ($.isArray(args[j]))
                        for (var nmarr = args[j], k = nmarr.length; k--; )
                            if (i === nmarr[k].nm)
                                return nmarr[k].v
            })
        },
        msie: "Microsoft Internet Explorer" === navigator.appName,
        msiever: function() {
            var rv = -1
              , ua = navigator.userAgent
              , re = new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");
            return null != re.exec(ua) && (rv = parseFloat(RegExp.$1)),
            rv
        },
        getCellIndex: function(cell) {
            var c = $(cell);
            return c.is("tr") ? -1 : (c = (c.is("td") || c.is("th") ? c : c.closest("td,th"))[0],
            $.jgrid.msie ? $.inArray(c, c.parentNode.cells) : c.cellIndex)
        },
        stripHtml: function(v) {
            v = String(v);
            var regexp = /<("[^"]*"|'[^']*'|[^'">])*>/gi;
            return v ? (v = v.replace(regexp, ""),
            v && "&nbsp;" !== v && "&#160;" !== v ? v.replace(/\"/g, "'") : "") : v
        },
        stripPref: function(pref, id) {
            var obj = $.type(pref);
            return "string" !== obj && "number" !== obj || (pref = String(pref),
            id = "" !== pref ? String(id).replace(String(pref), "") : id),
            id
        },
        parse: function(jsonString) {
            var js = jsonString;
            return "while(1);" === js.substr(0, 9) && (js = js.substr(9)),
            "/*" === js.substr(0, 2) && (js = js.substr(2, js.length - 4)),
            js || (js = "{}"),
            $.jgrid.useJSON === !0 && "object" == typeof JSON && "function" == typeof JSON.parse ? JSON.parse(js) : eval("(" + js + ")")
        },
        parseDate: function(format, date, newformat, opts) {
            var dM, k, hl, token = /\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g, timezone = /\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g, timezoneClip = /[^-+\dA-Z]/g, msDateRegExp = new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"), msMatch = "string" == typeof date ? date.match(msDateRegExp) : null, pad = function(value, length) {
                for (value = String(value),
                length = parseInt(length, 10) || 2; value.length < length; )
                    value = "0" + value;
                return value
            }, ts = {
                m: 1,
                d: 1,
                y: 1970,
                h: 0,
                i: 0,
                s: 0,
                u: 0
            }, timestamp = 0, h12to24 = function(ampm, h) {
                return 0 === ampm ? 12 === h && (h = 0) : 12 !== h && (h += 12),
                h
            }, offset = 0;
            if (void 0 === opts && (opts = $.jgrid.getRegional(this, "formatter.date")),
            void 0 === opts.parseRe && (opts.parseRe = /[#%\\\/:_;.,\t\s-]/),
            opts.masks.hasOwnProperty(format) && (format = opts.masks[format]),
            date && null != date)
                if (isNaN(date - 0) || "u" !== String(format).toLowerCase())
                    if (date.constructor === Date)
                        timestamp = date;
                    else if (null !== msMatch)
                        timestamp = new Date(parseInt(msMatch[1], 10)),
                        msMatch[3] && (offset = 60 * Number(msMatch[5]) + Number(msMatch[6]),
                        offset *= "-" === msMatch[4] ? 1 : -1,
                        offset -= timestamp.getTimezoneOffset(),
                        timestamp.setTime(Number(Number(timestamp) + 60 * offset * 1e3)));
                    else {
                        for ("ISO8601Long" === opts.srcformat && "Z" === date.charAt(date.length - 1) && (offset -= (new Date).getTimezoneOffset()),
                        date = String(date).replace(/\T/g, "#").replace(/\t/, "%").split(opts.parseRe),
                        format = format.replace(/\T/g, "#").replace(/\t/, "%").split(opts.parseRe),
                        k = 0,
                        hl = format.length; hl > k; k++) {
                            switch (format[k]) {
                            case "M":
                                dM = $.inArray(date[k], opts.monthNames),
                                -1 !== dM && 12 > dM && (date[k] = dM + 1,
                                ts.m = date[k]);
                                break;
                            case "F":
                                dM = $.inArray(date[k], opts.monthNames, 12),
                                -1 !== dM && dM > 11 && (date[k] = dM + 1 - 12,
                                ts.m = date[k]);
                                break;
                            case "n":
                                format[k] = "m";
                                break;
                            case "j":
                                format[k] = "d";
                                break;
                            case "a":
                                dM = $.inArray(date[k], opts.AmPm),
                                -1 !== dM && 2 > dM && date[k] === opts.AmPm[dM] && (date[k] = dM,
                                ts.h = h12to24(date[k], ts.h));
                                break;
                            case "A":
                                dM = $.inArray(date[k], opts.AmPm),
                                -1 !== dM && dM > 1 && date[k] === opts.AmPm[dM] && (date[k] = dM - 2,
                                ts.h = h12to24(date[k], ts.h));
                                break;
                            case "g":
                                ts.h = parseInt(date[k], 10)
                            }
                            void 0 !== date[k] && (ts[format[k].toLowerCase()] = parseInt(date[k], 10))
                        }
                        if (ts.f && (ts.m = ts.f),
                        0 === ts.m && 0 === ts.y && 0 === ts.d)
                            return "&#160;";
                        ts.m = parseInt(ts.m, 10) - 1;
                        var ty = ts.y;
                        ty >= 70 && 99 >= ty ? ts.y = 1900 + ts.y : ty >= 0 && 69 >= ty && (ts.y = 2e3 + ts.y),
                        timestamp = new Date(ts.y,ts.m,ts.d,ts.h,ts.i,ts.s,ts.u),
                        offset > 0 && timestamp.setTime(Number(Number(timestamp) + 60 * offset * 1e3))
                    }
                else
                    timestamp = new Date(1e3 * parseFloat(date));
            else
                timestamp = new Date(ts.y,ts.m,ts.d,ts.h,ts.i,ts.s,ts.u);
            if (opts.userLocalTime && 0 === offset && (offset -= (new Date).getTimezoneOffset(),
            offset > 0 && timestamp.setTime(Number(Number(timestamp) + 60 * offset * 1e3))),
            void 0 === newformat)
                return timestamp;
            opts.masks.hasOwnProperty(newformat) ? newformat = opts.masks[newformat] : newformat || (newformat = "Y-m-d");
            var G = timestamp.getHours()
              , i = timestamp.getMinutes()
              , j = timestamp.getDate()
              , n = timestamp.getMonth() + 1
              , o = timestamp.getTimezoneOffset()
              , s = timestamp.getSeconds()
              , u = timestamp.getMilliseconds()
              , w = timestamp.getDay()
              , Y = timestamp.getFullYear()
              , N = (w + 6) % 7 + 1
              , z = (new Date(Y,n - 1,j) - new Date(Y,0,1)) / 864e5
              , flags = {
                d: pad(j),
                D: opts.dayNames[w],
                j: j,
                l: opts.dayNames[w + 7],
                N: N,
                S: opts.S(j),
                w: w,
                z: z,
                W: 5 > N ? Math.floor((z + N - 1) / 7) + 1 : Math.floor((z + N - 1) / 7) || ((new Date(Y - 1,0,1).getDay() + 6) % 7 < 4 ? 53 : 52),
                F: opts.monthNames[n - 1 + 12],
                m: pad(n),
                M: opts.monthNames[n - 1],
                n: n,
                t: "?",
                L: "?",
                o: "?",
                Y: Y,
                y: String(Y).substring(2),
                a: 12 > G ? opts.AmPm[0] : opts.AmPm[1],
                A: 12 > G ? opts.AmPm[2] : opts.AmPm[3],
                B: "?",
                g: G % 12 || 12,
                G: G,
                h: pad(G % 12 || 12),
                H: pad(G),
                i: pad(i),
                s: pad(s),
                u: u,
                e: "?",
                I: "?",
                O: (o > 0 ? "-" : "+") + pad(100 * Math.floor(Math.abs(o) / 60) + Math.abs(o) % 60, 4),
                P: "?",
                T: (String(timestamp).match(timezone) || [""]).pop().replace(timezoneClip, ""),
                Z: "?",
                c: "?",
                r: "?",
                U: Math.floor(timestamp / 1e3)
            };
            return newformat.replace(token, function($0) {
                return flags.hasOwnProperty($0) ? flags[$0] : $0.substring(1)
            })
        },
        jqID: function(sid) {
            return String(sid).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g, "\\$&")
        },
        guid: 1,
        uidPref: "jqg",
        randId: function(prefix) {
            return (prefix || $.jgrid.uidPref) + $.jgrid.guid++
        },
        getAccessor: function(obj, expr) {
            var ret, p, i, prm = [];
            if ("function" == typeof expr)
                return expr(obj);
            if (ret = obj[expr],
            void 0 === ret)
                try {
                    if ("string" == typeof expr && (prm = expr.split(".")),
                    i = prm.length)
                        for (ret = obj; ret && i--; )
                            p = prm.shift(),
                            ret = ret[p]
                } catch (e) {}
            return ret
        },
        getXmlData: function(obj, expr, returnObj) {
            var ret, m = "string" == typeof expr ? expr.match(/^(.*)\[(\w+)\]$/) : null;
            return "function" == typeof expr ? expr(obj) : m && m[2] ? m[1] ? $(m[1], obj).attr(m[2]) : $(obj).attr(m[2]) : (ret = $(expr, obj),
            returnObj ? ret : ret.length > 0 ? $(ret).text() : void 0)
        },
        cellWidth: function() {
            var $testDiv = $("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div>")
              , testCell = $testDiv.appendTo("body").find("td").width();
            return $testDiv.remove(),
            Math.abs(testCell - 5) > .1
        },
        isLocalStorage: function() {
            try {
                return "localStorage"in window && null !== window.localStorage
            } catch (e) {
                return !1
            }
        },
        getRegional: function(inst, param, def_val) {
            var ret;
            return void 0 !== def_val ? def_val : (inst.p && inst.p.regional && $.jgrid.regional && (ret = $.jgrid.getAccessor($.jgrid.regional[inst.p.regional] || {}, param)),
            void 0 === ret && (ret = $.jgrid.getAccessor($.jgrid, param)),
            ret)
        },
        cell_width: !0,
        ajaxOptions: {},
        from: function(source) {
            var $t = this
              , QueryObject = function(d, q) {
                "string" == typeof d && (d = $.data(d));
                var self = this
                  , _data = d
                  , _usecase = !0
                  , _trim = !1
                  , _query = q
                  , _stripNum = /[\$,%]/g
                  , _lastCommand = null
                  , _lastField = null
                  , _orDepth = 0
                  , _negate = !1
                  , _queuedOperator = ""
                  , _sorting = []
                  , _useProperties = !0;
                if ("object" != typeof d || !d.push)
                    throw "data provides is not an array";
                return d.length > 0 && (_useProperties = "object" == typeof d[0]),
                this._hasData = function() {
                    return null === _data ? !1 : 0 !== _data.length
                }
                ,
                this._getStr = function(s) {
                    var phrase = [];
                    return _trim && phrase.push("jQuery.trim("),
                    phrase.push("String(" + s + ")"),
                    _trim && phrase.push(")"),
                    _usecase || phrase.push(".toLowerCase()"),
                    phrase.join("")
                }
                ,
                this._strComp = function(val) {
                    return "string" == typeof val ? ".toString()" : ""
                }
                ,
                this._group = function(f, u) {
                    return {
                        field: f.toString(),
                        unique: u,
                        items: []
                    }
                }
                ,
                this._toStr = function(phrase) {
                    return _trim && (phrase = $.trim(phrase)),
                    phrase = phrase.toString().replace(/\\/g, "\\\\").replace(/\"/g, '\\"'),
                    _usecase ? phrase : phrase.toLowerCase()
                }
                ,
                this._funcLoop = function(func) {
                    var results = [];
                    return $.each(_data, function(i, v) {
                        results.push(func(v))
                    }),
                    results
                }
                ,
                this._append = function(s) {
                    var i;
                    for (null === _query ? _query = "" : _query += "" === _queuedOperator ? " && " : _queuedOperator,
                    i = 0; _orDepth > i; i++)
                        _query += "(";
                    _negate && (_query += "!"),
                    _query += "(" + s + ")",
                    _negate = !1,
                    _queuedOperator = "",
                    _orDepth = 0
                }
                ,
                this._setCommand = function(f, c) {
                    _lastCommand = f,
                    _lastField = c
                }
                ,
                this._resetNegate = function() {
                    _negate = !1
                }
                ,
                this._repeatCommand = function(f, v) {
                    return null === _lastCommand ? self : null !== f && null !== v ? _lastCommand(f, v) : null === _lastField ? _lastCommand(f) : _useProperties ? _lastCommand(_lastField, f) : _lastCommand(f)
                }
                ,
                this._equals = function(a, b) {
                    return 0 === self._compare(a, b, 1)
                }
                ,
                this._compare = function(a, b, d) {
                    var toString = Object.prototype.toString;
                    return void 0 === d && (d = 1),
                    void 0 === a && (a = null),
                    void 0 === b && (b = null),
                    null === a && null === b ? 0 : null === a && null !== b ? 1 : null !== a && null === b ? -1 : "[object Date]" === toString.call(a) && "[object Date]" === toString.call(b) ? b > a ? -d : a > b ? d : 0 : (_usecase || "number" == typeof a || "number" == typeof b || (a = String(a),
                    b = String(b)),
                    b > a ? -d : a > b ? d : 0)
                }
                ,
                this._performSort = function() {
                    0 !== _sorting.length && (_data = self._doSort(_data, 0))
                }
                ,
                this._doSort = function(d, q) {
                    var by = _sorting[q].by
                      , dir = _sorting[q].dir
                      , type = _sorting[q].type
                      , dfmt = _sorting[q].datefmt
                      , sfunc = _sorting[q].sfunc;
                    if (q === _sorting.length - 1)
                        return self._getOrder(d, by, dir, type, dfmt, sfunc);
                    q++;
                    var i, j, sorted, values = self._getGroup(d, by, dir, type, dfmt), results = [];
                    for (i = 0; i < values.length; i++)
                        for (sorted = self._doSort(values[i].items, q),
                        j = 0; j < sorted.length; j++)
                            results.push(sorted[j]);
                    return results
                }
                ,
                this._getOrder = function(data, by, dir, type, dfmt, sfunc) {
                    var i, ab, j, findSortKey, sortData = [], _sortData = [], newDir = "a" === dir ? 1 : -1;
                    void 0 === type && (type = "text"),
                    findSortKey = "float" === type || "number" === type || "currency" === type || "numeric" === type ? function($cell) {
                        var key = parseFloat(String($cell).replace(_stripNum, ""));
                        return isNaN(key) ? Number.NEGATIVE_INFINITY : key
                    }
                    : "int" === type || "integer" === type ? function($cell) {
                        return $cell ? parseFloat(String($cell).replace(_stripNum, "")) : Number.NEGATIVE_INFINITY
                    }
                    : "date" === type || "datetime" === type ? function($cell) {
                        return $.jgrid.parseDate.call($t, dfmt, $cell).getTime()
                    }
                    : $.isFunction(type) ? type : function($cell) {
                        return $cell = $cell ? $.trim(String($cell)) : "",
                        _usecase ? $cell : $cell.toLowerCase()
                    }
                    ,
                    $.each(data, function(i, v) {
                        ab = "" !== by ? $.jgrid.getAccessor(v, by) : v,
                        void 0 === ab && (ab = ""),
                        ab = findSortKey(ab, v),
                        _sortData.push({
                            vSort: ab,
                            index: i
                        })
                    }),
                    $.isFunction(sfunc) ? _sortData.sort(function(a, b) {
                        return a = a.vSort,
                        b = b.vSort,
                        sfunc.call(this, a, b, newDir)
                    }) : _sortData.sort(function(a, b) {
                        return a = a.vSort,
                        b = b.vSort,
                        self._compare(a, b, newDir)
                    }),
                    j = 0;
                    for (var nrec = data.length; nrec > j; )
                        i = _sortData[j].index,
                        sortData.push(data[i]),
                        j++;
                    return sortData
                }
                ,
                this._getGroup = function(data, by, dir, type, dfmt) {
                    var val, results = [], group = null, last = null;
                    return $.each(self._getOrder(data, by, dir, type, dfmt), function(i, v) {
                        val = $.jgrid.getAccessor(v, by),
                        null == val && (val = ""),
                        self._equals(last, val) || (last = val,
                        null !== group && results.push(group),
                        group = self._group(by, val)),
                        group.items.push(v)
                    }),
                    null !== group && results.push(group),
                    results
                }
                ,
                this.ignoreCase = function() {
                    return _usecase = !1,
                    self
                }
                ,
                this.useCase = function() {
                    return _usecase = !0,
                    self
                }
                ,
                this.trim = function() {
                    return _trim = !0,
                    self
                }
                ,
                this.noTrim = function() {
                    return _trim = !1,
                    self
                }
                ,
                this.execute = function() {
                    var match = _query
                      , results = [];
                    return null === match ? self : ($.each(_data, function() {
                        eval(match) && results.push(this)
                    }),
                    _data = results,
                    self)
                }
                ,
                this.data = function() {
                    return _data
                }
                ,
                this.select = function(f) {
                    if (self._performSort(),
                    !self._hasData())
                        return [];
                    if (self.execute(),
                    $.isFunction(f)) {
                        var results = [];
                        return $.each(_data, function(i, v) {
                            results.push(f(v))
                        }),
                        results
                    }
                    return _data
                }
                ,
                this.hasMatch = function() {
                    return self._hasData() ? (self.execute(),
                    _data.length > 0) : !1
                }
                ,
                this.andNot = function(f, v, x) {
                    return _negate = !_negate,
                    self.and(f, v, x)
                }
                ,
                this.orNot = function(f, v, x) {
                    return _negate = !_negate,
                    self.or(f, v, x)
                }
                ,
                this.not = function(f, v, x) {
                    return self.andNot(f, v, x)
                }
                ,
                this.and = function(f, v, x) {
                    return _queuedOperator = " && ",
                    void 0 === f ? self : self._repeatCommand(f, v, x)
                }
                ,
                this.or = function(f, v, x) {
                    return _queuedOperator = " || ",
                    void 0 === f ? self : self._repeatCommand(f, v, x)
                }
                ,
                this.orBegin = function() {
                    return _orDepth++,
                    self
                }
                ,
                this.orEnd = function() {
                    return null !== _query && (_query += ")"),
                    self
                }
                ,
                this.isNot = function(f) {
                    return _negate = !_negate,
                    self.is(f)
                }
                ,
                this.is = function(f) {
                    return self._append("this." + f),
                    self._resetNegate(),
                    self
                }
                ,
                this._compareValues = function(func, f, v, how, t) {
                    var fld;
                    fld = _useProperties ? "jQuery.jgrid.getAccessor(this,'" + f + "')" : "this",
                    void 0 === v && (v = null);
                    var val = v
                      , swst = void 0 === t.stype ? "text" : t.stype;
                    if (null !== v)
                        switch (swst) {
                        case "int":
                        case "integer":
                            val = isNaN(Number(val)) || "" === val ? "0" : val,
                            fld = "parseInt(" + fld + ",10)",
                            val = "parseInt(" + val + ",10)";
                            break;
                        case "float":
                        case "number":
                        case "numeric":
                            val = String(val).replace(_stripNum, ""),
                            val = isNaN(Number(val)) || "" === val ? "0" : val,
                            fld = "parseFloat(" + fld + ")",
                            val = "parseFloat(" + val + ")";
                            break;
                        case "date":
                        case "datetime":
                            val = String($.jgrid.parseDate.call($t, t.srcfmt || "Y-m-d", val).getTime()),
                            fld = 'jQuery.jgrid.parseDate.call(jQuery("#' + $.jgrid.jqID($t.p.id) + '")[0],"' + t.srcfmt + '",' + fld + ").getTime()";
                            break;
                        default:
                            fld = self._getStr(fld),
                            val = self._getStr('"' + self._toStr(val) + '"')
                        }
                    return self._append(fld + " " + how + " " + val),
                    self._setCommand(func, f),
                    self._resetNegate(),
                    self
                }
                ,
                this.equals = function(f, v, t) {
                    return self._compareValues(self.equals, f, v, "==", t)
                }
                ,
                this.notEquals = function(f, v, t) {
                    return self._compareValues(self.equals, f, v, "!==", t)
                }
                ,
                this.isNull = function(f, v, t) {
                    return self._compareValues(self.equals, f, null, "===", t)
                }
                ,
                this.greater = function(f, v, t) {
                    return self._compareValues(self.greater, f, v, ">", t)
                }
                ,
                this.less = function(f, v, t) {
                    return self._compareValues(self.less, f, v, "<", t)
                }
                ,
                this.greaterOrEquals = function(f, v, t) {
                    return self._compareValues(self.greaterOrEquals, f, v, ">=", t)
                }
                ,
                this.lessOrEquals = function(f, v, t) {
                    return self._compareValues(self.lessOrEquals, f, v, "<=", t)
                }
                ,
                this.startsWith = function(f, v) {
                    var val = null == v ? f : v
                      , length = _trim ? $.trim(val.toString()).length : val.toString().length;
                    return _useProperties ? self._append(self._getStr("jQuery.jgrid.getAccessor(this,'" + f + "')") + ".substr(0," + length + ") == " + self._getStr('"' + self._toStr(v) + '"')) : (null != v && (length = _trim ? $.trim(v.toString()).length : v.toString().length),
                    self._append(self._getStr("this") + ".substr(0," + length + ") == " + self._getStr('"' + self._toStr(f) + '"'))),
                    self._setCommand(self.startsWith, f),
                    self._resetNegate(),
                    self
                }
                ,
                this.endsWith = function(f, v) {
                    var val = null == v ? f : v
                      , length = _trim ? $.trim(val.toString()).length : val.toString().length;
                    return _useProperties ? self._append(self._getStr("jQuery.jgrid.getAccessor(this,'" + f + "')") + ".substr(" + self._getStr("jQuery.jgrid.getAccessor(this,'" + f + "')") + ".length-" + length + "," + length + ') == "' + self._toStr(v) + '"') : self._append(self._getStr("this") + ".substr(" + self._getStr("this") + '.length-"' + self._toStr(f) + '".length,"' + self._toStr(f) + '".length) == "' + self._toStr(f) + '"'),
                    self._setCommand(self.endsWith, f),
                    self._resetNegate(),
                    self
                }
                ,
                this.contains = function(f, v) {
                    return _useProperties ? self._append(self._getStr("jQuery.jgrid.getAccessor(this,'" + f + "')") + '.indexOf("' + self._toStr(v) + '",0) > -1') : self._append(self._getStr("this") + '.indexOf("' + self._toStr(f) + '",0) > -1'),
                    self._setCommand(self.contains, f),
                    self._resetNegate(),
                    self
                }
                ,
                this.groupBy = function(by, dir, type, datefmt) {
                    return self._hasData() ? self._getGroup(_data, by, dir, type, datefmt) : null
                }
                ,
                this.orderBy = function(by, dir, stype, dfmt, sfunc) {
                    return dir = null == dir ? "a" : $.trim(dir.toString().toLowerCase()),
                    null == stype && (stype = "text"),
                    null == dfmt && (dfmt = "Y-m-d"),
                    null == sfunc && (sfunc = !1),
                    "desc" !== dir && "descending" !== dir || (dir = "d"),
                    "asc" !== dir && "ascending" !== dir || (dir = "a"),
                    _sorting.push({
                        by: by,
                        dir: dir,
                        type: stype,
                        datefmt: dfmt,
                        sfunc: sfunc
                    }),
                    self
                }
                ,
                self
            };
            return new QueryObject(source,null)
        },
        getMethod: function(name) {
            return this.getAccessor($.fn.jqGrid, name)
        },
        extend: function(methods) {
            $.extend($.fn.jqGrid, methods),
            this.no_legacy_api || $.fn.extend(methods)
        },
        clearBeforeUnload: function(jqGridId) {
            var grid, $t = $("#" + $.jgrid.jqID(jqGridId))[0];
            if ($t.grid) {
                grid = $t.grid,
                $.isFunction(grid.emptyRows) && grid.emptyRows.call($t, !0, !0),
                $(document).unbind("mouseup.jqGrid" + $t.p.id),
                $(grid.hDiv).unbind("mousemove"),
                $($t).unbind();
                var i, l = grid.headers.length, removevents = ["formatCol", "sortData", "updatepager", "refreshIndex", "setHeadCheckBox", "constructTr", "formatter", "addXmlData", "addJSONData", "grid", "p"];
                for (i = 0; l > i; i++)
                    grid.headers[i].el = null;
                for (i in grid)
                    grid.hasOwnProperty(i) && (grid[i] = null);
                for (i in $t.p)
                    $t.p.hasOwnProperty(i) && ($t.p[i] = $.isArray($t.p[i]) ? [] : null);
                for (l = removevents.length,
                i = 0; l > i; i++)
                    $t.hasOwnProperty(removevents[i]) && ($t[removevents[i]] = null,
                    delete $t[removevents[i]])
            }
        },
        gridUnload: function(jqGridId) {
            if (jqGridId) {
                jqGridId = $.trim(jqGridId),
                0 === jqGridId.indexOf("#") && (jqGridId = jqGridId.substring(1));
                var $t = $("#" + $.jgrid.jqID(jqGridId))[0];
                if ($t.grid) {
                    var defgrid = {
                        id: $($t).attr("id"),
                        cl: $($t).attr("class")
                    };
                    $t.p.pager && $($t.p.pager).unbind().empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom");
                    var newtable = document.createElement("table");
                    newtable.className = defgrid.cl;
                    var gid = $.jgrid.jqID($t.id);
                    $(newtable).removeClass("ui-jqgrid-btable").insertBefore("#gbox_" + gid),
                    1 === $($t.p.pager).parents("#gbox_" + gid).length && $($t.p.pager).insertBefore("#gbox_" + gid),
                    $.jgrid.clearBeforeUnload(jqGridId),
                    $("#gbox_" + gid).remove(),
                    $(newtable).attr({
                        id: defgrid.id
                    }),
                    $("#alertmod_" + $.jgrid.jqID(jqGridId)).remove()
                }
            }
        },
        gridDestroy: function(jqGridId) {
            if (jqGridId) {
                jqGridId = $.trim(jqGridId),
                0 === jqGridId.indexOf("#") && (jqGridId = jqGridId.substring(1));
                var $t = $("#" + $.jgrid.jqID(jqGridId))[0];
                if ($t.grid) {
                    $t.p.pager && $($t.p.pager).remove();
                    try {
                        $.jgrid.clearBeforeUnload(jqGridId),
                        $("#gbox_" + $.jgrid.jqID(jqGridId)).remove()
                    } catch (_) {}
                }
            }
        }
    }),
    $.fn.jqGrid = function(pin) {
        if ("string" == typeof pin) {
            var fn = $.jgrid.getMethod(pin);
            if (!fn)
                throw "jqGrid - No such method: " + pin;
            var args = $.makeArray(arguments).slice(1);
            return fn.apply(this, args)
        }
        return this.each(function() {
            if (!this.grid) {
                var localData;
                null != pin && void 0 !== pin.data && (localData = pin.data,
                pin.data = []);
                var p = $.extend(!0, {
                    url: "",
                    height: 150,
                    page: 1,
                    rowNum: 20,
                    rowTotal: null,
                    records: 0,
                    pager: "",
                    pgbuttons: !0,
                    pginput: !0,
                    colModel: [],
                    rowList: [],
                    colNames: [],
                    sortorder: "asc",
                    sortname: "",
                    datatype: "xml",
                    mtype: "GET",
                    altRows: !1,
                    selarrrow: [],
                    savedRow: [],
                    shrinkToFit: !0,
                    xmlReader: {},
                    jsonReader: {},
                    subGrid: !1,
                    subGridModel: [],
                    reccount: 0,
                    lastpage: 0,
                    lastsort: 0,
                    selrow: null,
                    beforeSelectRow: null,
                    onSelectRow: null,
                    onSortCol: null,
                    ondblClickRow: null,
                    onRightClickRow: null,
                    onPaging: null,
                    onSelectAll: null,
                    onInitGrid: null,
                    loadComplete: null,
                    gridComplete: null,
                    loadError: null,
                    loadBeforeSend: null,
                    afterInsertRow: null,
                    beforeRequest: null,
                    beforeProcessing: null,
                    onHeaderClick: null,
                    viewrecords: !1,
                    loadonce: !1,
                    multiselect: !1,
                    multikey: !1,
                    editurl: null,
                    search: !1,
                    caption: "",
                    hidegrid: !0,
                    hiddengrid: !1,
                    postData: {},
                    userData: {},
                    treeGrid: !1,
                    treeGridModel: "nested",
                    treeReader: {},
                    treeANode: -1,
                    ExpandColumn: null,
                    tree_root_level: 0,
                    prmNames: {
                        page: "page",
                        rows: "rows",
                        sort: "sidx",
                        order: "sord",
                        search: "_search",
                        nd: "nd",
                        id: "id",
                        oper: "oper",
                        editoper: "edit",
                        addoper: "add",
                        deloper: "del",
                        subgridid: "id",
                        npage: null,
                        totalrows: "totalrows"
                    },
                    forceFit: !1,
                    gridstate: "visible",
                    cellEdit: !1,
                    cellsubmit: "remote",
                    nv: 0,
                    loadui: "enable",
                    toolbar: [!1, ""],
                    scroll: !1,
                    multiboxonly: !1,
                    deselectAfterSort: !0,
                    scrollrows: !1,
                    autowidth: !1,
                    scrollOffset: 18,
                    cellLayout: 5,
                    subGridWidth: 20,
                    multiselectWidth: 20,
                    gridview: !0,
                    rownumWidth: 25,
                    rownumbers: !1,
                    pagerpos: "center",
                    recordpos: "right",
                    footerrow: !1,
                    userDataOnFooter: !1,
                    hoverrows: !0,
                    altclass: "ui-priority-secondary",
                    viewsortcols: [!1, "vertical", !0],
                    resizeclass: "",
                    autoencode: !1,
                    remapColumns: [],
                    ajaxGridOptions: {},
                    direction: "ltr",
                    toppager: !1,
                    headertitles: !1,
                    scrollTimeout: 40,
                    data: [],
                    _index: {},
                    grouping: !1,
                    groupingView: {
                        groupField: [],
                        groupOrder: [],
                        groupText: [],
                        groupColumnShow: [],
                        groupSummary: [],
                        showSummaryOnHide: !1,
                        sortitems: [],
                        sortnames: [],
                        summary: [],
                        summaryval: [],
                        plusicon: "ui-icon-circlesmall-plus",
                        minusicon: "ui-icon-circlesmall-minus",
                        displayField: [],
                        groupSummaryPos: [],
                        formatDisplayField: [],
                        _locgr: !1
                    },
                    ignoreCase: !0,
                    cmTemplate: {},
                    idPrefix: "",
                    multiSort: !1,
                    minColWidth: 33,
                    scrollPopUp: !1,
                    scrollTopOffset: 0,
                    scrollLeftOffset: "100%",
                    storeNavOptions: !1,
                    regional: "en"
                }, $.jgrid.defaults, pin);
                void 0 !== localData && (p.data = localData,
                pin.data = localData);
                var ts = this
                  , grid = {
                    headers: [],
                    cols: [],
                    footers: [],
                    dragStart: function(i, x, y) {
                        var gridLeftPos = $(this.bDiv).offset().left;
                        this.resizing = {
                            idx: i,
                            startX: x.pageX,
                            sOL: x.pageX - gridLeftPos
                        },
                        this.hDiv.style.cursor = "col-resize",
                        this.curGbox = $("#rs_m" + $.jgrid.jqID(p.id), "#gbox_" + $.jgrid.jqID(p.id)),
                        this.curGbox.css({
                            display: "block",
                            left: x.pageX - gridLeftPos,
                            top: y[1],
                            height: y[2]
                        }),
                        $(ts).triggerHandler("jqGridResizeStart", [x, i]),
                        $.isFunction(p.resizeStart) && p.resizeStart.call(ts, x, i),
                        document.onselectstart = function() {
                            return !1
                        }
                    },
                    dragMove: function(x) {
                        if (this.resizing) {
                            var hn, nWn, diff = x.pageX - this.resizing.startX, h = this.headers[this.resizing.idx], newWidth = "ltr" === p.direction ? h.width + diff : h.width - diff;
                            newWidth > 33 && (this.curGbox.css({
                                left: this.resizing.sOL + diff
                            }),
                            p.forceFit === !0 ? (hn = this.headers[this.resizing.idx + p.nv],
                            nWn = "ltr" === p.direction ? hn.width - diff : hn.width + diff,
                            nWn > p.minColWidth && (h.newWidth = newWidth,
                            hn.newWidth = nWn)) : (this.newWidth = "ltr" === p.direction ? p.tblwidth + diff : p.tblwidth - diff,
                            h.newWidth = newWidth))
                        }
                    },
                    dragEnd: function() {
                        if (this.hDiv.style.cursor = "default",
                        this.resizing) {
                            var idx = this.resizing.idx
                              , nw = this.headers[idx].newWidth || this.headers[idx].width;
                            nw = parseInt(nw, 10),
                            this.resizing = !1,
                            $("#rs_m" + $.jgrid.jqID(p.id)).css("display", "none"),
                            p.colModel[idx].width = nw,
                            this.headers[idx].width = nw,
                            this.headers[idx].el.style.width = nw + "px",
                            this.cols[idx].style.width = nw + "px",
                            this.footers.length > 0 && (this.footers[idx].style.width = nw + "px"),
                            p.forceFit === !0 ? (nw = this.headers[idx + p.nv].newWidth || this.headers[idx + p.nv].width,
                            this.headers[idx + p.nv].width = nw,
                            this.headers[idx + p.nv].el.style.width = nw + "px",
                            this.cols[idx + p.nv].style.width = nw + "px",
                            this.footers.length > 0 && (this.footers[idx + p.nv].style.width = nw + "px"),
                            p.colModel[idx + p.nv].width = nw) : (p.tblwidth = this.newWidth || p.tblwidth,
                            $("table:first", this.bDiv).css("width", p.tblwidth + "px"),
                            $("table:first", this.hDiv).css("width", p.tblwidth + "px"),
                            this.hDiv.scrollLeft = this.bDiv.scrollLeft,
                            p.footerrow && ($("table:first", this.sDiv).css("width", p.tblwidth + "px"),
                            this.sDiv.scrollLeft = this.bDiv.scrollLeft)),
                            $(ts).triggerHandler("jqGridResizeStop", [nw, idx]),
                            $.isFunction(p.resizeStop) && p.resizeStop.call(ts, nw, idx)
                        }
                        this.curGbox = null,
                        document.onselectstart = function() {
                            return !0
                        }
                    },
                    populateVisible: function() {
                        grid.timer && clearTimeout(grid.timer),
                        grid.timer = null;
                        var dh = $(grid.bDiv).height();
                        if (dh) {
                            var rows, rh, table = $("table:first", grid.bDiv);
                            if (table[0].rows.length)
                                try {
                                    rows = table[0].rows[1],
                                    rh = rows ? $(rows).outerHeight() || grid.prevRowHeight : grid.prevRowHeight
                                } catch (pv) {
                                    rh = grid.prevRowHeight
                                }
                            if (rh) {
                                grid.prevRowHeight = rh;
                                var page, npage, empty, rn = p.rowNum, scrollTop = grid.scrollTop = grid.bDiv.scrollTop, ttop = Math.round(table.position().top) - scrollTop, tbot = ttop + table.height(), div = rh * rn;
                                if (dh > tbot && 0 >= ttop && (void 0 === p.lastpage || (parseInt((tbot + scrollTop + div - 1) / div, 10) || 0) <= p.lastpage) && (npage = parseInt((dh - tbot + div - 1) / div, 10) || 1,
                                tbot >= 0 || 2 > npage || p.scroll === !0 ? (page = (Math.round((tbot + scrollTop) / div) || 0) + 1,
                                ttop = -1) : ttop = 1),
                                ttop > 0 && (page = (parseInt(scrollTop / div, 10) || 0) + 1,
                                npage = (parseInt((scrollTop + dh) / div, 10) || 0) + 2 - page,
                                empty = !0),
                                npage) {
                                    if (p.lastpage && (page > p.lastpage || 1 === p.lastpage || page === p.page && page === p.lastpage))
                                        return;
                                    grid.hDiv.loading ? grid.timer = setTimeout(grid.populateVisible, p.scrollTimeout) : (p.page = page,
                                    empty && (grid.selectionPreserver(table[0]),
                                    grid.emptyRows.call(table[0], !1, !1)),
                                    grid.populate(npage)),
                                    p.scrollPopUp && null != p.lastpage && ($("#scroll_g" + p.id).show().html($.jgrid.template($.jgrid.getRegional(ts, "defaults.pgtext", p.pgtext), p.page, p.lastpage)).css({
                                        top: p.scrollTopOffset + scrollTop * ((parseInt(p.height, 10) - 45) / (parseInt(rh, 10) * parseInt(p.records, 10))) + "px",
                                        left: p.scrollLeftOffset
                                    }),
                                    $(this).mouseout(function() {
                                        $("#scroll_g" + p.id).hide()
                                    }))
                                }
                            }
                        }
                    },
                    scrollGrid: function(e) {
                        if (p.scroll) {
                            var scrollTop = grid.bDiv.scrollTop;
                            void 0 === grid.scrollTop && (grid.scrollTop = 0),
                            scrollTop !== grid.scrollTop && (grid.scrollTop = scrollTop,
                            grid.timer && clearTimeout(grid.timer),
                            grid.timer = setTimeout(grid.populateVisible, p.scrollTimeout))
                        }
                        grid.hDiv.scrollLeft = grid.bDiv.scrollLeft,
                        p.footerrow && (grid.sDiv.scrollLeft = grid.bDiv.scrollLeft),
                        e && e.stopPropagation()
                    },
                    selectionPreserver: function(ts) {
                        var p = ts.p
                          , sr = p.selrow
                          , sra = p.selarrrow ? $.makeArray(p.selarrrow) : null
                          , left = ts.grid.bDiv.scrollLeft
                          , restoreSelection = function() {
                            var i;
                            if (p.selrow = null,
                            p.selarrrow = [],
                            p.multiselect && sra && sra.length > 0)
                                for (i = 0; i < sra.length; i++)
                                    sra[i] !== sr && $(ts).jqGrid("setSelection", sra[i], !1, null);
                            sr && $(ts).jqGrid("setSelection", sr, !1, null),
                            ts.grid.bDiv.scrollLeft = left,
                            $(ts).unbind(".selectionPreserver", restoreSelection)
                        };
                        $(ts).bind("jqGridGridComplete.selectionPreserver", restoreSelection)
                    }
                };
                if ("TABLE" !== this.tagName.toUpperCase() || null == this.id)
                    return void alert("Element is not a table or has no id!");
                if (void 0 !== document.documentMode && document.documentMode <= 5)
                    return void alert("Grid can not be used in this ('quirks') mode!");
                $(this).empty().attr("tabindex", "0"),
                this.p = p,
                this.p.useProp = !!$.fn.prop;
                var i, dir;
                if (0 === this.p.colNames.length)
                    for (i = 0; i < this.p.colModel.length; i++)
                        this.p.colNames[i] = this.p.colModel[i].label || this.p.colModel[i].name;
                if (this.p.colNames.length !== this.p.colModel.length)
                    return void alert($.jgrid.getRegional(this, "errors.model"));
                var gv = $("<div class='ui-jqgrid-view' role='grid'></div>")
                  , isMSIE = $.jgrid.msie;
                ts.p.direction = $.trim(ts.p.direction.toLowerCase()),
                ts.p._ald = !1,
                -1 === $.inArray(ts.p.direction, ["ltr", "rtl"]) && (ts.p.direction = "ltr"),
                dir = ts.p.direction,
                $(gv).insertBefore(this),
                $(this).removeClass("scroll").appendTo(gv);
                var eg = $("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");
                $(eg).attr({
                    id: "gbox_" + this.id,
                    dir: dir
                }).insertBefore(gv),
                $(gv).attr("id", "gview_" + this.id).appendTo(eg),
                $("<div class='ui-widget-overlay jqgrid-overlay' id='lui_" + this.id + "'></div>").insertBefore(gv),
                $("<div class='loading ui-state-default ui-state-active' id='load_" + this.id + "'>" + $.jgrid.getRegional(ts, "defaults.loadtext", this.p.loadtext) + "</div>").insertBefore(gv),
                $(this).attr({
                    cellspacing: "0",
                    cellpadding: "0",
                    border: "0",
                    role: "presentation",
                    "aria-multiselectable": !!this.p.multiselect,
                    "aria-labelledby": "gbox_" + this.id
                });
                var colTemplate, sortkeys = ["shiftKey", "altKey", "ctrlKey"], intNum = function(val, defval) {
                    return val = parseInt(val, 10),
                    isNaN(val) ? defval || 0 : val
                }, formatCol = function(pos, rowInd, tv, rawObject, rowId, rdata) {
                    var cellAttrFunc, celp, cm = ts.p.colModel[pos], ral = cm.align, result = 'style="', clas = cm.classes, nm = cm.name, acp = [];
                    return ral && (result += "text-align:" + ral + ";"),
                    cm.hidden === !0 && (result += "display:none;"),
                    0 === rowInd ? result += "width: " + grid.headers[pos].width + "px;" : ($.isFunction(cm.cellattr) || "string" == typeof cm.cellattr && null != $.jgrid.cellattr && $.isFunction($.jgrid.cellattr[cm.cellattr])) && (cellAttrFunc = $.isFunction(cm.cellattr) ? cm.cellattr : $.jgrid.cellattr[cm.cellattr],
                    celp = cellAttrFunc.call(ts, rowId, tv, rawObject, cm, rdata),
                    celp && "string" == typeof celp && (celp = celp.replace(/style/i, "style").replace(/title/i, "title"),
                    celp.indexOf("title") > -1 && (cm.title = !1),
                    celp.indexOf("class") > -1 && (clas = void 0),
                    acp = celp.replace(/\-style/g, "-sti").split(/style/),
                    2 === acp.length ? (acp[1] = $.trim(acp[1].replace(/\-sti/g, "-style").replace("=", "")),
                    0 !== acp[1].indexOf("'") && 0 !== acp[1].indexOf('"') || (acp[1] = acp[1].substring(1)),
                    result += acp[1].replace(/'/gi, '"')) : result += '"')),
                    acp.length || (acp[0] = "",
                    result += '"'),
                    result += (void 0 !== clas ? ' class="' + clas + '"' : "") + (cm.title && tv ? ' title="' + $.jgrid.stripHtml(tv) + '"' : ""),
                    result += ' aria-describedby="' + ts.p.id + "_" + nm + '"',
                    result + acp[0]
                }, cellVal = function(val) {
                    return null == val || "" === val ? "&#160;" : ts.p.autoencode ? $.jgrid.htmlEncode(val) : String(val)
                }, formatter = function(rowId, cellval, colpos, rwdat, _act) {
                    var v, cm = ts.p.colModel[colpos];
                    if (void 0 !== cm.formatter) {
                        rowId = "" !== String(ts.p.idPrefix) ? $.jgrid.stripPref(ts.p.idPrefix, rowId) : rowId;
                        var opts = {
                            rowId: rowId,
                            colModel: cm,
                            gid: ts.p.id,
                            pos: colpos
                        };
                        v = $.isFunction(cm.formatter) ? cm.formatter.call(ts, cellval, opts, rwdat, _act) : $.fmatter ? $.fn.fmatter.call(ts, cm.formatter, cellval, opts, rwdat, _act) : cellVal(cellval)
                    } else
                        v = cellVal(cellval);
                    return v
                }, addCell = function(rowId, cell, pos, irow, srvr, rdata) {
                    var v, prp;
                    return v = formatter(rowId, cell, pos, srvr, "add"),
                    prp = formatCol(pos, irow, v, srvr, rowId, rdata),
                    '<td role="gridcell" ' + prp + ">" + v + "</td>"
                }, addMulti = function(rowid, pos, irow, checked) {
                    var v = '<input role="checkbox" type="checkbox" id="jqg_' + ts.p.id + "_" + rowid + '" class="cbox" name="jqg_' + ts.p.id + "_" + rowid + '"' + (checked ? 'checked="checked"' : "") + "/>"
                      , prp = formatCol(pos, irow, "", null, rowid, !0);
                    return '<td role="gridcell" ' + prp + ">" + v + "</td>"
                }, addRowNum = function(pos, irow, pG, rN) {
                    var v = (parseInt(pG, 10) - 1) * parseInt(rN, 10) + 1 + irow
                      , prp = formatCol(pos, irow, v, null, irow, !0);
                    return '<td role="gridcell" class="ui-state-default jqgrid-rownum" ' + prp + ">" + v + "</td>"
                }, reader = function(datatype) {
                    var field, i, f = [], j = 0;
                    for (i = 0; i < ts.p.colModel.length; i++)
                        field = ts.p.colModel[i],
                        "cb" !== field.name && "subgrid" !== field.name && "rn" !== field.name && (f[j] = "local" === datatype ? field.name : "xml" === datatype || "xmlstring" === datatype ? field.xmlmap || field.name : field.jsonmap || field.name,
                        ts.p.keyName !== !1 && field.key === !0 && (ts.p.keyName = f[j]),
                        j++);
                    return f
                }, orderedCols = function(offset) {
                    var order = ts.p.remapColumns;
                    return order && order.length || (order = $.map(ts.p.colModel, function(v, i) {
                        return i
                    })),
                    offset && (order = $.map(order, function(v) {
                        return offset > v ? null : v - offset
                    })),
                    order
                }, emptyRows = function(scroll, locdata) {
                    var firstrow;
                    this.p.deepempty ? $(this.rows).slice(1).remove() : (firstrow = this.rows.length > 0 ? this.rows[0] : null,
                    $(this.firstChild).empty().append(firstrow)),
                    scroll && this.p.scroll && ($(this.grid.bDiv.firstChild).css({
                        height: "auto"
                    }),
                    $(this.grid.bDiv.firstChild.firstChild).css({
                        height: 0,
                        display: "none"
                    }),
                    0 !== this.grid.bDiv.scrollTop && (this.grid.bDiv.scrollTop = 0)),
                    locdata === !0 && this.p.treeGrid && !this.p.loadonce && (this.p.data = [],
                    this.p._index = {})
                }, normalizeData = function() {
                    var i, j, cur, idn, idr, ccur, v, rd, arrayReader, objectReader, rowReader, p = ts.p, data = p.data, dataLength = data.length, localReader = p.localReader, colModel = p.colModel, cellName = localReader.cell, iOffset = (p.multiselect === !0 ? 1 : 0) + (p.subGrid === !0 ? 1 : 0) + (p.rownumbers === !0 ? 1 : 0), br = p.scroll ? $.jgrid.randId() : 1;
                    if ("local" === p.datatype && localReader.repeatitems === !0)
                        for (arrayReader = orderedCols(iOffset),
                        objectReader = reader("local"),
                        idn = p.keyIndex === !1 ? $.isFunction(localReader.id) ? localReader.id.call(ts, data) : localReader.id : p.keyIndex,
                        i = 0; dataLength > i; i++) {
                            for (cur = data[i],
                            idr = $.jgrid.getAccessor(cur, idn),
                            void 0 === idr && ("number" == typeof idn && null != colModel[idn + iOffset] && (idr = $.jgrid.getAccessor(cur, colModel[idn + iOffset].name)),
                            void 0 === idr && (idr = br + i,
                            cellName && (ccur = $.jgrid.getAccessor(cur, cellName) || cur,
                            idr = null != ccur && void 0 !== ccur[idn] ? ccur[idn] : idr,
                            ccur = null))),
                            rd = {},
                            rd[localReader.id] = idr,
                            cellName && (cur = $.jgrid.getAccessor(cur, cellName) || cur),
                            rowReader = $.isArray(cur) ? arrayReader : objectReader,
                            j = 0; j < rowReader.length; j++)
                                v = $.jgrid.getAccessor(cur, rowReader[j]),
                                rd[colModel[j + iOffset].name] = v;
                            $.extend(!0, data[i], rd)
                        }
                }, refreshIndex = function() {
                    var idname, i, val, datalen = ts.p.data.length;
                    for (idname = ts.p.keyName === !1 || ts.p.loadonce === !0 ? ts.p.localReader.id : ts.p.keyName,
                    ts.p._index = [],
                    i = 0; datalen > i; i++)
                        val = $.jgrid.getAccessor(ts.p.data[i], idname),
                        void 0 === val && (val = String(i + 1)),
                        ts.p._index[val] = i
                }, constructTr = function(id, hide, altClass, rd, cur, selected) {
                    var attrName, tabindex = "-1", restAttr = "", style = hide ? "display:none;" : "", classes = "ui-widget-content jqgrow ui-row-" + ts.p.direction + (altClass ? " " + altClass : "") + (selected ? " ui-state-highlight" : ""), rowAttrObj = $(ts).triggerHandler("jqGridRowAttr", [rd, cur, id]);
                    if ("object" != typeof rowAttrObj && (rowAttrObj = $.isFunction(ts.p.rowattr) ? ts.p.rowattr.call(ts, rd, cur, id) : "string" == typeof ts.p.rowattr && null != $.jgrid.rowattr && $.isFunction($.jgrid.rowattr[ts.p.rowattr]) ? $.jgrid.rowattr[ts.p.rowattr].call(ts, rd, cur, id) : {}),
                    !$.isEmptyObject(rowAttrObj)) {
                        rowAttrObj.hasOwnProperty("id") && (id = rowAttrObj.id,
                        delete rowAttrObj.id),
                        rowAttrObj.hasOwnProperty("tabindex") && (tabindex = rowAttrObj.tabindex,
                        delete rowAttrObj.tabindex),
                        rowAttrObj.hasOwnProperty("style") && (style += rowAttrObj.style,
                        delete rowAttrObj.style),
                        rowAttrObj.hasOwnProperty("class") && (classes += " " + rowAttrObj["class"],
                        delete rowAttrObj["class"]);
                        try {
                            delete rowAttrObj.role
                        } catch (ra) {}
                        for (attrName in rowAttrObj)
                            rowAttrObj.hasOwnProperty(attrName) && (restAttr += " " + attrName + "=" + rowAttrObj[attrName])
                    }
                    return '<tr role="row" id="' + id + '" tabindex="' + tabindex + '" class="' + classes + '"' + ("" === style ? "" : ' style="' + style + '"') + restAttr + ">"
                }, addXmlData = function(xml, rcnt, more, adjust) {
                    var startReq = new Date
                      , locdata = "local" !== ts.p.datatype && ts.p.loadonce || "xmlstring" === ts.p.datatype
                      , xmlid = "_id_"
                      , xmlRd = ts.p.xmlReader
                      , frd = "local" === ts.p.datatype ? "local" : "xml";
                    if (locdata && (ts.p.data = [],
                    ts.p._index = {},
                    ts.p.localReader.id = xmlid),
                    ts.p.reccount = 0,
                    $.isXMLDoc(xml)) {
                        -1 !== ts.p.treeANode || ts.p.scroll ? rcnt = rcnt > 1 ? rcnt : 1 : (emptyRows.call(ts, !1, !0),
                        rcnt = 1);
                        var i, fpos, v, addSubGridCell, idn, getId, F, xmlr, rid, cn1, self = $(ts), ir = 0, gi = ts.p.multiselect === !0 ? 1 : 0, si = 0, ni = ts.p.rownumbers === !0 ? 1 : 0, f = [], rd = {}, rowData = [], cn = ts.p.altRows === !0 ? ts.p.altclass : "";
                        ts.p.subGrid === !0 && (si = 1,
                        addSubGridCell = $.jgrid.getMethod("addSubGridCell")),
                        xmlRd.repeatitems || (f = reader(frd)),
                        idn = ts.p.keyName === !1 ? $.isFunction(xmlRd.id) ? xmlRd.id.call(ts, xml) : xmlRd.id : ts.p.keyName,
                        getId = -1 === String(idn).indexOf("[") ? f.length ? function(trow, k) {
                            return $(idn, trow).text() || k
                        }
                        : function(trow, k) {
                            return $(xmlRd.cell, trow).eq(idn).text() || k
                        }
                        : function(trow, k) {
                            return trow.getAttribute(idn.replace(/[\[\]]/g, "")) || k
                        }
                        ,
                        ts.p.userData = {},
                        ts.p.page = intNum($.jgrid.getXmlData(xml, xmlRd.page), ts.p.page),
                        ts.p.lastpage = intNum($.jgrid.getXmlData(xml, xmlRd.total), 1),
                        ts.p.records = intNum($.jgrid.getXmlData(xml, xmlRd.records)),
                        $.isFunction(xmlRd.userdata) ? ts.p.userData = xmlRd.userdata.call(ts, xml) || {} : $.jgrid.getXmlData(xml, xmlRd.userdata, !0).each(function() {
                            ts.p.userData[this.getAttribute("name")] = $(this).text()
                        });
                        var gxml = $.jgrid.getXmlData(xml, xmlRd.root, !0);
                        gxml = $.jgrid.getXmlData(gxml, xmlRd.row, !0),
                        gxml || (gxml = []);
                        var altr, gl = gxml.length, j = 0, grpdata = [], rn = parseInt(ts.p.rowNum, 10), br = ts.p.scroll ? $.jgrid.randId() : 1;
                        if (gl > 0 && ts.p.page <= 0 && (ts.p.page = 1),
                        gxml && gl) {
                            adjust && (rn *= adjust + 1);
                            var groupingPrepare, afterInsRow = $.isFunction(ts.p.afterInsertRow), hiderow = !1;
                            for (ts.p.grouping && (hiderow = ts.p.groupingView.groupCollapse === !0,
                            groupingPrepare = $.jgrid.getMethod("groupingPrepare")); gl > j; ) {
                                xmlr = gxml[j],
                                rid = getId(xmlr, br + j),
                                rid = ts.p.idPrefix + rid,
                                altr = 0 === rcnt ? 0 : rcnt + 1,
                                cn1 = (altr + j) % 2 === 1 ? cn : "";
                                var iStartTrTag = rowData.length;
                                if (rowData.push(""),
                                ni && rowData.push(addRowNum(0, j, ts.p.page, ts.p.rowNum)),
                                gi && rowData.push(addMulti(rid, ni, j, !1)),
                                si && rowData.push(addSubGridCell.call(self, gi + ni, j + rcnt)),
                                xmlRd.repeatitems) {
                                    F || (F = orderedCols(gi + si + ni));
                                    var cells = $.jgrid.getXmlData(xmlr, xmlRd.cell, !0);
                                    $.each(F, function(k) {
                                        var cell = cells[this];
                                        return cell ? (v = cell.textContent || cell.text,
                                        rd[ts.p.colModel[k + gi + si + ni].name] = v,
                                        void rowData.push(addCell(rid, v, k + gi + si + ni, j + rcnt, xmlr, rd))) : !1
                                    })
                                } else
                                    for (i = 0; i < f.length; i++)
                                        v = $.jgrid.getXmlData(xmlr, f[i]),
                                        rd[ts.p.colModel[i + gi + si + ni].name] = v,
                                        rowData.push(addCell(rid, v, i + gi + si + ni, j + rcnt, xmlr, rd));
                                if (rowData[iStartTrTag] = constructTr(rid, hiderow, cn1, rd, xmlr, !1),
                                rowData.push("</tr>"),
                                ts.p.grouping && (grpdata.push(rowData),
                                ts.p.groupingView._locgr || groupingPrepare.call(self, rd, j),
                                rowData = []),
                                (locdata || ts.p.treeGrid === !0 && !ts.p._ald) && (rd[xmlid] = $.jgrid.stripPref(ts.p.idPrefix, rid),
                                ts.p.data.push(rd),
                                ts.p._index[rd[xmlid]] = ts.p.data.length - 1),
                                ts.p.gridview === !1 && ($("tbody:first", ts.grid.bDiv).append(rowData.join("")),
                                self.triggerHandler("jqGridAfterInsertRow", [rid, rd, xmlr]),
                                afterInsRow && ts.p.afterInsertRow.call(ts, rid, rd, xmlr),
                                rowData = []),
                                rd = {},
                                ir++,
                                j++,
                                ir === rn)
                                    break
                            }
                        }
                        if (ts.p.gridview === !0 && (fpos = ts.p.treeANode > -1 ? ts.p.treeANode : 0,
                        ts.p.grouping ? locdata || (self.jqGrid("groupingRender", grpdata, ts.p.colModel.length, ts.p.page, rn),
                        grpdata = null) : ts.p.treeGrid === !0 && fpos > 0 ? $(ts.rows[fpos]).after(rowData.join("")) : (ts.firstElementChild ? ts.firstElementChild.innerHTML += rowData.join("") : $("#" + $.jgrid.jqID(ts.p.id) + " tbody:first").append(rowData.join("")),
                        ts.grid.cols = ts.rows[0].cells)),
                        ts.p.subGrid === !0)
                            try {
                                self.jqGrid("addSubGrid", gi + ni)
                            } catch (_) {}
                        if (ts.p.totaltime = new Date - startReq,
                        ir > 0 && 0 === ts.p.records && (ts.p.records = gl),
                        rowData = null,
                        ts.p.treeGrid === !0)
                            try {
                                self.jqGrid("setTreeNode", fpos + 1, ir + fpos + 1)
                            } catch (e) {}
                        if (ts.p.reccount = ir,
                        ts.p.treeANode = -1,
                        ts.p.userDataOnFooter && self.jqGrid("footerData", "set", ts.p.userData, !0),
                        locdata && (ts.p.records = gl,
                        ts.p.lastpage = Math.ceil(gl / rn)),
                        more || ts.updatepager(!1, !0),
                        locdata) {
                            for (; gl > ir; ) {
                                if (xmlr = gxml[ir],
                                rid = getId(xmlr, ir + br),
                                rid = ts.p.idPrefix + rid,
                                xmlRd.repeatitems) {
                                    F || (F = orderedCols(gi + si + ni));
                                    var cells2 = $.jgrid.getXmlData(xmlr, xmlRd.cell, !0);
                                    $.each(F, function(k) {
                                        var cell = cells2[this];
                                        return cell ? (v = cell.textContent || cell.text,
                                        void (rd[ts.p.colModel[k + gi + si + ni].name] = v)) : !1
                                    })
                                } else
                                    for (i = 0; i < f.length; i++)
                                        v = $.jgrid.getXmlData(xmlr, f[i]),
                                        rd[ts.p.colModel[i + gi + si + ni].name] = v;
                                rd[xmlid] = $.jgrid.stripPref(ts.p.idPrefix, rid),
                                ts.p.grouping && groupingPrepare.call(self, rd, ir),
                                ts.p.data.push(rd),
                                ts.p._index[rd[xmlid]] = ts.p.data.length - 1,
                                rd = {},
                                ir++
                            }
                            ts.p.grouping && (ts.p.groupingView._locgr = !0,
                            self.jqGrid("groupingRender", grpdata, ts.p.colModel.length, ts.p.page, rn),
                            grpdata = null)
                        }
                    }
                }, addJSONData = function(data, rcnt, more, adjust) {
                    var startReq = new Date;
                    if (data) {
                        -1 !== ts.p.treeANode || ts.p.scroll ? rcnt = rcnt > 1 ? rcnt : 1 : (emptyRows.call(ts, !1, !0),
                        rcnt = 1);
                        var dReader, frd, locid = "_id_", locdata = "local" !== ts.p.datatype && ts.p.loadonce || "jsonstring" === ts.p.datatype;
                        locdata && (ts.p.data = [],
                        ts.p._index = {},
                        ts.p.localReader.id = locid),
                        ts.p.reccount = 0,
                        "local" === ts.p.datatype ? (dReader = ts.p.localReader,
                        frd = "local") : (dReader = ts.p.jsonReader,
                        frd = "json");
                        var v, i, j, cur, addSubGridCell, rowReader, len, drows, idn, fpos, idr, cn1, self = $(ts), ir = 0, f = [], gi = ts.p.multiselect ? 1 : 0, si = ts.p.subGrid === !0 ? 1 : 0, ni = ts.p.rownumbers === !0 ? 1 : 0, arrayReader = orderedCols(gi + si + ni), objectReader = reader(frd), rd = {}, rowData = [], cn = ts.p.altRows === !0 ? ts.p.altclass : "";
                        ts.p.page = intNum($.jgrid.getAccessor(data, dReader.page), ts.p.page),
                        ts.p.lastpage = intNum($.jgrid.getAccessor(data, dReader.total), 1),
                        ts.p.records = intNum($.jgrid.getAccessor(data, dReader.records)),
                        ts.p.userData = $.jgrid.getAccessor(data, dReader.userdata) || {},
                        si && (addSubGridCell = $.jgrid.getMethod("addSubGridCell")),
                        idn = ts.p.keyName === !1 ? $.isFunction(dReader.id) ? dReader.id.call(ts, data) : dReader.id : ts.p.keyName,
                        drows = $.jgrid.getAccessor(data, dReader.root),
                        null == drows && $.isArray(data) && (drows = data),
                        drows || (drows = []),
                        len = drows.length,
                        i = 0,
                        len > 0 && ts.p.page <= 0 && (ts.p.page = 1);
                        var altr, selr, rn = parseInt(ts.p.rowNum, 10), br = ts.p.scroll ? $.jgrid.randId() : 1, selected = !1;
                        adjust && (rn *= adjust + 1),
                        "local" !== ts.p.datatype || ts.p.deselectAfterSort || (selected = !0);
                        var groupingPrepare, afterInsRow = $.isFunction(ts.p.afterInsertRow), grpdata = [], hiderow = !1;
                        for (ts.p.grouping && (hiderow = ts.p.groupingView.groupCollapse === !0,
                        groupingPrepare = $.jgrid.getMethod("groupingPrepare")); len > i; ) {
                            if (cur = drows[i],
                            idr = $.jgrid.getAccessor(cur, idn),
                            void 0 === idr && ("number" == typeof idn && null != ts.p.colModel[idn + gi + si + ni] && (idr = $.jgrid.getAccessor(cur, ts.p.colModel[idn + gi + si + ni].name)),
                            void 0 === idr && (idr = br + i,
                            0 === f.length && dReader.cell))) {
                                var ccur = $.jgrid.getAccessor(cur, dReader.cell) || cur;
                                idr = null != ccur && void 0 !== ccur[idn] ? ccur[idn] : idr,
                                ccur = null
                            }
                            idr = ts.p.idPrefix + idr,
                            altr = 1 === rcnt ? 0 : rcnt,
                            cn1 = (altr + i) % 2 === 1 ? cn : "",
                            selected && (selr = ts.p.multiselect ? -1 !== $.inArray(idr, ts.p.selarrrow) : idr === ts.p.selrow);
                            var iStartTrTag = rowData.length;
                            for (rowData.push(""),
                            ni && rowData.push(addRowNum(0, i, ts.p.page, ts.p.rowNum)),
                            gi && rowData.push(addMulti(idr, ni, i, selr)),
                            si && rowData.push(addSubGridCell.call(self, gi + ni, i + rcnt)),
                            rowReader = objectReader,
                            dReader.repeatitems && (dReader.cell && (cur = $.jgrid.getAccessor(cur, dReader.cell) || cur),
                            $.isArray(cur) && (rowReader = arrayReader)),
                            j = 0; j < rowReader.length; j++)
                                v = $.jgrid.getAccessor(cur, rowReader[j]),
                                rd[ts.p.colModel[j + gi + si + ni].name] = v,
                                rowData.push(addCell(idr, v, j + gi + si + ni, i + rcnt, cur, rd));
                            if (rowData[iStartTrTag] = constructTr(idr, hiderow, cn1, rd, cur, selr),
                            rowData.push("</tr>"),
                            ts.p.grouping && (grpdata.push(rowData),
                            ts.p.groupingView._locgr || groupingPrepare.call(self, rd, i),
                            rowData = []),
                            (locdata || ts.p.treeGrid === !0 && !ts.p._ald) && (rd[locid] = $.jgrid.stripPref(ts.p.idPrefix, idr),
                            ts.p.data.push(rd),
                            ts.p._index[rd[locid]] = ts.p.data.length - 1),
                            ts.p.gridview === !1 && ($("#" + $.jgrid.jqID(ts.p.id) + " tbody:first").append(rowData.join("")),
                            self.triggerHandler("jqGridAfterInsertRow", [idr, rd, cur]),
                            afterInsRow && ts.p.afterInsertRow.call(ts, idr, rd, cur),
                            rowData = []),
                            rd = {},
                            ir++,
                            i++,
                            ir === rn)
                                break
                        }
                        if (ts.p.gridview === !0 && (fpos = ts.p.treeANode > -1 ? ts.p.treeANode : 0,
                        ts.p.grouping ? locdata || (self.jqGrid("groupingRender", grpdata, ts.p.colModel.length, ts.p.page, rn),
                        grpdata = null) : ts.p.treeGrid === !0 && fpos > 0 ? $(ts.rows[fpos]).after(rowData.join("")) : (ts.firstElementChild ? ts.firstElementChild.innerHTML += rowData.join("") : $("#" + $.jgrid.jqID(ts.p.id) + " tbody:first").append(rowData.join("")),
                        ts.grid.cols = ts.rows[0].cells)),
                        ts.p.subGrid === !0)
                            try {
                                self.jqGrid("addSubGrid", gi + ni)
                            } catch (_) {}
                        if (ts.p.totaltime = new Date - startReq,
                        ir > 0 && 0 === ts.p.records && (ts.p.records = len),
                        rowData = null,
                        ts.p.treeGrid === !0)
                            try {
                                self.jqGrid("setTreeNode", fpos + 1, ir + fpos + 1)
                            } catch (e) {}
                        if (ts.p.reccount = ir,
                        ts.p.treeANode = -1,
                        ts.p.userDataOnFooter && self.jqGrid("footerData", "set", ts.p.userData, !0),
                        locdata && (ts.p.records = len,
                        ts.p.lastpage = Math.ceil(len / rn)),
                        more || ts.updatepager(!1, !0),
                        locdata) {
                            for (; len > ir && drows[ir]; ) {
                                if (cur = drows[ir],
                                idr = $.jgrid.getAccessor(cur, idn),
                                void 0 === idr && ("number" == typeof idn && null != ts.p.colModel[idn + gi + si + ni] && (idr = $.jgrid.getAccessor(cur, ts.p.colModel[idn + gi + si + ni].name)),
                                void 0 === idr && (idr = br + ir,
                                0 === f.length && dReader.cell))) {
                                    var ccur2 = $.jgrid.getAccessor(cur, dReader.cell) || cur;
                                    idr = null != ccur2 && void 0 !== ccur2[idn] ? ccur2[idn] : idr,
                                    ccur2 = null
                                }
                                if (cur) {
                                    for (idr = ts.p.idPrefix + idr,
                                    rowReader = objectReader,
                                    dReader.repeatitems && (dReader.cell && (cur = $.jgrid.getAccessor(cur, dReader.cell) || cur),
                                    $.isArray(cur) && (rowReader = arrayReader)),
                                    j = 0; j < rowReader.length; j++)
                                        rd[ts.p.colModel[j + gi + si + ni].name] = $.jgrid.getAccessor(cur, rowReader[j]);
                                    rd[locid] = $.jgrid.stripPref(ts.p.idPrefix, idr),
                                    ts.p.grouping && groupingPrepare.call(self, rd, ir),
                                    ts.p.data.push(rd),
                                    ts.p._index[rd[locid]] = ts.p.data.length - 1,
                                    rd = {}
                                }
                                ir++
                            }
                            ts.p.grouping && (ts.p.groupingView._locgr = !0,
                            self.jqGrid("groupingRender", grpdata, ts.p.colModel.length, ts.p.page, rn),
                            grpdata = null)
                        }
                    }
                }, addLocalData = function() {
                    function tojLinq(group) {
                        var index, gor, ror, opr, rule, fld, s = 0;
                        if (null != group.groups) {
                            for (gor = group.groups.length && "OR" === group.groupOp.toString().toUpperCase(),
                            gor && query.orBegin(),
                            index = 0; index < group.groups.length; index++) {
                                s > 0 && gor && query.or();
                                try {
                                    tojLinq(group.groups[index])
                                } catch (e) {
                                    alert(e)
                                }
                                s++
                            }
                            gor && query.orEnd()
                        }
                        if (null != group.rules)
                            try {
                                for (ror = group.rules.length && "OR" === group.groupOp.toString().toUpperCase(),
                                ror && query.orBegin(),
                                index = 0; index < group.rules.length; index++)
                                    rule = group.rules[index],
                                    opr = group.groupOp.toString().toUpperCase(),
                                    compareFnMap[rule.op] && rule.field && (s > 0 && opr && "OR" === opr && (query = query.or()),
                                    fld = cmtypes[rule.field],
                                    "date" === fld.stype && fld.srcfmt && fld.newfmt && fld.srcfmt !== fld.newfmt && (rule.data = $.jgrid.parseDate.call(ts, fld.newfmt, rule.data, fld.srcfmt)),
                                    query = compareFnMap[rule.op](query, opr)(rule.field, rule.data, cmtypes[rule.field])),
                                    s++;
                                ror && query.orEnd()
                            } catch (g) {
                                alert(g)
                            }
                    }
                    var srcformat, sorttype, newformat, sfld, st = ts.p.multiSort ? [] : "", sto = [], fndsort = !1, cmtypes = {}, grtypes = [], grindexes = [];
                    if ($.isArray(ts.p.data)) {
                        var lengrp, gin, grpview = ts.p.grouping ? ts.p.groupingView : !1;
                        if ($.each(ts.p.colModel, function() {
                            if (sorttype = this.sorttype || "text",
                            "date" === sorttype || "datetime" === sorttype ? (this.formatter && "string" == typeof this.formatter && "date" === this.formatter ? (srcformat = this.formatoptions && this.formatoptions.srcformat ? this.formatoptions.srcformat : $.jgrid.getRegional(ts, "formatter.date.srcformat"),
                            newformat = this.formatoptions && this.formatoptions.newformat ? this.formatoptions.newformat : $.jgrid.getRegional(ts, "formatter.date.newformat")) : srcformat = newformat = this.datefmt || "Y-m-d",
                            cmtypes[this.name] = {
                                stype: sorttype,
                                srcfmt: srcformat,
                                newfmt: newformat,
                                sfunc: this.sortfunc || null
                            }) : cmtypes[this.name] = {
                                stype: sorttype,
                                srcfmt: "",
                                newfmt: "",
                                sfunc: this.sortfunc || null
                            },
                            ts.p.grouping)
                                for (gin = 0,
                                lengrp = grpview.groupField.length; lengrp > gin; gin++)
                                    if (this.name === grpview.groupField[gin]) {
                                        var grindex = this.name;
                                        this.index && (grindex = this.index),
                                        grtypes[gin] = cmtypes[grindex],
                                        grindexes[gin] = grindex
                                    }
                            if (ts.p.multiSort) {
                                if (this.lso) {
                                    st.push(this.name);
                                    var tmplso = this.lso.split("-");
                                    sto.push(tmplso[tmplso.length - 1])
                                }
                            } else
                                fndsort || this.index !== ts.p.sortname && this.name !== ts.p.sortname || (st = this.name,
                                fndsort = !0)
                        }),
                        ts.p.treeGrid && ts.p._sort)
                            return void $(ts).jqGrid("SortTree", st, ts.p.sortorder, cmtypes[st].stype || "text", cmtypes[st].srcfmt || "");
                        var compareFnMap = {
                            eq: function(queryObj) {
                                return queryObj.equals
                            },
                            ne: function(queryObj) {
                                return queryObj.notEquals
                            },
                            lt: function(queryObj) {
                                return queryObj.less;
                            },
                            le: function(queryObj) {
                                return queryObj.lessOrEquals
                            },
                            gt: function(queryObj) {
                                return queryObj.greater
                            },
                            ge: function(queryObj) {
                                return queryObj.greaterOrEquals
                            },
                            cn: function(queryObj) {
                                return queryObj.contains
                            },
                            nc: function(queryObj, op) {
                                return "OR" === op ? queryObj.orNot().contains : queryObj.andNot().contains
                            },
                            bw: function(queryObj) {
                                return queryObj.startsWith
                            },
                            bn: function(queryObj, op) {
                                return "OR" === op ? queryObj.orNot().startsWith : queryObj.andNot().startsWith
                            },
                            en: function(queryObj, op) {
                                return "OR" === op ? queryObj.orNot().endsWith : queryObj.andNot().endsWith
                            },
                            ew: function(queryObj) {
                                return queryObj.endsWith
                            },
                            ni: function(queryObj, op) {
                                return "OR" === op ? queryObj.orNot().equals : queryObj.andNot().equals
                            },
                            "in": function(queryObj) {
                                return queryObj.equals
                            },
                            nu: function(queryObj) {
                                return queryObj.isNull
                            },
                            nn: function(queryObj, op) {
                                return "OR" === op ? queryObj.orNot().isNull : queryObj.andNot().isNull
                            }
                        }
                          , query = $.jgrid.from.call(ts, ts.p.data);
                        if (ts.p.ignoreCase && (query = query.ignoreCase()),
                        ts.p.search === !0) {
                            var srules = ts.p.postData.filters;
                            if (srules)
                                "string" == typeof srules && (srules = $.jgrid.parse(srules)),
                                tojLinq(srules);
                            else
                                try {
                                    sfld = cmtypes[ts.p.postData.searchField],
                                    "date" === sfld.stype && sfld.srcfmt && sfld.newfmt && sfld.srcfmt !== sfld.newfmt && (ts.p.postData.searchString = $.jgrid.parseDate.call(ts, sfld.newfmt, ts.p.postData.searchString, sfld.srcfmt)),
                                    query = compareFnMap[ts.p.postData.searchOper](query)(ts.p.postData.searchField, ts.p.postData.searchString, cmtypes[ts.p.postData.searchField])
                                } catch (se) {}
                        } else
                            ts.p.treeGrid && "nested" === ts.p.treeGridModel && query.orderBy(ts.p.treeReader.left_field, "asc", "integer", "", null);
                        if (ts.p.treeGrid && "adjacency" === ts.p.treeGridModel && (lengrp = 0,
                        st = null),
                        ts.p.grouping)
                            for (gin = 0; lengrp > gin; gin++)
                                query.orderBy(grindexes[gin], grpview.groupOrder[gin], grtypes[gin].stype, grtypes[gin].srcfmt);
                        ts.p.multiSort ? $.each(st, function(i) {
                            query.orderBy(this, sto[i], cmtypes[this].stype, cmtypes[this].srcfmt, cmtypes[this].sfunc)
                        }) : st && ts.p.sortorder && fndsort && ("DESC" === ts.p.sortorder.toUpperCase() ? query.orderBy(ts.p.sortname, "d", cmtypes[st].stype, cmtypes[st].srcfmt, cmtypes[st].sfunc) : query.orderBy(ts.p.sortname, "a", cmtypes[st].stype, cmtypes[st].srcfmt, cmtypes[st].sfunc));
                        var queryResults = query.select()
                          , recordsperpage = parseInt(ts.p.rowNum, 10)
                          , total = queryResults.length
                          , page = parseInt(ts.p.page, 10)
                          , totalpages = Math.ceil(total / recordsperpage)
                          , retresult = {};
                        if ((ts.p.search || ts.p.resetsearch) && ts.p.grouping && ts.p.groupingView._locgr) {
                            ts.p.groupingView.groups = [];
                            var j, key, udc, grPrepare = $.jgrid.getMethod("groupingPrepare");
                            if (ts.p.footerrow && ts.p.userDataOnFooter) {
                                for (key in ts.p.userData)
                                    ts.p.userData.hasOwnProperty(key) && (ts.p.userData[key] = 0);
                                udc = !0
                            }
                            for (j = 0; total > j; j++) {
                                if (udc)
                                    for (key in ts.p.userData)
                                        ts.p.userData.hasOwnProperty(key) && (ts.p.userData[key] += parseFloat(queryResults[j][key] || 0));
                                grPrepare.call($(ts), queryResults[j], j, recordsperpage)
                            }
                        }
                        return queryResults = ts.p.treeGrid && ts.p.search ? $(ts).jqGrid("searchTree", queryResults) : queryResults.slice((page - 1) * recordsperpage, page * recordsperpage),
                        query = null,
                        cmtypes = null,
                        retresult[ts.p.localReader.total] = totalpages,
                        retresult[ts.p.localReader.page] = page,
                        retresult[ts.p.localReader.records] = total,
                        retresult[ts.p.localReader.root] = queryResults,
                        retresult[ts.p.localReader.userdata] = ts.p.userData,
                        queryResults = null,
                        retresult
                    }
                }, updatepager = function(rn, dnd) {
                    var cp, last, base, from, to, tot, fmt, sppg, pgboxes = "", pgid = ts.p.pager ? $.jgrid.jqID(ts.p.pager.substr(1)) : "", tspg = pgid ? "_" + pgid : "", tspg_t = ts.p.toppager ? "_" + ts.p.toppager.substr(1) : "";
                    if (base = parseInt(ts.p.page, 10) - 1,
                    0 > base && (base = 0),
                    base *= parseInt(ts.p.rowNum, 10),
                    to = base + ts.p.reccount,
                    ts.p.scroll) {
                        var rows = $("tbody:first > tr:gt(0)", ts.grid.bDiv);
                        base = to - rows.length,
                        ts.p.reccount = rows.length;
                        var rh = rows.outerHeight() || ts.grid.prevRowHeight;
                        if (rh) {
                            var top = base * rh
                              , height = parseInt(ts.p.records, 10) * rh;
                            $(">div:first", ts.grid.bDiv).css({
                                height: height
                            }).children("div:first").css({
                                height: top,
                                display: top ? "" : "none"
                            }),
                            0 === ts.grid.bDiv.scrollTop && ts.p.page > 1 && (ts.grid.bDiv.scrollTop = ts.p.rowNum * (ts.p.page - 1) * rh)
                        }
                        ts.grid.bDiv.scrollLeft = ts.grid.hDiv.scrollLeft
                    }
                    if (pgboxes = ts.p.pager || "",
                    pgboxes += ts.p.toppager ? pgboxes ? "," + ts.p.toppager : ts.p.toppager : "") {
                        if (fmt = $.jgrid.getRegional(ts, "formatter.integer"),
                        cp = intNum(ts.p.page),
                        last = intNum(ts.p.lastpage),
                        $(".selbox", pgboxes)[this.p.useProp ? "prop" : "attr"]("disabled", !1),
                        ts.p.pginput === !0 && ($("#input" + tspg).html($.jgrid.template($.jgrid.getRegional(ts, "defaults.pgtext", ts.p.pgtext) || "", "<input class='ui-pg-input ui-corner-all' type='text' size='2' maxlength='7' value='0' role='textbox'/>", "<span id='sp_1_" + $.jgrid.jqID(pgid) + "'></span>")),
                        ts.p.toppager && $("#input_t" + tspg_t).html($.jgrid.template($.jgrid.getRegional(ts, "defaults.pgtext", ts.p.pgtext) || "", "<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>", "<span id='sp_1_" + $.jgrid.jqID(pgid) + "_toppager'></span>")),
                        $(".ui-pg-input", pgboxes).val(ts.p.page),
                        sppg = ts.p.toppager ? "#sp_1" + tspg + ",#sp_1" + tspg_t : "#sp_1" + tspg,
                        $(sppg).html($.fmatter ? $.fmatter.util.NumberFormat(ts.p.lastpage, fmt) : ts.p.lastpage)),
                        ts.p.viewrecords)
                            if (0 === ts.p.reccount)
                                $(".ui-paging-info", pgboxes).html($.jgrid.getRegional(ts, "defaults.emptyrecords", ts.p.emptyrecords));
                            else {
                                from = base + 1,
                                tot = ts.p.records,
                                $.fmatter && (from = $.fmatter.util.NumberFormat(from, fmt),
                                to = $.fmatter.util.NumberFormat(to, fmt),
                                tot = $.fmatter.util.NumberFormat(tot, fmt));
                                var rt = $.jgrid.getRegional(ts, "defaults.recordtext", ts.p.recordtext);
                                $(".ui-paging-info", pgboxes).html($.jgrid.template(rt, from, to, tot))
                            }
                        ts.p.pgbuttons === !0 && (0 >= cp && (cp = last = 0),
                        1 === cp || 0 === cp ? ($("#first" + tspg + ", #prev" + tspg).addClass("ui-state-disabled").removeClass("ui-state-hover"),
                        ts.p.toppager && $("#first_t" + tspg_t + ", #prev_t" + tspg_t).addClass("ui-state-disabled").removeClass("ui-state-hover")) : ($("#first" + tspg + ", #prev" + tspg).removeClass("ui-state-disabled"),
                        ts.p.toppager && $("#first_t" + tspg_t + ", #prev_t" + tspg_t).removeClass("ui-state-disabled")),
                        cp === last || 0 === cp ? ($("#next" + tspg + ", #last" + tspg).addClass("ui-state-disabled").removeClass("ui-state-hover"),
                        ts.p.toppager && $("#next_t" + tspg_t + ", #last_t" + tspg_t).addClass("ui-state-disabled").removeClass("ui-state-hover")) : ($("#next" + tspg + ", #last" + tspg).removeClass("ui-state-disabled"),
                        ts.p.toppager && $("#next_t" + tspg_t + ", #last_t" + tspg_t).removeClass("ui-state-disabled")))
                    }
                    rn === !0 && ts.p.rownumbers === !0 && $(">td.jqgrid-rownum", ts.rows).each(function(i) {
                        $(this).html(base + 1 + i)
                    }),
                    dnd && ts.p.jqgdnd && $(ts).jqGrid("gridDnD", "updateDnD"),
                    $(ts).triggerHandler("jqGridGridComplete"),
                    $.isFunction(ts.p.gridComplete) && ts.p.gridComplete.call(ts),
                    $(ts).triggerHandler("jqGridAfterGridComplete")
                }, beginReq = function() {
                    ts.grid.hDiv.loading = !0,
                    ts.p.hiddengrid || $(ts).jqGrid("progressBar", {
                        method: "show",
                        loadtype: ts.p.loadui,
                        htmlcontent: $.jgrid.getRegional(ts, "defaults.loadtext", ts.p.loadtext)
                    })
                }, endReq = function() {
                    ts.grid.hDiv.loading = !1,
                    $(ts).jqGrid("progressBar", {
                        method: "hide",
                        loadtype: ts.p.loadui
                    })
                }, populate = function(npage) {
                    if (!ts.grid.hDiv.loading) {
                        var dt, dstr, pvis = ts.p.scroll && npage === !1, prm = {}, pN = ts.p.prmNames;
                        ts.p.page <= 0 && (ts.p.page = Math.min(1, ts.p.lastpage)),
                        null !== pN.search && (prm[pN.search] = ts.p.search),
                        null !== pN.nd && (prm[pN.nd] = (new Date).getTime()),
                        null !== pN.rows && (prm[pN.rows] = ts.p.rowNum),
                        null !== pN.page && (prm[pN.page] = ts.p.page),
                        null !== pN.sort && (prm[pN.sort] = ts.p.sortname),
                        null !== pN.order && (prm[pN.order] = ts.p.sortorder),
                        null !== ts.p.rowTotal && null !== pN.totalrows && (prm[pN.totalrows] = ts.p.rowTotal);
                        var lcf = $.isFunction(ts.p.loadComplete)
                          , lc = lcf ? ts.p.loadComplete : null
                          , adjust = 0;
                        if (npage = npage || 1,
                        npage > 1 ? null !== pN.npage ? (prm[pN.npage] = npage,
                        adjust = npage - 1,
                        npage = 1) : lc = function(req) {
                            ts.p.page++,
                            ts.grid.hDiv.loading = !1,
                            lcf && ts.p.loadComplete.call(ts, req),
                            populate(npage - 1)
                        }
                        : null !== pN.npage && delete ts.p.postData[pN.npage],
                        ts.p.grouping) {
                            $(ts).jqGrid("groupingSetup");
                            var gi, grp = ts.p.groupingView, gs = "";
                            for (gi = 0; gi < grp.groupField.length; gi++) {
                                var index = grp.groupField[gi];
                                $.each(ts.p.colModel, function(cmIndex, cmValue) {
                                    cmValue.name === index && cmValue.index && (index = cmValue.index)
                                }),
                                gs += index + " " + grp.groupOrder[gi] + ", "
                            }
                            prm[pN.sort] = gs + prm[pN.sort]
                        }
                        $.extend(ts.p.postData, prm);
                        var rcnt = ts.p.scroll ? ts.rows.length - 1 : 1
                          , bfr = $(ts).triggerHandler("jqGridBeforeRequest");
                        if (bfr === !1 || "stop" === bfr)
                            return;
                        if ($.isFunction(ts.p.datatype))
                            return void ts.p.datatype.call(ts, ts.p.postData, "load_" + ts.p.id, rcnt, npage, adjust);
                        if ($.isFunction(ts.p.beforeRequest) && (bfr = ts.p.beforeRequest.call(ts),
                        void 0 === bfr && (bfr = !0),
                        bfr === !1))
                            return;
                        switch (dt = ts.p.datatype.toLowerCase()) {
                        case "json":
                        case "jsonp":
                        case "xml":
                        case "script":
                            $.ajax($.extend({
                                url: ts.p.url,
                                type: ts.p.mtype,
                                dataType: dt,
                                data: $.isFunction(ts.p.serializeGridData) ? ts.p.serializeGridData.call(ts, ts.p.postData) : ts.p.postData,
                                success: function(data, st, xhr) {
                                    return $.isFunction(ts.p.beforeProcessing) && ts.p.beforeProcessing.call(ts, data, st, xhr) === !1 ? void endReq() : ("xml" === dt ? addXmlData(data, rcnt, npage > 1, adjust) : addJSONData(data, rcnt, npage > 1, adjust),
                                    $(ts).triggerHandler("jqGridLoadComplete", [data]),
                                    lc && lc.call(ts, data),
                                    $(ts).triggerHandler("jqGridAfterLoadComplete", [data]),
                                    pvis && ts.grid.populateVisible(),
                                    (ts.p.loadonce || ts.p.treeGrid) && (ts.p.datatype = "local"),
                                    data = null,
                                    void (1 === npage && endReq()))
                                },
                                error: function(xhr, st, err) {
                                    $.isFunction(ts.p.loadError) && ts.p.loadError.call(ts, xhr, st, err),
                                    1 === npage && endReq(),
                                    xhr = null
                                },
                                beforeSend: function(xhr, settings) {
                                    var gotoreq = !0;
                                    return $.isFunction(ts.p.loadBeforeSend) && (gotoreq = ts.p.loadBeforeSend.call(ts, xhr, settings)),
                                    void 0 === gotoreq && (gotoreq = !0),
                                    gotoreq === !1 ? !1 : void beginReq()
                                }
                            }, $.jgrid.ajaxOptions, ts.p.ajaxGridOptions));
                            break;
                        case "xmlstring":
                            beginReq(),
                            dstr = "string" != typeof ts.p.datastr ? ts.p.datastr : $.parseXML(ts.p.datastr),
                            addXmlData(dstr),
                            $(ts).triggerHandler("jqGridLoadComplete", [dstr]),
                            lcf && ts.p.loadComplete.call(ts, dstr),
                            $(ts).triggerHandler("jqGridAfterLoadComplete", [dstr]),
                            ts.p.datatype = "local",
                            ts.p.datastr = null,
                            endReq();
                            break;
                        case "jsonstring":
                            beginReq(),
                            dstr = "string" == typeof ts.p.datastr ? $.jgrid.parse(ts.p.datastr) : ts.p.datastr,
                            addJSONData(dstr),
                            $(ts).triggerHandler("jqGridLoadComplete", [dstr]),
                            lcf && ts.p.loadComplete.call(ts, dstr),
                            $(ts).triggerHandler("jqGridAfterLoadComplete", [dstr]),
                            ts.p.datatype = "local",
                            ts.p.datastr = null,
                            endReq();
                            break;
                        case "local":
                        case "clientside":
                            beginReq(),
                            ts.p.datatype = "local",
                            ts.p._ald = !0;
                            var req = addLocalData();
                            addJSONData(req, rcnt, npage > 1, adjust),
                            $(ts).triggerHandler("jqGridLoadComplete", [req]),
                            lc && lc.call(ts, req),
                            $(ts).triggerHandler("jqGridAfterLoadComplete", [req]),
                            pvis && ts.grid.populateVisible(),
                            endReq(),
                            ts.p._ald = !1
                        }
                        ts.p._sort = !1
                    }
                }, setHeadCheckBox = function(checked) {
                    $("#cb_" + $.jgrid.jqID(ts.p.id), ts.grid.hDiv)[ts.p.useProp ? "prop" : "attr"]("checked", checked);
                    var fid = ts.p.frozenColumns ? ts.p.id + "_frozen" : "";
                    fid && $("#cb_" + $.jgrid.jqID(ts.p.id), ts.grid.fhDiv)[ts.p.useProp ? "prop" : "attr"]("checked", checked)
                }, setPager = function(pgid, tp) {
                    var pgcnt, lft, cent, rgt, twd, tdw, i, sep = "<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>", pginp = "", pgl = "<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>", str = "", clearVals = function(onpaging) {
                        var ret;
                        return $.isFunction(ts.p.onPaging) && (ret = ts.p.onPaging.call(ts, onpaging)),
                        "stop" === ret ? !1 : (ts.p.selrow = null,
                        ts.p.multiselect && (ts.p.selarrrow = [],
                        setHeadCheckBox(!1)),
                        ts.p.savedRow = [],
                        !0)
                    };
                    if (pgid = pgid.substr(1),
                    tp += "_" + pgid,
                    pgcnt = "pg_" + pgid,
                    lft = pgid + "_left",
                    cent = pgid + "_center",
                    rgt = pgid + "_right",
                    $("#" + $.jgrid.jqID(pgid)).append("<div id='" + pgcnt + "' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;'><tbody><tr><td id='" + lft + "' align='left'></td><td id='" + cent + "' align='center' style='white-space:pre;'></td><td id='" + rgt + "' align='right'></td></tr></tbody></table></div>").attr("dir", "ltr"),
                    ts.p.rowList.length > 0) {
                        str = '<td dir="' + dir + '">',
                        str += '<select class="ui-pg-selbox ui-widget-content ui-corner-all" role="listbox" title="' + ($.jgrid.getRegional(ts, "defaults.pgrecs", ts.p.pgrecs) || "") + '">';
                        var strnm;
                        for (i = 0; i < ts.p.rowList.length; i++)
                            strnm = ts.p.rowList[i].toString().split(":"),
                            1 === strnm.length && (strnm[1] = strnm[0]),
                            str += '<option role="option" value="' + strnm[0] + '"' + (intNum(ts.p.rowNum, 0) === intNum(strnm[0], 0) ? ' selected="selected"' : "") + ">" + strnm[1] + "</option>";
                        str += "</select></td>"
                    }
                    if ("rtl" === dir && (pgl += str),
                    ts.p.pginput === !0 && (pginp = "<td id='input" + tp + "' dir='" + dir + "'>" + $.jgrid.template($.jgrid.getRegional(ts, "defaults.pgtext", ts.p.pgtext) || "", "<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>", "<span id='sp_1_" + $.jgrid.jqID(pgid) + "'></span>") + "</td>"),
                    ts.p.pgbuttons === !0) {
                        var po = ["first" + tp, "prev" + tp, "next" + tp, "last" + tp];
                        "rtl" === dir && po.reverse(),
                        pgl += "<td id='" + po[0] + "' class='ui-pg-button ui-corner-all' title='" + ($.jgrid.getRegional(ts, "defaults.pgfirst", ts.p.pgfirst) || "") + "'><span class='ui-icon ui-icon-seek-first'></span></td>",
                        pgl += "<td id='" + po[1] + "' class='ui-pg-button ui-corner-all' title='" + ($.jgrid.getRegional(ts, "defaults.pgprev", ts.p.pgprev) || "") + "'><span class='ui-icon ui-icon-seek-prev'></span></td>",
                        pgl += "" !== pginp ? sep + pginp + sep : "",
                        pgl += "<td id='" + po[2] + "' class='ui-pg-button ui-corner-all' title='" + ($.jgrid.getRegional(ts, "defaults.pgnext", ts.p.pgnext) || "") + "'><span class='ui-icon ui-icon-seek-next'></span></td>",
                        pgl += "<td id='" + po[3] + "' class='ui-pg-button ui-corner-all' title='" + ($.jgrid.getRegional(ts, "defaults.pglast", ts.p.pglast) || "") + "'><span class='ui-icon ui-icon-seek-end'></span></td>"
                    } else
                        "" !== pginp && (pgl += pginp);
                    "ltr" === dir && (pgl += str),
                    pgl += "</tr></tbody></table>",
                    ts.p.viewrecords === !0 && $("td#" + pgid + "_" + ts.p.recordpos, "#" + pgcnt).append("<div dir='" + dir + "' style='text-align:" + ts.p.recordpos + "' class='ui-paging-info'></div>"),
                    $("td#" + pgid + "_" + ts.p.pagerpos, "#" + pgcnt).append(pgl),
                    tdw = $(".ui-jqgrid").css("font-size") || "11px",
                    $(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:" + tdw + ";visibility:hidden;' ></div>"),
                    twd = $(pgl).clone().appendTo("#testpg").width(),
                    $("#testpg").remove(),
                    twd > 0 && ("" !== pginp && (twd += 50),
                    $("td#" + pgid + "_" + ts.p.pagerpos, "#" + pgcnt).width(twd)),
                    ts.p._nvtd = [],
                    ts.p._nvtd[0] = twd ? Math.floor((ts.p.width - twd) / 2) : Math.floor(ts.p.width / 3),
                    ts.p._nvtd[1] = 0,
                    pgl = null,
                    $(".ui-pg-selbox", "#" + pgcnt).bind("change", function() {
                        return clearVals("records") ? (ts.p.page = Math.round(ts.p.rowNum * (ts.p.page - 1) / this.value - .5) + 1,
                        ts.p.rowNum = this.value,
                        ts.p.pager && $(".ui-pg-selbox", ts.p.pager).val(this.value),
                        ts.p.toppager && $(".ui-pg-selbox", ts.p.toppager).val(this.value),
                        populate(),
                        !1) : !1
                    }),
                    ts.p.pgbuttons === !0 && ($(".ui-pg-button", "#" + pgcnt).hover(function() {
                        $(this).hasClass("ui-state-disabled") ? this.style.cursor = "default" : ($(this).addClass("ui-state-hover"),
                        this.style.cursor = "pointer")
                    }, function() {
                        $(this).hasClass("ui-state-disabled") || ($(this).removeClass("ui-state-hover"),
                        this.style.cursor = "default")
                    }),
                    $("#first" + $.jgrid.jqID(tp) + ", #prev" + $.jgrid.jqID(tp) + ", #next" + $.jgrid.jqID(tp) + ", #last" + $.jgrid.jqID(tp)).click(function() {
                        if ($(this).hasClass("ui-state-disabled"))
                            return !1;
                        var cp = intNum(ts.p.page, 1)
                          , last = intNum(ts.p.lastpage, 1)
                          , selclick = !1
                          , fp = !0
                          , pp = !0
                          , np = !0
                          , lp = !0;
                        return 0 === last || 1 === last ? (fp = !1,
                        pp = !1,
                        np = !1,
                        lp = !1) : last > 1 && cp >= 1 ? 1 === cp ? (fp = !1,
                        pp = !1) : cp === last && (np = !1,
                        lp = !1) : last > 1 && 0 === cp && (np = !1,
                        lp = !1,
                        cp = last - 1),
                        clearVals(this.id.split("_")[0]) ? (this.id === "first" + tp && fp && (ts.p.page = 1,
                        selclick = !0),
                        this.id === "prev" + tp && pp && (ts.p.page = cp - 1,
                        selclick = !0),
                        this.id === "next" + tp && np && (ts.p.page = cp + 1,
                        selclick = !0),
                        this.id === "last" + tp && lp && (ts.p.page = last,
                        selclick = !0),
                        selclick && populate(),
                        !1) : !1
                    })),
                    ts.p.pginput === !0 && $("#" + pgcnt).on("keypress", "input.ui-pg-input", function(e) {
                        var key = e.charCode || e.keyCode || 0;
                        return 13 === key ? clearVals("user") ? ($(this).val(intNum($(this).val(), 1)),
                        ts.p.page = $(this).val() > 0 ? $(this).val() : ts.p.page,
                        populate(),
                        !1) : !1 : this
                    })
                }, multiSort = function(iCol, obj) {
                    var splas, ls, sort = "", cm = ts.p.colModel, fs = !1, selTh = ts.p.frozenColumns ? obj : ts.grid.headers[iCol].el, so = "";
                    $("span.ui-grid-ico-sort", selTh).addClass("ui-state-disabled"),
                    $(selTh).attr("aria-selected", "false"),
                    cm[iCol].lso ? "asc" === cm[iCol].lso ? (cm[iCol].lso += "-desc",
                    so = "desc") : "desc" === cm[iCol].lso ? (cm[iCol].lso += "-asc",
                    so = "asc") : "asc-desc" !== cm[iCol].lso && "desc-asc" !== cm[iCol].lso || (cm[iCol].lso = "") : cm[iCol].lso = so = cm[iCol].firstsortorder || "asc",
                    so ? ($("span.s-ico", selTh).show(),
                    $("span.ui-icon-" + so, selTh).removeClass("ui-state-disabled"),
                    $(selTh).attr("aria-selected", "true")) : ts.p.viewsortcols[0] || $("span.s-ico", selTh).hide(),
                    ts.p.sortorder = "",
                    $.each(cm, function(i) {
                        this.lso && (i > 0 && fs && (sort += ", "),
                        splas = this.lso.split("-"),
                        sort += cm[i].index || cm[i].name,
                        sort += " " + splas[splas.length - 1],
                        fs = !0,
                        ts.p.sortorder = splas[splas.length - 1])
                    }),
                    ls = sort.lastIndexOf(ts.p.sortorder),
                    sort = sort.substring(0, ls),
                    ts.p.sortname = sort
                }, sortData = function(index, idxcol, reload, sor, obj) {
                    if (ts.p.colModel[idxcol].sortable && !(ts.p.savedRow.length > 0)) {
                        if (reload || (ts.p.lastsort === idxcol && "" !== ts.p.sortname ? "asc" === ts.p.sortorder ? ts.p.sortorder = "desc" : "desc" === ts.p.sortorder && (ts.p.sortorder = "asc") : ts.p.sortorder = ts.p.colModel[idxcol].firstsortorder || "asc",
                        ts.p.page = 1),
                        ts.p.multiSort)
                            multiSort(idxcol, obj);
                        else {
                            if (sor) {
                                if (ts.p.lastsort === idxcol && ts.p.sortorder === sor && !reload)
                                    return;
                                ts.p.sortorder = sor
                            }
                            var previousSelectedTh = ts.grid.headers[ts.p.lastsort] ? ts.grid.headers[ts.p.lastsort].el : null
                              , newSelectedTh = ts.p.frozenColumns ? obj : ts.grid.headers[idxcol].el;
                            $("span.ui-grid-ico-sort", previousSelectedTh).addClass("ui-state-disabled"),
                            $(previousSelectedTh).attr("aria-selected", "false"),
                            ts.p.frozenColumns && (ts.grid.fhDiv.find("span.ui-grid-ico-sort").addClass("ui-state-disabled"),
                            ts.grid.fhDiv.find("th").attr("aria-selected", "false")),
                            $("span.ui-icon-" + ts.p.sortorder, newSelectedTh).removeClass("ui-state-disabled"),
                            $(newSelectedTh).attr("aria-selected", "true"),
                            ts.p.viewsortcols[0] || (ts.p.lastsort !== idxcol ? (ts.p.frozenColumns && ts.grid.fhDiv.find("span.s-ico").hide(),
                            $("span.s-ico", previousSelectedTh).hide(),
                            $("span.s-ico", newSelectedTh).show()) : "" === ts.p.sortname && $("span.s-ico", newSelectedTh).show()),
                            index = index.substring(5 + ts.p.id.length + 1),
                            ts.p.sortname = ts.p.colModel[idxcol].index || index
                        }
                        if ("stop" === $(ts).triggerHandler("jqGridSortCol", [ts.p.sortname, idxcol, ts.p.sortorder]))
                            return void (ts.p.lastsort = idxcol);
                        if ($.isFunction(ts.p.onSortCol) && "stop" === ts.p.onSortCol.call(ts, ts.p.sortname, idxcol, ts.p.sortorder))
                            return void (ts.p.lastsort = idxcol);
                        if ("local" === ts.p.datatype ? ts.p.deselectAfterSort && $(ts).jqGrid("resetSelection") : (ts.p.selrow = null,
                        ts.p.multiselect && setHeadCheckBox(!1),
                        ts.p.selarrrow = [],
                        ts.p.savedRow = []),
                        ts.p.scroll) {
                            var sscroll = ts.grid.bDiv.scrollLeft;
                            emptyRows.call(ts, !0, !1),
                            ts.grid.hDiv.scrollLeft = sscroll
                        }
                        ts.p.subGrid && "local" === ts.p.datatype && $("td.sgexpanded", "#" + $.jgrid.jqID(ts.p.id)).each(function() {
                            $(this).trigger("click")
                        }),
                        ts.p._sort = !0,
                        populate(),
                        ts.p.lastsort = idxcol,
                        ts.p.sortname !== index && idxcol && (ts.p.lastsort = idxcol)
                    }
                }, setColWidth = function() {
                    var lvc, cw, aw, cr, initwidth = 0, brd = $.jgrid.cell_width ? 0 : intNum(ts.p.cellLayout, 0), vc = 0, scw = intNum(ts.p.scrollOffset, 0), hs = !1, gw = 0;
                    $.each(ts.p.colModel, function() {
                        if (void 0 === this.hidden && (this.hidden = !1),
                        ts.p.grouping && ts.p.autowidth) {
                            var ind = $.inArray(this.name, ts.p.groupingView.groupField);
                            ind >= 0 && ts.p.groupingView.groupColumnShow.length > ind && (this.hidden = !ts.p.groupingView.groupColumnShow[ind])
                        }
                        this.widthOrg = cw = intNum(this.width, 0),
                        this.hidden === !1 && (initwidth += cw + brd,
                        this.fixed ? gw += cw + brd : vc++)
                    }),
                    isNaN(ts.p.width) && (ts.p.width = initwidth + (ts.p.shrinkToFit !== !1 || isNaN(ts.p.height) ? 0 : scw)),
                    grid.width = ts.p.width,
                    ts.p.tblwidth = initwidth,
                    ts.p.shrinkToFit === !1 && ts.p.forceFit === !0 && (ts.p.forceFit = !1),
                    ts.p.shrinkToFit === !0 && vc > 0 && (aw = grid.width - brd * vc - gw,
                    isNaN(ts.p.height) || (aw -= scw,
                    hs = !0),
                    initwidth = 0,
                    $.each(ts.p.colModel, function(i) {
                        this.hidden !== !1 || this.fixed || (cw = Math.round(aw * this.width / (ts.p.tblwidth - brd * vc - gw)),
                        this.width = cw,
                        initwidth += cw,
                        lvc = i)
                    }),
                    cr = 0,
                    hs ? grid.width - gw - (initwidth + brd * vc) !== scw && (cr = grid.width - gw - (initwidth + brd * vc) - scw) : hs || 1 === Math.abs(grid.width - gw - (initwidth + brd * vc)) || (cr = grid.width - gw - (initwidth + brd * vc)),
                    ts.p.colModel[lvc].width += cr,
                    ts.p.tblwidth = initwidth + cr + brd * vc + gw,
                    ts.p.tblwidth > ts.p.width && (ts.p.colModel[lvc].width -= ts.p.tblwidth - parseInt(ts.p.width, 10),
                    ts.p.tblwidth = ts.p.width))
                }, nextVisible = function(iCol) {
                    var i, ret = iCol, j = iCol;
                    for (i = iCol + 1; i < ts.p.colModel.length; i++)
                        if (ts.p.colModel[i].hidden !== !0) {
                            j = i;
                            break
                        }
                    return j - ret
                }, getOffset = function(iCol) {
                    var $th = $(ts.grid.headers[iCol].el)
                      , ret = [$th.position().left + $th.outerWidth()];
                    return "rtl" === ts.p.direction && (ret[0] = ts.p.width - ret[0]),
                    ret[0] -= ts.grid.bDiv.scrollLeft,
                    ret.push($(ts.grid.hDiv).position().top),
                    ret.push($(ts.grid.bDiv).offset().top - $(ts.grid.hDiv).offset().top + $(ts.grid.bDiv).height()),
                    ret
                }, getColumnHeaderIndex = function(th) {
                    var i, headers = ts.grid.headers, ci = $.jgrid.getCellIndex(th);
                    for (i = 0; i < headers.length; i++)
                        if (th === headers[i].el) {
                            ci = i;
                            break
                        }
                    return ci
                };
                for (this.p.id = this.id,
                -1 === $.inArray(ts.p.multikey, sortkeys) && (ts.p.multikey = !1),
                ts.p.keyName = !1,
                i = 0; i < ts.p.colModel.length; i++)
                    colTemplate = "string" == typeof ts.p.colModel[i].template ? null != $.jgrid.cmTemplate && "object" == typeof $.jgrid.cmTemplate[ts.p.colModel[i].template] ? $.jgrid.cmTemplate[ts.p.colModel[i].template] : {} : ts.p.colModel[i].template,
                    ts.p.colModel[i] = $.extend(!0, {}, ts.p.cmTemplate, colTemplate || {}, ts.p.colModel[i]),
                    ts.p.keyName === !1 && ts.p.colModel[i].key === !0 && (ts.p.keyName = ts.p.colModel[i].name);
                if (ts.p.sortorder = ts.p.sortorder.toLowerCase(),
                $.jgrid.cell_width = $.jgrid.cellWidth(),
                ts.p.grouping === !0 && (ts.p.scroll = !1,
                ts.p.rownumbers = !1,
                ts.p.treeGrid = !1,
                ts.p.gridview = !0),
                this.p.treeGrid === !0) {
                    try {
                        $(this).jqGrid("setTreeGrid")
                    } catch (_) {}
                    "local" !== ts.p.datatype && (ts.p.localReader = {
                        id: "_id_"
                    })
                }
                if (this.p.subGrid)
                    try {
                        $(ts).jqGrid("setSubGrid")
                    } catch (s) {}
                this.p.multiselect && (this.p.colNames.unshift("<input role='checkbox' id='cb_" + this.p.id + "' class='cbox' type='checkbox'/>"),
                this.p.colModel.unshift({
                    name: "cb",
                    width: $.jgrid.cell_width ? ts.p.multiselectWidth + ts.p.cellLayout : ts.p.multiselectWidth,
                    sortable: !1,
                    resizable: !1,
                    hidedlg: !0,
                    search: !1,
                    align: "center",
                    fixed: !0
                })),
                this.p.rownumbers && (this.p.colNames.unshift(""),
                this.p.colModel.unshift({
                    name: "rn",
                    width: ts.p.rownumWidth,
                    sortable: !1,
                    resizable: !1,
                    hidedlg: !0,
                    search: !1,
                    align: "center",
                    fixed: !0
                })),
                ts.p.xmlReader = $.extend(!0, {
                    root: "rows",
                    row: "row",
                    page: "rows>page",
                    total: "rows>total",
                    records: "rows>records",
                    repeatitems: !0,
                    cell: "cell",
                    id: "[id]",
                    userdata: "userdata",
                    subgrid: {
                        root: "rows",
                        row: "row",
                        repeatitems: !0,
                        cell: "cell"
                    }
                }, ts.p.xmlReader),
                ts.p.jsonReader = $.extend(!0, {
                    root: "rows",
                    page: "page",
                    total: "total",
                    records: "records",
                    repeatitems: !0,
                    cell: "cell",
                    id: "id",
                    userdata: "userdata",
                    subgrid: {
                        root: "rows",
                        repeatitems: !0,
                        cell: "cell"
                    }
                }, ts.p.jsonReader),
                ts.p.localReader = $.extend(!0, {
                    root: "rows",
                    page: "page",
                    total: "total",
                    records: "records",
                    repeatitems: !1,
                    cell: "cell",
                    id: "id",
                    userdata: "userdata",
                    subgrid: {
                        root: "rows",
                        repeatitems: !0,
                        cell: "cell"
                    }
                }, ts.p.localReader),
                ts.p.scroll && (ts.p.pgbuttons = !1,
                ts.p.pginput = !1,
                ts.p.rowList = []),
                ts.p.data.length && (normalizeData(),
                refreshIndex());
                var tdc, idn, w, res, sort, td, ptr, tbody, imgs, thead = "<thead><tr class='ui-jqgrid-labels' role='row'>", iac = "", idc = "", sortarr = [], sortord = [], sotmp = [];
                if (ts.p.shrinkToFit === !0 && ts.p.forceFit === !0)
                    for (i = ts.p.colModel.length - 1; i >= 0; i--)
                        if (!ts.p.colModel[i].hidden) {
                            ts.p.colModel[i].resizable = !1;
                            break
                        }
                if ("horizontal" === ts.p.viewsortcols[1] && (iac = " ui-i-asc",
                idc = " ui-i-desc"),
                tdc = isMSIE ? "class='ui-th-div-ie'" : "",
                imgs = "<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc" + iac + " ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-" + dir + "'></span>",
                imgs += "<span sort='desc' class='ui-grid-ico-sort ui-icon-desc" + idc + " ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-" + dir + "'></span></span>",
                ts.p.multiSort)
                    for (sortarr = ts.p.sortname.split(","),
                    i = 0; i < sortarr.length; i++)
                        sotmp = $.trim(sortarr[i]).split(" "),
                        sortarr[i] = $.trim(sotmp[0]),
                        sortord[i] = sotmp[1] ? $.trim(sotmp[1]) : ts.p.sortorder || "asc";
                for (i = 0; i < this.p.colNames.length; i++) {
                    var tooltip = ts.p.headertitles ? ' title="' + $.jgrid.stripHtml(ts.p.colNames[i]) + '"' : "";
                    thead += "<th id='" + ts.p.id + "_" + ts.p.colModel[i].name + "' role='columnheader' class='ui-state-default ui-th-column ui-th-" + dir + "'" + tooltip + ">",
                    idn = ts.p.colModel[i].index || ts.p.colModel[i].name,
                    thead += "<div id='jqgh_" + ts.p.id + "_" + ts.p.colModel[i].name + "' " + tdc + ">" + ts.p.colNames[i],
                    ts.p.colModel[i].width ? ts.p.colModel[i].width = parseInt(ts.p.colModel[i].width, 10) : ts.p.colModel[i].width = 150,
                    "boolean" != typeof ts.p.colModel[i].title && (ts.p.colModel[i].title = !0),
                    ts.p.colModel[i].lso = "",
                    idn === ts.p.sortname && (ts.p.lastsort = i),
                    ts.p.multiSort && (sotmp = $.inArray(idn, sortarr),
                    -1 !== sotmp && (ts.p.colModel[i].lso = sortord[sotmp])),
                    thead += imgs + "</div></th>"
                }
                if (thead += "</tr></thead>",
                imgs = null,
                $(this).append(thead),
                $("thead tr:first th", this).hover(function() {
                    $(this).addClass("ui-state-hover")
                }, function() {
                    $(this).removeClass("ui-state-hover")
                }),
                this.p.multiselect) {
                    var chk, emp = [];
                    $("#cb_" + $.jgrid.jqID(ts.p.id), this).bind("click", function() {
                        ts.p.selarrrow = [];
                        var froz = ts.p.frozenColumns === !0 ? ts.p.id + "_frozen" : "";
                        this.checked ? ($(ts.rows).each(function(i) {
                            i > 0 && ($(this).hasClass("ui-subgrid") || $(this).hasClass("jqgroup") || $(this).hasClass("ui-state-disabled") || $(this).hasClass("jqfoot") || ($("#jqg_" + $.jgrid.jqID(ts.p.id) + "_" + $.jgrid.jqID(this.id))[ts.p.useProp ? "prop" : "attr"]("checked", !0),
                            $(this).addClass("ui-state-highlight").attr("aria-selected", "true"),
                            ts.p.selarrrow.push(this.id),
                            ts.p.selrow = this.id,
                            froz && ($("#jqg_" + $.jgrid.jqID(ts.p.id) + "_" + $.jgrid.jqID(this.id), ts.grid.fbDiv)[ts.p.useProp ? "prop" : "attr"]("checked", !0),
                            $("#" + $.jgrid.jqID(this.id), ts.grid.fbDiv).addClass("ui-state-highlight"))))
                        }),
                        chk = !0,
                        emp = []) : ($(ts.rows).each(function(i) {
                            i > 0 && ($(this).hasClass("ui-subgrid") || $(this).hasClass("jqgroup") || $(this).hasClass("ui-state-disabled") || $(this).hasClass("jqfoot") || ($("#jqg_" + $.jgrid.jqID(ts.p.id) + "_" + $.jgrid.jqID(this.id))[ts.p.useProp ? "prop" : "attr"]("checked", !1),
                            $(this).removeClass("ui-state-highlight").attr("aria-selected", "false"),
                            emp.push(this.id),
                            froz && ($("#jqg_" + $.jgrid.jqID(ts.p.id) + "_" + $.jgrid.jqID(this.id), ts.grid.fbDiv)[ts.p.useProp ? "prop" : "attr"]("checked", !1),
                            $("#" + $.jgrid.jqID(this.id), ts.grid.fbDiv).removeClass("ui-state-highlight"))))
                        }),
                        ts.p.selrow = null,
                        chk = !1),
                        $(ts).triggerHandler("jqGridSelectAll", [chk ? ts.p.selarrrow : emp, chk]),
                        $.isFunction(ts.p.onSelectAll) && ts.p.onSelectAll.call(ts, chk ? ts.p.selarrrow : emp, chk)
                    })
                }
                if (ts.p.autowidth === !0) {
                    var pw = $(eg).innerWidth();
                    ts.p.width = pw > 0 ? pw : "nw"
                }
                setColWidth(),
                $(eg).css("width", grid.width + "px").append("<div class='ui-jqgrid-resize-mark' id='rs_m" + ts.p.id + "'>&#160;</div>"),
                ts.p.scrollPopUp && $(eg).append("<div class='loading ui-scroll-popup ui-widget-content' id='scroll_g" + ts.p.id + "'></div>"),
                $(gv).css("width", grid.width + "px"),
                thead = $("thead:first", ts).get(0);
                var tfoot = "";
                ts.p.footerrow && (tfoot += "<table role='presentation' style='width:" + ts.p.tblwidth + "px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-" + dir + "'>");
                var thr = $("tr:first", thead)
                  , firstr = "<tr class='jqgfirstrow' role='row' style='height:auto'>";
                if (ts.p.disableClick = !1,
                $("th", thr).each(function(j) {
                    w = ts.p.colModel[j].width,
                    void 0 === ts.p.colModel[j].resizable && (ts.p.colModel[j].resizable = !0),
                    ts.p.colModel[j].resizable ? (res = document.createElement("span"),
                    $(res).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-" + dir).css("cursor", "col-resize"),
                    $(this).addClass(ts.p.resizeclass)) : res = "",
                    $(this).css("width", w + "px").prepend(res),
                    res = null;
                    var hdcol = "";
                    ts.p.colModel[j].hidden && ($(this).css("display", "none"),
                    hdcol = "display:none;"),
                    firstr += "<td role='gridcell' style='height:0px;width:" + w + "px;" + hdcol + "'></td>",
                    grid.headers[j] = {
                        width: w,
                        el: this
                    },
                    sort = ts.p.colModel[j].sortable,
                    "boolean" != typeof sort && (ts.p.colModel[j].sortable = !0,
                    sort = !0);
                    var nm = ts.p.colModel[j].name;
                    "cb" !== nm && "subgrid" !== nm && "rn" !== nm && ts.p.viewsortcols[2] && $(">div", this).addClass("ui-jqgrid-sortable"),
                    sort && (ts.p.multiSort ? ts.p.viewsortcols[0] ? ($("div span.s-ico", this).show(),
                    ts.p.colModel[j].lso && $("div span.ui-icon-" + ts.p.colModel[j].lso, this).removeClass("ui-state-disabled")) : ts.p.colModel[j].lso && ($("div span.s-ico", this).show(),
                    $("div span.ui-icon-" + ts.p.colModel[j].lso, this).removeClass("ui-state-disabled")) : ts.p.viewsortcols[0] ? ($("div span.s-ico", this).show(),
                    j === ts.p.lastsort && $("div span.ui-icon-" + ts.p.sortorder, this).removeClass("ui-state-disabled")) : j === ts.p.lastsort && "" !== ts.p.sortname && ($("div span.s-ico", this).show(),
                    $("div span.ui-icon-" + ts.p.sortorder, this).removeClass("ui-state-disabled"))),
                    ts.p.footerrow && (tfoot += "<td role='gridcell' " + formatCol(j, 0, "", null, "", !1) + ">&#160;</td>")
                }).mousedown(function(e) {
                    if (1 === $(e.target).closest("th>span.ui-jqgrid-resize").length) {
                        var ci = getColumnHeaderIndex(this);
                        return ts.p.forceFit === !0 && (ts.p.nv = nextVisible(ci)),
                        grid.dragStart(ci, e, getOffset(ci)),
                        !1
                    }
                }).click(function(e) {
                    if (ts.p.disableClick)
                        return ts.p.disableClick = !1,
                        !1;
                    var r, d, s = "th>div.ui-jqgrid-sortable";
                    ts.p.viewsortcols[2] || (s = "th>div>span>span.ui-grid-ico-sort");
                    var t = $(e.target).closest(s);
                    if (1 === t.length) {
                        var ci;
                        if (ts.p.frozenColumns) {
                            var tid = $(this)[0].id.substring(ts.p.id.length + 1);
                            $(ts.p.colModel).each(function(i) {
                                return this.name === tid ? (ci = i,
                                !1) : void 0
                            })
                        } else
                            ci = getColumnHeaderIndex(this);
                        return ts.p.viewsortcols[2] || (r = !0,
                        d = t.attr("sort")),
                        null != ci && sortData($("div", this)[0].id, ci, r, d, this),
                        !1
                    }
                }),
                ts.p.sortable && $.fn.sortable)
                    try {
                        $(ts).jqGrid("sortableColumns", thr)
                    } catch (e) {}
                ts.p.footerrow && (tfoot += "</tr></tbody></table>"),
                firstr += "</tr>",
                tbody = document.createElement("tbody"),
                this.appendChild(tbody),
                $(this).addClass("ui-jqgrid-btable").append(firstr),
                firstr = null;
                var hTable = $("<table class='ui-jqgrid-htable' style='width:" + ts.p.tblwidth + "px' role='presentation' aria-labelledby='gbox_" + this.id + "' cellspacing='0' cellpadding='0' border='0'></table>").append(thead)
                  , hg = !(!ts.p.caption || ts.p.hiddengrid !== !0)
                  , hb = $("<div class='ui-jqgrid-hbox" + ("rtl" === dir ? "-rtl" : "") + "'></div>");
                thead = null,
                grid.hDiv = document.createElement("div"),
                $(grid.hDiv).css({
                    width: grid.width + "px"
                }).addClass("ui-state-default ui-jqgrid-hdiv").append(hb),
                $(hb).append(hTable),
                hTable = null,
                hg && $(grid.hDiv).hide(),
                ts.p.pager && ("string" == typeof ts.p.pager ? "#" !== ts.p.pager.substr(0, 1) && (ts.p.pager = "#" + ts.p.pager) : ts.p.pager = "#" + $(ts.p.pager).attr("id"),
                $(ts.p.pager).css({
                    width: grid.width + "px"
                }).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom").appendTo(eg),
                hg && $(ts.p.pager).hide(),
                setPager(ts.p.pager, "")),
                ts.p.cellEdit === !1 && ts.p.hoverrows === !0 && $(ts).bind("mouseover", function(e) {
                    ptr = $(e.target).closest("tr.jqgrow"),
                    "ui-subgrid" !== $(ptr).attr("class") && $(ptr).addClass("ui-state-hover")
                }).bind("mouseout", function(e) {
                    ptr = $(e.target).closest("tr.jqgrow"),
                    $(ptr).removeClass("ui-state-hover")
                });
                var ri, ci, tdHtml;
                $(ts).before(grid.hDiv).click(function(e) {
                    if (td = e.target,
                    ptr = $(td, ts.rows).closest("tr.jqgrow"),
                    0 === $(ptr).length || ptr[0].className.indexOf("ui-state-disabled") > -1 || ($(td, ts).closest("table.ui-jqgrid-btable").attr("id") || "").replace("_frozen", "") !== ts.id)
                        return this;
                    var scb = $(td).hasClass("cbox")
                      , cSel = $(ts).triggerHandler("jqGridBeforeSelectRow", [ptr[0].id, e]);
                    if (cSel = cSel !== !1 && "stop" !== cSel,
                    $.isFunction(ts.p.beforeSelectRow)) {
                        var allowRowSelect = ts.p.beforeSelectRow.call(ts, ptr[0].id, e);
                        allowRowSelect !== !1 && "stop" !== allowRowSelect || (cSel = !1)
                    }
                    if ("A" !== td.tagName && ("INPUT" !== td.tagName && "TEXTAREA" !== td.tagName && "OPTION" !== td.tagName && "SELECT" !== td.tagName || scb)) {
                        if (ri = ptr[0].id,
                        td = $(td).closest("tr.jqgrow>td"),
                        td.length > 0 && (ci = $.jgrid.getCellIndex(td),
                        tdHtml = $(td).closest("td,th").html(),
                        $(ts).triggerHandler("jqGridCellSelect", [ri, ci, tdHtml, e]),
                        $.isFunction(ts.p.onCellSelect) && ts.p.onCellSelect.call(ts, ri, ci, tdHtml, e)),
                        ts.p.cellEdit === !0)
                            if (ts.p.multiselect && scb && cSel)
                                $(ts).jqGrid("setSelection", ri, !0, e);
                            else if (td.length > 0) {
                                ri = ptr[0].rowIndex;
                                try {
                                    $(ts).jqGrid("editCell", ri, ci, !0)
                                } catch (_) {}
                            }
                        if (cSel) {
                            e[ts.p.multikey] ? $(ts).jqGrid("setSelection", ri, !0, e) : ts.p.multiselect && scb && (scb = $("#jqg_" + $.jgrid.jqID(ts.p.id) + "_" + ri).is(":checked"),
                            $("#jqg_" + $.jgrid.jqID(ts.p.id) + "_" + ri)[ts.p.useProp ? "prop" : "attr"]("checked", scb))
                        }
                    }
                }).bind("reloadGrid", function(e, opts) {
                    if (ts.p.treeGrid === !0 && (ts.p.datatype = ts.p.treedatatype),
                    opts && opts.current && ts.grid.selectionPreserver(ts),
                    "local" === ts.p.datatype ? ($(ts).jqGrid("resetSelection"),
                    ts.p.data.length && (normalizeData(),
                    refreshIndex())) : ts.p.treeGrid || (ts.p.selrow = null,
                    ts.p.multiselect && (ts.p.selarrrow = [],
                    setHeadCheckBox(!1)),
                    ts.p.savedRow = []),
                    ts.p.scroll && emptyRows.call(ts, !0, !1),
                    opts && opts.page) {
                        var page = opts.page;
                        page > ts.p.lastpage && (page = ts.p.lastpage),
                        1 > page && (page = 1),
                        ts.p.page = page,
                        ts.grid.prevRowHeight ? ts.grid.bDiv.scrollTop = (page - 1) * ts.grid.prevRowHeight * ts.p.rowNum : ts.grid.bDiv.scrollTop = 0;
                    }
                    return ts.grid.prevRowHeight && ts.p.scroll ? (delete ts.p.lastpage,
                    ts.grid.populateVisible()) : ts.grid.populate(),
                    ts.p.inlineNav === !0 && $(ts).jqGrid("showAddEditButtons"),
                    !1
                }).dblclick(function(e) {
                    if (td = e.target,
                    ptr = $(td, ts.rows).closest("tr.jqgrow"),
                    0 !== $(ptr).length) {
                        ri = ptr[0].rowIndex,
                        ci = $.jgrid.getCellIndex(td);
                        var dbcr = $(ts).triggerHandler("jqGridDblClickRow", [$(ptr).attr("id"), ri, ci, e]);
                        return null != dbcr ? dbcr : $.isFunction(ts.p.ondblClickRow) && (dbcr = ts.p.ondblClickRow.call(ts, $(ptr).attr("id"), ri, ci, e),
                        null != dbcr) ? dbcr : void 0
                    }
                }).bind("contextmenu", function(e) {
                    if (td = e.target,
                    ptr = $(td, ts.rows).closest("tr.jqgrow"),
                    0 !== $(ptr).length) {
                        ts.p.multiselect || $(ts).jqGrid("setSelection", ptr[0].id, !0, e),
                        ri = ptr[0].rowIndex,
                        ci = $.jgrid.getCellIndex(td);
                        var rcr = $(ts).triggerHandler("jqGridRightClickRow", [$(ptr).attr("id"), ri, ci, e]);
                        return null != rcr ? rcr : $.isFunction(ts.p.onRightClickRow) && (rcr = ts.p.onRightClickRow.call(ts, $(ptr).attr("id"), ri, ci, e),
                        null != rcr) ? rcr : void 0
                    }
                }),
                grid.bDiv = document.createElement("div"),
                isMSIE && "auto" === String(ts.p.height).toLowerCase() && (ts.p.height = "100%"),
                $(grid.bDiv).append($('<div style="position:relative;"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({
                    height: ts.p.height + (isNaN(ts.p.height) ? "" : "px"),
                    width: grid.width + "px"
                }).scroll(grid.scrollGrid),
                $("table:first", grid.bDiv).css({
                    width: ts.p.tblwidth + "px"
                }),
                $.support.tbody || 2 === $("tbody", this).length && $("tbody:gt(0)", this).remove(),
                ts.p.multikey && ($.jgrid.msie ? $(grid.bDiv).bind("selectstart", function() {
                    return !1
                }) : $(grid.bDiv).bind("mousedown", function() {
                    return !1
                })),
                hg && $(grid.bDiv).hide(),
                grid.cDiv = document.createElement("div");
                var arf = ts.p.hidegrid === !0 ? $("<a role='link' class='ui-jqgrid-titlebar-close ui-corner-all HeaderButton' title='" + ($.jgrid.getRegional(ts, "defaults.showhide", ts.p.showhide) || "") + "' />").hover(function() {
                    arf.addClass("ui-state-hover")
                }, function() {
                    arf.removeClass("ui-state-hover")
                }).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css("rtl" === dir ? "left" : "right", "0px") : "";
                if ($(grid.cDiv).append(arf).append("<span class='ui-jqgrid-title'>" + ts.p.caption + "</span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption" + ("rtl" === dir ? "-rtl" : "") + " ui-widget-header ui-corner-top ui-helper-clearfix"),
                $(grid.cDiv).insertBefore(grid.hDiv),
                ts.p.toolbar[0] && (grid.uDiv = document.createElement("div"),
                "top" === ts.p.toolbar[1] ? $(grid.uDiv).insertBefore(grid.hDiv) : "bottom" === ts.p.toolbar[1] && $(grid.uDiv).insertAfter(grid.hDiv),
                "both" === ts.p.toolbar[1] ? (grid.ubDiv = document.createElement("div"),
                $(grid.uDiv).addClass("ui-userdata ui-state-default").attr("id", "t_" + this.id).insertBefore(grid.hDiv),
                $(grid.ubDiv).addClass("ui-userdata ui-state-default").attr("id", "tb_" + this.id).insertAfter(grid.hDiv),
                hg && $(grid.ubDiv).hide()) : $(grid.uDiv).width(grid.width).addClass("ui-userdata ui-state-default").attr("id", "t_" + this.id),
                hg && $(grid.uDiv).hide()),
                ts.p.toppager && (ts.p.toppager = $.jgrid.jqID(ts.p.id) + "_toppager",
                grid.topDiv = $("<div id='" + ts.p.toppager + "'></div>")[0],
                ts.p.toppager = "#" + ts.p.toppager,
                $(grid.topDiv).addClass("ui-state-default ui-jqgrid-toppager").width(grid.width).insertBefore(grid.hDiv),
                setPager(ts.p.toppager, "_t")),
                ts.p.footerrow && (grid.sDiv = $("<div class='ui-jqgrid-sdiv'></div>")[0],
                hb = $("<div class='ui-jqgrid-hbox" + ("rtl" === dir ? "-rtl" : "") + "'></div>"),
                $(grid.sDiv).append(hb).width(grid.width).insertAfter(grid.hDiv),
                $(hb).append(tfoot),
                grid.footers = $(".ui-jqgrid-ftable", grid.sDiv)[0].rows[0].cells,
                ts.p.rownumbers && (grid.footers[0].className = "ui-state-default jqgrid-rownum"),
                hg && $(grid.sDiv).hide()),
                hb = null,
                ts.p.caption) {
                    var tdt = ts.p.datatype;
                    ts.p.hidegrid === !0 && ($(".ui-jqgrid-titlebar-close", grid.cDiv).click(function(e) {
                        var counter, onHdCl = $.isFunction(ts.p.onHeaderClick), elems = ".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv", self = this;
                        return ts.p.toolbar[0] === !0 && ("both" === ts.p.toolbar[1] && (elems += ", #" + $(grid.ubDiv).attr("id")),
                        elems += ", #" + $(grid.uDiv).attr("id")),
                        counter = $(elems, "#gview_" + $.jgrid.jqID(ts.p.id)).length,
                        "visible" === ts.p.gridstate ? $(elems, "#gbox_" + $.jgrid.jqID(ts.p.id)).slideUp("fast", function() {
                            counter--,
                            0 === counter && ($("span", self).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),
                            ts.p.gridstate = "hidden",
                            $("#gbox_" + $.jgrid.jqID(ts.p.id)).hasClass("ui-resizable") && $(".ui-resizable-handle", "#gbox_" + $.jgrid.jqID(ts.p.id)).hide(),
                            $(ts).triggerHandler("jqGridHeaderClick", [ts.p.gridstate, e]),
                            onHdCl && (hg || ts.p.onHeaderClick.call(ts, ts.p.gridstate, e)))
                        }) : "hidden" === ts.p.gridstate && $(elems, "#gbox_" + $.jgrid.jqID(ts.p.id)).slideDown("fast", function() {
                            counter--,
                            0 === counter && ($("span", self).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),
                            hg && (ts.p.datatype = tdt,
                            populate(),
                            hg = !1),
                            ts.p.gridstate = "visible",
                            $("#gbox_" + $.jgrid.jqID(ts.p.id)).hasClass("ui-resizable") && $(".ui-resizable-handle", "#gbox_" + $.jgrid.jqID(ts.p.id)).show(),
                            $(ts).triggerHandler("jqGridHeaderClick", [ts.p.gridstate, e]),
                            onHdCl && (hg || ts.p.onHeaderClick.call(ts, ts.p.gridstate, e)))
                        }),
                        !1
                    }),
                    hg && (ts.p.datatype = "local",
                    $(".ui-jqgrid-titlebar-close", grid.cDiv).trigger("click")))
                } else
                    $(grid.cDiv).hide(),
                    ts.p.toppager || $(grid.hDiv).addClass("ui-corner-top");
                $(grid.hDiv).after(grid.bDiv).mousemove(function(e) {
                    return grid.resizing ? (grid.dragMove(e),
                    !1) : void 0
                }),
                $(".ui-jqgrid-labels", grid.hDiv).bind("selectstart", function() {
                    return !1
                }),
                $(document).bind("mouseup.jqGrid" + ts.p.id, function() {
                    return grid.resizing ? (grid.dragEnd(),
                    !1) : !0
                }),
                ts.formatCol = formatCol,
                ts.sortData = sortData,
                ts.updatepager = updatepager,
                ts.refreshIndex = refreshIndex,
                ts.setHeadCheckBox = setHeadCheckBox,
                ts.constructTr = constructTr,
                ts.formatter = function(rowId, cellval, colpos, rwdat, act) {
                    return formatter(rowId, cellval, colpos, rwdat, act)
                }
                ,
                $.extend(grid, {
                    populate: populate,
                    emptyRows: emptyRows,
                    beginReq: beginReq,
                    endReq: endReq
                }),
                this.grid = grid,
                ts.addXmlData = function(d) {
                    addXmlData(d)
                }
                ,
                ts.addJSONData = function(d) {
                    addJSONData(d)
                }
                ,
                this.grid.cols = this.rows[0].cells,
                $(ts).triggerHandler("jqGridInitGrid"),
                $.isFunction(ts.p.onInitGrid) && ts.p.onInitGrid.call(ts),
                populate(),
                ts.p.hiddengrid = !1
            }
        })
    }
    ,
    $.jgrid.extend({
        getGridParam: function(name, module) {
            var ret, $t = this[0];
            if ($t && $t.grid) {
                if (void 0 === module && "string" != typeof module && (module = "jqGrid"),
                ret = $t.p,
                "jqGrid" !== module)
                    try {
                        ret = $($t).data(module)
                    } catch (e) {
                        ret = $t.p
                    }
                return name ? void 0 !== ret[name] ? ret[name] : null : ret
            }
        },
        setGridParam: function(newParams, overwrite) {
            return this.each(function() {
                if (null == overwrite && (overwrite = !1),
                this.grid && "object" == typeof newParams)
                    if (overwrite === !0) {
                        var params = $.extend({}, this.p, newParams);
                        this.p = params
                    } else
                        $.extend(!0, this.p, newParams)
            })
        },
        getGridRowById: function(rowid) {
            var row;
            return this.each(function() {
                try {
                    for (var i = this.rows.length; i--; )
                        if (rowid.toString() === this.rows[i].id) {
                            row = this.rows[i];
                            break
                        }
                } catch (e) {
                    row = $(this.grid.bDiv).find("#" + $.jgrid.jqID(rowid))
                }
            }),
            row
        },
        getDataIDs: function() {
            var len, ids = [], i = 0, j = 0;
            return this.each(function() {
                if (len = this.rows.length,
                len && len > 0)
                    for (; len > i; )
                        $(this.rows[i]).hasClass("jqgrow") && (ids[j] = this.rows[i].id,
                        j++),
                        i++
            }),
            ids
        },
        setSelection: function(selection, onsr, e) {
            return this.each(function() {
                function scrGrid(iR) {
                    var ch = $($t.grid.bDiv)[0].clientHeight
                      , st = $($t.grid.bDiv)[0].scrollTop
                      , rpos = $($t.rows[iR]).position().top
                      , rh = $t.rows[iR].clientHeight;
                    rpos + rh >= ch + st ? $($t.grid.bDiv)[0].scrollTop = rpos - (ch + st) + rh + st : ch + st > rpos && st > rpos && ($($t.grid.bDiv)[0].scrollTop = rpos)
                }
                var stat, pt, ner, ia, tpsr, fid, csr, $t = this;
                void 0 !== selection && (onsr = onsr !== !1,
                pt = $($t).jqGrid("getGridRowById", selection),
                !pt || !pt.className || pt.className.indexOf("ui-state-disabled") > -1 || ($t.p.scrollrows === !0 && (ner = $($t).jqGrid("getGridRowById", selection).rowIndex,
                ner >= 0 && scrGrid(ner)),
                $t.p.frozenColumns === !0 && (fid = $t.p.id + "_frozen"),
                $t.p.multiselect ? ($t.setHeadCheckBox(!1),
                $t.p.selrow = pt.id,
                ia = $.inArray($t.p.selrow, $t.p.selarrrow),
                -1 === ia ? ("ui-subgrid" !== pt.className && $(pt).addClass("ui-state-highlight").attr("aria-selected", "true"),
                stat = !0,
                $t.p.selarrrow.push($t.p.selrow)) : ("ui-subgrid" !== pt.className && $(pt).removeClass("ui-state-highlight").attr("aria-selected", "false"),
                stat = !1,
                $t.p.selarrrow.splice(ia, 1),
                tpsr = $t.p.selarrrow[0],
                $t.p.selrow = void 0 === tpsr ? null : tpsr),
                $("#jqg_" + $.jgrid.jqID($t.p.id) + "_" + $.jgrid.jqID(pt.id))[$t.p.useProp ? "prop" : "attr"]("checked", stat),
                fid && (-1 === ia ? $("#" + $.jgrid.jqID(selection), "#" + $.jgrid.jqID(fid)).addClass("ui-state-highlight") : $("#" + $.jgrid.jqID(selection), "#" + $.jgrid.jqID(fid)).removeClass("ui-state-highlight"),
                $("#jqg_" + $.jgrid.jqID($t.p.id) + "_" + $.jgrid.jqID(selection), "#" + $.jgrid.jqID(fid))[$t.p.useProp ? "prop" : "attr"]("checked", stat)),
                onsr && ($($t).triggerHandler("jqGridSelectRow", [pt.id, stat, e]),
                $t.p.onSelectRow && $t.p.onSelectRow.call($t, pt.id, stat, e))) : "ui-subgrid" !== pt.className && ($t.p.selrow !== pt.id ? (csr = $($t).jqGrid("getGridRowById", $t.p.selrow),
                csr && $(csr).removeClass("ui-state-highlight").attr({
                    "aria-selected": "false",
                    tabindex: "-1"
                }),
                $(pt).addClass("ui-state-highlight").attr({
                    "aria-selected": "true",
                    tabindex: "0"
                }),
                fid && ($("#" + $.jgrid.jqID($t.p.selrow), "#" + $.jgrid.jqID(fid)).removeClass("ui-state-highlight"),
                $("#" + $.jgrid.jqID(selection), "#" + $.jgrid.jqID(fid)).addClass("ui-state-highlight")),
                stat = !0) : stat = !1,
                $t.p.selrow = pt.id,
                onsr && ($($t).triggerHandler("jqGridSelectRow", [pt.id, stat, e]),
                $t.p.onSelectRow && $t.p.onSelectRow.call($t, pt.id, stat, e)))))
            })
        },
        resetSelection: function(rowid) {
            return this.each(function() {
                var sr, fid, t = this;
                if (t.p.frozenColumns === !0 && (fid = t.p.id + "_frozen"),
                void 0 !== rowid) {
                    if (sr = rowid === t.p.selrow ? t.p.selrow : rowid,
                    $("#" + $.jgrid.jqID(t.p.id) + " tbody:first tr#" + $.jgrid.jqID(sr)).removeClass("ui-state-highlight").attr("aria-selected", "false"),
                    fid && $("#" + $.jgrid.jqID(sr), "#" + $.jgrid.jqID(fid)).removeClass("ui-state-highlight"),
                    t.p.multiselect) {
                        $("#jqg_" + $.jgrid.jqID(t.p.id) + "_" + $.jgrid.jqID(sr), "#" + $.jgrid.jqID(t.p.id))[t.p.useProp ? "prop" : "attr"]("checked", !1),
                        fid && $("#jqg_" + $.jgrid.jqID(t.p.id) + "_" + $.jgrid.jqID(sr), "#" + $.jgrid.jqID(fid))[t.p.useProp ? "prop" : "attr"]("checked", !1),
                        t.setHeadCheckBox(!1);
                        var ia = $.inArray($.jgrid.jqID(sr), t.p.selarrrow);
                        -1 !== ia && t.p.selarrrow.splice(ia, 1)
                    }
                    sr = null
                } else
                    t.p.multiselect ? ($(t.p.selarrrow).each(function(i, n) {
                        $($(t).jqGrid("getGridRowById", n)).removeClass("ui-state-highlight").attr("aria-selected", "false"),
                        $("#jqg_" + $.jgrid.jqID(t.p.id) + "_" + $.jgrid.jqID(n))[t.p.useProp ? "prop" : "attr"]("checked", !1),
                        fid && ($("#" + $.jgrid.jqID(n), "#" + $.jgrid.jqID(fid)).removeClass("ui-state-highlight"),
                        $("#jqg_" + $.jgrid.jqID(t.p.id) + "_" + $.jgrid.jqID(n), "#" + $.jgrid.jqID(fid))[t.p.useProp ? "prop" : "attr"]("checked", !1))
                    }),
                    t.setHeadCheckBox(!1),
                    t.p.selarrrow = [],
                    t.p.selrow = null) : t.p.selrow && ($("#" + $.jgrid.jqID(t.p.id) + " tbody:first tr#" + $.jgrid.jqID(t.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected", "false"),
                    fid && $("#" + $.jgrid.jqID(t.p.selrow), "#" + $.jgrid.jqID(fid)).removeClass("ui-state-highlight"),
                    t.p.selrow = null);
                t.p.cellEdit === !0 && parseInt(t.p.iCol, 10) >= 0 && parseInt(t.p.iRow, 10) >= 0 && ($("td:eq(" + t.p.iCol + ")", t.rows[t.p.iRow]).removeClass("edit-cell ui-state-highlight"),
                $(t.rows[t.p.iRow]).removeClass("selected-row ui-state-hover")),
                t.p.savedRow = []
            })
        },
        getRowData: function(rowid, usedata) {
            var resall, len, res = {}, getall = !1, j = 0;
            return this.each(function() {
                var nm, ind, $t = this;
                if (null == rowid)
                    getall = !0,
                    resall = [],
                    len = $t.rows.length;
                else {
                    if (ind = $($t).jqGrid("getGridRowById", rowid),
                    !ind)
                        return res;
                    len = 2
                }
                for (usedata && usedata === !0 && $t.p.data.length > 0 || (usedata = !1); len > j; )
                    getall && (ind = $t.rows[j]),
                    $(ind).hasClass("jqgrow") && (usedata ? res = $t.p.data[$t.p._index[ind.id]] : $('td[role="gridcell"]', ind).each(function(i) {
                        if (nm = $t.p.colModel[i].name,
                        "cb" !== nm && "subgrid" !== nm && "rn" !== nm)
                            if ($t.p.treeGrid === !0 && nm === $t.p.ExpandColumn)
                                res[nm] = $.jgrid.htmlDecode($("span:first", this).html());
                            else
                                try {
                                    res[nm] = $.unformat.call($t, this, {
                                        rowId: ind.id,
                                        colModel: $t.p.colModel[i]
                                    }, i)
                                } catch (e) {
                                    res[nm] = $.jgrid.htmlDecode($(this).html())
                                }
                    }),
                    getall && (resall.push(res),
                    res = {})),
                    j++
            }),
            resall || res
        },
        delRowData: function(rowid) {
            var rowInd, ia, nextRow, success = !1;
            return this.each(function() {
                var $t = this;
                if (rowInd = $($t).jqGrid("getGridRowById", rowid),
                !rowInd)
                    return !1;
                if ($t.p.subGrid && (nextRow = $(rowInd).next(),
                nextRow.hasClass("ui-subgrid") && nextRow.remove()),
                $(rowInd).remove(),
                $t.p.records--,
                $t.p.reccount--,
                $t.updatepager(!0, !1),
                success = !0,
                $t.p.multiselect && (ia = $.inArray(rowid, $t.p.selarrrow),
                -1 !== ia && $t.p.selarrrow.splice(ia, 1)),
                $t.p.multiselect && $t.p.selarrrow.length > 0 ? $t.p.selrow = $t.p.selarrrow[$t.p.selarrrow.length - 1] : $t.p.selrow = null,
                "local" === $t.p.datatype) {
                    var id = $.jgrid.stripPref($t.p.idPrefix, rowid)
                      , pos = $t.p._index[id];
                    void 0 !== pos && ($t.p.data.splice(pos, 1),
                    $t.refreshIndex())
                }
                if ($t.p.altRows === !0 && success) {
                    var cn = $t.p.altclass;
                    $($t.rows).each(function(i) {
                        i % 2 === 1 ? $(this).addClass(cn) : $(this).removeClass(cn)
                    })
                }
            }),
            success
        },
        setRowData: function(rowid, data, cssp) {
            var nm, title, success = !0;
            return this.each(function() {
                if (!this.grid)
                    return !1;
                var vl, ind, t = this, cp = typeof cssp, lcdata = {};
                if (ind = $(this).jqGrid("getGridRowById", rowid),
                !ind)
                    return !1;
                if (data)
                    try {
                        if ($(this.p.colModel).each(function(i) {
                            nm = this.name;
                            var dval = $.jgrid.getAccessor(data, nm);
                            void 0 !== dval && (lcdata[nm] = this.formatter && "string" == typeof this.formatter && "date" === this.formatter ? $.unformat.date.call(t, dval, this) : dval,
                            vl = t.formatter(rowid, lcdata[nm], i, data, "edit"),
                            title = this.title ? {
                                title: $.jgrid.stripHtml(vl)
                            } : {},
                            t.p.treeGrid === !0 && nm === t.p.ExpandColumn ? $("td[role='gridcell']:eq(" + i + ") > span:first", ind).html(vl).attr(title) : $("td[role='gridcell']:eq(" + i + ")", ind).html(vl).attr(title))
                        }),
                        "local" === t.p.datatype) {
                            var key, id = $.jgrid.stripPref(t.p.idPrefix, rowid), pos = t.p._index[id];
                            if (t.p.treeGrid)
                                for (key in t.p.treeReader)
                                    t.p.treeReader.hasOwnProperty(key) && delete lcdata[t.p.treeReader[key]];
                            void 0 !== pos && (t.p.data[pos] = $.extend(!0, t.p.data[pos], lcdata)),
                            lcdata = null
                        }
                    } catch (e) {
                        success = !1
                    }
                success && ("string" === cp ? $(ind).addClass(cssp) : null !== cssp && "object" === cp && $(ind).css(cssp),
                $(t).triggerHandler("jqGridAfterGridComplete"))
            }),
            success
        },
        addRowData: function(rowid, rdata, pos, src) {
            -1 == ["first", "last", "before", "after"].indexOf(pos) && (pos = "last");
            var nm, row, gi, si, ni, sind, i, v, aradd, cnm, cn, data, cm, id, success = !1, prp = "";
            return rdata && ($.isArray(rdata) ? (aradd = !0,
            cnm = rowid) : (rdata = [rdata],
            aradd = !1),
            this.each(function() {
                var t = this
                  , datalen = rdata.length;
                ni = t.p.rownumbers === !0 ? 1 : 0,
                gi = t.p.multiselect === !0 ? 1 : 0,
                si = t.p.subGrid === !0 ? 1 : 0,
                aradd || (void 0 !== rowid ? rowid = String(rowid) : (rowid = $.jgrid.randId(),
                t.p.keyName !== !1 && (cnm = t.p.keyName,
                void 0 !== rdata[0][cnm] && (rowid = rdata[0][cnm])))),
                cn = t.p.altclass;
                for (var k = 0, cna = "", lcdata = {}, air = !!$.isFunction(t.p.afterInsertRow); datalen > k; ) {
                    if (data = rdata[k],
                    row = [],
                    aradd) {
                        try {
                            rowid = data[cnm],
                            void 0 === rowid && (rowid = $.jgrid.randId())
                        } catch (e) {
                            rowid = $.jgrid.randId()
                        }
                        cna = t.p.altRows === !0 && (t.rows.length - 1) % 2 === 0 ? cn : ""
                    }
                    for (id = rowid,
                    rowid = t.p.idPrefix + rowid,
                    ni && (prp = t.formatCol(0, 1, "", null, rowid, !0),
                    row[row.length] = '<td role="gridcell" class="ui-state-default jqgrid-rownum" ' + prp + ">0</td>"),
                    gi && (v = '<input role="checkbox" type="checkbox" id="jqg_' + t.p.id + "_" + rowid + '" class="cbox"/>',
                    prp = t.formatCol(ni, 1, "", null, rowid, !0),
                    row[row.length] = '<td role="gridcell" ' + prp + ">" + v + "</td>"),
                    si && (row[row.length] = $(t).jqGrid("addSubGridCell", gi + ni, 1)),
                    i = gi + si + ni; i < t.p.colModel.length; i++)
                        cm = t.p.colModel[i],
                        nm = cm.name,
                        lcdata[nm] = data[nm],
                        v = t.formatter(rowid, $.jgrid.getAccessor(data, nm), i, data),
                        prp = t.formatCol(i, 1, v, data, rowid, lcdata),
                        row[row.length] = '<td role="gridcell" ' + prp + ">" + v + "</td>";
                    if (row.unshift(t.constructTr(rowid, !1, cna, lcdata, data, !1)),
                    row[row.length] = "</tr>",
                    0 === t.rows.length)
                        $("table:first", t.grid.bDiv).append(row.join(""));
                    else
                        switch (pos) {
                        case "last":
                            $(t.rows[t.rows.length - 1]).after(row.join("")),
                            sind = t.rows.length - 1;
                            break;
                        case "first":
                            $(t.rows[0]).after(row.join("")),
                            sind = 1;
                            break;
                        case "after":
                            sind = $(t).jqGrid("getGridRowById", src),
                            sind && ($(t.rows[sind.rowIndex + 1]).hasClass("ui-subgrid") ? $(t.rows[sind.rowIndex + 1]).after(row) : $(sind).after(row.join("")),
                            sind = sind.rowIndex + 1);
                            break;
                        case "before":
                            sind = $(t).jqGrid("getGridRowById", src),
                            sind && ($(sind).before(row.join("")),
                            sind = sind.rowIndex - 1)
                        }
                    t.p.subGrid === !0 && $(t).jqGrid("addSubGrid", gi + ni, sind),
                    t.p.records++,
                    t.p.reccount++,
                    $(t).triggerHandler("jqGridAfterInsertRow", [rowid, data, data]),
                    air && t.p.afterInsertRow.call(t, rowid, data, data),
                    k++,
                    "local" === t.p.datatype && (lcdata[t.p.localReader.id] = id,
                    t.p._index[id] = t.p.data.length,
                    t.p.data.push(lcdata),
                    lcdata = {})
                }
                t.p.altRows !== !0 || aradd || ("last" === pos ? (t.rows.length - 1) % 2 === 1 && $(t.rows[t.rows.length - 1]).addClass(cn) : $(t.rows).each(function(i) {
                    i % 2 === 1 ? $(this).addClass(cn) : $(this).removeClass(cn)
                })),
                t.updatepager(!0, !0),
                success = !0
            })),
            success
        },
        footerData: function(action, data, format) {
            function isEmpty(obj) {
                var i;
                for (i in obj)
                    if (obj.hasOwnProperty(i))
                        return !1;
                return !0
            }
            var nm, title, success = !1, res = {};
            return void 0 === action && (action = "get"),
            "boolean" != typeof format && (format = !0),
            action = action.toLowerCase(),
            this.each(function() {
                var vl, t = this;
                return t.grid && t.p.footerrow ? "set" === action && isEmpty(data) ? !1 : (success = !0,
                void $(this.p.colModel).each(function(i) {
                    nm = this.name,
                    "set" === action ? void 0 !== data[nm] && (vl = format ? t.formatter("", data[nm], i, data, "edit") : data[nm],
                    title = this.title ? {
                        title: $.jgrid.stripHtml(vl)
                    } : {},
                    $("tr.footrow td:eq(" + i + ")", t.grid.sDiv).html(vl).attr(title),
                    success = !0) : "get" === action && (res[nm] = $("tr.footrow td:eq(" + i + ")", t.grid.sDiv).html())
                })) : !1
            }),
            "get" === action ? res : success
        },
        showHideCol: function(colname, show) {
            return this.each(function() {
                var cw, $t = this, fndh = !1, brd = $.jgrid.cell_width ? 0 : $t.p.cellLayout;
                if ($t.grid) {
                    "string" == typeof colname && (colname = [colname]),
                    show = "none" !== show ? "" : "none";
                    var sw = "" === show
                      , gh = $t.p.groupHeader && ("object" == typeof $t.p.groupHeader || $.isFunction($t.p.groupHeader));
                    gh && $($t).jqGrid("destroyGroupHeader", !1),
                    $(this.p.colModel).each(function(i) {
                        if (-1 !== $.inArray(this.name, colname) && this.hidden === sw) {
                            if ($t.p.frozenColumns === !0 && this.frozen === !0)
                                return !0;
                            $("tr[role=row]", $t.grid.hDiv).each(function() {
                                $(this.cells[i]).css("display", show)
                            }),
                            $($t.rows).each(function() {
                                $(this).hasClass("jqgroup") || $(this.cells[i]).css("display", show)
                            }),
                            $t.p.footerrow && $("tr.footrow td:eq(" + i + ")", $t.grid.sDiv).css("display", show),
                            cw = parseInt(this.width, 10),
                            "none" === show ? $t.p.tblwidth -= cw + brd : $t.p.tblwidth += cw + brd,
                            this.hidden = !sw,
                            fndh = !0,
                            $($t).triggerHandler("jqGridShowHideCol", [sw, this.name, i])
                        }
                    }),
                    fndh === !0 && ($t.p.shrinkToFit !== !0 || isNaN($t.p.height) || ($t.p.tblwidth += parseInt($t.p.scrollOffset, 10)),
                    $($t).jqGrid("setGridWidth", $t.p.shrinkToFit === !0 ? $t.p.tblwidth : $t.p.width)),
                    gh && $($t).jqGrid("setGroupHeaders", $t.p.groupHeader)
                }
            })
        },
        hideCol: function(colname) {
            return this.each(function() {
                $(this).jqGrid("showHideCol", colname, "none")
            })
        },
        showCol: function(colname) {
            return this.each(function() {
                $(this).jqGrid("showHideCol", colname, "")
            })
        },
        remapColumns: function(permutation, updateCells, keepHeader) {
            function resortArray(a) {
                var ac;
                ac = a.length ? $.makeArray(a) : $.extend({}, a),
                $.each(permutation, function(i) {
                    a[i] = ac[this]
                })
            }
            function resortRows(parent, clobj) {
                $(">tr" + (clobj || ""), parent).each(function() {
                    var row = this
                      , elems = $.makeArray(row.cells);
                    $.each(permutation, function() {
                        var e = elems[this];
                        e && row.appendChild(e)
                    })
                })
            }
            var ts = this.get(0);
            resortArray(ts.p.colModel),
            resortArray(ts.p.colNames),
            resortArray(ts.grid.headers),
            resortRows($("thead:first", ts.grid.hDiv), keepHeader && ":not(.ui-jqgrid-labels)"),
            updateCells && resortRows($("#" + $.jgrid.jqID(ts.p.id) + " tbody:first"), ".jqgfirstrow, tr.jqgrow, tr.jqfoot"),
            ts.p.footerrow && resortRows($("tbody:first", ts.grid.sDiv)),
            ts.p.remapColumns && (ts.p.remapColumns.length ? resortArray(ts.p.remapColumns) : ts.p.remapColumns = $.makeArray(permutation)),
            ts.p.lastsort = $.inArray(ts.p.lastsort, permutation),
            ts.p.treeGrid && (ts.p.expColInd = $.inArray(ts.p.expColInd, permutation)),
            $(ts).triggerHandler("jqGridRemapColumns", [permutation, updateCells, keepHeader])
        },
        setGridWidth: function(nwidth, shrink) {
            return this.each(function() {
                if (this.grid) {
                    var cw, lvc, aw, cr, $t = this, initwidth = 0, brd = $.jgrid.cell_width ? 0 : $t.p.cellLayout, vc = 0, hs = !1, scw = $t.p.scrollOffset, gw = 0;
                    if ("boolean" != typeof shrink && (shrink = $t.p.shrinkToFit),
                    !isNaN(nwidth)) {
                        if (nwidth = parseInt(nwidth, 10),
                        $t.grid.width = $t.p.width = nwidth,
                        $("#gbox_" + $.jgrid.jqID($t.p.id)).css("width", nwidth + "px"),
                        $("#gview_" + $.jgrid.jqID($t.p.id)).css("width", nwidth + "px"),
                        $($t.grid.bDiv).css("width", nwidth + "px"),
                        $($t.grid.hDiv).css("width", nwidth + "px"),
                        $t.p.pager && $($t.p.pager).css("width", nwidth + "px"),
                        $t.p.toppager && $($t.p.toppager).css("width", nwidth + "px"),
                        $t.p.toolbar[0] === !0 && ($($t.grid.uDiv).css("width", nwidth + "px"),
                        "both" === $t.p.toolbar[1] && $($t.grid.ubDiv).css("width", nwidth + "px")),
                        $t.p.footerrow && $($t.grid.sDiv).css("width", nwidth + "px"),
                        shrink === !1 && $t.p.forceFit === !0 && ($t.p.forceFit = !1),
                        shrink === !0) {
                            if ($.each($t.p.colModel, function() {
                                this.hidden === !1 && (cw = this.widthOrg,
                                initwidth += cw + brd,
                                this.fixed ? gw += cw + brd : vc++)
                            }),
                            0 === vc)
                                return;
                            $t.p.tblwidth = initwidth,
                            aw = nwidth - brd * vc - gw,
                            isNaN($t.p.height) || ($($t.grid.bDiv)[0].clientHeight < $($t.grid.bDiv)[0].scrollHeight || 1 === $t.rows.length) && (hs = !0,
                            aw -= scw),
                            initwidth = 0;
                            var cle = $t.grid.cols.length > 0;
                            if ($.each($t.p.colModel, function(i) {
                                if (this.hidden === !1 && !this.fixed) {
                                    if (cw = this.widthOrg,
                                    cw = Math.round(aw * cw / ($t.p.tblwidth - brd * vc - gw)),
                                    0 > cw)
                                        return;
                                    this.width = cw,
                                    initwidth += cw,
                                    $t.grid.headers[i].width = cw,
                                    $t.grid.headers[i].el.style.width = cw + "px",
                                    $t.p.footerrow && ($t.grid.footers[i].style.width = cw + "px"),
                                    cle && ($t.grid.cols[i].style.width = cw + "px"),
                                    lvc = i
                                }
                            }),
                            !lvc)
                                return;
                            if (cr = 0,
                            hs ? nwidth - gw - (initwidth + brd * vc) !== scw && (cr = nwidth - gw - (initwidth + brd * vc) - scw) : 1 !== Math.abs(nwidth - gw - (initwidth + brd * vc)) && (cr = nwidth - gw - (initwidth + brd * vc)),
                            $t.p.colModel[lvc].width += cr,
                            $t.p.tblwidth = initwidth + cr + brd * vc + gw,
                            $t.p.tblwidth > nwidth) {
                                var delta = $t.p.tblwidth - parseInt(nwidth, 10);
                                $t.p.tblwidth = nwidth,
                                cw = $t.p.colModel[lvc].width = $t.p.colModel[lvc].width - delta
                            } else
                                cw = $t.p.colModel[lvc].width;
                            $t.grid.headers[lvc].width = cw,
                            $t.grid.headers[lvc].el.style.width = cw + "px",
                            cle && ($t.grid.cols[lvc].style.width = cw + "px"),
                            $t.p.footerrow && ($t.grid.footers[lvc].style.width = cw + "px")
                        }
                        $t.p.tblwidth && ($("table:first", $t.grid.bDiv).css("width", $t.p.tblwidth + "px"),
                        $("table:first", $t.grid.hDiv).css("width", $t.p.tblwidth + "px"),
                        $t.grid.hDiv.scrollLeft = $t.grid.bDiv.scrollLeft,
                        $t.p.footerrow && $("table:first", $t.grid.sDiv).css("width", $t.p.tblwidth + "px"))
                    }
                }
            })
        },
        setGridHeight: function(nh) {
            return this.each(function() {
                var $t = this;
                if ($t.grid) {
                    var bDiv = $($t.grid.bDiv);
                    bDiv.css({
                        height: nh + (isNaN(nh) ? "" : "px")
                    }),
                    $t.p.frozenColumns === !0 && $("#" + $.jgrid.jqID($t.p.id) + "_frozen").parent().height(bDiv.height() - 16),
                    $t.p.height = nh,
                    $t.p.scroll && $t.grid.populateVisible()
                }
            })
        },
        setCaption: function(newcap) {
            return this.each(function() {
                this.p.caption = newcap,
                $("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl", this.grid.cDiv).html(newcap),
                $(this.grid.cDiv).show(),
                $(this.grid.hDiv).removeClass("ui-corner-top")
            })
        },
        setLabel: function(colname, nData, prop, attrp) {
            return this.each(function() {
                var $t = this
                  , pos = -1;
                if ($t.grid && void 0 !== colname && ($($t.p.colModel).each(function(i) {
                    return this.name === colname ? (pos = i,
                    !1) : void 0
                }),
                pos >= 0)) {
                    var thecol = $("tr.ui-jqgrid-labels th:eq(" + pos + ")", $t.grid.hDiv);
                    if (nData) {
                        var ico = $(".s-ico", thecol);
                        $("[id^=jqgh_]", thecol).empty().html(nData).append(ico),
                        $t.p.colNames[pos] = nData
                    }
                    prop && ("string" == typeof prop ? $(thecol).addClass(prop) : $(thecol).css(prop)),
                    "object" == typeof attrp && $(thecol).attr(attrp)
                }
            })
        },
        setCell: function(rowid, colname, nData, cssp, attrp, forceupd) {
            return this.each(function() {
                var v, title, $t = this, pos = -1;
                if ($t.grid && (isNaN(colname) ? $($t.p.colModel).each(function(i) {
                    return this.name === colname ? (pos = i,
                    !1) : void 0
                }) : pos = parseInt(colname, 10),
                pos >= 0)) {
                    var ind = $($t).jqGrid("getGridRowById", rowid);
                    if (ind) {
                        var tcell = $("td:eq(" + pos + ")", ind)
                          , cl = 0
                          , rawdat = [];
                        if ("" !== nData || forceupd === !0) {
                            if (void 0 !== ind.cells)
                                for (; cl < ind.cells.length; )
                                    rawdat.push(ind.cells[cl].innerHTML),
                                    cl++;
                            if (v = $t.formatter(rowid, nData, pos, rawdat, "edit"),
                            title = $t.p.colModel[pos].title ? {
                                title: $.jgrid.stripHtml(v)
                            } : {},
                            $t.p.treeGrid && $(".tree-wrap", $(tcell)).length > 0 ? $("span", $(tcell)).html(v).attr(title) : $(tcell).html(v).attr(title),
                            "local" === $t.p.datatype) {
                                var index, cm = $t.p.colModel[pos];
                                nData = cm.formatter && "string" == typeof cm.formatter && "date" === cm.formatter ? $.unformat.date.call($t, nData, cm) : nData,
                                index = $t.p._index[$.jgrid.stripPref($t.p.idPrefix, rowid)],
                                void 0 !== index && ($t.p.data[index][cm.name] = nData)
                            }
                        }
                        "string" == typeof cssp ? $(tcell).addClass(cssp) : cssp && $(tcell).css(cssp),
                        "object" == typeof attrp && $(tcell).attr(attrp)
                    }
                }
            })
        },
        getCell: function(rowid, col) {
            var ret = !1;
            return this.each(function() {
                var $t = this
                  , pos = -1;
                if ($t.grid && (isNaN(col) ? $($t.p.colModel).each(function(i) {
                    return this.name === col ? (pos = i,
                    !1) : void 0
                }) : pos = parseInt(col, 10),
                pos >= 0)) {
                    var ind = $($t).jqGrid("getGridRowById", rowid);
                    if (ind)
                        try {
                            ret = $.unformat.call($t, $("td:eq(" + pos + ")", ind), {
                                rowId: ind.id,
                                colModel: $t.p.colModel[pos]
                            }, pos)
                        } catch (e) {
                            ret = $.jgrid.htmlDecode($("td:eq(" + pos + ")", ind).html())
                        }
                }
            }),
            ret
        },
        getCol: function(col, obj, mathopr) {
            var val, min, max, v, ret = [], sum = 0;
            return obj = "boolean" != typeof obj ? !1 : obj,
            void 0 === mathopr && (mathopr = !1),
            this.each(function() {
                var $t = this
                  , pos = -1;
                if ($t.grid && (isNaN(col) ? $($t.p.colModel).each(function(i) {
                    return this.name === col ? (pos = i,
                    !1) : void 0
                }) : pos = parseInt(col, 10),
                pos >= 0)) {
                    var ln = $t.rows.length
                      , i = 0
                      , dlen = 0;
                    if (ln && ln > 0) {
                        for (; ln > i; ) {
                            if ($($t.rows[i]).hasClass("jqgrow")) {
                                try {
                                    val = $.unformat.call($t, $($t.rows[i].cells[pos]), {
                                        rowId: $t.rows[i].id,
                                        colModel: $t.p.colModel[pos]
                                    }, pos)
                                } catch (e) {
                                    val = $.jgrid.htmlDecode($t.rows[i].cells[pos].innerHTML)
                                }
                                mathopr ? (v = parseFloat(val),
                                isNaN(v) || (sum += v,
                                void 0 === max && (max = min = v),
                                min = Math.min(min, v),
                                max = Math.max(max, v),
                                dlen++)) : obj ? ret.push({
                                    id: $t.rows[i].id,
                                    value: val
                                }) : ret.push(val)
                            }
                            i++
                        }
                        if (mathopr)
                            switch (mathopr.toLowerCase()) {
                            case "sum":
                                ret = sum;
                                break;
                            case "avg":
                                ret = sum / dlen;
                                break;
                            case "count":
                                ret = ln - 1;
                                break;
                            case "min":
                                ret = min;
                                break;
                            case "max":
                                ret = max
                            }
                    }
                }
            }),
            ret
        },
        clearGridData: function(clearfooter) {
            return this.each(function() {
                var $t = this;
                if ($t.grid) {
                    if ("boolean" != typeof clearfooter && (clearfooter = !1),
                    $t.p.deepempty)
                        $("#" + $.jgrid.jqID($t.p.id) + " tbody:first tr:gt(0)").remove();
                    else {
                        var trf = $("#" + $.jgrid.jqID($t.p.id) + " tbody:first tr:first")[0];
                        $("#" + $.jgrid.jqID($t.p.id) + " tbody:first").empty().append(trf)
                    }
                    $t.p.footerrow && clearfooter && $(".ui-jqgrid-ftable td", $t.grid.sDiv).html("&#160;"),
                    $t.p.selrow = null,
                    $t.p.selarrrow = [],
                    $t.p.savedRow = [],
                    $t.p.records = 0,
                    $t.p.page = 1,
                    $t.p.lastpage = 0,
                    $t.p.reccount = 0,
                    $t.p.data = [],
                    $t.p._index = {},
                    $t.updatepager(!0, !1)
                }
            })
        },
        getInd: function(rowid, rc) {
            var rw, ret = !1;
            return this.each(function() {
                rw = $(this).jqGrid("getGridRowById", rowid),
                rw && (ret = rc === !0 ? rw : rw.rowIndex)
            }),
            ret
        },
        bindKeys: function(settings) {
            var o = $.extend({
                onEnter: null,
                onSpace: null,
                onLeftKey: null,
                onRightKey: null,
                scrollingRows: !0
            }, settings || {});
            return this.each(function() {
                var $t = this;
                $("body").is("[role]") || $("body").attr("role", "application"),
                $t.p.scrollrows = o.scrollingRows,
                $($t).keydown(function(event) {
                    var id, r, mind, target = $($t).find("tr[tabindex=0]")[0], expanded = $t.p.treeReader.expanded_field;
                    if (target)
                        if (mind = $t.p._index[$.jgrid.stripPref($t.p.idPrefix, target.id)],
                        37 === event.keyCode || 38 === event.keyCode || 39 === event.keyCode || 40 === event.keyCode) {
                            if (38 === event.keyCode) {
                                if (r = target.previousSibling,
                                id = "",
                                r)
                                    if ($(r).is(":hidden")) {
                                        for (; r; )
                                            if (r = r.previousSibling,
                                            !$(r).is(":hidden") && $(r).hasClass("jqgrow")) {
                                                id = r.id;
                                                break
                                            }
                                    } else
                                        id = r.id;
                                $($t).jqGrid("setSelection", id, !0, event),
                                event.preventDefault()
                            }
                            if (40 === event.keyCode) {
                                if (r = target.nextSibling,
                                id = "",
                                r)
                                    if ($(r).is(":hidden")) {
                                        for (; r; )
                                            if (r = r.nextSibling,
                                            !$(r).is(":hidden") && $(r).hasClass("jqgrow")) {
                                                id = r.id;
                                                break
                                            }
                                    } else
                                        id = r.id;
                                $($t).jqGrid("setSelection", id, !0, event),
                                event.preventDefault()
                            }
                            37 === event.keyCode && ($t.p.treeGrid && $t.p.data[mind][expanded] && $(target).find("div.treeclick").trigger("click"),
                            $($t).triggerHandler("jqGridKeyLeft", [$t.p.selrow]),
                            $.isFunction(o.onLeftKey) && o.onLeftKey.call($t, $t.p.selrow)),
                            39 === event.keyCode && ($t.p.treeGrid && !$t.p.data[mind][expanded] && $(target).find("div.treeclick").trigger("click"),
                            $($t).triggerHandler("jqGridKeyRight", [$t.p.selrow]),
                            $.isFunction(o.onRightKey) && o.onRightKey.call($t, $t.p.selrow))
                        } else
                            13 === event.keyCode ? ($($t).triggerHandler("jqGridKeyEnter", [$t.p.selrow]),
                            $.isFunction(o.onEnter) && o.onEnter.call($t, $t.p.selrow)) : 32 === event.keyCode && ($($t).triggerHandler("jqGridKeySpace", [$t.p.selrow]),
                            $.isFunction(o.onSpace) && o.onSpace.call($t, $t.p.selrow))
                })
            })
        },
        unbindKeys: function() {
            return this.each(function() {
                $(this).unbind("keydown")
            })
        },
        getLocalRow: function(rowid) {
            var ind, ret = !1;
            return this.each(function() {
                void 0 !== rowid && (ind = this.p._index[$.jgrid.stripPref(this.p.idPrefix, rowid)],
                ind >= 0 && (ret = this.p.data[ind]))
            }),
            ret
        },
        progressBar: function(p) {
            return p = $.extend({
                htmlcontent: "",
                method: "hide",
                loadtype: "disable"
            }, p || {}),
            this.each(function() {
                var sh = "show" === p.method;
                switch ("" !== p.htmlcontent && $("#load_" + $.jgrid.jqID(this.p.id)).html(p.htmlcontent),
                p.loadtype) {
                case "disable":
                    break;
                case "enable":
                    $("#load_" + $.jgrid.jqID(this.p.id)).toggle(sh);
                    break;
                case "block":
                    $("#lui_" + $.jgrid.jqID(this.p.id)).toggle(sh),
                    $("#load_" + $.jgrid.jqID(this.p.id)).toggle(sh)
                }
            })
        },
        getColProp: function(colname) {
            var ret = {}
              , $t = this[0];
            if (!$t.grid)
                return !1;
            var i, cM = $t.p.colModel;
            for (i = 0; i < cM.length; i++)
                if (cM[i].name === colname) {
                    ret = cM[i];
                    break
                }
            return ret
        },
        setColProp: function(colname, obj) {
            return this.each(function() {
                if (this.grid && obj) {
                    var i, cM = this.p.colModel;
                    for (i = 0; i < cM.length; i++)
                        if (cM[i].name === colname) {
                            $.extend(!0, this.p.colModel[i], obj);
                            break
                        }
                }
            })
        },
        sortGrid: function(colname, reload, sor) {
            return this.each(function() {
                var i, $t = this, idx = -1, sobj = !1;
                if ($t.grid) {
                    for (colname || (colname = $t.p.sortname),
                    i = 0; i < $t.p.colModel.length; i++)
                        if ($t.p.colModel[i].index === colname || $t.p.colModel[i].name === colname) {
                            idx = i,
                            $t.p.frozenColumns === !0 && $t.p.colModel[i].frozen === !0 && (sobj = $t.grid.fhDiv.find("#" + $t.p.id + "_" + colname));
                            break
                        }
                    if (-1 !== idx) {
                        var sort = $t.p.colModel[idx].sortable;
                        sobj || (sobj = $t.grid.headers[idx].el),
                        "boolean" != typeof sort && (sort = !0),
                        "boolean" != typeof reload && (reload = !1),
                        sort && $t.sortData("jqgh_" + $t.p.id + "_" + colname, idx, reload, sor, sobj)
                    }
                }
            })
        },
        setGridState: function(state) {
            return this.each(function() {
                if (this.grid) {
                    var $t = this;
                    "hidden" === state ? ($(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv", "#gview_" + $.jgrid.jqID($t.p.id)).slideUp("fast"),
                    $t.p.pager && $($t.p.pager).slideUp("fast"),
                    $t.p.toppager && $($t.p.toppager).slideUp("fast"),
                    $t.p.toolbar[0] === !0 && ("both" === $t.p.toolbar[1] && $($t.grid.ubDiv).slideUp("fast"),
                    $($t.grid.uDiv).slideUp("fast")),
                    $t.p.footerrow && $(".ui-jqgrid-sdiv", "#gbox_" + $.jgrid.jqID($t.p.id)).slideUp("fast"),
                    $(".ui-jqgrid-titlebar-close span", $t.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),
                    $t.p.gridstate = "hidden") : "visible" === state && ($(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv", "#gview_" + $.jgrid.jqID($t.p.id)).slideDown("fast"),
                    $t.p.pager && $($t.p.pager).slideDown("fast"),
                    $t.p.toppager && $($t.p.toppager).slideDown("fast"),
                    $t.p.toolbar[0] === !0 && ("both" === $t.p.toolbar[1] && $($t.grid.ubDiv).slideDown("fast"),
                    $($t.grid.uDiv).slideDown("fast")),
                    $t.p.footerrow && $(".ui-jqgrid-sdiv", "#gbox_" + $.jgrid.jqID($t.p.id)).slideDown("fast"),
                    $(".ui-jqgrid-titlebar-close span", $t.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),
                    $t.p.gridstate = "visible")
                }
            })
        },
        setFrozenColumns: function() {
            return this.each(function() {
                if (this.grid) {
                    var $t = this
                      , cm = $t.p.colModel
                      , i = 0
                      , len = cm.length
                      , maxfrozen = -1
                      , frozen = !1;
                    if ($t.p.subGrid !== !0 && $t.p.treeGrid !== !0 && $t.p.cellEdit !== !0 && !$t.p.sortable && !$t.p.scroll) {
                        for ($t.p.rownumbers && i++,
                        $t.p.multiselect && i++; len > i && cm[i].frozen === !0; )
                            frozen = !0,
                            maxfrozen = i,
                            i++;
                        if (maxfrozen >= 0 && frozen) {
                            var top = $t.p.caption ? $($t.grid.cDiv).outerHeight() : 0
                              , hth = $(".ui-jqgrid-htable", "#gview_" + $.jgrid.jqID($t.p.id)).height();
                            $t.p.toppager && (top += $($t.grid.topDiv).outerHeight()),
                            $t.p.toolbar[0] === !0 && "bottom" !== $t.p.toolbar[1] && (top += $($t.grid.uDiv).outerHeight()),
                            $t.grid.fhDiv = $('<div style="position:absolute;left:0px;top:' + top + "px;height:" + hth + 'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>'),
                            $t.grid.fbDiv = $('<div style="position:absolute;left:0px;top:' + (parseInt(top, 10) + parseInt(hth, 10) + 1) + 'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>'),
                            $("#gview_" + $.jgrid.jqID($t.p.id)).append($t.grid.fhDiv);
                            var htbl = $(".ui-jqgrid-htable", "#gview_" + $.jgrid.jqID($t.p.id)).clone(!0);
                            if ($t.p.groupHeader) {
                                $("tr.jqg-first-row-header, tr.jqg-third-row-header", htbl).each(function() {
                                    $("th:gt(" + maxfrozen + ")", this).remove()
                                });
                                var cs, rs, swapfroz = -1, fdel = -1;
                                $("tr.jqg-second-row-header th", htbl).each(function() {
                                    return cs = parseInt($(this).attr("colspan"), 10),
                                    rs = parseInt($(this).attr("rowspan"), 10),
                                    rs && (swapfroz++,
                                    fdel++),
                                    cs && (swapfroz += cs,
                                    fdel++),
                                    swapfroz === maxfrozen ? !1 : void 0
                                }),
                                swapfroz !== maxfrozen && (fdel = maxfrozen),
                                $("tr.jqg-second-row-header", htbl).each(function() {
                                    $("th:gt(" + fdel + ")", this).remove()
                                })
                            } else
                                $("tr", htbl).each(function() {
                                    $("th:gt(" + maxfrozen + ")", this).remove()
                                });
                            if ($(htbl).width(1),
                            $($t.grid.fhDiv).append(htbl).mousemove(function(e) {
                                return $t.grid.resizing ? ($t.grid.dragMove(e),
                                !1) : void 0
                            }),
                            $t.p.footerrow) {
                                var hbd = $(".ui-jqgrid-bdiv", "#gview_" + $.jgrid.jqID($t.p.id)).height();
                                $t.grid.fsDiv = $('<div style="position:absolute;left:0px;top:' + (parseInt(top, 10) + parseInt(hth, 10) + parseInt(hbd, 10) + 1) + 'px;" class="frozen-sdiv ui-jqgrid-sdiv"></div>'),
                                $("#gview_" + $.jgrid.jqID($t.p.id)).append($t.grid.fsDiv);
                                var ftbl = $(".ui-jqgrid-ftable", "#gview_" + $.jgrid.jqID($t.p.id)).clone(!0);
                                $("tr", ftbl).each(function() {
                                    $("td:gt(" + maxfrozen + ")", this).remove()
                                }),
                                $(ftbl).width(1),
                                $($t.grid.fsDiv).append(ftbl)
                            }
                            $($t).bind("jqGridResizeStop.setFrozenColumns", function(e, w, index) {
                                var rhth = $(".ui-jqgrid-htable", $t.grid.fhDiv);
                                $("th:eq(" + index + ")", rhth).width(w);
                                var btd = $(".ui-jqgrid-btable", $t.grid.fbDiv);
                                if ($("tr:first td:eq(" + index + ")", btd).width(w),
                                $t.p.footerrow) {
                                    var ftd = $(".ui-jqgrid-ftable", $t.grid.fsDiv);
                                    $("tr:first td:eq(" + index + ")", ftd).width(w)
                                }
                            }),
                            $($t).bind("jqGridSortCol.setFrozenColumns", function(e, index, idxcol) {
                                var previousSelectedTh = $("tr.ui-jqgrid-labels:last th:eq(" + $t.p.lastsort + ")", $t.grid.fhDiv)
                                  , newSelectedTh = $("tr.ui-jqgrid-labels:last th:eq(" + idxcol + ")", $t.grid.fhDiv);
                                $("span.ui-grid-ico-sort", previousSelectedTh).addClass("ui-state-disabled"),
                                $(previousSelectedTh).attr("aria-selected", "false"),
                                $("span.ui-icon-" + $t.p.sortorder, newSelectedTh).removeClass("ui-state-disabled"),
                                $(newSelectedTh).attr("aria-selected", "true"),
                                $t.p.viewsortcols[0] || $t.p.lastsort !== idxcol && ($("span.s-ico", previousSelectedTh).hide(),
                                $("span.s-ico", newSelectedTh).show())
                            }),
                            $("#gview_" + $.jgrid.jqID($t.p.id)).append($t.grid.fbDiv),
                            $($t.grid.bDiv).scroll(function() {
                                $($t.grid.fbDiv).scrollTop($(this).scrollTop())
                            }),
                            $t.p.hoverrows === !0 && $("#" + $.jgrid.jqID($t.p.id)).unbind("mouseover").unbind("mouseout"),
                            $($t).bind("jqGridAfterGridComplete.setFrozenColumns", function() {
                                $("#" + $.jgrid.jqID($t.p.id) + "_frozen").remove(),
                                $($t.grid.fbDiv).height($($t.grid.bDiv).height() - 16);
                                var btbl = $("#" + $.jgrid.jqID($t.p.id)).clone(!0);
                                $("tr[role=row]", btbl).each(function() {
                                    $("td[role=gridcell]:gt(" + maxfrozen + ")", this).remove()
                                }),
                                $(btbl).width(1).attr("id", $t.p.id + "_frozen"),
                                $($t.grid.fbDiv).append(btbl),
                                $t.p.hoverrows === !0 && ($("tr.jqgrow", btbl).hover(function() {
                                    $(this).addClass("ui-state-hover"),
                                    $("#" + $.jgrid.jqID(this.id), "#" + $.jgrid.jqID($t.p.id)).addClass("ui-state-hover")
                                }, function() {
                                    $(this).removeClass("ui-state-hover"),
                                    $("#" + $.jgrid.jqID(this.id), "#" + $.jgrid.jqID($t.p.id)).removeClass("ui-state-hover")
                                }),
                                $("tr.jqgrow", "#" + $.jgrid.jqID($t.p.id)).hover(function() {
                                    $(this).addClass("ui-state-hover"),
                                    $("#" + $.jgrid.jqID(this.id), "#" + $.jgrid.jqID($t.p.id) + "_frozen").addClass("ui-state-hover")
                                }, function() {
                                    $(this).removeClass("ui-state-hover"),
                                    $("#" + $.jgrid.jqID(this.id), "#" + $.jgrid.jqID($t.p.id) + "_frozen").removeClass("ui-state-hover")
                                })),
                                btbl = null
                            }),
                            $t.grid.hDiv.loading || $($t).triggerHandler("jqGridAfterGridComplete"),
                            $t.p.frozenColumns = !0
                        }
                    }
                }
            })
        },
        destroyFrozenColumns: function() {
            return this.each(function() {
                if (this.grid && this.p.frozenColumns === !0) {
                    var $t = this;
                    if ($($t.grid.fhDiv).remove(),
                    $($t.grid.fbDiv).remove(),
                    $t.grid.fhDiv = null,
                    $t.grid.fbDiv = null,
                    $t.p.footerrow && ($($t.grid.fsDiv).remove(),
                    $t.grid.fsDiv = null),
                    $(this).unbind(".setFrozenColumns"),
                    $t.p.hoverrows === !0) {
                        var ptr;
                        $("#" + $.jgrid.jqID($t.p.id)).bind("mouseover", function(e) {
                            ptr = $(e.target).closest("tr.jqgrow"),
                            "ui-subgrid" !== $(ptr).attr("class") && $(ptr).addClass("ui-state-hover")
                        }).bind("mouseout", function(e) {
                            ptr = $(e.target).closest("tr.jqgrow"),
                            $(ptr).removeClass("ui-state-hover")
                        })
                    }
                    this.p.frozenColumns = !1
                }
            })
        }
    }),
    $.jgrid.extend({
        editCell: function(iRow, iCol, ed) {
            return this.each(function() {
                var nm, tmp, cc, cm, $t = this;
                if ($t.grid && $t.p.cellEdit === !0) {
                    if (iCol = parseInt(iCol, 10),
                    $t.p.selrow = $t.rows[iRow].id,
                    $t.p.knv || $($t).jqGrid("GridNav"),
                    $t.p.savedRow.length > 0) {
                        if (ed === !0 && iRow == $t.p.iRow && iCol == $t.p.iCol)
                            return;
                        $($t).jqGrid("saveCell", $t.p.savedRow[0].id, $t.p.savedRow[0].ic)
                    } else
                        window.setTimeout(function() {
                            $("#" + $.jgrid.jqID($t.p.knv)).attr("tabindex", "-1").focus()
                        }, 1);
                    if (cm = $t.p.colModel[iCol],
                    nm = cm.name,
                    "subgrid" !== nm && "cb" !== nm && "rn" !== nm) {
                        if (cc = $("td:eq(" + iCol + ")", $t.rows[iRow]),
                        cm.editable !== !0 || ed !== !0 || cc.hasClass("not-editable-cell") || $.isFunction($t.p.isCellEditable) && !$t.p.isCellEditable.call($t, nm, iRow, iCol))
                            parseInt($t.p.iCol, 10) >= 0 && parseInt($t.p.iRow, 10) >= 0 && ($("td:eq(" + $t.p.iCol + ")", $t.rows[$t.p.iRow]).removeClass("edit-cell ui-state-highlight"),
                            $($t.rows[$t.p.iRow]).removeClass("selected-row ui-state-hover")),
                            cc.addClass("edit-cell ui-state-highlight"),
                            $($t.rows[iRow]).addClass("selected-row ui-state-hover"),
                            tmp = cc.html().replace(/\&#160\;/gi, ""),
                            $($t).triggerHandler("jqGridSelectCell", [$t.rows[iRow].id, nm, tmp, iRow, iCol]),
                            $.isFunction($t.p.onSelectCell) && $t.p.onSelectCell.call($t, $t.rows[iRow].id, nm, tmp, iRow, iCol);
                        else {
                            parseInt($t.p.iCol, 10) >= 0 && parseInt($t.p.iRow, 10) >= 0 && ($("td:eq(" + $t.p.iCol + ")", $t.rows[$t.p.iRow]).removeClass("edit-cell ui-state-highlight"),
                            $($t.rows[$t.p.iRow]).removeClass("selected-row ui-state-hover")),
                            $(cc).addClass("edit-cell ui-state-highlight"),
                            $($t.rows[iRow]).addClass("selected-row ui-state-hover");
                            try {
                                tmp = $.unformat.call($t, cc, {
                                    rowId: $t.rows[iRow].id,
                                    colModel: cm
                                }, iCol)
                            } catch (_) {
                                tmp = cm.edittype && "textarea" === cm.edittype ? $(cc).text() : $(cc).html()
                            }
                            if ($t.p.autoencode && (tmp = $.jgrid.htmlDecode(tmp)),
                            cm.edittype || (cm.edittype = "text"),
                            $t.p.savedRow.push({
                                id: iRow,
                                ic: iCol,
                                name: nm,
                                v: tmp
                            }),
                            ("&nbsp;" === tmp || "&#160;" === tmp || 1 === tmp.length && 160 === tmp.charCodeAt(0)) && (tmp = ""),
                            $.isFunction($t.p.formatCell)) {
                                var tmp2 = $t.p.formatCell.call($t, $t.rows[iRow].id, nm, tmp, iRow, iCol);
                                void 0 !== tmp2 && (tmp = tmp2)
                            }
                            $($t).triggerHandler("jqGridBeforeEditCell", [$t.rows[iRow].id, nm, tmp, iRow, iCol]),
                            $.isFunction($t.p.beforeEditCell) && $t.p.beforeEditCell.call($t, $t.rows[iRow].id, nm, tmp, iRow, iCol);
                            var opt = $.extend({}, cm.editoptions || {}, {
                                id: iRow + "_" + nm,
                                name: nm,
                                rowId: $t.rows[iRow].id,
                                oper: "edit"
                            })
                              , elc = $.jgrid.createEl.call($t, cm.edittype, opt, tmp, !0, $.extend({}, $.jgrid.ajaxOptions, $t.p.ajaxSelectOptions || {}));
                            $(cc).html("").append(elc).attr("tabindex", "0"),
                            $.jgrid.bindEv.call($t, elc, opt),
                            window.setTimeout(function() {
                                $(elc).focus()
                            }, 1),
                            $("input, select, textarea", cc).bind("keydown", function(e) {
                                if (27 === e.keyCode && ($("input.hasDatepicker", cc).length > 0 ? $(".ui-datepicker").is(":hidden") ? $($t).jqGrid("restoreCell", iRow, iCol) : $("input.hasDatepicker", cc).datepicker("hide") : $($t).jqGrid("restoreCell", iRow, iCol)),
                                13 === e.keyCode && !e.shiftKey)
                                    return $($t).jqGrid("saveCell", iRow, iCol),
                                    !1;
                                if (9 === e.keyCode) {
                                    if ($t.grid.hDiv.loading)
                                        return !1;
                                    e.shiftKey ? $($t).jqGrid("prevCell", iRow, iCol) : $($t).jqGrid("nextCell", iRow, iCol)
                                }
                                e.stopPropagation()
                            }),
                            $($t).triggerHandler("jqGridAfterEditCell", [$t.rows[iRow].id, nm, tmp, iRow, iCol]),
                            $.isFunction($t.p.afterEditCell) && $t.p.afterEditCell.call($t, $t.rows[iRow].id, nm, tmp, iRow, iCol)
                        }
                        $t.p.iCol = iCol,
                        $t.p.iRow = iRow
                    }
                }
            })
        },
        saveCell: function(iRow, iCol) {
            return this.each(function() {
                var fr, $t = this, errors = $.jgrid.getRegional(this, "errors"), edit = $.jgrid.getRegional(this, "edit");
                if ($t.grid && $t.p.cellEdit === !0) {
                    if (fr = $t.p.savedRow.length >= 1 ? 0 : null,
                    null !== fr) {
                        var v, v2, cc = $("td:eq(" + iCol + ")", $t.rows[iRow]), cm = $t.p.colModel[iCol], nm = cm.name, nmjq = $.jgrid.jqID(nm);
                        switch (cm.edittype) {
                        case "select":
                            if (cm.editoptions.multiple) {
                                var sel = $("#" + iRow + "_" + nmjq, $t.rows[iRow])
                                  , selectedText = [];
                                v = $(sel).val(),
                                v ? v.join(",") : v = "",
                                $("option:selected", sel).each(function(i, selected) {
                                    selectedText[i] = $(selected).text()
                                }),
                                v2 = selectedText.join(",")
                            } else
                                v = $("#" + iRow + "_" + nmjq + " option:selected", $t.rows[iRow]).val(),
                                v2 = $("#" + iRow + "_" + nmjq + " option:selected", $t.rows[iRow]).text();
                            cm.formatter && (v2 = v);
                            break;
                        case "checkbox":
                            var cbv = ["Yes", "No"];
                            cm.editoptions && (cbv = cm.editoptions.value.split(":")),
                            v = $("#" + iRow + "_" + nmjq, $t.rows[iRow]).is(":checked") ? cbv[0] : cbv[1],
                            v2 = v;
                            break;
                        case "password":
                        case "text":
                        case "textarea":
                        case "button":
                            v = $("#" + iRow + "_" + nmjq, $t.rows[iRow]).val(),
                            v2 = v;
                            break;
                        case "custom":
                            try {
                                if (!cm.editoptions || !$.isFunction(cm.editoptions.custom_value))
                                    throw "e1";
                                if (v = cm.editoptions.custom_value.call($t, $(".customelement", cc), "get"),
                                void 0 === v)
                                    throw "e2";
                                v2 = v
                            } catch (e) {
                                "e1" === e && $.jgrid.info_dialog(errors.errcap, "function 'custom_value' " + edit.msg.nodefined, edit.bClose),
                                "e2" === e ? $.jgrid.info_dialog(errors.errcap, "function 'custom_value' " + edit.msg.novalue, edit.bClose) : $.jgrid.info_dialog(errors.errcap, e.message, edit.bClose)
                            }
                        }
                        if (v2 !== $t.p.savedRow[fr].v) {
                            var vvv = $($t).triggerHandler("jqGridBeforeSaveCell", [$t.rows[iRow].id, nm, v, iRow, iCol]);
                            if (vvv && (v = vvv,
                            v2 = vvv),
                            $.isFunction($t.p.beforeSaveCell)) {
                                var vv = $t.p.beforeSaveCell.call($t, $t.rows[iRow].id, nm, v, iRow, iCol);
                                vv && (v = vv,
                                v2 = vv)
                            }
                            var cv = $.jgrid.checkValues.call($t, v, iCol);
                            if (cv[0] === !0) {
                                var addpost = $($t).triggerHandler("jqGridBeforeSubmitCell", [$t.rows[iRow].id, nm, v, iRow, iCol]) || {};
                                if ($.isFunction($t.p.beforeSubmitCell) && (addpost = $t.p.beforeSubmitCell.call($t, $t.rows[iRow].id, nm, v, iRow, iCol),
                                addpost || (addpost = {})),
                                $("input.hasDatepicker", cc).length > 0 && $("input.hasDatepicker", cc).datepicker("hide"),
                                "remote" === $t.p.cellsubmit)
                                    if ($t.p.cellurl) {
                                        var postdata = {};
                                        $t.p.autoencode && (v = $.jgrid.htmlEncode(v)),
                                        postdata[nm] = v;
                                        var idname, oper, opers;
                                        opers = $t.p.prmNames,
                                        idname = opers.id,
                                        oper = opers.oper,
                                        postdata[idname] = $.jgrid.stripPref($t.p.idPrefix, $t.rows[iRow].id),
                                        postdata[oper] = opers.editoper,
                                        postdata = $.extend(addpost, postdata),
                                        $($t).jqGrid("progressBar", {
                                            method: "show",
                                            loadtype: $t.p.loadui,
                                            htmlcontent: $.jgrid.getRegional($t, "defaults.savetext")
                                        }),
                                        $t.grid.hDiv.loading = !0,
                                        $.ajax($.extend({
                                            url: $t.p.cellurl,
                                            data: $.isFunction($t.p.serializeCellData) ? $t.p.serializeCellData.call($t, postdata) : postdata,
                                            type: "POST",
                                            complete: function(result, stat) {
                                                if ($($t).jqGrid("progressBar", {
                                                    method: "hide",
                                                    loadtype: $t.p.loadui
                                                }),
                                                $t.grid.hDiv.loading = !1,
                                                "success" === stat) {
                                                    var ret = $($t).triggerHandler("jqGridAfterSubmitCell", [$t, result, postdata.id, nm, v, iRow, iCol]) || [!0, ""];
                                                    ret[0] === !0 && $.isFunction($t.p.afterSubmitCell) && (ret = $t.p.afterSubmitCell.call($t, result, postdata.id, nm, v, iRow, iCol)),
                                                    ret[0] === !0 ? ($(cc).empty(),
                                                    $($t).jqGrid("setCell", $t.rows[iRow].id, iCol, v2, !1, !1, !0),
                                                    $(cc).addClass("dirty-cell"),
                                                    $($t.rows[iRow]).addClass("edited"),
                                                    $($t).triggerHandler("jqGridAfterSaveCell", [$t.rows[iRow].id, nm, v, iRow, iCol]),
                                                    $.isFunction($t.p.afterSaveCell) && $t.p.afterSaveCell.call($t, $t.rows[iRow].id, nm, v, iRow, iCol),
                                                    $t.p.savedRow.splice(0, 1)) : ($.jgrid.info_dialog(errors.errcap, ret[1], edit.bClose),
                                                    $($t).jqGrid("restoreCell", iRow, iCol))
                                                }
                                            },
                                            error: function(res, stat, err) {
                                                $("#lui_" + $.jgrid.jqID($t.p.id)).hide(),
                                                $t.grid.hDiv.loading = !1,
                                                $($t).triggerHandler("jqGridErrorCell", [res, stat, err]),
                                                $.isFunction($t.p.errorCell) ? ($t.p.errorCell.call($t, res, stat, err),
                                                $($t).jqGrid("restoreCell", iRow, iCol)) : ($.jgrid.info_dialog(errors.errcap, res.status + " : " + res.statusText + "<br/>" + stat, edit.bClose),
                                                $($t).jqGrid("restoreCell", iRow, iCol))
                                            }
                                        }, $.jgrid.ajaxOptions, $t.p.ajaxCellOptions || {}))
                                    } else
                                        try {
                                            $.jgrid.info_dialog(errors.errcap, errors.nourl, edit.bClose),
                                            $($t).jqGrid("restoreCell", iRow, iCol)
                                        } catch (e) {}
                                "clientArray" === $t.p.cellsubmit && ($(cc).empty(),
                                $($t).jqGrid("setCell", $t.rows[iRow].id, iCol, v2, !1, !1, !0),
                                $(cc).addClass("dirty-cell"),
                                $($t.rows[iRow]).addClass("edited"),
                                $($t).triggerHandler("jqGridAfterSaveCell", [$t.rows[iRow].id, nm, v, iRow, iCol]),
                                $.isFunction($t.p.afterSaveCell) && $t.p.afterSaveCell.call($t, $t.rows[iRow].id, nm, v, iRow, iCol),
                                $t.p.savedRow.splice(0, 1))
                            } else
                                try {
                                    window.setTimeout(function() {
                                        $.jgrid.info_dialog(errors.errcap, v + " " + cv[1], edit.bClose)
                                    }, 100),
                                    $($t).jqGrid("restoreCell", iRow, iCol)
                                } catch (e) {}
                        } else
                            $($t).jqGrid("restoreCell", iRow, iCol)
                    }
                    window.setTimeout(function() {
                        $("#" + $.jgrid.jqID($t.p.knv)).attr("tabindex", "-1").focus()
                    }, 0)
                }
            })
        },
        restoreCell: function(iRow, iCol) {
            return this.each(function() {
                var fr, $t = this;
                if ($t.grid && $t.p.cellEdit === !0) {
                    if (fr = $t.p.savedRow.length >= 1 ? 0 : null,
                    null !== fr) {
                        var cc = $("td:eq(" + iCol + ")", $t.rows[iRow]);
                        if ($.isFunction($.fn.datepicker))
                            try {
                                $("input.hasDatepicker", cc).datepicker("hide")
                            } catch (e) {}
                        $(cc).empty().attr("tabindex", "-1"),
                        $($t).jqGrid("setCell", $t.rows[iRow].id, iCol, $t.p.savedRow[fr].v, !1, !1, !0),
                        $($t).triggerHandler("jqGridAfterRestoreCell", [$t.rows[iRow].id, $t.p.savedRow[fr].v, iRow, iCol]),
                        $.isFunction($t.p.afterRestoreCell) && $t.p.afterRestoreCell.call($t, $t.rows[iRow].id, $t.p.savedRow[fr].v, iRow, iCol),
                        $t.p.savedRow.splice(0, 1)
                    }
                    window.setTimeout(function() {
                        $("#" + $t.p.knv).attr("tabindex", "-1").focus()
                    }, 0)
                }
            })
        },
        nextCell: function(iRow, iCol) {
            return this.each(function() {
                var i, $t = this, nCol = !1;
                if ($t.grid && $t.p.cellEdit === !0) {
                    for (i = iCol + 1; i < $t.p.colModel.length; i++)
                        if ($t.p.colModel[i].editable === !0 && (!$.isFunction($t.p.isCellEditable) || $t.p.isCellEditable.call($t, $t.p.colModel[i].name, iRow, i))) {
                            nCol = i;
                            break
                        }
                    nCol !== !1 ? $($t).jqGrid("editCell", iRow, nCol, !0) : $t.p.savedRow.length > 0 && $($t).jqGrid("saveCell", iRow, iCol)
                }
            })
        },
        prevCell: function(iRow, iCol) {
            return this.each(function() {
                var i, $t = this, nCol = !1;
                if ($t.grid && $t.p.cellEdit === !0) {
                    for (i = iCol - 1; i >= 0; i--)
                        if ($t.p.colModel[i].editable === !0 && (!$.isFunction($t.p.isCellEditable) || $t.p.isCellEditable.call($t, $t.p.colModel[i].name, iRow, i))) {
                            nCol = i;
                            break
                        }
                    nCol !== !1 ? $($t).jqGrid("editCell", iRow, nCol, !0) : $t.p.savedRow.length > 0 && $($t).jqGrid("saveCell", iRow, iCol)
                }
            })
        },
        GridNav: function() {
            return this.each(function() {
                function scrollGrid(iR, iC, tp) {
                    if ("v" === tp.substr(0, 1)) {
                        var ch = $($t.grid.bDiv)[0].clientHeight
                          , st = $($t.grid.bDiv)[0].scrollTop
                          , nROT = $t.rows[iR].offsetTop + $t.rows[iR].clientHeight
                          , pROT = $t.rows[iR].offsetTop;
                        "vd" === tp && nROT >= ch && ($($t.grid.bDiv)[0].scrollTop = $($t.grid.bDiv)[0].scrollTop + $t.rows[iR].clientHeight),
                        "vu" === tp && st > pROT && ($($t.grid.bDiv)[0].scrollTop = $($t.grid.bDiv)[0].scrollTop - $t.rows[iR].clientHeight)
                    }
                    if ("h" === tp) {
                        var cw = $($t.grid.bDiv)[0].clientWidth
                          , sl = $($t.grid.bDiv)[0].scrollLeft
                          , nCOL = $t.rows[iR].cells[iC].offsetLeft + $t.rows[iR].cells[iC].clientWidth
                          , pCOL = $t.rows[iR].cells[iC].offsetLeft;
                        nCOL >= cw + parseInt(sl, 10) ? $($t.grid.bDiv)[0].scrollLeft = $($t.grid.bDiv)[0].scrollLeft + $t.rows[iR].cells[iC].clientWidth : sl > pCOL && ($($t.grid.bDiv)[0].scrollLeft = $($t.grid.bDiv)[0].scrollLeft - $t.rows[iR].cells[iC].clientWidth)
                    }
                }
                function findNextVisible(iC, act) {
                    var ind, i;
                    if ("lft" === act)
                        for (ind = iC + 1,
                        i = iC; i >= 0; i--)
                            if ($t.p.colModel[i].hidden !== !0) {
                                ind = i;
                                break
                            }
                    if ("rgt" === act)
                        for (ind = iC - 1,
                        i = iC; i < $t.p.colModel.length; i++)
                            if ($t.p.colModel[i].hidden !== !0) {
                                ind = i;
                                break
                            }
                    return ind
                }
                var $t = this;
                if ($t.grid && $t.p.cellEdit === !0) {
                    $t.p.knv = $t.p.id + "_kn";
                    var i, kdir, selection = $("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='" + $t.p.knv + "'></div></div>");
                    $(selection).insertBefore($t.grid.cDiv),
                    $("#" + $t.p.knv).focus().keydown(function(e) {
                        switch (kdir = e.keyCode,
                        "rtl" === $t.p.direction && (37 === kdir ? kdir = 39 : 39 === kdir && (kdir = 37)),
                        kdir) {
                        case 38:
                            $t.p.iRow - 1 > 0 && (scrollGrid($t.p.iRow - 1, $t.p.iCol, "vu"),
                            $($t).jqGrid("editCell", $t.p.iRow - 1, $t.p.iCol, !1));
                            break;
                        case 40:
                            $t.p.iRow + 1 <= $t.rows.length - 1 && (scrollGrid($t.p.iRow + 1, $t.p.iCol, "vd"),
                            $($t).jqGrid("editCell", $t.p.iRow + 1, $t.p.iCol, !1));
                            break;
                        case 37:
                            $t.p.iCol - 1 >= 0 && (i = findNextVisible($t.p.iCol - 1, "lft"),
                            scrollGrid($t.p.iRow, i, "h"),
                            $($t).jqGrid("editCell", $t.p.iRow, i, !1));
                            break;
                        case 39:
                            $t.p.iCol + 1 <= $t.p.colModel.length - 1 && (i = findNextVisible($t.p.iCol + 1, "rgt"),
                            scrollGrid($t.p.iRow, i, "h"),
                            $($t).jqGrid("editCell", $t.p.iRow, i, !1));
                            break;
                        case 13:
                            parseInt($t.p.iCol, 10) >= 0 && parseInt($t.p.iRow, 10) >= 0 && $($t).jqGrid("editCell", $t.p.iRow, $t.p.iCol, !0);
                            break;
                        default:
                            return !0
                        }
                        return !1
                    })
                }
            })
        },
        getChangedCells: function(mthd) {
            var ret = [];
            return mthd || (mthd = "all"),
            this.each(function() {
                var nm, $t = this;
                $t.grid && $t.p.cellEdit === !0 && $($t.rows).each(function(j) {
                    var res = {};
                    $(this).hasClass("edited") && ($("td", this).each(function(i) {
                        if (nm = $t.p.colModel[i].name,
                        "cb" !== nm && "subgrid" !== nm)
                            if ("dirty" === mthd) {
                                if ($(this).hasClass("dirty-cell"))
                                    try {
                                        res[nm] = $.unformat.call($t, this, {
                                            rowId: $t.rows[j].id,
                                            colModel: $t.p.colModel[i]
                                        }, i)
                                    } catch (e) {
                                        res[nm] = $.jgrid.htmlDecode($(this).html())
                                    }
                            } else
                                try {
                                    res[nm] = $.unformat.call($t, this, {
                                        rowId: $t.rows[j].id,
                                        colModel: $t.p.colModel[i]
                                    }, i)
                                } catch (e) {
                                    res[nm] = $.jgrid.htmlDecode($(this).html())
                                }
                    }),
                    res.id = this.id,
                    ret.push(res))
                })
            }),
            ret
        }
    }),
    $.extend($.jgrid, {
        showModal: function(h) {
            h.w.show()
        },
        closeModal: function(h) {
            h.w.hide().attr("aria-hidden", "true"),
            h.o && h.o.remove()
        },
        hideModal: function(selector, o) {
            o = $.extend({
                jqm: !0,
                gb: "",
                removemodal: !1,
                formprop: !1,
                form: ""
            }, o || {});
            var thisgrid = o.gb && "string" == typeof o.gb && "#gbox_" === o.gb.substr(0, 6) ? $("#" + o.gb.substr(6))[0] : !1;
            if (o.onClose) {
                var oncret = thisgrid ? o.onClose.call(thisgrid, selector) : o.onClose(selector);
                if ("boolean" == typeof oncret && !oncret)
                    return
            }
            if (o.formprop && thisgrid && o.form) {
                var fh = $(selector)[0].style.height;
                fh.indexOf("px") > -1 && (fh = parseFloat(fh));
                var frmgr, frmdata;
                "edit" === o.form ? (frmgr = "#" + $.jgrid.jqID("FrmGrid_" + o.gb.substr(6)),
                frmdata = "formProp") : "view" === o.form && (frmgr = "#" + $.jgrid.jqID("ViewGrid_" + o.gb.substr(6)),
                frmdata = "viewProp"),
                $(thisgrid).data(frmdata, {
                    top: parseFloat($(selector).css("top")),
                    left: parseFloat($(selector).css("left")),
                    width: $(selector).width(),
                    height: fh,
                    dataheight: $(frmgr).height(),
                    datawidth: $(frmgr).width()
                })
            }
            if ($.fn.jqm && o.jqm === !0)
                $(selector).attr("aria-hidden", "true").jqmHide();
            else {
                if ("" !== o.gb)
                    try {
                        $(".jqgrid-overlay:first", o.gb).hide()
                    } catch (e) {}
                $(selector).hide().attr("aria-hidden", "true")
            }
            o.removemodal && $(selector).remove()
        },
        findPos: function(obj) {
            var curleft = 0
              , curtop = 0;
            if (obj.offsetParent)
                do
                    curleft += obj.offsetLeft,
                    curtop += obj.offsetTop;
                while (obj = obj.offsetParent);
            return [curleft, curtop]
        },
        createModal: function(aIDs, content, p, insertSelector, posSelector, appendsel, css) {
            p = $.extend(!0, {}, $.jgrid.jqModal || {}, p);
            var rtlsup, mw = document.createElement("div"), self = this;
            css = $.extend({}, css || {}),
            rtlsup = "rtl" === $(p.gbox).attr("dir"),
            mw.className = "ui-widget ui-widget-content ui-corner-all ui-jqdialog",
            mw.id = aIDs.themodal;
            var mh = document.createElement("div");
            mh.className = "ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix",
            mh.id = aIDs.modalhead,
            $(mh).append("<span class='ui-jqdialog-title'>" + p.caption + "</span>");
            var ahr = $("<a class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function() {
                ahr.addClass("ui-state-hover")
            }, function() {
                ahr.removeClass("ui-state-hover")
            }).append("<span class='ui-icon ui-icon-closethick'></span>");
            $(mh).append(ahr),
            rtlsup ? (mw.dir = "rtl",
            $(".ui-jqdialog-title", mh).css("float", "right"),
            $(".ui-jqdialog-titlebar-close", mh).css("left", "0.3em")) : (mw.dir = "ltr",
            $(".ui-jqdialog-title", mh).css("float", "left"),
            $(".ui-jqdialog-titlebar-close", mh).css("right", "0.3em"));
            var mc = document.createElement("div");
            $(mc).addClass("ui-jqdialog-content ui-widget-content").attr("id", aIDs.modalcontent),
            $(mc).append(content),
            mw.appendChild(mc),
            $(mw).prepend(mh),
            appendsel === !0 ? $("body").append(mw) : "string" == typeof appendsel ? $(appendsel).append(mw) : $(mw).insertBefore(insertSelector),
            $(mw).css(css),
            void 0 === p.jqModal && (p.jqModal = !0);
            var coord = {};
            if ($.fn.jqm && p.jqModal === !0) {
                if (0 === p.left && 0 === p.top && p.overlay) {
                    var pos = [];
                    pos = $.jgrid.findPos(posSelector),
                    p.left = pos[0] + 4,
                    p.top = pos[1] + 4
                }
                coord.top = p.top + "px",
                coord.left = p.left
            } else
                0 === p.left && 0 === p.top || (coord.left = p.left,
                coord.top = p.top + "px");
            if ($("a.ui-jqdialog-titlebar-close", mh).click(function() {
                var oncm = $("#" + $.jgrid.jqID(aIDs.themodal)).data("onClose") || p.onClose
                  , gboxclose = $("#" + $.jgrid.jqID(aIDs.themodal)).data("gbox") || p.gbox;
                return self.hideModal("#" + $.jgrid.jqID(aIDs.themodal), {
                    gb: gboxclose,
                    jqm: p.jqModal,
                    onClose: oncm,
                    removemodal: p.removemodal || !1,
                    formprop: !p.recreateForm || !1,
                    form: p.form || ""
                }),
                !1
            }),
            0 !== p.width && p.width || (p.width = 300),
            0 !== p.height && p.height || (p.height = 200),
            !p.zIndex) {
                var parentZ = $(insertSelector).parents("*[role=dialog]").filter(":first").css("z-index");
                parentZ ? p.zIndex = parseInt(parentZ, 10) + 2 : p.zIndex = 950
            }
            var rtlt = 0;
            if (rtlsup && coord.left && !appendsel && (rtlt = $(p.gbox).width() - (isNaN(p.width) ? 0 : parseInt(p.width, 10)) - 8,
            coord.left = parseInt(coord.left, 10) + parseInt(rtlt, 10)),
            coord.left && (coord.left += "px"),
            $(mw).css($.extend({
                width: isNaN(p.width) ? "auto" : p.width + "px",
                height: isNaN(p.height) ? "auto" : p.height + "px",
                zIndex: p.zIndex,
                overflow: "hidden"
            }, coord)).attr({
                tabIndex: "-1",
                role: "dialog",
                "aria-labelledby": aIDs.modalhead,
                "aria-hidden": "true"
            }),
            void 0 === p.drag && (p.drag = !0),
            void 0 === p.resize && (p.resize = !0),
            p.drag)
                if ($(mh).css("cursor", "move"),
                $.fn.jqDrag)
                    $(mw).jqDrag(mh);
                else
                    try {
                        $(mw).draggable({
                            handle: $("#" + $.jgrid.jqID(mh.id))
                        })
                    } catch (e) {}
            if (p.resize)
                if ($.fn.jqResize)
                    $(mw).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se'></div>"),
                    $("#" + $.jgrid.jqID(aIDs.themodal)).jqResize(".jqResize", aIDs.scrollelm ? "#" + $.jgrid.jqID(aIDs.scrollelm) : !1);
                else
                    try {
                        $(mw).resizable({
                            handles: "se, sw",
                            alsoResize: aIDs.scrollelm ? "#" + $.jgrid.jqID(aIDs.scrollelm) : !1
                        })
                    } catch (r) {}
            p.closeOnEscape === !0 && $(mw).keydown(function(e) {
                if (27 === e.which) {
                    var cone = $("#" + $.jgrid.jqID(aIDs.themodal)).data("onClose") || p.onClose;
                    self.hideModal("#" + $.jgrid.jqID(aIDs.themodal), {
                        gb: p.gbox,
                        jqm: p.jqModal,
                        onClose: cone,
                        removemodal: p.removemodal || !1,
                        formprop: !p.recreateForm || !1,
                        form: p.form || ""
                    })
                }
            })
        },
        viewModal: function(selector, o) {
            if (o = $.extend({
                toTop: !0,
                overlay: 10,
                modal: !1,
                overlayClass: "ui-widget-overlay",
                onShow: $.jgrid.showModal,
                onHide: $.jgrid.closeModal,
                gbox: "",
                jqm: !0,
                jqM: !0
            }, o || {}),
            $.fn.jqm && o.jqm === !0)
                o.jqM ? $(selector).attr("aria-hidden", "false").jqm(o).jqmShow() : $(selector).attr("aria-hidden", "false").jqmShow();
            else {
                "" !== o.gbox && ($(".jqgrid-overlay:first", o.gbox).show(),
                $(selector).data("gbox", o.gbox)),
                $(selector).show().attr("aria-hidden", "false");
                try {
                    $(":input:visible", selector)[0].focus()
                } catch (_) {}
            }
        },
        info_dialog: function(caption, content, c_b, modalopt) {
            var mopt = {
                width: 290,
                height: "auto",
                dataheight: "auto",
                drag: !0,
                resize: !1,
                left: 250,
                top: 170,
                zIndex: 1e3,
                jqModal: !0,
                modal: !1,
                closeOnEscape: !0,
                align: "center",
                buttonalign: "center",
                buttons: []
            };
            $.extend(!0, mopt, $.jgrid.jqModal || {}, {
                caption: "<b>" + caption + "</b>"
            }, modalopt || {});
            var jm = mopt.jqModal
              , self = this;
            $.fn.jqm && !jm && (jm = !1);
            var i, buttstr = "";
            if (mopt.buttons.length > 0)
                for (i = 0; i < mopt.buttons.length; i++)
                    void 0 === mopt.buttons[i].id && (mopt.buttons[i].id = "info_button_" + i),
                    buttstr += "<a id='" + mopt.buttons[i].id + "' class='fm-button ui-state-default ui-corner-all'>" + mopt.buttons[i].text + "</a>";
            var dh = isNaN(mopt.dataheight) ? mopt.dataheight : mopt.dataheight + "px"
              , cn = "text-align:" + mopt.align + ";"
              , cnt = "<div id='info_id'>";
            cnt += "<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:" + dh + ";" + cn + "'>" + content + "</div>",
            cnt += c_b ? "<div class='ui-widget-content ui-helper-clearfix' style='text-align:" + mopt.buttonalign + ";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button ui-state-default ui-corner-all'>" + c_b + "</a>" + buttstr + "</div>" : "" !== buttstr ? "<div class='ui-widget-content ui-helper-clearfix' style='text-align:" + mopt.buttonalign + ";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>" + buttstr + "</div>" : "",
            cnt += "</div>";
            try {
                "false" === $("#info_dialog").attr("aria-hidden") && $.jgrid.hideModal("#info_dialog", {
                    jqm: jm
                }),
                $("#info_dialog").remove()
            } catch (e) {}
            $.jgrid.createModal({
                themodal: "info_dialog",
                modalhead: "info_head",
                modalcontent: "info_content",
                scrollelm: "infocnt"
            }, cnt, mopt, "", "", !0),
            buttstr && $.each(mopt.buttons, function(i) {
                $("#" + $.jgrid.jqID(this.id), "#info_id").bind("click", function() {
                    return mopt.buttons[i].onClick.call($("#info_dialog")),
                    !1
                })
            }),
            $("#closedialog", "#info_id").click(function() {
                return self.hideModal("#info_dialog", {
                    jqm: jm,
                    onClose: $("#info_dialog").data("onClose") || mopt.onClose,
                    gb: $("#info_dialog").data("gbox") || mopt.gbox
                }),
                !1
            }),
            $(".fm-button", "#info_dialog").hover(function() {
                $(this).addClass("ui-state-hover")
            }, function() {
                $(this).removeClass("ui-state-hover")
            }),
            $.isFunction(mopt.beforeOpen) && mopt.beforeOpen(),
            $.jgrid.viewModal("#info_dialog", {
                onHide: function(h) {
                    h.w.hide().remove(),
                    h.o && h.o.remove()
                },
                modal: mopt.modal,
                jqm: jm
            }),
            $.isFunction(mopt.afterOpen) && mopt.afterOpen();
            try {
                $("#info_dialog").focus()
            } catch (m) {}
        },
        bindEv: function(el, opt) {
            var $t = this;
            $.isFunction(opt.dataInit) && opt.dataInit.call($t, el, opt),
            opt.dataEvents && $.each(opt.dataEvents, function() {
                void 0 !== this.data ? $(el).bind(this.type, this.data, this.fn) : $(el).bind(this.type, this.fn)
            })
        },
        createEl: function(eltype, options, vl, autowidth, ajaxso) {
            function setAttributes(elm, atr, exl) {
                var exclude = ["dataInit", "dataEvents", "dataUrl", "buildSelect", "sopt", "searchhidden", "defaultValue", "attr", "custom_element", "custom_value", "oper"];
                void 0 !== exl && $.isArray(exl) && $.merge(exclude, exl),
                $.each(atr, function(key, value) {
                    -1 === $.inArray(key, exclude) && $(elm).attr(key, value)
                }),
                atr.hasOwnProperty("id") || $(elm).attr("id", $.jgrid.randId())
            }
            var elem = ""
              , $t = this;
            switch (eltype) {
            case "textarea":
                elem = document.createElement("textarea"),
                autowidth ? options.cols || $(elem).css({
                    width: "98%"
                }) : options.cols || (options.cols = 20),
                options.rows || (options.rows = 2),
                ("&nbsp;" === vl || "&#160;" === vl || 1 === vl.length && 160 === vl.charCodeAt(0)) && (vl = ""),
                elem.value = vl,
                setAttributes(elem, options),
                $(elem).attr({
                    role: "textbox",
                    multiline: "true"
                });
                break;
            case "checkbox":
                if (elem = document.createElement("input"),
                elem.type = "checkbox",
                options.value) {
                    var cbval = options.value.split(":");
                    vl === cbval[0] && (elem.checked = !0,
                    elem.defaultChecked = !0),
                    elem.value = cbval[0],
                    $(elem).attr("offval", cbval[1])
                } else {
                    var vl1 = (vl + "").toLowerCase();
                    vl1.search(/(false|f|0|no|n|off|undefined)/i) < 0 && "" !== vl1 ? (elem.checked = !0,
                    elem.defaultChecked = !0,
                    elem.value = vl) : elem.value = "on",
                    $(elem).attr("offval", "off")
                }
                setAttributes(elem, options, ["value"]),
                $(elem).attr("role", "checkbox");
                break;
            case "select":
                elem = document.createElement("select"),
                elem.setAttribute("role", "select");
                var msl, ovm = [];
                if (options.multiple === !0 ? (msl = !0,
                elem.multiple = "multiple",
                $(elem).attr("aria-multiselectable", "true")) : msl = !1,
                null != options.dataUrl) {
                    var rowid = null
                      , postData = options.postData || ajaxso.postData;
                    try {
                        rowid = options.rowId
                    } catch (e) {}
                    $t.p && $t.p.idPrefix && (rowid = $.jgrid.stripPref($t.p.idPrefix, rowid)),
                    $.ajax($.extend({
                        url: $.isFunction(options.dataUrl) ? options.dataUrl.call($t, rowid, vl, String(options.name)) : options.dataUrl,
                        type: "GET",
                        dataType: "html",
                        data: $.isFunction(postData) ? postData.call($t, rowid, vl, String(options.name)) : postData,
                        context: {
                            elem: elem,
                            options: options,
                            vl: vl
                        },
                        success: function(data) {
                            var txt, vl, ovm = [], elem = this.elem, vl = this.vl, options = $.extend({}, this.options), msl = options.multiple === !0, cU = options.cacheUrlData === !0, oV = "", a = $.isFunction(options.buildSelect) ? options.buildSelect.call($t, data) : data;
                            "string" == typeof a && (a = $($.trim(a)).html()),
                            a && ($(elem).append(a),
                            setAttributes(elem, options, postData ? ["postData"] : void 0),
                            void 0 === options.size && (options.size = msl ? 3 : 1),
                            msl ? (ovm = vl.split(","),
                            ovm = $.map(ovm, function(n) {
                                return $.trim(n)
                            })) : ovm[0] = $.trim(vl),
                            setTimeout(function() {
                                if ($("option", elem).each(function(i) {
                                    txt = $(this).text(),
                                    vl = $(this).val() || txt,
                                    cU && (oV += (0 !== i ? ";" : "") + vl + ":" + txt),
                                    0 === i && elem.multiple && (this.selected = !1),
                                    $(this).attr("role", "option"),
                                    ($.inArray($.trim(txt), ovm) > -1 || $.inArray($.trim(vl), ovm) > -1) && (this.selected = "selected")
                                }),
                                cU)
                                    if ("edit" === options.oper)
                                        $($t).jqGrid("setColProp", options.name, {
                                            editoptions: {
                                                buildSelect: null,
                                                dataUrl: null,
                                                value: oV
                                            }
                                        });
                                    else if ("search" === options.oper)
                                        $($t).jqGrid("setColProp", options.name, {
                                            searchoptions: {
                                                dataUrl: null,
                                                value: oV
                                            }
                                        });
                                    else if ("filter" === options.oper && $("#fbox_" + $t.p.id)[0].p) {
                                        var nm, cols = $("#fbox_" + $t.p.id)[0].p.columns;
                                        $.each(cols, function() {
                                            return nm = this.index || this.name,
                                            options.name === nm ? (this.searchoptions.dataUrl = null,
                                            this.searchoptions.value = oV,
                                            !1) : void 0
                                        })
                                    }
                            }, 0))
                        }
                    }, ajaxso || {}))
                } else if (options.value) {
                    var i;
                    void 0 === options.size && (options.size = msl ? 3 : 1),
                    msl && (ovm = vl.split(","),
                    ovm = $.map(ovm, function(n) {
                        return $.trim(n)
                    })),
                    "function" == typeof options.value && (options.value = options.value());
                    var so, sv, ov, sep = void 0 === options.separator ? ":" : options.separator, delim = void 0 === options.delimiter ? ";" : options.delimiter;
                    if ("string" == typeof options.value)
                        for (so = options.value.split(delim),
                        i = 0; i < so.length; i++)
                            sv = so[i].split(sep),
                            sv.length > 2 && (sv[1] = $.map(sv, function(n, ii) {
                                return ii > 0 ? n : void 0
                            }).join(sep)),
                            ov = document.createElement("option"),
                            ov.setAttribute("role", "option"),
                            ov.value = sv[0],
                            ov.innerHTML = sv[1],
                            elem.appendChild(ov),
                            msl || $.trim(sv[0]) !== $.trim(vl) && $.trim(sv[1]) !== $.trim(vl) || (ov.selected = "selected"),
                            msl && ($.inArray($.trim(sv[1]), ovm) > -1 || $.inArray($.trim(sv[0]), ovm) > -1) && (ov.selected = "selected");
                    else if ("[object Array]" === Object.prototype.toString.call(options.value)) {
                        for (var oSv = options.value, i = 0; i < oSv.length; i++)
                            if (2 === oSv[i].length) {
                                var key = oSv[i][0]
                                  , value = oSv[i][1];
                                ov = document.createElement("option"),
                                ov.setAttribute("role", "option"),
                                ov.value = key,
                                ov.innerHTML = value,
                                elem.appendChild(ov),
                                msl || $.trim(key) !== $.trim(vl) && $.trim(value) !== $.trim(vl) || (ov.selected = "selected"),
                                msl && ($.inArray($.trim(value), ovm) > -1 || $.inArray($.trim(key), ovm) > -1) && (ov.selected = "selected")
                            }
                    } else if ("object" == typeof options.value) {
                        var key, oSv = options.value;
                        for (key in oSv)
                            oSv.hasOwnProperty(key) && (ov = document.createElement("option"),
                            ov.setAttribute("role", "option"),
                            ov.value = key,
                            ov.innerHTML = oSv[key],
                            elem.appendChild(ov),
                            msl || $.trim(key) !== $.trim(vl) && $.trim(oSv[key]) !== $.trim(vl) || (ov.selected = "selected"),
                            msl && ($.inArray($.trim(oSv[key]), ovm) > -1 || $.inArray($.trim(key), ovm) > -1) && (ov.selected = "selected"))
                    }
                    setAttributes(elem, options, ["value"])
                }
                break;
            case "text":
            case "password":
            case "button":
                var role;
                role = "button" === eltype ? "button" : "textbox",
                elem = document.createElement("input"),
                elem.type = eltype,
                elem.value = vl,
                setAttributes(elem, options),
                "button" !== eltype && (autowidth ? options.size || $(elem).css({
                    width: "98%"
                }) : options.size || (options.size = 20)),
                $(elem).attr("role", role);
                break;
            case "image":
            case "file":
                elem = document.createElement("input"),
                elem.type = eltype,
                setAttributes(elem, options);
                break;
            case "custom":
                elem = document.createElement("span");
                try {
                    if (!$.isFunction(options.custom_element))
                        throw "e1";
                    var celm = options.custom_element.call($t, vl, options);
                    if (!celm)
                        throw "e2";
                    celm = $(celm).addClass("customelement").attr({
                        id: options.id,
                        name: options.name
                    }),
                    $(elem).empty().append(celm)
                } catch (e) {
                    var errors = $.jgrid.getRegional($t, "errors")
                      , edit = $.jgrid.getRegional($t, "edit");
                    "e1" === e && $.jgrid.info_dialog(errors.errcap, "function 'custom_element' " + edit.msg.nodefined, edit.bClose),
                    "e2" === e ? $.jgrid.info_dialog(errors.errcap, "function 'custom_element' " + edit.msg.novalue, edit.bClose) : $.jgrid.info_dialog(errors.errcap, "string" == typeof e ? e : e.message, edit.bClose)
                }
            }
            return elem
        },
        checkDate: function(format, date) {
            var sep, daysInFebruary = function(year) {
                return year % 4 !== 0 || year % 100 === 0 && year % 400 !== 0 ? 28 : 29
            }, tsp = {};
            if (format = format.toLowerCase(),
            sep = -1 !== format.indexOf("/") ? "/" : -1 !== format.indexOf("-") ? "-" : -1 !== format.indexOf(".") ? "." : "/",
            format = format.split(sep),
            date = date.split(sep),
            3 !== date.length)
                return !1;
            var yln, i, j = -1, dln = -1, mln = -1;
            for (i = 0; i < format.length; i++) {
                var dv = isNaN(date[i]) ? 0 : parseInt(date[i], 10);
                tsp[format[i]] = dv,
                yln = format[i],
                -1 !== yln.indexOf("y") && (j = i),
                -1 !== yln.indexOf("m") && (mln = i),
                -1 !== yln.indexOf("d") && (dln = i)
            }
            yln = "y" === format[j] || "yyyy" === format[j] ? 4 : "yy" === format[j] ? 2 : -1;
            var strDate, daysInMonth = [0, 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
            return -1 === j ? !1 : (strDate = tsp[format[j]].toString(),
            2 === yln && 1 === strDate.length && (yln = 1),
            strDate.length !== yln || 0 === tsp[format[j]] && "00" !== date[j] ? !1 : -1 === mln ? !1 : (strDate = tsp[format[mln]].toString(),
            strDate.length < 1 || tsp[format[mln]] < 1 || tsp[format[mln]] > 12 ? !1 : -1 === dln ? !1 : (strDate = tsp[format[dln]].toString(),
            !(strDate.length < 1 || tsp[format[dln]] < 1 || tsp[format[dln]] > 31 || 2 === tsp[format[mln]] && tsp[format[dln]] > daysInFebruary(tsp[format[j]]) || tsp[format[dln]] > daysInMonth[tsp[format[mln]]]))))
        },
        isEmpty: function(val) {
            return !(!val.match(/^\s+$/) && "" !== val)
        },
        checkTime: function(time) {
            var regs, re = /^(\d{1,2}):(\d{2})([apAP][Mm])?$/;
            if (!$.jgrid.isEmpty(time)) {
                if (regs = time.match(re),
                !regs)
                    return !1;
                if (regs[3]) {
                    if (regs[1] < 1 || regs[1] > 12)
                        return !1
                } else if (regs[1] > 23)
                    return !1;
                if (regs[2] > 59)
                    return !1
            }
            return !0
        },
        checkValues: function(val, valref, customobject, nam) {
            var edtrul, i, nm, dft, len, fmtdate, g = this, cm = g.p.colModel, msg = $.jgrid.getRegional(this, "edit.msg");
            if (void 0 === customobject)
                if ("string" == typeof valref) {
                    for (i = 0,
                    len = cm.length; len > i; i++)
                        if (cm[i].name === valref) {
                            edtrul = cm[i].editrules,
                            valref = i,
                            null != cm[i].formoptions && (nm = cm[i].formoptions.label);
                            break
                        }
                } else
                    valref >= 0 && (edtrul = cm[valref].editrules);
            else
                edtrul = customobject,
                nm = void 0 === nam ? "_" : nam;
            if (edtrul) {
                if (nm || (nm = null != g.p.colNames ? g.p.colNames[valref] : cm[valref].label),
                edtrul.required === !0 && $.jgrid.isEmpty(val))
                    return [!1, nm + ": " + msg.required, ""];
                var rqfield = edtrul.required !== !1;
                if (edtrul.number === !0 && (rqfield !== !1 || !$.jgrid.isEmpty(val)) && isNaN(val))
                    return [!1, nm + ": " + msg.number, ""];
                if (void 0 !== edtrul.minValue && !isNaN(edtrul.minValue) && parseFloat(val) < parseFloat(edtrul.minValue))
                    return [!1, nm + ": " + msg.minValue + " " + edtrul.minValue, ""];
                if (void 0 !== edtrul.maxValue && !isNaN(edtrul.maxValue) && parseFloat(val) > parseFloat(edtrul.maxValue))
                    return [!1, nm + ": " + msg.maxValue + " " + edtrul.maxValue, ""];
                var filter;
                if (edtrul.email === !0 && !(rqfield === !1 && $.jgrid.isEmpty(val) || (filter = /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,
                filter.test(val))))
                    return [!1, nm + ": " + msg.email, ""];
                if (edtrul.integer === !0 && (rqfield !== !1 || !$.jgrid.isEmpty(val))) {
                    if (isNaN(val))
                        return [!1, nm + ": " + msg.integer, ""];
                    if (val % 1 !== 0 || -1 !== val.indexOf("."))
                        return [!1, nm + ": " + msg.integer, ""]
                }
                if (edtrul.date === !0 && !(rqfield === !1 && $.jgrid.isEmpty(val) || (cm[valref].formatoptions && cm[valref].formatoptions.newformat ? (dft = cm[valref].formatoptions.newformat,
                fmtdate = $.jgrid.getRegional(g, "formatter.date.masks"),
                fmtdate && fmtdate.hasOwnProperty(dft) && (dft = fmtdate[dft])) : dft = cm[valref].datefmt || "Y-m-d",
                $.jgrid.checkDate(dft, val))))
                    return [!1, nm + ": " + msg.date + " - " + dft, ""];
                if (edtrul.time === !0 && !(rqfield === !1 && $.jgrid.isEmpty(val) || $.jgrid.checkTime(val)))
                    return [!1, nm + ": " + msg.date + " - hh:mm (am/pm)", ""];
                if (edtrul.url === !0 && !(rqfield === !1 && $.jgrid.isEmpty(val) || (filter = /^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,
                filter.test(val))))
                    return [!1, nm + ": " + msg.url, ""];
                if (edtrul.custom === !0 && (rqfield !== !1 || !$.jgrid.isEmpty(val))) {
                    if ($.isFunction(edtrul.custom_func)) {
                        var ret = edtrul.custom_func.call(g, val, nm, valref);
                        return $.isArray(ret) ? ret : [!1, msg.customarray, ""]
                    }
                    return [!1, msg.customfcheck, ""]
                }
            }
            return [!0, "", ""]
        }
    }),
    $.fn.jqFilter = function(arg) {
        if ("string" == typeof arg) {
            var fn = $.fn.jqFilter[arg];
            if (!fn)
                throw "jqFilter - No such method: " + arg;
            var args = $.makeArray(arguments).slice(1);
            return fn.apply(this, args)
        }
        var p = $.extend(!0, {
            filter: null,
            columns: [],
            onChange: null,
            afterRedraw: null,
            checkValues: null,
            error: !1,
            errmsg: "",
            errorcheck: !0,
            showQuery: !0,
            sopt: null,
            ops: [],
            operands: null,
            numopts: ["eq", "ne", "lt", "le", "gt", "ge", "nu", "nn", "in", "ni"],
            stropts: ["eq", "ne", "bw", "bn", "ew", "en", "cn", "nc", "nu", "nn", "in", "ni"],
            strarr: ["text", "string", "blob"],
            groupOps: [{
                op: "AND",
                text: "AND"
            }, {
                op: "OR",
                text: "OR"
            }],
            groupButton: !0,
            ruleButtons: !0,
            direction: "ltr"
        }, $.jgrid.filter, arg || {});
        return this.each(function() {
            if (!this.filter) {
                this.p = p,
                null !== this.p.filter && void 0 !== this.p.filter || (this.p.filter = {
                    groupOp: this.p.groupOps[0].op,
                    rules: [],
                    groups: []
                });
                var i, cl, len = this.p.columns.length, isIE = /msie/i.test(navigator.userAgent) && !window.opera;
                if (this.p.initFilter = $.extend(!0, {}, this.p.filter),
                len) {
                    for (i = 0; len > i; i++)
                        cl = this.p.columns[i],
                        cl.stype ? cl.inputtype = cl.stype : cl.inputtype || (cl.inputtype = "text"),
                        cl.sorttype ? cl.searchtype = cl.sorttype : cl.searchtype || (cl.searchtype = "string"),
                        void 0 === cl.hidden && (cl.hidden = !1),
                        cl.label || (cl.label = cl.name),
                        cl.index && (cl.name = cl.index),
                        cl.hasOwnProperty("searchoptions") || (cl.searchoptions = {}),
                        cl.hasOwnProperty("searchrules") || (cl.searchrules = {});
                    this.p.showQuery && $(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='" + this.p.direction + "'><tbody><tr><td class='query'></td></tr></tbody></table>");
                    var getGrid = function() {
                        return $("#" + $.jgrid.jqID(p.id))[0] || null
                    }
                      , checkData = function(val, colModelItem) {
                        var ret = [!0, ""]
                          , $t = getGrid();
                        if ($.isFunction(colModelItem.searchrules))
                            ret = colModelItem.searchrules.call($t, val, colModelItem);
                        else if ($.jgrid && $.jgrid.checkValues)
                            try {
                                ret = $.jgrid.checkValues.call($t, val, -1, colModelItem.searchrules, colModelItem.label)
                            } catch (e) {}
                        ret && ret.length && ret[0] === !1 && (p.error = !ret[0],
                        p.errmsg = ret[1])
                    };
                    this.onchange = function() {
                        return this.p.error = !1,
                        this.p.errmsg = "",
                        $.isFunction(this.p.onChange) ? this.p.onChange.call(this, this.p) : !1
                    }
                    ,
                    this.reDraw = function() {
                        $("table.group:first", this).remove();
                        var t = this.createTableForGroup(p.filter, null);
                        $(this).append(t),
                        $.isFunction(this.p.afterRedraw) && this.p.afterRedraw.call(this, this.p)
                    }
                    ,
                    this.createTableForGroup = function(group, parentgroup) {
                        var i, that = this, table = $("<table class='group ui-widget ui-widget-content ui-search-table' style='border:0px none;'><tbody></tbody></table>"), align = "left";
                        "rtl" === this.p.direction && (align = "right",
                        table.attr("dir", "rtl")),
                        null === parentgroup && table.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='" + align + "'></th></tr>");
                        var tr = $("<tr></tr>");
                        table.append(tr);
                        var th = $("<th colspan='5' align='" + align + "'></th>");
                        if (tr.append(th),
                        this.p.ruleButtons === !0) {
                            var groupOpSelect = $("<select class='opsel ui-widget-content ui-corner-all'></select>");
                            th.append(groupOpSelect);
                            var selected, str = "";
                            for (i = 0; i < p.groupOps.length; i++)
                                selected = group.groupOp === that.p.groupOps[i].op ? " selected='selected'" : "",
                                str += "<option value='" + that.p.groupOps[i].op + "'" + selected + ">" + that.p.groupOps[i].text + "</option>";
                            groupOpSelect.append(str).bind("change", function() {
                                group.groupOp = $(groupOpSelect).val(),
                                that.onchange()
                            })
                        }
                        var inputAddSubgroup = "<span></span>";
                        if (this.p.groupButton && (inputAddSubgroup = $("<input type='button' value='+ {}' title='Add subgroup' class='add-group ui-widget-content ui-corner-all'/>"),
                        inputAddSubgroup.bind("click", function() {
                            return void 0 === group.groups && (group.groups = []),
                            group.groups.push({
                                groupOp: p.groupOps[0].op,
                                rules: [],
                                groups: []
                            }),
                            that.reDraw(),
                            that.onchange(),
                            !1
                        })),
                        th.append(inputAddSubgroup),
                        this.p.ruleButtons === !0) {
                            var cm, inputAddRule = $("<input type='button' value='+' title='Add rule' class='add-rule ui-add ui-widget-content ui-corner-all'/>");
                            inputAddRule.bind("click", function() {
                                for (void 0 === group.rules && (group.rules = []),
                                i = 0; i < that.p.columns.length; i++) {
                                    var searchable = void 0 === that.p.columns[i].search ? !0 : that.p.columns[i].search
                                      , hidden = that.p.columns[i].hidden === !0
                                      , ignoreHiding = that.p.columns[i].searchoptions.searchhidden === !0;
                                    if (ignoreHiding && searchable || searchable && !hidden) {
                                        cm = that.p.columns[i];
                                        break
                                    }
                                }
                                var opr;
                                return opr = cm.searchoptions.sopt ? cm.searchoptions.sopt : that.p.sopt ? that.p.sopt : -1 !== $.inArray(cm.searchtype, that.p.strarr) ? that.p.stropts : that.p.numopts,
                                group.rules.push({
                                    field: cm.name,
                                    op: opr[0],
                                    data: ""
                                }),
                                that.reDraw(),
                                !1
                            }),
                            th.append(inputAddRule)
                        }
                        if (null !== parentgroup) {
                            var inputDeleteGroup = $("<input type='button' value='-' title='Delete group' class='delete-group ui-widget-content ui-corner-all'/>");
                            th.append(inputDeleteGroup),
                            inputDeleteGroup.bind("click", function() {
                                for (i = 0; i < parentgroup.groups.length; i++)
                                    if (parentgroup.groups[i] === group) {
                                        parentgroup.groups.splice(i, 1);
                                        break
                                    }
                                return that.reDraw(),
                                that.onchange(),
                                !1
                            })
                        }
                        if (void 0 !== group.groups)
                            for (i = 0; i < group.groups.length; i++) {
                                var trHolderForSubgroup = $("<tr></tr>");
                                table.append(trHolderForSubgroup);
                                var tdFirstHolderForSubgroup = $("<td class='first'></td>");
                                trHolderForSubgroup.append(tdFirstHolderForSubgroup);
                                var tdMainHolderForSubgroup = $("<td colspan='4'></td>");
                                tdMainHolderForSubgroup.append(this.createTableForGroup(group.groups[i], group)),
                                trHolderForSubgroup.append(tdMainHolderForSubgroup)
                            }
                        if (void 0 === group.groupOp && (group.groupOp = that.p.groupOps[0].op),
                        void 0 !== group.rules)
                            for (i = 0; i < group.rules.length; i++)
                                table.append(this.createTableRowForRule(group.rules[i], group));
                        return table
                    }
                    ,
                    this.createTableRowForRule = function(rule, group) {
                        var i, op, trpar, cm, selected, that = this, $t = getGrid(), tr = $("<tr></tr>"), str = "";
                        tr.append("<td class='first'></td>");
                        var ruleFieldTd = $("<td class='columns'></td>");
                        tr.append(ruleFieldTd);
                        var ina, ruleFieldSelect = $("<select class='ui-widget-content ui-corner-all'></select>"), aoprs = [];
                        ruleFieldTd.append(ruleFieldSelect),
                        ruleFieldSelect.bind("change", function() {
                            for (rule.field = $(ruleFieldSelect).val(),
                            trpar = $(this).parents("tr:first"),
                            i = 0; i < that.p.columns.length; i++)
                                if (that.p.columns[i].name === rule.field) {
                                    cm = that.p.columns[i];
                                    break
                                }
                            if (cm) {
                                cm.searchoptions.id = $.jgrid.randId(),
                                cm.searchoptions.name = rule.field,
                                cm.searchoptions.oper = "filter",
                                isIE && "text" === cm.inputtype && (cm.searchoptions.size || (cm.searchoptions.size = 10));
                                var elm = $.jgrid.createEl.call($t, cm.inputtype, cm.searchoptions, "", !0, that.p.ajaxSelectOptions || {}, !0);
                                $(elm).addClass("input-elm ui-widget-content ui-corner-all"),
                                op = cm.searchoptions.sopt ? cm.searchoptions.sopt : that.p.sopt ? that.p.sopt : -1 !== $.inArray(cm.searchtype, that.p.strarr) ? that.p.stropts : that.p.numopts;
                                var s = ""
                                  , so = 0;
                                for (aoprs = [],
                                $.each(that.p.ops, function() {
                                    aoprs.push(this.oper)
                                }),
                                i = 0; i < op.length; i++)
                                    ina = $.inArray(op[i], aoprs),
                                    -1 !== ina && (0 === so && (rule.op = that.p.ops[ina].oper),
                                    s += "<option value='" + that.p.ops[ina].oper + "'>" + that.p.ops[ina].text + "</option>",
                                    so++);
                                if ($(".selectopts", trpar).empty().append(s),
                                $(".selectopts", trpar)[0].selectedIndex = 0,
                                $.jgrid.msie && $.jgrid.msiever() < 9) {
                                    var sw = parseInt($("select.selectopts", trpar)[0].offsetWidth, 10) + 1;
                                    $(".selectopts", trpar).width(sw),
                                    $(".selectopts", trpar).css("width", "auto")
                                }
                                $(".data", trpar).empty().append(elm),
                                $.jgrid.bindEv.call($t, elm, cm.searchoptions),
                                $(".input-elm", trpar).bind("change", function(e) {
                                    var elem = e.target;
                                    rule.data = "SPAN" === elem.nodeName.toUpperCase() && cm.searchoptions && $.isFunction(cm.searchoptions.custom_value) ? cm.searchoptions.custom_value.call($t, $(elem).children(".customelement:first"), "get") : elem.value,
                                    that.onchange()
                                }),
                                setTimeout(function() {
                                    rule.data = $(elm).val(),
                                    that.onchange()
                                }, 0)
                            }
                        });
                        var j = 0;
                        for (i = 0; i < that.p.columns.length; i++) {
                            var searchable = void 0 === that.p.columns[i].search ? !0 : that.p.columns[i].search
                              , hidden = that.p.columns[i].hidden === !0
                              , ignoreHiding = that.p.columns[i].searchoptions.searchhidden === !0;
                            (ignoreHiding && searchable || searchable && !hidden) && (selected = "",
                            rule.field === that.p.columns[i].name && (selected = " selected='selected'",
                            j = i),
                            str += "<option value='" + that.p.columns[i].name + "'" + selected + ">" + that.p.columns[i].label + "</option>")
                        }
                        ruleFieldSelect.append(str);
                        var ruleOperatorTd = $("<td class='operators'></td>");
                        tr.append(ruleOperatorTd),
                        cm = p.columns[j],
                        cm.searchoptions.id = $.jgrid.randId(),
                        isIE && "text" === cm.inputtype && (cm.searchoptions.size || (cm.searchoptions.size = 10)),
                        cm.searchoptions.name = rule.field,
                        cm.searchoptions.oper = "filter";
                        var ruleDataInput = $.jgrid.createEl.call($t, cm.inputtype, cm.searchoptions, rule.data, !0, that.p.ajaxSelectOptions || {}, !0);
                        "nu" !== rule.op && "nn" !== rule.op || ($(ruleDataInput).attr("readonly", "true"),
                        $(ruleDataInput).attr("disabled", "true"));
                        var ruleOperatorSelect = $("<select class='selectopts ui-widget-content ui-corner-all'></select>");
                        for (ruleOperatorTd.append(ruleOperatorSelect),
                        ruleOperatorSelect.bind("change", function() {
                            rule.op = $(ruleOperatorSelect).val(),
                            trpar = $(this).parents("tr:first");
                            var rd = $(".input-elm", trpar)[0];
                            "nu" === rule.op || "nn" === rule.op ? (rule.data = "",
                            "SELECT" !== rd.tagName.toUpperCase() && (rd.value = ""),
                            rd.setAttribute("readonly", "true"),
                            rd.setAttribute("disabled", "true")) : ("SELECT" === rd.tagName.toUpperCase() && (rule.data = rd.value),
                            rd.removeAttribute("readonly"),
                            rd.removeAttribute("disabled")),
                            that.onchange()
                        }),
                        op = cm.searchoptions.sopt ? cm.searchoptions.sopt : that.p.sopt ? that.p.sopt : -1 !== $.inArray(cm.searchtype, that.p.strarr) ? that.p.stropts : that.p.numopts,
                        str = "",
                        $.each(that.p.ops, function() {
                            aoprs.push(this.oper)
                        }),
                        i = 0; i < op.length; i++)
                            ina = $.inArray(op[i], aoprs),
                            -1 !== ina && (selected = rule.op === that.p.ops[ina].oper ? " selected='selected'" : "",
                            str += "<option value='" + that.p.ops[ina].oper + "'" + selected + ">" + that.p.ops[ina].text + "</option>");
                        ruleOperatorSelect.append(str);
                        var ruleDataTd = $("<td class='data'></td>");
                        tr.append(ruleDataTd),
                        ruleDataTd.append(ruleDataInput),
                        $.jgrid.bindEv.call($t, ruleDataInput, cm.searchoptions),
                        $(ruleDataInput).addClass("input-elm ui-widget-content ui-corner-all").bind("change", function() {
                            rule.data = "custom" === cm.inputtype ? cm.searchoptions.custom_value.call($t, $(this).children(".customelement:first"), "get") : $(this).val(),
                            that.onchange()
                        });
                        var ruleDeleteTd = $("<td></td>");
                        if (tr.append(ruleDeleteTd),
                        this.p.ruleButtons === !0) {
                            var ruleDeleteInput = $("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del ui-widget-content ui-corner-all'/>");
                            ruleDeleteTd.append(ruleDeleteInput),
                            ruleDeleteInput.bind("click", function() {
                                for (i = 0; i < group.rules.length; i++)
                                    if (group.rules[i] === rule) {
                                        group.rules.splice(i, 1);
                                        break
                                    }
                                return that.reDraw(),
                                that.onchange(),
                                !1
                            })
                        }
                        return tr
                    }
                    ,
                    this.getStringForGroup = function(group) {
                        var index, s = "(";
                        if (void 0 !== group.groups)
                            for (index = 0; index < group.groups.length; index++) {
                                s.length > 1 && (s += " " + group.groupOp + " ");
                                try {
                                    s += this.getStringForGroup(group.groups[index])
                                } catch (eg) {
                                    alert(eg)
                                }
                            }
                        if (void 0 !== group.rules)
                            try {
                                for (index = 0; index < group.rules.length; index++)
                                    s.length > 1 && (s += " " + group.groupOp + " "),
                                    s += this.getStringForRule(group.rules[index])
                            } catch (e) {
                                alert(e)
                            }
                        return s += ")",
                        "()" === s ? "" : s
                    }
                    ,
                    this.getStringForRule = function(rule) {
                        var i, cm, ret, val, opUF = "", opC = "", numtypes = ["int", "integer", "float", "number", "currency"];
                        for (i = 0; i < this.p.ops.length; i++)
                            if (this.p.ops[i].oper === rule.op) {
                                opUF = this.p.operands.hasOwnProperty(rule.op) ? this.p.operands[rule.op] : "",
                                opC = this.p.ops[i].oper;
                                break
                            }
                        for (i = 0; i < this.p.columns.length; i++)
                            if (this.p.columns[i].name === rule.field) {
                                cm = this.p.columns[i];
                                break
                            }
                        return void 0 === cm ? "" : (val = rule.data,
                        "bw" !== opC && "bn" !== opC || (val += "%"),
                        "ew" !== opC && "en" !== opC || (val = "%" + val),
                        "cn" !== opC && "nc" !== opC || (val = "%" + val + "%"),
                        "in" !== opC && "ni" !== opC || (val = " (" + val + ")"),
                        p.errorcheck && checkData(rule.data, cm),
                        ret = -1 !== $.inArray(cm.searchtype, numtypes) || "nn" === opC || "nu" === opC ? rule.field + " " + opUF + " " + val : rule.field + " " + opUF + ' "' + val + '"')
                    }
                    ,
                    this.resetFilter = function() {
                        this.p.filter = $.extend(!0, {}, this.p.initFilter),
                        this.reDraw(),
                        this.onchange()
                    }
                    ,
                    this.hideError = function() {
                        $("th.ui-state-error", this).html(""),
                        $("tr.error", this).hide()
                    }
                    ,
                    this.showError = function() {
                        $("th.ui-state-error", this).html(this.p.errmsg),
                        $("tr.error", this).show()
                    }
                    ,
                    this.toUserFriendlyString = function() {
                        return this.getStringForGroup(p.filter)
                    }
                    ,
                    this.toString = function() {
                        function getStringRule(rule) {
                            if (that.p.errorcheck) {
                                var i, cm;
                                for (i = 0; i < that.p.columns.length; i++)
                                    if (that.p.columns[i].name === rule.field) {
                                        cm = that.p.columns[i];
                                        break
                                    }
                                cm && checkData(rule.data, cm)
                            }
                            return rule.op + "(item." + rule.field + ",'" + rule.data + "')"
                        }
                        function getStringForGroup(group) {
                            var index, s = "(";
                            if (void 0 !== group.groups)
                                for (index = 0; index < group.groups.length; index++)
                                    s.length > 1 && (s += "OR" === group.groupOp ? " || " : " && "),
                                    s += getStringForGroup(group.groups[index]);
                            if (void 0 !== group.rules)
                                for (index = 0; index < group.rules.length; index++)
                                    s.length > 1 && (s += "OR" === group.groupOp ? " || " : " && "),
                                    s += getStringRule(group.rules[index]);
                            return s += ")",
                            "()" === s ? "" : s
                        }
                        var that = this;
                        return getStringForGroup(this.p.filter)
                    }
                    ,
                    this.reDraw(),
                    this.p.showQuery && this.onchange(),
                    this.filter = !0
                }
            }
        })
    }
    ,
    $.extend($.fn.jqFilter, {
        toSQLString: function() {
            var s = "";
            return this.each(function() {
                s = this.toUserFriendlyString()
            }),
            s
        },
        filterData: function() {
            var s;
            return this.each(function() {
                s = this.p.filter
            }),
            s
        },
        getParameter: function(param) {
            return void 0 !== param && this.p.hasOwnProperty(param) ? this.p[param] : this.p
        },
        resetFilter: function() {
            return this.each(function() {
                this.resetFilter()
            })
        },
        addFilter: function(pfilter) {
            "string" == typeof pfilter && (pfilter = $.jgrid.parse(pfilter)),
            this.each(function() {
                this.p.filter = pfilter,
                this.reDraw(),
                this.onchange()
            })
        }
    }),
    $.jgrid.extend({
        filterToolbar: function(p) {
            var regional = $.jgrid.getRegional(this[0], "search");
            return p = $.extend({
                autosearch: !0,
                autosearchDelay: 500,
                searchOnEnter: !0,
                beforeSearch: null,
                afterSearch: null,
                beforeClear: null,
                afterClear: null,
                searchurl: "",
                stringResult: !1,
                groupOp: "AND",
                defaultSearch: "bw",
                searchOperators: !1,
                resetIcon: "x",
                operands: {
                    eq: "==",
                    ne: "!",
                    lt: "<",
                    le: "<=",
                    gt: ">",
                    ge: ">=",
                    bw: "^",
                    bn: "!^",
                    "in": "=",
                    ni: "!=",
                    ew: "|",
                    en: "!@",
                    cn: "~",
                    nc: "!~",
                    nu: "#",
                    nn: "!#"
                }
            }, regional, p || {}),
            this.each(function() {
                var $t = this;
                if (!$t.p.filterToolbar) {
                    $($t).data("filterToolbar") || $($t).data("filterToolbar", p),
                    $t.p.force_regional && (p = $.extend(p, regional));
                    var timeoutHnd, triggerToolbar = function() {
                        var v, nm, so, sdata = {}, j = 0, sopt = {};
                        $.each($t.p.colModel, function() {
                            var $elem = $("#gs_" + $t.p.idPrefix + $.jgrid.jqID(this.name), this.frozen === !0 && $t.p.frozenColumns === !0 ? $t.grid.fhDiv : $t.grid.hDiv);
                            if (nm = this.index || this.name,
                            so = p.searchOperators ? $elem.parent().prev().children("a").attr("soper") || p.defaultSearch : this.searchoptions && this.searchoptions.sopt ? this.searchoptions.sopt[0] : "select" === this.stype ? "eq" : p.defaultSearch,
                            v = "custom" === this.stype && $.isFunction(this.searchoptions.custom_value) && $elem.length > 0 && "SPAN" === $elem[0].nodeName.toUpperCase() ? this.searchoptions.custom_value.call($t, $elem.children(".customelement:first"), "get") : $elem.val(),
                            v || "nu" === so || "nn" === so)
                                sdata[nm] = v,
                                sopt[nm] = so,
                                j++;
                            else
                                try {
                                    delete $t.p.postData[nm]
                                } catch (z) {}
                        });
                        var sd = j > 0;
                        if (p.stringResult === !0 || "local" === $t.p.datatype || p.searchOperators === !0) {
                            var ruleGroup = '{"groupOp":"' + p.groupOp + '","rules":['
                              , gi = 0;
                            $.each(sdata, function(i, n) {
                                gi > 0 && (ruleGroup += ","),
                                ruleGroup += '{"field":"' + i + '",',
                                ruleGroup += '"op":"' + sopt[i] + '",',
                                n += "",
                                ruleGroup += '"data":"' + n.replace(/\\/g, "\\\\").replace(/\"/g, '\\"') + '"}',
                                gi++
                            }),
                            ruleGroup += "]}",
                            $.extend($t.p.postData, {
                                filters: ruleGroup
                            }),
                            $.each(["searchField", "searchString", "searchOper"], function(i, n) {
                                $t.p.postData.hasOwnProperty(n) && delete $t.p.postData[n]
                            })
                        } else
                            $.extend($t.p.postData, sdata);
                        var saveurl;
                        $t.p.searchurl && (saveurl = $t.p.url,
                        $($t).jqGrid("setGridParam", {
                            url: $t.p.searchurl
                        }));
                        var bsr = "stop" === $($t).triggerHandler("jqGridToolbarBeforeSearch");
                        !bsr && $.isFunction(p.beforeSearch) && (bsr = p.beforeSearch.call($t)),
                        bsr || $($t).jqGrid("setGridParam", {
                            search: sd
                        }).trigger("reloadGrid", [{
                            page: 1
                        }]),
                        saveurl && $($t).jqGrid("setGridParam", {
                            url: saveurl
                        }),
                        $($t).triggerHandler("jqGridToolbarAfterSearch"),
                        $.isFunction(p.afterSearch) && p.afterSearch.call($t)
                    }, clearToolbar = function(trigger) {
                        var nm, sdata = {}, j = 0;
                        trigger = "boolean" != typeof trigger ? !0 : trigger,
                        $.each($t.p.colModel, function() {
                            var v, $elem = $("#gs_" + $t.p.idPrefix + $.jgrid.jqID(this.name), this.frozen === !0 && $t.p.frozenColumns === !0 ? $t.grid.fhDiv : $t.grid.hDiv);
                            switch (this.searchoptions && void 0 !== this.searchoptions.defaultValue && (v = this.searchoptions.defaultValue),
                            nm = this.index || this.name,
                            this.stype) {
                            case "select":
                                if ($elem.find("option").each(function(i) {
                                    return 0 === i && (this.selected = !0),
                                    $(this).val() === v ? (this.selected = !0,
                                    !1) : void 0
                                }),
                                void 0 !== v)
                                    sdata[nm] = v,
                                    j++;
                                else
                                    try {
                                        delete $t.p.postData[nm]
                                    } catch (e) {}
                                break;
                            case "text":
                                if ($elem.val(v || ""),
                                void 0 !== v)
                                    sdata[nm] = v,
                                    j++;
                                else
                                    try {
                                        delete $t.p.postData[nm]
                                    } catch (y) {}
                                break;
                            case "custom":
                                $.isFunction(this.searchoptions.custom_value) && $elem.length > 0 && "SPAN" === $elem[0].nodeName.toUpperCase() && this.searchoptions.custom_value.call($t, $elem.children(".customelement:first"), "set", v || "")
                            }
                        });
                        var sd = j > 0;
                        if ($t.p.resetsearch = !0,
                        p.stringResult === !0 || "local" === $t.p.datatype) {
                            var ruleGroup = '{"groupOp":"' + p.groupOp + '","rules":['
                              , gi = 0;
                            $.each(sdata, function(i, n) {
                                gi > 0 && (ruleGroup += ","),
                                ruleGroup += '{"field":"' + i + '",',
                                ruleGroup += '"op":"eq",',
                                n += "",
                                ruleGroup += '"data":"' + n.replace(/\\/g, "\\\\").replace(/\"/g, '\\"') + '"}',
                                gi++
                            }),
                            ruleGroup += "]}",
                            $.extend($t.p.postData, {
                                filters: ruleGroup
                            }),
                            $.each(["searchField", "searchString", "searchOper"], function(i, n) {
                                $t.p.postData.hasOwnProperty(n) && delete $t.p.postData[n]
                            })
                        } else
                            $.extend($t.p.postData, sdata);
                        var saveurl;
                        $t.p.searchurl && (saveurl = $t.p.url,
                        $($t).jqGrid("setGridParam", {
                            url: $t.p.searchurl
                        }));
                        var bcv = "stop" === $($t).triggerHandler("jqGridToolbarBeforeClear");
                        !bcv && $.isFunction(p.beforeClear) && (bcv = p.beforeClear.call($t)),
                        bcv || trigger && $($t).jqGrid("setGridParam", {
                            search: sd
                        }).trigger("reloadGrid", [{
                            page: 1
                        }]),
                        saveurl && $($t).jqGrid("setGridParam", {
                            url: saveurl
                        }),
                        $($t).triggerHandler("jqGridToolbarAfterClear"),
                        $.isFunction(p.afterClear) && p.afterClear()
                    }, toggleToolbar = function() {
                        var trow = $("tr.ui-search-toolbar", $t.grid.hDiv)
                          , trow2 = $t.p.frozenColumns === !0 ? $("tr.ui-search-toolbar", $t.grid.fhDiv) : !1;
                        "none" === trow.css("display") ? (trow.show(),
                        trow2 && trow2.show()) : (trow.hide(),
                        trow2 && trow2.hide())
                    }, buildRuleMenu = function(elem, left, top) {
                        $("#sopt_menu").remove(),
                        left = parseInt(left, 10),
                        top = parseInt(top, 10) + 18;
                        for (var selclass, ina, fs = $(".ui-jqgrid-view").css("font-size") || "11px", str = '<ul id="sopt_menu" class="ui-search-menu" role="menu" tabindex="0" style="font-size:' + fs + ";left:" + left + "px;top:" + top + 'px;">', selected = $(elem).attr("soper"), aoprs = [], i = 0, nm = $(elem).attr("colname"), len = $t.p.colModel.length; len > i && $t.p.colModel[i].name !== nm; )
                            i++;
                        var cm = $t.p.colModel[i]
                          , options = $.extend({}, cm.searchoptions);
                        for (options.sopt || (options.sopt = [],
                        options.sopt[0] = "select" === cm.stype ? "eq" : p.defaultSearch),
                        $.each(p.odata, function() {
                            aoprs.push(this.oper)
                        }),
                        i = 0; i < options.sopt.length; i++)
                            ina = $.inArray(options.sopt[i], aoprs),
                            -1 !== ina && (selclass = selected === p.odata[ina].oper ? "ui-state-highlight" : "",
                            str += '<li class="ui-menu-item ' + selclass + '" role="presentation"><a class="ui-corner-all g-menu-item" tabindex="0" role="menuitem" value="' + p.odata[ina].oper + '" oper="' + p.operands[p.odata[ina].oper] + '"><table cellspacing="0" cellpadding="0" border="0"><tr><td width="25px">' + p.operands[p.odata[ina].oper] + "</td><td>" + p.odata[ina].text + "</td></tr></table></a></li>");
                        str += "</ul>",
                        $("body").append(str),
                        $("#sopt_menu").addClass("ui-menu ui-widget ui-widget-content ui-corner-all"),
                        $("#sopt_menu > li > a").hover(function() {
                            $(this).addClass("ui-state-hover")
                        }, function() {
                            $(this).removeClass("ui-state-hover")
                        }).click(function() {
                            var v = $(this).attr("value")
                              , oper = $(this).attr("oper");
                            if ($($t).triggerHandler("jqGridToolbarSelectOper", [v, oper, elem]),
                            $("#sopt_menu").hide(),
                            $(elem).text(oper).attr("soper", v),
                            p.autosearch === !0) {
                                var inpelm = $(elem).parent().next().children()[0];
                                ($(inpelm).val() || "nu" === v || "nn" === v) && triggerToolbar()
                            }
                        })
                    }, tr = $("<tr class='ui-search-toolbar' role='row'></tr>");
                    $.each($t.p.colModel, function(ci) {
                        var soptions, so, i, st, csv, df, elem, cm = this, select = "", sot = "=", th = $("<th role='columnheader' class='ui-state-default ui-th-" + $t.p.direction + "' id='gsh_" + $t.p.id + "_" + cm.name + "' ></th>"), thd = $("<div></div>"), stbl = $("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper' headers=''></td><td class='ui-search-input' headers=''></td><td class='ui-search-clear' headers=''></td></tr></table>");
                        if (this.hidden === !0 && $(th).css("display", "none"),
                        this.search = this.search !== !1,
                        void 0 === this.stype && (this.stype = "text"),
                        soptions = $.extend({}, this.searchoptions || {}, {
                            name: cm.index || cm.name,
                            id: "gs_" + $t.p.idPrefix + cm.name,
                            oper: "search"
                        }),
                        this.search) {
                            if (p.searchOperators) {
                                for (so = soptions.sopt ? soptions.sopt[0] : "select" === cm.stype ? "eq" : p.defaultSearch,
                                i = 0; i < p.odata.length; i++)
                                    if (p.odata[i].oper === so) {
                                        sot = p.operands[so] || "";
                                        break
                                    }
                                st = null != soptions.searchtitle ? soptions.searchtitle : p.operandTitle,
                                select = "<a title='" + st + "' style='padding-right: 0.5em;' soper='" + so + "' class='soptclass' colname='" + this.name + "'>" + sot + "</a>"
                            }
                            switch ($("td:eq(0)", stbl).attr("colindex", ci).append(select),
                            void 0 === soptions.clearSearch && (soptions.clearSearch = !0),
                            soptions.clearSearch ? (csv = p.resetTitle || "Clear Search Value",
                            $("td:eq(2)", stbl).append("<a title='" + csv + "' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>" + p.resetIcon + "</a>")) : $("td:eq(2)", stbl).hide(),
                            this.surl && (soptions.dataUrl = this.surl),
                            df = "",
                            soptions.defaultValue && (df = $.isFunction(soptions.defaultValue) ? soptions.defaultValue.call($t) : soptions.defaultValue),
                            elem = $.jgrid.createEl.call($t, this.stype, soptions, df, !1, $.extend({}, $.jgrid.ajaxOptions, $t.p.ajaxSelectOptions || {})),
                            $(elem).css({
                                width: "100%"
                            }).addClass("ui-widget-content ui-corner-all"),
                            $("td:eq(1)", stbl).append(elem),
                            $(thd).append(stbl),
                            this.stype) {
                            case "select":
                                p.autosearch === !0 && (soptions.dataEvents = [{
                                    type: "change",
                                    fn: function() {
                                        return triggerToolbar(),
                                        !1
                                    }
                                }]);
                                break;
                            case "text":
                                p.autosearch === !0 && (p.searchOnEnter ? soptions.dataEvents = [{
                                    type: "keypress",
                                    fn: function(e) {
                                        var key = e.charCode || e.keyCode || 0;
                                        return 13 === key ? (triggerToolbar(),
                                        !1) : this
                                    }
                                }] : soptions.dataEvents = [{
                                    type: "keydown",
                                    fn: function(e) {
                                        var key = e.which;
                                        switch (key) {
                                        case 13:
                                            return !1;
                                        case 9:
                                        case 16:
                                        case 37:
                                        case 38:
                                        case 39:
                                        case 40:
                                        case 27:
                                            break;
                                        default:
                                            timeoutHnd && clearTimeout(timeoutHnd),
                                            timeoutHnd = setTimeout(function() {
                                                triggerToolbar()
                                            }, p.autosearchDelay)
                                        }
                                    }
                                }])
                            }
                            $.jgrid.bindEv.call($t, elem, soptions)
                        }
                        $(th).append(thd),
                        $(tr).append(th),
                        p.searchOperators || $("td:eq(0)", stbl).hide()
                    }),
                    $("table thead", $t.grid.hDiv).append(tr),
                    p.searchOperators && ($(".soptclass", tr).click(function(e) {
                        var offset = $(this).offset()
                          , left = offset.left
                          , top = offset.top;
                        buildRuleMenu(this, left, top),
                        e.stopPropagation()
                    }),
                    $("body").on("click", function(e) {
                        "soptclass" !== e.target.className && $("#sopt_menu").hide()
                    })),
                    $(".clearsearchclass", tr).click(function() {
                        var ptr = $(this).parents("tr:first")
                          , coli = parseInt($("td.ui-search-oper", ptr).attr("colindex"), 10)
                          , sval = $.extend({}, $t.p.colModel[coli].searchoptions || {})
                          , dval = sval.defaultValue ? sval.defaultValue : "";
                        "select" === $t.p.colModel[coli].stype ? dval ? $("td.ui-search-input select", ptr).val(dval) : $("td.ui-search-input select", ptr)[0].selectedIndex = 0 : $("td.ui-search-input input", ptr).val(dval),
                        p.autosearch === !0 && triggerToolbar()
                    }),
                    this.p.filterToolbar = !0,
                    this.triggerToolbar = triggerToolbar,
                    this.clearToolbar = clearToolbar,
                    this.toggleToolbar = toggleToolbar
                }
            })
        },
        destroyFilterToolbar: function() {
            return this.each(function() {
                this.p.filterToolbar && (this.triggerToolbar = null,
                this.clearToolbar = null,
                this.toggleToolbar = null,
                this.p.filterToolbar = !1,
                $(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())
            })
        },
        searchGrid: function(p) {
            var regional = $.jgrid.getRegional(this[0], "search");
            return p = $.extend(!0, {
                recreateFilter: !1,
                drag: !0,
                sField: "searchField",
                sValue: "searchString",
                sOper: "searchOper",
                sFilter: "filters",
                loadDefaults: !0,
                beforeShowSearch: null,
                afterShowSearch: null,
                onInitializeSearch: null,
                afterRedraw: null,
                afterChange: null,
                closeAfterSearch: !1,
                closeAfterReset: !1,
                closeOnEscape: !1,
                searchOnEnter: !1,
                multipleSearch: !1,
                multipleGroup: !1,
                top: 0,
                left: 0,
                jqModal: !0,
                modal: !1,
                resize: !0,
                width: 450,
                height: "auto",
                dataheight: "auto",
                showQuery: !1,
                errorcheck: !0,
                sopt: null,
                stringResult: void 0,
                onClose: null,
                onSearch: null,
                onReset: null,
                toTop: !0,
                overlay: 30,
                columns: [],
                tmplNames: null,
                tmplFilters: null,
                tmplLabel: " Template: ",
                showOnLoad: !1,
                layer: null,
                operands: {
                    eq: "=",
                    ne: "<>",
                    lt: "<",
                    le: "<=",
                    gt: ">",
                    ge: ">=",
                    bw: "LIKE",
                    bn: "NOT LIKE",
                    "in": "IN",
                    ni: "NOT IN",
                    ew: "LIKE",
                    en: "NOT LIKE",
                    cn: "LIKE",
                    nc: "NOT LIKE",
                    nu: "IS NULL",
                    nn: "ISNOT NULL"
                }
            }, regional, p || {}),
            this.each(function() {
                function showFilter(_filter) {
                    showFrm = $($t).triggerHandler("jqGridFilterBeforeShow", [_filter]),
                    void 0 === showFrm && (showFrm = !0),
                    showFrm && $.isFunction(p.beforeShowSearch) && (showFrm = p.beforeShowSearch.call($t, _filter)),
                    showFrm && ($.jgrid.viewModal("#" + $.jgrid.jqID(IDs.themodal), {
                        gbox: "#gbox_" + $.jgrid.jqID(fid),
                        jqm: p.jqModal,
                        modal: p.modal,
                        overlay: p.overlay,
                        toTop: p.toTop
                    }),
                    $($t).triggerHandler("jqGridFilterAfterShow", [_filter]),
                    $.isFunction(p.afterShowSearch) && p.afterShowSearch.call($t, _filter))
                }
                var $t = this;
                if ($t.grid) {
                    var fl, fid = "fbox_" + $t.p.id, showFrm = !0, mustReload = !0, IDs = {
                        themodal: "searchmod" + fid,
                        modalhead: "searchhd" + fid,
                        modalcontent: "searchcnt" + fid,
                        scrollelm: fid
                    }, defaultFilters = $t.p.postData[p.sFilter];
                    if ("string" == typeof defaultFilters && (defaultFilters = $.jgrid.parse(defaultFilters)),
                    p.recreateFilter === !0 && $("#" + $.jgrid.jqID(IDs.themodal)).remove(),
                    void 0 !== $("#" + $.jgrid.jqID(IDs.themodal))[0])
                        showFilter($("#fbox_" + $.jgrid.jqID($t.p.id)));
                    else {
                        var fil = $("<div><div id='" + fid + "' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_" + $.jgrid.jqID($t.p.id))
                          , align = "left"
                          , butleft = "";
                        "rtl" === $t.p.direction && (align = "right",
                        butleft = " style='text-align:left'",
                        fil.attr("dir", "rtl"));
                        var colnm, bt, columns = $.extend([], $t.p.colModel), bS = "<a id='" + fid + "_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>" + p.Find + "</a>", bC = "<a id='" + fid + "_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>" + p.Reset + "</a>", bQ = "", tmpl = "", found = !1, cmi = -1;
                        if (p.showQuery && (bQ = "<a id='" + fid + "_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>"),
                        p.columns.length ? (columns = p.columns,
                        cmi = 0,
                        colnm = columns[0].index || columns[0].name) : $.each(columns, function(i, n) {
                            if (n.label || (n.label = $t.p.colNames[i]),
                            !found) {
                                var searchable = void 0 === n.search ? !0 : n.search
                                  , hidden = n.hidden === !0
                                  , ignoreHiding = n.searchoptions && n.searchoptions.searchhidden === !0;
                                (ignoreHiding && searchable || searchable && !hidden) && (found = !0,
                                colnm = n.index || n.name,
                                cmi = i)
                            }
                        }),
                        !defaultFilters && colnm || p.multipleSearch === !1) {
                            var cmop = "eq";
                            cmi >= 0 && columns[cmi].searchoptions && columns[cmi].searchoptions.sopt ? cmop = columns[cmi].searchoptions.sopt[0] : p.sopt && p.sopt.length && (cmop = p.sopt[0]),
                            defaultFilters = {
                                groupOp: "AND",
                                rules: [{
                                    field: colnm,
                                    op: cmop,
                                    data: ""
                                }]
                            }
                        }
                        found = !1,
                        p.tmplNames && p.tmplNames.length && (found = !0,
                        tmpl = p.tmplLabel,
                        tmpl += "<select class='ui-template'>",
                        tmpl += "<option value='default'>Default</option>",
                        $.each(p.tmplNames, function(i, n) {
                            tmpl += "<option value='" + i + "'>" + n + "</option>"
                        }),
                        tmpl += "</select>"),
                        bt = "<table class='EditTable' style='border:0px none;margin-top:5px' id='" + fid + "_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:" + align + "'>" + bC + tmpl + "</td><td class='EditButton' " + butleft + ">" + bQ + bS + "</td></tr></tbody></table>",
                        fid = $.jgrid.jqID(fid),
                        $("#" + fid).jqFilter({
                            columns: columns,
                            filter: p.loadDefaults ? defaultFilters : null,
                            showQuery: p.showQuery,
                            errorcheck: p.errorcheck,
                            sopt: p.sopt,
                            groupButton: p.multipleGroup,
                            ruleButtons: p.multipleSearch,
                            afterRedraw: p.afterRedraw,
                            ops: p.odata,
                            operands: p.operands,
                            ajaxSelectOptions: $t.p.ajaxSelectOptions,
                            groupOps: p.groupOps,
                            onChange: function() {
                                this.p.showQuery && $(".query", this).html(this.toUserFriendlyString()),
                                $.isFunction(p.afterChange) && p.afterChange.call($t, $("#" + fid), p)
                            },
                            direction: $t.p.direction,
                            id: $t.p.id
                        }),
                        fil.append(bt),
                        found && p.tmplFilters && p.tmplFilters.length && $(".ui-template", fil).bind("change", function() {
                            var curtempl = $(this).val();
                            return "default" === curtempl ? $("#" + fid).jqFilter("addFilter", defaultFilters) : $("#" + fid).jqFilter("addFilter", p.tmplFilters[parseInt(curtempl, 10)]),
                            !1
                        }),
                        p.multipleGroup === !0 && (p.multipleSearch = !0),
                        $($t).triggerHandler("jqGridFilterInitialize", [$("#" + fid)]),
                        $.isFunction(p.onInitializeSearch) && p.onInitializeSearch.call($t, $("#" + fid)),
                        p.gbox = "#gbox_" + fid,
                        p.layer ? $.jgrid.createModal(IDs, fil, p, "#gview_" + $.jgrid.jqID($t.p.id), $("#gbox_" + $.jgrid.jqID($t.p.id))[0], "#" + $.jgrid.jqID(p.layer), {
                            position: "relative"
                        }) : $.jgrid.createModal(IDs, fil, p, "#gview_" + $.jgrid.jqID($t.p.id), $("#gbox_" + $.jgrid.jqID($t.p.id))[0]),
                        (p.searchOnEnter || p.closeOnEscape) && $("#" + $.jgrid.jqID(IDs.themodal)).keydown(function(e) {
                            var $target = $(e.target);
                            return !p.searchOnEnter || 13 !== e.which || $target.hasClass("add-group") || $target.hasClass("add-rule") || $target.hasClass("delete-group") || $target.hasClass("delete-rule") || $target.hasClass("fm-button") && $target.is("[id$=_query]") ? p.closeOnEscape && 27 === e.which ? ($("#" + $.jgrid.jqID(IDs.modalhead)).find(".ui-jqdialog-titlebar-close").click(),
                            !1) : void 0 : ($("#" + fid + "_search").click(),
                            !1)
                        }),
                        bQ && $("#" + fid + "_query").bind("click", function() {
                            return $(".queryresult", fil).toggle(),
                            !1
                        }),
                        void 0 === p.stringResult && (p.stringResult = p.multipleSearch),
                        $("#" + fid + "_search").bind("click", function() {
                            var res, filters, sdata = {};
                            if (fl = $("#" + fid),
                            fl.find(".input-elm:focus").change(),
                            filters = fl.jqFilter("filterData"),
                            p.errorcheck && (fl[0].hideError(),
                            p.showQuery || fl.jqFilter("toSQLString"),
                            fl[0].p.error))
                                return fl[0].showError(),
                                !1;
                            if (p.stringResult) {
                                try {
                                    res = JSON.stringify(filters)
                                } catch (e2) {}
                                "string" == typeof res && (sdata[p.sFilter] = res,
                                $.each([p.sField, p.sValue, p.sOper], function() {
                                    sdata[this] = ""
                                }))
                            } else
                                p.multipleSearch ? (sdata[p.sFilter] = filters,
                                $.each([p.sField, p.sValue, p.sOper], function() {
                                    sdata[this] = ""
                                })) : (sdata[p.sField] = filters.rules[0].field,
                                sdata[p.sValue] = filters.rules[0].data,
                                sdata[p.sOper] = filters.rules[0].op,
                                sdata[p.sFilter] = "");
                            return $t.p.search = !0,
                            $.extend($t.p.postData, sdata),
                            mustReload = $($t).triggerHandler("jqGridFilterSearch"),
                            void 0 === mustReload && (mustReload = !0),
                            mustReload && $.isFunction(p.onSearch) && (mustReload = p.onSearch.call($t, $t.p.filters)),
                            mustReload !== !1 && $($t).trigger("reloadGrid", [{
                                page: 1
                            }]),
                            p.closeAfterSearch && $.jgrid.hideModal("#" + $.jgrid.jqID(IDs.themodal), {
                                gb: "#gbox_" + $.jgrid.jqID($t.p.id),
                                jqm: p.jqModal,
                                onClose: p.onClose
                            }),
                            !1
                        }),
                        $("#" + fid + "_reset").bind("click", function() {
                            var sdata = {}
                              , fl = $("#" + fid);
                            return $t.p.search = !1,
                            $t.p.resetsearch = !0,
                            p.multipleSearch === !1 ? sdata[p.sField] = sdata[p.sValue] = sdata[p.sOper] = "" : sdata[p.sFilter] = "",
                            fl[0].resetFilter(),
                            found && $(".ui-template", fil).val("default"),
                            $.extend($t.p.postData, sdata),
                            mustReload = $($t).triggerHandler("jqGridFilterReset"),
                            void 0 === mustReload && (mustReload = !0),
                            mustReload && $.isFunction(p.onReset) && (mustReload = p.onReset.call($t)),
                            mustReload !== !1 && $($t).trigger("reloadGrid", [{
                                page: 1
                            }]),
                            p.closeAfterReset && $.jgrid.hideModal("#" + $.jgrid.jqID(IDs.themodal), {
                                gb: "#gbox_" + $.jgrid.jqID($t.p.id),
                                jqm: p.jqModal,
                                onClose: p.onClose
                            }),
                            !1
                        }),
                        showFilter($("#" + fid)),
                        $(".fm-button:not(.ui-state-disabled)", fil).hover(function() {
                            $(this).addClass("ui-state-hover")
                        }, function() {
                            $(this).removeClass("ui-state-hover")
                        })
                    }
                }
            })
        }
    });
    var rp_ge = {};
    if ($.jgrid.extend({
        editGridRow: function(rowid, p) {
            var regional = $.jgrid.getRegional(this[0], "edit");
            return p = $.extend(!0, {
                top: 0,
                left: 0,
                width: 300,
                datawidth: "auto",
                height: "auto",
                dataheight: "auto",
                modal: !1,
                overlay: 30,
                drag: !0,
                resize: !0,
                url: null,
                mtype: "POST",
                clearAfterAdd: !0,
                closeAfterEdit: !1,
                reloadAfterSubmit: !0,
                onInitializeForm: null,
                beforeInitData: null,
                beforeShowForm: null,
                afterShowForm: null,
                beforeSubmit: null,
                afterSubmit: null,
                onclickSubmit: null,
                afterComplete: null,
                onclickPgButtons: null,
                afterclickPgButtons: null,
                editData: {},
                recreateForm: !1,
                jqModal: !0,
                closeOnEscape: !1,
                addedrow: "first",
                topinfo: "",
                bottominfo: "",
                saveicon: [],
                closeicon: [],
                savekey: [!1, 13],
                navkeys: [!1, 38, 40],
                checkOnSubmit: !1,
                checkOnUpdate: !1,
                _savedData: {},
                processing: !1,
                onClose: null,
                ajaxEditOptions: {},
                serializeEditData: null,
                viewPagerButtons: !0,
                overlayClass: "ui-widget-overlay",
                removemodal: !0,
                form: "edit",
                template: null
            }, regional, p || {}),
            rp_ge[$(this)[0].p.id] = p,
            this.each(function() {
                function getFormData() {
                    return $(frmtb).find(".FormElement").each(function() {
                        var celm = $(".customelement", this);
                        if (celm.length) {
                            var elem = celm[0]
                              , nm = $(elem).attr("name");
                            $.each($t.p.colModel, function() {
                                if (this.name === nm && this.editoptions && $.isFunction(this.editoptions.custom_value)) {
                                    try {
                                        if (postdata[nm] = this.editoptions.custom_value.call($t, $("#" + $.jgrid.jqID(nm), frmtb), "get"),
                                        void 0 === postdata[nm])
                                            throw "e1"
                                    } catch (e) {
                                        "e1" === e ? $.jgrid.info_dialog(errors.errcap, "function 'custom_value' " + rp_ge[$(this)[0]].p.msg.novalue, rp_ge[$(this)[0]].p.bClose) : $.jgrid.info_dialog(errors.errcap, e.message, rp_ge[$(this)[0]].p.bClose)
                                    }
                                    return !0
                                }
                            })
                        } else {
                            switch ($(this).get(0).type) {
                            case "checkbox":
                                if ($(this).is(":checked"))
                                    postdata[this.name] = $(this).val();
                                else {
                                    var ofv = $(this).attr("offval");
                                    postdata[this.name] = ofv
                                }
                                break;
                            case "select-one":
                                postdata[this.name] = $("option:selected", this).val();
                                break;
                            case "select-multiple":
                                postdata[this.name] = $(this).val(),
                                postdata[this.name] ? postdata[this.name] = postdata[this.name].join(",") : postdata[this.name] = "";
                                var selectedText = [];
                                $("option:selected", this).each(function(i, selected) {
                                    selectedText[i] = $(selected).text()
                                });
                                break;
                            case "password":
                            case "text":
                            case "textarea":
                            case "button":
                                postdata[this.name] = $(this).val()
                            }
                            $t.p.autoencode && (postdata[this.name] = $.jgrid.htmlEncode(postdata[this.name]))
                        }
                    }),
                    !0
                }
                function createData(rowid, obj, tb, maxcols) {
                    var nm, hc, trdata, tmp, dc, elc, i, cnt = 0, retpos = [], ind = !1, tdtmpl = "<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>", tmpl = "";
                    for (i = 1; maxcols >= i; i++)
                        tmpl += tdtmpl;
                    if ("_empty" !== rowid && (ind = $(obj).jqGrid("getInd", rowid)),
                    $(obj.p.colModel).each(function(i) {
                        if (nm = this.name,
                        hc = this.editrules && this.editrules.edithidden === !0 ? !1 : this.hidden === !0,
                        dc = hc ? "style='display:none'" : "",
                        "cb" !== nm && "subgrid" !== nm && this.editable === !0 && "rn" !== nm) {
                            if (ind === !1)
                                tmp = "";
                            else if (nm === obj.p.ExpandColumn && obj.p.treeGrid === !0)
                                tmp = $("td[role='gridcell']:eq(" + i + ")", obj.rows[ind]).text();
                            else {
                                try {
                                    tmp = $.unformat.call(obj, $("td[role='gridcell']:eq(" + i + ")", obj.rows[ind]), {
                                        rowId: rowid,
                                        colModel: this
                                    }, i)
                                } catch (_) {
                                    tmp = this.edittype && "textarea" === this.edittype ? $("td[role='gridcell']:eq(" + i + ")", obj.rows[ind]).text() : $("td[role='gridcell']:eq(" + i + ")", obj.rows[ind]).html()
                                }
                                (!tmp || "&nbsp;" === tmp || "&#160;" === tmp || 1 === tmp.length && 160 === tmp.charCodeAt(0)) && (tmp = "")
                            }
                            var opt = $.extend({}, this.editoptions || {}, {
                                id: nm,
                                name: nm,
                                rowId: rowid,
                                oper: "edit"
                            })
                              , frmopt = $.extend({}, {
                                elmprefix: "",
                                elmsuffix: "",
                                rowabove: !1,
                                rowcontent: ""
                            }, this.formoptions || {})
                              , rp = parseInt(frmopt.rowpos, 10) || cnt + 1
                              , cp = parseInt(2 * (parseInt(frmopt.colpos, 10) || 1), 10);
                            if ("_empty" === rowid && opt.defaultValue && (tmp = $.isFunction(opt.defaultValue) ? opt.defaultValue.call($t) : opt.defaultValue),
                            this.edittype || (this.edittype = "text"),
                            $t.p.autoencode && (tmp = $.jgrid.htmlDecode(tmp)),
                            elc = $.jgrid.createEl.call($t, this.edittype, opt, tmp, !1, $.extend({}, $.jgrid.ajaxOptions, obj.p.ajaxSelectOptions || {})),
                            "select" === this.edittype && (tmp = $(elc).val(),
                            "select-multiple" === $(elc).get(0).type && (tmp = tmp.join(","))),
                            "checkbox" === this.edittype && (tmp = $(elc).is(":checked") ? $(elc).val() : $(elc).attr("offval")),
                            (rp_ge[$t.p.id].checkOnSubmit || rp_ge[$t.p.id].checkOnUpdate) && (rp_ge[$t.p.id]._savedData[nm] = tmp),
                            $(elc).addClass("FormElement"),
                            $.inArray(this.edittype, ["text", "textarea", "password", "select"]) > -1 && $(elc).addClass("ui-widget-content ui-corner-all"),
                            templ)
                                $(frm).find("#" + nm).replaceWith(elc);
                            else {
                                if (trdata = $(tb).find("tr[rowpos=" + rp + "]"),
                                frmopt.rowabove) {
                                    var newdata = $("<tr><td class='contentinfo' colspan='" + 2 * maxcols + "'>" + frmopt.rowcontent + "</td></tr>");
                                    $(tb).append(newdata),
                                    newdata[0].rp = rp
                                }
                                0 === trdata.length && (trdata = $("<tr " + dc + " rowpos='" + rp + "'></tr>").addClass("FormData").attr("id", "tr_" + nm),
                                $(trdata).append(tmpl),
                                $(tb).append(trdata),
                                trdata[0].rp = rp),
                                $("td:eq(" + (cp - 2) + ")", trdata[0]).html(void 0 === frmopt.label ? obj.p.colNames[i] : frmopt.label),
                                $("td:eq(" + (cp - 1) + ")", trdata[0]).append(frmopt.elmprefix).append(elc).append(frmopt.elmsuffix)
                            }
                            "custom" === this.edittype && $.isFunction(opt.custom_value) && opt.custom_value.call($t, $("#" + nm, frmgr), "set", tmp),
                            $.jgrid.bindEv.call($t, elc, opt),
                            retpos[cnt] = i,
                            cnt++
                        }
                    }),
                    cnt > 0) {
                        var idrow;
                        templ ? (idrow = "<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='" + obj.p.id + "_id' value='" + rowid + "'/>",
                        $(frm).append(idrow)) : (idrow = $("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='" + (2 * maxcols - 1) + "' class='DataTD'><input class='FormElement' id='id_g' type='text' name='" + obj.p.id + "_id' value='" + rowid + "'/></td></tr>"),
                        idrow[0].rp = cnt + 999,
                        $(tb).append(idrow)),
                        (rp_ge[$t.p.id].checkOnSubmit || rp_ge[$t.p.id].checkOnUpdate) && (rp_ge[$t.p.id]._savedData[obj.p.id + "_id"] = rowid)
                    }
                    return retpos
                }
                function fillData(rowid, obj, fmid) {
                    var nm, tmp, fld, opt, vl, vlc, cnt = 0;
                    (rp_ge[$t.p.id].checkOnSubmit || rp_ge[$t.p.id].checkOnUpdate) && (rp_ge[$t.p.id]._savedData = {},
                    rp_ge[$t.p.id]._savedData[obj.p.id + "_id"] = rowid);
                    var cm = obj.p.colModel;
                    if ("_empty" === rowid)
                        return $(cm).each(function() {
                            nm = this.name,
                            opt = $.extend({}, this.editoptions || {}),
                            fld = $("#" + $.jgrid.jqID(nm), fmid),
                            fld && fld.length && null !== fld[0] && (vl = "",
                            "custom" === this.edittype && $.isFunction(opt.custom_value) ? opt.custom_value.call($t, $("#" + nm, fmid), "set", vl) : opt.defaultValue ? (vl = $.isFunction(opt.defaultValue) ? opt.defaultValue.call($t) : opt.defaultValue,
                            "checkbox" === fld[0].type ? (vlc = vl.toLowerCase(),
                            vlc.search(/(false|f|0|no|n|off|undefined)/i) < 0 && "" !== vlc ? (fld[0].checked = !0,
                            fld[0].defaultChecked = !0,
                            fld[0].value = vl) : (fld[0].checked = !1,
                            fld[0].defaultChecked = !1)) : fld.val(vl)) : "checkbox" === fld[0].type ? (fld[0].checked = !1,
                            fld[0].defaultChecked = !1,
                            vl = $(fld).attr("offval")) : fld[0].type && "select" === fld[0].type.substr(0, 6) ? fld[0].selectedIndex = 0 : fld.val(vl),
                            (rp_ge[$t.p.id].checkOnSubmit === !0 || rp_ge[$t.p.id].checkOnUpdate) && (rp_ge[$t.p.id]._savedData[nm] = vl))
                        }),
                        void $("#id_g", fmid).val(rowid);
                    var tre = $(obj).jqGrid("getInd", rowid, !0);
                    tre && ($('td[role="gridcell"]', tre).each(function(i) {
                        if (nm = cm[i].name,
                        "cb" !== nm && "subgrid" !== nm && "rn" !== nm && cm[i].editable === !0) {
                            if (nm === obj.p.ExpandColumn && obj.p.treeGrid === !0)
                                tmp = $(this).text();
                            else
                                try {
                                    tmp = $.unformat.call(obj, $(this), {
                                        rowId: rowid,
                                        colModel: cm[i]
                                    }, i)
                                } catch (_) {
                                    tmp = "textarea" === cm[i].edittype ? $(this).text() : $(this).html()
                                }
                            switch ($t.p.autoencode && (tmp = $.jgrid.htmlDecode(tmp)),
                            (rp_ge[$t.p.id].checkOnSubmit === !0 || rp_ge[$t.p.id].checkOnUpdate) && (rp_ge[$t.p.id]._savedData[nm] = tmp),
                            nm = $.jgrid.jqID(nm),
                            cm[i].edittype) {
                            case "password":
                            case "text":
                            case "button":
                            case "image":
                            case "textarea":
                                ("&nbsp;" === tmp || "&#160;" === tmp || 1 === tmp.length && 160 === tmp.charCodeAt(0)) && (tmp = ""),
                                $("#" + nm, fmid).val(tmp);
                                break;
                            case "select":
                                var opv = tmp.split(",");
                                opv = $.map(opv, function(n) {
                                    return $.trim(n)
                                }),
                                $("#" + nm + " option", fmid).each(function() {
                                    cm[i].editoptions.multiple || $.trim(tmp) !== $.trim($(this).text()) && opv[0] !== $.trim($(this).text()) && opv[0] !== $.trim($(this).val()) ? cm[i].editoptions.multiple && ($.inArray($.trim($(this).text()), opv) > -1 || $.inArray($.trim($(this).val()), opv) > -1) ? this.selected = !0 : this.selected = !1 : this.selected = !0
                                }),
                                (rp_ge[$t.p.id].checkOnSubmit === !0 || rp_ge[$t.p.id].checkOnUpdate) && (tmp = $("#" + nm, fmid).val(),
                                cm[i].editoptions.multiple && (tmp = tmp.join(",")),
                                rp_ge[$t.p.id]._savedData[nm] = tmp);
                                break;
                            case "checkbox":
                                if (tmp = String(tmp),
                                cm[i].editoptions && cm[i].editoptions.value) {
                                    var cb = cm[i].editoptions.value.split(":");
                                    cb[0] === tmp ? $("#" + nm, fmid)[$t.p.useProp ? "prop" : "attr"]({
                                        checked: !0,
                                        defaultChecked: !0
                                    }) : $("#" + nm, fmid)[$t.p.useProp ? "prop" : "attr"]({
                                        checked: !1,
                                        defaultChecked: !1
                                    })
                                } else
                                    tmp = tmp.toLowerCase(),
                                    tmp.search(/(false|f|0|no|n|off|undefined)/i) < 0 && "" !== tmp ? ($("#" + nm, fmid)[$t.p.useProp ? "prop" : "attr"]("checked", !0),
                                    $("#" + nm, fmid)[$t.p.useProp ? "prop" : "attr"]("defaultChecked", !0)) : ($("#" + nm, fmid)[$t.p.useProp ? "prop" : "attr"]("checked", !1),
                                    $("#" + nm, fmid)[$t.p.useProp ? "prop" : "attr"]("defaultChecked", !1));
                                (rp_ge[$t.p.id].checkOnSubmit === !0 || rp_ge[$t.p.id].checkOnUpdate) && (tmp = $("#" + nm, fmid).is(":checked") ? $("#" + nm, fmid).val() : $("#" + nm, fmid).attr("offval"));
                                break;
                            case "custom":
                                try {
                                    if (!cm[i].editoptions || !$.isFunction(cm[i].editoptions.custom_value))
                                        throw "e1";
                                    cm[i].editoptions.custom_value.call($t, $("#" + nm, fmid), "set", tmp)
                                } catch (e) {
                                    "e1" === e ? $.jgrid.info_dialog(errors.errcap, "function 'custom_value' " + rp_ge[$(this)[0]].p.msg.nodefined, $.rp_ge[$(this)[0]].p.bClose) : $.jgrid.info_dialog(errors.errcap, e.message, $.rp_ge[$(this)[0]].p.bClose)
                                }
                            }
                            cnt++
                        }
                    }),
                    cnt > 0 && $("#id_g", frmtb).val(rowid))
                }
                function setNulls() {
                    $.each($t.p.colModel, function(i, n) {
                        n.editoptions && n.editoptions.NullIfEmpty === !0 && postdata.hasOwnProperty(n.name) && "" === postdata[n.name] && (postdata[n.name] = "null")
                    })
                }
                function postIt() {
                    var copydata, idname, oper, key, selr, i, url, ret = [!0, "", ""], onCS = {}, opers = $t.p.prmNames, retvals = $($t).triggerHandler("jqGridAddEditBeforeCheckValues", [$(frmgr), frmoper]);
                    retvals && "object" == typeof retvals && (postdata = retvals),
                    $.isFunction(rp_ge[$t.p.id].beforeCheckValues) && (retvals = rp_ge[$t.p.id].beforeCheckValues.call($t, postdata, $(frmgr), frmoper),
                    retvals && "object" == typeof retvals && (postdata = retvals));
                    for (key in postdata)
                        if (postdata.hasOwnProperty(key) && (ret = $.jgrid.checkValues.call($t, postdata[key], key),
                        ret[0] === !1))
                            break;
                    if (setNulls(),
                    ret[0] && (onCS = $($t).triggerHandler("jqGridAddEditClickSubmit", [rp_ge[$t.p.id], postdata, frmoper]),
                    void 0 === onCS && $.isFunction(rp_ge[$t.p.id].onclickSubmit) && (onCS = rp_ge[$t.p.id].onclickSubmit.call($t, rp_ge[$t.p.id], postdata, frmoper) || {}),
                    ret = $($t).triggerHandler("jqGridAddEditBeforeSubmit", [postdata, $(frmgr), frmoper]),
                    void 0 === ret && (ret = [!0, "", ""]),
                    ret[0] && $.isFunction(rp_ge[$t.p.id].beforeSubmit) && (ret = rp_ge[$t.p.id].beforeSubmit.call($t, postdata, $(frmgr), frmoper))),
                    ret[0] && !rp_ge[$t.p.id].processing) {
                        if (rp_ge[$t.p.id].processing = !0,
                        $("#sData", frmtb + "_2").addClass("ui-state-active"),
                        url = rp_ge[$t.p.id].url || $($t).jqGrid("getGridParam", "editurl"),
                        oper = opers.oper,
                        idname = "clientArray" === url ? $t.p.keyName : opers.id,
                        postdata[oper] = "_empty" === $.trim(postdata[$t.p.id + "_id"]) ? opers.addoper : opers.editoper,
                        postdata[oper] !== opers.addoper ? postdata[idname] = postdata[$t.p.id + "_id"] : void 0 === postdata[idname] && (postdata[idname] = postdata[$t.p.id + "_id"]),
                        delete postdata[$t.p.id + "_id"],
                        postdata = $.extend(postdata, rp_ge[$t.p.id].editData, onCS),
                        $t.p.treeGrid === !0) {
                            if (postdata[oper] === opers.addoper) {
                                selr = $($t).jqGrid("getGridParam", "selrow");
                                var tr_par_id = "adjacency" === $t.p.treeGridModel ? $t.p.treeReader.parent_id_field : "parent_id";
                                postdata[tr_par_id] = selr
                            }
                            for (i in $t.p.treeReader)
                                if ($t.p.treeReader.hasOwnProperty(i)) {
                                    var itm = $t.p.treeReader[i];
                                    if (postdata.hasOwnProperty(itm)) {
                                        if (postdata[oper] === opers.addoper && "parent_id_field" === i)
                                            continue;
                                        delete postdata[itm]
                                    }
                                }
                        }
                        postdata[idname] = $.jgrid.stripPref($t.p.idPrefix, postdata[idname]);
                        var ajaxOptions = $.extend({
                            url: url,
                            type: rp_ge[$t.p.id].mtype,
                            data: $.isFunction(rp_ge[$t.p.id].serializeEditData) ? rp_ge[$t.p.id].serializeEditData.call($t, postdata) : postdata,
                            complete: function(data, status) {
                                var key;
                                if ($("#sData", frmtb + "_2").removeClass("ui-state-active"),
                                postdata[idname] = $t.p.idPrefix + postdata[idname],
                                data.status >= 300 && 304 !== data.status ? (ret[0] = !1,
                                ret[1] = $($t).triggerHandler("jqGridAddEditErrorTextFormat", [data, frmoper]),
                                $.isFunction(rp_ge[$t.p.id].errorTextFormat) ? ret[1] = rp_ge[$t.p.id].errorTextFormat.call($t, data, frmoper) : ret[1] = status + " Status: '" + data.statusText + "'. Error code: " + data.status) : (ret = $($t).triggerHandler("jqGridAddEditAfterSubmit", [data, postdata, frmoper]),
                                void 0 === ret && (ret = [!0, "", ""]),
                                ret[0] && $.isFunction(rp_ge[$t.p.id].afterSubmit) && (ret = rp_ge[$t.p.id].afterSubmit.call($t, data, postdata, frmoper))),
                                ret[0] === !1)
                                    $(".FormError", frmgr).html(ret[1]),
                                    $(".FormError", frmgr).show();
                                else if ($t.p.autoencode && $.each(postdata, function(n, v) {
                                    postdata[n] = $.jgrid.htmlDecode(v)
                                }),
                                postdata[oper] === opers.addoper ? (ret[2] || (ret[2] = $.jgrid.randId()),
                                null == postdata[idname] || "_empty" === postdata[idname] ? postdata[idname] = ret[2] : ret[2] = postdata[idname],
                                rp_ge[$t.p.id].reloadAfterSubmit ? $($t).trigger("reloadGrid") : $t.p.treeGrid === !0 ? $($t).jqGrid("addChildNode", ret[2], selr, postdata) : $($t).jqGrid("addRowData", ret[2], postdata, p.addedrow),
                                rp_ge[$t.p.id].closeAfterAdd ? ($t.p.treeGrid !== !0 && $($t).jqGrid("setSelection", ret[2]),
                                $.jgrid.hideModal("#" + $.jgrid.jqID(IDs.themodal), {
                                    gb: "#gbox_" + $.jgrid.jqID(gID),
                                    jqm: p.jqModal,
                                    onClose: rp_ge[$t.p.id].onClose,
                                    removemodal: rp_ge[$t.p.id].removemodal,
                                    formprop: !rp_ge[$t.p.id].recreateForm,
                                    form: rp_ge[$t.p.id].form
                                })) : rp_ge[$t.p.id].clearAfterAdd && fillData("_empty", $t, frmgr)) : (rp_ge[$t.p.id].reloadAfterSubmit ? ($($t).trigger("reloadGrid"),
                                rp_ge[$t.p.id].closeAfterEdit || setTimeout(function() {
                                    $($t).jqGrid("setSelection", postdata[idname])
                                }, 1e3)) : $t.p.treeGrid === !0 ? $($t).jqGrid("setTreeRow", postdata[idname], postdata) : $($t).jqGrid("setRowData", postdata[idname], postdata),
                                rp_ge[$t.p.id].closeAfterEdit && $.jgrid.hideModal("#" + $.jgrid.jqID(IDs.themodal), {
                                    gb: "#gbox_" + $.jgrid.jqID(gID),
                                    jqm: p.jqModal,
                                    onClose: rp_ge[$t.p.id].onClose,
                                    removemodal: rp_ge[$t.p.id].removemodal,
                                    formprop: !rp_ge[$t.p.id].recreateForm,
                                    form: rp_ge[$t.p.id].form
                                })),
                                $.isFunction(rp_ge[$t.p.id].afterComplete) && (copydata = data,
                                setTimeout(function() {
                                    $($t).triggerHandler("jqGridAddEditAfterComplete", [copydata, postdata, $(frmgr), frmoper]),
                                    rp_ge[$t.p.id].afterComplete.call($t, copydata, postdata, $(frmgr), frmoper),
                                    copydata = null
                                }, 500)),
                                (rp_ge[$t.p.id].checkOnSubmit || rp_ge[$t.p.id].checkOnUpdate) && ($(frmgr).data("disabled", !1),
                                "_empty" !== rp_ge[$t.p.id]._savedData[$t.p.id + "_id"]))
                                    for (key in rp_ge[$t.p.id]._savedData)
                                        rp_ge[$t.p.id]._savedData.hasOwnProperty(key) && postdata[key] && (rp_ge[$t.p.id]._savedData[key] = postdata[key]);
                                rp_ge[$t.p.id].processing = !1;
                                try {
                                    $(":input:visible", frmgr)[0].focus()
                                } catch (e) {}
                            }
                        }, $.jgrid.ajaxOptions, rp_ge[$t.p.id].ajaxEditOptions);
                        if (ajaxOptions.url || rp_ge[$t.p.id].useDataProxy || ($.isFunction($t.p.dataProxy) ? rp_ge[$t.p.id].useDataProxy = !0 : (ret[0] = !1,
                        ret[1] += " " + errors.nourl)),
                        ret[0])
                            if (rp_ge[$t.p.id].useDataProxy) {
                                var dpret = $t.p.dataProxy.call($t, ajaxOptions, "set_" + $t.p.id);
                                void 0 === dpret && (dpret = [!0, ""]),
                                dpret[0] === !1 ? (ret[0] = !1,
                                ret[1] = dpret[1] || "Error deleting the selected row!") : (ajaxOptions.data.oper === opers.addoper && rp_ge[$t.p.id].closeAfterAdd && $.jgrid.hideModal("#" + $.jgrid.jqID(IDs.themodal), {
                                    gb: "#gbox_" + $.jgrid.jqID(gID),
                                    jqm: p.jqModal,
                                    onClose: rp_ge[$t.p.id].onClose,
                                    removemodal: rp_ge[$t.p.id].removemodal,
                                    formprop: !rp_ge[$t.p.id].recreateForm,
                                    form: rp_ge[$t.p.id].form
                                }),
                                ajaxOptions.data.oper === opers.editoper && rp_ge[$t.p.id].closeAfterEdit && $.jgrid.hideModal("#" + $.jgrid.jqID(IDs.themodal), {
                                    gb: "#gbox_" + $.jgrid.jqID(gID),
                                    jqm: p.jqModal,
                                    onClose: rp_ge[$t.p.id].onClose,
                                    removemodal: rp_ge[$t.p.id].removemodal,
                                    formprop: !rp_ge[$t.p.id].recreateForm,
                                    form: rp_ge[$t.p.id].form
                                }))
                            } else
                                "clientArray" === ajaxOptions.url ? (rp_ge[$t.p.id].reloadAfterSubmit = !1,
                                postdata = ajaxOptions.data,
                                ajaxOptions.complete({
                                    status: 200,
                                    statusText: ""
                                }, "")) : $.ajax(ajaxOptions)
                    }
                    ret[0] === !1 && ($(".FormError", frmgr).html(ret[1]),
                    $(".FormError", frmgr).show())
                }
                function compareData(nObj, oObj) {
                    var key, ret = !1;
                    for (key in nObj)
                        if (nObj.hasOwnProperty(key) && nObj[key] != oObj[key]) {
                            ret = !0;
                            break
                        }
                    return ret
                }
                function checkUpdates() {
                    var stat = !0;
                    return $(".FormError", frmgr).hide(),
                    rp_ge[$t.p.id].checkOnUpdate && (postdata = {},
                    getFormData(),
                    diff = compareData(postdata, rp_ge[$t.p.id]._savedData),
                    diff && ($(frmgr).data("disabled", !0),
                    $(".confirm", "#" + IDs.themodal).show(),
                    stat = !1)),
                    stat
                }
                function restoreInline() {
                    var i;
                    if ("_empty" !== rowid && void 0 !== $t.p.savedRow && $t.p.savedRow.length > 0 && $.isFunction($.fn.jqGrid.restoreRow))
                        for (i = 0; i < $t.p.savedRow.length; i++)
                            if ($t.p.savedRow[i].id === rowid) {
                                $($t).jqGrid("restoreRow", rowid);
                                break
                            }
                }
                function updateNav(cr, posarr) {
                    var totr = posarr[1].length - 1;
                    0 === cr ? $("#pData", frmtb2).addClass("ui-state-disabled") : void 0 !== posarr[1][cr - 1] && $("#" + $.jgrid.jqID(posarr[1][cr - 1])).hasClass("ui-state-disabled") ? $("#pData", frmtb2).addClass("ui-state-disabled") : $("#pData", frmtb2).removeClass("ui-state-disabled"),
                    cr === totr ? $("#nData", frmtb2).addClass("ui-state-disabled") : void 0 !== posarr[1][cr + 1] && $("#" + $.jgrid.jqID(posarr[1][cr + 1])).hasClass("ui-state-disabled") ? $("#nData", frmtb2).addClass("ui-state-disabled") : $("#nData", frmtb2).removeClass("ui-state-disabled")
                }
                function getCurrPos() {
                    var rowsInGrid = $($t).jqGrid("getDataIDs")
                      , selrow = $("#id_g", frmtb).val()
                      , pos = $.inArray(selrow, rowsInGrid);
                    return [pos, rowsInGrid]
                }
                function parseTemplate(template) {
                    var tmpl = "";
                    return "string" == typeof template && (tmpl = template.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g, function(m, i) {
                        return '<span id="' + i + '" ></span>'
                    })),
                    tmpl
                }
                var $t = this;
                if ($t.grid && rowid) {
                    var frmtb2, postdata, diff, frmoper, gID = $t.p.id, frmgr = "FrmGrid_" + gID, frmtborg = "TblGrid_" + gID, frmtb = "#" + $.jgrid.jqID(frmtborg), IDs = {
                        themodal: "editmod" + gID,
                        modalhead: "edithd" + gID,
                        modalcontent: "editcnt" + gID,
                        scrollelm: frmgr
                    }, showFrm = !0, maxCols = 1, maxRows = 0, templ = "string" == typeof rp_ge[$t.p.id].template && rp_ge[$t.p.id].template.length > 0, errors = $.jgrid.getRegional(this, "errors");
                    "new" === rowid ? (rowid = "_empty",
                    frmoper = "add",
                    p.caption = rp_ge[$t.p.id].addCaption) : (p.caption = rp_ge[$t.p.id].editCaption,
                    frmoper = "edit"),
                    p.recreateForm || $($t).data("formProp") && $.extend(rp_ge[$(this)[0].p.id], $($t).data("formProp"));
                    var closeovrl = !0;
                    p.checkOnUpdate && p.jqModal && !p.modal && (closeovrl = !1);
                    var tbl, dh = isNaN(rp_ge[$(this)[0].p.id].dataheight) ? rp_ge[$(this)[0].p.id].dataheight : rp_ge[$(this)[0].p.id].dataheight + "px", dw = isNaN(rp_ge[$(this)[0].p.id].datawidth) ? rp_ge[$(this)[0].p.id].datawidth : rp_ge[$(this)[0].p.id].datawidth + "px", frm = $("<form name='FormPost' id='" + frmgr + "' class='FormGrid' onSubmit='return false;' style='width:" + dw + ";overflow:auto;position:relative;height:" + dh + ";'></form>").data("disabled", !1);
                    if (templ ? (tbl = parseTemplate(rp_ge[$(this)[0].p.id].template),
                    frmtb2 = frmtb) : (tbl = $("<table id='" + frmtborg + "' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),
                    frmtb2 = frmtb + "_2"),
                    frmgr = "#" + $.jgrid.jqID(frmgr),
                    $(frm).append("<div class='FormError ui-state-error' style='display:none;'></div>"),
                    $(frm).append("<div class='tinfo topinfo'>" + rp_ge[$t.p.id].topinfo + "</div>"),
                    $($t.p.colModel).each(function() {
                        var fmto = this.formoptions;
                        maxCols = Math.max(maxCols, fmto ? fmto.colpos || 0 : 0),
                        maxRows = Math.max(maxRows, fmto ? fmto.rowpos || 0 : 0)
                    }),
                    $(frm).append(tbl),
                    showFrm = $($t).triggerHandler("jqGridAddEditBeforeInitData", [frm, frmoper]),
                    void 0 === showFrm && (showFrm = !0),
                    showFrm && $.isFunction(rp_ge[$t.p.id].beforeInitData) && (showFrm = rp_ge[$t.p.id].beforeInitData.call($t, frm, frmoper)),
                    showFrm !== !1) {
                        restoreInline(),
                        createData(rowid, $t, tbl, maxCols);
                        var rtlb = "rtl" === $t.p.direction
                          , bp = rtlb ? "nData" : "pData"
                          , bn = rtlb ? "pData" : "nData"
                          , bP = "<a id='" + bp + "' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>"
                          , bN = "<a id='" + bn + "' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>"
                          , bS = "<a id='sData' class='fm-button ui-state-default ui-corner-all'>" + p.bSubmit + "</a>"
                          , bC = "<a id='cData' class='fm-button ui-state-default ui-corner-all'>" + p.bCancel + "</a>"
                          , bt = "<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='" + frmtborg + "_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>" + (rtlb ? bN + bP : bP + bN) + "</td><td class='EditButton'>" + bS + bC + "</td></tr>";
                        if (bt += "</tbody></table>",
                        maxRows > 0) {
                            var sd = [];
                            $.each($(tbl)[0].rows, function(i, r) {
                                sd[i] = r
                            }),
                            sd.sort(function(a, b) {
                                return a.rp > b.rp ? 1 : a.rp < b.rp ? -1 : 0
                            }),
                            $.each(sd, function(index, row) {
                                $("tbody", tbl).append(row)
                            })
                        }
                        p.gbox = "#gbox_" + $.jgrid.jqID(gID);
                        var cle = !1;
                        p.closeOnEscape === !0 && (p.closeOnEscape = !1,
                        cle = !0);
                        var tms;
                        if (templ ? ($(frm).find("#pData").replaceWith(bP),
                        $(frm).find("#nData").replaceWith(bN),
                        $(frm).find("#sData").replaceWith(bS),
                        $(frm).find("#cData").replaceWith(bC),
                        tms = $("<div id=" + frmtborg + "></div>").append(frm)) : tms = $("<div></div>").append(frm).append(bt),
                        $(frm).append("<div class='binfo topinfo bottominfo'>" + rp_ge[$t.p.id].bottominfo + "</div>"),
                        $.jgrid.createModal(IDs, tms, rp_ge[$(this)[0].p.id], "#gview_" + $.jgrid.jqID($t.p.id), $("#gbox_" + $.jgrid.jqID($t.p.id))[0]),
                        rtlb && ($("#pData, #nData", frmtb + "_2").css("float", "right"),
                        $(".EditButton", frmtb + "_2").css("text-align", "left")),
                        rp_ge[$t.p.id].topinfo && $(".tinfo", frmgr).show(),
                        rp_ge[$t.p.id].bottominfo && $(".binfo", frmgr).show(),
                        tms = null,
                        bt = null,
                        $("#" + $.jgrid.jqID(IDs.themodal)).keydown(function(e) {
                            var wkey = e.target;
                            if ($(frmgr).data("disabled") === !0)
                                return !1;
                            if (rp_ge[$t.p.id].savekey[0] === !0 && e.which === rp_ge[$t.p.id].savekey[1] && "TEXTAREA" !== wkey.tagName)
                                return $("#sData", frmtb + "_2").trigger("click"),
                                !1;
                            if (27 === e.which)
                                return checkUpdates() ? (cle && $.jgrid.hideModal("#" + $.jgrid.jqID(IDs.themodal), {
                                    gb: p.gbox,
                                    jqm: p.jqModal,
                                    onClose: rp_ge[$t.p.id].onClose,
                                    removemodal: rp_ge[$t.p.id].removemodal,
                                    formprop: !rp_ge[$t.p.id].recreateForm,
                                    form: rp_ge[$t.p.id].form
                                }),
                                !1) : !1;
                            if (rp_ge[$t.p.id].navkeys[0] === !0) {
                                if ("_empty" === $("#id_g", frmtb).val())
                                    return !0;
                                if (e.which === rp_ge[$t.p.id].navkeys[1])
                                    return $("#pData", frmtb2).trigger("click"),
                                    !1;
                                if (e.which === rp_ge[$t.p.id].navkeys[2])
                                    return $("#nData", frmtb2).trigger("click"),
                                    !1
                            }
                        }),
                        p.checkOnUpdate && ($("a.ui-jqdialog-titlebar-close span", "#" + $.jgrid.jqID(IDs.themodal)).removeClass("jqmClose"),
                        $("a.ui-jqdialog-titlebar-close", "#" + $.jgrid.jqID(IDs.themodal)).unbind("click").click(function() {
                            return checkUpdates() ? ($.jgrid.hideModal("#" + $.jgrid.jqID(IDs.themodal), {
                                gb: "#gbox_" + $.jgrid.jqID(gID),
                                jqm: p.jqModal,
                                onClose: rp_ge[$t.p.id].onClose,
                                removemodal: rp_ge[$t.p.id].removemodal,
                                formprop: !rp_ge[$t.p.id].recreateForm,
                                form: rp_ge[$t.p.id].form
                            }),
                            !1) : !1
                        })),
                        p.saveicon = $.extend([!0, "left", "ui-icon-disk"], p.saveicon),
                        p.closeicon = $.extend([!0, "left", "ui-icon-close"], p.closeicon),
                        p.saveicon[0] === !0 && $("#sData", frmtb2).addClass("right" === p.saveicon[1] ? "fm-button-icon-right" : "fm-button-icon-left").append("<span class='ui-icon " + p.saveicon[2] + "'></span>"),
                        p.closeicon[0] === !0 && $("#cData", frmtb2).addClass("right" === p.closeicon[1] ? "fm-button-icon-right" : "fm-button-icon-left").append("<span class='ui-icon " + p.closeicon[2] + "'></span>"),
                        rp_ge[$t.p.id].checkOnSubmit || rp_ge[$t.p.id].checkOnUpdate) {
                            bS = "<a id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>" + p.bYes + "</a>",
                            bN = "<a id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>" + p.bNo + "</a>",
                            bC = "<a id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>" + p.bExit + "</a>";
                            var zI = p.zIndex || 999;
                            zI++,
                            $("<div class='" + p.overlayClass + " jqgrid-overlay confirm' style='z-index:" + zI + ";display:none;'>&#160;</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:" + (zI + 1) + "'>" + p.saveData + "<br/><br/>" + bS + bN + bC + "</div>").insertAfter(frmgr),
                            $("#sNew", "#" + $.jgrid.jqID(IDs.themodal)).click(function() {
                                return postIt(),
                                $(frmgr).data("disabled", !1),
                                $(".confirm", "#" + $.jgrid.jqID(IDs.themodal)).hide(),
                                !1
                            }),
                            $("#nNew", "#" + $.jgrid.jqID(IDs.themodal)).click(function() {
                                return $(".confirm", "#" + $.jgrid.jqID(IDs.themodal)).hide(),
                                $(frmgr).data("disabled", !1),
                                setTimeout(function() {
                                    $(":input:visible", frmgr)[0].focus()
                                }, 0),
                                !1
                            }),
                            $("#cNew", "#" + $.jgrid.jqID(IDs.themodal)).click(function() {
                                return $(".confirm", "#" + $.jgrid.jqID(IDs.themodal)).hide(),
                                $(frmgr).data("disabled", !1),
                                $.jgrid.hideModal("#" + $.jgrid.jqID(IDs.themodal), {
                                    gb: "#gbox_" + $.jgrid.jqID(gID),
                                    jqm: p.jqModal,
                                    onClose: rp_ge[$t.p.id].onClose,
                                    removemodal: rp_ge[$t.p.id].removemodal,
                                    formprop: !rp_ge[$t.p.id].recreateForm,
                                    form: rp_ge[$t.p.id].form
                                }),
                                !1
                            })
                        }
                        $($t).triggerHandler("jqGridAddEditInitializeForm", [$(frmgr), frmoper]),
                        $.isFunction(rp_ge[$t.p.id].onInitializeForm) && rp_ge[$t.p.id].onInitializeForm.call($t, $(frmgr), frmoper),
                        "_empty" !== rowid && rp_ge[$t.p.id].viewPagerButtons ? $("#pData,#nData", frmtb2).show() : $("#pData,#nData", frmtb2).hide(),
                        $($t).triggerHandler("jqGridAddEditBeforeShowForm", [$(frmgr), frmoper]),
                        $.isFunction(rp_ge[$t.p.id].beforeShowForm) && rp_ge[$t.p.id].beforeShowForm.call($t, $(frmgr), frmoper),
                        $("#" + $.jgrid.jqID(IDs.themodal)).data("onClose", rp_ge[$t.p.id].onClose),
                        $.jgrid.viewModal("#" + $.jgrid.jqID(IDs.themodal), {
                            gbox: "#gbox_" + $.jgrid.jqID(gID),
                            jqm: p.jqModal,
                            overlay: p.overlay,
                            modal: p.modal,
                            overlayClass: p.overlayClass,
                            onHide: function(h) {
                                var fh = $("#editmod" + gID)[0].style.height;
                                fh.indexOf("px") > -1 && (fh = parseFloat(fh)),
                                $($t).data("formProp", {
                                    top: parseFloat($(h.w).css("top")),
                                    left: parseFloat($(h.w).css("left")),
                                    width: $(h.w).width(),
                                    height: fh,
                                    dataheight: $(frmgr).height(),
                                    datawidth: $(frmgr).width()
                                }),
                                h.w.remove(),
                                h.o && h.o.remove()
                            }
                        }),
                        closeovrl || $("." + $.jgrid.jqID(p.overlayClass)).click(function() {
                            return checkUpdates() ? ($.jgrid.hideModal("#" + $.jgrid.jqID(IDs.themodal), {
                                gb: "#gbox_" + $.jgrid.jqID(gID),
                                jqm: p.jqModal,
                                onClose: rp_ge[$t.p.id].onClose,
                                removemodal: rp_ge[$t.p.id].removemodal,
                                formprop: !rp_ge[$t.p.id].recreateForm,
                                form: rp_ge[$t.p.id].form
                            }),
                            !1) : !1
                        }),
                        $(".fm-button", "#" + $.jgrid.jqID(IDs.themodal)).hover(function() {
                            $(this).addClass("ui-state-hover")
                        }, function() {
                            $(this).removeClass("ui-state-hover")
                        }),
                        $("#sData", frmtb2).click(function() {
                            return postdata = {},
                            $(".FormError", frmgr).hide(),
                            getFormData(),
                            "_empty" === postdata[$t.p.id + "_id"] ? postIt() : p.checkOnSubmit === !0 ? (diff = compareData(postdata, rp_ge[$t.p.id]._savedData),
                            diff ? ($(frmgr).data("disabled", !0),
                            $(".confirm", "#" + $.jgrid.jqID(IDs.themodal)).show()) : postIt()) : postIt(),
                            !1
                        }),
                        $("#cData", frmtb2).click(function() {
                            return checkUpdates() ? ($.jgrid.hideModal("#" + $.jgrid.jqID(IDs.themodal), {
                                gb: "#gbox_" + $.jgrid.jqID(gID),
                                jqm: p.jqModal,
                                onClose: rp_ge[$t.p.id].onClose,
                                removemodal: rp_ge[$t.p.id].removemodal,
                                formprop: !rp_ge[$t.p.id].recreateForm,
                                form: rp_ge[$t.p.id].form
                            }),
                            !1) : !1
                        }),
                        $("#nData", frmtb2).click(function() {
                            if (!checkUpdates())
                                return !1;
                            $(".FormError", frmgr).hide();
                            var npos = getCurrPos();
                            if (npos[0] = parseInt(npos[0], 10),
                            -1 !== npos[0] && npos[1][npos[0] + 1]) {
                                $($t).triggerHandler("jqGridAddEditClickPgButtons", ["next", $(frmgr), npos[1][npos[0]]]);
                                var nposret;
                                if ($.isFunction(p.onclickPgButtons) && (nposret = p.onclickPgButtons.call($t, "next", $(frmgr), npos[1][npos[0]]),
                                void 0 !== nposret && nposret === !1))
                                    return !1;
                                if ($("#" + $.jgrid.jqID(npos[1][npos[0] + 1])).hasClass("ui-state-disabled"))
                                    return !1;
                                fillData(npos[1][npos[0] + 1], $t, frmgr),
                                $($t).jqGrid("setSelection", npos[1][npos[0] + 1]),
                                $($t).triggerHandler("jqGridAddEditAfterClickPgButtons", ["next", $(frmgr), npos[1][npos[0]]]),
                                $.isFunction(p.afterclickPgButtons) && p.afterclickPgButtons.call($t, "next", $(frmgr), npos[1][npos[0] + 1]),
                                updateNav(npos[0] + 1, npos)
                            }
                            return !1
                        }),
                        $("#pData", frmtb2).click(function() {
                            if (!checkUpdates())
                                return !1;
                            $(".FormError", frmgr).hide();
                            var ppos = getCurrPos();
                            if (-1 !== ppos[0] && ppos[1][ppos[0] - 1]) {
                                $($t).triggerHandler("jqGridAddEditClickPgButtons", ["prev", $(frmgr), ppos[1][ppos[0]]]);
                                var pposret;
                                if ($.isFunction(p.onclickPgButtons) && (pposret = p.onclickPgButtons.call($t, "prev", $(frmgr), ppos[1][ppos[0]]),
                                void 0 !== pposret && pposret === !1))
                                    return !1;
                                if ($("#" + $.jgrid.jqID(ppos[1][ppos[0] - 1])).hasClass("ui-state-disabled"))
                                    return !1;
                                fillData(ppos[1][ppos[0] - 1], $t, frmgr),
                                $($t).jqGrid("setSelection", ppos[1][ppos[0] - 1]),
                                $($t).triggerHandler("jqGridAddEditAfterClickPgButtons", ["prev", $(frmgr), ppos[1][ppos[0]]]),
                                $.isFunction(p.afterclickPgButtons) && p.afterclickPgButtons.call($t, "prev", $(frmgr), ppos[1][ppos[0] - 1]),
                                updateNav(ppos[0] - 1, ppos)
                            }
                            return !1
                        }),
                        $($t).triggerHandler("jqGridAddEditAfterShowForm", [$(frmgr), frmoper]),
                        $.isFunction(rp_ge[$t.p.id].afterShowForm) && rp_ge[$t.p.id].afterShowForm.call($t, $(frmgr), frmoper);
                        var posInit = getCurrPos();
                        updateNav(posInit[0], posInit)
                    }
                }
            })
        },
        viewGridRow: function(rowid, p) {
            var regional = $.jgrid.getRegional(this[0], "view");
            return p = $.extend(!0, {
                top: 0,
                left: 0,
                width: 0,
                datawidth: "auto",
                height: "auto",
                dataheight: "auto",
                modal: !1,
                overlay: 30,
                drag: !0,
                resize: !0,
                jqModal: !0,
                closeOnEscape: !1,
                labelswidth: "30%",
                closeicon: [],
                navkeys: [!1, 38, 40],
                onClose: null,
                beforeShowForm: null,
                beforeInitData: null,
                viewPagerButtons: !0,
                recreateForm: !1,
                removemodal: !0,
                form: "view"
            }, regional, p || {}),
            rp_ge[$(this)[0].p.id] = p,
            this.each(function() {
                function focusaref() {
                    rp_ge[$t.p.id].closeOnEscape !== !0 && rp_ge[$t.p.id].navkeys[0] !== !0 || setTimeout(function() {
                        $(".ui-jqdialog-titlebar-close", "#" + $.jgrid.jqID(IDs.modalhead)).attr("tabindex", "-1").focus()
                    }, 0)
                }
                function createData(rowid, obj, tb, maxcols) {
                    var nm, hc, trdata, tmp, dc, i, maxw, setme, viewfld, cnt = 0, retpos = [], ind = !1, tdtmpl = "<td class='CaptionTD form-view-label ui-widget-content' width='" + p.labelswidth + "'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>", tmpl = "", tdtmpl2 = "<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>", fmtnum = ["integer", "number", "currency"], max1 = 0, max2 = 0;
                    for (i = 1; maxcols >= i; i++)
                        tmpl += 1 === i ? tdtmpl : tdtmpl2;
                    if ($(obj.p.colModel).each(function() {
                        hc = this.editrules && this.editrules.edithidden === !0 ? !1 : this.hidden === !0,
                        hc || "right" !== this.align || (this.formatter && -1 !== $.inArray(this.formatter, fmtnum) ? max1 = Math.max(max1, parseInt(this.width, 10)) : max2 = Math.max(max2, parseInt(this.width, 10)))
                    }),
                    maxw = 0 !== max1 ? max1 : 0 !== max2 ? max2 : 0,
                    ind = $(obj).jqGrid("getInd", rowid),
                    $(obj.p.colModel).each(function(i) {
                        if (nm = this.name,
                        setme = !1,
                        hc = this.editrules && this.editrules.edithidden === !0 ? !1 : this.hidden === !0,
                        dc = hc ? "style='display:none'" : "",
                        viewfld = "boolean" != typeof this.viewable ? !0 : this.viewable,
                        "cb" !== nm && "subgrid" !== nm && "rn" !== nm && viewfld) {
                            tmp = ind === !1 ? "" : nm === obj.p.ExpandColumn && obj.p.treeGrid === !0 ? $("td:eq(" + i + ")", obj.rows[ind]).text() : $("td:eq(" + i + ")", obj.rows[ind]).html(),
                            setme = "right" === this.align && 0 !== maxw;
                            var frmopt = $.extend({}, {
                                rowabove: !1,
                                rowcontent: ""
                            }, this.formoptions || {})
                              , rp = parseInt(frmopt.rowpos, 10) || cnt + 1
                              , cp = parseInt(2 * (parseInt(frmopt.colpos, 10) || 1), 10);
                            if (frmopt.rowabove) {
                                var newdata = $("<tr><td class='contentinfo' colspan='" + 2 * maxcols + "'>" + frmopt.rowcontent + "</td></tr>");
                                $(tb).append(newdata),
                                newdata[0].rp = rp
                            }
                            trdata = $(tb).find("tr[rowpos=" + rp + "]"),
                            0 === trdata.length && (trdata = $("<tr " + dc + " rowpos='" + rp + "'></tr>").addClass("FormData").attr("id", "trv_" + nm),
                            $(trdata).append(tmpl),
                            $(tb).append(trdata),
                            trdata[0].rp = rp),
                            $("td:eq(" + (cp - 2) + ")", trdata[0]).html("<b>" + (void 0 === frmopt.label ? obj.p.colNames[i] : frmopt.label) + "</b>"),
                            $("td:eq(" + (cp - 1) + ")", trdata[0]).append("<span>" + tmp + "</span>").attr("id", "v_" + nm),
                            setme && $("td:eq(" + (cp - 1) + ") span", trdata[0]).css({
                                "text-align": "right",
                                width: maxw + "px"
                            }),
                            retpos[cnt] = i,
                            cnt++
                        }
                    }),
                    cnt > 0) {
                        var idrow = $("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='" + (2 * maxcols - 1) + "' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='" + rowid + "'/></td></tr>");
                        idrow[0].rp = cnt + 99,
                        $(tb).append(idrow)
                    }
                    return retpos
                }
                function fillData(rowid, obj) {
                    var nm, hc, tmp, trv, cnt = 0;
                    trv = $(obj).jqGrid("getInd", rowid, !0),
                    trv && ($("td", trv).each(function(i) {
                        nm = obj.p.colModel[i].name,
                        hc = obj.p.colModel[i].editrules && obj.p.colModel[i].editrules.edithidden === !0 ? !1 : obj.p.colModel[i].hidden === !0,
                        "cb" !== nm && "subgrid" !== nm && "rn" !== nm && (tmp = nm === obj.p.ExpandColumn && obj.p.treeGrid === !0 ? $(this).text() : $(this).html(),
                        nm = $.jgrid.jqID("v_" + nm),
                        $("#" + nm + " span", "#" + frmtb).html(tmp),
                        hc && $("#" + nm, "#" + frmtb).parents("tr:first").hide(),
                        cnt++)
                    }),
                    cnt > 0 && $("#id_g", "#" + frmtb).val(rowid))
                }
                function updateNav(cr, posarr) {
                    var totr = posarr[1].length - 1;
                    0 === cr ? $("#pData", "#" + frmtb + "_2").addClass("ui-state-disabled") : void 0 !== posarr[1][cr - 1] && $("#" + $.jgrid.jqID(posarr[1][cr - 1])).hasClass("ui-state-disabled") ? $("#pData", frmtb + "_2").addClass("ui-state-disabled") : $("#pData", "#" + frmtb + "_2").removeClass("ui-state-disabled"),
                    cr === totr ? $("#nData", "#" + frmtb + "_2").addClass("ui-state-disabled") : void 0 !== posarr[1][cr + 1] && $("#" + $.jgrid.jqID(posarr[1][cr + 1])).hasClass("ui-state-disabled") ? $("#nData", frmtb + "_2").addClass("ui-state-disabled") : $("#nData", "#" + frmtb + "_2").removeClass("ui-state-disabled")
                }
                function getCurrPos() {
                    var rowsInGrid = $($t).jqGrid("getDataIDs")
                      , selrow = $("#id_g", "#" + frmtb).val()
                      , pos = $.inArray(selrow, rowsInGrid);
                    return [pos, rowsInGrid]
                }
                var $t = this;
                if ($t.grid && rowid) {
                    var gID = $t.p.id
                      , frmgr = "ViewGrid_" + $.jgrid.jqID(gID)
                      , frmtb = "ViewTbl_" + $.jgrid.jqID(gID)
                      , frmgr_id = "ViewGrid_" + gID
                      , frmtb_id = "ViewTbl_" + gID
                      , IDs = {
                        themodal: "viewmod" + gID,
                        modalhead: "viewhd" + gID,
                        modalcontent: "viewcnt" + gID,
                        scrollelm: frmgr
                    }
                      , onBeforeInit = $.isFunction(rp_ge[$t.p.id].beforeInitData) ? rp_ge[$t.p.id].beforeInitData : !1
                      , showFrm = !0
                      , maxCols = 1
                      , maxRows = 0;
                    p.recreateForm || $($t).data("viewProp") && $.extend(rp_ge[$(this)[0].p.id], $($t).data("viewProp"));
                    var dh = isNaN(rp_ge[$(this)[0].p.id].dataheight) ? rp_ge[$(this)[0].p.id].dataheight : rp_ge[$(this)[0].p.id].dataheight + "px"
                      , dw = isNaN(rp_ge[$(this)[0].p.id].datawidth) ? rp_ge[$(this)[0].p.id].datawidth : rp_ge[$(this)[0].p.id].datawidth + "px"
                      , frm = $("<form name='FormPost' id='" + frmgr_id + "' class='FormGrid' style='width:" + dw + ";overflow:auto;position:relative;height:" + dh + ";'></form>")
                      , tbl = $("<table id='" + frmtb_id + "' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");
                    if ($($t.p.colModel).each(function() {
                        var fmto = this.formoptions;
                        maxCols = Math.max(maxCols, fmto ? fmto.colpos || 0 : 0),
                        maxRows = Math.max(maxRows, fmto ? fmto.rowpos || 0 : 0)
                    }),
                    $(frm).append(tbl),
                    onBeforeInit && (showFrm = onBeforeInit.call($t, frm),
                    void 0 === showFrm && (showFrm = !0)),
                    showFrm !== !1) {
                        createData(rowid, $t, tbl, maxCols);
                        var rtlb = "rtl" === $t.p.direction
                          , bp = rtlb ? "nData" : "pData"
                          , bn = rtlb ? "pData" : "nData"
                          , bP = "<a id='" + bp + "' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>"
                          , bN = "<a id='" + bn + "' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>"
                          , bC = "<a id='cData' class='fm-button ui-state-default ui-corner-all'>" + p.bClose + "</a>";
                        if (maxRows > 0) {
                            var sd = [];
                            $.each($(tbl)[0].rows, function(i, r) {
                                sd[i] = r
                            }),
                            sd.sort(function(a, b) {
                                return a.rp > b.rp ? 1 : a.rp < b.rp ? -1 : 0
                            }),
                            $.each(sd, function(index, row) {
                                $("tbody", tbl).append(row)
                            })
                        }
                        p.gbox = "#gbox_" + $.jgrid.jqID(gID);
                        var bt = $("<div></div>").append(frm).append("<table border='0' class='EditTable' id='" + frmtb + "_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='" + p.labelswidth + "'>" + (rtlb ? bN + bP : bP + bN) + "</td><td class='EditButton'>" + bC + "</td></tr></tbody></table>");
                        $.jgrid.createModal(IDs, bt, p, "#gview_" + $.jgrid.jqID($t.p.id), $("#gview_" + $.jgrid.jqID($t.p.id))[0]),
                        rtlb && ($("#pData, #nData", "#" + frmtb + "_2").css("float", "right"),
                        $(".EditButton", "#" + frmtb + "_2").css("text-align", "left")),
                        p.viewPagerButtons || $("#pData, #nData", "#" + frmtb + "_2").hide(),
                        bt = null,
                        $("#" + IDs.themodal).keydown(function(e) {
                            if (27 === e.which)
                                return rp_ge[$t.p.id].closeOnEscape && $.jgrid.hideModal("#" + $.jgrid.jqID(IDs.themodal), {
                                    gb: p.gbox,
                                    jqm: p.jqModal,
                                    onClose: p.onClose,
                                    removemodal: rp_ge[$t.p.id].removemodal,
                                    formprop: !rp_ge[$t.p.id].recreateForm,
                                    form: rp_ge[$t.p.id].form
                                }),
                                !1;
                            if (p.navkeys[0] === !0) {
                                if (e.which === p.navkeys[1])
                                    return $("#pData", "#" + frmtb + "_2").trigger("click"),
                                    !1;
                                if (e.which === p.navkeys[2])
                                    return $("#nData", "#" + frmtb + "_2").trigger("click"),
                                    !1
                            }
                        }),
                        p.closeicon = $.extend([!0, "left", "ui-icon-close"], p.closeicon),
                        p.closeicon[0] === !0 && $("#cData", "#" + frmtb + "_2").addClass("right" === p.closeicon[1] ? "fm-button-icon-right" : "fm-button-icon-left").append("<span class='ui-icon " + p.closeicon[2] + "'></span>"),
                        $.isFunction(p.beforeShowForm) && p.beforeShowForm.call($t, $("#" + frmgr)),
                        $.jgrid.viewModal("#" + $.jgrid.jqID(IDs.themodal), {
                            gbox: "#gbox_" + $.jgrid.jqID(gID),
                            jqm: p.jqModal,
                            overlay: p.overlay,
                            modal: p.modal,
                            onHide: function(h) {
                                $($t).data("viewProp", {
                                    top: parseFloat($(h.w).css("top")),
                                    left: parseFloat($(h.w).css("left")),
                                    width: $(h.w).width(),
                                    height: $(h.w).height(),
                                    dataheight: $("#" + frmgr).height(),
                                    datawidth: $("#" + frmgr).width()
                                }),
                                h.w.remove(),
                                h.o && h.o.remove()
                            }
                        }),
                        $(".fm-button:not(.ui-state-disabled)", "#" + frmtb + "_2").hover(function() {
                            $(this).addClass("ui-state-hover")
                        }, function() {
                            $(this).removeClass("ui-state-hover")
                        }),
                        focusaref(),
                        $("#cData", "#" + frmtb + "_2").click(function() {
                            return $.jgrid.hideModal("#" + $.jgrid.jqID(IDs.themodal), {
                                gb: "#gbox_" + $.jgrid.jqID(gID),
                                jqm: p.jqModal,
                                onClose: p.onClose,
                                removemodal: rp_ge[$t.p.id].removemodal,
                                formprop: !rp_ge[$t.p.id].recreateForm,
                                form: rp_ge[$t.p.id].form
                            }),
                            !1
                        }),
                        $("#nData", "#" + frmtb + "_2").click(function() {
                            $("#FormError", "#" + frmtb).hide();
                            var npos = getCurrPos();
                            return npos[0] = parseInt(npos[0], 10),
                            -1 !== npos[0] && npos[1][npos[0] + 1] && ($.isFunction(p.onclickPgButtons) && p.onclickPgButtons.call($t, "next", $("#" + frmgr), npos[1][npos[0]]),
                            fillData(npos[1][npos[0] + 1], $t),
                            $($t).jqGrid("setSelection", npos[1][npos[0] + 1]),
                            $.isFunction(p.afterclickPgButtons) && p.afterclickPgButtons.call($t, "next", $("#" + frmgr), npos[1][npos[0] + 1]),
                            updateNav(npos[0] + 1, npos)),
                            focusaref(),
                            !1
                        }),
                        $("#pData", "#" + frmtb + "_2").click(function() {
                            $("#FormError", "#" + frmtb).hide();
                            var ppos = getCurrPos();
                            return -1 !== ppos[0] && ppos[1][ppos[0] - 1] && ($.isFunction(p.onclickPgButtons) && p.onclickPgButtons.call($t, "prev", $("#" + frmgr), ppos[1][ppos[0]]),
                            fillData(ppos[1][ppos[0] - 1], $t),
                            $($t).jqGrid("setSelection", ppos[1][ppos[0] - 1]),
                            $.isFunction(p.afterclickPgButtons) && p.afterclickPgButtons.call($t, "prev", $("#" + frmgr), ppos[1][ppos[0] - 1]),
                            updateNav(ppos[0] - 1, ppos)),
                            focusaref(),
                            !1
                        });
                        var posInit = getCurrPos();
                        updateNav(posInit[0], posInit)
                    }
                }
            })
        },
        delGridRow: function(rowids, p) {
            var regional = $.jgrid.getRegional(this[0], "del");
            return p = $.extend(!0, {
                top: 0,
                left: 0,
                width: 240,
                height: "auto",
                dataheight: "auto",
                modal: !1,
                overlay: 30,
                drag: !0,
                resize: !0,
                url: "",
                mtype: "POST",
                reloadAfterSubmit: !0,
                beforeShowForm: null,
                beforeInitData: null,
                afterShowForm: null,
                beforeSubmit: null,
                onclickSubmit: null,
                afterSubmit: null,
                jqModal: !0,
                closeOnEscape: !1,
                delData: {},
                delicon: [],
                cancelicon: [],
                onClose: null,
                ajaxDelOptions: {},
                processing: !1,
                serializeDelData: null,
                useDataProxy: !1
            }, regional, p || {}),
            rp_ge[$(this)[0].p.id] = p,
            this.each(function() {
                var $t = this;
                if ($t.grid && rowids) {
                    var postd, idname, opers, oper, onBeforeShow = $.isFunction(rp_ge[$t.p.id].beforeShowForm), onAfterShow = $.isFunction(rp_ge[$t.p.id].afterShowForm), onBeforeInit = $.isFunction(rp_ge[$t.p.id].beforeInitData) ? rp_ge[$t.p.id].beforeInitData : !1, gID = $t.p.id, onCS = {}, showFrm = !0, dtbl = "DelTbl_" + $.jgrid.jqID(gID), dtbl_id = "DelTbl_" + gID, IDs = {
                        themodal: "delmod" + gID,
                        modalhead: "delhd" + gID,
                        modalcontent: "delcnt" + gID,
                        scrollelm: dtbl
                    };
                    if ($.isArray(rowids) && (rowids = rowids.join()),
                    void 0 !== $("#" + $.jgrid.jqID(IDs.themodal))[0]) {
                        if (onBeforeInit && (showFrm = onBeforeInit.call($t, $("#" + dtbl)),
                        void 0 === showFrm && (showFrm = !0)),
                        showFrm === !1)
                            return;
                        $("#DelData>td", "#" + dtbl).text(rowids),
                        $("#DelError", "#" + dtbl).hide(),
                        rp_ge[$t.p.id].processing === !0 && (rp_ge[$t.p.id].processing = !1,
                        $("#dData", "#" + dtbl).removeClass("ui-state-active")),
                        onBeforeShow && rp_ge[$t.p.id].beforeShowForm.call($t, $("#" + dtbl)),
                        $.jgrid.viewModal("#" + $.jgrid.jqID(IDs.themodal), {
                            gbox: "#gbox_" + $.jgrid.jqID(gID),
                            jqm: rp_ge[$t.p.id].jqModal,
                            jqM: !1,
                            overlay: rp_ge[$t.p.id].overlay,
                            modal: rp_ge[$t.p.id].modal
                        }),
                        onAfterShow && rp_ge[$t.p.id].afterShowForm.call($t, $("#" + dtbl))
                    } else {
                        var dh = isNaN(rp_ge[$t.p.id].dataheight) ? rp_ge[$t.p.id].dataheight : rp_ge[$t.p.id].dataheight + "px"
                          , dw = isNaN(p.datawidth) ? p.datawidth : p.datawidth + "px"
                          , tbl = "<div id='" + dtbl_id + "' class='formdata' style='width:" + dw + ";overflow:auto;position:relative;height:" + dh + ";'>";
                        tbl += "<table class='DelTable'><tbody>",
                        tbl += "<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>",
                        tbl += "<tr id='DelData' style='display:none'><td >" + rowids + "</td></tr>",
                        tbl += '<tr><td class="delmsg" style="white-space:pre;">' + rp_ge[$t.p.id].msg + "</td></tr><tr><td >&#160;</td></tr>",
                        tbl += "</tbody></table></div>";
                        var bS = "<a id='dData' class='fm-button ui-state-default ui-corner-all'>" + p.bSubmit + "</a>"
                          , bC = "<a id='eData' class='fm-button ui-state-default ui-corner-all'>" + p.bCancel + "</a>";
                        if (tbl += "<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='" + dtbl + "_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>" + bS + "&#160;" + bC + "</td></tr></tbody></table>",
                        p.gbox = "#gbox_" + $.jgrid.jqID(gID),
                        $.jgrid.createModal(IDs, tbl, p, "#gview_" + $.jgrid.jqID($t.p.id), $("#gview_" + $.jgrid.jqID($t.p.id))[0]),
                        onBeforeInit && (showFrm = onBeforeInit.call($t, $(tbl)),
                        void 0 === showFrm && (showFrm = !0)),
                        showFrm === !1)
                            return;
                        $(".fm-button", "#" + dtbl + "_2").hover(function() {
                            $(this).addClass("ui-state-hover")
                        }, function() {
                            $(this).removeClass("ui-state-hover")
                        }),
                        p.delicon = $.extend([!0, "left", "ui-icon-scissors"], rp_ge[$t.p.id].delicon),
                        p.cancelicon = $.extend([!0, "left", "ui-icon-cancel"], rp_ge[$t.p.id].cancelicon),
                        p.delicon[0] === !0 && $("#dData", "#" + dtbl + "_2").addClass("right" === p.delicon[1] ? "fm-button-icon-right" : "fm-button-icon-left").append("<span class='ui-icon " + p.delicon[2] + "'></span>"),
                        p.cancelicon[0] === !0 && $("#eData", "#" + dtbl + "_2").addClass("right" === p.cancelicon[1] ? "fm-button-icon-right" : "fm-button-icon-left").append("<span class='ui-icon " + p.cancelicon[2] + "'></span>"),
                        $("#dData", "#" + dtbl + "_2").click(function() {
                            var pk, ret = [!0, ""], postdata = $("#DelData>td", "#" + dtbl).text();
                            if (onCS = {},
                            $.isFunction(rp_ge[$t.p.id].onclickSubmit) && (onCS = rp_ge[$t.p.id].onclickSubmit.call($t, rp_ge[$t.p.id], postdata) || {}),
                            $.isFunction(rp_ge[$t.p.id].beforeSubmit) && (ret = rp_ge[$t.p.id].beforeSubmit.call($t, postdata)),
                            ret[0] && !rp_ge[$t.p.id].processing) {
                                if (rp_ge[$t.p.id].processing = !0,
                                opers = $t.p.prmNames,
                                postd = $.extend({}, rp_ge[$t.p.id].delData, onCS),
                                oper = opers.oper,
                                postd[oper] = opers.deloper,
                                idname = opers.id,
                                postdata = String(postdata).split(","),
                                !postdata.length)
                                    return !1;
                                for (pk in postdata)
                                    postdata.hasOwnProperty(pk) && (postdata[pk] = $.jgrid.stripPref($t.p.idPrefix, postdata[pk]));
                                postd[idname] = postdata.join(),
                                $(this).addClass("ui-state-active");
                                var ajaxOptions = $.extend({
                                    url: rp_ge[$t.p.id].url || $($t).jqGrid("getGridParam", "editurl"),
                                    type: rp_ge[$t.p.id].mtype,
                                    data: $.isFunction(rp_ge[$t.p.id].serializeDelData) ? rp_ge[$t.p.id].serializeDelData.call($t, postd) : postd,
                                    complete: function(data, status) {
                                        var i;
                                        if ($("#dData", "#" + dtbl + "_2").removeClass("ui-state-active"),
                                        data.status >= 300 && 304 !== data.status ? (ret[0] = !1,
                                        $.isFunction(rp_ge[$t.p.id].errorTextFormat) ? ret[1] = rp_ge[$t.p.id].errorTextFormat.call($t, data) : ret[1] = status + " Status: '" + data.statusText + "'. Error code: " + data.status) : $.isFunction(rp_ge[$t.p.id].afterSubmit) && (ret = rp_ge[$t.p.id].afterSubmit.call($t, data, postd)),
                                        ret[0] === !1)
                                            $("#DelError>td", "#" + dtbl).html(ret[1]),
                                            $("#DelError", "#" + dtbl).show();
                                        else {
                                            if (rp_ge[$t.p.id].reloadAfterSubmit && "local" !== $t.p.datatype)
                                                $($t).trigger("reloadGrid");
                                            else {
                                                if ($t.p.treeGrid === !0)
                                                    try {
                                                        $($t).jqGrid("delTreeNode", $t.p.idPrefix + postdata[0])
                                                    } catch (e) {}
                                                else
                                                    for (i = 0; i < postdata.length; i++)
                                                        $($t).jqGrid("delRowData", $t.p.idPrefix + postdata[i]);
                                                $t.p.selrow = null,
                                                $t.p.selarrrow = []
                                            }
                                            $.isFunction(rp_ge[$t.p.id].afterComplete) && setTimeout(function() {
                                                rp_ge[$t.p.id].afterComplete.call($t, data, postdata)
                                            }, 500)
                                        }
                                        rp_ge[$t.p.id].processing = !1,
                                        ret[0] && $.jgrid.hideModal("#" + $.jgrid.jqID(IDs.themodal), {
                                            gb: "#gbox_" + $.jgrid.jqID(gID),
                                            jqm: p.jqModal,
                                            onClose: rp_ge[$t.p.id].onClose
                                        })
                                    }
                                }, $.jgrid.ajaxOptions, rp_ge[$t.p.id].ajaxDelOptions);
                                if (ajaxOptions.url || rp_ge[$t.p.id].useDataProxy || ($.isFunction($t.p.dataProxy) ? rp_ge[$t.p.id].useDataProxy = !0 : (ret[0] = !1,
                                ret[1] += " " + $.jgrid.getRegional($t, "errors.nourl"))),
                                ret[0])
                                    if (rp_ge[$t.p.id].useDataProxy) {
                                        var dpret = $t.p.dataProxy.call($t, ajaxOptions, "del_" + $t.p.id);
                                        void 0 === dpret && (dpret = [!0, ""]),
                                        dpret[0] === !1 ? (ret[0] = !1,
                                        ret[1] = dpret[1] || "Error deleting the selected row!") : $.jgrid.hideModal("#" + $.jgrid.jqID(IDs.themodal), {
                                            gb: "#gbox_" + $.jgrid.jqID(gID),
                                            jqm: p.jqModal,
                                            onClose: rp_ge[$t.p.id].onClose
                                        })
                                    } else
                                        "clientArray" === ajaxOptions.url ? (postd = ajaxOptions.data,
                                        ajaxOptions.complete({
                                            status: 200,
                                            statusText: ""
                                        }, "")) : $.ajax(ajaxOptions)
                            }
                            return ret[0] === !1 && ($("#DelError>td", "#" + dtbl).html(ret[1]),
                            $("#DelError", "#" + dtbl).show()),
                            !1
                        }),
                        $("#eData", "#" + dtbl + "_2").click(function() {
                            return $.jgrid.hideModal("#" + $.jgrid.jqID(IDs.themodal), {
                                gb: "#gbox_" + $.jgrid.jqID(gID),
                                jqm: rp_ge[$t.p.id].jqModal,
                                onClose: rp_ge[$t.p.id].onClose
                            }),
                            !1
                        }),
                        onBeforeShow && rp_ge[$t.p.id].beforeShowForm.call($t, $("#" + dtbl)),
                        $.jgrid.viewModal("#" + $.jgrid.jqID(IDs.themodal), {
                            gbox: "#gbox_" + $.jgrid.jqID(gID),
                            jqm: rp_ge[$t.p.id].jqModal,
                            overlay: rp_ge[$t.p.id].overlay,
                            modal: rp_ge[$t.p.id].modal
                        }),
                        onAfterShow && rp_ge[$t.p.id].afterShowForm.call($t, $("#" + dtbl))
                    }
                    rp_ge[$t.p.id].closeOnEscape === !0 && setTimeout(function() {
                        $(".ui-jqdialog-titlebar-close", "#" + $.jgrid.jqID(IDs.modalhead)).attr("tabindex", "-1").focus()
                    }, 0)
                }
            })
        },
        navGrid: function(elem, p, pEdit, pAdd, pDel, pSearch, pView) {
            var regional = $.jgrid.getRegional(this[0], "nav");
            return p = $.extend({
                edit: !0,
                editicon: "ui-icon-pencil",
                add: !0,
                addicon: "ui-icon-plus",
                del: !0,
                delicon: "ui-icon-trash",
                search: !0,
                searchicon: "ui-icon-search",
                refresh: !0,
                refreshicon: "ui-icon-refresh",
                refreshstate: "firstpage",
                view: !1,
                viewicon: "ui-icon-document",
                position: "left",
                closeOnEscape: !0,
                beforeRefresh: null,
                afterRefresh: null,
                cloneToTop: !1,
                alertwidth: 200,
                alertheight: "auto",
                alerttop: null,
                alertleft: null,
                alertzIndex: null
            }, regional, p || {}),
            this.each(function() {
                if (!this.p.navGrid) {
                    var twd, tdw, o, alertIDs = {
                        themodal: "alertmod_" + this.p.id,
                        modalhead: "alerthd_" + this.p.id,
                        modalcontent: "alertcnt_" + this.p.id
                    }, $t = this;
                    if ($t.grid && "string" == typeof elem) {
                        $($t).data("navGrid") || $($t).data("navGrid", p),
                        o = $($t).data("navGrid"),
                        $t.p.force_regional && (o = $.extend(o, regional)),
                        void 0 === $("#" + alertIDs.themodal)[0] && (o.alerttop || o.alertleft || (void 0 !== window.innerWidth ? (o.alertleft = window.innerWidth,
                        o.alerttop = window.innerHeight) : void 0 !== document.documentElement && void 0 !== document.documentElement.clientWidth && 0 !== document.documentElement.clientWidth ? (o.alertleft = document.documentElement.clientWidth,
                        o.alerttop = document.documentElement.clientHeight) : (o.alertleft = 1024,
                        o.alerttop = 768),
                        o.alertleft = o.alertleft / 2 - parseInt(o.alertwidth, 10) / 2,
                        o.alerttop = o.alerttop / 2 - 25),
                        $.jgrid.createModal(alertIDs, "<div>" + o.alerttext + "</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>", {
                            gbox: "#gbox_" + $.jgrid.jqID($t.p.id),
                            jqModal: !0,
                            drag: !0,
                            resize: !0,
                            caption: o.alertcap,
                            top: o.alerttop,
                            left: o.alertleft,
                            width: o.alertwidth,
                            height: o.alertheight,
                            closeOnEscape: o.closeOnEscape,
                            zIndex: o.alertzIndex
                        }, "#gview_" + $.jgrid.jqID($t.p.id), $("#gbox_" + $.jgrid.jqID($t.p.id))[0], !0));
                        var i, clone = 1, onHoverIn = function() {
                            $(this).hasClass("ui-state-disabled") || $(this).addClass("ui-state-hover")
                        }, onHoverOut = function() {
                            $(this).removeClass("ui-state-hover")
                        };
                        for (o.cloneToTop && $t.p.toppager && (clone = 2),
                        i = 0; clone > i; i++) {
                            var tbd, pgid, elemids, navtbl = $("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"), sep = "<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>";
                            0 === i ? (pgid = elem,
                            elemids = $t.p.id,
                            pgid === $t.p.toppager && (elemids += "_top",
                            clone = 1)) : (pgid = $t.p.toppager,
                            elemids = $t.p.id + "_top"),
                            "rtl" === $t.p.direction && $(navtbl).attr("dir", "rtl").css("float", "right"),
                            pAdd = pAdd || {},
                            o.add && (tbd = $("<td class='ui-pg-button ui-corner-all'></td>"),
                            $(tbd).append("<div class='ui-pg-div'><span class='ui-icon " + o.addicon + "'></span>" + o.addtext + "</div>"),
                            $("tr", navtbl).append(tbd),
                            $(tbd, navtbl).attr({
                                title: o.addtitle || "",
                                id: pAdd.id || "add_" + elemids
                            }).click(function() {
                                return $(this).hasClass("ui-state-disabled") || ($.isFunction(o.addfunc) ? o.addfunc.call($t) : $($t).jqGrid("editGridRow", "new", pAdd)),
                                !1
                            }).hover(onHoverIn, onHoverOut),
                            tbd = null),
                            pEdit = pEdit || {},
                            o.edit && (tbd = $("<td class='ui-pg-button ui-corner-all'></td>"),
                            $(tbd).append("<div class='ui-pg-div'><span class='ui-icon " + o.editicon + "'></span>" + o.edittext + "</div>"),
                            $("tr", navtbl).append(tbd),
                            $(tbd, navtbl).attr({
                                title: o.edittitle || "",
                                id: pEdit.id || "edit_" + elemids
                            }).click(function() {
                                if (!$(this).hasClass("ui-state-disabled")) {
                                    var sr = $t.p.selrow;
                                    sr ? $.isFunction(o.editfunc) ? o.editfunc.call($t, sr) : $($t).jqGrid("editGridRow", sr, pEdit) : ($.jgrid.viewModal("#" + alertIDs.themodal, {
                                        gbox: "#gbox_" + $.jgrid.jqID($t.p.id),
                                        jqm: !0
                                    }),
                                    $("#jqg_alrt").focus())
                                }
                                return !1
                            }).hover(onHoverIn, onHoverOut),
                            tbd = null),
                            pView = pView || {},
                            o.view && (tbd = $("<td class='ui-pg-button ui-corner-all'></td>"),
                            $(tbd).append("<div class='ui-pg-div'><span class='ui-icon " + o.viewicon + "'></span>" + o.viewtext + "</div>"),
                            $("tr", navtbl).append(tbd),
                            $(tbd, navtbl).attr({
                                title: o.viewtitle || "",
                                id: pView.id || "view_" + elemids
                            }).click(function() {
                                if (!$(this).hasClass("ui-state-disabled")) {
                                    var sr = $t.p.selrow;
                                    sr ? $.isFunction(o.viewfunc) ? o.viewfunc.call($t, sr) : $($t).jqGrid("viewGridRow", sr, pView) : ($.jgrid.viewModal("#" + alertIDs.themodal, {
                                        gbox: "#gbox_" + $.jgrid.jqID($t.p.id),
                                        jqm: !0
                                    }),
                                    $("#jqg_alrt").focus())
                                }
                                return !1
                            }).hover(onHoverIn, onHoverOut),
                            tbd = null),
                            pDel = pDel || {},
                            o.del && (tbd = $("<td class='ui-pg-button ui-corner-all'></td>"),
                            $(tbd).append("<div class='ui-pg-div'><span class='ui-icon " + o.delicon + "'></span>" + o.deltext + "</div>"),
                            $("tr", navtbl).append(tbd),
                            $(tbd, navtbl).attr({
                                title: o.deltitle || "",
                                id: pDel.id || "del_" + elemids
                            }).click(function() {
                                if (!$(this).hasClass("ui-state-disabled")) {
                                    var dr;
                                    $t.p.multiselect ? (dr = $t.p.selarrrow,
                                    0 === dr.length && (dr = null)) : dr = $t.p.selrow,
                                    dr ? $.isFunction(o.delfunc) ? o.delfunc.call($t, dr) : $($t).jqGrid("delGridRow", dr, pDel) : ($.jgrid.viewModal("#" + alertIDs.themodal, {
                                        gbox: "#gbox_" + $.jgrid.jqID($t.p.id),
                                        jqm: !0
                                    }),
                                    $("#jqg_alrt").focus())
                                }
                                return !1
                            }).hover(onHoverIn, onHoverOut),
                            tbd = null),
                            (o.add || o.edit || o.del || o.view) && $("tr", navtbl).append(sep),
                            pSearch = pSearch || {},
                            o.search && (tbd = $("<td class='ui-pg-button ui-corner-all'></td>"),
                            $(tbd).append("<div class='ui-pg-div'><span class='ui-icon " + o.searchicon + "'></span>" + o.searchtext + "</div>"),
                            $("tr", navtbl).append(tbd),
                            $(tbd, navtbl).attr({
                                title: o.searchtitle || "",
                                id: pSearch.id || "search_" + elemids
                            }).click(function() {
                                return $(this).hasClass("ui-state-disabled") || ($.isFunction(o.searchfunc) ? o.searchfunc.call($t, pSearch) : $($t).jqGrid("searchGrid", pSearch)),
                                !1
                            }).hover(onHoverIn, onHoverOut),
                            pSearch.showOnLoad && pSearch.showOnLoad === !0 && $(tbd, navtbl).click(),
                            tbd = null),
                            o.refresh && (tbd = $("<td class='ui-pg-button ui-corner-all'></td>"),
                            $(tbd).append("<div class='ui-pg-div'><span class='ui-icon " + o.refreshicon + "'></span>" + o.refreshtext + "</div>"),
                            $("tr", navtbl).append(tbd),
                            $(tbd, navtbl).attr({
                                title: o.refreshtitle || "",
                                id: "refresh_" + elemids
                            }).click(function() {
                                if (!$(this).hasClass("ui-state-disabled")) {
                                    $.isFunction(o.beforeRefresh) && o.beforeRefresh.call($t),
                                    $t.p.search = !1,
                                    $t.p.resetsearch = !0;
                                    try {
                                        if ("currentfilter" !== o.refreshstate) {
                                            var gID = $t.p.id;
                                            $t.p.postData.filters = "";
                                            try {
                                                $("#fbox_" + $.jgrid.jqID(gID)).jqFilter("resetFilter")
                                            } catch (ef) {}
                                            $.isFunction($t.clearToolbar) && $t.clearToolbar.call($t, !1)
                                        }
                                    } catch (e) {}
                                    switch (o.refreshstate) {
                                    case "firstpage":
                                        $($t).trigger("reloadGrid", [{
                                            page: 1
                                        }]);
                                        break;
                                    case "current":
                                    case "currentfilter":
                                        $($t).trigger("reloadGrid", [{
                                            current: !0
                                        }])
                                    }
                                    $.isFunction(o.afterRefresh) && o.afterRefresh.call($t)
                                }
                                return !1
                            }).hover(onHoverIn, onHoverOut),
                            tbd = null),
                            tdw = $(".ui-jqgrid").css("font-size") || "11px",
                            $("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:" + tdw + ";visibility:hidden;' ></div>"),
                            twd = $(navtbl).clone().appendTo("#testpg2").width(),
                            $("#testpg2").remove(),
                            $(pgid + "_" + o.position, pgid).append(navtbl),
                            $t.p._nvtd && (twd > $t.p._nvtd[0] && ($(pgid + "_" + o.position, pgid).width(twd),
                            $t.p._nvtd[0] = twd),
                            $t.p._nvtd[1] = twd),
                            tdw = null,
                            twd = null,
                            navtbl = null,
                            $t.p.navGrid = !0
                        }
                        $t.p.storeNavOptions && ($t.p.navOptions = o,
                        $t.p.editOptions = pEdit,
                        $t.p.addOptions = pAdd,
                        $t.p.delOptions = pDel,
                        $t.p.searchOptions = pSearch,
                        $t.p.viewOptions = pView)
                    }
                }
            })
        },
        navButtonAdd: function(elem, p) {
            return p = $.extend({
                caption: "newButton",
                title: "",
                buttonicon: "ui-icon-newwin",
                onClickButton: null,
                position: "last",
                cursor: "pointer"
            }, p || {}),
            this.each(function() {
                if (this.grid) {
                    "string" == typeof elem && 0 !== elem.indexOf("#") && (elem = "#" + $.jgrid.jqID(elem));
                    var findnav = $(".navtable", elem)[0]
                      , $t = this;
                    if (findnav) {
                        if (p.id && void 0 !== $("#" + $.jgrid.jqID(p.id), findnav)[0])
                            return;
                        var tbd = $("<td></td>");
                        "NONE" === p.buttonicon.toString().toUpperCase() ? $(tbd).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>" + p.caption + "</div>") : $(tbd).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon " + p.buttonicon + "'></span>" + p.caption + "</div>"),
                        p.id && $(tbd).attr("id", p.id),
                        "first" === p.position ? 0 === findnav.rows[0].cells.length ? $("tr", findnav).append(tbd) : $("tr td:eq(0)", findnav).before(tbd) : $("tr", findnav).append(tbd),
                        $(tbd, findnav).attr("title", p.title || "").click(function(e) {
                            return $(this).hasClass("ui-state-disabled") || $.isFunction(p.onClickButton) && p.onClickButton.call($t, e),
                            !1
                        }).hover(function() {
                            $(this).hasClass("ui-state-disabled") || $(this).addClass("ui-state-hover")
                        }, function() {
                            $(this).removeClass("ui-state-hover")
                        })
                    }
                }
            })
        },
        navSeparatorAdd: function(elem, p) {
            return p = $.extend({
                sepclass: "ui-separator",
                sepcontent: "",
                position: "last"
            }, p || {}),
            this.each(function() {
                if (this.grid) {
                    "string" == typeof elem && 0 !== elem.indexOf("#") && (elem = "#" + $.jgrid.jqID(elem));
                    var findnav = $(".navtable", elem)[0];
                    if (findnav) {
                        var sep = "<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='" + p.sepclass + "'></span>" + p.sepcontent + "</td>";
                        "first" === p.position ? 0 === findnav.rows[0].cells.length ? $("tr", findnav).append(sep) : $("tr td:eq(0)", findnav).before(sep) : $("tr", findnav).append(sep)
                    }
                }
            })
        },
        GridToForm: function(rowid, formid) {
            return this.each(function() {
                var i, $t = this;
                if ($t.grid) {
                    var rowdata = $($t).jqGrid("getRowData", rowid);
                    if (rowdata)
                        for (i in rowdata)
                            rowdata.hasOwnProperty(i) && ($("[name=" + $.jgrid.jqID(i) + "]", formid).is("input:radio") || $("[name=" + $.jgrid.jqID(i) + "]", formid).is("input:checkbox") ? $("[name=" + $.jgrid.jqID(i) + "]", formid).each(function() {
                                $(this).val() == rowdata[i] ? $(this)[$t.p.useProp ? "prop" : "attr"]("checked", !0) : $(this)[$t.p.useProp ? "prop" : "attr"]("checked", !1)
                            }) : $("[name=" + $.jgrid.jqID(i) + "]", formid).val(rowdata[i]))
                }
            })
        },
        FormToGrid: function(rowid, formid, mode, position) {
            return this.each(function() {
                var $t = this;
                if ($t.grid) {
                    mode || (mode = "set"),
                    position || (position = "first");
                    var fields = $(formid).serializeArray()
                      , griddata = {};
                    $.each(fields, function(i, field) {
                        griddata[field.name] = field.value
                    }),
                    "add" === mode ? $($t).jqGrid("addRowData", rowid, griddata, position) : "set" === mode && $($t).jqGrid("setRowData", rowid, griddata)
                }
            })
        }
    }),
    $.jgrid.extend({
        groupingSetup: function() {
            return this.each(function() {
                var i, j, cml, $t = this, cm = $t.p.colModel, grp = $t.p.groupingView;
                if (null === grp || "object" != typeof grp && !$.isFunction(grp))
                    $t.p.grouping = !1;
                else if (grp.groupField.length) {
                    for (void 0 === grp.visibiltyOnNextGrouping && (grp.visibiltyOnNextGrouping = []),
                    grp.lastvalues = [],
                    grp._locgr || (grp.groups = []),
                    grp.counters = [],
                    i = 0; i < grp.groupField.length; i++)
                        grp.groupOrder[i] || (grp.groupOrder[i] = "asc"),
                        grp.groupText[i] || (grp.groupText[i] = "{0}"),
                        "boolean" != typeof grp.groupColumnShow[i] && (grp.groupColumnShow[i] = !0),
                        "boolean" != typeof grp.groupSummary[i] && (grp.groupSummary[i] = !1),
                        grp.groupSummaryPos[i] || (grp.groupSummaryPos[i] = "footer"),
                        grp.groupColumnShow[i] === !0 ? (grp.visibiltyOnNextGrouping[i] = !0,
                        $($t).jqGrid("showCol", grp.groupField[i])) : (grp.visibiltyOnNextGrouping[i] = $("#" + $.jgrid.jqID($t.p.id + "_" + grp.groupField[i])).is(":visible"),
                        $($t).jqGrid("hideCol", grp.groupField[i]));
                    for (grp.summary = [],
                    grp.hideFirstGroupCol && (grp.formatDisplayField[0] = function(v) {
                        return v
                    }
                    ),
                    j = 0,
                    cml = cm.length; cml > j; j++)
                        grp.hideFirstGroupCol && (cm[j].hidden || grp.groupField[0] !== cm[j].name || (cm[j].formatter = function() {
                            return ""
                        }
                        )),
                        cm[j].summaryType && (cm[j].summaryDivider ? grp.summary.push({
                            nm: cm[j].name,
                            st: cm[j].summaryType,
                            v: "",
                            sd: cm[j].summaryDivider,
                            vd: "",
                            sr: cm[j].summaryRound,
                            srt: cm[j].summaryRoundType || "round"
                        }) : grp.summary.push({
                            nm: cm[j].name,
                            st: cm[j].summaryType,
                            v: "",
                            sr: cm[j].summaryRound,
                            srt: cm[j].summaryRoundType || "round"
                        }))
                } else
                    $t.p.grouping = !1
            })
        },
        groupingPrepare: function(record, irow) {
            return this.each(function() {
                var i, fieldName, v, displayName, displayValue, grp = this.p.groupingView, $t = this, sumGroups = function() {
                    $.isFunction(this.st) ? this.v = this.st.call($t, this.v, this.nm, record) : (this.v = $($t).jqGrid("groupingCalculations.handler", this.st, this.v, this.nm, this.sr, this.srt, record),
                    "avg" === this.st.toLowerCase() && this.sd && (this.vd = $($t).jqGrid("groupingCalculations.handler", this.st, this.vd, this.sd, this.sr, this.srt, record)))
                }, grlen = grp.groupField.length, changed = 0;
                for (i = 0; grlen > i; i++)
                    fieldName = grp.groupField[i],
                    displayName = grp.displayField[i],
                    v = record[fieldName],
                    displayValue = null == displayName ? null : record[displayName],
                    null == displayValue && (displayValue = v),
                    void 0 !== v && (0 === irow ? (grp.groups.push({
                        idx: i,
                        dataIndex: fieldName,
                        value: v,
                        displayValue: displayValue,
                        startRow: irow,
                        cnt: 1,
                        summary: []
                    }),
                    grp.lastvalues[i] = v,
                    grp.counters[i] = {
                        cnt: 1,
                        pos: grp.groups.length - 1,
                        summary: $.extend(!0, [], grp.summary)
                    },
                    $.each(grp.counters[i].summary, sumGroups),
                    grp.groups[grp.counters[i].pos].summary = grp.counters[i].summary) : "object" == typeof v || ($.isArray(grp.isInTheSameGroup) && $.isFunction(grp.isInTheSameGroup[i]) ? grp.isInTheSameGroup[i].call($t, grp.lastvalues[i], v, i, grp) : grp.lastvalues[i] === v) ? 1 === changed ? (grp.groups.push({
                        idx: i,
                        dataIndex: fieldName,
                        value: v,
                        displayValue: displayValue,
                        startRow: irow,
                        cnt: 1,
                        summary: []
                    }),
                    grp.lastvalues[i] = v,
                    grp.counters[i] = {
                        cnt: 1,
                        pos: grp.groups.length - 1,
                        summary: $.extend(!0, [], grp.summary)
                    },
                    $.each(grp.counters[i].summary, sumGroups),
                    grp.groups[grp.counters[i].pos].summary = grp.counters[i].summary) : (grp.counters[i].cnt += 1,
                    grp.groups[grp.counters[i].pos].cnt = grp.counters[i].cnt,
                    $.each(grp.counters[i].summary, sumGroups),
                    grp.groups[grp.counters[i].pos].summary = grp.counters[i].summary) : (grp.groups.push({
                        idx: i,
                        dataIndex: fieldName,
                        value: v,
                        displayValue: displayValue,
                        startRow: irow,
                        cnt: 1,
                        summary: []
                    }),
                    grp.lastvalues[i] = v,
                    changed = 1,
                    grp.counters[i] = {
                        cnt: 1,
                        pos: grp.groups.length - 1,
                        summary: $.extend(!0, [], grp.summary)
                    },
                    $.each(grp.counters[i].summary, sumGroups),
                    grp.groups[grp.counters[i].pos].summary = grp.counters[i].summary))
            }),
            this
        },
        groupingToggle: function(hid) {
            return this.each(function() {
                var $t = this
                  , grp = $t.p.groupingView
                  , strpos = hid.split("_")
                  , num = parseInt(strpos[strpos.length - 2], 10);
                strpos.splice(strpos.length - 2, 2);
                var itemGroupingLevel, showData, uid = strpos.join("_"), minus = grp.minusicon, plus = grp.plusicon, tar = $("#" + $.jgrid.jqID(hid)), r = tar.length ? tar[0].nextSibling : null, tarspan = $("#" + $.jgrid.jqID(hid) + " span.tree-wrap-" + $t.p.direction), getGroupingLevelFromClass = function(className) {
                    var nums = $.map(className.split(" "), function(item) {
                        return item.substring(0, uid.length + 1) === uid + "_" ? parseInt(item.substring(uid.length + 1), 10) : void 0
                    });
                    return nums.length > 0 ? nums[0] : void 0
                }, collapsed = !1, skip = !1, frz = $t.p.frozenColumns ? $t.p.id + "_frozen" : !1, tar2 = frz ? $("#" + $.jgrid.jqID(hid), "#" + $.jgrid.jqID(frz)) : !1, r2 = tar2 && tar2.length ? tar2[0].nextSibling : null;
                if (tarspan.hasClass(minus)) {
                    if (grp.showSummaryOnHide) {
                        if (r)
                            for (; r && (itemGroupingLevel = getGroupingLevelFromClass(r.className),
                            !(void 0 !== itemGroupingLevel && num >= itemGroupingLevel)); )
                                $(r).hide(),
                                r = r.nextSibling,
                                frz && ($(r2).hide(),
                                r2 = r2.nextSibling)
                    } else if (r)
                        for (; r && (itemGroupingLevel = getGroupingLevelFromClass(r.className),
                        !(void 0 !== itemGroupingLevel && num >= itemGroupingLevel)); )
                            $(r).hide(),
                            r = r.nextSibling,
                            frz && ($(r2).hide(),
                            r2 = r2.nextSibling);
                    tarspan.removeClass(minus).addClass(plus),
                    collapsed = !0
                } else {
                    if (r)
                        for (showData = void 0; r; ) {
                            if (itemGroupingLevel = getGroupingLevelFromClass(r.className),
                            void 0 === showData && (showData = void 0 === itemGroupingLevel),
                            skip = $(r).hasClass("ui-subgrid") && $(r).hasClass("ui-sg-collapsed"),
                            void 0 !== itemGroupingLevel) {
                                if (num >= itemGroupingLevel)
                                    break;
                                itemGroupingLevel === num + 1 && (skip || ($(r).show().find(">td>span.tree-wrap-" + $t.p.direction).removeClass(minus).addClass(plus),
                                frz && $(r2).show().find(">td>span.tree-wrap-" + $t.p.direction).removeClass(minus).addClass(plus)))
                            } else
                                showData && (skip || ($(r).show(),
                                frz && $(r2).show()));
                            r = r.nextSibling,
                            frz && (r2 = r2.nextSibling)
                        }
                    tarspan.removeClass(plus).addClass(minus)
                }
                $($t).triggerHandler("jqGridGroupingClickGroup", [hid, collapsed]),
                $.isFunction($t.p.onClickGroup) && $t.p.onClickGroup.call($t, hid, collapsed)
            }),
            !1
        },
        groupingRender: function(grdata, colspans, page, rn) {
            return this.each(function() {
                function findGroupIdx(ind, offset, grp) {
                    var i, ret = !1;
                    if (0 === offset)
                        ret = grp[ind];
                    else {
                        var id = grp[ind].idx;
                        if (0 === id)
                            ret = grp[ind];
                        else
                            for (i = ind; i >= 0; i--)
                                if (grp[i].idx === id - offset) {
                                    ret = grp[i];
                                    break
                                }
                    }
                    return ret
                }
                function buildSummaryTd(i, ik, grp, foffset) {
                    var vv, k, fdata = findGroupIdx(i, ik, grp), cm = $t.p.colModel, grlen = fdata.cnt, str = "";
                    for (k = foffset; colspans > k; k++) {
                        var tmpdata = "<td " + $t.formatCol(k, 1, "") + ">&#160;</td>"
                          , tplfld = "{0}";
                        $.each(fdata.summary, function() {
                            if (this.nm === cm[k].name) {
                                cm[k].summaryTpl && (tplfld = cm[k].summaryTpl),
                                "string" == typeof this.st && "avg" === this.st.toLowerCase() && (this.sd && this.vd ? this.v = this.v / this.vd : this.v && grlen > 0 && (this.v = this.v / grlen));
                                try {
                                    this.groupCount = fdata.cnt,
                                    this.groupIndex = fdata.dataIndex,
                                    this.groupValue = fdata.value,
                                    vv = $t.formatter("", this.v, k, this)
                                } catch (ef) {
                                    vv = this.v
                                }
                                return tmpdata = "<td " + $t.formatCol(k, 1, "") + ">" + $.jgrid.template(tplfld, vv) + "</td>",
                                !1
                            }
                        }),
                        str += tmpdata
                    }
                    return str
                }
                var hid, clid, gv, $t = this, grp = $t.p.groupingView, str = "", icon = "", pmrtl = grp.groupCollapse ? grp.plusicon : grp.minusicon, cp = [], len = grp.groupField.length;
                pmrtl += " tree-wrap-" + $t.p.direction,
                $.each($t.p.colModel, function(i, n) {
                    var ii;
                    for (ii = 0; len > ii; ii++)
                        if (grp.groupField[ii] === n.name) {
                            cp[ii] = i;
                            break
                        }
                });
                var mul, toEnd = 0, sumreverse = $.makeArray(grp.groupSummary);
                sumreverse.reverse(),
                mul = $t.p.multiselect ? ' colspan="2"' : "",
                $.each(grp.groups, function(i, n) {
                    if (grp._locgr && !(n.startRow + n.cnt > (page - 1) * rn && n.startRow < page * rn))
                        return !0;
                    toEnd++,
                    clid = $t.p.id + "ghead_" + n.idx,
                    hid = clid + "_" + i,
                    icon = "<span style='cursor:pointer;' class='ui-icon " + pmrtl + "' onclick=\"jQuery('#" + $.jgrid.jqID($t.p.id) + "').jqGrid('groupingToggle','" + hid + "');return false;\"></span>";
                    try {
                        $.isArray(grp.formatDisplayField) && $.isFunction(grp.formatDisplayField[n.idx]) ? (n.displayValue = grp.formatDisplayField[n.idx].call($t, n.displayValue, n.value, $t.p.colModel[cp[n.idx]], n.idx, grp),
                        gv = n.displayValue) : gv = $t.formatter(hid, n.displayValue, cp[n.idx], n.value)
                    } catch (egv) {
                        gv = n.displayValue
                    }
                    var grpTextStr = "";
                    grpTextStr = $.isFunction(grp.groupText[n.idx]) ? grp.groupText[n.idx].call($t, gv, n.cnt, n.summary) : $.jgrid.template(grp.groupText[n.idx], gv, n.cnt, n.summary),
                    "string" != typeof grpTextStr && "number" != typeof grpTextStr && (grpTextStr = gv),
                    "header" === grp.groupSummaryPos[n.idx] ? (str += '<tr id="' + hid + '"' + (grp.groupCollapse && n.idx > 0 ? ' style="display:none;" ' : " ") + 'role="row" class= "ui-widget-content jqgroup ui-row-' + $t.p.direction + " " + clid + '"><td style="padding-left:' + 12 * n.idx + 'px;"' + mul + ">" + icon + grpTextStr + "</td>",
                    str += buildSummaryTd(i, 0, grp.groups, grp.groupColumnShow[n.idx] === !1 ? "" === mul ? 2 : 3 : "" === mul ? 1 : 2),
                    str += "</tr>") : str += '<tr id="' + hid + '"' + (grp.groupCollapse && n.idx > 0 ? ' style="display:none;" ' : " ") + 'role="row" class= "ui-widget-content jqgroup ui-row-' + $t.p.direction + " " + clid + '"><td style="padding-left:' + 12 * n.idx + 'px;" colspan="' + (grp.groupColumnShow[n.idx] === !1 ? colspans - 1 : colspans) + '">' + icon + grpTextStr + "</td></tr>";
                    var leaf = len - 1 === n.idx;
                    if (leaf) {
                        var kk, ik, gg = grp.groups[i + 1], offset = 0, sgr = n.startRow, end = void 0 !== gg ? gg.startRow : grp.groups[i].startRow + grp.groups[i].cnt;
                        for (grp._locgr && (offset = (page - 1) * rn,
                        offset > n.startRow && (sgr = offset)),
                        kk = sgr; end > kk && grdata[kk - offset]; kk++)
                            str += grdata[kk - offset].join("");
                        if ("header" !== grp.groupSummaryPos[n.idx]) {
                            var jj;
                            if (void 0 !== gg) {
                                for (jj = 0; jj < grp.groupField.length && gg.dataIndex !== grp.groupField[jj]; jj++)
                                    ;
                                toEnd = grp.groupField.length - jj
                            }
                            for (ik = 0; toEnd > ik; ik++)
                                if (sumreverse[ik]) {
                                    var hhdr = "";
                                    grp.groupCollapse && !grp.showSummaryOnHide && (hhdr = ' style="display:none;"'),
                                    str += "<tr" + hhdr + ' jqfootlevel="' + (n.idx - ik) + '" role="row" class="ui-widget-content jqfoot ui-row-' + $t.p.direction + '">',
                                    str += buildSummaryTd(i, ik, grp.groups, 0),
                                    str += "</tr>"
                                }
                            toEnd = jj
                        }
                    }
                }),
                $("#" + $.jgrid.jqID($t.p.id) + " tbody:first").append(str),
                str = null
            })
        },
        groupingGroupBy: function(name, options) {
            return this.each(function() {
                var $t = this;
                "string" == typeof name && (name = [name]);
                var grp = $t.p.groupingView;
                $t.p.grouping = !0,
                grp._locgr = !1,
                void 0 === grp.visibiltyOnNextGrouping && (grp.visibiltyOnNextGrouping = []);
                var i;
                for (i = 0; i < grp.groupField.length; i++)
                    !grp.groupColumnShow[i] && grp.visibiltyOnNextGrouping[i] && $($t).jqGrid("showCol", grp.groupField[i]);
                for (i = 0; i < name.length; i++)
                    grp.visibiltyOnNextGrouping[i] = $("#" + $.jgrid.jqID($t.p.id) + "_" + $.jgrid.jqID(name[i])).is(":visible");
                $t.p.groupingView = $.extend($t.p.groupingView, options || {}),
                grp.groupField = name,
                $($t).trigger("reloadGrid")
            })
        },
        groupingRemove: function(current) {
            return this.each(function() {
                var $t = this;
                if (void 0 === current && (current = !0),
                $t.p.grouping = !1,
                current === !0) {
                    var i, grp = $t.p.groupingView;
                    for (i = 0; i < grp.groupField.length; i++)
                        !grp.groupColumnShow[i] && grp.visibiltyOnNextGrouping[i] && $($t).jqGrid("showCol", grp.groupField);
                    $("tr.jqgroup, tr.jqfoot", "#" + $.jgrid.jqID($t.p.id) + " tbody:first").remove(),
                    $("tr.jqgrow:hidden", "#" + $.jgrid.jqID($t.p.id) + " tbody:first").show()
                } else
                    $($t).trigger("reloadGrid")
            })
        },
        groupingCalculations: {
            handler: function(fn, v, field, round, roundType, rc) {
                var funcs = {
                    sum: function() {
                        return parseFloat(v || 0) + parseFloat(rc[field] || 0)
                    },
                    min: function() {
                        return "" === v ? parseFloat(rc[field] || 0) : Math.min(parseFloat(v), parseFloat(rc[field] || 0))
                    },
                    max: function() {
                        return "" === v ? parseFloat(rc[field] || 0) : Math.max(parseFloat(v), parseFloat(rc[field] || 0))
                    },
                    count: function() {
                        return "" === v && (v = 0),
                        rc.hasOwnProperty(field) ? v + 1 : 0
                    },
                    avg: function() {
                        return funcs.sum()
                    }
                };
                if (!funcs[fn])
                    throw "jqGrid Grouping No such method: " + fn;
                var res = funcs[fn]();
                if (null != round)
                    if ("fixed" === roundType)
                        res = res.toFixed(round);
                    else {
                        var mul = Math.pow(10, round);
                        res = Math.round(res * mul) / mul
                    }
                return res
            }
        },
        setGroupHeaders: function(o) {
            return o = $.extend({
                useColSpanStyle: !1,
                groupHeaders: []
            }, o || {}),
            this.each(function() {
                this.p.groupHeader = o;
                var i, cmi, $tr, $colHeader, th, $th, thStyle, iCol, cghi, numberOfColumns, titleText, cVisibleColumns, $theadInTable, ts = this, skip = 0, colModel = ts.p.colModel, cml = colModel.length, ths = ts.grid.headers, $htable = $("table.ui-jqgrid-htable", ts.grid.hDiv), $trLabels = $htable.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"), $thead = $htable.children("thead"), $firstHeaderRow = $htable.find(".jqg-first-row-header");
                void 0 === $firstHeaderRow[0] ? $firstHeaderRow = $("<tr>", {
                    role: "row",
                    "aria-hidden": "true"
                }).addClass("jqg-first-row-header").css("height", "auto") : $firstHeaderRow.empty();
                var $firstRow, inColumnHeader = function(text, columnHeaders) {
                    var i, length = columnHeaders.length;
                    for (i = 0; length > i; i++)
                        if (columnHeaders[i].startColumnName === text)
                            return i;
                    return -1
                };
                for ($(ts).prepend($thead),
                $tr = $("<tr>", {
                    role: "row"
                }).addClass("ui-jqgrid-labels jqg-third-row-header"),
                i = 0; cml > i; i++)
                    if (th = ths[i].el,
                    $th = $(th),
                    cmi = colModel[i],
                    thStyle = {
                        height: "0px",
                        width: ths[i].width + "px",
                        display: cmi.hidden ? "none" : ""
                    },
                    $("<th>", {
                        role: "gridcell"
                    }).css(thStyle).addClass("ui-first-th-" + ts.p.direction).appendTo($firstHeaderRow),
                    th.style.width = "",
                    iCol = inColumnHeader(cmi.name, o.groupHeaders),
                    iCol >= 0) {
                        for (cghi = o.groupHeaders[iCol],
                        numberOfColumns = cghi.numberOfColumns,
                        titleText = cghi.titleText,
                        cVisibleColumns = 0,
                        iCol = 0; numberOfColumns > iCol && cml > i + iCol; iCol++)
                            colModel[i + iCol].hidden || cVisibleColumns++;
                        $colHeader = $("<th>").attr({
                            role: "columnheader"
                        }).addClass("ui-state-default ui-th-column-header ui-th-" + ts.p.direction).html(titleText),
                        cVisibleColumns > 0 && $colHeader.attr("colspan", String(cVisibleColumns)),
                        ts.p.headertitles && $colHeader.attr("title", $colHeader.text()),
                        0 === cVisibleColumns && $colHeader.hide(),
                        $th.before($colHeader),
                        $tr.append(th),
                        skip = numberOfColumns - 1
                    } else
                        0 === skip ? o.useColSpanStyle ? $th.attr("rowspan", "2") : ($("<th>", {
                            role: "columnheader"
                        }).addClass("ui-state-default ui-th-column-header ui-th-" + ts.p.direction).css({
                            display: cmi.hidden ? "none" : ""
                        }).insertBefore($th),
                        $tr.append(th)) : ($tr.append(th),
                        skip--);
                $theadInTable = $(ts).children("thead"),
                $theadInTable.prepend($firstHeaderRow),
                $tr.insertAfter($trLabels),
                $htable.append($theadInTable),
                o.useColSpanStyle && ($htable.find("span.ui-jqgrid-resize").each(function() {
                    var $parent = $(this).parent();
                    $parent.is(":visible") && (this.style.cssText = "height: " + $parent.height() + "px !important; cursor: col-resize;")
                }),
                $htable.find("div.ui-jqgrid-sortable").each(function() {
                    var $ts = $(this)
                      , $parent = $ts.parent();
                    $parent.is(":visible") && $parent.is(":has(span.ui-jqgrid-resize)") && $ts.css("top", ($parent.height() - $ts.outerHeight()) / 2 - 4 + "px")
                })),
                $firstRow = $theadInTable.find("tr.jqg-first-row-header"),
                $(ts).bind("jqGridResizeStop.setGroupHeaders", function(e, nw, idx) {
                    $firstRow.find("th").eq(idx).width(nw)
                })
            })
        },
        destroyGroupHeader: function(nullHeader) {
            return void 0 === nullHeader && (nullHeader = !0),
            this.each(function() {
                var $tr, i, l, headers, $th, $resizing, hc, $t = this, grid = $t.grid, thead = $("table.ui-jqgrid-htable thead", grid.hDiv), cm = $t.p.colModel;
                if (grid) {
                    for ($(this).unbind(".setGroupHeaders"),
                    $tr = $("<tr>", {
                        role: "row"
                    }).addClass("ui-jqgrid-labels"),
                    headers = grid.headers,
                    i = 0,
                    l = headers.length; l > i; i++) {
                        hc = cm[i].hidden ? "none" : "",
                        $th = $(headers[i].el).width(headers[i].width).css("display", hc);
                        try {
                            $th.removeAttr("rowSpan")
                        } catch (rs) {
                            $th.attr("rowSpan", 1)
                        }
                        $tr.append($th),
                        $resizing = $th.children("span.ui-jqgrid-resize"),
                        $resizing.length > 0 && ($resizing[0].style.height = ""),
                        $th.children("div")[0].style.top = ""
                    }
                    $(thead).children("tr.ui-jqgrid-labels").remove(),
                    $(thead).prepend($tr),
                    nullHeader === !0 && $($t).jqGrid("setGridParam", {
                        groupHeader: null
                    })
                }
            })
        }
    }),
    $.jgrid = $.jgrid || {},
    $.extend($.jgrid, {
        saveState: function(jqGridId, o) {
            if (o = $.extend({
                useStorage: !0,
                storageType: "localStorage",
                beforeSetItem: null,
                compression: !1,
                compressionModule: "LZString",
                compressionMethod: "compressToUTF16"
            }, o || {}),
            jqGridId) {
                var ret, tmp, gridstate = "", data = "", $t = $("#" + jqGridId)[0];
                if ($t.grid) {
                    if (tmp = $($t).data("inlineNav"),
                    tmp && $t.p.inlineNav && $($t).jqGrid("setGridParam", {
                        _iN: tmp
                    }),
                    tmp = $($t).data("filterToolbar"),
                    tmp && $t.p.filterToolbar && $($t).jqGrid("setGridParam", {
                        _fT: tmp
                    }),
                    gridstate = $($t).jqGrid("jqGridExport", {
                        exptype: "jsonstring",
                        ident: "",
                        root: ""
                    }),
                    $($t.grid.bDiv).find(".ui-jqgrid-btable tr:gt(0)").each(function(i, d) {
                        data += d.outerHTML
                    }),
                    $.isFunction(o.beforeSetItem) && (ret = o.beforeSetItem.call($t, gridstate),
                    null != ret && (gridstate = ret)),
                    o.compression && o.compressionModule)
                        try {
                            ret = window[o.compressionModule][o.compressionMethod](gridstate),
                            null != ret && (gridstate = ret,
                            data = window[o.compressionModule][o.compressionMethod](data))
                        } catch (e) {}
                    if (o.useStorage && $.jgrid.isLocalStorage())
                        try {
                            window[o.storageType].setItem("jqGrid" + $t.p.id, gridstate),
                            window[o.storageType].setItem("jqGrid" + $t.p.id + "_data", data)
                        } catch (e) {
                            22 === e.code && alert("Local storage limit is over!")
                        }
                    return gridstate
                }
            }
        },
        loadState: function(jqGridId, gridstring, o) {
            if (o = $.extend({
                useStorage: !0,
                storageType: "localStorage",
                clearAfterLoad: !1,
                beforeSetGrid: null,
                decompression: !1,
                decompressionModule: "LZString",
                decompressionMethod: "decompressFromUTF16"
            }, o || {}),
            jqGridId) {
                var ret, tmp, data, iN, fT, $t = $("#" + jqGridId)[0];
                if ($t.grid && $.jgrid.gridUnload(jqGridId),
                o.useStorage)
                    try {
                        gridstring = window[o.storageType].getItem("jqGrid" + $t.id),
                        data = window[o.storageType].getItem("jqGrid" + $t.id + "_data")
                    } catch (e) {}
                if (gridstring) {
                    if (o.decompression && o.decompressionModule)
                        try {
                            ret = window[o.decompressionModule][o.decompressionMethod](gridstring),
                            null != ret && (gridstring = ret,
                            data = window[o.decompressionModule][o.decompressionMethod](data))
                        } catch (e) {}
                    if (ret = jqGridUtils.parse(gridstring),
                    ret && "object" === $.type(ret)) {
                        $.isFunction(o.beforeSetGrid) && (tmp = o.beforeSetGrid(ret),
                        tmp && "object" === $.type(tmp) && (ret = tmp));
                        var retfunc = function(param) {
                            var p;
                            return p = param
                        }
                          , prm = {
                            reccount: ret.reccount,
                            records: ret.records,
                            lastpage: ret.lastpage,
                            shrinkToFit: retfunc(ret.shrinkToFit),
                            data: retfunc(ret.data),
                            datatype: retfunc(ret.datatype),
                            grouping: retfunc(ret.grouping)
                        };
                        ret.shrinkToFit = !1,
                        ret.data = [],
                        ret.datatype = "local",
                        ret.grouping = !1,
                        ret.navGrid = !1,
                        ret.inlineNav && (iN = retfunc(ret._iN),
                        ret._iN = null,
                        delete ret._iN),
                        ret.filterToolbar && (fT = retfunc(ret._fT),
                        ret._fT = null,
                        delete ret._fT);
                        var grid = $("#" + jqGridId).jqGrid(ret);
                        grid.append(data),
                        grid.jqGrid("setGridParam", prm),
                        ret.storeNavOptions && grid.jqGrid("navGrid", ret.pager, ret.navOptions, ret.editOptions, ret.addOptions, ret.delOptions, ret.searchOptions, ret.viewOptions),
                        ret.inlineNav && iN && (grid.jqGrid("setGridParam", {
                            inlineNav: !1
                        }),
                        grid.jqGrid("inlineNav", ret.pager, iN)),
                        ret.filterToolbar && fT && (grid.jqGrid("setGridParam", {
                            filterToolbar: !1
                        }),
                        grid.jqGrid("filterToolbar", fT)),
                        grid[0].updatepager(!0, !0),
                        o.clearAfterLoad && (window[o.storageType].removeItem("jqGrid" + $t.id),
                        window[o.storageType].removeItem("jqGrid" + $t.id + "_data"))
                    } else
                        alert("can not convert to object")
                }
            }
        },
        setRegional: function(jqGridId, options) {
            $.jgrid.saveState(jqGridId, {
                storageType: "sessionStorage"
            }),
            $.jgrid.loadState(jqGridId, null, {
                storageType: "sessionStorage",
                beforeSetGrid: function(params) {
                    return params.regional = options.regional,
                    params.force_regional = !0,
                    params
                }
            });
            var grid = $("#" + jqGridId)[0]
              , model = $(grid).jqGrid("getGridParam", "colModel")
              , i = -1
              , nav = $.jgrid.getRegional(grid, "nav");
            $.each(model, function(k) {
                return this.formatter && "actions" === this.formatter ? (i = k,
                !1) : void 0
            }),
            -1 !== i && nav && $("#" + jqGridId + " tbody tr").each(function() {
                var td = this.cells[i];
                $(td).find(".ui-inline-edit").attr("title", nav.edittitle),
                $(td).find(".ui-inline-del").attr("title", nav.deltitle),
                $(td).find(".ui-inline-save").attr("title", nav.savetitle),
                $(td).find(".ui-inline-cancel").attr("title", nav.canceltitle)
            });
            try {
                window.sessionStorage.removeItem("jqGrid" + grid.id),
                window.sessionStorage.removeItem("jqGrid" + grid.id + "_data")
            } catch (e) {}
        },
        jqGridImport: function(jqGridId, o) {
            o = $.extend({
                imptype: "xml",
                impstring: "",
                impurl: "",
                mtype: "GET",
                impData: {},
                xmlGrid: {
                    config: "root>grid",
                    data: "root>rows"
                },
                jsonGrid: {
                    config: "grid",
                    data: "data"
                },
                ajaxOptions: {}
            }, o || {});
            var $t = (0 === jqGridId.indexOf("#") ? "" : "#") + $.jgrid.jqID(jqGridId)
              , xmlConvert = function(xml, o) {
                var jstr, jstr1, key, cnfg = $(o.xmlGrid.config, xml)[0], xmldata = $(o.xmlGrid.data, xml)[0];
                if (jqGridUtils.xmlToJSON) {
                    jstr = jqGridUtils.xmlToJSON(cnfg);
                    for (key in jstr)
                        jstr.hasOwnProperty(key) && (jstr1 = jstr[key]);
                    if (xmldata) {
                        var svdatatype = jstr.grid.datatype;
                        jstr.grid.datatype = "xmlstring",
                        jstr.grid.datastr = xml,
                        $($t).jqGrid(jstr1).jqGrid("setGridParam", {
                            datatype: svdatatype
                        })
                    } else
                        setTimeout(function() {
                            $($t).jqGrid(jstr1)
                        }, 0)
                } else
                    alert("xml2json or parse are not present")
            }
              , jsonConvert = function(jsonstr, o) {
                if (jsonstr && "string" == typeof jsonstr) {
                    var json = jqGridUtils.parse(jsonstr)
                      , gprm = json[o.jsonGrid.config]
                      , jdata = json[o.jsonGrid.data];
                    if (jdata) {
                        var svdatatype = gprm.datatype;
                        gprm.datatype = "jsonstring",
                        gprm.datastr = jdata,
                        $($t).jqGrid(gprm).jqGrid("setGridParam", {
                            datatype: svdatatype
                        })
                    } else
                        $($t).jqGrid(gprm)
                }
            };
            switch (o.imptype) {
            case "xml":
                $.ajax($.extend({
                    url: o.impurl,
                    type: o.mtype,
                    data: o.impData,
                    dataType: "xml",
                    complete: function(xml, stat) {
                        "success" === stat && (xmlConvert(xml.responseXML, o),
                        $($t).triggerHandler("jqGridImportComplete", [xml, o]),
                        $.isFunction(o.importComplete) && o.importComplete(xml)),
                        xml = null
                    }
                }, o.ajaxOptions));
                break;
            case "xmlstring":
                if (o.impstring && "string" == typeof o.impstring) {
                    var xmld = $.parseXML(o.impstring);
                    xmld && (xmlConvert(xmld, o),
                    $($t).triggerHandler("jqGridImportComplete", [xmld, o]),
                    $.isFunction(o.importComplete) && o.importComplete(xmld))
                }
                break;
            case "json":
                $.ajax($.extend({
                    url: o.impurl,
                    type: o.mtype,
                    data: o.impData,
                    dataType: "json",
                    complete: function(json) {
                        try {
                            jsonConvert(json.responseText, o),
                            $($t).triggerHandler("jqGridImportComplete", [json, o]),
                            $.isFunction(o.importComplete) && o.importComplete(json)
                        } catch (ee) {}
                        json = null
                    }
                }, o.ajaxOptions));
                break;
            case "jsonstring":
                o.impstring && "string" == typeof o.impstring && (jsonConvert(o.impstring, o),
                $($t).triggerHandler("jqGridImportComplete", [o.impstring, o]),
                $.isFunction(o.importComplete) && o.importComplete(o.impstring))
            }
        }
    }),
    $.jgrid.extend({
        jqGridExport: function(o) {
            o = $.extend({
                exptype: "xmlstring",
                root: "grid",
                ident: "	",
                addOptions: {}
            }, o || {});
            var ret = null;
            return this.each(function() {
                if (this.grid) {
                    var key, gprm = $.extend(!0, {}, $(this).jqGrid("getGridParam"), o.addOptions);
                    if (gprm.rownumbers && (gprm.colNames.splice(0, 1),
                    gprm.colModel.splice(0, 1)),
                    gprm.multiselect && (gprm.colNames.splice(0, 1),
                    gprm.colModel.splice(0, 1)),
                    gprm.subGrid && (gprm.colNames.splice(0, 1),
                    gprm.colModel.splice(0, 1)),
                    gprm.knv = null,
                    gprm.treeGrid)
                        for (key in gprm.treeReader)
                            gprm.treeReader.hasOwnProperty(key) && (gprm.colNames.splice(gprm.colNames.length - 1),
                            gprm.colModel.splice(gprm.colModel.length - 1));
                    switch (o.exptype) {
                    case "xmlstring":
                        ret = "<" + o.root + ">" + jqGridUtils.jsonToXML(gprm, {
                            xmlDecl: ""
                        }) + "</" + o.root + ">";
                        break;
                    case "jsonstring":
                        ret = jqGridUtils.stringify(gprm),
                        o.root && (ret = "{" + o.root + ":" + ret + "}")
                    }
                }
            }),
            ret
        },
        excelExport: function(o) {
            return o = $.extend({
                exptype: "remote",
                url: null,
                oper: "oper",
                tag: "excel",
                exportOptions: {}
            }, o || {}),
            this.each(function() {
                if (this.grid) {
                    var url;
                    if ("remote" === o.exptype) {
                        var pdata = $.extend({}, this.p.postData);
                        pdata[o.oper] = o.tag;
                        var params = jQuery.param(pdata);
                        url = -1 !== o.url.indexOf("?") ? o.url + "&" + params : o.url + "?" + params,
                        window.location = url
                    }
                }
            })
        }
    }),
    $.jgrid.inlineEdit = $.jgrid.inlineEdit || {},
    $.jgrid.extend({
        editRow: function(rowid, keys, oneditfunc, successfunc, url, extraparam, aftersavefunc, errorfunc, afterrestorefunc) {
            var o = {}
              , args = $.makeArray(arguments).slice(1);
            return "object" === $.type(args[0]) ? o = args[0] : (void 0 !== keys && (o.keys = keys),
            $.isFunction(oneditfunc) && (o.oneditfunc = oneditfunc),
            $.isFunction(successfunc) && (o.successfunc = successfunc),
            void 0 !== url && (o.url = url),
            void 0 !== extraparam && (o.extraparam = extraparam),
            $.isFunction(aftersavefunc) && (o.aftersavefunc = aftersavefunc),
            $.isFunction(errorfunc) && (o.errorfunc = errorfunc),
            $.isFunction(afterrestorefunc) && (o.afterrestorefunc = afterrestorefunc)),
            o = $.extend(!0, {
                keys: !1,
                oneditfunc: null,
                successfunc: null,
                url: null,
                extraparam: {},
                aftersavefunc: null,
                errorfunc: null,
                afterrestorefunc: null,
                restoreAfterError: !0,
                mtype: "POST",
                focusField: !0
            }, $.jgrid.inlineEdit, o),
            this.each(function() {
                var nm, tmp, editable, ind, cm, bfer, $t = this, cnt = 0, focus = null, svr = {};
                $t.grid && (ind = $($t).jqGrid("getInd", rowid, !0),
                ind !== !1 && (bfer = $.isFunction(o.beforeEditRow) ? o.beforeEditRow.call($t, o, rowid) : void 0,
                void 0 === bfer && (bfer = !0),
                bfer && (editable = $(ind).attr("editable") || "0",
                "0" !== editable || $(ind).hasClass("not-editable-row") || (cm = $t.p.colModel,
                $('td[role="gridcell"]', ind).each(function(i) {
                    nm = cm[i].name;
                    var treeg = $t.p.treeGrid === !0 && nm === $t.p.ExpandColumn;
                    if (treeg)
                        tmp = $("span:first", this).html();
                    else
                        try {
                            tmp = $.unformat.call($t, this, {
                                rowId: rowid,
                                colModel: cm[i]
                            }, i)
                        } catch (_) {
                            tmp = cm[i].edittype && "textarea" === cm[i].edittype ? $(this).text() : $(this).html()
                        }
                    if ("cb" !== nm && "subgrid" !== nm && "rn" !== nm && ($t.p.autoencode && (tmp = $.jgrid.htmlDecode(tmp)),
                    svr[nm] = tmp,
                    cm[i].editable === !0)) {
                        null === focus && (focus = i),
                        treeg ? $("span:first", this).html("") : $(this).html("");
                        var opt = $.extend({}, cm[i].editoptions || {}, {
                            id: rowid + "_" + nm,
                            name: nm,
                            rowId: rowid,
                            oper: "edit"
                        });
                        cm[i].edittype || (cm[i].edittype = "text"),
                        ("&nbsp;" === tmp || "&#160;" === tmp || 1 === tmp.length && 160 === tmp.charCodeAt(0)) && (tmp = "");
                        var elc = $.jgrid.createEl.call($t, cm[i].edittype, opt, tmp, !0, $.extend({}, $.jgrid.ajaxOptions, $t.p.ajaxSelectOptions || {}));
                        $(elc).addClass("editable"),
                        treeg ? $("span:first", this).append(elc) : $(this).append(elc),
                        $.jgrid.bindEv.call($t, elc, opt),
                        "select" === cm[i].edittype && void 0 !== cm[i].editoptions && cm[i].editoptions.multiple === !0 && void 0 === cm[i].editoptions.dataUrl && $.jgrid.msie && $(elc).width($(elc).width()),
                        cnt++
                    }
                }),
                cnt > 0 && (svr.id = rowid,
                $t.p.savedRow.push(svr),
                $(ind).attr("editable", "1"),
                o.focusField && ("number" == typeof o.focusField && parseInt(o.focusField, 10) <= cm.length && (focus = o.focusField),
                setTimeout(function() {
                    var fe = $("td:eq(" + focus + ") :input:visible", ind).not(":disabled");
                    fe.length > 0 && fe.focus()
                }, 0)),
                o.keys === !0 && $(ind).bind("keydown", function(e) {
                    if (27 === e.keyCode) {
                        if ($($t).jqGrid("restoreRow", rowid, o.afterrestorefunc),
                        $t.p.inlineNav)
                            try {
                                $($t).jqGrid("showAddEditButtons")
                            } catch (eer1) {}
                        return !1
                    }
                    if (13 === e.keyCode) {
                        var ta = e.target;
                        if ("TEXTAREA" === ta.tagName)
                            return !0;
                        if ($($t).jqGrid("saveRow", rowid, o) && $t.p.inlineNav)
                            try {
                                $($t).jqGrid("showAddEditButtons")
                            } catch (eer2) {}
                        return !1
                    }
                }),
                $($t).triggerHandler("jqGridInlineEditRow", [rowid, o]),
                $.isFunction(o.oneditfunc) && o.oneditfunc.call($t, rowid))))))
            })
        },
        saveRow: function(rowid, successfunc, url, extraparam, aftersavefunc, errorfunc, afterrestorefunc) {
            var args = $.makeArray(arguments).slice(1)
              , o = {}
              , $t = this[0];
            "object" === $.type(args[0]) ? o = args[0] : ($.isFunction(successfunc) && (o.successfunc = successfunc),
            void 0 !== url && (o.url = url),
            void 0 !== extraparam && (o.extraparam = extraparam),
            $.isFunction(aftersavefunc) && (o.aftersavefunc = aftersavefunc),
            $.isFunction(errorfunc) && (o.errorfunc = errorfunc),
            $.isFunction(afterrestorefunc) && (o.afterrestorefunc = afterrestorefunc)),
            o = $.extend(!0, {
                successfunc: null,
                url: null,
                extraparam: {},
                aftersavefunc: null,
                errorfunc: null,
                afterrestorefunc: null,
                restoreAfterError: !0,
                mtype: "POST",
                saveui: "enable",
                savetext: $.jgrid.getRegional($t, "defaults.savetext")
            }, $.jgrid.inlineEdit, o);
            var nm, editable, fr, cv, ind, success = !1, tmp = {}, tmp2 = {}, tmp3 = {}, nullIfEmpty = !1;
            if (!$t.grid)
                return success;
            if (ind = $($t).jqGrid("getInd", rowid, !0),
            ind === !1)
                return success;
            var errors = $.jgrid.getRegional(this, "errors")
              , edit = $.jgrid.getRegional(this, "edit")
              , bfsr = $.isFunction(o.beforeSaveRow) ? o.beforeSaveRow.call($t, o, rowid) : void 0;
            if (void 0 === bfsr && (bfsr = !0),
            bfsr) {
                if (editable = $(ind).attr("editable"),
                o.url = o.url || $t.p.editurl,
                "1" === editable) {
                    var cm;
                    if ($('td[role="gridcell"]', ind).each(function(i) {
                        if (cm = $t.p.colModel[i],
                        nm = cm.name,
                        "cb" !== nm && "subgrid" !== nm && cm.editable === !0 && "rn" !== nm && !$(this).hasClass("not-editable-cell")) {
                            switch (cm.edittype) {
                            case "checkbox":
                                var cbv = ["Yes", "No"];
                                cm.editoptions && (cbv = cm.editoptions.value.split(":")),
                                tmp[nm] = $("input", this).is(":checked") ? cbv[0] : cbv[1];
                                break;
                            case "text":
                            case "password":
                            case "textarea":
                            case "button":
                                tmp[nm] = $("input, textarea", this).val();
                                break;
                            case "select":
                                if (cm.editoptions.multiple) {
                                    var sel = $("select", this)
                                      , selectedText = [];
                                    tmp[nm] = $(sel).val(),
                                    tmp[nm] ? tmp[nm] = tmp[nm].join(",") : tmp[nm] = "",
                                    $("select option:selected", this).each(function(i, selected) {
                                        selectedText[i] = $(selected).text()
                                    }),
                                    tmp2[nm] = selectedText.join(",")
                                } else
                                    tmp[nm] = $("select option:selected", this).val(),
                                    tmp2[nm] = $("select option:selected", this).text();
                                cm.formatter && "select" === cm.formatter && (tmp2 = {});
                                break;
                            case "custom":
                                try {
                                    if (!cm.editoptions || !$.isFunction(cm.editoptions.custom_value))
                                        throw "e1";
                                    if (tmp[nm] = cm.editoptions.custom_value.call($t, $(".customelement", this), "get"),
                                    void 0 === tmp[nm])
                                        throw "e2"
                                } catch (e) {
                                    "e1" === e && $.jgrid.info_dialog(errors.errcap, "function 'custom_value' " + edit.msg.nodefined, edit.bClose),
                                    "e2" === e ? $.jgrid.info_dialog(errors.errcap, "function 'custom_value' " + edit.msg.novalue, edit.bClose) : $.jgrid.info_dialog(errors.errcap, e.message, edit.bClose)
                                }
                            }
                            if (cv = $.jgrid.checkValues.call($t, tmp[nm], i),
                            cv[0] === !1)
                                return !1;
                            $t.p.autoencode && (tmp[nm] = $.jgrid.htmlEncode(tmp[nm])),
                            "clientArray" !== o.url && cm.editoptions && cm.editoptions.NullIfEmpty === !0 && "" === tmp[nm] && (tmp3[nm] = "null",
                            nullIfEmpty = !0)
                        }
                    }),
                    cv[0] === !1) {
                        try {
                            var tr = $($t).jqGrid("getGridRowById", rowid)
                              , positions = $.jgrid.findPos(tr);
                            $.jgrid.info_dialog(errors.errcap, cv[1], edit.bClose, {
                                left: positions[0],
                                top: positions[1] + $(tr).outerHeight()
                            })
                        } catch (e) {
                            alert(cv[1])
                        }
                        return success
                    }
                    var idname, opers = $t.p.prmNames, oldRowId = rowid;
                    if (idname = $t.p.keyName === !1 ? opers.id : $t.p.keyName,
                    tmp) {
                        if (tmp[opers.oper] = opers.editoper,
                        void 0 === tmp[idname] || "" === tmp[idname])
                            tmp[idname] = rowid;
                        else if (ind.id !== $t.p.idPrefix + tmp[idname]) {
                            var oldid = $.jgrid.stripPref($t.p.idPrefix, rowid);
                            if (void 0 !== $t.p._index[oldid] && ($t.p._index[tmp[idname]] = $t.p._index[oldid],
                            delete $t.p._index[oldid]),
                            rowid = $t.p.idPrefix + tmp[idname],
                            $(ind).attr("id", rowid),
                            $t.p.selrow === oldRowId && ($t.p.selrow = rowid),
                            $.isArray($t.p.selarrrow)) {
                                var i = $.inArray(oldRowId, $t.p.selarrrow);
                                i >= 0 && ($t.p.selarrrow[i] = rowid)
                            }
                            if ($t.p.multiselect) {
                                var newCboxId = "jqg_" + $t.p.id + "_" + rowid;
                                $("input.cbox", ind).attr("id", newCboxId).attr("name", newCboxId)
                            }
                        }
                        void 0 === $t.p.inlineData && ($t.p.inlineData = {}),
                        tmp = $.extend({}, tmp, $t.p.inlineData, o.extraparam)
                    }
                    if ("clientArray" === o.url) {
                        tmp = $.extend({}, tmp, tmp2),
                        $t.p.autoencode && $.each(tmp, function(n, v) {
                            tmp[n] = $.jgrid.htmlDecode(v)
                        });
                        var k, resp = $($t).jqGrid("setRowData", rowid, tmp);
                        for ($(ind).attr("editable", "0"),
                        k = 0; k < $t.p.savedRow.length; k++)
                            if (String($t.p.savedRow[k].id) === String(oldRowId)) {
                                fr = k;
                                break
                            }
                        fr >= 0 && $t.p.savedRow.splice(fr, 1),
                        $($t).triggerHandler("jqGridInlineAfterSaveRow", [rowid, resp, tmp, o]),
                        $.isFunction(o.aftersavefunc) && o.aftersavefunc.call($t, rowid, resp, tmp, o),
                        success = !0,
                        $(ind).removeClass("jqgrid-new-row").unbind("keydown")
                    } else
                        $($t).jqGrid("progressBar", {
                            method: "show",
                            loadtype: o.saveui,
                            htmlcontent: o.savetext
                        }),
                        tmp3 = $.extend({}, tmp, tmp3),
                        tmp3[idname] = $.jgrid.stripPref($t.p.idPrefix, tmp3[idname]),
                        $.ajax($.extend({
                            url: o.url,
                            data: $.isFunction($t.p.serializeRowData) ? $t.p.serializeRowData.call($t, tmp3) : tmp3,
                            type: o.mtype,
                            async: !1,
                            complete: function(res, stat) {
                                if ($($t).jqGrid("progressBar", {
                                    method: "hide",
                                    loadtype: o.saveui,
                                    htmlcontent: o.savetext
                                }),
                                "success" === stat) {
                                    var sucret, k, ret = !0;
                                    if (sucret = $($t).triggerHandler("jqGridInlineSuccessSaveRow", [res, rowid, o]),
                                    $.isArray(sucret) || (sucret = [!0, tmp3]),
                                    sucret[0] && $.isFunction(o.successfunc) && (sucret = o.successfunc.call($t, res)),
                                    $.isArray(sucret) ? (ret = sucret[0],
                                    tmp = sucret[1] || tmp) : ret = sucret,
                                    ret === !0) {
                                        for ($t.p.autoencode && $.each(tmp, function(n, v) {
                                            tmp[n] = $.jgrid.htmlDecode(v)
                                        }),
                                        nullIfEmpty && $.each(tmp, function(n) {
                                            "null" === tmp[n] && (tmp[n] = "")
                                        }),
                                        tmp = $.extend({}, tmp, tmp2),
                                        $($t).jqGrid("setRowData", rowid, tmp),
                                        $(ind).attr("editable", "0"),
                                        k = 0; k < $t.p.savedRow.length; k++)
                                            if (String($t.p.savedRow[k].id) === String(rowid)) {
                                                fr = k;
                                                break
                                            }
                                        fr >= 0 && $t.p.savedRow.splice(fr, 1),
                                        $($t).triggerHandler("jqGridInlineAfterSaveRow", [rowid, res, tmp, o]),
                                        $.isFunction(o.aftersavefunc) && o.aftersavefunc.call($t, rowid, res, tmp, o),
                                        success = !0,
                                        $(ind).removeClass("jqgrid-new-row").unbind("keydown")
                                    } else
                                        $($t).triggerHandler("jqGridInlineErrorSaveRow", [rowid, res, stat, null, o]),
                                        $.isFunction(o.errorfunc) && o.errorfunc.call($t, rowid, res, stat, null),
                                        o.restoreAfterError === !0 && $($t).jqGrid("restoreRow", rowid, o.afterrestorefunc)
                                }
                            },
                            error: function(res, stat, err) {
                                if ($("#lui_" + $.jgrid.jqID($t.p.id)).hide(),
                                $($t).triggerHandler("jqGridInlineErrorSaveRow", [rowid, res, stat, err, o]),
                                $.isFunction(o.errorfunc))
                                    o.errorfunc.call($t, rowid, res, stat, err);
                                else {
                                    var rT = res.responseText || res.statusText;
                                    try {
                                        $.jgrid.info_dialog(errors.errcap, '<div class="ui-state-error">' + rT + "</div>", edit.bClose, {
                                            buttonalign: "right"
                                        })
                                    } catch (e) {
                                        alert(rT)
                                    }
                                }
                                o.restoreAfterError === !0 && $($t).jqGrid("restoreRow", rowid, o.afterrestorefunc)
                            }
                        }, $.jgrid.ajaxOptions, $t.p.ajaxRowOptions || {}))
                }
                return success
            }
        },
        restoreRow: function(rowid, afterrestorefunc) {
            var args = $.makeArray(arguments).slice(1)
              , o = {};
            return "object" === $.type(args[0]) ? o = args[0] : $.isFunction(afterrestorefunc) && (o.afterrestorefunc = afterrestorefunc),
            o = $.extend(!0, {}, $.jgrid.inlineEdit, o),
            this.each(function() {
                var ind, k, $t = this, fr = -1, ares = {};
                if ($t.grid && (ind = $($t).jqGrid("getInd", rowid, !0),
                ind !== !1)) {
                    var bfcr = $.isFunction(o.beforeCancelRow) ? o.beforeCancelRow.call($t, o, rowid) : void 0;
                    if (void 0 === bfcr && (bfcr = !0),
                    bfcr) {
                        for (k = 0; k < $t.p.savedRow.length; k++)
                            if (String($t.p.savedRow[k].id) === String(rowid)) {
                                fr = k;
                                break
                            }
                        if (fr >= 0) {
                            if ($.isFunction($.fn.datepicker))
                                try {
                                    $("input.hasDatepicker", "#" + $.jgrid.jqID(ind.id)).datepicker("hide")
                                } catch (e) {}
                            $.each($t.p.colModel, function() {
                                this.editable === !0 && $t.p.savedRow[fr].hasOwnProperty(this.name) && (ares[this.name] = $t.p.savedRow[fr][this.name])
                            }),
                            $($t).jqGrid("setRowData", rowid, ares),
                            $(ind).attr("editable", "0").unbind("keydown"),
                            $t.p.savedRow.splice(fr, 1),
                            $("#" + $.jgrid.jqID(rowid), "#" + $.jgrid.jqID($t.p.id)).hasClass("jqgrid-new-row") && setTimeout(function() {
                                $($t).jqGrid("delRowData", rowid),
                                $($t).jqGrid("showAddEditButtons")
                            }, 0)
                        }
                        $($t).triggerHandler("jqGridInlineAfterRestoreRow", [rowid]),
                        $.isFunction(o.afterrestorefunc) && o.afterrestorefunc.call($t, rowid)
                    }
                }
            })
        },
        addRow: function(p) {
            return p = $.extend(!0, {
                rowID: null,
                initdata: {},
                position: "first",
                useDefValues: !0,
                useFormatter: !1,
                addRowParams: {
                    extraparam: {}
                }
            }, p || {}),
            this.each(function() {
                if (this.grid) {
                    var $t = this
                      , bfar = $.isFunction(p.beforeAddRow) ? p.beforeAddRow.call($t, p.addRowParams) : void 0;
                    if (void 0 === bfar && (bfar = !0),
                    bfar)
                        if (p.rowID = $.isFunction(p.rowID) ? p.rowID.call($t, p) : null != p.rowID ? p.rowID : $.jgrid.randId(),
                        p.useDefValues === !0 && $($t.p.colModel).each(function() {
                            if (this.editoptions && this.editoptions.defaultValue) {
                                var opt = this.editoptions.defaultValue
                                  , tmp = $.isFunction(opt) ? opt.call($t) : opt;
                                p.initdata[this.name] = tmp
                            }
                        }),
                        $($t).jqGrid("addRowData", p.rowID, p.initdata, p.position),
                        p.rowID = $t.p.idPrefix + p.rowID,
                        $("#" + $.jgrid.jqID(p.rowID), "#" + $.jgrid.jqID($t.p.id)).addClass("jqgrid-new-row"),
                        p.useFormatter)
                            $("#" + $.jgrid.jqID(p.rowID) + " .ui-inline-edit", "#" + $.jgrid.jqID($t.p.id)).click();
                        else {
                            var opers = $t.p.prmNames
                              , oper = opers.oper;
                            p.addRowParams.extraparam[oper] = opers.addoper,
                            $($t).jqGrid("editRow", p.rowID, p.addRowParams),
                            $($t).jqGrid("setSelection", p.rowID)
                        }
                }
            })
        },
        inlineNav: function(elem, o) {
            var regional = $.jgrid.getRegional(this[0], "nav");
            return o = $.extend(!0, {
                edit: !0,
                editicon: "ui-icon-pencil",
                add: !0,
                addicon: "ui-icon-plus",
                save: !0,
                saveicon: "ui-icon-disk",
                cancel: !0,
                cancelicon: "ui-icon-cancel",
                addParams: {
                    addRowParams: {
                        extraparam: {}
                    }
                },
                editParams: {},
                restoreAfterSelect: !0
            }, regional, o || {}),
            this.each(function() {
                if (this.grid && !this.p.inlineNav) {
                    var $t = this
                      , gID = $.jgrid.jqID($t.p.id);
                    if ($t.p.navGrid || $($t).jqGrid("navGrid", elem, {
                        refresh: !1,
                        edit: !1,
                        add: !1,
                        del: !1,
                        search: !1,
                        view: !1
                    }),
                    $($t).data("inlineNav") || $($t).data("inlineNav", o),
                    $t.p.force_regional && (o = $.extend(o, regional)),
                    $t.p.inlineNav = !0,
                    o.addParams.useFormatter === !0) {
                        var i, cm = $t.p.colModel;
                        for (i = 0; i < cm.length; i++)
                            if (cm[i].formatter && "actions" === cm[i].formatter) {
                                if (cm[i].formatoptions) {
                                    var defaults = {
                                        keys: !1,
                                        onEdit: null,
                                        onSuccess: null,
                                        afterSave: null,
                                        onError: null,
                                        afterRestore: null,
                                        extraparam: {},
                                        url: null
                                    }
                                      , ap = $.extend(defaults, cm[i].formatoptions);
                                    o.addParams.addRowParams = {
                                        keys: ap.keys,
                                        oneditfunc: ap.onEdit,
                                        successfunc: ap.onSuccess,
                                        url: ap.url,
                                        extraparam: ap.extraparam,
                                        aftersavefunc: ap.afterSave,
                                        errorfunc: ap.onError,
                                        afterrestorefunc: ap.afterRestore
                                    }
                                }
                                break
                            }
                    }
                    o.add && $($t).jqGrid("navButtonAdd", elem, {
                        caption: o.addtext,
                        title: o.addtitle,
                        buttonicon: o.addicon,
                        id: $t.p.id + "_iladd",
                        onClickButton: function() {
                            $($t).jqGrid("addRow", o.addParams),
                            o.addParams.useFormatter || ($("#" + gID + "_ilsave").removeClass("ui-state-disabled"),
                            $("#" + gID + "_ilcancel").removeClass("ui-state-disabled"),
                            $("#" + gID + "_iladd").addClass("ui-state-disabled"),
                            $("#" + gID + "_iledit").addClass("ui-state-disabled"))
                        }
                    }),
                    o.edit && $($t).jqGrid("navButtonAdd", elem, {
                        caption: o.edittext,
                        title: o.edittitle,
                        buttonicon: o.editicon,
                        id: $t.p.id + "_iledit",
                        onClickButton: function() {
                            var sr = $($t).jqGrid("getGridParam", "selrow");
                            sr ? ($($t).jqGrid("editRow", sr, o.editParams),
                            $("#" + gID + "_ilsave").removeClass("ui-state-disabled"),
                            $("#" + gID + "_ilcancel").removeClass("ui-state-disabled"),
                            $("#" + gID + "_iladd").addClass("ui-state-disabled"),
                            $("#" + gID + "_iledit").addClass("ui-state-disabled")) : ($.jgrid.viewModal("#alertmod_" + gID, {
                                gbox: "#gbox_" + gID,
                                jqm: !0
                            }),
                            $("#jqg_alrt").focus())
                        }
                    }),
                    o.save && ($($t).jqGrid("navButtonAdd", elem, {
                        caption: o.savetext || "",
                        title: o.savetitle || "Save row",
                        buttonicon: o.saveicon,
                        id: $t.p.id + "_ilsave",
                        onClickButton: function() {
                            var sr = $t.p.savedRow[0].id;
                            if (sr) {
                                var opers = $t.p.prmNames
                                  , oper = opers.oper
                                  , tmpParams = o.editParams;
                                $("#" + $.jgrid.jqID(sr), "#" + gID).hasClass("jqgrid-new-row") ? (o.addParams.addRowParams.extraparam[oper] = opers.addoper,
                                tmpParams = o.addParams.addRowParams) : (o.editParams.extraparam || (o.editParams.extraparam = {}),
                                o.editParams.extraparam[oper] = opers.editoper),
                                $($t).jqGrid("saveRow", sr, tmpParams) && $($t).jqGrid("showAddEditButtons")
                            } else
                                $.jgrid.viewModal("#alertmod_" + gID, {
                                    gbox: "#gbox_" + gID,
                                    jqm: !0
                                }),
                                $("#jqg_alrt").focus()
                        }
                    }),
                    $("#" + gID + "_ilsave").addClass("ui-state-disabled")),
                    o.cancel && ($($t).jqGrid("navButtonAdd", elem, {
                        caption: o.canceltext || "",
                        title: o.canceltitle || "Cancel row editing",
                        buttonicon: o.cancelicon,
                        id: $t.p.id + "_ilcancel",
                        onClickButton: function() {
                            var sr = $t.p.savedRow[0].id
                              , cancelPrm = o.editParams;
                            sr ? ($("#" + $.jgrid.jqID(sr), "#" + gID).hasClass("jqgrid-new-row") && (cancelPrm = o.addParams.addRowParams),
                            $($t).jqGrid("restoreRow", sr, cancelPrm),
                            $($t).jqGrid("showAddEditButtons")) : ($.jgrid.viewModal("#alertmod", {
                                gbox: "#gbox_" + gID,
                                jqm: !0
                            }),
                            $("#jqg_alrt").focus())
                        }
                    }),
                    $("#" + gID + "_ilcancel").addClass("ui-state-disabled")),
                    o.restoreAfterSelect === !0 && $($t).bind("jqGridBeforeSelectRow.inlineNav", function(event, id) {
                        $t.p.savedRow.length > 0 && $t.p.inlineNav === !0 && id !== $t.p.selrow && null !== $t.p.selrow && ($t.p.selrow === o.addParams.rowID ? $($t).jqGrid("delRowData", $t.p.selrow) : $($t).jqGrid("restoreRow", $t.p.selrow, o.editParams),
                        $($t).jqGrid("showAddEditButtons"))
                    })
                }
            })
        },
        showAddEditButtons: function() {
            return this.each(function() {
                if (this.grid) {
                    var gID = $.jgrid.jqID(this.p.id);
                    $("#" + gID + "_ilsave").addClass("ui-state-disabled"),
                    $("#" + gID + "_ilcancel").addClass("ui-state-disabled"),
                    $("#" + gID + "_iladd").removeClass("ui-state-disabled"),
                    $("#" + gID + "_iledit").removeClass("ui-state-disabled")
                }
            })
        }
    }),
    $.jgrid.msie && 8 === $.jgrid.msiever() && ($.expr[":"].hidden = function(elem) {
        return 0 === elem.offsetWidth || 0 === elem.offsetHeight || "none" === elem.style.display
    }
    ),
    $.jgrid._multiselect = !1,
    $.ui && $.ui.multiselect) {
        if ($.ui.multiselect.prototype._setSelected) {
            var setSelected = $.ui.multiselect.prototype._setSelected;
            $.ui.multiselect.prototype._setSelected = function(item, selected) {
                var ret = setSelected.call(this, item, selected);
                if (selected && this.selectedList) {
                    var elt = this.element;
                    this.selectedList.find("li").each(function() {
                        $(this).data("optionLink") && $(this).data("optionLink").remove().appendTo(elt)
                    })
                }
                return ret
            }
        }
        $.ui.multiselect.prototype.destroy && ($.ui.multiselect.prototype.destroy = function() {
            this.element.show(),
            this.container.remove(),
            void 0 === $.Widget ? $.widget.prototype.destroy.apply(this, arguments) : $.Widget.prototype.destroy.apply(this, arguments)
        }
        ),
        $.jgrid._multiselect = !0
    }
    $.jgrid.extend({
        sortableColumns: function(tblrow) {
            return this.each(function() {
                function start() {
                    ts.p.disableClick = !0
                }
                var ts = this
                  , tid = $.jgrid.jqID(ts.p.id)
                  , sortable_opts = {
                    tolerance: "pointer",
                    axis: "x",
                    scrollSensitivity: "1",
                    items: ">th:not(:has(#jqgh_" + tid + "_cb,#jqgh_" + tid + "_rn,#jqgh_" + tid + "_subgrid),:hidden)",
                    placeholder: {
                        element: function(item) {
                            var el = $(document.createElement(item[0].nodeName)).addClass(item[0].className + " ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];
                            return el
                        },
                        update: function(self, p) {
                            p.height(self.currentItem.innerHeight() - parseInt(self.currentItem.css("paddingTop") || 0, 10) - parseInt(self.currentItem.css("paddingBottom") || 0, 10)),
                            p.width(self.currentItem.innerWidth() - parseInt(self.currentItem.css("paddingLeft") || 0, 10) - parseInt(self.currentItem.css("paddingRight") || 0, 10))
                        }
                    },
                    update: function(event, ui) {
                        var p = $(ui.item).parent()
                          , th = $(">th", p)
                          , colModel = ts.p.colModel
                          , cmMap = {}
                          , tid = ts.p.id + "_";
                        $.each(colModel, function(i) {
                            cmMap[this.name] = i
                        });
                        var permutation = [];
                        th.each(function() {
                            var id = $(">div", this).get(0).id.replace(/^jqgh_/, "").replace(tid, "");
                            cmMap.hasOwnProperty(id) && permutation.push(cmMap[id])
                        }),
                        $(ts).jqGrid("remapColumns", permutation, !0, !0),
                        $.isFunction(ts.p.sortable.update) && ts.p.sortable.update(permutation),
                        setTimeout(function() {
                            ts.p.disableClick = !1
                        }, 50)
                    }
                };
                if (ts.p.sortable.options ? $.extend(sortable_opts, ts.p.sortable.options) : $.isFunction(ts.p.sortable) && (ts.p.sortable = {
                    update: ts.p.sortable
                }),
                sortable_opts.start) {
                    var s = sortable_opts.start;
                    sortable_opts.start = function(e, ui) {
                        start(),
                        s.call(this, e, ui)
                    }
                } else
                    sortable_opts.start = start;
                ts.p.sortable.exclude && (sortable_opts.items += ":not(" + ts.p.sortable.exclude + ")");
                var $e = tblrow.sortable(sortable_opts)
                  , dataObj = $e.data("sortable") || $e.data("uiSortable");
                null != dataObj && (dataObj.data("sortable").floating = !0)
            })
        },
        columnChooser: function(opts) {
            function insert(perm, i, v) {
                var a, b;
                return i >= 0 ? (a = perm.slice(),
                b = a.splice(i, Math.max(perm.length - i, i)),
                i > perm.length && (i = perm.length),
                a[i] = v,
                a.concat(b)) : perm
            }
            function call(fn, obj) {
                fn && ("string" == typeof fn ? $.fn[fn] && $.fn[fn].apply(obj, $.makeArray(arguments).slice(2)) : $.isFunction(fn) && fn.apply(obj, $.makeArray(arguments).slice(2)))
            }
            var selector, select, dopts, mopts, $dialogContent, multiselectData, listHeight, self = this, colMap = {}, fixedCols = [], colModel = self.jqGrid("getGridParam", "colModel"), colNames = self.jqGrid("getGridParam", "colNames"), getMultiselectWidgetData = function($elem) {
                return $.ui.multiselect.prototype && $elem.data($.ui.multiselect.prototype.widgetFullName || $.ui.multiselect.prototype.widgetName) || $elem.data("ui-multiselect") || $elem.data("multiselect")
            }, regional = $.jgrid.getRegional(this[0], "col");
            if (!$("#colchooser_" + $.jgrid.jqID(self[0].p.id)).length) {
                if (selector = $('<div id="colchooser_' + self[0].p.id + '" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),
                select = $("select", selector),
                opts = $.extend({
                    width: 400,
                    height: 240,
                    classname: null,
                    done: function(perm) {
                        perm && self.jqGrid("remapColumns", perm, !0)
                    },
                    msel: "multiselect",
                    dlog: "dialog",
                    dialog_opts: {
                        minWidth: 470,
                        dialogClass: "ui-jqdialog"
                    },
                    dlog_opts: function(options) {
                        var buttons = {};
                        return buttons[options.bSubmit] = function() {
                            options.apply_perm(),
                            options.cleanup(!1)
                        }
                        ,
                        buttons[options.bCancel] = function() {
                            options.cleanup(!0)
                        }
                        ,
                        $.extend(!0, {
                            buttons: buttons,
                            close: function() {
                                options.cleanup(!0)
                            },
                            modal: options.modal || !1,
                            resizable: options.resizable || !0,
                            width: options.width + 70,
                            resize: function() {
                                var widgetData = getMultiselectWidgetData(select)
                                  , $thisDialogContent = widgetData.container.closest(".ui-dialog-content");
                                $thisDialogContent.length > 0 && "object" == typeof $thisDialogContent[0].style ? $thisDialogContent[0].style.width = "" : $thisDialogContent.css("width", ""),
                                widgetData.selectedList.height(Math.max(widgetData.selectedContainer.height() - widgetData.selectedActions.outerHeight() - 1, 1)),
                                widgetData.availableList.height(Math.max(widgetData.availableContainer.height() - widgetData.availableActions.outerHeight() - 1, 1));
                            }
                        }, options.dialog_opts || {})
                    },
                    apply_perm: function() {
                        var perm = [];
                        $("option", select).each(function() {
                            $(this).is("[selected]") ? self.jqGrid("showCol", colModel[this.value].name) : self.jqGrid("hideCol", colModel[this.value].name)
                        }),
                        $("option[selected]", select).each(function() {
                            perm.push(parseInt(this.value, 10))
                        }),
                        $.each(perm, function() {
                            delete colMap[colModel[parseInt(this, 10)].name]
                        }),
                        $.each(colMap, function() {
                            var ti = parseInt(this, 10);
                            perm = insert(perm, ti, ti)
                        }),
                        opts.done && opts.done.call(self, perm),
                        self.jqGrid("setGridWidth", self[0].p.tblwidth, self[0].p.shrinkToFit)
                    },
                    cleanup: function(calldone) {
                        call(opts.dlog, selector, "destroy"),
                        call(opts.msel, select, "destroy"),
                        selector.remove(),
                        calldone && opts.done && opts.done.call(self)
                    },
                    msel_opts: {}
                }, regional, opts || {}),
                $.ui && $.ui.multiselect && $.ui.multiselect.defaults) {
                    if (!$.jgrid._multiselect)
                        return void alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");
                    opts.msel_opts = $.extend($.ui.multiselect.defaults, opts.msel_opts)
                }
                opts.caption && selector.attr("title", opts.caption),
                opts.classname && (selector.addClass(opts.classname),
                select.addClass(opts.classname)),
                opts.width && ($(">div", selector).css({
                    width: opts.width,
                    margin: "0 auto"
                }),
                select.css("width", opts.width)),
                opts.height && ($(">div", selector).css("height", opts.height),
                select.css("height", opts.height - 10)),
                select.empty(),
                $.each(colModel, function(i) {
                    return colMap[this.name] = i,
                    this.hidedlg ? void (this.hidden || fixedCols.push(i)) : void select.append("<option value='" + i + "' " + (this.hidden ? "" : "selected='selected'") + ">" + $.jgrid.stripHtml(colNames[i]) + "</option>")
                }),
                dopts = $.isFunction(opts.dlog_opts) ? opts.dlog_opts.call(self, opts) : opts.dlog_opts,
                call(opts.dlog, selector, dopts),
                mopts = $.isFunction(opts.msel_opts) ? opts.msel_opts.call(self, opts) : opts.msel_opts,
                call(opts.msel, select, mopts),
                $dialogContent = $("#colchooser_" + $.jgrid.jqID(self[0].p.id)),
                $dialogContent.css({
                    margin: "auto"
                }),
                $dialogContent.find(">div").css({
                    width: "100%",
                    height: "100%",
                    margin: "auto"
                }),
                multiselectData = getMultiselectWidgetData(select),
                multiselectData.container.css({
                    width: "100%",
                    height: "100%",
                    margin: "auto"
                }),
                multiselectData.selectedContainer.css({
                    width: 100 * multiselectData.options.dividerLocation + "%",
                    height: "100%",
                    margin: "auto",
                    boxSizing: "border-box"
                }),
                multiselectData.availableContainer.css({
                    width: 100 - 100 * multiselectData.options.dividerLocation + "%",
                    height: "100%",
                    margin: "auto",
                    boxSizing: "border-box"
                }),
                multiselectData.selectedList.css("height", "auto"),
                multiselectData.availableList.css("height", "auto"),
                listHeight = Math.max(multiselectData.selectedList.height(), multiselectData.availableList.height()),
                listHeight = Math.min(listHeight, $(window).height()),
                multiselectData.selectedList.css("height", listHeight),
                multiselectData.availableList.css("height", listHeight)
            }
        },
        sortableRows: function(opts) {
            return this.each(function() {
                var $t = this;
                $t.grid && ($t.p.treeGrid || $.fn.sortable && (opts = $.extend({
                    cursor: "move",
                    axis: "y",
                    items: " > .jqgrow"
                }, opts || {}),
                opts.start && $.isFunction(opts.start) ? (opts._start_ = opts.start,
                delete opts.start) : opts._start_ = !1,
                opts.update && $.isFunction(opts.update) ? (opts._update_ = opts.update,
                delete opts.update) : opts._update_ = !1,
                opts.start = function(ev, ui) {
                    if ($(ui.item).css("border-width", "0"),
                    $("td", ui.item).each(function(i) {
                        this.style.width = $t.grid.cols[i].style.width
                    }),
                    $t.p.subGrid) {
                        var subgid = $(ui.item).attr("id");
                        try {
                            $($t).jqGrid("collapseSubGridRow", subgid)
                        } catch (e) {}
                    }
                    opts._start_ && opts._start_.apply(this, [ev, ui])
                }
                ,
                opts.update = function(ev, ui) {
                    $(ui.item).css("border-width", ""),
                    $t.p.rownumbers === !0 && $("td.jqgrid-rownum", $t.rows).each(function(i) {
                        $(this).html(i + 1 + (parseInt($t.p.page, 10) - 1) * parseInt($t.p.rowNum, 10))
                    }),
                    opts._update_ && opts._update_.apply(this, [ev, ui])
                }
                ,
                $("tbody:first", $t).sortable(opts),
                $("tbody:first > .jqgrow", $t).disableSelection()))
            })
        },
        gridDnD: function(opts) {
            return this.each(function() {
                function updateDnD() {
                    var datadnd = $.data($t, "dnd");
                    $("tr.jqgrow:not(.ui-draggable)", $t).draggable($.isFunction(datadnd.drag) ? datadnd.drag.call($($t), datadnd) : datadnd.drag)
                }
                var i, cn, $t = this;
                if ($t.grid && !$t.p.treeGrid && $.fn.draggable && $.fn.droppable) {
                    var appender = "<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>";
                    if (void 0 === $("#jqgrid_dnd")[0] && $("body").append(appender),
                    "string" == typeof opts && "updateDnD" === opts && $t.p.jqgdnd === !0)
                        return void updateDnD();
                    if (opts = $.extend({
                        drag: function(opts) {
                            return $.extend({
                                start: function(ev, ui) {
                                    var i, subgid;
                                    if ($t.p.subGrid) {
                                        subgid = $(ui.helper).attr("id");
                                        try {
                                            $($t).jqGrid("collapseSubGridRow", subgid)
                                        } catch (e) {}
                                    }
                                    for (i = 0; i < $.data($t, "dnd").connectWith.length; i++)
                                        0 === $($.data($t, "dnd").connectWith[i]).jqGrid("getGridParam", "reccount") && $($.data($t, "dnd").connectWith[i]).jqGrid("addRowData", "jqg_empty_row", {});
                                    ui.helper.addClass("ui-state-highlight"),
                                    $("td", ui.helper).each(function(i) {
                                        this.style.width = $t.grid.headers[i].width + "px"
                                    }),
                                    opts.onstart && $.isFunction(opts.onstart) && opts.onstart.call($($t), ev, ui)
                                },
                                stop: function(ev, ui) {
                                    var i, ids;
                                    for (ui.helper.dropped && !opts.dragcopy && (ids = $(ui.helper).attr("id"),
                                    void 0 === ids && (ids = $(this).attr("id")),
                                    $($t).jqGrid("delRowData", ids)),
                                    i = 0; i < $.data($t, "dnd").connectWith.length; i++)
                                        $($.data($t, "dnd").connectWith[i]).jqGrid("delRowData", "jqg_empty_row");
                                    opts.onstop && $.isFunction(opts.onstop) && opts.onstop.call($($t), ev, ui)
                                }
                            }, opts.drag_opts || {})
                        },
                        drop: function(opts) {
                            return $.extend({
                                accept: function(d) {
                                    if (!$(d).hasClass("jqgrow"))
                                        return d;
                                    var tid = $(d).closest("table.ui-jqgrid-btable");
                                    if (tid.length > 0 && void 0 !== $.data(tid[0], "dnd")) {
                                        var cn = $.data(tid[0], "dnd").connectWith;
                                        return -1 !== $.inArray("#" + $.jgrid.jqID(this.id), cn)
                                    }
                                    return !1
                                },
                                drop: function(ev, ui) {
                                    if ($(ui.draggable).hasClass("jqgrow")) {
                                        var accept = $(ui.draggable).attr("id")
                                          , getdata = ui.draggable.parent().parent().jqGrid("getRowData", accept);
                                        if (!opts.dropbyname) {
                                            var nm, key, j = 0, tmpdata = {}, dropmodel = $("#" + $.jgrid.jqID(this.id)).jqGrid("getGridParam", "colModel");
                                            try {
                                                for (key in getdata)
                                                    getdata.hasOwnProperty(key) && (nm = dropmodel[j].name,
                                                    "cb" !== nm && "rn" !== nm && "subgrid" !== nm && getdata.hasOwnProperty(key) && dropmodel[j] && (tmpdata[nm] = getdata[key]),
                                                    j++);
                                                getdata = tmpdata
                                            } catch (e) {}
                                        }
                                        if (ui.helper.dropped = !0,
                                        opts.beforedrop && $.isFunction(opts.beforedrop)) {
                                            var datatoinsert = opts.beforedrop.call(this, ev, ui, getdata, $("#" + $.jgrid.jqID($t.p.id)), $(this));
                                            void 0 !== datatoinsert && null !== datatoinsert && "object" == typeof datatoinsert && (getdata = datatoinsert)
                                        }
                                        if (ui.helper.dropped) {
                                            var grid;
                                            opts.autoid && ($.isFunction(opts.autoid) ? grid = opts.autoid.call(this, getdata) : (grid = Math.ceil(1e3 * Math.random()),
                                            grid = opts.autoidprefix + grid)),
                                            $("#" + $.jgrid.jqID(this.id)).jqGrid("addRowData", grid, getdata, opts.droppos)
                                        }
                                        opts.ondrop && $.isFunction(opts.ondrop) && opts.ondrop.call(this, ev, ui, getdata)
                                    }
                                }
                            }, opts.drop_opts || {})
                        },
                        onstart: null,
                        onstop: null,
                        beforedrop: null,
                        ondrop: null,
                        drop_opts: {
                            activeClass: "ui-state-active",
                            hoverClass: "ui-state-hover"
                        },
                        drag_opts: {
                            revert: "invalid",
                            helper: "clone",
                            cursor: "move",
                            appendTo: "#jqgrid_dnd",
                            zIndex: 5e3
                        },
                        dragcopy: !1,
                        dropbyname: !1,
                        droppos: "first",
                        autoid: !0,
                        autoidprefix: "dnd_"
                    }, opts || {}),
                    opts.connectWith)
                        for (opts.connectWith = opts.connectWith.split(","),
                        opts.connectWith = $.map(opts.connectWith, function(n) {
                            return $.trim(n)
                        }),
                        $.data($t, "dnd", opts),
                        0 === $t.p.reccount || $t.p.jqgdnd || updateDnD(),
                        $t.p.jqgdnd = !0,
                        i = 0; i < opts.connectWith.length; i++)
                            cn = opts.connectWith[i],
                            $(cn).droppable($.isFunction(opts.drop) ? opts.drop.call($($t), opts) : opts.drop)
                }
            })
        },
        gridResize: function(opts) {
            return this.each(function() {
                var $t = this
                  , gID = $.jgrid.jqID($t.p.id);
                if ($t.grid && $.fn.resizable) {
                    if (opts = $.extend({}, opts || {}),
                    opts.alsoResize ? (opts._alsoResize_ = opts.alsoResize,
                    delete opts.alsoResize) : opts._alsoResize_ = !1,
                    opts.stop && $.isFunction(opts.stop) ? (opts._stop_ = opts.stop,
                    delete opts.stop) : opts._stop_ = !1,
                    opts.stop = function(ev, ui) {
                        $($t).jqGrid("setGridParam", {
                            height: $("#gview_" + gID + " .ui-jqgrid-bdiv").height()
                        }),
                        $($t).jqGrid("setGridWidth", ui.size.width, opts.shrinkToFit),
                        opts._stop_ && opts._stop_.call($t, ev, ui)
                    }
                    ,
                    opts._alsoResize_) {
                        var optstest = "{'#gview_" + gID + " .ui-jqgrid-bdiv':true,'" + opts._alsoResize_ + "':true}";
                        opts.alsoResize = eval("(" + optstest + ")")
                    } else
                        opts.alsoResize = $(".ui-jqgrid-bdiv", "#gview_" + gID);
                    delete opts._alsoResize_,
                    $("#gbox_" + gID).resizable(opts)
                }
            })
        }
    }),
    $.assocArraySize = function(obj) {
        var key, size = 0;
        for (key in obj)
            obj.hasOwnProperty(key) && size++;
        return size
    }
    ,
    $.jgrid.extend({
        pivotSetup: function(data, options) {
            var columns = []
              , pivotrows = []
              , summaries = []
              , member = []
              , labels = []
              , groupOptions = {
                grouping: !0,
                groupingView: {
                    groupField: [],
                    groupSummary: [],
                    groupSummaryPos: []
                }
            }
              , headers = []
              , o = $.extend({
                rowTotals: !1,
                rowTotalsText: "Total",
                colTotals: !1,
                groupSummary: !0,
                groupSummaryPos: "header",
                frozenStaticCols: !1
            }, options || {});
            return this.each(function() {
                function find(ar, fun, extra) {
                    var res;
                    return res = _pivotfilter.call(ar, fun, extra),
                    res.length > 0 ? res[0] : null
                }
                function findGroup(item, index) {
                    var i, j = 0, ret = !0;
                    for (i in item) {
                        if (item.hasOwnProperty(i) && item[i] != this[j]) {
                            ret = !1;
                            break
                        }
                        if (j++,
                        j >= this.length)
                            break
                    }
                    return ret && (rowindex = index),
                    ret
                }
                function calculation(oper, v, field, rc) {
                    var ret;
                    switch (oper) {
                    case "sum":
                        ret = parseFloat(v || 0) + parseFloat(rc[field] || 0);
                        break;
                    case "count":
                        "" !== v && null != v || (v = 0),
                        ret = rc.hasOwnProperty(field) ? v + 1 : 0;
                        break;
                    case "min":
                        ret = "" === v || null == v ? parseFloat(rc[field] || 0) : Math.min(parseFloat(v), parseFloat(rc[field] || 0));
                        break;
                    case "max":
                        ret = "" === v || null == v ? parseFloat(rc[field] || 0) : Math.max(parseFloat(v), parseFloat(rc[field] || 0))
                    }
                    return ret
                }
                function agregateFunc(row, aggr, value, curr) {
                    var i, label, j, jv, arrln = aggr.length, mainval = "", swapvals = [];
                    for ($.isArray(value) ? (jv = value.length,
                    swapvals = value) : (jv = 1,
                    swapvals[0] = value),
                    member = [],
                    labels = [],
                    member.root = 0,
                    j = 0; jv > j; j++) {
                        var vl, tmpmember = [];
                        for (i = 0; arrln > i; i++) {
                            if (null == value)
                                label = $.trim(aggr[i].member) + "_" + aggr[i].aggregator,
                                vl = label,
                                swapvals[0] = vl;
                            else {
                                vl = value[j].replace(/\s+/g, "");
                                try {
                                    label = 1 === arrln ? mainval + vl : mainval + vl + "_" + aggr[i].aggregator + "_" + String(i)
                                } catch (e) {}
                            }
                            label = isNaN(parseInt(label, 10)) ? label : label + " ",
                            curr[label] = tmpmember[label] = calculation(aggr[i].aggregator, curr[label], aggr[i].member, row),
                            1 >= j && "_r_Totals" !== vl && "" === mainval && (mainval = vl)
                        }
                        member[label] = tmpmember,
                        labels[label] = swapvals[j]
                    }
                    return curr
                }
                function list(items) {
                    var l, j, key, k, col;
                    for (key in items)
                        if (items.hasOwnProperty(key)) {
                            if ("object" != typeof items[key]) {
                                if ("level" === key) {
                                    if (void 0 === lastval[items.level] && (lastval[items.level] = "",
                                    items.level > 0 && "_r_Totals" !== items.text && (headers[items.level - 1] = {
                                        useColSpanStyle: !1,
                                        groupHeaders: []
                                    })),
                                    lastval[items.level] !== items.text && items.children.length && "_r_Totals" !== items.text && items.level > 0) {
                                        headers[items.level - 1].groupHeaders.push({
                                            titleText: items.label,
                                            numberOfColumns: 0
                                        });
                                        var collen = headers[items.level - 1].groupHeaders.length - 1
                                          , colpos = 0 === collen ? swaplen : initColLen + aggrlen;
                                        if (items.level - 1 === (o.rowTotals ? 1 : 0) && collen > 0) {
                                            var l1 = headers[items.level - 1].groupHeaders[collen - 1].numberOfColumns;
                                            l1 && (colpos = l1 + 1 + o.aggregates.length)
                                        }
                                        headers[items.level - 1].groupHeaders[collen].startColumnName = columns[colpos].name,
                                        headers[items.level - 1].groupHeaders[collen].numberOfColumns = columns.length - colpos,
                                        initColLen = columns.length
                                    }
                                    lastval[items.level] = items.text
                                }
                                if (items.level === ylen && "level" === key && ylen > 0)
                                    if (aggrlen > 1) {
                                        var ll = 1;
                                        for (l in items.fields)
                                            items.fields.hasOwnProperty(l) && 1 === ll && headers[ylen - 1].groupHeaders.push({
                                                startColumnName: l,
                                                numberOfColumns: 1,
                                                titleText: items.text
                                            }),
                                            ll++;
                                        headers[ylen - 1].groupHeaders[headers[ylen - 1].groupHeaders.length - 1].numberOfColumns = ll - 1
                                    } else
                                        headers.splice(ylen - 1, 1)
                            }
                            if (null != items[key] && "object" == typeof items[key] && list(items[key]),
                            "level" === key && items.level > 0) {
                                j = 0;
                                for (l in items.fields)
                                    if (items.fields.hasOwnProperty(l)) {
                                        col = {};
                                        for (k in o.aggregates[j])
                                            if (o.aggregates[j].hasOwnProperty(k))
                                                switch (k) {
                                                case "member":
                                                case "label":
                                                case "aggregator":
                                                    break;
                                                default:
                                                    col[k] = o.aggregates[j][k]
                                                }
                                        aggrlen > 1 ? (col.name = l,
                                        col.label = o.aggregates[j].label || items.label) : (col.name = items.text,
                                        col.label = "_r_Totals" === items.text ? o.rowTotalsText : items.label),
                                        columns.push(col),
                                        j++
                                    }
                            }
                        }
                }
                var row, rowindex, i, xlen, ylen, aggrlen, tmp, newObj, rowlen = data.length, r = 0;
                if (o.rowTotals && o.yDimension.length > 0) {
                    var dn = o.yDimension[0].dataName;
                    o.yDimension.splice(0, 0, {
                        dataName: dn
                    }),
                    o.yDimension[0].converter = function() {
                        return "_r_Totals"
                    }
                }
                if (xlen = $.isArray(o.xDimension) ? o.xDimension.length : 0,
                ylen = o.yDimension.length,
                aggrlen = $.isArray(o.aggregates) ? o.aggregates.length : 0,
                0 === xlen || 0 === aggrlen)
                    throw "xDimension or aggregates optiona are not set!";
                var colc;
                for (i = 0; xlen > i; i++)
                    colc = {
                        name: o.xDimension[i].dataName,
                        frozen: o.frozenStaticCols
                    },
                    null == o.xDimension[i].isGroupField && (o.xDimension[i].isGroupField = !0),
                    colc = $.extend(!0, colc, o.xDimension[i]),
                    columns.push(colc);
                for (var groupfields = xlen - 1, tree = {}; rowlen > r; ) {
                    row = data[r];
                    var xValue = []
                      , yValue = [];
                    tmp = {},
                    i = 0;
                    do
                        xValue[i] = $.trim(row[o.xDimension[i].dataName]),
                        tmp[o.xDimension[i].dataName] = xValue[i],
                        i++;
                    while (xlen > i);
                    var k = 0;
                    if (rowindex = -1,
                    newObj = find(pivotrows, findGroup, xValue)) {
                        if (rowindex >= 0) {
                            if (k = 0,
                            ylen >= 1) {
                                for (k = 0; ylen > k; k++)
                                    yValue[k] = $.trim(row[o.yDimension[k].dataName]),
                                    o.yDimension[k].converter && $.isFunction(o.yDimension[k].converter) && (yValue[k] = o.yDimension[k].converter.call(this, yValue[k], xValue, yValue));
                                newObj = agregateFunc(row, o.aggregates, yValue, newObj)
                            } else
                                0 === ylen && (newObj = agregateFunc(row, o.aggregates, null, newObj));
                            pivotrows[rowindex] = newObj
                        }
                    } else {
                        if (k = 0,
                        ylen >= 1) {
                            for (k = 0; ylen > k; k++)
                                yValue[k] = $.trim(row[o.yDimension[k].dataName]),
                                o.yDimension[k].converter && $.isFunction(o.yDimension[k].converter) && (yValue[k] = o.yDimension[k].converter.call(this, yValue[k], xValue, yValue));
                            tmp = agregateFunc(row, o.aggregates, yValue, tmp)
                        } else
                            0 === ylen && (tmp = agregateFunc(row, o.aggregates, null, tmp));
                        pivotrows.push(tmp)
                    }
                    var kk, kj = 0, current = null, existing = null;
                    for (kk in member)
                        if (member.hasOwnProperty(kk)) {
                            if (0 === kj)
                                tree.children && void 0 !== tree.children || (tree = {
                                    text: kk,
                                    level: 0,
                                    children: [],
                                    label: kk
                                }),
                                current = tree.children;
                            else {
                                for (existing = null,
                                i = 0; i < current.length; i++)
                                    if (current[i].text === kk) {
                                        existing = current[i];
                                        break
                                    }
                                existing ? current = existing.children : (current.push({
                                    children: [],
                                    text: kk,
                                    level: kj,
                                    fields: member[kk],
                                    label: labels[kk]
                                }),
                                current = current[current.length - 1].children)
                            }
                            kj++
                        }
                    r++
                }
                var lastval = []
                  , initColLen = columns.length
                  , swaplen = initColLen;
                ylen > 0 && (headers[ylen - 1] = {
                    useColSpanStyle: !1,
                    groupHeaders: []
                }),
                list(tree);
                var nm;
                if (o.colTotals)
                    for (var plen = pivotrows.length; plen--; )
                        for (i = xlen; i < columns.length; i++)
                            nm = columns[i].name,
                            summaries[nm] ? summaries[nm] += parseFloat(pivotrows[plen][nm] || 0) : summaries[nm] = parseFloat(pivotrows[plen][nm] || 0);
                if (groupfields > 0)
                    for (i = 0; groupfields > i; i++)
                        columns[i].isGroupField && (groupOptions.groupingView.groupField.push(columns[i].name),
                        groupOptions.groupingView.groupSummary.push(o.groupSummary),
                        groupOptions.groupingView.groupSummaryPos.push(o.groupSummaryPos));
                else
                    groupOptions.grouping = !1;
                groupOptions.sortname = columns[groupfields].name,
                groupOptions.groupingView.hideFirstGroupCol = !0
            }),
            {
                colModel: columns,
                rows: pivotrows,
                groupOptions: groupOptions,
                groupHeaders: headers,
                summary: summaries
            }
        },
        jqPivot: function(data, pivotOpt, gridOpt, ajaxOpt) {
            return this.each(function() {
                function pivot(data) {
                    var i, pivotGrid = jQuery($t).jqGrid("pivotSetup", data, pivotOpt), footerrow = $.assocArraySize(pivotGrid.summary) > 0, query = $.jgrid.from.call($t, pivotGrid.rows);
                    for (i = 0; i < pivotGrid.groupOptions.groupingView.groupField.length; i++)
                        query.orderBy(pivotGrid.groupOptions.groupingView.groupField[i], "a", "text", "");
                    jQuery($t).jqGrid($.extend(!0, {
                        datastr: $.extend(query.select(), footerrow ? {
                            userdata: pivotGrid.summary
                        } : {}),
                        datatype: "jsonstring",
                        footerrow: footerrow,
                        userDataOnFooter: footerrow,
                        colModel: pivotGrid.colModel,
                        viewrecords: !0,
                        sortname: pivotOpt.xDimension[0].dataName
                    }, pivotGrid.groupOptions, gridOpt || {}));
                    var gHead = pivotGrid.groupHeaders;
                    if (gHead.length)
                        for (i = 0; i < gHead.length; i++)
                            gHead[i] && gHead[i].groupHeaders.length && jQuery($t).jqGrid("setGroupHeaders", gHead[i]);
                    pivotOpt.frozenStaticCols && jQuery($t).jqGrid("setFrozenColumns")
                }
                var $t = this;
                "string" == typeof data ? $.ajax($.extend({
                    url: data,
                    dataType: "json",
                    success: function(response) {
                        pivot($.jgrid.getAccessor(response, ajaxOpt && ajaxOpt.reader ? ajaxOpt.reader : "rows"))
                    }
                }, ajaxOpt || {})) : pivot(data)
            })
        }
    }),
    $.jgrid.extend({
        setSubGrid: function() {
            return this.each(function() {
                var cm, i, $t = this, suboptions = {
                    plusicon: "ui-icon-plus",
                    minusicon: "ui-icon-minus",
                    openicon: "ui-icon-carat-1-sw",
                    expandOnLoad: !1,
                    delayOnLoad: 50,
                    selectOnExpand: !1,
                    selectOnCollapse: !1,
                    reloadOnExpand: !0
                };
                if ($t.p.subGridOptions = $.extend(suboptions, $t.p.subGridOptions || {}),
                $t.p.colNames.unshift(""),
                $t.p.colModel.unshift({
                    name: "subgrid",
                    width: $.jgrid.cell_width ? $t.p.subGridWidth + $t.p.cellLayout : $t.p.subGridWidth,
                    sortable: !1,
                    resizable: !1,
                    hidedlg: !0,
                    search: !1,
                    fixed: !0
                }),
                cm = $t.p.subGridModel,
                cm[0])
                    for (cm[0].align = $.extend([], cm[0].align || []),
                    i = 0; i < cm[0].name.length; i++)
                        cm[0].align[i] = cm[0].align[i] || "left"
            })
        },
        addSubGridCell: function(pos, iRow) {
            var ic, sid, prp = "";
            return this.each(function() {
                prp = this.formatCol(pos, iRow),
                sid = this.p.id,
                ic = this.p.subGridOptions.plusicon
            }),
            '<td role="gridcell" aria-describedby="' + sid + '_subgrid" class="ui-sgcollapsed sgcollapsed" ' + prp + "><a style='cursor:pointer;'><span class='ui-icon " + ic + "'></span></a></td>"
        },
        addSubGrid: function(pos, sind) {
            return this.each(function() {
                var ts = this;
                if (ts.grid) {
                    var _id, pID, atd, bfsc, $r, subGridCell = function(trdiv, cell, pos) {
                        var tddiv = $("<td align='" + ts.p.subGridModel[0].align[pos] + "'></td>").html(cell);
                        $(trdiv).append(tddiv)
                    }, subGridXml = function(sjxml, sbid) {
                        var tddiv, i, sgmap, dummy = $("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"), trdiv = $("<tr></tr>");
                        for (i = 0; i < ts.p.subGridModel[0].name.length; i++)
                            tddiv = $("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-" + ts.p.direction + "'></th>"),
                            $(tddiv).html(ts.p.subGridModel[0].name[i]),
                            $(tddiv).width(ts.p.subGridModel[0].width[i]),
                            $(trdiv).append(tddiv);
                        $(dummy).append(trdiv),
                        sjxml && (sgmap = ts.p.xmlReader.subgrid,
                        $(sgmap.root + " " + sgmap.row, sjxml).each(function() {
                            if (trdiv = $("<tr class='ui-widget-content ui-subtblcell'></tr>"),
                            sgmap.repeatitems === !0)
                                $(sgmap.cell, this).each(function(i) {
                                    subGridCell(trdiv, $(this).text() || "&#160;", i)
                                });
                            else {
                                var f = ts.p.subGridModel[0].mapping || ts.p.subGridModel[0].name;
                                if (f)
                                    for (i = 0; i < f.length; i++)
                                        subGridCell(trdiv, $(f[i], this).text() || "&#160;", i)
                            }
                            $(dummy).append(trdiv)
                        }));
                        var pID = $("table:first", ts.grid.bDiv).attr("id") + "_";
                        return $("#" + $.jgrid.jqID(pID + sbid)).append(dummy),
                        ts.grid.hDiv.loading = !1,
                        $("#load_" + $.jgrid.jqID(ts.p.id)).hide(),
                        !1
                    }, subGridJson = function(sjxml, sbid) {
                        var tddiv, result, i, cur, sgmap, j, dummy = $("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"), trdiv = $("<tr></tr>");
                        for (i = 0; i < ts.p.subGridModel[0].name.length; i++)
                            tddiv = $("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-" + ts.p.direction + "'></th>"),
                            $(tddiv).html(ts.p.subGridModel[0].name[i]),
                            $(tddiv).width(ts.p.subGridModel[0].width[i]),
                            $(trdiv).append(tddiv);
                        if ($(dummy).append(trdiv),
                        sjxml && (sgmap = ts.p.jsonReader.subgrid,
                        result = $.jgrid.getAccessor(sjxml, sgmap.root),
                        void 0 !== result))
                            for (i = 0; i < result.length; i++) {
                                if (cur = result[i],
                                trdiv = $("<tr class='ui-widget-content ui-subtblcell'></tr>"),
                                sgmap.repeatitems === !0)
                                    for (sgmap.cell && (cur = cur[sgmap.cell]),
                                    j = 0; j < cur.length; j++)
                                        subGridCell(trdiv, cur[j] || "&#160;", j);
                                else {
                                    var f = ts.p.subGridModel[0].mapping || ts.p.subGridModel[0].name;
                                    if (f.length)
                                        for (j = 0; j < f.length; j++)
                                            subGridCell(trdiv, cur[f[j]] || "&#160;", j)
                                }
                                $(dummy).append(trdiv)
                            }
                        var pID = $("table:first", ts.grid.bDiv).attr("id") + "_";
                        return $("#" + $.jgrid.jqID(pID + sbid)).append(dummy),
                        ts.grid.hDiv.loading = !1,
                        $("#load_" + $.jgrid.jqID(ts.p.id)).hide(),
                        !1
                    }, populatesubgrid = function(rd) {
                        var sid, dp, i, j;
                        if (sid = $(rd).attr("id"),
                        dp = {
                            nd_: (new Date).getTime()
                        },
                        dp[ts.p.prmNames.subgridid] = sid,
                        !ts.p.subGridModel[0])
                            return !1;
                        if (ts.p.subGridModel[0].params)
                            for (j = 0; j < ts.p.subGridModel[0].params.length; j++)
                                for (i = 0; i < ts.p.colModel.length; i++)
                                    ts.p.colModel[i].name === ts.p.subGridModel[0].params[j] && (dp[ts.p.colModel[i].name] = $("td:eq(" + i + ")", rd).text().replace(/\&#160\;/gi, ""));
                        if (!ts.grid.hDiv.loading)
                            switch (ts.grid.hDiv.loading = !0,
                            $("#load_" + $.jgrid.jqID(ts.p.id)).show(),
                            ts.p.subgridtype || (ts.p.subgridtype = ts.p.datatype),
                            $.isFunction(ts.p.subgridtype) ? ts.p.subgridtype.call(ts, dp) : ts.p.subgridtype = ts.p.subgridtype.toLowerCase(),
                            ts.p.subgridtype) {
                            case "xml":
                            case "json":
                                $.ajax($.extend({
                                    type: ts.p.mtype,
                                    url: $.isFunction(ts.p.subGridUrl) ? ts.p.subGridUrl.call(ts, dp) : ts.p.subGridUrl,
                                    dataType: ts.p.subgridtype,
                                    data: $.isFunction(ts.p.serializeSubGridData) ? ts.p.serializeSubGridData.call(ts, dp) : dp,
                                    complete: function(sxml) {
                                        "xml" === ts.p.subgridtype ? subGridXml(sxml.responseXML, sid) : subGridJson($.jgrid.parse(sxml.responseText), sid),
                                        sxml = null
                                    }
                                }, $.jgrid.ajaxOptions, ts.p.ajaxSubgridOptions || {}))
                            }
                        return !1
                    }, nhc = 0;
                    $.each(ts.p.colModel, function() {
                        this.hidden !== !0 && "rn" !== this.name && "cb" !== this.name || nhc++
                    });
                    var len = ts.rows.length
                      , i = 1;
                    for (void 0 !== sind && sind > 0 && (i = sind,
                    len = sind + 1); len > i; )
                        $(ts.rows[i]).hasClass("jqgrow") && (ts.p.scroll && $(ts.rows[i].cells[pos]).unbind("click"),
                        $(ts.rows[i].cells[pos]).bind("click", function() {
                            var tr = $(this).parent("tr")[0];
                            if (pID = ts.p.id,
                            _id = tr.id,
                            $r = $("#" + pID + "_" + _id + "_expandedContent"),
                            $(this).hasClass("sgcollapsed")) {
                                if (bfsc = $(ts).triggerHandler("jqGridSubGridBeforeExpand", [pID + "_" + _id, _id]),
                                bfsc = bfsc !== !1 && "stop" !== bfsc,
                                bfsc && $.isFunction(ts.p.subGridBeforeExpand) && (bfsc = ts.p.subGridBeforeExpand.call(ts, pID + "_" + _id, _id)),
                                bfsc === !1)
                                    return !1;
                                ts.p.subGridOptions.reloadOnExpand === !0 || ts.p.subGridOptions.reloadOnExpand === !1 && !$r.hasClass("ui-subgrid") ? (atd = pos >= 1 ? "<td colspan='" + pos + "'>&#160;</td>" : "",
                                $(tr).after("<tr role='row' id='" + pID + "_" + _id + "_expandedContent' class='ui-subgrid ui-sg-expanded'>" + atd + "<td class='ui-widget-content subgrid-cell'><span class='ui-icon " + ts.p.subGridOptions.openicon + "'></span></td><td colspan='" + parseInt(ts.p.colNames.length - 1 - nhc, 10) + "' class='ui-widget-content subgrid-data'><div id=" + pID + "_" + _id + " class='tablediv'></div></td></tr>"),
                                $(ts).triggerHandler("jqGridSubGridRowExpanded", [pID + "_" + _id, _id]),
                                $.isFunction(ts.p.subGridRowExpanded) ? ts.p.subGridRowExpanded.call(ts, pID + "_" + _id, _id) : populatesubgrid(tr)) : $r.show().removeClass("ui-sg-collapsed").addClass("ui-sg-expanded"),
                                $(this).html("<a style='cursor:pointer;'><span class='ui-icon " + ts.p.subGridOptions.minusicon + "'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded"),
                                ts.p.subGridOptions.selectOnExpand && $(ts).jqGrid("setSelection", _id)
                            } else if ($(this).hasClass("sgexpanded")) {
                                if (bfsc = $(ts).triggerHandler("jqGridSubGridRowColapsed", [pID + "_" + _id, _id]),
                                bfsc = bfsc !== !1 && "stop" !== bfsc,
                                bfsc && $.isFunction(ts.p.subGridRowColapsed) && (bfsc = ts.p.subGridRowColapsed.call(ts, pID + "_" + _id, _id)),
                                bfsc === !1)
                                    return !1;
                                ts.p.subGridOptions.reloadOnExpand === !0 ? $r.remove(".ui-subgrid") : $r.hasClass("ui-subgrid") && $r.hide().addClass("ui-sg-collapsed").removeClass("ui-sg-expanded"),
                                $(this).html("<a style='cursor:pointer;'><span class='ui-icon " + ts.p.subGridOptions.plusicon + "'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed"),
                                ts.p.subGridOptions.selectOnCollapse && $(ts).jqGrid("setSelection", _id)
                            }
                            return !1
                        })),
                        i++;
                    ts.p.subGridOptions.expandOnLoad === !0 && $(ts.rows).filter(".jqgrow").each(function(index, row) {
                        $(row.cells[0]).click()
                    }),
                    ts.subGridXml = function(xml, sid) {
                        subGridXml(xml, sid)
                    }
                    ,
                    ts.subGridJson = function(json, sid) {
                        subGridJson(json, sid)
                    }
                }
            })
        },
        expandSubGridRow: function(rowid) {
            return this.each(function() {
                var $t = this;
                if (($t.grid || rowid) && $t.p.subGrid === !0) {
                    var rc = $(this).jqGrid("getInd", rowid, !0);
                    if (rc) {
                        var sgc = $("td.sgcollapsed", rc)[0];
                        sgc && $(sgc).trigger("click")
                    }
                }
            })
        },
        collapseSubGridRow: function(rowid) {
            return this.each(function() {
                var $t = this;
                if (($t.grid || rowid) && $t.p.subGrid === !0) {
                    var rc = $(this).jqGrid("getInd", rowid, !0);
                    if (rc) {
                        var sgc = $("td.sgexpanded", rc)[0];
                        sgc && $(sgc).trigger("click")
                    }
                }
            })
        },
        toggleSubGridRow: function(rowid) {
            return this.each(function() {
                var $t = this;
                if (($t.grid || rowid) && $t.p.subGrid === !0) {
                    var rc = $(this).jqGrid("getInd", rowid, !0);
                    if (rc) {
                        var sgc = $("td.sgcollapsed", rc)[0];
                        sgc ? $(sgc).trigger("click") : (sgc = $("td.sgexpanded", rc)[0],
                        sgc && $(sgc).trigger("click"))
                    }
                }
            })
        }
    }),
    $.jgrid.extend({
        setTreeNode: function(i, len) {
            return this.each(function() {
                var $t = this;
                if ($t.grid && $t.p.treeGrid)
                    for (var lft, rgt, curLevel, ident, lftpos, twrap, ldat, lf, expCol = $t.p.expColInd, expanded = $t.p.treeReader.expanded_field, isLeaf = $t.p.treeReader.leaf_field, level = $t.p.treeReader.level_field, icon = $t.p.treeReader.icon_field, loaded = $t.p.treeReader.loaded; len > i; ) {
                        var expan, ind = $.jgrid.stripPref($t.p.idPrefix, $t.rows[i].id), dind = $t.p._index[ind];
                        ldat = $t.p.data[dind],
                        "nested" === $t.p.treeGridModel && (ldat[isLeaf] || (lft = parseInt(ldat[$t.p.treeReader.left_field], 10),
                        rgt = parseInt(ldat[$t.p.treeReader.right_field], 10),
                        ldat[isLeaf] = rgt === lft + 1 ? "true" : "false",
                        $t.rows[i].cells[$t.p._treeleafpos].innerHTML = ldat[isLeaf])),
                        curLevel = parseInt(ldat[level], 10),
                        0 === $t.p.tree_root_level ? (ident = curLevel + 1,
                        lftpos = curLevel) : (ident = curLevel,
                        lftpos = curLevel - 1),
                        twrap = "<div class='tree-wrap tree-wrap-" + $t.p.direction + "' style='width:" + 18 * ident + "px;'>",
                        twrap += "<div style='" + ("rtl" === $t.p.direction ? "right:" : "left:") + 18 * lftpos + "px;' class='ui-icon ",
                        void 0 !== ldat[loaded] && ("true" === ldat[loaded] || ldat[loaded] === !0 ? ldat[loaded] = !0 : ldat[loaded] = !1),
                        "true" === ldat[isLeaf] || ldat[isLeaf] === !0 ? (twrap += (void 0 !== ldat[icon] && "" !== ldat[icon] ? ldat[icon] : $t.p.treeIcons.leaf) + " tree-leaf treeclick",
                        ldat[isLeaf] = !0,
                        lf = "leaf") : (ldat[isLeaf] = !1,
                        lf = ""),
                        ldat[expanded] = ("true" === ldat[expanded] || ldat[expanded] === !0) && (ldat[loaded] || void 0 === ldat[loaded]),
                        twrap += ldat[expanded] === !1 ? ldat[isLeaf] === !0 ? "'" : $t.p.treeIcons.plus + " tree-plus treeclick'" : ldat[isLeaf] === !0 ? "'" : $t.p.treeIcons.minus + " tree-minus treeclick'",
                        twrap += "></div></div>",
                        $($t.rows[i].cells[expCol]).wrapInner("<span class='cell-wrapper" + lf + "'></span>").prepend(twrap),
                        curLevel !== parseInt($t.p.tree_root_level, 10) && (expan = $($t).jqGrid("isVisibleNode", ldat),
                        expan || $($t.rows[i]).css("display", "none")),
                        $($t.rows[i].cells[expCol]).find("div.treeclick").bind("click", function(e) {
                            var target = e.target || e.srcElement
                              , ind2 = $.jgrid.stripPref($t.p.idPrefix, $(target, $t.rows).closest("tr.jqgrow")[0].id)
                              , pos = $t.p._index[ind2];
                            return $t.p.data[pos][isLeaf] || ($t.p.data[pos][expanded] ? ($($t).jqGrid("collapseRow", $t.p.data[pos]),
                            $($t).jqGrid("collapseNode", $t.p.data[pos])) : ($($t).jqGrid("expandRow", $t.p.data[pos]),
                            $($t).jqGrid("expandNode", $t.p.data[pos]))),
                            !1
                        }),
                        $t.p.ExpandColClick === !0 && $($t.rows[i].cells[expCol]).find("span.cell-wrapper").css("cursor", "pointer").bind("click", function(e) {
                            var target = e.target || e.srcElement
                              , ind2 = $.jgrid.stripPref($t.p.idPrefix, $(target, $t.rows).closest("tr.jqgrow")[0].id)
                              , pos = $t.p._index[ind2];
                            return $t.p.data[pos][isLeaf] || ($t.p.data[pos][expanded] ? ($($t).jqGrid("collapseRow", $t.p.data[pos]),
                            $($t).jqGrid("collapseNode", $t.p.data[pos])) : ($($t).jqGrid("expandRow", $t.p.data[pos]),
                            $($t).jqGrid("expandNode", $t.p.data[pos]))),
                            $($t).jqGrid("setSelection", ind2),
                            !1
                        }),
                        i++
                    }
            })
        },
        setTreeGrid: function() {
            return this.each(function() {
                var pico, nm, key, tkey, $t = this, i = 0, ecol = !1, dupcols = [];
                if ($t.p.treeGrid) {
                    $t.p.treedatatype || $.extend($t.p, {
                        treedatatype: $t.p.datatype
                    }),
                    $t.p.loadonce && ($t.p.treedatatype = "local"),
                    $t.p.subGrid = !1,
                    $t.p.altRows = !1,
                    $t.p.pgbuttons = !1,
                    $t.p.pginput = !1,
                    $t.p.gridview = !0,
                    null === $t.p.rowTotal && ($t.p.rowNum = 1e4),
                    $t.p.multiselect = !1,
                    $t.p.rowList = [],
                    $t.p.expColInd = 0,
                    pico = "ui-icon-triangle-1-" + ("rtl" === $t.p.direction ? "w" : "e"),
                    $t.p.treeIcons = $.extend({
                        plus: pico,
                        minus: "ui-icon-triangle-1-s",
                        leaf: "ui-icon-radio-off"
                    }, $t.p.treeIcons || {}),
                    "nested" === $t.p.treeGridModel ? $t.p.treeReader = $.extend({
                        level_field: "level",
                        left_field: "lft",
                        right_field: "rgt",
                        leaf_field: "isLeaf",
                        expanded_field: "expanded",
                        loaded: "loaded",
                        icon_field: "icon"
                    }, $t.p.treeReader) : "adjacency" === $t.p.treeGridModel && ($t.p.treeReader = $.extend({
                        level_field: "level",
                        parent_id_field: "parent",
                        leaf_field: "isLeaf",
                        expanded_field: "expanded",
                        loaded: "loaded",
                        icon_field: "icon"
                    }, $t.p.treeReader));
                    for (key in $t.p.colModel)
                        if ($t.p.colModel.hasOwnProperty(key)) {
                            nm = $t.p.colModel[key].name,
                            nm !== $t.p.ExpandColumn || ecol || (ecol = !0,
                            $t.p.expColInd = i),
                            i++;
                            for (tkey in $t.p.treeReader)
                                $t.p.treeReader.hasOwnProperty(tkey) && $t.p.treeReader[tkey] === nm && dupcols.push(nm)
                        }
                    $.each($t.p.treeReader, function(j, n) {
                        n && -1 === $.inArray(n, dupcols) && ("leaf_field" === j && ($t.p._treeleafpos = i),
                        i++,
                        $t.p.colNames.push(n),
                        $t.p.colModel.push({
                            name: n,
                            width: 1,
                            hidden: !0,
                            sortable: !1,
                            resizable: !1,
                            hidedlg: !0,
                            editable: !0,
                            search: !1
                        }))
                    })
                }
            })
        },
        expandRow: function(record) {
            this.each(function() {
                var $t = this;
                if ($t.grid && $t.p.treeGrid) {
                    var childern = $($t).jqGrid("getNodeChildren", record)
                      , expanded = $t.p.treeReader.expanded_field;
                    $(childern).each(function() {
                        var id = $t.p.idPrefix + $.jgrid.getAccessor(this, $t.p.localReader.id);
                        $($($t).jqGrid("getGridRowById", id)).css("display", ""),
                        this[expanded] && $($t).jqGrid("expandRow", this)
                    })
                }
            })
        },
        collapseRow: function(record) {
            this.each(function() {
                var $t = this;
                if ($t.grid && $t.p.treeGrid) {
                    var childern = $($t).jqGrid("getNodeChildren", record)
                      , expanded = $t.p.treeReader.expanded_field;
                    $(childern).each(function() {
                        var id = $t.p.idPrefix + $.jgrid.getAccessor(this, $t.p.localReader.id);
                        $($($t).jqGrid("getGridRowById", id)).css("display", "none"),
                        this[expanded] && $($t).jqGrid("collapseRow", this)
                    })
                }
            })
        },
        getRootNodes: function(currentview) {
            var result = [];
            return this.each(function() {
                var level, parent_id, view, $t = this;
                if ($t.grid && $t.p.treeGrid)
                    switch ("boolean" != typeof currentview && (currentview = !1),
                    view = currentview ? $($t).jqGrid("getRowData", null, !0) : $t.p.data,
                    $t.p.treeGridModel) {
                    case "nested":
                        level = $t.p.treeReader.level_field,
                        $(view).each(function() {
                            parseInt(this[level], 10) === parseInt($t.p.tree_root_level, 10) && (currentview ? result.push($t.p.data[$t.p._index[this[$t.p.keyName]]]) : result.push(this))
                        });
                        break;
                    case "adjacency":
                        parent_id = $t.p.treeReader.parent_id_field,
                        $(view).each(function() {
                            null !== this[parent_id] && "null" !== String(this[parent_id]).toLowerCase() || (currentview ? result.push($t.p.data[$t.p._index[this[$t.p.keyName]]]) : result.push(this))
                        })
                    }
            }),
            result
        },
        getNodeDepth: function(rc) {
            var ret = null;
            return this.each(function() {
                if (this.grid && this.p.treeGrid) {
                    var $t = this;
                    switch ($t.p.treeGridModel) {
                    case "nested":
                        var level = $t.p.treeReader.level_field;
                        ret = parseInt(rc[level], 10) - parseInt($t.p.tree_root_level, 10);
                        break;
                    case "adjacency":
                        ret = $($t).jqGrid("getNodeAncestors", rc).length
                    }
                }
            }),
            ret
        },
        getNodeParent: function(rc) {
            var result = null;
            return this.each(function() {
                var $t = this;
                if ($t.grid && $t.p.treeGrid)
                    switch ($t.p.treeGridModel) {
                    case "nested":
                        var lftc = $t.p.treeReader.left_field
                          , rgtc = $t.p.treeReader.right_field
                          , levelc = $t.p.treeReader.level_field
                          , lft = parseInt(rc[lftc], 10)
                          , rgt = parseInt(rc[rgtc], 10)
                          , level = parseInt(rc[levelc], 10);
                        $(this.p.data).each(function() {
                            return parseInt(this[levelc], 10) === level - 1 && parseInt(this[lftc], 10) < lft && parseInt(this[rgtc], 10) > rgt ? (result = this,
                            !1) : void 0
                        });
                        break;
                    case "adjacency":
                        for (var parent_id = $t.p.treeReader.parent_id_field, dtid = $t.p.localReader.id, ind = rc[dtid], pos = $t.p._index[ind]; pos--; )
                            if ($t.p.data[pos][dtid] === $.jgrid.stripPref($t.p.idPrefix, rc[parent_id])) {
                                result = $t.p.data[pos];
                                break
                            }
                    }
            }),
            result
        },
        getNodeChildren: function(rc) {
            var result = [];
            return this.each(function() {
                var $t = this;
                if ($t.grid && $t.p.treeGrid)
                    switch ($t.p.treeGridModel) {
                    case "nested":
                        var lftc = $t.p.treeReader.left_field
                          , rgtc = $t.p.treeReader.right_field
                          , levelc = $t.p.treeReader.level_field
                          , lft = parseInt(rc[lftc], 10)
                          , rgt = parseInt(rc[rgtc], 10)
                          , level = parseInt(rc[levelc], 10);
                        $(this.p.data).each(function() {
                            parseInt(this[levelc], 10) === level + 1 && parseInt(this[lftc], 10) > lft && parseInt(this[rgtc], 10) < rgt && result.push(this)
                        });
                        break;
                    case "adjacency":
                        var parent_id = $t.p.treeReader.parent_id_field
                          , dtid = $t.p.localReader.id;
                        $(this.p.data).each(function() {
                            this[parent_id] == $.jgrid.stripPref($t.p.idPrefix, rc[dtid]) && result.push(this)
                        })
                    }
            }),
            result
        },
        getFullTreeNode: function(rc, expand) {
            var result = [];
            return this.each(function() {
                var len, $t = this, expanded = $t.p.treeReader.expanded_field;
                if ($t.grid && $t.p.treeGrid)
                    switch (null != expand && "boolean" == typeof expand || (expand = !1),
                    $t.p.treeGridModel) {
                    case "nested":
                        var lftc = $t.p.treeReader.left_field
                          , rgtc = $t.p.treeReader.right_field
                          , levelc = $t.p.treeReader.level_field
                          , lft = parseInt(rc[lftc], 10)
                          , rgt = parseInt(rc[rgtc], 10)
                          , level = parseInt(rc[levelc], 10);
                        $(this.p.data).each(function() {
                            parseInt(this[levelc], 10) >= level && parseInt(this[lftc], 10) >= lft && parseInt(this[lftc], 10) <= rgt && (expand && (this[expanded] = !0),
                            result.push(this))
                        });
                        break;
                    case "adjacency":
                        if (rc) {
                            result.push(rc);
                            var parent_id = $t.p.treeReader.parent_id_field
                              , dtid = $t.p.localReader.id;
                            $(this.p.data).each(function(i) {
                                for (len = result.length,
                                i = 0; len > i; i++)
                                    if ($.jgrid.stripPref($t.p.idPrefix, result[i][dtid]) === this[parent_id]) {
                                        expand && (this[expanded] = !0),
                                        result.push(this);
                                        break
                                    }
                            })
                        }
                    }
            }),
            result
        },
        getNodeAncestors: function(rc) {
            var ancestors = [];
            return this.each(function() {
                if (this.grid && this.p.treeGrid)
                    for (var parent = $(this).jqGrid("getNodeParent", rc); parent; )
                        ancestors.push(parent),
                        parent = $(this).jqGrid("getNodeParent", parent)
            }),
            ancestors
        },
        isVisibleNode: function(rc) {
            var result = !0;
            return this.each(function() {
                var $t = this;
                if ($t.grid && $t.p.treeGrid) {
                    var ancestors = $($t).jqGrid("getNodeAncestors", rc)
                      , expanded = $t.p.treeReader.expanded_field;
                    $(ancestors).each(function() {
                        return result = result && this[expanded],
                        result ? void 0 : !1
                    })
                }
            }),
            result
        },
        isNodeLoaded: function(rc) {
            var result;
            return this.each(function() {
                var $t = this;
                if ($t.grid && $t.p.treeGrid) {
                    var isLeaf = $t.p.treeReader.leaf_field
                      , loaded = $t.p.treeReader.loaded;
                    result = void 0 !== rc ? void 0 !== rc[loaded] ? rc[loaded] : !!(rc[isLeaf] || $($t).jqGrid("getNodeChildren", rc).length > 0) : !1
                }
            }),
            result
        },
        expandNode: function(rc) {
            return this.each(function() {
                if (this.grid && this.p.treeGrid) {
                    var expanded = this.p.treeReader.expanded_field
                      , parent = this.p.treeReader.parent_id_field
                      , loaded = this.p.treeReader.loaded
                      , level = this.p.treeReader.level_field
                      , lft = this.p.treeReader.left_field
                      , rgt = this.p.treeReader.right_field;
                    if (!rc[expanded]) {
                        var id = $.jgrid.getAccessor(rc, this.p.localReader.id)
                          , rc1 = $("#" + this.p.idPrefix + $.jgrid.jqID(id), this.grid.bDiv)[0]
                          , position = this.p._index[id];
                        $(this).jqGrid("isNodeLoaded", this.p.data[position]) ? (rc[expanded] = !0,
                        $("div.treeclick", rc1).removeClass(this.p.treeIcons.plus + " tree-plus").addClass(this.p.treeIcons.minus + " tree-minus")) : this.grid.hDiv.loading || (rc[expanded] = !0,
                        $("div.treeclick", rc1).removeClass(this.p.treeIcons.plus + " tree-plus").addClass(this.p.treeIcons.minus + " tree-minus"),
                        this.p.treeANode = rc1.rowIndex,
                        this.p.datatype = this.p.treedatatype,
                        "nested" === this.p.treeGridModel ? $(this).jqGrid("setGridParam", {
                            postData: {
                                nodeid: id,
                                n_left: rc[lft],
                                n_right: rc[rgt],
                                n_level: rc[level]
                            }
                        }) : $(this).jqGrid("setGridParam", {
                            postData: {
                                nodeid: id,
                                parentid: rc[parent],
                                n_level: rc[level]
                            }
                        }),
                        $(this).trigger("reloadGrid"),
                        rc[loaded] = !0,
                        "nested" === this.p.treeGridModel ? $(this).jqGrid("setGridParam", {
                            postData: {
                                nodeid: "",
                                n_left: "",
                                n_right: "",
                                n_level: ""
                            }
                        }) : $(this).jqGrid("setGridParam", {
                            postData: {
                                nodeid: "",
                                parentid: "",
                                n_level: ""
                            }
                        }))
                    }
                }
            })
        },
        collapseNode: function(rc) {
            return this.each(function() {
                if (this.grid && this.p.treeGrid) {
                    var expanded = this.p.treeReader.expanded_field;
                    if (rc[expanded]) {
                        rc[expanded] = !1;
                        var id = $.jgrid.getAccessor(rc, this.p.localReader.id)
                          , rc1 = $("#" + this.p.idPrefix + $.jgrid.jqID(id), this.grid.bDiv)[0];
                        $("div.treeclick", rc1).removeClass(this.p.treeIcons.minus + " tree-minus").addClass(this.p.treeIcons.plus + " tree-plus")
                    }
                }
            })
        },
        SortTree: function(sortname, newDir, st, datefmt) {
            return this.each(function() {
                if (this.grid && this.p.treeGrid) {
                    var i, len, rec, query, roots, records = [], $t = this, rt = $(this).jqGrid("getRootNodes", $t.p.search);
                    for (query = $.jgrid.from.call(this, rt),
                    query.orderBy(sortname, newDir, st, datefmt),
                    roots = query.select(),
                    i = 0,
                    len = roots.length; len > i; i++)
                        rec = roots[i],
                        records.push(rec),
                        $(this).jqGrid("collectChildrenSortTree", records, rec, sortname, newDir, st, datefmt);
                    $.each(records, function(index) {
                        var id = $.jgrid.getAccessor(this, $t.p.localReader.id);
                        $("#" + $.jgrid.jqID($t.p.id) + " tbody tr:eq(" + index + ")").after($("tr#" + $.jgrid.jqID(id), $t.grid.bDiv))
                    }),
                    query = null,
                    roots = null,
                    records = null
                }
            })
        },
        searchTree: function(recs) {
            var i, lid, tid, len = recs.length || 0, res = [], roots = [], result = [];
            return this.each(function() {
                if (this.grid && this.p.treeGrid && len)
                    for (lid = this.p.localReader.id,
                    i = 0; len > i; i++)
                        res = $(this).jqGrid("getNodeAncestors", recs[i]),
                        res.length || res.push(recs[i]),
                        tid = res[res.length - 1][lid],
                        -1 === $.inArray(tid, roots) && (roots.push(tid),
                        res = $(this).jqGrid("getFullTreeNode", res[res.length - 1], !0),
                        result = result.concat(res))
            }),
            result
        },
        collectChildrenSortTree: function(records, rec, sortname, newDir, st, datefmt) {
            return this.each(function() {
                if (this.grid && this.p.treeGrid) {
                    var i, len, child, ch, query, children;
                    for (ch = $(this).jqGrid("getNodeChildren", rec),
                    query = $.jgrid.from.call(this, ch),
                    query.orderBy(sortname, newDir, st, datefmt),
                    children = query.select(),
                    i = 0,
                    len = children.length; len > i; i++)
                        child = children[i],
                        records.push(child),
                        $(this).jqGrid("collectChildrenSortTree", records, child, sortname, newDir, st, datefmt)
                }
            })
        },
        setTreeRow: function(rowid, data) {
            var success = !1;
            return this.each(function() {
                var t = this;
                t.grid && t.p.treeGrid && (success = $(t).jqGrid("setRowData", rowid, data))
            }),
            success
        },
        delTreeNode: function(rowid) {
            return this.each(function() {
                var i, myright, width, res, key, $t = this, rid = $t.p.localReader.id, left = $t.p.treeReader.left_field, right = $t.p.treeReader.right_field;
                if ($t.grid && $t.p.treeGrid) {
                    var rc = $t.p._index[rowid];
                    if (void 0 !== rc) {
                        myright = parseInt($t.p.data[rc][right], 10),
                        width = myright - parseInt($t.p.data[rc][left], 10) + 1;
                        var dr = $($t).jqGrid("getFullTreeNode", $t.p.data[rc]);
                        if (dr.length > 0)
                            for (i = 0; i < dr.length; i++)
                                $($t).jqGrid("delRowData", dr[i][rid]);
                        if ("nested" === $t.p.treeGridModel) {
                            if (res = $.jgrid.from.call($t, $t.p.data).greater(left, myright, {
                                stype: "integer"
                            }).select(),
                            res.length)
                                for (key in res)
                                    res.hasOwnProperty(key) && (res[key][left] = parseInt(res[key][left], 10) - width);
                            if (res = $.jgrid.from.call($t, $t.p.data).greater(right, myright, {
                                stype: "integer"
                            }).select(),
                            res.length)
                                for (key in res)
                                    res.hasOwnProperty(key) && (res[key][right] = parseInt(res[key][right], 10) - width)
                        }
                    }
                }
            })
        },
        addChildNode: function(nodeid, parentid, data, expandData) {
            var $t = this[0];
            if (data) {
                var method, parentindex, parentdata, parentlevel, i, len, leaf, maxright, expanded = $t.p.treeReader.expanded_field, isLeaf = $t.p.treeReader.leaf_field, level = $t.p.treeReader.level_field, parent = $t.p.treeReader.parent_id_field, left = $t.p.treeReader.left_field, right = $t.p.treeReader.right_field, loaded = $t.p.treeReader.loaded, max = 0, rowind = parentid;
                if (void 0 === expandData && (expandData = !1),
                null == nodeid) {
                    if (i = $t.p.data.length - 1,
                    i >= 0)
                        for (; i >= 0; )
                            max = Math.max(max, parseInt($t.p.data[i][$t.p.localReader.id], 10)),
                            i--;
                    nodeid = max + 1
                }
                var prow = $($t).jqGrid("getInd", parentid);
                if (leaf = !1,
                void 0 === parentid || null === parentid || "" === parentid)
                    parentid = null,
                    rowind = null,
                    method = "last",
                    parentlevel = $t.p.tree_root_level,
                    i = $t.p.data.length + 1;
                else {
                    method = "after",
                    parentindex = $t.p._index[parentid],
                    parentdata = $t.p.data[parentindex],
                    parentid = parentdata[$t.p.localReader.id],
                    parentlevel = parseInt(parentdata[level], 10) + 1;
                    var childs = $($t).jqGrid("getFullTreeNode", parentdata);
                    childs.length ? (i = childs[childs.length - 1][$t.p.localReader.id],
                    rowind = i,
                    i = $($t).jqGrid("getInd", rowind) + 1) : i = $($t).jqGrid("getInd", parentid) + 1,
                    parentdata[isLeaf] && (leaf = !0,
                    parentdata[expanded] = !0,
                    $($t.rows[prow]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass($t.p.treeIcons.leaf + " tree-leaf").addClass($t.p.treeIcons.minus + " tree-minus"),
                    $t.p.data[parentindex][isLeaf] = !1,
                    parentdata[loaded] = !0)
                }
                if (len = i + 1,
                void 0 === data[expanded] && (data[expanded] = !1),
                void 0 === data[loaded] && (data[loaded] = !1),
                data[level] = parentlevel,
                void 0 === data[isLeaf] && (data[isLeaf] = !0),
                "adjacency" === $t.p.treeGridModel && (data[parent] = parentid),
                "nested" === $t.p.treeGridModel) {
                    var query, res, key;
                    if (null !== parentid) {
                        if (maxright = parseInt(parentdata[right], 10),
                        query = $.jgrid.from.call($t, $t.p.data),
                        query = query.greaterOrEquals(right, maxright, {
                            stype: "integer"
                        }),
                        res = query.select(),
                        res.length)
                            for (key in res)
                                res.hasOwnProperty(key) && (res[key][left] = res[key][left] > maxright ? parseInt(res[key][left], 10) + 2 : res[key][left],
                                res[key][right] = res[key][right] >= maxright ? parseInt(res[key][right], 10) + 2 : res[key][right]);
                        data[left] = maxright,
                        data[right] = maxright + 1
                    } else {
                        if (maxright = parseInt($($t).jqGrid("getCol", right, !1, "max"), 10),
                        res = $.jgrid.from.call($t, $t.p.data).greater(left, maxright, {
                            stype: "integer"
                        }).select(),
                        res.length)
                            for (key in res)
                                res.hasOwnProperty(key) && (res[key][left] = parseInt(res[key][left], 10) + 2);
                        if (res = $.jgrid.from.call($t, $t.p.data).greater(right, maxright, {
                            stype: "integer"
                        }).select(),
                        res.length)
                            for (key in res)
                                res.hasOwnProperty(key) && (res[key][right] = parseInt(res[key][right], 10) + 2);
                        data[left] = maxright + 1,
                        data[right] = maxright + 2
                    }
                }
                (null === parentid || $($t).jqGrid("isNodeLoaded", parentdata) || leaf) && ($($t).jqGrid("addRowData", nodeid, data, method, rowind),
                $($t).jqGrid("setTreeNode", i, len)),
                parentdata && !parentdata[expanded] && expandData && $($t.rows[prow]).find("div.treeclick").click()
            }
        }
    }),
    $.fn.jqDrag = function(h) {
        return i(this, h, "d")
    }
    ,
    $.fn.jqResize = function(h, ar) {
        return i(this, h, "r", ar)
    }
    ,
    $.jqDnR = {
        dnr: {},
        e: 0,
        drag: function(v) {
            return "d" == M.k ? E.css({
                left: M.X + v.pageX - M.pX,
                top: M.Y + v.pageY - M.pY
            }) : (E.css({
                width: Math.max(v.pageX - M.pX + M.W, 0),
                height: Math.max(v.pageY - M.pY + M.H, 0)
            }),
            M1 && E1.css({
                width: Math.max(v.pageX - M1.pX + M1.W, 0),
                height: Math.max(v.pageY - M1.pY + M1.H, 0)
            })),
            !1
        },
        stop: function() {
            $(document).unbind("mousemove", J.drag).unbind("mouseup", J.stop)
        }
    };
    var J = $.jqDnR, M = J.dnr, E = J.e, E1, M1, i = function(e, h, k, aR) {
        return e.each(function() {
            h = h ? $(h, e) : e,
            h.bind("mousedown", {
                e: e,
                k: k
            }, function(v) {
                var d = v.data
                  , p = {};
                if (E = d.e,
                E1 = aR ? $(aR) : !1,
                "relative" != E.css("position"))
                    try {
                        E.position(p)
                    } catch (e) {}
                if (M = {
                    X: p.left || f("left") || 0,
                    Y: p.top || f("top") || 0,
                    W: f("width") || E[0].scrollWidth || 0,
                    H: f("height") || E[0].scrollHeight || 0,
                    pX: v.pageX,
                    pY: v.pageY,
                    k: d.k
                },
                M1 = E1 && "d" != d.k ? {
                    X: p.left || f1("left") || 0,
                    Y: p.top || f1("top") || 0,
                    W: E1[0].offsetWidth || f1("width") || 0,
                    H: E1[0].offsetHeight || f1("height") || 0,
                    pX: v.pageX,
                    pY: v.pageY,
                    k: d.k
                } : !1,
                $("input.hasDatepicker", E[0])[0])
                    try {
                        $("input.hasDatepicker", E[0]).datepicker("hide")
                    } catch (dpe) {}
                return $(document).mousemove($.jqDnR.drag).mouseup($.jqDnR.stop),
                !1
            })
        })
    }, f = function(k) {
        return parseInt(E.css(k), 10) || !1
    }, f1 = function(k) {
        return parseInt(E1.css(k), 10) || !1
    };
    $.fn.jqm = function(o) {
        var p = {
            overlay: 50,
            closeoverlay: !0,
            overlayClass: "jqmOverlay",
            closeClass: "jqmClose",
            trigger: ".jqModal",
            ajax: F,
            ajaxText: "",
            target: F,
            modal: F,
            toTop: F,
            onShow: F,
            onHide: F,
            onLoad: F
        };
        return this.each(function() {
            return this._jqm ? H[this._jqm].c = $.extend({}, H[this._jqm].c, o) : (s++,
            this._jqm = s,
            H[s] = {
                c: $.extend(p, $.jqm.params, o),
                a: F,
                w: $(this).addClass("jqmID" + s),
                s: s
            },
            void (p.trigger && $(this).jqmAddTrigger(p.trigger)))
        })
    }
    ,
    $.fn.jqmAddClose = function(e) {
        return hs(this, e, "jqmHide")
    }
    ,
    $.fn.jqmAddTrigger = function(e) {
        return hs(this, e, "jqmShow")
    }
    ,
    $.fn.jqmShow = function(t) {
        return this.each(function() {
            $.jqm.open(this._jqm, t)
        })
    }
    ,
    $.fn.jqmHide = function(t) {
        return this.each(function() {
            $.jqm.close(this._jqm, t)
        })
    }
    ,
    $.jqm = {
        hash: {},
        open: function(s, t) {
            var h = H[s]
              , c = h.c
              , cc = "." + c.closeClass
              , z = parseInt(h.w.css("z-index"));
            z = z > 0 ? z : 3e3;
            var o = $("<div></div>").css({
                height: "100%",
                width: "100%",
                position: "fixed",
                left: 0,
                top: 0,
                "z-index": z - 1,
                opacity: c.overlay / 100
            });
            if (h.a)
                return F;
            if (h.t = t,
            h.a = !0,
            h.w.css("z-index", z),
            c.modal ? (A[0] || setTimeout(function() {
                new L("bind")
            }, 1),
            A.push(s)) : c.overlay > 0 ? c.closeoverlay && h.w.jqmAddClose(o) : o = F,
            h.o = o ? o.addClass(c.overlayClass).prependTo("body") : F,
            c.ajax) {
                var r = c.target || h.w
                  , u = c.ajax;
                r = "string" == typeof r ? $(r, h.w) : $(r),
                u = "@" === u.substr(0, 1) ? $(t).attr(u.substring(1)) : u,
                r.html(c.ajaxText).load(u, function() {
                    c.onLoad && c.onLoad.call(this, h),
                    cc && h.w.jqmAddClose($(cc, h.w)),
                    e(h)
                })
            } else
                cc && h.w.jqmAddClose($(cc, h.w));
            return c.toTop && h.o && h.w.before('<span id="jqmP' + h.w[0]._jqm + '"></span>').insertAfter(h.o),
            c.onShow ? c.onShow(h) : h.w.show(),
            e(h),
            F
        },
        close: function(s) {
            var h = H[s];
            return h.a ? (h.a = F,
            A[0] && (A.pop(),
            A[0] || new L("unbind")),
            h.c.toTop && h.o && $("#jqmP" + h.w[0]._jqm).after(h.w).remove(),
            h.c.onHide ? h.c.onHide(h) : (h.w.hide(),
            h.o && h.o.remove()),
            F) : F
        },
        params: {}
    };
    var s = 0
      , H = $.jqm.hash
      , A = []
      , F = !1
      , e = function(h) {
        f(h)
    }
      , f = function(h) {
        try {
            $(":input:visible", h.w)[0].focus()
        } catch (_) {}
    }
      , L = function(t) {
        $(document)[t]("keypress", m)[t]("keydown", m)[t]("mousedown", m)
    }
      , m = function(e) {
        var h = H[A[A.length - 1]]
          , r = !$(e.target).parents(".jqmID" + h.s)[0];
        return r && ($(".jqmID" + h.s).each(function() {
            var $self = $(this)
              , offset = $self.offset();
            return offset.top <= e.pageY && e.pageY <= offset.top + $self.height() && offset.left <= e.pageX && e.pageX <= offset.left + $self.width() ? (r = !1,
            !1) : void 0
        }),
        f(h)),
        !r
    }
      , hs = function(w, t, c) {
        return w.each(function() {
            var s = this._jqm;
            $(t).each(function() {
                this[c] || (this[c] = [],
                $(this).click(function() {
                    for (var i in {
                        jqmShow: 1,
                        jqmHide: 1
                    })
                        for (var s in this[i])
                            H[this[i][s]] && H[this[i][s]].w[i](this);
                    return F
                })),
                this[c].push(s)
            })
        })
    };
    $.fmatter = {},
    $.extend($.fmatter, {
        isBoolean: function(o) {
            return "boolean" == typeof o
        },
        isObject: function(o) {
            return o && ("object" == typeof o || $.isFunction(o)) || !1
        },
        isString: function(o) {
            return "string" == typeof o
        },
        isNumber: function(o) {
            return "number" == typeof o && isFinite(o)
        },
        isValue: function(o) {
            return this.isObject(o) || this.isString(o) || this.isNumber(o) || this.isBoolean(o)
        },
        isEmpty: function(o) {
            return !this.isString(o) && this.isValue(o) ? !1 : this.isValue(o) ? (o = $.trim(o).replace(/\&nbsp\;/gi, "").replace(/\&#160\;/gi, ""),
            "" === o) : !0
        }
    }),
    $.fn.fmatter = function(formatType, cellval, opts, rwd, act) {
        var v = cellval;
        opts = $.extend({}, $.jgrid.getRegional(this, "formatter"), opts);
        try {
            v = $.fn.fmatter[formatType].call(this, cellval, opts, rwd, act)
        } catch (fe) {}
        return v
    }
    ,
    $.fmatter.util = {
        NumberFormat: function(nData, opts) {
            if ($.fmatter.isNumber(nData) || (nData *= 1),
            $.fmatter.isNumber(nData)) {
                var nDotIndex, bNegative = 0 > nData, sOutput = String(nData), sDecimalSeparator = opts.decimalSeparator || ".";
                if ($.fmatter.isNumber(opts.decimalPlaces)) {
                    var nDecimalPlaces = opts.decimalPlaces
                      , nDecimal = Math.pow(10, nDecimalPlaces);
                    if (sOutput = String(Math.round(nData * nDecimal) / nDecimal),
                    nDotIndex = sOutput.lastIndexOf("."),
                    nDecimalPlaces > 0)
                        for (0 > nDotIndex ? (sOutput += sDecimalSeparator,
                        nDotIndex = sOutput.length - 1) : "." !== sDecimalSeparator && (sOutput = sOutput.replace(".", sDecimalSeparator)); sOutput.length - 1 - nDotIndex < nDecimalPlaces; )
                            sOutput += "0"
                }
                if (opts.thousandsSeparator) {
                    var sThousandsSeparator = opts.thousandsSeparator;
                    nDotIndex = sOutput.lastIndexOf(sDecimalSeparator),
                    nDotIndex = nDotIndex > -1 ? nDotIndex : sOutput.length;
                    var i, sNewOutput = sOutput.substring(nDotIndex), nCount = -1;
                    for (i = nDotIndex; i > 0; i--)
                        nCount++,
                        nCount % 3 === 0 && i !== nDotIndex && (!bNegative || i > 1) && (sNewOutput = sThousandsSeparator + sNewOutput),
                        sNewOutput = sOutput.charAt(i - 1) + sNewOutput;
                    sOutput = sNewOutput
                }
                return sOutput = opts.prefix ? opts.prefix + sOutput : sOutput,
                sOutput = opts.suffix ? sOutput + opts.suffix : sOutput
            }
            return nData
        }
    },
    $.fn.fmatter.defaultFormat = function(cellval, opts) {
        return $.fmatter.isValue(cellval) && "" !== cellval ? cellval : opts.defaultValue || "&#160;"
    }
    ,
    $.fn.fmatter.email = function(cellval, opts) {
        return $.fmatter.isEmpty(cellval) ? $.fn.fmatter.defaultFormat(cellval, opts) : '<a href="mailto:' + cellval + '">' + cellval + "</a>"
    }
    ,
    $.fn.fmatter.checkbox = function(cval, opts) {
        var ds, op = $.extend({}, opts.checkbox);
        void 0 !== opts.colModel && void 0 !== opts.colModel.formatoptions && (op = $.extend({}, op, opts.colModel.formatoptions)),
        ds = op.disabled === !0 ? 'disabled="disabled"' : "",
        ($.fmatter.isEmpty(cval) || void 0 === cval) && (cval = $.fn.fmatter.defaultFormat(cval, op)),
        cval = String(cval),
        cval = (cval + "").toLowerCase();
        var bchk = cval.search(/(false|f|0|no|n|off|undefined)/i) < 0 ? " checked='checked' " : "";
        return '<input type="checkbox" ' + bchk + ' value="' + cval + '" offval="no" ' + ds + "/>"
    }
    ,
    $.fn.fmatter.link = function(cellval, opts) {
        var op = {
            target: opts.target
        }
          , target = "";
        return void 0 !== opts.colModel && void 0 !== opts.colModel.formatoptions && (op = $.extend({}, op, opts.colModel.formatoptions)),
        op.target && (target = "target=" + op.target),
        $.fmatter.isEmpty(cellval) ? $.fn.fmatter.defaultFormat(cellval, opts) : "<a " + target + ' href="' + cellval + '">' + cellval + "</a>"
    }
    ,
    $.fn.fmatter.showlink = function(cellval, opts) {
        var idUrl, op = {
            baseLinkUrl: opts.baseLinkUrl,
            showAction: opts.showAction,
            addParam: opts.addParam || "",
            target: opts.target,
            idName: opts.idName
        }, target = "";
        return void 0 !== opts.colModel && void 0 !== opts.colModel.formatoptions && (op = $.extend({}, op, opts.colModel.formatoptions)),
        op.target && (target = "target=" + op.target),
        idUrl = op.baseLinkUrl + op.showAction + "?" + op.idName + "=" + opts.rowId + op.addParam,
        $.fmatter.isString(cellval) || $.fmatter.isNumber(cellval) ? "<a " + target + ' href="' + idUrl + '">' + cellval + "</a>" : $.fn.fmatter.defaultFormat(cellval, opts)
    }
    ,
    $.fn.fmatter.integer = function(cellval, opts) {
        var op = $.extend({}, opts.integer);
        return void 0 !== opts.colModel && void 0 !== opts.colModel.formatoptions && (op = $.extend({}, op, opts.colModel.formatoptions)),
        $.fmatter.isEmpty(cellval) ? op.defaultValue : $.fmatter.util.NumberFormat(cellval, op)
    }
    ,
    $.fn.fmatter.number = function(cellval, opts) {
        var op = $.extend({}, opts.number);
        return void 0 !== opts.colModel && void 0 !== opts.colModel.formatoptions && (op = $.extend({}, op, opts.colModel.formatoptions)),
        $.fmatter.isEmpty(cellval) ? op.defaultValue : $.fmatter.util.NumberFormat(cellval, op)
    }
    ,
    $.fn.fmatter.currency = function(cellval, opts) {
        var op = $.extend({}, opts.currency);
        return void 0 !== opts.colModel && void 0 !== opts.colModel.formatoptions && (op = $.extend({}, op, opts.colModel.formatoptions)),
        $.fmatter.isEmpty(cellval) ? op.defaultValue : $.fmatter.util.NumberFormat(cellval, op)
    }
    ,
    $.fn.fmatter.date = function(cellval, opts, rwd, act) {
        var op = $.extend({}, opts.date);
        return void 0 !== opts.colModel && void 0 !== opts.colModel.formatoptions && (op = $.extend({}, op, opts.colModel.formatoptions)),
        op.reformatAfterEdit || "edit" !== act ? $.fmatter.isEmpty(cellval) ? $.fn.fmatter.defaultFormat(cellval, opts) : $.jgrid.parseDate.call(this, op.srcformat, cellval, op.newformat, op) : $.fn.fmatter.defaultFormat(cellval, opts)
    }
    ,
    $.fn.fmatter.select = function(cellval, opts) {
        cellval = String(cellval);
        var sep, delim, oSelect = !1, ret = [];
        if (void 0 !== opts.colModel.formatoptions ? (oSelect = opts.colModel.formatoptions.value,
        sep = void 0 === opts.colModel.formatoptions.separator ? ":" : opts.colModel.formatoptions.separator,
        delim = void 0 === opts.colModel.formatoptions.delimiter ? ";" : opts.colModel.formatoptions.delimiter) : void 0 !== opts.colModel.editoptions && (oSelect = opts.colModel.editoptions.value,
        sep = void 0 === opts.colModel.editoptions.separator ? ":" : opts.colModel.editoptions.separator,
        delim = void 0 === opts.colModel.editoptions.delimiter ? ";" : opts.colModel.editoptions.delimiter),
        oSelect) {
            var sv, msl = (null != opts.colModel.editoptions && opts.colModel.editoptions.multiple === !0) == !0, scell = [];
            if (msl && (scell = cellval.split(","),
            scell = $.map(scell, function(n) {
                return $.trim(n)
            })),
            $.fmatter.isString(oSelect)) {
                var i, so = oSelect.split(delim), j = 0;
                for (i = 0; i < so.length; i++)
                    if (sv = so[i].split(sep),
                    sv.length > 2 && (sv[1] = $.map(sv, function(n, i) {
                        return i > 0 ? n : void 0
                    }).join(sep)),
                    msl)
                        $.inArray(sv[0], scell) > -1 && (ret[j] = sv[1],
                        j++);
                    else if ($.trim(sv[0]) === $.trim(cellval)) {
                        ret[0] = sv[1];
                        break
                    }
            } else
                $.fmatter.isObject(oSelect) && (msl ? ret = $.map(scell, function(n) {
                    return oSelect[n]
                }) : ret[0] = oSelect[cellval] || "")
        }
        return cellval = ret.join(", "),
        "" === cellval ? $.fn.fmatter.defaultFormat(cellval, opts) : cellval
    }
    ,
    $.fn.fmatter.rowactions = function(act) {
        var $tr = $(this).closest("tr.jqgrow")
          , rid = $tr.attr("id")
          , $id = $(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/, "$1")
          , $grid = $("#" + $id)
          , $t = $grid[0]
          , p = $t.p
          , cm = p.colModel[$.jgrid.getCellIndex(this)]
          , $actionsDiv = cm.frozen ? $("tr#" + rid + " td:eq(" + $.jgrid.getCellIndex(this) + ") > div", $grid) : $(this).parent()
          , op = {
            extraparam: {}
        }
          , saverow = function(rowid, res) {
            $.isFunction(op.afterSave) && op.afterSave.call($t, rowid, res),
            $actionsDiv.find("div.ui-inline-edit,div.ui-inline-del").show(),
            $actionsDiv.find("div.ui-inline-save,div.ui-inline-cancel").hide()
        }
          , restorerow = function(rowid) {
            $.isFunction(op.afterRestore) && op.afterRestore.call($t, rowid),
            $actionsDiv.find("div.ui-inline-edit,div.ui-inline-del").show(),
            $actionsDiv.find("div.ui-inline-save,div.ui-inline-cancel").hide()
        };
        void 0 !== cm.formatoptions && (op = $.extend(op, cm.formatoptions)),
        void 0 !== p.editOptions && (op.editOptions = p.editOptions),
        void 0 !== p.delOptions && (op.delOptions = p.delOptions),
        $tr.hasClass("jqgrid-new-row") && (op.extraparam[p.prmNames.oper] = p.prmNames.addoper);
        var actop = {
            keys: op.keys,
            oneditfunc: op.onEdit,
            successfunc: op.onSuccess,
            url: op.url,
            extraparam: op.extraparam,
            aftersavefunc: saverow,
            errorfunc: op.onError,
            afterrestorefunc: restorerow,
            restoreAfterError: op.restoreAfterError,
            mtype: op.mtype
        };
        switch (act) {
        case "edit":
            $grid.jqGrid("editRow", rid, actop),
            $actionsDiv.find("div.ui-inline-edit,div.ui-inline-del").hide(),
            $actionsDiv.find("div.ui-inline-save,div.ui-inline-cancel").show(),
            $grid.triggerHandler("jqGridAfterGridComplete");
            break;
        case "save":
            $grid.jqGrid("saveRow", rid, actop) && ($actionsDiv.find("div.ui-inline-edit,div.ui-inline-del").show(),
            $actionsDiv.find("div.ui-inline-save,div.ui-inline-cancel").hide(),
            $grid.triggerHandler("jqGridAfterGridComplete"));
            break;
        case "cancel":
            $grid.jqGrid("restoreRow", rid, restorerow),
            $actionsDiv.find("div.ui-inline-edit,div.ui-inline-del").show(),
            $actionsDiv.find("div.ui-inline-save,div.ui-inline-cancel").hide(),
            $grid.triggerHandler("jqGridAfterGridComplete");
            break;
        case "del":
            $grid.jqGrid("delGridRow", rid, op.delOptions);
            break;
        case "formedit":
            $grid.jqGrid("setSelection", rid),
            $grid.jqGrid("editGridRow", rid, op.editOptions)
        }
    }
    ,
    $.fn.fmatter.actions = function(cellval, opts) {
        var ocl, op = {
            keys: !1,
            editbutton: !0,
            delbutton: !0,
            editformbutton: !1
        }, rowid = opts.rowId, str = "", nav = $.jgrid.getRegional(this, "nav");
        return void 0 !== opts.colModel.formatoptions && (op = $.extend(op, opts.colModel.formatoptions)),
        void 0 === rowid || $.fmatter.isEmpty(rowid) ? "" : (op.editformbutton ? (ocl = "id='jEditButton_" + rowid + "' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",
        str += "<div title='" + nav.edittitle + "' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' " + ocl + "><span class='ui-icon ui-icon-pencil'></span></div>") : op.editbutton && (ocl = "id='jEditButton_" + rowid + "' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",
        str += "<div title='" + nav.edittitle + "' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' " + ocl + "><span class='ui-icon ui-icon-pencil'></span></div>"),
        op.delbutton && (ocl = "id='jDeleteButton_" + rowid + "' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",
        str += "<div title='" + nav.deltitle + "' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' " + ocl + "><span class='ui-icon ui-icon-trash'></span></div>"),
        ocl = "id='jSaveButton_" + rowid + "' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",
        str += "<div title='" + nav.savetitle + "' style='float:left;display:none' class='ui-pg-div ui-inline-save' " + ocl + "><span class='ui-icon ui-icon-disk'></span></div>",
        ocl = "id='jCancelButton_" + rowid + "' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",
        str += "<div title='" + nav.canceltitle + "' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' " + ocl + "><span class='ui-icon ui-icon-cancel'></span></div>",
        "<div style='margin-left:8px;'>" + str + "</div>")
    }
    ,
    $.unformat = function(cellval, options, pos, cnt) {
        var ret, sep, formatType = options.colModel.formatter, op = options.colModel.formatoptions || {}, re = /([\.\*\_\'\(\)\{\}\+\?\\])/g, unformatFunc = options.colModel.unformat || $.fn.fmatter[formatType] && $.fn.fmatter[formatType].unformat;
        if (void 0 !== unformatFunc && $.isFunction(unformatFunc))
            ret = unformatFunc.call(this, $(cellval).text(), options, cellval);
        else if (void 0 !== formatType && $.fmatter.isString(formatType)) {
            var stripTag, opts = $.jgrid.getRegional(this, "formatter") || {};
            switch (formatType) {
            case "integer":
                op = $.extend({}, opts.integer, op),
                sep = op.thousandsSeparator.replace(re, "\\$1"),
                stripTag = new RegExp(sep,"g"),
                ret = $(cellval).text().replace(stripTag, "");
                break;
            case "number":
                op = $.extend({}, opts.number, op),
                sep = op.thousandsSeparator.replace(re, "\\$1"),
                stripTag = new RegExp(sep,"g"),
                ret = $(cellval).text().replace(stripTag, "").replace(op.decimalSeparator, ".");
                break;
            case "currency":
                op = $.extend({}, opts.currency, op),
                sep = op.thousandsSeparator.replace(re, "\\$1"),
                stripTag = new RegExp(sep,"g"),
                ret = $(cellval).text(),
                op.prefix && op.prefix.length && (ret = ret.substr(op.prefix.length)),
                op.suffix && op.suffix.length && (ret = ret.substr(0, ret.length - op.suffix.length)),
                ret = ret.replace(stripTag, "").replace(op.decimalSeparator, ".");
                break;
            case "checkbox":
                var cbv = options.colModel.editoptions ? options.colModel.editoptions.value.split(":") : ["Yes", "No"];
                ret = $("input", cellval).is(":checked") ? cbv[0] : cbv[1];
                break;
            case "select":
                ret = $.unformat.select(cellval, options, pos, cnt);
                break;
            case "actions":
                return "";
            default:
                ret = $(cellval).text()
            }
        }
        return void 0 !== ret ? ret : cnt === !0 ? $(cellval).text() : $.jgrid.htmlDecode($(cellval).html())
    }
    ,
    $.unformat.select = function(cellval, options, pos, cnt) {
        var ret = []
          , cell = $(cellval).text();
        if (cnt === !0)
            return cell;
        var op = $.extend({}, void 0 !== options.colModel.formatoptions ? options.colModel.formatoptions : options.colModel.editoptions)
          , sep = void 0 === op.separator ? ":" : op.separator
          , delim = void 0 === op.delimiter ? ";" : op.delimiter;
        if (op.value) {
            var sv, oSelect = op.value, msl = op.multiple === !0, scell = [];
            if (msl && (scell = cell.split(","),
            scell = $.map(scell, function(n) {
                return $.trim(n)
            })),
            $.fmatter.isString(oSelect)) {
                var i, so = oSelect.split(delim), j = 0;
                for (i = 0; i < so.length; i++)
                    if (sv = so[i].split(sep),
                    sv.length > 2 && (sv[1] = $.map(sv, function(n, i) {
                        return i > 0 ? n : void 0
                    }).join(sep)),
                    msl)
                        $.inArray($.trim(sv[1]), scell) > -1 && (ret[j] = sv[0],
                        j++);
                    else if ($.trim(sv[1]) === $.trim(cell)) {
                        ret[0] = sv[0];
                        break
                    }
            } else
                ($.fmatter.isObject(oSelect) || $.isArray(oSelect)) && (msl || (scell[0] = cell),
                ret = $.map(scell, function(n) {
                    var rv;
                    return $.each(oSelect, function(i, val) {
                        return val === n ? (rv = i,
                        !1) : void 0
                    }),
                    void 0 !== rv ? rv : void 0
                }));
            return ret.join(", ")
        }
        return cell || ""
    }
    ,
    $.unformat.date = function(cellval, opts) {
        var op = $.jgrid.getRegional(this, "formatter.date") || {};
        return void 0 !== opts.formatoptions && (op = $.extend({}, op, opts.formatoptions)),
        $.fmatter.isEmpty(cellval) ? $.fn.fmatter.defaultFormat(cellval, opts) : $.jgrid.parseDate.call(this, op.newformat, cellval, op.srcformat, op)
    }
    ,
    window.jqGridUtils = {
        stringify: function(obj) {
            return JSON.stringify(obj, function(key, value) {
                return "function" == typeof value ? value.toString() : value
            })
        },
        parse: function(str) {
            return JSON.parse(str, function(key, value) {
                return "string" == typeof value && -1 !== value.indexOf("function") ? eval("(" + value + ")") : value
            })
        },
        encode: function(text) {
            return String(text).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        },
        jsonToXML: function(tree, options) {
            var o = $.extend({
                xmlDecl: '<?xml version="1.0" encoding="UTF-8" ?>\n',
                attr_prefix: "-",
                encode: !0
            }, options || {})
              , that = this
              , scalarToxml = function(name, text) {
                return "#text" === name ? o.encode ? that.encode(text) : text : "function" == typeof text ? "<" + name + "><![CDATA[" + text + "]]></" + name + ">\n" : "" === text ? "<" + name + ">__EMPTY_STRING_</" + name + ">\n" : "<" + name + ">" + (o.encode ? that.encode(text) : text) + "</" + name + ">\n"
            }
              , arrayToxml = function(name, array) {
                for (var out = [], i = 0; i < array.length; i++) {
                    var val = array[i];
                    "undefined" == typeof val || null == val ? out[out.length] = "<" + name + " />" : "object" == typeof val && val.constructor == Array ? out[out.length] = arrayToxml(name, val) : "object" == typeof val ? out[out.length] = hashToxml(name, val) : out[out.length] = scalarToxml(name, val)
                }
                return out.length || (out[0] = "<" + name + ">__EMPTY_ARRAY_</" + name + ">\n"),
                out.join("")
            }
              , hashToxml = function(name, tree) {
                var elem = []
                  , attr = [];
                for (var key in tree)
                    if (tree.hasOwnProperty(key)) {
                        var val = tree[key];
                        key.charAt(0) !== o.attr_prefix ? null == val ? elem[elem.length] = "<" + key + " />" : "object" == typeof val && val.constructor === Array ? elem[elem.length] = arrayToxml(key, val) : "object" == typeof val ? elem[elem.length] = hashToxml(key, val) : elem[elem.length] = scalarToxml(key, val) : attr[attr.length] = " " + key.substring(1) + '="' + (o.encode ? that.encode(val) : val) + '"'
                    }
                var jattr = attr.join("")
                  , jelem = elem.join("");
                return null == name || (jelem = elem.length > 0 ? jelem.match(/\n/) ? "<" + name + jattr + ">\n" + jelem + "</" + name + ">\n" : "<" + name + jattr + ">" + jelem + "</" + name + ">\n" : "<" + name + jattr + " />\n"),
                jelem
            }
              , xml = hashToxml(null, tree);
            return o.xmlDecl + xml
        },
        xmlToJSON: function(root, options) {
            var o = $.extend({
                force_array: [],
                attr_prefix: "-"
            }, options || {});
            if (root) {
                var __force_array = {};
                if (o.force_array)
                    for (var i = 0; i < o.force_array.length; i++)
                        __force_array[o.force_array[i]] = 1;
                "string" == typeof root && (root = $.parseXML(root)),
                root.documentElement && (root = root.documentElement);
                var addNode = function(hash, key, cnts, val) {
                    if ("string" == typeof val)
                        if (-1 !== val.indexOf("function"))
                            val = eval("(" + val + ")");
                        else
                            switch (val) {
                            case "__EMPTY_ARRAY_":
                                val = [];
                                break;
                            case "__EMPTY_STRING_":
                                val = "";
                                break;
                            case "false":
                                val = !1;
                                break;
                            case "true":
                                val = !0
                            }
                    __force_array[key] ? (1 === cnts && (hash[key] = []),
                    hash[key][hash[key].length] = val) : 1 === cnts ? hash[key] = val : 2 === cnts ? hash[key] = [hash[key], val] : hash[key][hash[key].length] = val
                }
                  , parseElement = function(elem) {
                    if (7 !== elem.nodeType) {
                        if (3 === elem.nodeType || 4 === elem.nodeType) {
                            var bool = elem.nodeValue.match(/[^\x00-\x20]/);
                            if (null == bool)
                                return;
                            return elem.nodeValue
                        }
                        var retval, i, key, val, cnt = {};
                        if (elem.attributes && elem.attributes.length)
                            for (retval = {},
                            i = 0; i < elem.attributes.length; i++)
                                key = elem.attributes[i].nodeName,
                                "string" == typeof key && (val = elem.attributes[i].nodeValue,
                                val && (key = o.attr_prefix + key,
                                "undefined" == typeof cnt[key] && (cnt[key] = 0),
                                cnt[key]++,
                                addNode(retval, key, cnt[key], val)));
                        if (elem.childNodes && elem.childNodes.length) {
                            var textonly = !0;
                            for (retval && (textonly = !1),
                            i = 0; i < elem.childNodes.length && textonly; i++) {
                                var ntype = elem.childNodes[i].nodeType;
                                3 !== ntype && 4 !== ntype && (textonly = !1)
                            }
                            if (textonly)
                                for (retval || (retval = ""),
                                i = 0; i < elem.childNodes.length; i++)
                                    retval += elem.childNodes[i].nodeValue;
                            else
                                for (retval || (retval = {}),
                                i = 0; i < elem.childNodes.length; i++)
                                    key = elem.childNodes[i].nodeName,
                                    "string" == typeof key && (val = parseElement(elem.childNodes[i]),
                                    val && ("undefined" == typeof cnt[key] && (cnt[key] = 0),
                                    cnt[key]++,
                                    addNode(retval, key, cnt[key], val)))
                        }
                        return retval
                    }
                }
                  , json = parseElement(root);
                if (__force_array[root.nodeName] && (json = [json]),
                11 !== root.nodeType) {
                    var tmp = {};
                    tmp[root.nodeName] = json,
                    json = tmp
                }
                return json
            }
        }
    }
}),
function(r, t, g) {
    function u(a, b, h) {
        a.addEventListener ? a.addEventListener(b, h, !1) : a.attachEvent("on" + b, h)
    }
    function y(a) {
        if ("keypress" == a.type) {
            var b = String.fromCharCode(a.which);
            return a.shiftKey || (b = b.toLowerCase()),
            b
        }
        return k[a.which] ? k[a.which] : p[a.which] ? p[a.which] : String.fromCharCode(a.which).toLowerCase()
    }
    function D(a) {
        var b = [];
        return a.shiftKey && b.push("shift"),
        a.altKey && b.push("alt"),
        a.ctrlKey && b.push("ctrl"),
        a.metaKey && b.push("meta"),
        b
    }
    function v(a) {
        return "shift" == a || "ctrl" == a || "alt" == a || "meta" == a
    }
    function z(a, b) {
        var h, c, e, g = [];
        for (h = a,
        "+" === h ? h = ["+"] : (h = h.replace(/\+{2}/g, "+plus"),
        h = h.split("+")),
        e = 0; e < h.length; ++e)
            c = h[e],
            A[c] && (c = A[c]),
            b && "keypress" != b && B[c] && (c = B[c],
            g.push("shift")),
            v(c) && g.push(c);
        if (h = c,
        e = b,
        !e) {
            if (!n) {
                n = {};
                for (var l in k)
                    l > 95 && 112 > l || k.hasOwnProperty(l) && (n[k[l]] = l)
            }
            e = n[h] ? "keydown" : "keypress"
        }
        return "keypress" == e && g.length && (e = "keydown"),
        {
            key: c,
            modifiers: g,
            action: e
        }
    }
    function C(a, b) {
        return null === a || a === t ? !1 : a === b ? !0 : C(a.parentNode, b)
    }
    function c(a) {
        function b(a) {
            a = a || {};
            var m, b = !1;
            for (m in n)
                a[m] ? b = !0 : n[m] = 0;
            b || (w = !1)
        }
        function h(a, b, m, f, c, h) {
            var g, e, k = [], l = m.type;
            if (!d._callbacks[a])
                return [];
            for ("keyup" == l && v(a) && (b = [a]),
            g = 0; g < d._callbacks[a].length; ++g)
                if (e = d._callbacks[a][g],
                (f || !e.seq || n[e.seq] == e.level) && l == e.action) {
                    var q;
                    (q = "keypress" == l && !m.metaKey && !m.ctrlKey) || (q = e.modifiers,
                    q = b.sort().join(",") === q.sort().join(",")),
                    q && (q = f && e.seq == f && e.level == h,
                    (!f && e.combo == c || q) && d._callbacks[a].splice(g, 1),
                    k.push(e))
                }
            return k
        }
        function g(a, b, m, f) {
            d.stopCallback(b, b.target || b.srcElement, m, f) || !1 !== a(b, m) || (b.preventDefault ? b.preventDefault() : b.returnValue = !1,
            b.stopPropagation ? b.stopPropagation() : b.cancelBubble = !0)
        }
        function e(a) {
            "number" != typeof a.which && (a.which = a.keyCode);
            var b = y(a);
            b && ("keyup" == a.type && x === b ? x = !1 : d.handleKey(b, D(a), a))
        }
        function k(a, c, m, f) {
            function e(c) {
                return function() {
                    w = c,
                    ++n[a],
                    clearTimeout(r),
                    r = setTimeout(b, 1e3)
                }
            }
            function h(c) {
                g(m, c, a),
                "keyup" !== f && (x = y(c)),
                setTimeout(b, 10)
            }
            for (var d = n[a] = 0; d < c.length; ++d) {
                var p = d + 1 === c.length ? h : e(f || z(c[d + 1]).action);
                l(c[d], p, f, a, d)
            }
        }
        function l(a, b, c, f, e) {
            d._directMap[a + ":" + c] = b,
            a = a.replace(/\s+/g, " ");
            var g = a.split(" ");
            1 < g.length ? k(a, g, b, c) : (c = z(a, c),
            d._callbacks[c.key] = d._callbacks[c.key] || [],
            h(c.key, c.modifiers, {
                type: c.action
            }, f, a, e),
            d._callbacks[c.key][f ? "unshift" : "push"]({
                callback: b,
                modifiers: c.modifiers,
                action: c.action,
                seq: f,
                level: e,
                combo: a
            }))
        }
        var d = this;
        if (a = a || t,
        !(d instanceof c))
            return new c(a);
        d.target = a,
        d._callbacks = {},
        d._directMap = {};
        var r, n = {}, x = !1, p = !1, w = !1;
        d._handleKey = function(a, c, e) {
            var d, f = h(a, c, e);
            c = {};
            var k = 0
              , l = !1;
            for (d = 0; d < f.length; ++d)
                f[d].seq && (k = Math.max(k, f[d].level));
            for (d = 0; d < f.length; ++d)
                f[d].seq ? f[d].level == k && (l = !0,
                c[f[d].seq] = 1,
                g(f[d].callback, e, f[d].combo, f[d].seq)) : l || g(f[d].callback, e, f[d].combo);
            f = "keypress" == e.type && p,
            e.type != w || v(a) || f || b(c),
            p = l && "keydown" == e.type
        }
        ,
        d._bindMultiple = function(a, b, c) {
            for (var d = 0; d < a.length; ++d)
                l(a[d], b, c)
        }
        ,
        u(a, "keypress", e),
        u(a, "keydown", e),
        u(a, "keyup", e)
    }
    if (r) {
        var n, k = {
            8: "backspace",
            9: "tab",
            13: "enter",
            16: "shift",
            17: "ctrl",
            18: "alt",
            20: "capslock",
            27: "esc",
            32: "space",
            33: "pageup",
            34: "pagedown",
            35: "end",
            36: "home",
            37: "left",
            38: "up",
            39: "right",
            40: "down",
            45: "ins",
            46: "del",
            91: "meta",
            93: "meta",
            224: "meta"
        }, p = {
            106: "*",
            107: "+",
            109: "-",
            110: ".",
            111: "/",
            186: ";",
            187: "=",
            188: ",",
            189: "-",
            190: ".",
            191: "/",
            192: "`",
            219: "[",
            220: "\\",
            221: "]",
            222: "'"
        }, B = {
            "~": "`",
            "!": "1",
            "@": "2",
            "#": "3",
            $: "4",
            "%": "5",
            "^": "6",
            "&": "7",
            "*": "8",
            "(": "9",
            ")": "0",
            _: "-",
            "+": "=",
            ":": ";",
            '"': "'",
            "<": ",",
            ">": ".",
            "?": "/",
            "|": "\\"
        }, A = {
            option: "alt",
            command: "meta",
            "return": "enter",
            escape: "esc",
            plus: "+",
            mod: /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? "meta" : "ctrl"
        };
        for (g = 1; 20 > g; ++g)
            k[111 + g] = "f" + g;
        for (g = 0; 9 >= g; ++g)
            k[g + 96] = g;
        c.prototype.bind = function(a, b, c) {
            return a = a instanceof Array ? a : [a],
            this._bindMultiple.call(this, a, b, c),
            this
        }
        ,
        c.prototype.unbind = function(a, b) {
            return this.bind.call(this, a, function() {}, b)
        }
        ,
        c.prototype.trigger = function(a, b) {
            return this._directMap[a + ":" + b] && this._directMap[a + ":" + b]({}, a),
            this
        }
        ,
        c.prototype.reset = function() {
            return this._callbacks = {},
            this._directMap = {},
            this
        }
        ,
        c.prototype.stopCallback = function(a, b) {
            return -1 < (" " + b.className + " ").indexOf(" mousetrap ") || C(b, this.target) ? !1 : "INPUT" == b.tagName || "SELECT" == b.tagName || "TEXTAREA" == b.tagName || b.isContentEditable
        }
        ,
        c.prototype.handleKey = function() {
            return this._handleKey.apply(this, arguments)
        }
        ,
        c.addKeycodes = function(a) {
            for (var b in a)
                a.hasOwnProperty(b) && (k[b] = a[b]);
            n = null
        }
        ,
        c.init = function() {
            var b, a = c(t);
            for (b in a)
                "_" !== b.charAt(0) && (c[b] = function(b) {
                    return function() {
                        return a[b].apply(a, arguments)
                    }
                }(b))
        }
        ,
        c.init(),
        r.Mousetrap = c,
        "undefined" != typeof module && module.exports && (module.exports = c),
        "function" == typeof define && define.amd && define(function() {
            return c
        })
    }
}("undefined" != typeof window ? window : null, "undefined" != typeof window ? document : null),
!function(e) {
    if ("object" == typeof exports && "undefined" != typeof module)
        module.exports = e();
    else if ("function" == typeof define && define.amd)
        define([], e);
    else {
        var t;
        t = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this,
        t.SimpleMDE = e()
    }
}(function() {
    var e;
    return function t(e, n, r) {
        function i(a, l) {
            if (!n[a]) {
                if (!e[a]) {
                    var s = "function" == typeof require && require;
                    if (!l && s)
                        return s(a, !0);
                    if (o)
                        return o(a, !0);
                    var c = new Error("Cannot find module '" + a + "'");
                    throw c.code = "MODULE_NOT_FOUND",
                    c
                }
                var u = n[a] = {
                    exports: {}
                };
                e[a][0].call(u.exports, function(t) {
                    var n = e[a][1][t];
                    return i(n ? n : t)
                }, u, u.exports, t, e, n, r)
            }
            return n[a].exports
        }
        for (var o = "function" == typeof require && require, a = 0; a < r.length; a++)
            i(r[a]);
        return i
    }({
        1: [function(e, t, n) {
            "use strict";
            function r() {
                for (var e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", t = 0, n = e.length; n > t; ++t)
                    s[t] = e[t],
                    c[e.charCodeAt(t)] = t;
                c["-".charCodeAt(0)] = 62,
                c["_".charCodeAt(0)] = 63
            }
            function i(e) {
                var t, n, r, i, o, a, l = e.length;
                if (l % 4 > 0)
                    throw new Error("Invalid string. Length must be a multiple of 4");
                o = "=" === e[l - 2] ? 2 : "=" === e[l - 1] ? 1 : 0,
                a = new u(3 * l / 4 - o),
                r = o > 0 ? l - 4 : l;
                var s = 0;
                for (t = 0,
                n = 0; r > t; t += 4,
                n += 3)
                    i = c[e.charCodeAt(t)] << 18 | c[e.charCodeAt(t + 1)] << 12 | c[e.charCodeAt(t + 2)] << 6 | c[e.charCodeAt(t + 3)],
                    a[s++] = i >> 16 & 255,
                    a[s++] = i >> 8 & 255,
                    a[s++] = 255 & i;
                return 2 === o ? (i = c[e.charCodeAt(t)] << 2 | c[e.charCodeAt(t + 1)] >> 4,
                a[s++] = 255 & i) : 1 === o && (i = c[e.charCodeAt(t)] << 10 | c[e.charCodeAt(t + 1)] << 4 | c[e.charCodeAt(t + 2)] >> 2,
                a[s++] = i >> 8 & 255,
                a[s++] = 255 & i),
                a
            }
            function o(e) {
                return s[e >> 18 & 63] + s[e >> 12 & 63] + s[e >> 6 & 63] + s[63 & e]
            }
            function a(e, t, n) {
                for (var r, i = [], a = t; n > a; a += 3)
                    r = (e[a] << 16) + (e[a + 1] << 8) + e[a + 2],
                    i.push(o(r));
                return i.join("")
            }
            function l(e) {
                for (var t, n = e.length, r = n % 3, i = "", o = [], l = 16383, c = 0, u = n - r; u > c; c += l)
                    o.push(a(e, c, c + l > u ? u : c + l));
                return 1 === r ? (t = e[n - 1],
                i += s[t >> 2],
                i += s[t << 4 & 63],
                i += "==") : 2 === r && (t = (e[n - 2] << 8) + e[n - 1],
                i += s[t >> 10],
                i += s[t >> 4 & 63],
                i += s[t << 2 & 63],
                i += "="),
                o.push(i),
                o.join("")
            }
            n.toByteArray = i,
            n.fromByteArray = l;
            var s = []
              , c = []
              , u = "undefined" != typeof Uint8Array ? Uint8Array : Array;
            r()
        }
        , {}],
        2: [function() {}
        , {}],
        3: [function(e, t, n) {
            (function(t) {
                "use strict";
                function r() {
                    try {
                        var e = new Uint8Array(1);
                        return e.foo = function() {
                            return 42
                        }
                        ,
                        42 === e.foo() && "function" == typeof e.subarray && 0 === e.subarray(1, 1).byteLength
                    } catch (t) {
                        return !1
                    }
                }
                function i() {
                    return a.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823
                }
                function o(e, t) {
                    if (i() < t)
                        throw new RangeError("Invalid typed array length");
                    return a.TYPED_ARRAY_SUPPORT ? (e = new Uint8Array(t),
                    e.__proto__ = a.prototype) : (null === e && (e = new a(t)),
                    e.length = t),
                    e
                }
                function a(e, t, n) {
                    if (!(a.TYPED_ARRAY_SUPPORT || this instanceof a))
                        return new a(e,t,n);
                    if ("number" == typeof e) {
                        if ("string" == typeof t)
                            throw new Error("If encoding is specified then the first argument must be a string");
                        return u(this, e)
                    }
                    return l(this, e, t, n)
                }
                function l(e, t, n, r) {
                    if ("number" == typeof t)
                        throw new TypeError('"value" argument must not be a number');
                    return "undefined" != typeof ArrayBuffer && t instanceof ArrayBuffer ? d(e, t, n, r) : "string" == typeof t ? f(e, t, n) : p(e, t)
                }
                function s(e) {
                    if ("number" != typeof e)
                        throw new TypeError('"size" argument must be a number')
                }
                function c(e, t, n, r) {
                    return s(t),
                    0 >= t ? o(e, t) : void 0 !== n ? "string" == typeof r ? o(e, t).fill(n, r) : o(e, t).fill(n) : o(e, t)
                }
                function u(e, t) {
                    if (s(t),
                    e = o(e, 0 > t ? 0 : 0 | m(t)),
                    !a.TYPED_ARRAY_SUPPORT)
                        for (var n = 0; t > n; n++)
                            e[n] = 0;
                    return e
                }
                function f(e, t, n) {
                    if ("string" == typeof n && "" !== n || (n = "utf8"),
                    !a.isEncoding(n))
                        throw new TypeError('"encoding" must be a valid string encoding');
                    var r = 0 | v(t, n);
                    return e = o(e, r),
                    e.write(t, n),
                    e
                }
                function h(e, t) {
                    var n = 0 | m(t.length);
                    e = o(e, n);
                    for (var r = 0; n > r; r += 1)
                        e[r] = 255 & t[r];
                    return e
                }
                function d(e, t, n, r) {
                    if (t.byteLength,
                    0 > n || t.byteLength < n)
                        throw new RangeError("'offset' is out of bounds");
                    if (t.byteLength < n + (r || 0))
                        throw new RangeError("'length' is out of bounds");
                    return t = void 0 === r ? new Uint8Array(t,n) : new Uint8Array(t,n,r),
                    a.TYPED_ARRAY_SUPPORT ? (e = t,
                    e.__proto__ = a.prototype) : e = h(e, t),
                    e
                }
                function p(e, t) {
                    if (a.isBuffer(t)) {
                        var n = 0 | m(t.length);
                        return e = o(e, n),
                        0 === e.length ? e : (t.copy(e, 0, 0, n),
                        e)
                    }
                    if (t) {
                        if ("undefined" != typeof ArrayBuffer && t.buffer instanceof ArrayBuffer || "length"in t)
                            return "number" != typeof t.length || K(t.length) ? o(e, 0) : h(e, t);
                        if ("Buffer" === t.type && J(t.data))
                            return h(e, t.data)
                    }
                    throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")
                }
                function m(e) {
                    if (e >= i())
                        throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + i().toString(16) + " bytes");
                    return 0 | e
                }
                function g(e) {
                    return +e != e && (e = 0),
                    a.alloc(+e)
                }
                function v(e, t) {
                    if (a.isBuffer(e))
                        return e.length;
                    if ("undefined" != typeof ArrayBuffer && "function" == typeof ArrayBuffer.isView && (ArrayBuffer.isView(e) || e instanceof ArrayBuffer))
                        return e.byteLength;
                    "string" != typeof e && (e = "" + e);
                    var n = e.length;
                    if (0 === n)
                        return 0;
                    for (var r = !1; ; )
                        switch (t) {
                        case "ascii":
                        case "binary":
                        case "raw":
                        case "raws":
                            return n;
                        case "utf8":
                        case "utf-8":
                        case void 0:
                            return q(e).length;
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                            return 2 * n;
                        case "hex":
                            return n >>> 1;
                        case "base64":
                            return $(e).length;
                        default:
                            if (r)
                                return q(e).length;
                            t = ("" + t).toLowerCase(),
                            r = !0
                        }
                }
                function y(e, t, n) {
                    var r = !1;
                    if ((void 0 === t || 0 > t) && (t = 0),
                    t > this.length)
                        return "";
                    if ((void 0 === n || n > this.length) && (n = this.length),
                    0 >= n)
                        return "";
                    if (n >>>= 0,
                    t >>>= 0,
                    t >= n)
                        return "";
                    for (e || (e = "utf8"); ; )
                        switch (e) {
                        case "hex":
                            return I(this, t, n);
                        case "utf8":
                        case "utf-8":
                            return N(this, t, n);
                        case "ascii":
                            return E(this, t, n);
                        case "binary":
                            return O(this, t, n);
                        case "base64":
                            return M(this, t, n);
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                            return P(this, t, n);
                        default:
                            if (r)
                                throw new TypeError("Unknown encoding: " + e);
                            e = (e + "").toLowerCase(),
                            r = !0
                        }
                }
                function x(e, t, n) {
                    var r = e[t];
                    e[t] = e[n],
                    e[n] = r
                }
                function b(e, t, n, r) {
                    function i(e, t) {
                        return 1 === o ? e[t] : e.readUInt16BE(t * o)
                    }
                    var o = 1
                      , a = e.length
                      , l = t.length;
                    if (void 0 !== r && (r = String(r).toLowerCase(),
                    "ucs2" === r || "ucs-2" === r || "utf16le" === r || "utf-16le" === r)) {
                        if (e.length < 2 || t.length < 2)
                            return -1;
                        o = 2,
                        a /= 2,
                        l /= 2,
                        n /= 2
                    }
                    for (var s = -1, c = 0; a > n + c; c++)
                        if (i(e, n + c) === i(t, -1 === s ? 0 : c - s)) {
                            if (-1 === s && (s = c),
                            c - s + 1 === l)
                                return (n + s) * o
                        } else
                            -1 !== s && (c -= c - s),
                            s = -1;
                    return -1
                }
                function w(e, t, n, r) {
                    n = Number(n) || 0;
                    var i = e.length - n;
                    r ? (r = Number(r),
                    r > i && (r = i)) : r = i;
                    var o = t.length;
                    if (o % 2 !== 0)
                        throw new Error("Invalid hex string");
                    r > o / 2 && (r = o / 2);
                    for (var a = 0; r > a; a++) {
                        var l = parseInt(t.substr(2 * a, 2), 16);
                        if (isNaN(l))
                            return a;
                        e[n + a] = l
                    }
                    return a
                }
                function k(e, t, n, r) {
                    return V(q(t, e.length - n), e, n, r)
                }
                function S(e, t, n, r) {
                    return V(G(t), e, n, r)
                }
                function C(e, t, n, r) {
                    return S(e, t, n, r)
                }
                function L(e, t, n, r) {
                    return V($(t), e, n, r)
                }
                function T(e, t, n, r) {
                    return V(Y(t, e.length - n), e, n, r)
                }
                function M(e, t, n) {
                    return 0 === t && n === e.length ? X.fromByteArray(e) : X.fromByteArray(e.slice(t, n))
                }
                function N(e, t, n) {
                    n = Math.min(e.length, n);
                    for (var r = [], i = t; n > i; ) {
                        var o = e[i]
                          , a = null
                          , l = o > 239 ? 4 : o > 223 ? 3 : o > 191 ? 2 : 1;
                        if (n >= i + l) {
                            var s, c, u, f;
                            switch (l) {
                            case 1:
                                128 > o && (a = o);
                                break;
                            case 2:
                                s = e[i + 1],
                                128 === (192 & s) && (f = (31 & o) << 6 | 63 & s,
                                f > 127 && (a = f));
                                break;
                            case 3:
                                s = e[i + 1],
                                c = e[i + 2],
                                128 === (192 & s) && 128 === (192 & c) && (f = (15 & o) << 12 | (63 & s) << 6 | 63 & c,
                                f > 2047 && (55296 > f || f > 57343) && (a = f));
                                break;
                            case 4:
                                s = e[i + 1],
                                c = e[i + 2],
                                u = e[i + 3],
                                128 === (192 & s) && 128 === (192 & c) && 128 === (192 & u) && (f = (15 & o) << 18 | (63 & s) << 12 | (63 & c) << 6 | 63 & u,
                                f > 65535 && 1114112 > f && (a = f))
                            }
                        }
                        null === a ? (a = 65533,
                        l = 1) : a > 65535 && (a -= 65536,
                        r.push(a >>> 10 & 1023 | 55296),
                        a = 56320 | 1023 & a),
                        r.push(a),
                        i += l
                    }
                    return A(r)
                }
                function A(e) {
                    var t = e.length;
                    if (Q >= t)
                        return String.fromCharCode.apply(String, e);
                    for (var n = "", r = 0; t > r; )
                        n += String.fromCharCode.apply(String, e.slice(r, r += Q));
                    return n
                }
                function E(e, t, n) {
                    var r = "";
                    n = Math.min(e.length, n);
                    for (var i = t; n > i; i++)
                        r += String.fromCharCode(127 & e[i]);
                    return r
                }
                function O(e, t, n) {
                    var r = "";
                    n = Math.min(e.length, n);
                    for (var i = t; n > i; i++)
                        r += String.fromCharCode(e[i]);
                    return r
                }
                function I(e, t, n) {
                    var r = e.length;
                    (!t || 0 > t) && (t = 0),
                    (!n || 0 > n || n > r) && (n = r);
                    for (var i = "", o = t; n > o; o++)
                        i += U(e[o]);
                    return i
                }
                function P(e, t, n) {
                    for (var r = e.slice(t, n), i = "", o = 0; o < r.length; o += 2)
                        i += String.fromCharCode(r[o] + 256 * r[o + 1]);
                    return i
                }
                function R(e, t, n) {
                    if (e % 1 !== 0 || 0 > e)
                        throw new RangeError("offset is not uint");
                    if (e + t > n)
                        throw new RangeError("Trying to access beyond buffer length")
                }
                function D(e, t, n, r, i, o) {
                    if (!a.isBuffer(e))
                        throw new TypeError('"buffer" argument must be a Buffer instance');
                    if (t > i || o > t)
                        throw new RangeError('"value" argument is out of bounds');
                    if (n + r > e.length)
                        throw new RangeError("Index out of range")
                }
                function H(e, t, n, r) {
                    0 > t && (t = 65535 + t + 1);
                    for (var i = 0, o = Math.min(e.length - n, 2); o > i; i++)
                        e[n + i] = (t & 255 << 8 * (r ? i : 1 - i)) >>> 8 * (r ? i : 1 - i)
                }
                function W(e, t, n, r) {
                    0 > t && (t = 4294967295 + t + 1);
                    for (var i = 0, o = Math.min(e.length - n, 4); o > i; i++)
                        e[n + i] = t >>> 8 * (r ? i : 3 - i) & 255
                }
                function B(e, t, n, r) {
                    if (n + r > e.length)
                        throw new RangeError("Index out of range");
                    if (0 > n)
                        throw new RangeError("Index out of range")
                }
                function _(e, t, n, r, i) {
                    return i || B(e, t, n, 4, 3.4028234663852886e38, -3.4028234663852886e38),
                    Z.write(e, t, n, r, 23, 4),
                    n + 4
                }
                function F(e, t, n, r, i) {
                    return i || B(e, t, n, 8, 1.7976931348623157e308, -1.7976931348623157e308),
                    Z.write(e, t, n, r, 52, 8),
                    n + 8
                }
                function z(e) {
                    if (e = j(e).replace(ee, ""),
                    e.length < 2)
                        return "";
                    for (; e.length % 4 !== 0; )
                        e += "=";
                    return e
                }
                function j(e) {
                    return e.trim ? e.trim() : e.replace(/^\s+|\s+$/g, "")
                }
                function U(e) {
                    return 16 > e ? "0" + e.toString(16) : e.toString(16)
                }
                function q(e, t) {
                    t = t || 1 / 0;
                    for (var n, r = e.length, i = null, o = [], a = 0; r > a; a++) {
                        if (n = e.charCodeAt(a),
                        n > 55295 && 57344 > n) {
                            if (!i) {
                                if (n > 56319) {
                                    (t -= 3) > -1 && o.push(239, 191, 189);
                                    continue
                                }
                                if (a + 1 === r) {
                                    (t -= 3) > -1 && o.push(239, 191, 189);
                                    continue
                                }
                                i = n;
                                continue
                            }
                            if (56320 > n) {
                                (t -= 3) > -1 && o.push(239, 191, 189),
                                i = n;
                                continue
                            }
                            n = (i - 55296 << 10 | n - 56320) + 65536
                        } else
                            i && (t -= 3) > -1 && o.push(239, 191, 189);
                        if (i = null,
                        128 > n) {
                            if ((t -= 1) < 0)
                                break;
                            o.push(n)
                        } else if (2048 > n) {
                            if ((t -= 2) < 0)
                                break;
                            o.push(n >> 6 | 192, 63 & n | 128)
                        } else if (65536 > n) {
                            if ((t -= 3) < 0)
                                break;
                            o.push(n >> 12 | 224, n >> 6 & 63 | 128, 63 & n | 128)
                        } else {
                            if (!(1114112 > n))
                                throw new Error("Invalid code point");
                            if ((t -= 4) < 0)
                                break;
                            o.push(n >> 18 | 240, n >> 12 & 63 | 128, n >> 6 & 63 | 128, 63 & n | 128)
                        }
                    }
                    return o
                }
                function G(e) {
                    for (var t = [], n = 0; n < e.length; n++)
                        t.push(255 & e.charCodeAt(n));
                    return t
                }
                function Y(e, t) {
                    for (var n, r, i, o = [], a = 0; a < e.length && !((t -= 2) < 0); a++)
                        n = e.charCodeAt(a),
                        r = n >> 8,
                        i = n % 256,
                        o.push(i),
                        o.push(r);
                    return o
                }
                function $(e) {
                    return X.toByteArray(z(e))
                }
                function V(e, t, n, r) {
                    for (var i = 0; r > i && !(i + n >= t.length || i >= e.length); i++)
                        t[i + n] = e[i];
                    return i
                }
                function K(e) {
                    return e !== e
                }
                var X = e("base64-js")
                  , Z = e("ieee754")
                  , J = e("isarray");
                n.Buffer = a,
                n.SlowBuffer = g,
                n.INSPECT_MAX_BYTES = 50,
                a.TYPED_ARRAY_SUPPORT = void 0 !== t.TYPED_ARRAY_SUPPORT ? t.TYPED_ARRAY_SUPPORT : r(),
                n.kMaxLength = i(),
                a.poolSize = 8192,
                a._augment = function(e) {
                    return e.__proto__ = a.prototype,
                    e
                }
                ,
                a.from = function(e, t, n) {
                    return l(null, e, t, n)
                }
                ,
                a.TYPED_ARRAY_SUPPORT && (a.prototype.__proto__ = Uint8Array.prototype,
                a.__proto__ = Uint8Array,
                "undefined" != typeof Symbol && Symbol.species && a[Symbol.species] === a && Object.defineProperty(a, Symbol.species, {
                    value: null,
                    configurable: !0
                })),
                a.alloc = function(e, t, n) {
                    return c(null, e, t, n)
                }
                ,
                a.allocUnsafe = function(e) {
                    return u(null, e)
                }
                ,
                a.allocUnsafeSlow = function(e) {
                    return u(null, e)
                }
                ,
                a.isBuffer = function(e) {
                    return !(null == e || !e._isBuffer)
                }
                ,
                a.compare = function(e, t) {
                    if (!a.isBuffer(e) || !a.isBuffer(t))
                        throw new TypeError("Arguments must be Buffers");
                    if (e === t)
                        return 0;
                    for (var n = e.length, r = t.length, i = 0, o = Math.min(n, r); o > i; ++i)
                        if (e[i] !== t[i]) {
                            n = e[i],
                            r = t[i];
                            break
                        }
                    return r > n ? -1 : n > r ? 1 : 0
                }
                ,
                a.isEncoding = function(e) {
                    switch (String(e).toLowerCase()) {
                    case "hex":
                    case "utf8":
                    case "utf-8":
                    case "ascii":
                    case "binary":
                    case "base64":
                    case "raw":
                    case "ucs2":
                    case "ucs-2":
                    case "utf16le":
                    case "utf-16le":
                        return !0;
                    default:
                        return !1
                    }
                }
                ,
                a.concat = function(e, t) {
                    if (!J(e))
                        throw new TypeError('"list" argument must be an Array of Buffers');
                    if (0 === e.length)
                        return a.alloc(0);
                    var n;
                    if (void 0 === t)
                        for (t = 0,
                        n = 0; n < e.length; n++)
                            t += e[n].length;
                    var r = a.allocUnsafe(t)
                      , i = 0;
                    for (n = 0; n < e.length; n++) {
                        var o = e[n];
                        if (!a.isBuffer(o))
                            throw new TypeError('"list" argument must be an Array of Buffers');
                        o.copy(r, i),
                        i += o.length
                    }
                    return r
                }
                ,
                a.byteLength = v,
                a.prototype._isBuffer = !0,
                a.prototype.swap16 = function() {
                    var e = this.length;
                    if (e % 2 !== 0)
                        throw new RangeError("Buffer size must be a multiple of 16-bits");
                    for (var t = 0; e > t; t += 2)
                        x(this, t, t + 1);
                    return this
                }
                ,
                a.prototype.swap32 = function() {
                    var e = this.length;
                    if (e % 4 !== 0)
                        throw new RangeError("Buffer size must be a multiple of 32-bits");
                    for (var t = 0; e > t; t += 4)
                        x(this, t, t + 3),
                        x(this, t + 1, t + 2);
                    return this
                }
                ,
                a.prototype.toString = function() {
                    var e = 0 | this.length;
                    return 0 === e ? "" : 0 === arguments.length ? N(this, 0, e) : y.apply(this, arguments)
                }
                ,
                a.prototype.equals = function(e) {
                    if (!a.isBuffer(e))
                        throw new TypeError("Argument must be a Buffer");
                    return this === e ? !0 : 0 === a.compare(this, e)
                }
                ,
                a.prototype.inspect = function() {
                    var e = ""
                      , t = n.INSPECT_MAX_BYTES;
                    return this.length > 0 && (e = this.toString("hex", 0, t).match(/.{2}/g).join(" "),
                    this.length > t && (e += " ... ")),
                    "<Buffer " + e + ">"
                }
                ,
                a.prototype.compare = function(e, t, n, r, i) {
                    if (!a.isBuffer(e))
                        throw new TypeError("Argument must be a Buffer");
                    if (void 0 === t && (t = 0),
                    void 0 === n && (n = e ? e.length : 0),
                    void 0 === r && (r = 0),
                    void 0 === i && (i = this.length),
                    0 > t || n > e.length || 0 > r || i > this.length)
                        throw new RangeError("out of range index");
                    if (r >= i && t >= n)
                        return 0;
                    if (r >= i)
                        return -1;
                    if (t >= n)
                        return 1;
                    if (t >>>= 0,
                    n >>>= 0,
                    r >>>= 0,
                    i >>>= 0,
                    this === e)
                        return 0;
                    for (var o = i - r, l = n - t, s = Math.min(o, l), c = this.slice(r, i), u = e.slice(t, n), f = 0; s > f; ++f)
                        if (c[f] !== u[f]) {
                            o = c[f],
                            l = u[f];
                            break
                        }
                    return l > o ? -1 : o > l ? 1 : 0
                }
                ,
                a.prototype.indexOf = function(e, t, n) {
                    if ("string" == typeof t ? (n = t,
                    t = 0) : t > 2147483647 ? t = 2147483647 : -2147483648 > t && (t = -2147483648),
                    t >>= 0,
                    0 === this.length)
                        return -1;
                    if (t >= this.length)
                        return -1;
                    if (0 > t && (t = Math.max(this.length + t, 0)),
                    "string" == typeof e && (e = a.from(e, n)),
                    a.isBuffer(e))
                        return 0 === e.length ? -1 : b(this, e, t, n);
                    if ("number" == typeof e)
                        return a.TYPED_ARRAY_SUPPORT && "function" === Uint8Array.prototype.indexOf ? Uint8Array.prototype.indexOf.call(this, e, t) : b(this, [e], t, n);
                    throw new TypeError("val must be string, number or Buffer")
                }
                ,
                a.prototype.includes = function(e, t, n) {
                    return -1 !== this.indexOf(e, t, n)
                }
                ,
                a.prototype.write = function(e, t, n, r) {
                    if (void 0 === t)
                        r = "utf8",
                        n = this.length,
                        t = 0;
                    else if (void 0 === n && "string" == typeof t)
                        r = t,
                        n = this.length,
                        t = 0;
                    else {
                        if (!isFinite(t))
                            throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
                        t = 0 | t,
                        isFinite(n) ? (n = 0 | n,
                        void 0 === r && (r = "utf8")) : (r = n,
                        n = void 0)
                    }
                    var i = this.length - t;
                    if ((void 0 === n || n > i) && (n = i),
                    e.length > 0 && (0 > n || 0 > t) || t > this.length)
                        throw new RangeError("Attempt to write outside buffer bounds");
                    r || (r = "utf8");
                    for (var o = !1; ; )
                        switch (r) {
                        case "hex":
                            return w(this, e, t, n);
                        case "utf8":
                        case "utf-8":
                            return k(this, e, t, n);
                        case "ascii":
                            return S(this, e, t, n);
                        case "binary":
                            return C(this, e, t, n);
                        case "base64":
                            return L(this, e, t, n);
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                            return T(this, e, t, n);
                        default:
                            if (o)
                                throw new TypeError("Unknown encoding: " + r);
                            r = ("" + r).toLowerCase(),
                            o = !0
                        }
                }
                ,
                a.prototype.toJSON = function() {
                    return {
                        type: "Buffer",
                        data: Array.prototype.slice.call(this._arr || this, 0)
                    }
                }
                ;
                var Q = 4096;
                a.prototype.slice = function(e, t) {
                    var n = this.length;
                    e = ~~e,
                    t = void 0 === t ? n : ~~t,
                    0 > e ? (e += n,
                    0 > e && (e = 0)) : e > n && (e = n),
                    0 > t ? (t += n,
                    0 > t && (t = 0)) : t > n && (t = n),
                    e > t && (t = e);
                    var r;
                    if (a.TYPED_ARRAY_SUPPORT)
                        r = this.subarray(e, t),
                        r.__proto__ = a.prototype;
                    else {
                        var i = t - e;
                        r = new a(i,void 0);
                        for (var o = 0; i > o; o++)
                            r[o] = this[o + e]
                    }
                    return r
                }
                ,
                a.prototype.readUIntLE = function(e, t, n) {
                    e = 0 | e,
                    t = 0 | t,
                    n || R(e, t, this.length);
                    for (var r = this[e], i = 1, o = 0; ++o < t && (i *= 256); )
                        r += this[e + o] * i;
                    return r
                }
                ,
                a.prototype.readUIntBE = function(e, t, n) {
                    e = 0 | e,
                    t = 0 | t,
                    n || R(e, t, this.length);
                    for (var r = this[e + --t], i = 1; t > 0 && (i *= 256); )
                        r += this[e + --t] * i;
                    return r
                }
                ,
                a.prototype.readUInt8 = function(e, t) {
                    return t || R(e, 1, this.length),
                    this[e]
                }
                ,
                a.prototype.readUInt16LE = function(e, t) {
                    return t || R(e, 2, this.length),
                    this[e] | this[e + 1] << 8
                }
                ,
                a.prototype.readUInt16BE = function(e, t) {
                    return t || R(e, 2, this.length),
                    this[e] << 8 | this[e + 1]
                }
                ,
                a.prototype.readUInt32LE = function(e, t) {
                    return t || R(e, 4, this.length),
                    (this[e] | this[e + 1] << 8 | this[e + 2] << 16) + 16777216 * this[e + 3]
                }
                ,
                a.prototype.readUInt32BE = function(e, t) {
                    return t || R(e, 4, this.length),
                    16777216 * this[e] + (this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3])
                }
                ,
                a.prototype.readIntLE = function(e, t, n) {
                    e = 0 | e,
                    t = 0 | t,
                    n || R(e, t, this.length);
                    for (var r = this[e], i = 1, o = 0; ++o < t && (i *= 256); )
                        r += this[e + o] * i;
                    return i *= 128,
                    r >= i && (r -= Math.pow(2, 8 * t)),
                    r
                }
                ,
                a.prototype.readIntBE = function(e, t, n) {
                    e = 0 | e,
                    t = 0 | t,
                    n || R(e, t, this.length);
                    for (var r = t, i = 1, o = this[e + --r]; r > 0 && (i *= 256); )
                        o += this[e + --r] * i;
                    return i *= 128,
                    o >= i && (o -= Math.pow(2, 8 * t)),
                    o
                }
                ,
                a.prototype.readInt8 = function(e, t) {
                    return t || R(e, 1, this.length),
                    128 & this[e] ? -1 * (255 - this[e] + 1) : this[e]
                }
                ,
                a.prototype.readInt16LE = function(e, t) {
                    t || R(e, 2, this.length);
                    var n = this[e] | this[e + 1] << 8;
                    return 32768 & n ? 4294901760 | n : n
                }
                ,
                a.prototype.readInt16BE = function(e, t) {
                    t || R(e, 2, this.length);
                    var n = this[e + 1] | this[e] << 8;
                    return 32768 & n ? 4294901760 | n : n
                }
                ,
                a.prototype.readInt32LE = function(e, t) {
                    return t || R(e, 4, this.length),
                    this[e] | this[e + 1] << 8 | this[e + 2] << 16 | this[e + 3] << 24
                }
                ,
                a.prototype.readInt32BE = function(e, t) {
                    return t || R(e, 4, this.length),
                    this[e] << 24 | this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3]
                }
                ,
                a.prototype.readFloatLE = function(e, t) {
                    return t || R(e, 4, this.length),
                    Z.read(this, e, !0, 23, 4)
                }
                ,
                a.prototype.readFloatBE = function(e, t) {
                    return t || R(e, 4, this.length),
                    Z.read(this, e, !1, 23, 4)
                }
                ,
                a.prototype.readDoubleLE = function(e, t) {
                    return t || R(e, 8, this.length),
                    Z.read(this, e, !0, 52, 8)
                }
                ,
                a.prototype.readDoubleBE = function(e, t) {
                    return t || R(e, 8, this.length),
                    Z.read(this, e, !1, 52, 8)
                }
                ,
                a.prototype.writeUIntLE = function(e, t, n, r) {
                    if (e = +e,
                    t = 0 | t,
                    n = 0 | n,
                    !r) {
                        var i = Math.pow(2, 8 * n) - 1;
                        D(this, e, t, n, i, 0)
                    }
                    var o = 1
                      , a = 0;
                    for (this[t] = 255 & e; ++a < n && (o *= 256); )
                        this[t + a] = e / o & 255;
                    return t + n
                }
                ,
                a.prototype.writeUIntBE = function(e, t, n, r) {
                    if (e = +e,
                    t = 0 | t,
                    n = 0 | n,
                    !r) {
                        var i = Math.pow(2, 8 * n) - 1;
                        D(this, e, t, n, i, 0)
                    }
                    var o = n - 1
                      , a = 1;
                    for (this[t + o] = 255 & e; --o >= 0 && (a *= 256); )
                        this[t + o] = e / a & 255;
                    return t + n
                }
                ,
                a.prototype.writeUInt8 = function(e, t, n) {
                    return e = +e,
                    t = 0 | t,
                    n || D(this, e, t, 1, 255, 0),
                    a.TYPED_ARRAY_SUPPORT || (e = Math.floor(e)),
                    this[t] = 255 & e,
                    t + 1
                }
                ,
                a.prototype.writeUInt16LE = function(e, t, n) {
                    return e = +e,
                    t = 0 | t,
                    n || D(this, e, t, 2, 65535, 0),
                    a.TYPED_ARRAY_SUPPORT ? (this[t] = 255 & e,
                    this[t + 1] = e >>> 8) : H(this, e, t, !0),
                    t + 2
                }
                ,
                a.prototype.writeUInt16BE = function(e, t, n) {
                    return e = +e,
                    t = 0 | t,
                    n || D(this, e, t, 2, 65535, 0),
                    a.TYPED_ARRAY_SUPPORT ? (this[t] = e >>> 8,
                    this[t + 1] = 255 & e) : H(this, e, t, !1),
                    t + 2
                }
                ,
                a.prototype.writeUInt32LE = function(e, t, n) {
                    return e = +e,
                    t = 0 | t,
                    n || D(this, e, t, 4, 4294967295, 0),
                    a.TYPED_ARRAY_SUPPORT ? (this[t + 3] = e >>> 24,
                    this[t + 2] = e >>> 16,
                    this[t + 1] = e >>> 8,
                    this[t] = 255 & e) : W(this, e, t, !0),
                    t + 4
                }
                ,
                a.prototype.writeUInt32BE = function(e, t, n) {
                    return e = +e,
                    t = 0 | t,
                    n || D(this, e, t, 4, 4294967295, 0),
                    a.TYPED_ARRAY_SUPPORT ? (this[t] = e >>> 24,
                    this[t + 1] = e >>> 16,
                    this[t + 2] = e >>> 8,
                    this[t + 3] = 255 & e) : W(this, e, t, !1),
                    t + 4
                }
                ,
                a.prototype.writeIntLE = function(e, t, n, r) {
                    if (e = +e,
                    t = 0 | t,
                    !r) {
                        var i = Math.pow(2, 8 * n - 1);
                        D(this, e, t, n, i - 1, -i)
                    }
                    var o = 0
                      , a = 1
                      , l = 0;
                    for (this[t] = 255 & e; ++o < n && (a *= 256); )
                        0 > e && 0 === l && 0 !== this[t + o - 1] && (l = 1),
                        this[t + o] = (e / a >> 0) - l & 255;
                    return t + n
                }
                ,
                a.prototype.writeIntBE = function(e, t, n, r) {
                    if (e = +e,
                    t = 0 | t,
                    !r) {
                        var i = Math.pow(2, 8 * n - 1);
                        D(this, e, t, n, i - 1, -i)
                    }
                    var o = n - 1
                      , a = 1
                      , l = 0;
                    for (this[t + o] = 255 & e; --o >= 0 && (a *= 256); )
                        0 > e && 0 === l && 0 !== this[t + o + 1] && (l = 1),
                        this[t + o] = (e / a >> 0) - l & 255;
                    return t + n
                }
                ,
                a.prototype.writeInt8 = function(e, t, n) {
                    return e = +e,
                    t = 0 | t,
                    n || D(this, e, t, 1, 127, -128),
                    a.TYPED_ARRAY_SUPPORT || (e = Math.floor(e)),
                    0 > e && (e = 255 + e + 1),
                    this[t] = 255 & e,
                    t + 1
                }
                ,
                a.prototype.writeInt16LE = function(e, t, n) {
                    return e = +e,
                    t = 0 | t,
                    n || D(this, e, t, 2, 32767, -32768),
                    a.TYPED_ARRAY_SUPPORT ? (this[t] = 255 & e,
                    this[t + 1] = e >>> 8) : H(this, e, t, !0),
                    t + 2
                }
                ,
                a.prototype.writeInt16BE = function(e, t, n) {
                    return e = +e,
                    t = 0 | t,
                    n || D(this, e, t, 2, 32767, -32768),
                    a.TYPED_ARRAY_SUPPORT ? (this[t] = e >>> 8,
                    this[t + 1] = 255 & e) : H(this, e, t, !1),
                    t + 2
                }
                ,
                a.prototype.writeInt32LE = function(e, t, n) {
                    return e = +e,
                    t = 0 | t,
                    n || D(this, e, t, 4, 2147483647, -2147483648),
                    a.TYPED_ARRAY_SUPPORT ? (this[t] = 255 & e,
                    this[t + 1] = e >>> 8,
                    this[t + 2] = e >>> 16,
                    this[t + 3] = e >>> 24) : W(this, e, t, !0),
                    t + 4
                }
                ,
                a.prototype.writeInt32BE = function(e, t, n) {
                    return e = +e,
                    t = 0 | t,
                    n || D(this, e, t, 4, 2147483647, -2147483648),
                    0 > e && (e = 4294967295 + e + 1),
                    a.TYPED_ARRAY_SUPPORT ? (this[t] = e >>> 24,
                    this[t + 1] = e >>> 16,
                    this[t + 2] = e >>> 8,
                    this[t + 3] = 255 & e) : W(this, e, t, !1),
                    t + 4
                }
                ,
                a.prototype.writeFloatLE = function(e, t, n) {
                    return _(this, e, t, !0, n)
                }
                ,
                a.prototype.writeFloatBE = function(e, t, n) {
                    return _(this, e, t, !1, n)
                }
                ,
                a.prototype.writeDoubleLE = function(e, t, n) {
                    return F(this, e, t, !0, n)
                }
                ,
                a.prototype.writeDoubleBE = function(e, t, n) {
                    return F(this, e, t, !1, n)
                }
                ,
                a.prototype.copy = function(e, t, n, r) {
                    if (n || (n = 0),
                    r || 0 === r || (r = this.length),
                    t >= e.length && (t = e.length),
                    t || (t = 0),
                    r > 0 && n > r && (r = n),
                    r === n)
                        return 0;
                    if (0 === e.length || 0 === this.length)
                        return 0;
                    if (0 > t)
                        throw new RangeError("targetStart out of bounds");
                    if (0 > n || n >= this.length)
                        throw new RangeError("sourceStart out of bounds");
                    if (0 > r)
                        throw new RangeError("sourceEnd out of bounds");
                    r > this.length && (r = this.length),
                    e.length - t < r - n && (r = e.length - t + n);
                    var i, o = r - n;
                    if (this === e && t > n && r > t)
                        for (i = o - 1; i >= 0; i--)
                            e[i + t] = this[i + n];
                    else if (1e3 > o || !a.TYPED_ARRAY_SUPPORT)
                        for (i = 0; o > i; i++)
                            e[i + t] = this[i + n];
                    else
                        Uint8Array.prototype.set.call(e, this.subarray(n, n + o), t);
                    return o
                }
                ,
                a.prototype.fill = function(e, t, n, r) {
                    if ("string" == typeof e) {
                        if ("string" == typeof t ? (r = t,
                        t = 0,
                        n = this.length) : "string" == typeof n && (r = n,
                        n = this.length),
                        1 === e.length) {
                            var i = e.charCodeAt(0);
                            256 > i && (e = i)
                        }
                        if (void 0 !== r && "string" != typeof r)
                            throw new TypeError("encoding must be a string");
                        if ("string" == typeof r && !a.isEncoding(r))
                            throw new TypeError("Unknown encoding: " + r)
                    } else
                        "number" == typeof e && (e = 255 & e);
                    if (0 > t || this.length < t || this.length < n)
                        throw new RangeError("Out of range index");
                    if (t >= n)
                        return this;
                    t >>>= 0,
                    n = void 0 === n ? this.length : n >>> 0,
                    e || (e = 0);
                    var o;
                    if ("number" == typeof e)
                        for (o = t; n > o; o++)
                            this[o] = e;
                    else {
                        var l = a.isBuffer(e) ? e : q(new a(e,r).toString())
                          , s = l.length;
                        for (o = 0; n - t > o; o++)
                            this[o + t] = l[o % s]
                    }
                    return this
                }
                ;
                var ee = /[^+\/0-9A-Za-z-_]/g
            }
            ).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }
        , {
            "base64-js": 1,
            ieee754: 15,
            isarray: 16
        }],
        4: [function(e, t) {
            "use strict";
            function r(e) {
                return e = e || {},
                "function" != typeof e.codeMirrorInstance || "function" != typeof e.codeMirrorInstance.defineMode ? void console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`") : (String.prototype.includes || (String.prototype.includes = function() {
                    return -1 !== String.prototype.indexOf.apply(this, arguments)
                }
                ),
                void e.codeMirrorInstance.defineMode("spell-checker", function(t) {
                    if (!r.aff_loading) {
                        r.aff_loading = !0;
                        var n = new XMLHttpRequest;
                        n.open("GET", "https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff", !0),
                        n.onload = function() {
                            4 === n.readyState && 200 === n.status && (r.aff_data = n.responseText,
                            r.num_loaded++,
                            2 == r.num_loaded && (r.typo = new i("en_US",r.aff_data,r.dic_data,{
                                platform: "any"
                            })))
                        }
                        ,
                        n.send(null)
                    }
                    if (!r.dic_loading) {
                        r.dic_loading = !0;
                        var o = new XMLHttpRequest;
                        o.open("GET", "https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic", !0),
                        o.onload = function() {
                            4 === o.readyState && 200 === o.status && (r.dic_data = o.responseText,
                            r.num_loaded++,
                            2 == r.num_loaded && (r.typo = new i("en_US",r.aff_data,r.dic_data,{
                                platform: "any"
                            })))
                        }
                        ,
                        o.send(null)
                    }
                    var a = '!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ '
                      , l = {
                        token: function(e) {
                            var t = e.peek()
                              , n = "";
                            if (a.includes(t))
                                return e.next(),
                                null;
                            for (; null != (t = e.peek()) && !a.includes(t); )
                                n += t,
                                e.next();
                            return r.typo && !r.typo.check(n) ? "spell-error" : null
                        }
                    }
                      , s = e.codeMirrorInstance.getMode(t, t.backdrop || "text/plain");
                    return e.codeMirrorInstance.overlayMode(s, l, !0)
                }))
            }
            var i = e("typo-js");
            r.num_loaded = 0,
            r.aff_loading = !1,
            r.dic_loading = !1,
            r.aff_data = "",
            r.dic_data = "",
            r.typo,
            t.exports = r
        }
        , {
            "typo-js": 18
        }],
        5: [function(t, n, r) {
            !function(i) {
                "object" == typeof r && "object" == typeof n ? i(t("../../lib/codemirror")) : "function" == typeof e && e.amd ? e(["../../lib/codemirror"], i) : i(CodeMirror)
            }(function(e) {
                "use strict";
                function t(e) {
                    var t = e.getWrapperElement();
                    e.state.fullScreenRestore = {
                        scrollTop: window.pageYOffset,
                        scrollLeft: window.pageXOffset,
                        width: t.style.width,
                        height: t.style.height
                    },
                    t.style.width = "",
                    t.style.height = "auto",
                    t.className += " CodeMirror-fullscreen",
                    document.documentElement.style.overflow = "hidden",
                    e.refresh()
                }
                function n(e) {
                    var t = e.getWrapperElement();
                    t.className = t.className.replace(/\s*CodeMirror-fullscreen\b/, ""),
                    document.documentElement.style.overflow = "";
                    var n = e.state.fullScreenRestore;
                    t.style.width = n.width,
                    t.style.height = n.height,
                    window.scrollTo(n.scrollLeft, n.scrollTop),
                    e.refresh()
                }
                e.defineOption("fullScreen", !1, function(r, i, o) {
                    o == e.Init && (o = !1),
                    !o != !i && (i ? t(r) : n(r))
                })
            })
        }
        , {
            "../../lib/codemirror": 10
        }],
        6: [function(t, n, r) {
            !function(i) {
                "object" == typeof r && "object" == typeof n ? i(t("../../lib/codemirror")) : "function" == typeof e && e.amd ? e(["../../lib/codemirror"], i) : i(CodeMirror)
            }(function(e) {
                function t(e) {
                    e.state.placeholder && (e.state.placeholder.parentNode.removeChild(e.state.placeholder),
                    e.state.placeholder = null)
                }
                function n(e) {
                    t(e);
                    var n = e.state.placeholder = document.createElement("pre");
                    n.style.cssText = "height: 0; overflow: visible",
                    n.className = "CodeMirror-placeholder";
                    var r = e.getOption("placeholder");
                    "string" == typeof r && (r = document.createTextNode(r)),
                    n.appendChild(r),
                    e.display.lineSpace.insertBefore(n, e.display.lineSpace.firstChild)
                }
                function r(e) {
                    o(e) && n(e)
                }
                function i(e) {
                    var r = e.getWrapperElement()
                      , i = o(e);
                    r.className = r.className.replace(" CodeMirror-empty", "") + (i ? " CodeMirror-empty" : ""),
                    i ? n(e) : t(e)
                }
                function o(e) {
                    return 1 === e.lineCount() && "" === e.getLine(0)
                }
                e.defineOption("placeholder", "", function(n, o, a) {
                    var l = a && a != e.Init;
                    if (o && !l)
                        n.on("blur", r),
                        n.on("change", i),
                        n.on("swapDoc", i),
                        i(n);
                    else if (!o && l) {
                        n.off("blur", r),
                        n.off("change", i),
                        n.off("swapDoc", i),
                        t(n);
                        var s = n.getWrapperElement();
                        s.className = s.className.replace(" CodeMirror-empty", "")
                    }
                    o && !n.hasFocus() && r(n)
                })
            })
        }
        , {
            "../../lib/codemirror": 10
        }],
        7: [function(t, n, r) {
            !function(i) {
                "object" == typeof r && "object" == typeof n ? i(t("../../lib/codemirror")) : "function" == typeof e && e.amd ? e(["../../lib/codemirror"], i) : i(CodeMirror)
            }(function(e) {
                "use strict";
                var t = /^(\s*)(>[> ]*|[*+-]\s|(\d+)([.)]))(\s*)/
                  , n = /^(\s*)(>[> ]*|[*+-]|(\d+)[.)])(\s*)$/
                  , r = /[*+-]\s/;
                e.commands.newlineAndIndentContinueMarkdownList = function(i) {
                    if (i.getOption("disableInput"))
                        return e.Pass;
                    for (var o = i.listSelections(), a = [], l = 0; l < o.length; l++) {
                        var s = o[l].head
                          , c = i.getStateAfter(s.line)
                          , u = c.list !== !1
                          , f = 0 !== c.quote
                          , h = i.getLine(s.line)
                          , d = t.exec(h);
                        if (!o[l].empty() || !u && !f || !d)
                            return void i.execCommand("newlineAndIndent");
                        if (n.test(h))
                            i.replaceRange("", {
                                line: s.line,
                                ch: 0
                            }, {
                                line: s.line,
                                ch: s.ch + 1
                            }),
                            a[l] = "\n";
                        else {
                            var p = d[1]
                              , m = d[5]
                              , g = r.test(d[2]) || d[2].indexOf(">") >= 0 ? d[2] : parseInt(d[3], 10) + 1 + d[4];
                            a[l] = "\n" + p + g + m
                        }
                    }
                    i.replaceSelections(a)
                }
            })
        }
        , {
            "../../lib/codemirror": 10
        }],
        8: [function(t, n, r) {
            !function(i) {
                "object" == typeof r && "object" == typeof n ? i(t("../../lib/codemirror")) : "function" == typeof e && e.amd ? e(["../../lib/codemirror"], i) : i(CodeMirror)
            }(function(e) {
                "use strict";
                e.overlayMode = function(t, n, r) {
                    return {
                        startState: function() {
                            return {
                                base: e.startState(t),
                                overlay: e.startState(n),
                                basePos: 0,
                                baseCur: null,
                                overlayPos: 0,
                                overlayCur: null,
                                streamSeen: null
                            }
                        },
                        copyState: function(r) {
                            return {
                                base: e.copyState(t, r.base),
                                overlay: e.copyState(n, r.overlay),
                                basePos: r.basePos,
                                baseCur: null,
                                overlayPos: r.overlayPos,
                                overlayCur: null
                            }
                        },
                        token: function(e, i) {
                            return (e != i.streamSeen || Math.min(i.basePos, i.overlayPos) < e.start) && (i.streamSeen = e,
                            i.basePos = i.overlayPos = e.start),
                            e.start == i.basePos && (i.baseCur = t.token(e, i.base),
                            i.basePos = e.pos),
                            e.start == i.overlayPos && (e.pos = e.start,
                            i.overlayCur = n.token(e, i.overlay),
                            i.overlayPos = e.pos),
                            e.pos = Math.min(i.basePos, i.overlayPos),
                            null == i.overlayCur ? i.baseCur : null != i.baseCur && i.overlay.combineTokens || r && null == i.overlay.combineTokens ? i.baseCur + " " + i.overlayCur : i.overlayCur
                        },
                        indent: t.indent && function(e, n) {
                            return t.indent(e.base, n)
                        }
                        ,
                        electricChars: t.electricChars,
                        innerMode: function(e) {
                            return {
                                state: e.base,
                                mode: t
                            }
                        },
                        blankLine: function(e) {
                            t.blankLine && t.blankLine(e.base),
                            n.blankLine && n.blankLine(e.overlay)
                        }
                    }
                }
            })
        }
        , {
            "../../lib/codemirror": 10
        }],
        9: [function(t, n, r) {
            !function(i) {
                "object" == typeof r && "object" == typeof n ? i(t("../../lib/codemirror")) : "function" == typeof e && e.amd ? e(["../../lib/codemirror"], i) : i(CodeMirror)
            }(function(e) {
                "use strict";
                function t(e) {
                    e.operation(function() {
                        a(e)
                    })
                }
                function n(e) {
                    e.state.markedSelection.length && e.operation(function() {
                        i(e)
                    })
                }
                function r(e, t, n, r) {
                    if (0 != c(t, n))
                        for (var i = e.state.markedSelection, o = e.state.markedSelectionStyle, a = t.line; ; ) {
                            var u = a == t.line ? t : s(a, 0)
                              , f = a + l
                              , h = f >= n.line
                              , d = h ? n : s(f, 0)
                              , p = e.markText(u, d, {
                                className: o
                            });
                            if (null == r ? i.push(p) : i.splice(r++, 0, p),
                            h)
                                break;
                            a = f
                        }
                }
                function i(e) {
                    for (var t = e.state.markedSelection, n = 0; n < t.length; ++n)
                        t[n].clear();
                    t.length = 0
                }
                function o(e) {
                    i(e);
                    for (var t = e.listSelections(), n = 0; n < t.length; n++)
                        r(e, t[n].from(), t[n].to())
                }
                function a(e) {
                    if (!e.somethingSelected())
                        return i(e);
                    if (e.listSelections().length > 1)
                        return o(e);
                    var t = e.getCursor("start")
                      , n = e.getCursor("end")
                      , a = e.state.markedSelection;
                    if (!a.length)
                        return r(e, t, n);
                    var s = a[0].find()
                      , u = a[a.length - 1].find();
                    if (!s || !u || n.line - t.line < l || c(t, u.to) >= 0 || c(n, s.from) <= 0)
                        return o(e);
                    for (; c(t, s.from) > 0; )
                        a.shift().clear(),
                        s = a[0].find();
                    for (c(t, s.from) < 0 && (s.to.line - t.line < l ? (a.shift().clear(),
                    r(e, t, s.to, 0)) : r(e, t, s.from, 0)); c(n, u.to) < 0; )
                        a.pop().clear(),
                        u = a[a.length - 1].find();
                    c(n, u.to) > 0 && (n.line - u.from.line < l ? (a.pop().clear(),
                    r(e, u.from, n)) : r(e, u.to, n))
                }
                e.defineOption("styleSelectedText", !1, function(r, a, l) {
                    var s = l && l != e.Init;
                    a && !s ? (r.state.markedSelection = [],
                    r.state.markedSelectionStyle = "string" == typeof a ? a : "CodeMirror-selectedtext",
                    o(r),
                    r.on("cursorActivity", t),
                    r.on("change", n)) : !a && s && (r.off("cursorActivity", t),
                    r.off("change", n),
                    i(r),
                    r.state.markedSelection = r.state.markedSelectionStyle = null)
                });
                var l = 8
                  , s = e.Pos
                  , c = e.cmpPos
            })
        }
        , {
            "../../lib/codemirror": 10
        }],
        10: [function(t, n, r) {
            !function(t) {
                if ("object" == typeof r && "object" == typeof n)
                    n.exports = t();
                else {
                    if ("function" == typeof e && e.amd)
                        return e([], t);
                    (this || window).CodeMirror = t()
                }
            }(function() {
                "use strict";
                function e(n, r) {
                    if (!(this instanceof e))
                        return new e(n,r);
                    this.options = r = r ? Wi(r) : {},
                    Wi(ea, r, !1),
                    d(r);
                    var i = r.value;
                    "string" == typeof i && (i = new Ca(i,r.mode,null,r.lineSeparator)),
                    this.doc = i;
                    var o = new e.inputStyles[r.inputStyle](this)
                      , a = this.display = new t(n,i,o);
                    a.wrapper.CodeMirror = this,
                    c(this),
                    l(this),
                    r.lineWrapping && (this.display.wrapper.className += " CodeMirror-wrap"),
                    r.autofocus && !Ao && a.input.focus(),
                    v(this),
                    this.state = {
                        keyMaps: [],
                        overlays: [],
                        modeGen: 0,
                        overwrite: !1,
                        delayingBlurEvent: !1,
                        focused: !1,
                        suppressEdits: !1,
                        pasteIncoming: !1,
                        cutIncoming: !1,
                        selectingText: !1,
                        draggingText: !1,
                        highlight: new Ei,
                        keySeq: null,
                        specialChars: null
                    };
                    var s = this;
                    xo && 11 > bo && setTimeout(function() {
                        s.display.input.reset(!0)
                    }, 20),
                    jt(this),
                    Ki(),
                    bt(this),
                    this.curOp.forceUpdate = !0,
                    Xr(this, i),
                    r.autofocus && !Ao || s.hasFocus() ? setTimeout(Bi(vn, this), 20) : yn(this);
                    for (var u in ta)
                        ta.hasOwnProperty(u) && ta[u](this, r[u], na);
                    k(this),
                    r.finishInit && r.finishInit(this);
                    for (var f = 0; f < aa.length; ++f)
                        aa[f](this);
                    kt(this),
                    wo && r.lineWrapping && "optimizelegibility" == getComputedStyle(a.lineDiv).textRendering && (a.lineDiv.style.textRendering = "auto")
                }
                function t(e, t, n) {
                    var r = this;
                    this.input = n,
                    r.scrollbarFiller = ji("div", null, "CodeMirror-scrollbar-filler"),
                    r.scrollbarFiller.setAttribute("cm-not-content", "true"),
                    r.gutterFiller = ji("div", null, "CodeMirror-gutter-filler"),
                    r.gutterFiller.setAttribute("cm-not-content", "true"),
                    r.lineDiv = ji("div", null, "CodeMirror-code"),
                    r.selectionDiv = ji("div", null, null, "position: relative; z-index: 1"),
                    r.cursorDiv = ji("div", null, "CodeMirror-cursors"),
                    r.measure = ji("div", null, "CodeMirror-measure"),
                    r.lineMeasure = ji("div", null, "CodeMirror-measure"),
                    r.lineSpace = ji("div", [r.measure, r.lineMeasure, r.selectionDiv, r.cursorDiv, r.lineDiv], null, "position: relative; outline: none"),
                    r.mover = ji("div", [ji("div", [r.lineSpace], "CodeMirror-lines")], null, "position: relative"),
                    r.sizer = ji("div", [r.mover], "CodeMirror-sizer"),
                    r.sizerWidth = null,
                    r.heightForcer = ji("div", null, null, "position: absolute; height: " + Da + "px; width: 1px;"),
                    r.gutters = ji("div", null, "CodeMirror-gutters"),
                    r.lineGutter = null,
                    r.scroller = ji("div", [r.sizer, r.heightForcer, r.gutters], "CodeMirror-scroll"),
                    r.scroller.setAttribute("tabIndex", "-1"),
                    r.wrapper = ji("div", [r.scrollbarFiller, r.gutterFiller, r.scroller], "CodeMirror"),
                    xo && 8 > bo && (r.gutters.style.zIndex = -1,
                    r.scroller.style.paddingRight = 0),
                    wo || go && Ao || (r.scroller.draggable = !0),
                    e && (e.appendChild ? e.appendChild(r.wrapper) : e(r.wrapper)),
                    r.viewFrom = r.viewTo = t.first,
                    r.reportedViewFrom = r.reportedViewTo = t.first,
                    r.view = [],
                    r.renderedView = null,
                    r.externalMeasured = null,
                    r.viewOffset = 0,
                    r.lastWrapHeight = r.lastWrapWidth = 0,
                    r.updateLineNumbers = null,
                    r.nativeBarWidth = r.barHeight = r.barWidth = 0,
                    r.scrollbarsClipped = !1,
                    r.lineNumWidth = r.lineNumInnerWidth = r.lineNumChars = null,
                    r.alignWidgets = !1,
                    r.cachedCharWidth = r.cachedTextHeight = r.cachedPaddingH = null,
                    r.maxLine = null,
                    r.maxLineLength = 0,
                    r.maxLineChanged = !1,
                    r.wheelDX = r.wheelDY = r.wheelStartX = r.wheelStartY = null,
                    r.shift = !1,
                    r.selForContextMenu = null,
                    r.activeTouch = null,
                    n.init(r)
                }
                function n(t) {
                    t.doc.mode = e.getMode(t.options, t.doc.modeOption),
                    r(t)
                }
                function r(e) {
                    e.doc.iter(function(e) {
                        e.stateAfter && (e.stateAfter = null),
                        e.styles && (e.styles = null)
                    }),
                    e.doc.frontier = e.doc.first,
                    _e(e, 100),
                    e.state.modeGen++,
                    e.curOp && Dt(e)
                }
                function i(e) {
                    e.options.lineWrapping ? (Ja(e.display.wrapper, "CodeMirror-wrap"),
                    e.display.sizer.style.minWidth = "",
                    e.display.sizerWidth = null) : (Za(e.display.wrapper, "CodeMirror-wrap"),
                    h(e)),
                    a(e),
                    Dt(e),
                    lt(e),
                    setTimeout(function() {
                        y(e)
                    }, 100)
                }
                function o(e) {
                    var t = yt(e.display)
                      , n = e.options.lineWrapping
                      , r = n && Math.max(5, e.display.scroller.clientWidth / xt(e.display) - 3);
                    return function(i) {
                        if (kr(e.doc, i))
                            return 0;
                        var o = 0;
                        if (i.widgets)
                            for (var a = 0; a < i.widgets.length; a++)
                                i.widgets[a].height && (o += i.widgets[a].height);
                        return n ? o + (Math.ceil(i.text.length / r) || 1) * t : o + t
                    }
                }
                function a(e) {
                    var t = e.doc
                      , n = o(e);
                    t.iter(function(e) {
                        var t = n(e);
                        t != e.height && ei(e, t)
                    })
                }
                function l(e) {
                    e.display.wrapper.className = e.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") + e.options.theme.replace(/(^|\s)\s*/g, " cm-s-"),
                    lt(e)
                }
                function s(e) {
                    c(e),
                    Dt(e),
                    setTimeout(function() {
                        w(e)
                    }, 20)
                }
                function c(e) {
                    var t = e.display.gutters
                      , n = e.options.gutters;
                    Ui(t);
                    for (var r = 0; r < n.length; ++r) {
                        var i = n[r]
                          , o = t.appendChild(ji("div", null, "CodeMirror-gutter " + i));
                        "CodeMirror-linenumbers" == i && (e.display.lineGutter = o,
                        o.style.width = (e.display.lineNumWidth || 1) + "px")
                    }
                    t.style.display = r ? "" : "none",
                    u(e)
                }
                function u(e) {
                    var t = e.display.gutters.offsetWidth;
                    e.display.sizer.style.marginLeft = t + "px"
                }
                function f(e) {
                    if (0 == e.height)
                        return 0;
                    for (var t, n = e.text.length, r = e; t = mr(r); ) {
                        var i = t.find(0, !0);
                        r = i.from.line,
                        n += i.from.ch - i.to.ch
                    }
                    for (r = e; t = gr(r); ) {
                        var i = t.find(0, !0);
                        n -= r.text.length - i.from.ch,
                        r = i.to.line,
                        n += r.text.length - i.to.ch
                    }
                    return n
                }
                function h(e) {
                    var t = e.display
                      , n = e.doc;
                    t.maxLine = Zr(n, n.first),
                    t.maxLineLength = f(t.maxLine),
                    t.maxLineChanged = !0,
                    n.iter(function(e) {
                        var n = f(e);
                        n > t.maxLineLength && (t.maxLineLength = n,
                        t.maxLine = e)
                    })
                }
                function d(e) {
                    var t = Pi(e.gutters, "CodeMirror-linenumbers");
                    -1 == t && e.lineNumbers ? e.gutters = e.gutters.concat(["CodeMirror-linenumbers"]) : t > -1 && !e.lineNumbers && (e.gutters = e.gutters.slice(0),
                    e.gutters.splice(t, 1))
                }
                function p(e) {
                    var t = e.display
                      , n = t.gutters.offsetWidth
                      , r = Math.round(e.doc.height + qe(e.display));
                    return {
                        clientHeight: t.scroller.clientHeight,
                        viewHeight: t.wrapper.clientHeight,
                        scrollWidth: t.scroller.scrollWidth,
                        clientWidth: t.scroller.clientWidth,
                        viewWidth: t.wrapper.clientWidth,
                        barLeft: e.options.fixedGutter ? n : 0,
                        docHeight: r,
                        scrollHeight: r + Ye(e) + t.barHeight,
                        nativeBarWidth: t.nativeBarWidth,
                        gutterWidth: n
                    }
                }
                function m(e, t, n) {
                    this.cm = n;
                    var r = this.vert = ji("div", [ji("div", null, null, "min-width: 1px")], "CodeMirror-vscrollbar")
                      , i = this.horiz = ji("div", [ji("div", null, null, "height: 100%; min-height: 1px")], "CodeMirror-hscrollbar");
                    e(r),
                    e(i),
                    Ea(r, "scroll", function() {
                        r.clientHeight && t(r.scrollTop, "vertical")
                    }),
                    Ea(i, "scroll", function() {
                        i.clientWidth && t(i.scrollLeft, "horizontal")
                    }),
                    this.checkedZeroWidth = !1,
                    xo && 8 > bo && (this.horiz.style.minHeight = this.vert.style.minWidth = "18px")
                }
                function g() {}
                function v(t) {
                    t.display.scrollbars && (t.display.scrollbars.clear(),
                    t.display.scrollbars.addClass && Za(t.display.wrapper, t.display.scrollbars.addClass)),
                    t.display.scrollbars = new e.scrollbarModel[t.options.scrollbarStyle](function(e) {
                        t.display.wrapper.insertBefore(e, t.display.scrollbarFiller),
                        Ea(e, "mousedown", function() {
                            t.state.focused && setTimeout(function() {
                                t.display.input.focus()
                            }, 0)
                        }),
                        e.setAttribute("cm-not-content", "true")
                    }
                    ,function(e, n) {
                        "horizontal" == n ? on(t, e) : rn(t, e)
                    }
                    ,t),
                    t.display.scrollbars.addClass && Ja(t.display.wrapper, t.display.scrollbars.addClass)
                }
                function y(e, t) {
                    t || (t = p(e));
                    var n = e.display.barWidth
                      , r = e.display.barHeight;
                    x(e, t);
                    for (var i = 0; 4 > i && n != e.display.barWidth || r != e.display.barHeight; i++)
                        n != e.display.barWidth && e.options.lineWrapping && O(e),
                        x(e, p(e)),
                        n = e.display.barWidth,
                        r = e.display.barHeight
                }
                function x(e, t) {
                    var n = e.display
                      , r = n.scrollbars.update(t);
                    n.sizer.style.paddingRight = (n.barWidth = r.right) + "px",
                    n.sizer.style.paddingBottom = (n.barHeight = r.bottom) + "px",
                    n.heightForcer.style.borderBottom = r.bottom + "px solid transparent",
                    r.right && r.bottom ? (n.scrollbarFiller.style.display = "block",
                    n.scrollbarFiller.style.height = r.bottom + "px",
                    n.scrollbarFiller.style.width = r.right + "px") : n.scrollbarFiller.style.display = "",
                    r.bottom && e.options.coverGutterNextToScrollbar && e.options.fixedGutter ? (n.gutterFiller.style.display = "block",
                    n.gutterFiller.style.height = r.bottom + "px",
                    n.gutterFiller.style.width = t.gutterWidth + "px") : n.gutterFiller.style.display = ""
                }
                function b(e, t, n) {
                    var r = n && null != n.top ? Math.max(0, n.top) : e.scroller.scrollTop;
                    r = Math.floor(r - Ue(e));
                    var i = n && null != n.bottom ? n.bottom : r + e.wrapper.clientHeight
                      , o = ni(t, r)
                      , a = ni(t, i);
                    if (n && n.ensure) {
                        var l = n.ensure.from.line
                          , s = n.ensure.to.line;
                        o > l ? (o = l,
                        a = ni(t, ri(Zr(t, l)) + e.wrapper.clientHeight)) : Math.min(s, t.lastLine()) >= a && (o = ni(t, ri(Zr(t, s)) - e.wrapper.clientHeight),
                        a = s)
                    }
                    return {
                        from: o,
                        to: Math.max(a, o + 1)
                    }
                }
                function w(e) {
                    var t = e.display
                      , n = t.view;
                    if (t.alignWidgets || t.gutters.firstChild && e.options.fixedGutter) {
                        for (var r = C(t) - t.scroller.scrollLeft + e.doc.scrollLeft, i = t.gutters.offsetWidth, o = r + "px", a = 0; a < n.length; a++)
                            if (!n[a].hidden) {
                                e.options.fixedGutter && n[a].gutter && (n[a].gutter.style.left = o);
                                var l = n[a].alignable;
                                if (l)
                                    for (var s = 0; s < l.length; s++)
                                        l[s].style.left = o
                            }
                        e.options.fixedGutter && (t.gutters.style.left = r + i + "px")
                    }
                }
                function k(e) {
                    if (!e.options.lineNumbers)
                        return !1;
                    var t = e.doc
                      , n = S(e.options, t.first + t.size - 1)
                      , r = e.display;
                    if (n.length != r.lineNumChars) {
                        var i = r.measure.appendChild(ji("div", [ji("div", n)], "CodeMirror-linenumber CodeMirror-gutter-elt"))
                          , o = i.firstChild.offsetWidth
                          , a = i.offsetWidth - o;
                        return r.lineGutter.style.width = "",
                        r.lineNumInnerWidth = Math.max(o, r.lineGutter.offsetWidth - a) + 1,
                        r.lineNumWidth = r.lineNumInnerWidth + a,
                        r.lineNumChars = r.lineNumInnerWidth ? n.length : -1,
                        r.lineGutter.style.width = r.lineNumWidth + "px",
                        u(e),
                        !0
                    }
                    return !1
                }
                function S(e, t) {
                    return String(e.lineNumberFormatter(t + e.firstLineNumber))
                }
                function C(e) {
                    return e.scroller.getBoundingClientRect().left - e.sizer.getBoundingClientRect().left
                }
                function L(e, t, n) {
                    var r = e.display;
                    this.viewport = t,
                    this.visible = b(r, e.doc, t),
                    this.editorIsHidden = !r.wrapper.offsetWidth,
                    this.wrapperHeight = r.wrapper.clientHeight,
                    this.wrapperWidth = r.wrapper.clientWidth,
                    this.oldDisplayWidth = $e(e),
                    this.force = n,
                    this.dims = P(e),
                    this.events = []
                }
                function T(e) {
                    var t = e.display;
                    !t.scrollbarsClipped && t.scroller.offsetWidth && (t.nativeBarWidth = t.scroller.offsetWidth - t.scroller.clientWidth,
                    t.heightForcer.style.height = Ye(e) + "px",
                    t.sizer.style.marginBottom = -t.nativeBarWidth + "px",
                    t.sizer.style.borderRightWidth = Ye(e) + "px",
                    t.scrollbarsClipped = !0)
                }
                function M(e, t) {
                    var n = e.display
                      , r = e.doc;
                    if (t.editorIsHidden)
                        return Wt(e),
                        !1;
                    if (!t.force && t.visible.from >= n.viewFrom && t.visible.to <= n.viewTo && (null == n.updateLineNumbers || n.updateLineNumbers >= n.viewTo) && n.renderedView == n.view && 0 == zt(e))
                        return !1;
                    k(e) && (Wt(e),
                    t.dims = P(e));
                    var i = r.first + r.size
                      , o = Math.max(t.visible.from - e.options.viewportMargin, r.first)
                      , a = Math.min(i, t.visible.to + e.options.viewportMargin);
                    n.viewFrom < o && o - n.viewFrom < 20 && (o = Math.max(r.first, n.viewFrom)),
                    n.viewTo > a && n.viewTo - a < 20 && (a = Math.min(i, n.viewTo)),
                    Wo && (o = br(e.doc, o),
                    a = wr(e.doc, a));
                    var l = o != n.viewFrom || a != n.viewTo || n.lastWrapHeight != t.wrapperHeight || n.lastWrapWidth != t.wrapperWidth;
                    Ft(e, o, a),
                    n.viewOffset = ri(Zr(e.doc, n.viewFrom)),
                    e.display.mover.style.top = n.viewOffset + "px";
                    var s = zt(e);
                    if (!l && 0 == s && !t.force && n.renderedView == n.view && (null == n.updateLineNumbers || n.updateLineNumbers >= n.viewTo))
                        return !1;
                    var c = Gi();
                    return s > 4 && (n.lineDiv.style.display = "none"),
                    R(e, n.updateLineNumbers, t.dims),
                    s > 4 && (n.lineDiv.style.display = ""),
                    n.renderedView = n.view,
                    c && Gi() != c && c.offsetHeight && c.focus(),
                    Ui(n.cursorDiv),
                    Ui(n.selectionDiv),
                    n.gutters.style.height = n.sizer.style.minHeight = 0,
                    l && (n.lastWrapHeight = t.wrapperHeight,
                    n.lastWrapWidth = t.wrapperWidth,
                    _e(e, 400)),
                    n.updateLineNumbers = null,
                    !0
                }
                function N(e, t) {
                    for (var n = t.viewport, r = !0; (r && e.options.lineWrapping && t.oldDisplayWidth != $e(e) || (n && null != n.top && (n = {
                        top: Math.min(e.doc.height + qe(e.display) - Ve(e), n.top)
                    }),
                    t.visible = b(e.display, e.doc, n),
                    !(t.visible.from >= e.display.viewFrom && t.visible.to <= e.display.viewTo))) && M(e, t); r = !1) {
                        O(e);
                        var i = p(e);
                        Re(e),
                        y(e, i),
                        E(e, i)
                    }
                    t.signal(e, "update", e),
                    e.display.viewFrom == e.display.reportedViewFrom && e.display.viewTo == e.display.reportedViewTo || (t.signal(e, "viewportChange", e, e.display.viewFrom, e.display.viewTo),
                    e.display.reportedViewFrom = e.display.viewFrom,
                    e.display.reportedViewTo = e.display.viewTo)
                }
                function A(e, t) {
                    var n = new L(e,t);
                    if (M(e, n)) {
                        O(e),
                        N(e, n);
                        var r = p(e);
                        Re(e),
                        y(e, r),
                        E(e, r),
                        n.finish()
                    }
                }
                function E(e, t) {
                    e.display.sizer.style.minHeight = t.docHeight + "px",
                    e.display.heightForcer.style.top = t.docHeight + "px",
                    e.display.gutters.style.height = t.docHeight + e.display.barHeight + Ye(e) + "px"
                }
                function O(e) {
                    for (var t = e.display, n = t.lineDiv.offsetTop, r = 0; r < t.view.length; r++) {
                        var i, o = t.view[r];
                        if (!o.hidden) {
                            if (xo && 8 > bo) {
                                var a = o.node.offsetTop + o.node.offsetHeight;
                                i = a - n,
                                n = a
                            } else {
                                var l = o.node.getBoundingClientRect();
                                i = l.bottom - l.top
                            }
                            var s = o.line.height - i;
                            if (2 > i && (i = yt(t)),
                            (s > .001 || -.001 > s) && (ei(o.line, i),
                            I(o.line),
                            o.rest))
                                for (var c = 0; c < o.rest.length; c++)
                                    I(o.rest[c])
                        }
                    }
                }
                function I(e) {
                    if (e.widgets)
                        for (var t = 0; t < e.widgets.length; ++t)
                            e.widgets[t].height = e.widgets[t].node.parentNode.offsetHeight
                }
                function P(e) {
                    for (var t = e.display, n = {}, r = {}, i = t.gutters.clientLeft, o = t.gutters.firstChild, a = 0; o; o = o.nextSibling,
                    ++a)
                        n[e.options.gutters[a]] = o.offsetLeft + o.clientLeft + i,
                        r[e.options.gutters[a]] = o.clientWidth;
                    return {
                        fixedPos: C(t),
                        gutterTotalWidth: t.gutters.offsetWidth,
                        gutterLeft: n,
                        gutterWidth: r,
                        wrapperWidth: t.wrapper.clientWidth
                    }
                }
                function R(e, t, n) {
                    function r(t) {
                        var n = t.nextSibling;
                        return wo && Eo && e.display.currentWheelTarget == t ? t.style.display = "none" : t.parentNode.removeChild(t),
                        n
                    }
                    for (var i = e.display, o = e.options.lineNumbers, a = i.lineDiv, l = a.firstChild, s = i.view, c = i.viewFrom, u = 0; u < s.length; u++) {
                        var f = s[u];
                        if (f.hidden)
                            ;
                        else if (f.node && f.node.parentNode == a) {
                            for (; l != f.node; )
                                l = r(l);
                            var h = o && null != t && c >= t && f.lineNumber;
                            f.changes && (Pi(f.changes, "gutter") > -1 && (h = !1),
                            D(e, f, c, n)),
                            h && (Ui(f.lineNumber),
                            f.lineNumber.appendChild(document.createTextNode(S(e.options, c)))),
                            l = f.node.nextSibling
                        } else {
                            var d = U(e, f, c, n);
                            a.insertBefore(d, l)
                        }
                        c += f.size
                    }
                    for (; l; )
                        l = r(l)
                }
                function D(e, t, n, r) {
                    for (var i = 0; i < t.changes.length; i++) {
                        var o = t.changes[i];
                        "text" == o ? _(e, t) : "gutter" == o ? z(e, t, n, r) : "class" == o ? F(t) : "widget" == o && j(e, t, r)
                    }
                    t.changes = null
                }
                function H(e) {
                    return e.node == e.text && (e.node = ji("div", null, null, "position: relative"),
                    e.text.parentNode && e.text.parentNode.replaceChild(e.node, e.text),
                    e.node.appendChild(e.text),
                    xo && 8 > bo && (e.node.style.zIndex = 2)),
                    e.node
                }
                function W(e) {
                    var t = e.bgClass ? e.bgClass + " " + (e.line.bgClass || "") : e.line.bgClass;
                    if (t && (t += " CodeMirror-linebackground"),
                    e.background)
                        t ? e.background.className = t : (e.background.parentNode.removeChild(e.background),
                        e.background = null);
                    else if (t) {
                        var n = H(e);
                        e.background = n.insertBefore(ji("div", null, t), n.firstChild)
                    }
                }
                function B(e, t) {
                    var n = e.display.externalMeasured;
                    return n && n.line == t.line ? (e.display.externalMeasured = null,
                    t.measure = n.measure,
                    n.built) : Br(e, t)
                }
                function _(e, t) {
                    var n = t.text.className
                      , r = B(e, t);
                    t.text == t.node && (t.node = r.pre),
                    t.text.parentNode.replaceChild(r.pre, t.text),
                    t.text = r.pre,
                    r.bgClass != t.bgClass || r.textClass != t.textClass ? (t.bgClass = r.bgClass,
                    t.textClass = r.textClass,
                    F(t)) : n && (t.text.className = n)
                }
                function F(e) {
                    W(e),
                    e.line.wrapClass ? H(e).className = e.line.wrapClass : e.node != e.text && (e.node.className = "");
                    var t = e.textClass ? e.textClass + " " + (e.line.textClass || "") : e.line.textClass;
                    e.text.className = t || ""
                }
                function z(e, t, n, r) {
                    if (t.gutter && (t.node.removeChild(t.gutter),
                    t.gutter = null),
                    t.gutterBackground && (t.node.removeChild(t.gutterBackground),
                    t.gutterBackground = null),
                    t.line.gutterClass) {
                        var i = H(t);
                        t.gutterBackground = ji("div", null, "CodeMirror-gutter-background " + t.line.gutterClass, "left: " + (e.options.fixedGutter ? r.fixedPos : -r.gutterTotalWidth) + "px; width: " + r.gutterTotalWidth + "px"),
                        i.insertBefore(t.gutterBackground, t.text)
                    }
                    var o = t.line.gutterMarkers;
                    if (e.options.lineNumbers || o) {
                        var i = H(t)
                          , a = t.gutter = ji("div", null, "CodeMirror-gutter-wrapper", "left: " + (e.options.fixedGutter ? r.fixedPos : -r.gutterTotalWidth) + "px");
                        if (e.display.input.setUneditable(a),
                        i.insertBefore(a, t.text),
                        t.line.gutterClass && (a.className += " " + t.line.gutterClass),
                        !e.options.lineNumbers || o && o["CodeMirror-linenumbers"] || (t.lineNumber = a.appendChild(ji("div", S(e.options, n), "CodeMirror-linenumber CodeMirror-gutter-elt", "left: " + r.gutterLeft["CodeMirror-linenumbers"] + "px; width: " + e.display.lineNumInnerWidth + "px"))),
                        o)
                            for (var l = 0; l < e.options.gutters.length; ++l) {
                                var s = e.options.gutters[l]
                                  , c = o.hasOwnProperty(s) && o[s];
                                c && a.appendChild(ji("div", [c], "CodeMirror-gutter-elt", "left: " + r.gutterLeft[s] + "px; width: " + r.gutterWidth[s] + "px"))
                            }
                    }
                }
                function j(e, t, n) {
                    t.alignable && (t.alignable = null);
                    for (var r, i = t.node.firstChild; i; i = r) {
                        var r = i.nextSibling;
                        "CodeMirror-linewidget" == i.className && t.node.removeChild(i)
                    }
                    q(e, t, n)
                }
                function U(e, t, n, r) {
                    var i = B(e, t);
                    return t.text = t.node = i.pre,
                    i.bgClass && (t.bgClass = i.bgClass),
                    i.textClass && (t.textClass = i.textClass),
                    F(t),
                    z(e, t, n, r),
                    q(e, t, r),
                    t.node
                }
                function q(e, t, n) {
                    if (G(e, t.line, t, n, !0),
                    t.rest)
                        for (var r = 0; r < t.rest.length; r++)
                            G(e, t.rest[r], t, n, !1)
                }
                function G(e, t, n, r, i) {
                    if (t.widgets)
                        for (var o = H(n), a = 0, l = t.widgets; a < l.length; ++a) {
                            var s = l[a]
                              , c = ji("div", [s.node], "CodeMirror-linewidget");
                            s.handleMouseEvents || c.setAttribute("cm-ignore-events", "true"),
                            Y(s, c, n, r),
                            e.display.input.setUneditable(c),
                            i && s.above ? o.insertBefore(c, n.gutter || n.text) : o.appendChild(c),
                            Ci(s, "redraw")
                        }
                }
                function Y(e, t, n, r) {
                    if (e.noHScroll) {
                        (n.alignable || (n.alignable = [])).push(t);
                        var i = r.wrapperWidth;
                        t.style.left = r.fixedPos + "px",
                        e.coverGutter || (i -= r.gutterTotalWidth,
                        t.style.paddingLeft = r.gutterTotalWidth + "px"),
                        t.style.width = i + "px"
                    }
                    e.coverGutter && (t.style.zIndex = 5,
                    t.style.position = "relative",
                    e.noHScroll || (t.style.marginLeft = -r.gutterTotalWidth + "px"))
                }
                function $(e) {
                    return Bo(e.line, e.ch)
                }
                function V(e, t) {
                    return _o(e, t) < 0 ? t : e
                }
                function K(e, t) {
                    return _o(e, t) < 0 ? e : t
                }
                function X(e) {
                    e.state.focused || (e.display.input.focus(),
                    vn(e))
                }
                function Z(e, t, n, r, i) {
                    var o = e.doc;
                    e.display.shift = !1,
                    r || (r = o.sel);
                    var a = e.state.pasteIncoming || "paste" == i
                      , l = o.splitLines(t)
                      , s = null;
                    if (a && r.ranges.length > 1)
                        if (Fo && Fo.text.join("\n") == t) {
                            if (r.ranges.length % Fo.text.length == 0) {
                                s = [];
                                for (var c = 0; c < Fo.text.length; c++)
                                    s.push(o.splitLines(Fo.text[c]))
                            }
                        } else
                            l.length == r.ranges.length && (s = Ri(l, function(e) {
                                return [e]
                            }));
                    for (var c = r.ranges.length - 1; c >= 0; c--) {
                        var u = r.ranges[c]
                          , f = u.from()
                          , h = u.to();
                        u.empty() && (n && n > 0 ? f = Bo(f.line, f.ch - n) : e.state.overwrite && !a ? h = Bo(h.line, Math.min(Zr(o, h.line).text.length, h.ch + Ii(l).length)) : Fo && Fo.lineWise && Fo.text.join("\n") == t && (f = h = Bo(f.line, 0)));
                        var d = e.curOp.updateInput
                          , p = {
                            from: f,
                            to: h,
                            text: s ? s[c % s.length] : l,
                            origin: i || (a ? "paste" : e.state.cutIncoming ? "cut" : "+input")
                        };
                        Tn(e.doc, p),
                        Ci(e, "inputRead", e, p)
                    }
                    t && !a && Q(e, t),
                    Bn(e),
                    e.curOp.updateInput = d,
                    e.curOp.typing = !0,
                    e.state.pasteIncoming = e.state.cutIncoming = !1
                }
                function J(e, t) {
                    var n = e.clipboardData && e.clipboardData.getData("text/plain");
                    return n ? (e.preventDefault(),
                    t.isReadOnly() || t.options.disableInput || At(t, function() {
                        Z(t, n, 0, null, "paste")
                    }),
                    !0) : void 0
                }
                function Q(e, t) {
                    if (e.options.electricChars && e.options.smartIndent)
                        for (var n = e.doc.sel, r = n.ranges.length - 1; r >= 0; r--) {
                            var i = n.ranges[r];
                            if (!(i.head.ch > 100 || r && n.ranges[r - 1].head.line == i.head.line)) {
                                var o = e.getModeAt(i.head)
                                  , a = !1;
                                if (o.electricChars) {
                                    for (var l = 0; l < o.electricChars.length; l++)
                                        if (t.indexOf(o.electricChars.charAt(l)) > -1) {
                                            a = Fn(e, i.head.line, "smart");
                                            break
                                        }
                                } else
                                    o.electricInput && o.electricInput.test(Zr(e.doc, i.head.line).text.slice(0, i.head.ch)) && (a = Fn(e, i.head.line, "smart"));
                                a && Ci(e, "electricInput", e, i.head.line)
                            }
                        }
                }
                function ee(e) {
                    for (var t = [], n = [], r = 0; r < e.doc.sel.ranges.length; r++) {
                        var i = e.doc.sel.ranges[r].head.line
                          , o = {
                            anchor: Bo(i, 0),
                            head: Bo(i + 1, 0)
                        };
                        n.push(o),
                        t.push(e.getRange(o.anchor, o.head))
                    }
                    return {
                        text: t,
                        ranges: n
                    }
                }
                function te(e) {
                    e.setAttribute("autocorrect", "off"),
                    e.setAttribute("autocapitalize", "off"),
                    e.setAttribute("spellcheck", "false")
                }
                function ne(e) {
                    this.cm = e,
                    this.prevInput = "",
                    this.pollingFast = !1,
                    this.polling = new Ei,
                    this.inaccurateSelection = !1,
                    this.hasSelection = !1,
                    this.composing = null
                }
                function re() {
                    var e = ji("textarea", null, null, "position: absolute; padding: 0; width: 1px; height: 1em; outline: none")
                      , t = ji("div", [e], null, "overflow: hidden; position: relative; width: 3px; height: 0px;");
                    return wo ? e.style.width = "1000px" : e.setAttribute("wrap", "off"),
                    No && (e.style.border = "1px solid black"),
                    te(e),
                    t
                }
                function ie(e) {
                    this.cm = e,
                    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null,
                    this.polling = new Ei,
                    this.gracePeriod = !1
                }
                function oe(e, t) {
                    var n = Qe(e, t.line);
                    if (!n || n.hidden)
                        return null;
                    var r = Zr(e.doc, t.line)
                      , i = Xe(n, r, t.line)
                      , o = ii(r)
                      , a = "left";
                    if (o) {
                        var l = co(o, t.ch);
                        a = l % 2 ? "right" : "left"
                    }
                    var s = nt(i.map, t.ch, a);
                    return s.offset = "right" == s.collapse ? s.end : s.start,
                    s
                }
                function ae(e, t) {
                    return t && (e.bad = !0),
                    e
                }
                function le(e, t, n) {
                    var r;
                    if (t == e.display.lineDiv) {
                        if (r = e.display.lineDiv.childNodes[n],
                        !r)
                            return ae(e.clipPos(Bo(e.display.viewTo - 1)), !0);
                        t = null,
                        n = 0
                    } else
                        for (r = t; ; r = r.parentNode) {
                            if (!r || r == e.display.lineDiv)
                                return null;
                            if (r.parentNode && r.parentNode == e.display.lineDiv)
                                break
                        }
                    for (var i = 0; i < e.display.view.length; i++) {
                        var o = e.display.view[i];
                        if (o.node == r)
                            return se(o, t, n)
                    }
                }
                function se(e, t, n) {
                    function r(t, n, r) {
                        for (var i = -1; i < (u ? u.length : 0); i++)
                            for (var o = 0 > i ? c.map : u[i], a = 0; a < o.length; a += 3) {
                                var l = o[a + 2];
                                if (l == t || l == n) {
                                    var s = ti(0 > i ? e.line : e.rest[i])
                                      , f = o[a] + r;
                                    return (0 > r || l != t) && (f = o[a + (r ? 1 : 0)]),
                                    Bo(s, f)
                                }
                            }
                    }
                    var i = e.text.firstChild
                      , o = !1;
                    if (!t || !Va(i, t))
                        return ae(Bo(ti(e.line), 0), !0);
                    if (t == i && (o = !0,
                    t = i.childNodes[n],
                    n = 0,
                    !t)) {
                        var a = e.rest ? Ii(e.rest) : e.line;
                        return ae(Bo(ti(a), a.text.length), o)
                    }
                    var l = 3 == t.nodeType ? t : null
                      , s = t;
                    for (l || 1 != t.childNodes.length || 3 != t.firstChild.nodeType || (l = t.firstChild,
                    n && (n = l.nodeValue.length)); s.parentNode != i; )
                        s = s.parentNode;
                    var c = e.measure
                      , u = c.maps
                      , f = r(l, s, n);
                    if (f)
                        return ae(f, o);
                    for (var h = s.nextSibling, d = l ? l.nodeValue.length - n : 0; h; h = h.nextSibling) {
                        if (f = r(h, h.firstChild, 0))
                            return ae(Bo(f.line, f.ch - d), o);
                        d += h.textContent.length
                    }
                    for (var p = s.previousSibling, d = n; p; p = p.previousSibling) {
                        if (f = r(p, p.firstChild, -1))
                            return ae(Bo(f.line, f.ch + d), o);
                        d += h.textContent.length
                    }
                }
                function ce(e, t, n, r, i) {
                    function o(e) {
                        return function(t) {
                            return t.id == e
                        }
                    }
                    function a(t) {
                        if (1 == t.nodeType) {
                            var n = t.getAttribute("cm-text");
                            if (null != n)
                                return "" == n && (n = t.textContent.replace(/\u200b/g, "")),
                                void (l += n);
                            var u, f = t.getAttribute("cm-marker");
                            if (f) {
                                var h = e.findMarks(Bo(r, 0), Bo(i + 1, 0), o(+f));
                                return void (h.length && (u = h[0].find()) && (l += Jr(e.doc, u.from, u.to).join(c)))
                            }
                            if ("false" == t.getAttribute("contenteditable"))
                                return;
                            for (var d = 0; d < t.childNodes.length; d++)
                                a(t.childNodes[d]);
                            /^(pre|div|p)$/i.test(t.nodeName) && (s = !0)
                        } else if (3 == t.nodeType) {
                            var p = t.nodeValue;
                            if (!p)
                                return;
                            s && (l += c,
                            s = !1),
                            l += p
                        }
                    }
                    for (var l = "", s = !1, c = e.doc.lineSeparator(); a(t),
                    t != n; )
                        t = t.nextSibling;
                    return l
                }
                function ue(e, t) {
                    this.ranges = e,
                    this.primIndex = t
                }
                function fe(e, t) {
                    this.anchor = e,
                    this.head = t
                }
                function he(e, t) {
                    var n = e[t];
                    e.sort(function(e, t) {
                        return _o(e.from(), t.from())
                    }),
                    t = Pi(e, n);
                    for (var r = 1; r < e.length; r++) {
                        var i = e[r]
                          , o = e[r - 1];
                        if (_o(o.to(), i.from()) >= 0) {
                            var a = K(o.from(), i.from())
                              , l = V(o.to(), i.to())
                              , s = o.empty() ? i.from() == i.head : o.from() == o.head;
                            t >= r && --t,
                            e.splice(--r, 2, new fe(s ? l : a,s ? a : l))
                        }
                    }
                    return new ue(e,t)
                }
                function de(e, t) {
                    return new ue([new fe(e,t || e)],0)
                }
                function pe(e, t) {
                    return Math.max(e.first, Math.min(t, e.first + e.size - 1))
                }
                function me(e, t) {
                    if (t.line < e.first)
                        return Bo(e.first, 0);
                    var n = e.first + e.size - 1;
                    return t.line > n ? Bo(n, Zr(e, n).text.length) : ge(t, Zr(e, t.line).text.length)
                }
                function ge(e, t) {
                    var n = e.ch;
                    return null == n || n > t ? Bo(e.line, t) : 0 > n ? Bo(e.line, 0) : e
                }
                function ve(e, t) {
                    return t >= e.first && t < e.first + e.size
                }
                function ye(e, t) {
                    for (var n = [], r = 0; r < t.length; r++)
                        n[r] = me(e, t[r]);
                    return n
                }
                function xe(e, t, n, r) {
                    if (e.cm && e.cm.display.shift || e.extend) {
                        var i = t.anchor;
                        if (r) {
                            var o = _o(n, i) < 0;
                            o != _o(r, i) < 0 ? (i = n,
                            n = r) : o != _o(n, r) < 0 && (n = r)
                        }
                        return new fe(i,n)
                    }
                    return new fe(r || n,n)
                }
                function be(e, t, n, r) {
                    Te(e, new ue([xe(e, e.sel.primary(), t, n)],0), r)
                }
                function we(e, t, n) {
                    for (var r = [], i = 0; i < e.sel.ranges.length; i++)
                        r[i] = xe(e, e.sel.ranges[i], t[i], null);
                    var o = he(r, e.sel.primIndex);
                    Te(e, o, n)
                }
                function ke(e, t, n, r) {
                    var i = e.sel.ranges.slice(0);
                    i[t] = n,
                    Te(e, he(i, e.sel.primIndex), r)
                }
                function Se(e, t, n, r) {
                    Te(e, de(t, n), r)
                }
                function Ce(e, t, n) {
                    var r = {
                        ranges: t.ranges,
                        update: function(t) {
                            this.ranges = [];
                            for (var n = 0; n < t.length; n++)
                                this.ranges[n] = new fe(me(e, t[n].anchor),me(e, t[n].head))
                        },
                        origin: n && n.origin
                    };
                    return Pa(e, "beforeSelectionChange", e, r),
                    e.cm && Pa(e.cm, "beforeSelectionChange", e.cm, r),
                    r.ranges != t.ranges ? he(r.ranges, r.ranges.length - 1) : t
                }
                function Le(e, t, n) {
                    var r = e.history.done
                      , i = Ii(r);
                    i && i.ranges ? (r[r.length - 1] = t,
                    Me(e, t, n)) : Te(e, t, n)
                }
                function Te(e, t, n) {
                    Me(e, t, n),
                    fi(e, e.sel, e.cm ? e.cm.curOp.id : NaN, n)
                }
                function Me(e, t, n) {
                    (Ni(e, "beforeSelectionChange") || e.cm && Ni(e.cm, "beforeSelectionChange")) && (t = Ce(e, t, n));
                    var r = n && n.bias || (_o(t.primary().head, e.sel.primary().head) < 0 ? -1 : 1);
                    Ne(e, Ee(e, t, r, !0)),
                    n && n.scroll === !1 || !e.cm || Bn(e.cm)
                }
                function Ne(e, t) {
                    t.equals(e.sel) || (e.sel = t,
                    e.cm && (e.cm.curOp.updateInput = e.cm.curOp.selectionChanged = !0,
                    Mi(e.cm)),
                    Ci(e, "cursorActivity", e))
                }
                function Ae(e) {
                    Ne(e, Ee(e, e.sel, null, !1), Wa)
                }
                function Ee(e, t, n, r) {
                    for (var i, o = 0; o < t.ranges.length; o++) {
                        var a = t.ranges[o]
                          , l = t.ranges.length == e.sel.ranges.length && e.sel.ranges[o]
                          , s = Ie(e, a.anchor, l && l.anchor, n, r)
                          , c = Ie(e, a.head, l && l.head, n, r);
                        (i || s != a.anchor || c != a.head) && (i || (i = t.ranges.slice(0, o)),
                        i[o] = new fe(s,c))
                    }
                    return i ? he(i, t.primIndex) : t
                }
                function Oe(e, t, n, r, i) {
                    var o = Zr(e, t.line);
                    if (o.markedSpans)
                        for (var a = 0; a < o.markedSpans.length; ++a) {
                            var l = o.markedSpans[a]
                              , s = l.marker;
                            if ((null == l.from || (s.inclusiveLeft ? l.from <= t.ch : l.from < t.ch)) && (null == l.to || (s.inclusiveRight ? l.to >= t.ch : l.to > t.ch))) {
                                if (i && (Pa(s, "beforeCursorEnter"),
                                s.explicitlyCleared)) {
                                    if (o.markedSpans) {
                                        --a;
                                        continue
                                    }
                                    break
                                }
                                if (!s.atomic)
                                    continue;
                                if (n) {
                                    var c, u = s.find(0 > r ? 1 : -1);
                                    if ((0 > r ? s.inclusiveRight : s.inclusiveLeft) && (u = Pe(e, u, -r, u && u.line == t.line ? o : null)),
                                    u && u.line == t.line && (c = _o(u, n)) && (0 > r ? 0 > c : c > 0))
                                        return Oe(e, u, t, r, i)
                                }
                                var f = s.find(0 > r ? -1 : 1);
                                return (0 > r ? s.inclusiveLeft : s.inclusiveRight) && (f = Pe(e, f, r, f.line == t.line ? o : null)),
                                f ? Oe(e, f, t, r, i) : null
                            }
                        }
                    return t
                }
                function Ie(e, t, n, r, i) {
                    var o = r || 1
                      , a = Oe(e, t, n, o, i) || !i && Oe(e, t, n, o, !0) || Oe(e, t, n, -o, i) || !i && Oe(e, t, n, -o, !0);
                    return a ? a : (e.cantEdit = !0,
                    Bo(e.first, 0))
                }
                function Pe(e, t, n, r) {
                    return 0 > n && 0 == t.ch ? t.line > e.first ? me(e, Bo(t.line - 1)) : null : n > 0 && t.ch == (r || Zr(e, t.line)).text.length ? t.line < e.first + e.size - 1 ? Bo(t.line + 1, 0) : null : new Bo(t.line,t.ch + n)
                }
                function Re(e) {
                    e.display.input.showSelection(e.display.input.prepareSelection())
                }
                function De(e, t) {
                    for (var n = e.doc, r = {}, i = r.cursors = document.createDocumentFragment(), o = r.selection = document.createDocumentFragment(), a = 0; a < n.sel.ranges.length; a++)
                        if (t !== !1 || a != n.sel.primIndex) {
                            var l = n.sel.ranges[a];
                            if (!(l.from().line >= e.display.viewTo || l.to().line < e.display.viewFrom)) {
                                var s = l.empty();
                                (s || e.options.showCursorWhenSelecting) && He(e, l.head, i),
                                s || We(e, l, o)
                            }
                        }
                    return r
                }
                function He(e, t, n) {
                    var r = dt(e, t, "div", null, null, !e.options.singleCursorHeightPerLine)
                      , i = n.appendChild(ji("div", "\xa0", "CodeMirror-cursor"));
                    if (i.style.left = r.left + "px",
                    i.style.top = r.top + "px",
                    i.style.height = Math.max(0, r.bottom - r.top) * e.options.cursorHeight + "px",
                    r.other) {
                        var o = n.appendChild(ji("div", "\xa0", "CodeMirror-cursor CodeMirror-secondarycursor"));
                        o.style.display = "",
                        o.style.left = r.other.left + "px",
                        o.style.top = r.other.top + "px",
                        o.style.height = .85 * (r.other.bottom - r.other.top) + "px"
                    }
                }
                function We(e, t, n) {
                    function r(e, t, n, r) {
                        0 > t && (t = 0),
                        t = Math.round(t),
                        r = Math.round(r),
                        l.appendChild(ji("div", null, "CodeMirror-selected", "position: absolute; left: " + e + "px; top: " + t + "px; width: " + (null == n ? u - e : n) + "px; height: " + (r - t) + "px"))
                    }
                    function i(t, n, i) {
                        function o(n, r) {
                            return ht(e, Bo(t, n), "div", f, r)
                        }
                        var l, s, f = Zr(a, t), h = f.text.length;
                        return eo(ii(f), n || 0, null == i ? h : i, function(e, t, a) {
                            var f, d, p, m = o(e, "left");
                            if (e == t)
                                f = m,
                                d = p = m.left;
                            else {
                                if (f = o(t - 1, "right"),
                                "rtl" == a) {
                                    var g = m;
                                    m = f,
                                    f = g
                                }
                                d = m.left,
                                p = f.right
                            }
                            null == n && 0 == e && (d = c),
                            f.top - m.top > 3 && (r(d, m.top, null, m.bottom),
                            d = c,
                            m.bottom < f.top && r(d, m.bottom, null, f.top)),
                            null == i && t == h && (p = u),
                            (!l || m.top < l.top || m.top == l.top && m.left < l.left) && (l = m),
                            (!s || f.bottom > s.bottom || f.bottom == s.bottom && f.right > s.right) && (s = f),
                            c + 1 > d && (d = c),
                            r(d, f.top, p - d, f.bottom)
                        }),
                        {
                            start: l,
                            end: s
                        }
                    }
                    var o = e.display
                      , a = e.doc
                      , l = document.createDocumentFragment()
                      , s = Ge(e.display)
                      , c = s.left
                      , u = Math.max(o.sizerWidth, $e(e) - o.sizer.offsetLeft) - s.right
                      , f = t.from()
                      , h = t.to();
                    if (f.line == h.line)
                        i(f.line, f.ch, h.ch);
                    else {
                        var d = Zr(a, f.line)
                          , p = Zr(a, h.line)
                          , m = yr(d) == yr(p)
                          , g = i(f.line, f.ch, m ? d.text.length + 1 : null).end
                          , v = i(h.line, m ? 0 : null, h.ch).start;
                        m && (g.top < v.top - 2 ? (r(g.right, g.top, null, g.bottom),
                        r(c, v.top, v.left, v.bottom)) : r(g.right, g.top, v.left - g.right, g.bottom)),
                        g.bottom < v.top && r(c, g.bottom, null, v.top)
                    }
                    n.appendChild(l)
                }
                function Be(e) {
                    if (e.state.focused) {
                        var t = e.display;
                        clearInterval(t.blinker);
                        var n = !0;
                        t.cursorDiv.style.visibility = "",
                        e.options.cursorBlinkRate > 0 ? t.blinker = setInterval(function() {
                            t.cursorDiv.style.visibility = (n = !n) ? "" : "hidden"
                        }, e.options.cursorBlinkRate) : e.options.cursorBlinkRate < 0 && (t.cursorDiv.style.visibility = "hidden")
                    }
                }
                function _e(e, t) {
                    e.doc.mode.startState && e.doc.frontier < e.display.viewTo && e.state.highlight.set(t, Bi(Fe, e))
                }
                function Fe(e) {
                    var t = e.doc;
                    if (t.frontier < t.first && (t.frontier = t.first),
                    !(t.frontier >= e.display.viewTo)) {
                        var n = +new Date + e.options.workTime
                          , r = sa(t.mode, je(e, t.frontier))
                          , i = [];
                        t.iter(t.frontier, Math.min(t.first + t.size, e.display.viewTo + 500), function(o) {
                            if (t.frontier >= e.display.viewFrom) {
                                var a = o.styles
                                  , l = o.text.length > e.options.maxHighlightLength
                                  , s = Rr(e, o, l ? sa(t.mode, r) : r, !0);
                                o.styles = s.styles;
                                var c = o.styleClasses
                                  , u = s.classes;
                                u ? o.styleClasses = u : c && (o.styleClasses = null);
                                for (var f = !a || a.length != o.styles.length || c != u && (!c || !u || c.bgClass != u.bgClass || c.textClass != u.textClass), h = 0; !f && h < a.length; ++h)
                                    f = a[h] != o.styles[h];
                                f && i.push(t.frontier),
                                o.stateAfter = l ? r : sa(t.mode, r)
                            } else
                                o.text.length <= e.options.maxHighlightLength && Hr(e, o.text, r),
                                o.stateAfter = t.frontier % 5 == 0 ? sa(t.mode, r) : null;
                            return ++t.frontier,
                            +new Date > n ? (_e(e, e.options.workDelay),
                            !0) : void 0
                        }),
                        i.length && At(e, function() {
                            for (var t = 0; t < i.length; t++)
                                Ht(e, i[t], "text")
                        })
                    }
                }
                function ze(e, t, n) {
                    for (var r, i, o = e.doc, a = n ? -1 : t - (e.doc.mode.innerMode ? 1e3 : 100), l = t; l > a; --l) {
                        if (l <= o.first)
                            return o.first;
                        var s = Zr(o, l - 1);
                        if (s.stateAfter && (!n || l <= o.frontier))
                            return l;
                        var c = Fa(s.text, null, e.options.tabSize);
                        (null == i || r > c) && (i = l - 1,
                        r = c)
                    }
                    return i
                }
                function je(e, t, n) {
                    var r = e.doc
                      , i = e.display;
                    if (!r.mode.startState)
                        return !0;
                    var o = ze(e, t, n)
                      , a = o > r.first && Zr(r, o - 1).stateAfter;
                    return a = a ? sa(r.mode, a) : ca(r.mode),
                    r.iter(o, t, function(n) {
                        Hr(e, n.text, a);
                        var l = o == t - 1 || o % 5 == 0 || o >= i.viewFrom && o < i.viewTo;
                        n.stateAfter = l ? sa(r.mode, a) : null,
                        ++o
                    }),
                    n && (r.frontier = o),
                    a
                }
                function Ue(e) {
                    return e.lineSpace.offsetTop
                }
                function qe(e) {
                    return e.mover.offsetHeight - e.lineSpace.offsetHeight
                }
                function Ge(e) {
                    if (e.cachedPaddingH)
                        return e.cachedPaddingH;
                    var t = qi(e.measure, ji("pre", "x"))
                      , n = window.getComputedStyle ? window.getComputedStyle(t) : t.currentStyle
                      , r = {
                        left: parseInt(n.paddingLeft),
                        right: parseInt(n.paddingRight)
                    };
                    return isNaN(r.left) || isNaN(r.right) || (e.cachedPaddingH = r),
                    r
                }
                function Ye(e) {
                    return Da - e.display.nativeBarWidth
                }
                function $e(e) {
                    return e.display.scroller.clientWidth - Ye(e) - e.display.barWidth
                }
                function Ve(e) {
                    return e.display.scroller.clientHeight - Ye(e) - e.display.barHeight
                }
                function Ke(e, t, n) {
                    var r = e.options.lineWrapping
                      , i = r && $e(e);
                    if (!t.measure.heights || r && t.measure.width != i) {
                        var o = t.measure.heights = [];
                        if (r) {
                            t.measure.width = i;
                            for (var a = t.text.firstChild.getClientRects(), l = 0; l < a.length - 1; l++) {
                                var s = a[l]
                                  , c = a[l + 1];
                                Math.abs(s.bottom - c.bottom) > 2 && o.push((s.bottom + c.top) / 2 - n.top)
                            }
                        }
                        o.push(n.bottom - n.top)
                    }
                }
                function Xe(e, t, n) {
                    if (e.line == t)
                        return {
                            map: e.measure.map,
                            cache: e.measure.cache
                        };
                    for (var r = 0; r < e.rest.length; r++)
                        if (e.rest[r] == t)
                            return {
                                map: e.measure.maps[r],
                                cache: e.measure.caches[r]
                            };
                    for (var r = 0; r < e.rest.length; r++)
                        if (ti(e.rest[r]) > n)
                            return {
                                map: e.measure.maps[r],
                                cache: e.measure.caches[r],
                                before: !0
                            }
                }
                function Ze(e, t) {
                    t = yr(t);
                    var n = ti(t)
                      , r = e.display.externalMeasured = new Pt(e.doc,t,n);
                    r.lineN = n;
                    var i = r.built = Br(e, r);
                    return r.text = i.pre,
                    qi(e.display.lineMeasure, i.pre),
                    r
                }
                function Je(e, t, n, r) {
                    return tt(e, et(e, t), n, r)
                }
                function Qe(e, t) {
                    if (t >= e.display.viewFrom && t < e.display.viewTo)
                        return e.display.view[Bt(e, t)];
                    var n = e.display.externalMeasured;
                    return n && t >= n.lineN && t < n.lineN + n.size ? n : void 0
                }
                function et(e, t) {
                    var n = ti(t)
                      , r = Qe(e, n);
                    r && !r.text ? r = null : r && r.changes && (D(e, r, n, P(e)),
                    e.curOp.forceUpdate = !0),
                    r || (r = Ze(e, t));
                    var i = Xe(r, t, n);
                    return {
                        line: t,
                        view: r,
                        rect: null,
                        map: i.map,
                        cache: i.cache,
                        before: i.before,
                        hasHeights: !1
                    }
                }
                function tt(e, t, n, r, i) {
                    t.before && (n = -1);
                    var o, a = n + (r || "");
                    return t.cache.hasOwnProperty(a) ? o = t.cache[a] : (t.rect || (t.rect = t.view.text.getBoundingClientRect()),
                    t.hasHeights || (Ke(e, t.view, t.rect),
                    t.hasHeights = !0),
                    o = rt(e, t, n, r),
                    o.bogus || (t.cache[a] = o)),
                    {
                        left: o.left,
                        right: o.right,
                        top: i ? o.rtop : o.top,
                        bottom: i ? o.rbottom : o.bottom
                    }
                }
                function nt(e, t, n) {
                    for (var r, i, o, a, l = 0; l < e.length; l += 3) {
                        var s = e[l]
                          , c = e[l + 1];
                        if (s > t ? (i = 0,
                        o = 1,
                        a = "left") : c > t ? (i = t - s,
                        o = i + 1) : (l == e.length - 3 || t == c && e[l + 3] > t) && (o = c - s,
                        i = o - 1,
                        t >= c && (a = "right")),
                        null != i) {
                            if (r = e[l + 2],
                            s == c && n == (r.insertLeft ? "left" : "right") && (a = n),
                            "left" == n && 0 == i)
                                for (; l && e[l - 2] == e[l - 3] && e[l - 1].insertLeft; )
                                    r = e[(l -= 3) + 2],
                                    a = "left";
                            if ("right" == n && i == c - s)
                                for (; l < e.length - 3 && e[l + 3] == e[l + 4] && !e[l + 5].insertLeft; )
                                    r = e[(l += 3) + 2],
                                    a = "right";
                            break
                        }
                    }
                    return {
                        node: r,
                        start: i,
                        end: o,
                        collapse: a,
                        coverStart: s,
                        coverEnd: c
                    }
                }
                function rt(e, t, n, r) {
                    var i, o = nt(t.map, n, r), a = o.node, l = o.start, s = o.end, c = o.collapse;
                    if (3 == a.nodeType) {
                        for (var u = 0; 4 > u; u++) {
                            for (; l && zi(t.line.text.charAt(o.coverStart + l)); )
                                --l;
                            for (; o.coverStart + s < o.coverEnd && zi(t.line.text.charAt(o.coverStart + s)); )
                                ++s;
                            if (xo && 9 > bo && 0 == l && s == o.coverEnd - o.coverStart)
                                i = a.parentNode.getBoundingClientRect();
                            else if (xo && e.options.lineWrapping) {
                                var f = qa(a, l, s).getClientRects();
                                i = f.length ? f["right" == r ? f.length - 1 : 0] : qo
                            } else
                                i = qa(a, l, s).getBoundingClientRect() || qo;
                            if (i.left || i.right || 0 == l)
                                break;
                            s = l,
                            l -= 1,
                            c = "right"
                        }
                        xo && 11 > bo && (i = it(e.display.measure, i))
                    } else {
                        l > 0 && (c = r = "right");
                        var f;
                        i = e.options.lineWrapping && (f = a.getClientRects()).length > 1 ? f["right" == r ? f.length - 1 : 0] : a.getBoundingClientRect()
                    }
                    if (xo && 9 > bo && !l && (!i || !i.left && !i.right)) {
                        var h = a.parentNode.getClientRects()[0];
                        i = h ? {
                            left: h.left,
                            right: h.left + xt(e.display),
                            top: h.top,
                            bottom: h.bottom
                        } : qo
                    }
                    for (var d = i.top - t.rect.top, p = i.bottom - t.rect.top, m = (d + p) / 2, g = t.view.measure.heights, u = 0; u < g.length - 1 && !(m < g[u]); u++)
                        ;
                    var v = u ? g[u - 1] : 0
                      , y = g[u]
                      , x = {
                        left: ("right" == c ? i.right : i.left) - t.rect.left,
                        right: ("left" == c ? i.left : i.right) - t.rect.left,
                        top: v,
                        bottom: y
                    };
                    return i.left || i.right || (x.bogus = !0),
                    e.options.singleCursorHeightPerLine || (x.rtop = d,
                    x.rbottom = p),
                    x
                }
                function it(e, t) {
                    if (!window.screen || null == screen.logicalXDPI || screen.logicalXDPI == screen.deviceXDPI || !Qi(e))
                        return t;
                    var n = screen.logicalXDPI / screen.deviceXDPI
                      , r = screen.logicalYDPI / screen.deviceYDPI;
                    return {
                        left: t.left * n,
                        right: t.right * n,
                        top: t.top * r,
                        bottom: t.bottom * r
                    }
                }
                function ot(e) {
                    if (e.measure && (e.measure.cache = {},
                    e.measure.heights = null,
                    e.rest))
                        for (var t = 0; t < e.rest.length; t++)
                            e.measure.caches[t] = {}
                }
                function at(e) {
                    e.display.externalMeasure = null,
                    Ui(e.display.lineMeasure);
                    for (var t = 0; t < e.display.view.length; t++)
                        ot(e.display.view[t])
                }
                function lt(e) {
                    at(e),
                    e.display.cachedCharWidth = e.display.cachedTextHeight = e.display.cachedPaddingH = null,
                    e.options.lineWrapping || (e.display.maxLineChanged = !0),
                    e.display.lineNumChars = null
                }
                function st() {
                    return window.pageXOffset || (document.documentElement || document.body).scrollLeft
                }
                function ct() {
                    return window.pageYOffset || (document.documentElement || document.body).scrollTop
                }
                function ut(e, t, n, r) {
                    if (t.widgets)
                        for (var i = 0; i < t.widgets.length; ++i)
                            if (t.widgets[i].above) {
                                var o = Lr(t.widgets[i]);
                                n.top += o,
                                n.bottom += o
                            }
                    if ("line" == r)
                        return n;
                    r || (r = "local");
                    var a = ri(t);
                    if ("local" == r ? a += Ue(e.display) : a -= e.display.viewOffset,
                    "page" == r || "window" == r) {
                        var l = e.display.lineSpace.getBoundingClientRect();
                        a += l.top + ("window" == r ? 0 : ct());
                        var s = l.left + ("window" == r ? 0 : st());
                        n.left += s,
                        n.right += s
                    }
                    return n.top += a,
                    n.bottom += a,
                    n
                }
                function ft(e, t, n) {
                    if ("div" == n)
                        return t;
                    var r = t.left
                      , i = t.top;
                    if ("page" == n)
                        r -= st(),
                        i -= ct();
                    else if ("local" == n || !n) {
                        var o = e.display.sizer.getBoundingClientRect();
                        r += o.left,
                        i += o.top
                    }
                    var a = e.display.lineSpace.getBoundingClientRect();
                    return {
                        left: r - a.left,
                        top: i - a.top
                    }
                }
                function ht(e, t, n, r, i) {
                    return r || (r = Zr(e.doc, t.line)),
                    ut(e, r, Je(e, r, t.ch, i), n)
                }
                function dt(e, t, n, r, i, o) {
                    function a(t, a) {
                        var l = tt(e, i, t, a ? "right" : "left", o);
                        return a ? l.left = l.right : l.right = l.left,
                        ut(e, r, l, n)
                    }
                    function l(e, t) {
                        var n = s[t]
                          , r = n.level % 2;
                        return e == to(n) && t && n.level < s[t - 1].level ? (n = s[--t],
                        e = no(n) - (n.level % 2 ? 0 : 1),
                        r = !0) : e == no(n) && t < s.length - 1 && n.level < s[t + 1].level && (n = s[++t],
                        e = to(n) - n.level % 2,
                        r = !1),
                        r && e == n.to && e > n.from ? a(e - 1) : a(e, r)
                    }
                    r = r || Zr(e.doc, t.line),
                    i || (i = et(e, r));
                    var s = ii(r)
                      , c = t.ch;
                    if (!s)
                        return a(c);
                    var u = co(s, c)
                      , f = l(c, u);
                    return null != al && (f.other = l(c, al)),
                    f
                }
                function pt(e, t) {
                    var n = 0
                      , t = me(e.doc, t);
                    e.options.lineWrapping || (n = xt(e.display) * t.ch);
                    var r = Zr(e.doc, t.line)
                      , i = ri(r) + Ue(e.display);
                    return {
                        left: n,
                        right: n,
                        top: i,
                        bottom: i + r.height
                    }
                }
                function mt(e, t, n, r) {
                    var i = Bo(e, t);
                    return i.xRel = r,
                    n && (i.outside = !0),
                    i
                }
                function gt(e, t, n) {
                    var r = e.doc;
                    if (n += e.display.viewOffset,
                    0 > n)
                        return mt(r.first, 0, !0, -1);
                    var i = ni(r, n)
                      , o = r.first + r.size - 1;
                    if (i > o)
                        return mt(r.first + r.size - 1, Zr(r, o).text.length, !0, 1);
                    0 > t && (t = 0);
                    for (var a = Zr(r, i); ; ) {
                        var l = vt(e, a, i, t, n)
                          , s = gr(a)
                          , c = s && s.find(0, !0);
                        if (!s || !(l.ch > c.from.ch || l.ch == c.from.ch && l.xRel > 0))
                            return l;
                        i = ti(a = c.to.line)
                    }
                }
                function vt(e, t, n, r, i) {
                    function o(r) {
                        var i = dt(e, Bo(n, r), "line", t, c);
                        return l = !0,
                        a > i.bottom ? i.left - s : a < i.top ? i.left + s : (l = !1,
                        i.left)
                    }
                    var a = i - ri(t)
                      , l = !1
                      , s = 2 * e.display.wrapper.clientWidth
                      , c = et(e, t)
                      , u = ii(t)
                      , f = t.text.length
                      , h = ro(t)
                      , d = io(t)
                      , p = o(h)
                      , m = l
                      , g = o(d)
                      , v = l;
                    if (r > g)
                        return mt(n, d, v, 1);
                    for (; ; ) {
                        if (u ? d == h || d == fo(t, h, 1) : 1 >= d - h) {
                            for (var y = p > r || g - r >= r - p ? h : d, x = r - (y == h ? p : g); zi(t.text.charAt(y)); )
                                ++y;
                            var b = mt(n, y, y == h ? m : v, -1 > x ? -1 : x > 1 ? 1 : 0);
                            return b
                        }
                        var w = Math.ceil(f / 2)
                          , k = h + w;
                        if (u) {
                            k = h;
                            for (var S = 0; w > S; ++S)
                                k = fo(t, k, 1)
                        }
                        var C = o(k);
                        C > r ? (d = k,
                        g = C,
                        (v = l) && (g += 1e3),
                        f = w) : (h = k,
                        p = C,
                        m = l,
                        f -= w)
                    }
                }
                function yt(e) {
                    if (null != e.cachedTextHeight)
                        return e.cachedTextHeight;
                    if (null == zo) {
                        zo = ji("pre");
                        for (var t = 0; 49 > t; ++t)
                            zo.appendChild(document.createTextNode("x")),
                            zo.appendChild(ji("br"));
                        zo.appendChild(document.createTextNode("x"))
                    }
                    qi(e.measure, zo);
                    var n = zo.offsetHeight / 50;
                    return n > 3 && (e.cachedTextHeight = n),
                    Ui(e.measure),
                    n || 1
                }
                function xt(e) {
                    if (null != e.cachedCharWidth)
                        return e.cachedCharWidth;
                    var t = ji("span", "xxxxxxxxxx")
                      , n = ji("pre", [t]);
                    qi(e.measure, n);
                    var r = t.getBoundingClientRect()
                      , i = (r.right - r.left) / 10;
                    return i > 2 && (e.cachedCharWidth = i),
                    i || 10
                }
                function bt(e) {
                    e.curOp = {
                        cm: e,
                        viewChanged: !1,
                        startHeight: e.doc.height,
                        forceUpdate: !1,
                        updateInput: null,
                        typing: !1,
                        changeObjs: null,
                        cursorActivityHandlers: null,
                        cursorActivityCalled: 0,
                        selectionChanged: !1,
                        updateMaxLine: !1,
                        scrollLeft: null,
                        scrollTop: null,
                        scrollToPos: null,
                        focus: !1,
                        id: ++Yo
                    },
                    Go ? Go.ops.push(e.curOp) : e.curOp.ownsGroup = Go = {
                        ops: [e.curOp],
                        delayedCallbacks: []
                    }
                }
                function wt(e) {
                    var t = e.delayedCallbacks
                      , n = 0;
                    do {
                        for (; n < t.length; n++)
                            t[n].call(null);
                        for (var r = 0; r < e.ops.length; r++) {
                            var i = e.ops[r];
                            if (i.cursorActivityHandlers)
                                for (; i.cursorActivityCalled < i.cursorActivityHandlers.length; )
                                    i.cursorActivityHandlers[i.cursorActivityCalled++].call(null, i.cm)
                        }
                    } while (n < t.length)
                }
                function kt(e) {
                    var t = e.curOp
                      , n = t.ownsGroup;
                    if (n)
                        try {
                            wt(n)
                        } finally {
                            Go = null;
                            for (var r = 0; r < n.ops.length; r++)
                                n.ops[r].cm.curOp = null;
                            St(n)
                        }
                }
                function St(e) {
                    for (var t = e.ops, n = 0; n < t.length; n++)
                        Ct(t[n]);
                    for (var n = 0; n < t.length; n++)
                        Lt(t[n]);
                    for (var n = 0; n < t.length; n++)
                        Tt(t[n]);
                    for (var n = 0; n < t.length; n++)
                        Mt(t[n]);
                    for (var n = 0; n < t.length; n++)
                        Nt(t[n])
                }
                function Ct(e) {
                    var t = e.cm
                      , n = t.display;
                    T(t),
                    e.updateMaxLine && h(t),
                    e.mustUpdate = e.viewChanged || e.forceUpdate || null != e.scrollTop || e.scrollToPos && (e.scrollToPos.from.line < n.viewFrom || e.scrollToPos.to.line >= n.viewTo) || n.maxLineChanged && t.options.lineWrapping,
                    e.update = e.mustUpdate && new L(t,e.mustUpdate && {
                        top: e.scrollTop,
                        ensure: e.scrollToPos
                    },e.forceUpdate)
                }
                function Lt(e) {
                    e.updatedDisplay = e.mustUpdate && M(e.cm, e.update)
                }
                function Tt(e) {
                    var t = e.cm
                      , n = t.display;
                    e.updatedDisplay && O(t),
                    e.barMeasure = p(t),
                    n.maxLineChanged && !t.options.lineWrapping && (e.adjustWidthTo = Je(t, n.maxLine, n.maxLine.text.length).left + 3,
                    t.display.sizerWidth = e.adjustWidthTo,
                    e.barMeasure.scrollWidth = Math.max(n.scroller.clientWidth, n.sizer.offsetLeft + e.adjustWidthTo + Ye(t) + t.display.barWidth),
                    e.maxScrollLeft = Math.max(0, n.sizer.offsetLeft + e.adjustWidthTo - $e(t))),
                    (e.updatedDisplay || e.selectionChanged) && (e.preparedSelection = n.input.prepareSelection(e.focus))
                }
                function Mt(e) {
                    var t = e.cm;
                    null != e.adjustWidthTo && (t.display.sizer.style.minWidth = e.adjustWidthTo + "px",
                    e.maxScrollLeft < t.doc.scrollLeft && on(t, Math.min(t.display.scroller.scrollLeft, e.maxScrollLeft), !0),
                    t.display.maxLineChanged = !1);
                    var n = e.focus && e.focus == Gi() && (!document.hasFocus || document.hasFocus());
                    e.preparedSelection && t.display.input.showSelection(e.preparedSelection, n),
                    (e.updatedDisplay || e.startHeight != t.doc.height) && y(t, e.barMeasure),
                    e.updatedDisplay && E(t, e.barMeasure),
                    e.selectionChanged && Be(t),
                    t.state.focused && e.updateInput && t.display.input.reset(e.typing),
                    n && X(e.cm)
                }
                function Nt(e) {
                    var t = e.cm
                      , n = t.display
                      , r = t.doc;
                    if (e.updatedDisplay && N(t, e.update),
                    null == n.wheelStartX || null == e.scrollTop && null == e.scrollLeft && !e.scrollToPos || (n.wheelStartX = n.wheelStartY = null),
                    null == e.scrollTop || n.scroller.scrollTop == e.scrollTop && !e.forceScroll || (r.scrollTop = Math.max(0, Math.min(n.scroller.scrollHeight - n.scroller.clientHeight, e.scrollTop)),
                    n.scrollbars.setScrollTop(r.scrollTop),
                    n.scroller.scrollTop = r.scrollTop),
                    null == e.scrollLeft || n.scroller.scrollLeft == e.scrollLeft && !e.forceScroll || (r.scrollLeft = Math.max(0, Math.min(n.scroller.scrollWidth - n.scroller.clientWidth, e.scrollLeft)),
                    n.scrollbars.setScrollLeft(r.scrollLeft),
                    n.scroller.scrollLeft = r.scrollLeft,
                    w(t)),
                    e.scrollToPos) {
                        var i = Rn(t, me(r, e.scrollToPos.from), me(r, e.scrollToPos.to), e.scrollToPos.margin);
                        e.scrollToPos.isCursor && t.state.focused && Pn(t, i)
                    }
                    var o = e.maybeHiddenMarkers
                      , a = e.maybeUnhiddenMarkers;
                    if (o)
                        for (var l = 0; l < o.length; ++l)
                            o[l].lines.length || Pa(o[l], "hide");
                    if (a)
                        for (var l = 0; l < a.length; ++l)
                            a[l].lines.length && Pa(a[l], "unhide");
                    n.wrapper.offsetHeight && (r.scrollTop = t.display.scroller.scrollTop),
                    e.changeObjs && Pa(t, "changes", t, e.changeObjs),
                    e.update && e.update.finish()
                }
                function At(e, t) {
                    if (e.curOp)
                        return t();
                    bt(e);
                    try {
                        return t()
                    } finally {
                        kt(e)
                    }
                }
                function Et(e, t) {
                    return function() {
                        if (e.curOp)
                            return t.apply(e, arguments);
                        bt(e);
                        try {
                            return t.apply(e, arguments)
                        } finally {
                            kt(e)
                        }
                    }
                }
                function Ot(e) {
                    return function() {
                        if (this.curOp)
                            return e.apply(this, arguments);
                        bt(this);
                        try {
                            return e.apply(this, arguments)
                        } finally {
                            kt(this)
                        }
                    }
                }
                function It(e) {
                    return function() {
                        var t = this.cm;
                        if (!t || t.curOp)
                            return e.apply(this, arguments);
                        bt(t);
                        try {
                            return e.apply(this, arguments)
                        } finally {
                            kt(t)
                        }
                    }
                }
                function Pt(e, t, n) {
                    this.line = t,
                    this.rest = xr(t),
                    this.size = this.rest ? ti(Ii(this.rest)) - n + 1 : 1,
                    this.node = this.text = null,
                    this.hidden = kr(e, t)
                }
                function Rt(e, t, n) {
                    for (var r, i = [], o = t; n > o; o = r) {
                        var a = new Pt(e.doc,Zr(e.doc, o),o);
                        r = o + a.size,
                        i.push(a)
                    }
                    return i
                }
                function Dt(e, t, n, r) {
                    null == t && (t = e.doc.first),
                    null == n && (n = e.doc.first + e.doc.size),
                    r || (r = 0);
                    var i = e.display;
                    if (r && n < i.viewTo && (null == i.updateLineNumbers || i.updateLineNumbers > t) && (i.updateLineNumbers = t),
                    e.curOp.viewChanged = !0,
                    t >= i.viewTo)
                        Wo && br(e.doc, t) < i.viewTo && Wt(e);
                    else if (n <= i.viewFrom)
                        Wo && wr(e.doc, n + r) > i.viewFrom ? Wt(e) : (i.viewFrom += r,
                        i.viewTo += r);
                    else if (t <= i.viewFrom && n >= i.viewTo)
                        Wt(e);
                    else if (t <= i.viewFrom) {
                        var o = _t(e, n, n + r, 1);
                        o ? (i.view = i.view.slice(o.index),
                        i.viewFrom = o.lineN,
                        i.viewTo += r) : Wt(e)
                    } else if (n >= i.viewTo) {
                        var o = _t(e, t, t, -1);
                        o ? (i.view = i.view.slice(0, o.index),
                        i.viewTo = o.lineN) : Wt(e)
                    } else {
                        var a = _t(e, t, t, -1)
                          , l = _t(e, n, n + r, 1);
                        a && l ? (i.view = i.view.slice(0, a.index).concat(Rt(e, a.lineN, l.lineN)).concat(i.view.slice(l.index)),
                        i.viewTo += r) : Wt(e)
                    }
                    var s = i.externalMeasured;
                    s && (n < s.lineN ? s.lineN += r : t < s.lineN + s.size && (i.externalMeasured = null))
                }
                function Ht(e, t, n) {
                    e.curOp.viewChanged = !0;
                    var r = e.display
                      , i = e.display.externalMeasured;
                    if (i && t >= i.lineN && t < i.lineN + i.size && (r.externalMeasured = null),
                    !(t < r.viewFrom || t >= r.viewTo)) {
                        var o = r.view[Bt(e, t)];
                        if (null != o.node) {
                            var a = o.changes || (o.changes = []);
                            -1 == Pi(a, n) && a.push(n)
                        }
                    }
                }
                function Wt(e) {
                    e.display.viewFrom = e.display.viewTo = e.doc.first,
                    e.display.view = [],
                    e.display.viewOffset = 0
                }
                function Bt(e, t) {
                    if (t >= e.display.viewTo)
                        return null;
                    if (t -= e.display.viewFrom,
                    0 > t)
                        return null;
                    for (var n = e.display.view, r = 0; r < n.length; r++)
                        if (t -= n[r].size,
                        0 > t)
                            return r
                }
                function _t(e, t, n, r) {
                    var i, o = Bt(e, t), a = e.display.view;
                    if (!Wo || n == e.doc.first + e.doc.size)
                        return {
                            index: o,
                            lineN: n
                        };
                    for (var l = 0, s = e.display.viewFrom; o > l; l++)
                        s += a[l].size;
                    if (s != t) {
                        if (r > 0) {
                            if (o == a.length - 1)
                                return null;
                            i = s + a[o].size - t,
                            o++
                        } else
                            i = s - t;
                        t += i,
                        n += i
                    }
                    for (; br(e.doc, n) != n; ) {
                        if (o == (0 > r ? 0 : a.length - 1))
                            return null;
                        n += r * a[o - (0 > r ? 1 : 0)].size,
                        o += r
                    }
                    return {
                        index: o,
                        lineN: n
                    }
                }
                function Ft(e, t, n) {
                    var r = e.display
                      , i = r.view;
                    0 == i.length || t >= r.viewTo || n <= r.viewFrom ? (r.view = Rt(e, t, n),
                    r.viewFrom = t) : (r.viewFrom > t ? r.view = Rt(e, t, r.viewFrom).concat(r.view) : r.viewFrom < t && (r.view = r.view.slice(Bt(e, t))),
                    r.viewFrom = t,
                    r.viewTo < n ? r.view = r.view.concat(Rt(e, r.viewTo, n)) : r.viewTo > n && (r.view = r.view.slice(0, Bt(e, n)))),
                    r.viewTo = n
                }
                function zt(e) {
                    for (var t = e.display.view, n = 0, r = 0; r < t.length; r++) {
                        var i = t[r];
                        i.hidden || i.node && !i.changes || ++n
                    }
                    return n
                }
                function jt(e) {
                    function t() {
                        i.activeTouch && (o = setTimeout(function() {
                            i.activeTouch = null
                        }, 1e3),
                        a = i.activeTouch,
                        a.end = +new Date)
                    }
                    function n(e) {
                        if (1 != e.touches.length)
                            return !1;
                        var t = e.touches[0];
                        return t.radiusX <= 1 && t.radiusY <= 1
                    }
                    function r(e, t) {
                        if (null == t.left)
                            return !0;
                        var n = t.left - e.left
                          , r = t.top - e.top;
                        return n * n + r * r > 400
                    }
                    var i = e.display;
                    Ea(i.scroller, "mousedown", Et(e, $t)),
                    xo && 11 > bo ? Ea(i.scroller, "dblclick", Et(e, function(t) {
                        if (!Ti(e, t)) {
                            var n = Yt(e, t);
                            if (n && !Jt(e, t) && !Gt(e.display, t)) {
                                Ma(t);
                                var r = e.findWordAt(n);
                                be(e.doc, r.anchor, r.head)
                            }
                        }
                    })) : Ea(i.scroller, "dblclick", function(t) {
                        Ti(e, t) || Ma(t)
                    }),
                    Do || Ea(i.scroller, "contextmenu", function(t) {
                        xn(e, t)
                    });
                    var o, a = {
                        end: 0
                    };
                    Ea(i.scroller, "touchstart", function(t) {
                        if (!Ti(e, t) && !n(t)) {
                            clearTimeout(o);
                            var r = +new Date;
                            i.activeTouch = {
                                start: r,
                                moved: !1,
                                prev: r - a.end <= 300 ? a : null
                            },
                            1 == t.touches.length && (i.activeTouch.left = t.touches[0].pageX,
                            i.activeTouch.top = t.touches[0].pageY)
                        }
                    }),
                    Ea(i.scroller, "touchmove", function() {
                        i.activeTouch && (i.activeTouch.moved = !0)
                    }),
                    Ea(i.scroller, "touchend", function(n) {
                        var o = i.activeTouch;
                        if (o && !Gt(i, n) && null != o.left && !o.moved && new Date - o.start < 300) {
                            var a, l = e.coordsChar(i.activeTouch, "page");
                            a = !o.prev || r(o, o.prev) ? new fe(l,l) : !o.prev.prev || r(o, o.prev.prev) ? e.findWordAt(l) : new fe(Bo(l.line, 0),me(e.doc, Bo(l.line + 1, 0))),
                            e.setSelection(a.anchor, a.head),
                            e.focus(),
                            Ma(n)
                        }
                        t()
                    }),
                    Ea(i.scroller, "touchcancel", t),
                    Ea(i.scroller, "scroll", function() {
                        i.scroller.clientHeight && (rn(e, i.scroller.scrollTop),
                        on(e, i.scroller.scrollLeft, !0),
                        Pa(e, "scroll", e))
                    }),
                    Ea(i.scroller, "mousewheel", function(t) {
                        an(e, t)
                    }),
                    Ea(i.scroller, "DOMMouseScroll", function(t) {
                        an(e, t)
                    }),
                    Ea(i.wrapper, "scroll", function() {
                        i.wrapper.scrollTop = i.wrapper.scrollLeft = 0
                    }),
                    i.dragFunctions = {
                        enter: function(t) {
                            Ti(e, t) || Aa(t)
                        },
                        over: function(t) {
                            Ti(e, t) || (tn(e, t),
                            Aa(t))
                        },
                        start: function(t) {
                            en(e, t)
                        },
                        drop: Et(e, Qt),
                        leave: function(t) {
                            Ti(e, t) || nn(e)
                        }
                    };
                    var l = i.input.getField();
                    Ea(l, "keyup", function(t) {
                        pn.call(e, t)
                    }),
                    Ea(l, "keydown", Et(e, hn)),
                    Ea(l, "keypress", Et(e, mn)),
                    Ea(l, "focus", Bi(vn, e)),
                    Ea(l, "blur", Bi(yn, e))
                }
                function Ut(t, n, r) {
                    var i = r && r != e.Init;
                    if (!n != !i) {
                        var o = t.display.dragFunctions
                          , a = n ? Ea : Ia;
                        a(t.display.scroller, "dragstart", o.start),
                        a(t.display.scroller, "dragenter", o.enter),
                        a(t.display.scroller, "dragover", o.over),
                        a(t.display.scroller, "dragleave", o.leave),
                        a(t.display.scroller, "drop", o.drop)
                    }
                }
                function qt(e) {
                    var t = e.display;
                    t.lastWrapHeight == t.wrapper.clientHeight && t.lastWrapWidth == t.wrapper.clientWidth || (t.cachedCharWidth = t.cachedTextHeight = t.cachedPaddingH = null,
                    t.scrollbarsClipped = !1,
                    e.setSize())
                }
                function Gt(e, t) {
                    for (var n = wi(t); n != e.wrapper; n = n.parentNode)
                        if (!n || 1 == n.nodeType && "true" == n.getAttribute("cm-ignore-events") || n.parentNode == e.sizer && n != e.mover)
                            return !0
                }
                function Yt(e, t, n, r) {
                    var i = e.display;
                    if (!n && "true" == wi(t).getAttribute("cm-not-content"))
                        return null;
                    var o, a, l = i.lineSpace.getBoundingClientRect();
                    try {
                        o = t.clientX - l.left,
                        a = t.clientY - l.top
                    } catch (t) {
                        return null
                    }
                    var s, c = gt(e, o, a);
                    if (r && 1 == c.xRel && (s = Zr(e.doc, c.line).text).length == c.ch) {
                        var u = Fa(s, s.length, e.options.tabSize) - s.length;
                        c = Bo(c.line, Math.max(0, Math.round((o - Ge(e.display).left) / xt(e.display)) - u))
                    }
                    return c
                }
                function $t(e) {
                    var t = this
                      , n = t.display;
                    if (!(Ti(t, e) || n.activeTouch && n.input.supportsTouch())) {
                        if (n.shift = e.shiftKey,
                        Gt(n, e))
                            return void (wo || (n.scroller.draggable = !1,
                            setTimeout(function() {
                                n.scroller.draggable = !0
                            }, 100)));
                        if (!Jt(t, e)) {
                            var r = Yt(t, e);
                            switch (window.focus(),
                            ki(e)) {
                            case 1:
                                t.state.selectingText ? t.state.selectingText(e) : r ? Vt(t, e, r) : wi(e) == n.scroller && Ma(e);
                                break;
                            case 2:
                                wo && (t.state.lastMiddleDown = +new Date),
                                r && be(t.doc, r),
                                setTimeout(function() {
                                    n.input.focus()
                                }, 20),
                                Ma(e);
                                break;
                            case 3:
                                Do ? xn(t, e) : gn(t)
                            }
                        }
                    }
                }
                function Vt(e, t, n) {
                    xo ? setTimeout(Bi(X, e), 0) : e.curOp.focus = Gi();
                    var r, i = +new Date;
                    Uo && Uo.time > i - 400 && 0 == _o(Uo.pos, n) ? r = "triple" : jo && jo.time > i - 400 && 0 == _o(jo.pos, n) ? (r = "double",
                    Uo = {
                        time: i,
                        pos: n
                    }) : (r = "single",
                    jo = {
                        time: i,
                        pos: n
                    });
                    var o, a = e.doc.sel, l = Eo ? t.metaKey : t.ctrlKey;
                    e.options.dragDrop && el && !e.isReadOnly() && "single" == r && (o = a.contains(n)) > -1 && (_o((o = a.ranges[o]).from(), n) < 0 || n.xRel > 0) && (_o(o.to(), n) > 0 || n.xRel < 0) ? Kt(e, t, n, l) : Xt(e, t, n, r, l)
                }
                function Kt(e, t, n, r) {
                    var i = e.display
                      , o = +new Date
                      , a = Et(e, function(l) {
                        wo && (i.scroller.draggable = !1),
                        e.state.draggingText = !1,
                        Ia(document, "mouseup", a),
                        Ia(i.scroller, "drop", a),
                        Math.abs(t.clientX - l.clientX) + Math.abs(t.clientY - l.clientY) < 10 && (Ma(l),
                        !r && +new Date - 200 < o && be(e.doc, n),
                        wo || xo && 9 == bo ? setTimeout(function() {
                            document.body.focus(),
                            i.input.focus()
                        }, 20) : i.input.focus())
                    });
                    wo && (i.scroller.draggable = !0),
                    e.state.draggingText = a,
                    i.scroller.dragDrop && i.scroller.dragDrop(),
                    Ea(document, "mouseup", a),
                    Ea(i.scroller, "drop", a)
                }
                function Xt(e, t, n, r, i) {
                    function o(t) {
                        if (0 != _o(g, t))
                            if (g = t,
                            "rect" == r) {
                                for (var i = [], o = e.options.tabSize, a = Fa(Zr(c, n.line).text, n.ch, o), l = Fa(Zr(c, t.line).text, t.ch, o), s = Math.min(a, l), d = Math.max(a, l), p = Math.min(n.line, t.line), m = Math.min(e.lastLine(), Math.max(n.line, t.line)); m >= p; p++) {
                                    var v = Zr(c, p).text
                                      , y = za(v, s, o);
                                    s == d ? i.push(new fe(Bo(p, y),Bo(p, y))) : v.length > y && i.push(new fe(Bo(p, y),Bo(p, za(v, d, o))))
                                }
                                i.length || i.push(new fe(n,n)),
                                Te(c, he(h.ranges.slice(0, f).concat(i), f), {
                                    origin: "*mouse",
                                    scroll: !1
                                }),
                                e.scrollIntoView(t)
                            } else {
                                var x = u
                                  , b = x.anchor
                                  , w = t;
                                if ("single" != r) {
                                    if ("double" == r)
                                        var k = e.findWordAt(t);
                                    else
                                        var k = new fe(Bo(t.line, 0),me(c, Bo(t.line + 1, 0)));
                                    _o(k.anchor, b) > 0 ? (w = k.head,
                                    b = K(x.from(), k.anchor)) : (w = k.anchor,
                                    b = V(x.to(), k.head))
                                }
                                var i = h.ranges.slice(0);
                                i[f] = new fe(me(c, b),w),
                                Te(c, he(i, f), Ba)
                            }
                    }
                    function a(t) {
                        var n = ++y
                          , i = Yt(e, t, !0, "rect" == r);
                        if (i)
                            if (0 != _o(i, g)) {
                                e.curOp.focus = Gi(),
                                o(i);
                                var l = b(s, c);
                                (i.line >= l.to || i.line < l.from) && setTimeout(Et(e, function() {
                                    y == n && a(t)
                                }), 150)
                            } else {
                                var u = t.clientY < v.top ? -20 : t.clientY > v.bottom ? 20 : 0;
                                u && setTimeout(Et(e, function() {
                                    y == n && (s.scroller.scrollTop += u,
                                    a(t))
                                }), 50)
                            }
                    }
                    function l(t) {
                        e.state.selectingText = !1,
                        y = 1 / 0,
                        Ma(t),
                        s.input.focus(),
                        Ia(document, "mousemove", x),
                        Ia(document, "mouseup", w),
                        c.history.lastSelOrigin = null
                    }
                    var s = e.display
                      , c = e.doc;
                    Ma(t);
                    var u, f, h = c.sel, d = h.ranges;
                    if (i && !t.shiftKey ? (f = c.sel.contains(n),
                    u = f > -1 ? d[f] : new fe(n,n)) : (u = c.sel.primary(),
                    f = c.sel.primIndex),
                    Oo ? t.shiftKey && t.metaKey : t.altKey)
                        r = "rect",
                        i || (u = new fe(n,n)),
                        n = Yt(e, t, !0, !0),
                        f = -1;
                    else if ("double" == r) {
                        var p = e.findWordAt(n);
                        u = e.display.shift || c.extend ? xe(c, u, p.anchor, p.head) : p
                    } else if ("triple" == r) {
                        var m = new fe(Bo(n.line, 0),me(c, Bo(n.line + 1, 0)));
                        u = e.display.shift || c.extend ? xe(c, u, m.anchor, m.head) : m
                    } else
                        u = xe(c, u, n);
                    i ? -1 == f ? (f = d.length,
                    Te(c, he(d.concat([u]), f), {
                        scroll: !1,
                        origin: "*mouse"
                    })) : d.length > 1 && d[f].empty() && "single" == r && !t.shiftKey ? (Te(c, he(d.slice(0, f).concat(d.slice(f + 1)), 0), {
                        scroll: !1,
                        origin: "*mouse"
                    }),
                    h = c.sel) : ke(c, f, u, Ba) : (f = 0,
                    Te(c, new ue([u],0), Ba),
                    h = c.sel);
                    var g = n
                      , v = s.wrapper.getBoundingClientRect()
                      , y = 0
                      , x = Et(e, function(e) {
                        ki(e) ? a(e) : l(e)
                    })
                      , w = Et(e, l);
                    e.state.selectingText = w,
                    Ea(document, "mousemove", x),
                    Ea(document, "mouseup", w)
                }
                function Zt(e, t, n, r) {
                    try {
                        var i = t.clientX
                          , o = t.clientY
                    } catch (t) {
                        return !1
                    }
                    if (i >= Math.floor(e.display.gutters.getBoundingClientRect().right))
                        return !1;
                    r && Ma(t);
                    var a = e.display
                      , l = a.lineDiv.getBoundingClientRect();
                    if (o > l.bottom || !Ni(e, n))
                        return bi(t);
                    o -= l.top - a.viewOffset;
                    for (var s = 0; s < e.options.gutters.length; ++s) {
                        var c = a.gutters.childNodes[s];
                        if (c && c.getBoundingClientRect().right >= i) {
                            var u = ni(e.doc, o)
                              , f = e.options.gutters[s];
                            return Pa(e, n, e, u, f, t),
                            bi(t)
                        }
                    }
                }
                function Jt(e, t) {
                    return Zt(e, t, "gutterClick", !0)
                }
                function Qt(e) {
                    var t = this;
                    if (nn(t),
                    !Ti(t, e) && !Gt(t.display, e)) {
                        Ma(e),
                        xo && ($o = +new Date);
                        var n = Yt(t, e, !0)
                          , r = e.dataTransfer.files;
                        if (n && !t.isReadOnly())
                            if (r && r.length && window.FileReader && window.File)
                                for (var i = r.length, o = Array(i), a = 0, l = function(e, r) {
                                    if (!t.options.allowDropFileTypes || -1 != Pi(t.options.allowDropFileTypes, e.type)) {
                                        var l = new FileReader;
                                        l.onload = Et(t, function() {
                                            var e = l.result;
                                            if (/[\x00-\x08\x0e-\x1f]{2}/.test(e) && (e = ""),
                                            o[r] = e,
                                            ++a == i) {
                                                n = me(t.doc, n);
                                                var s = {
                                                    from: n,
                                                    to: n,
                                                    text: t.doc.splitLines(o.join(t.doc.lineSeparator())),
                                                    origin: "paste"
                                                };
                                                Tn(t.doc, s),
                                                Le(t.doc, de(n, Qo(s)))
                                            }
                                        }),
                                        l.readAsText(e)
                                    }
                                }, s = 0; i > s; ++s)
                                    l(r[s], s);
                            else {
                                if (t.state.draggingText && t.doc.sel.contains(n) > -1)
                                    return t.state.draggingText(e),
                                    void setTimeout(function() {
                                        t.display.input.focus()
                                    }, 20);
                                try {
                                    var o = e.dataTransfer.getData("Text");
                                    if (o) {
                                        if (t.state.draggingText && !(Eo ? e.altKey : e.ctrlKey))
                                            var c = t.listSelections();
                                        if (Me(t.doc, de(n, n)),
                                        c)
                                            for (var s = 0; s < c.length; ++s)
                                                In(t.doc, "", c[s].anchor, c[s].head, "drag");
                                        t.replaceSelection(o, "around", "paste"),
                                        t.display.input.focus()
                                    }
                                } catch (e) {}
                            }
                    }
                }
                function en(e, t) {
                    if (xo && (!e.state.draggingText || +new Date - $o < 100))
                        return void Aa(t);
                    if (!Ti(e, t) && !Gt(e.display, t) && (t.dataTransfer.setData("Text", e.getSelection()),
                    t.dataTransfer.effectAllowed = "copyMove",
                    t.dataTransfer.setDragImage && !Lo)) {
                        var n = ji("img", null, null, "position: fixed; left: 0; top: 0;");
                        n.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",
                        Co && (n.width = n.height = 1,
                        e.display.wrapper.appendChild(n),
                        n._top = n.offsetTop),
                        t.dataTransfer.setDragImage(n, 0, 0),
                        Co && n.parentNode.removeChild(n)
                    }
                }
                function tn(e, t) {
                    var n = Yt(e, t);
                    if (n) {
                        var r = document.createDocumentFragment();
                        He(e, n, r),
                        e.display.dragCursor || (e.display.dragCursor = ji("div", null, "CodeMirror-cursors CodeMirror-dragcursors"),
                        e.display.lineSpace.insertBefore(e.display.dragCursor, e.display.cursorDiv)),
                        qi(e.display.dragCursor, r)
                    }
                }
                function nn(e) {
                    e.display.dragCursor && (e.display.lineSpace.removeChild(e.display.dragCursor),
                    e.display.dragCursor = null)
                }
                function rn(e, t) {
                    Math.abs(e.doc.scrollTop - t) < 2 || (e.doc.scrollTop = t,
                    go || A(e, {
                        top: t
                    }),
                    e.display.scroller.scrollTop != t && (e.display.scroller.scrollTop = t),
                    e.display.scrollbars.setScrollTop(t),
                    go && A(e),
                    _e(e, 100))
                }
                function on(e, t, n) {
                    (n ? t == e.doc.scrollLeft : Math.abs(e.doc.scrollLeft - t) < 2) || (t = Math.min(t, e.display.scroller.scrollWidth - e.display.scroller.clientWidth),
                    e.doc.scrollLeft = t,
                    w(e),
                    e.display.scroller.scrollLeft != t && (e.display.scroller.scrollLeft = t),
                    e.display.scrollbars.setScrollLeft(t))
                }
                function an(e, t) {
                    var n = Xo(t)
                      , r = n.x
                      , i = n.y
                      , o = e.display
                      , a = o.scroller
                      , l = a.scrollWidth > a.clientWidth
                      , s = a.scrollHeight > a.clientHeight;
                    if (r && l || i && s) {
                        if (i && Eo && wo)
                            e: for (var c = t.target, u = o.view; c != a; c = c.parentNode)
                                for (var f = 0; f < u.length; f++)
                                    if (u[f].node == c) {
                                        e.display.currentWheelTarget = c;
                                        break e
                                    }
                        if (r && !go && !Co && null != Ko)
                            return i && s && rn(e, Math.max(0, Math.min(a.scrollTop + i * Ko, a.scrollHeight - a.clientHeight))),
                            on(e, Math.max(0, Math.min(a.scrollLeft + r * Ko, a.scrollWidth - a.clientWidth))),
                            (!i || i && s) && Ma(t),
                            void (o.wheelStartX = null);
                        if (i && null != Ko) {
                            var h = i * Ko
                              , d = e.doc.scrollTop
                              , p = d + o.wrapper.clientHeight;
                            0 > h ? d = Math.max(0, d + h - 50) : p = Math.min(e.doc.height, p + h + 50),
                            A(e, {
                                top: d,
                                bottom: p
                            })
                        }
                        20 > Vo && (null == o.wheelStartX ? (o.wheelStartX = a.scrollLeft,
                        o.wheelStartY = a.scrollTop,
                        o.wheelDX = r,
                        o.wheelDY = i,
                        setTimeout(function() {
                            if (null != o.wheelStartX) {
                                var e = a.scrollLeft - o.wheelStartX
                                  , t = a.scrollTop - o.wheelStartY
                                  , n = t && o.wheelDY && t / o.wheelDY || e && o.wheelDX && e / o.wheelDX;
                                o.wheelStartX = o.wheelStartY = null,
                                n && (Ko = (Ko * Vo + n) / (Vo + 1),
                                ++Vo)
                            }
                        }, 200)) : (o.wheelDX += r,
                        o.wheelDY += i))
                    }
                }
                function ln(e, t, n) {
                    if ("string" == typeof t && (t = ua[t],
                    !t))
                        return !1;
                    e.display.input.ensurePolled();
                    var r = e.display.shift
                      , i = !1;
                    try {
                        e.isReadOnly() && (e.state.suppressEdits = !0),
                        n && (e.display.shift = !1),
                        i = t(e) != Ha
                    } finally {
                        e.display.shift = r,
                        e.state.suppressEdits = !1
                    }
                    return i
                }
                function sn(e, t, n) {
                    for (var r = 0; r < e.state.keyMaps.length; r++) {
                        var i = ha(t, e.state.keyMaps[r], n, e);
                        if (i)
                            return i
                    }
                    return e.options.extraKeys && ha(t, e.options.extraKeys, n, e) || ha(t, e.options.keyMap, n, e)
                }
                function cn(e, t, n, r) {
                    var i = e.state.keySeq;
                    if (i) {
                        if (da(t))
                            return "handled";
                        Zo.set(50, function() {
                            e.state.keySeq == i && (e.state.keySeq = null,
                            e.display.input.reset())
                        }),
                        t = i + " " + t
                    }
                    var o = sn(e, t, r);
                    return "multi" == o && (e.state.keySeq = t),
                    "handled" == o && Ci(e, "keyHandled", e, t, n),
                    "handled" != o && "multi" != o || (Ma(n),
                    Be(e)),
                    i && !o && /\'$/.test(t) ? (Ma(n),
                    !0) : !!o
                }
                function un(e, t) {
                    var n = pa(t, !0);
                    return n ? t.shiftKey && !e.state.keySeq ? cn(e, "Shift-" + n, t, function(t) {
                        return ln(e, t, !0)
                    }) || cn(e, n, t, function(t) {
                        return ("string" == typeof t ? /^go[A-Z]/.test(t) : t.motion) ? ln(e, t) : void 0
                    }) : cn(e, n, t, function(t) {
                        return ln(e, t)
                    }) : !1
                }
                function fn(e, t, n) {
                    return cn(e, "'" + n + "'", t, function(t) {
                        return ln(e, t, !0)
                    })
                }
                function hn(e) {
                    var t = this;
                    if (t.curOp.focus = Gi(),
                    !Ti(t, e)) {
                        xo && 11 > bo && 27 == e.keyCode && (e.returnValue = !1);
                        var n = e.keyCode;
                        t.display.shift = 16 == n || e.shiftKey;
                        var r = un(t, e);
                        Co && (Jo = r ? n : null,
                        !r && 88 == n && !rl && (Eo ? e.metaKey : e.ctrlKey) && t.replaceSelection("", null, "cut")),
                        18 != n || /\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className) || dn(t)
                    }
                }
                function dn(e) {
                    function t(e) {
                        18 != e.keyCode && e.altKey || (Za(n, "CodeMirror-crosshair"),
                        Ia(document, "keyup", t),
                        Ia(document, "mouseover", t))
                    }
                    var n = e.display.lineDiv;
                    Ja(n, "CodeMirror-crosshair"),
                    Ea(document, "keyup", t),
                    Ea(document, "mouseover", t)
                }
                function pn(e) {
                    16 == e.keyCode && (this.doc.sel.shift = !1),
                    Ti(this, e)
                }
                function mn(e) {
                    var t = this;
                    if (!(Gt(t.display, e) || Ti(t, e) || e.ctrlKey && !e.altKey || Eo && e.metaKey)) {
                        var n = e.keyCode
                          , r = e.charCode;
                        if (Co && n == Jo)
                            return Jo = null,
                            void Ma(e);
                        if (!Co || e.which && !(e.which < 10) || !un(t, e)) {
                            var i = String.fromCharCode(null == r ? n : r);
                            fn(t, e, i) || t.display.input.onKeyPress(e)
                        }
                    }
                }
                function gn(e) {
                    e.state.delayingBlurEvent = !0,
                    setTimeout(function() {
                        e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1,
                        yn(e))
                    }, 100)
                }
                function vn(e) {
                    e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1),
                    "nocursor" != e.options.readOnly && (e.state.focused || (Pa(e, "focus", e),
                    e.state.focused = !0,
                    Ja(e.display.wrapper, "CodeMirror-focused"),
                    e.curOp || e.display.selForContextMenu == e.doc.sel || (e.display.input.reset(),
                    wo && setTimeout(function() {
                        e.display.input.reset(!0)
                    }, 20)),
                    e.display.input.receivedFocus()),
                    Be(e))
                }
                function yn(e) {
                    e.state.delayingBlurEvent || (e.state.focused && (Pa(e, "blur", e),
                    e.state.focused = !1,
                    Za(e.display.wrapper, "CodeMirror-focused")),
                    clearInterval(e.display.blinker),
                    setTimeout(function() {
                        e.state.focused || (e.display.shift = !1)
                    }, 150))
                }
                function xn(e, t) {
                    Gt(e.display, t) || bn(e, t) || Ti(e, t, "contextmenu") || e.display.input.onContextMenu(t)
                }
                function bn(e, t) {
                    return Ni(e, "gutterContextMenu") ? Zt(e, t, "gutterContextMenu", !1) : !1
                }
                function wn(e, t) {
                    if (_o(e, t.from) < 0)
                        return e;
                    if (_o(e, t.to) <= 0)
                        return Qo(t);
                    var n = e.line + t.text.length - (t.to.line - t.from.line) - 1
                      , r = e.ch;
                    return e.line == t.to.line && (r += Qo(t).ch - t.to.ch),
                    Bo(n, r)
                }
                function kn(e, t) {
                    for (var n = [], r = 0; r < e.sel.ranges.length; r++) {
                        var i = e.sel.ranges[r];
                        n.push(new fe(wn(i.anchor, t),wn(i.head, t)))
                    }
                    return he(n, e.sel.primIndex)
                }
                function Sn(e, t, n) {
                    return e.line == t.line ? Bo(n.line, e.ch - t.ch + n.ch) : Bo(n.line + (e.line - t.line), e.ch)
                }
                function Cn(e, t, n) {
                    for (var r = [], i = Bo(e.first, 0), o = i, a = 0; a < t.length; a++) {
                        var l = t[a]
                          , s = Sn(l.from, i, o)
                          , c = Sn(Qo(l), i, o);
                        if (i = l.to,
                        o = c,
                        "around" == n) {
                            var u = e.sel.ranges[a]
                              , f = _o(u.head, u.anchor) < 0;
                            r[a] = new fe(f ? c : s,f ? s : c)
                        } else
                            r[a] = new fe(s,s)
                    }
                    return new ue(r,e.sel.primIndex)
                }
                function Ln(e, t, n) {
                    var r = {
                        canceled: !1,
                        from: t.from,
                        to: t.to,
                        text: t.text,
                        origin: t.origin,
                        cancel: function() {
                            this.canceled = !0
                        }
                    };
                    return n && (r.update = function(t, n, r, i) {
                        t && (this.from = me(e, t)),
                        n && (this.to = me(e, n)),
                        r && (this.text = r),
                        void 0 !== i && (this.origin = i)
                    }
                    ),
                    Pa(e, "beforeChange", e, r),
                    e.cm && Pa(e.cm, "beforeChange", e.cm, r),
                    r.canceled ? null : {
                        from: r.from,
                        to: r.to,
                        text: r.text,
                        origin: r.origin
                    }
                }
                function Tn(e, t, n) {
                    if (e.cm) {
                        if (!e.cm.curOp)
                            return Et(e.cm, Tn)(e, t, n);
                        if (e.cm.state.suppressEdits)
                            return
                    }
                    if (!(Ni(e, "beforeChange") || e.cm && Ni(e.cm, "beforeChange")) || (t = Ln(e, t, !0))) {
                        var r = Ho && !n && sr(e, t.from, t.to);
                        if (r)
                            for (var i = r.length - 1; i >= 0; --i)
                                Mn(e, {
                                    from: r[i].from,
                                    to: r[i].to,
                                    text: i ? [""] : t.text
                                });
                        else
                            Mn(e, t)
                    }
                }
                function Mn(e, t) {
                    if (1 != t.text.length || "" != t.text[0] || 0 != _o(t.from, t.to)) {
                        var n = kn(e, t);
                        ci(e, t, n, e.cm ? e.cm.curOp.id : NaN),
                        En(e, t, n, or(e, t));
                        var r = [];
                        Kr(e, function(e, n) {
                            n || -1 != Pi(r, e.history) || (xi(e.history, t),
                            r.push(e.history)),
                            En(e, t, null, or(e, t))
                        })
                    }
                }
                function Nn(e, t, n) {
                    if (!e.cm || !e.cm.state.suppressEdits) {
                        for (var r, i = e.history, o = e.sel, a = "undo" == t ? i.done : i.undone, l = "undo" == t ? i.undone : i.done, s = 0; s < a.length && (r = a[s],
                        n ? !r.ranges || r.equals(e.sel) : r.ranges); s++)
                            ;
                        if (s != a.length) {
                            for (i.lastOrigin = i.lastSelOrigin = null; r = a.pop(),
                            r.ranges; ) {
                                if (hi(r, l),
                                n && !r.equals(e.sel))
                                    return void Te(e, r, {
                                        clearRedo: !1
                                    });
                                o = r
                            }
                            var c = [];
                            hi(o, l),
                            l.push({
                                changes: c,
                                generation: i.generation
                            }),
                            i.generation = r.generation || ++i.maxGeneration;
                            for (var u = Ni(e, "beforeChange") || e.cm && Ni(e.cm, "beforeChange"), s = r.changes.length - 1; s >= 0; --s) {
                                var f = r.changes[s];
                                if (f.origin = t,
                                u && !Ln(e, f, !1))
                                    return void (a.length = 0);
                                c.push(ai(e, f));
                                var h = s ? kn(e, f) : Ii(a);
                                En(e, f, h, lr(e, f)),
                                !s && e.cm && e.cm.scrollIntoView({
                                    from: f.from,
                                    to: Qo(f)
                                });
                                var d = [];
                                Kr(e, function(e, t) {
                                    t || -1 != Pi(d, e.history) || (xi(e.history, f),
                                    d.push(e.history)),
                                    En(e, f, null, lr(e, f))
                                })
                            }
                        }
                    }
                }
                function An(e, t) {
                    if (0 != t && (e.first += t,
                    e.sel = new ue(Ri(e.sel.ranges, function(e) {
                        return new fe(Bo(e.anchor.line + t, e.anchor.ch),Bo(e.head.line + t, e.head.ch))
                    }),e.sel.primIndex),
                    e.cm)) {
                        Dt(e.cm, e.first, e.first - t, t);
                        for (var n = e.cm.display, r = n.viewFrom; r < n.viewTo; r++)
                            Ht(e.cm, r, "gutter")
                    }
                }
                function En(e, t, n, r) {
                    if (e.cm && !e.cm.curOp)
                        return Et(e.cm, En)(e, t, n, r);
                    if (t.to.line < e.first)
                        return void An(e, t.text.length - 1 - (t.to.line - t.from.line));
                    if (!(t.from.line > e.lastLine())) {
                        if (t.from.line < e.first) {
                            var i = t.text.length - 1 - (e.first - t.from.line);
                            An(e, i),
                            t = {
                                from: Bo(e.first, 0),
                                to: Bo(t.to.line + i, t.to.ch),
                                text: [Ii(t.text)],
                                origin: t.origin
                            }
                        }
                        var o = e.lastLine();
                        t.to.line > o && (t = {
                            from: t.from,
                            to: Bo(o, Zr(e, o).text.length),
                            text: [t.text[0]],
                            origin: t.origin
                        }),
                        t.removed = Jr(e, t.from, t.to),
                        n || (n = kn(e, t)),
                        e.cm ? On(e.cm, t, r) : Yr(e, t, r),
                        Me(e, n, Wa)
                    }
                }
                function On(e, t, n) {
                    var r = e.doc
                      , i = e.display
                      , a = t.from
                      , l = t.to
                      , s = !1
                      , c = a.line;
                    e.options.lineWrapping || (c = ti(yr(Zr(r, a.line))),
                    r.iter(c, l.line + 1, function(e) {
                        return e == i.maxLine ? (s = !0,
                        !0) : void 0
                    })),
                    r.sel.contains(t.from, t.to) > -1 && Mi(e),
                    Yr(r, t, n, o(e)),
                    e.options.lineWrapping || (r.iter(c, a.line + t.text.length, function(e) {
                        var t = f(e);
                        t > i.maxLineLength && (i.maxLine = e,
                        i.maxLineLength = t,
                        i.maxLineChanged = !0,
                        s = !1)
                    }),
                    s && (e.curOp.updateMaxLine = !0)),
                    r.frontier = Math.min(r.frontier, a.line),
                    _e(e, 400);
                    var u = t.text.length - (l.line - a.line) - 1;
                    t.full ? Dt(e) : a.line != l.line || 1 != t.text.length || Gr(e.doc, t) ? Dt(e, a.line, l.line + 1, u) : Ht(e, a.line, "text");
                    var h = Ni(e, "changes")
                      , d = Ni(e, "change");
                    if (d || h) {
                        var p = {
                            from: a,
                            to: l,
                            text: t.text,
                            removed: t.removed,
                            origin: t.origin
                        };
                        d && Ci(e, "change", e, p),
                        h && (e.curOp.changeObjs || (e.curOp.changeObjs = [])).push(p)
                    }
                    e.display.selForContextMenu = null
                }
                function In(e, t, n, r, i) {
                    if (r || (r = n),
                    _o(r, n) < 0) {
                        var o = r;
                        r = n,
                        n = o
                    }
                    "string" == typeof t && (t = e.splitLines(t)),
                    Tn(e, {
                        from: n,
                        to: r,
                        text: t,
                        origin: i
                    })
                }
                function Pn(e, t) {
                    if (!Ti(e, "scrollCursorIntoView")) {
                        var n = e.display
                          , r = n.sizer.getBoundingClientRect()
                          , i = null;
                        if (t.top + r.top < 0 ? i = !0 : t.bottom + r.top > (window.innerHeight || document.documentElement.clientHeight) && (i = !1),
                        null != i && !Mo) {
                            var o = ji("div", "\u200b", null, "position: absolute; top: " + (t.top - n.viewOffset - Ue(e.display)) + "px; height: " + (t.bottom - t.top + Ye(e) + n.barHeight) + "px; left: " + t.left + "px; width: 2px;");
                            e.display.lineSpace.appendChild(o),
                            o.scrollIntoView(i),
                            e.display.lineSpace.removeChild(o)
                        }
                    }
                }
                function Rn(e, t, n, r) {
                    null == r && (r = 0);
                    for (var i = 0; 5 > i; i++) {
                        var o = !1
                          , a = dt(e, t)
                          , l = n && n != t ? dt(e, n) : a
                          , s = Hn(e, Math.min(a.left, l.left), Math.min(a.top, l.top) - r, Math.max(a.left, l.left), Math.max(a.bottom, l.bottom) + r)
                          , c = e.doc.scrollTop
                          , u = e.doc.scrollLeft;
                        if (null != s.scrollTop && (rn(e, s.scrollTop),
                        Math.abs(e.doc.scrollTop - c) > 1 && (o = !0)),
                        null != s.scrollLeft && (on(e, s.scrollLeft),
                        Math.abs(e.doc.scrollLeft - u) > 1 && (o = !0)),
                        !o)
                            break
                    }
                    return a
                }
                function Dn(e, t, n, r, i) {
                    var o = Hn(e, t, n, r, i);
                    null != o.scrollTop && rn(e, o.scrollTop),
                    null != o.scrollLeft && on(e, o.scrollLeft)
                }
                function Hn(e, t, n, r, i) {
                    var o = e.display
                      , a = yt(e.display);
                    0 > n && (n = 0);
                    var l = e.curOp && null != e.curOp.scrollTop ? e.curOp.scrollTop : o.scroller.scrollTop
                      , s = Ve(e)
                      , c = {};
                    i - n > s && (i = n + s);
                    var u = e.doc.height + qe(o)
                      , f = a > n
                      , h = i > u - a;
                    if (l > n)
                        c.scrollTop = f ? 0 : n;
                    else if (i > l + s) {
                        var d = Math.min(n, (h ? u : i) - s);
                        d != l && (c.scrollTop = d)
                    }
                    var p = e.curOp && null != e.curOp.scrollLeft ? e.curOp.scrollLeft : o.scroller.scrollLeft
                      , m = $e(e) - (e.options.fixedGutter ? o.gutters.offsetWidth : 0)
                      , g = r - t > m;
                    return g && (r = t + m),
                    10 > t ? c.scrollLeft = 0 : p > t ? c.scrollLeft = Math.max(0, t - (g ? 0 : 10)) : r > m + p - 3 && (c.scrollLeft = r + (g ? 0 : 10) - m),
                    c
                }
                function Wn(e, t, n) {
                    null == t && null == n || _n(e),
                    null != t && (e.curOp.scrollLeft = (null == e.curOp.scrollLeft ? e.doc.scrollLeft : e.curOp.scrollLeft) + t),
                    null != n && (e.curOp.scrollTop = (null == e.curOp.scrollTop ? e.doc.scrollTop : e.curOp.scrollTop) + n)
                }
                function Bn(e) {
                    _n(e);
                    var t = e.getCursor()
                      , n = t
                      , r = t;
                    e.options.lineWrapping || (n = t.ch ? Bo(t.line, t.ch - 1) : t,
                    r = Bo(t.line, t.ch + 1)),
                    e.curOp.scrollToPos = {
                        from: n,
                        to: r,
                        margin: e.options.cursorScrollMargin,
                        isCursor: !0
                    }
                }
                function _n(e) {
                    var t = e.curOp.scrollToPos;
                    if (t) {
                        e.curOp.scrollToPos = null;
                        var n = pt(e, t.from)
                          , r = pt(e, t.to)
                          , i = Hn(e, Math.min(n.left, r.left), Math.min(n.top, r.top) - t.margin, Math.max(n.right, r.right), Math.max(n.bottom, r.bottom) + t.margin);
                        e.scrollTo(i.scrollLeft, i.scrollTop)
                    }
                }
                function Fn(e, t, n, r) {
                    var i, o = e.doc;
                    null == n && (n = "add"),
                    "smart" == n && (o.mode.indent ? i = je(e, t) : n = "prev");
                    var a = e.options.tabSize
                      , l = Zr(o, t)
                      , s = Fa(l.text, null, a);
                    l.stateAfter && (l.stateAfter = null);
                    var c, u = l.text.match(/^\s*/)[0];
                    if (r || /\S/.test(l.text)) {
                        if ("smart" == n && (c = o.mode.indent(i, l.text.slice(u.length), l.text),
                        c == Ha || c > 150)) {
                            if (!r)
                                return;
                            n = "prev"
                        }
                    } else
                        c = 0,
                        n = "not";
                    "prev" == n ? c = t > o.first ? Fa(Zr(o, t - 1).text, null, a) : 0 : "add" == n ? c = s + e.options.indentUnit : "subtract" == n ? c = s - e.options.indentUnit : "number" == typeof n && (c = s + n),
                    c = Math.max(0, c);
                    var f = ""
                      , h = 0;
                    if (e.options.indentWithTabs)
                        for (var d = Math.floor(c / a); d; --d)
                            h += a,
                            f += "	";
                    if (c > h && (f += Oi(c - h)),
                    f != u)
                        return In(o, f, Bo(t, 0), Bo(t, u.length), "+input"),
                        l.stateAfter = null,
                        !0;
                    for (var d = 0; d < o.sel.ranges.length; d++) {
                        var p = o.sel.ranges[d];
                        if (p.head.line == t && p.head.ch < u.length) {
                            var h = Bo(t, u.length);
                            ke(o, d, new fe(h,h));
                            break
                        }
                    }
                }
                function zn(e, t, n, r) {
                    var i = t
                      , o = t;
                    return "number" == typeof t ? o = Zr(e, pe(e, t)) : i = ti(t),
                    null == i ? null : (r(o, i) && e.cm && Ht(e.cm, i, n),
                    o)
                }
                function jn(e, t) {
                    for (var n = e.doc.sel.ranges, r = [], i = 0; i < n.length; i++) {
                        for (var o = t(n[i]); r.length && _o(o.from, Ii(r).to) <= 0; ) {
                            var a = r.pop();
                            if (_o(a.from, o.from) < 0) {
                                o.from = a.from;
                                break
                            }
                        }
                        r.push(o)
                    }
                    At(e, function() {
                        for (var t = r.length - 1; t >= 0; t--)
                            In(e.doc, "", r[t].from, r[t].to, "+delete");
                        Bn(e)
                    })
                }
                function Un(e, t, n, r, i) {
                    function o() {
                        var t = l + n;
                        return t < e.first || t >= e.first + e.size ? !1 : (l = t,
                        u = Zr(e, t))
                    }
                    function a(e) {
                        var t = (i ? fo : ho)(u, s, n, !0);
                        if (null == t) {
                            if (e || !o())
                                return !1;
                            s = i ? (0 > n ? io : ro)(u) : 0 > n ? u.text.length : 0
                        } else
                            s = t;
                        return !0
                    }
                    var l = t.line
                      , s = t.ch
                      , c = n
                      , u = Zr(e, l);
                    if ("char" == r)
                        a();
                    else if ("column" == r)
                        a(!0);
                    else if ("word" == r || "group" == r)
                        for (var f = null, h = "group" == r, d = e.cm && e.cm.getHelper(t, "wordChars"), p = !0; !(0 > n) || a(!p); p = !1) {
                            var m = u.text.charAt(s) || "\n"
                              , g = _i(m, d) ? "w" : h && "\n" == m ? "n" : !h || /\s/.test(m) ? null : "p";
                            if (!h || p || g || (g = "s"),
                            f && f != g) {
                                0 > n && (n = 1,
                                a());
                                break
                            }
                            if (g && (f = g),
                            n > 0 && !a(!p))
                                break
                        }
                    var v = Ie(e, Bo(l, s), t, c, !0);
                    return _o(t, v) || (v.hitSide = !0),
                    v
                }
                function qn(e, t, n, r) {
                    var i, o = e.doc, a = t.left;
                    if ("page" == r) {
                        var l = Math.min(e.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);
                        i = t.top + n * (l - (0 > n ? 1.5 : .5) * yt(e.display))
                    } else
                        "line" == r && (i = n > 0 ? t.bottom + 3 : t.top - 3);
                    for (; ; ) {
                        var s = gt(e, a, i);
                        if (!s.outside)
                            break;
                        if (0 > n ? 0 >= i : i >= o.height) {
                            s.hitSide = !0;
                            break
                        }
                        i += 5 * n
                    }
                    return s
                }
                function Gn(t, n, r, i) {
                    e.defaults[t] = n,
                    r && (ta[t] = i ? function(e, t, n) {
                        n != na && r(e, t, n)
                    }
                    : r)
                }
                function Yn(e) {
                    for (var t, n, r, i, o = e.split(/-(?!$)/), e = o[o.length - 1], a = 0; a < o.length - 1; a++) {
                        var l = o[a];
                        if (/^(cmd|meta|m)$/i.test(l))
                            i = !0;
                        else if (/^a(lt)?$/i.test(l))
                            t = !0;
                        else if (/^(c|ctrl|control)$/i.test(l))
                            n = !0;
                        else {
                            if (!/^s(hift)$/i.test(l))
                                throw new Error("Unrecognized modifier name: " + l);
                            r = !0
                        }
                    }
                    return t && (e = "Alt-" + e),
                    n && (e = "Ctrl-" + e),
                    i && (e = "Cmd-" + e),
                    r && (e = "Shift-" + e),
                    e
                }
                function $n(e) {
                    return "string" == typeof e ? fa[e] : e
                }
                function Vn(e, t, n, r, i) {
                    if (r && r.shared)
                        return Kn(e, t, n, r, i);
                    if (e.cm && !e.cm.curOp)
                        return Et(e.cm, Vn)(e, t, n, r, i);
                    var o = new va(e,i)
                      , a = _o(t, n);
                    if (r && Wi(r, o, !1),
                    a > 0 || 0 == a && o.clearWhenEmpty !== !1)
                        return o;
                    if (o.replacedWith && (o.collapsed = !0,
                    o.widgetNode = ji("span", [o.replacedWith], "CodeMirror-widget"),
                    r.handleMouseEvents || o.widgetNode.setAttribute("cm-ignore-events", "true"),
                    r.insertLeft && (o.widgetNode.insertLeft = !0)),
                    o.collapsed) {
                        if (vr(e, t.line, t, n, o) || t.line != n.line && vr(e, n.line, t, n, o))
                            throw new Error("Inserting collapsed marker partially overlapping an existing one");
                        Wo = !0
                    }
                    o.addToHistory && ci(e, {
                        from: t,
                        to: n,
                        origin: "markText"
                    }, e.sel, NaN);
                    var l, s = t.line, c = e.cm;
                    if (e.iter(s, n.line + 1, function(e) {
                        c && o.collapsed && !c.options.lineWrapping && yr(e) == c.display.maxLine && (l = !0),
                        o.collapsed && s != t.line && ei(e, 0),
                        nr(e, new Qn(o,s == t.line ? t.ch : null,s == n.line ? n.ch : null)),
                        ++s
                    }),
                    o.collapsed && e.iter(t.line, n.line + 1, function(t) {
                        kr(e, t) && ei(t, 0)
                    }),
                    o.clearOnEnter && Ea(o, "beforeCursorEnter", function() {
                        o.clear()
                    }),
                    o.readOnly && (Ho = !0,
                    (e.history.done.length || e.history.undone.length) && e.clearHistory()),
                    o.collapsed && (o.id = ++ga,
                    o.atomic = !0),
                    c) {
                        if (l && (c.curOp.updateMaxLine = !0),
                        o.collapsed)
                            Dt(c, t.line, n.line + 1);
                        else if (o.className || o.title || o.startStyle || o.endStyle || o.css)
                            for (var u = t.line; u <= n.line; u++)
                                Ht(c, u, "text");
                        o.atomic && Ae(c.doc),
                        Ci(c, "markerAdded", c, o)
                    }
                    return o
                }
                function Kn(e, t, n, r, i) {
                    r = Wi(r),
                    r.shared = !1;
                    var o = [Vn(e, t, n, r, i)]
                      , a = o[0]
                      , l = r.widgetNode;
                    return Kr(e, function(e) {
                        l && (r.widgetNode = l.cloneNode(!0)),
                        o.push(Vn(e, me(e, t), me(e, n), r, i));
                        for (var s = 0; s < e.linked.length; ++s)
                            if (e.linked[s].isParent)
                                return;
                        a = Ii(o)
                    }),
                    new ya(o,a)
                }
                function Xn(e) {
                    return e.findMarks(Bo(e.first, 0), e.clipPos(Bo(e.lastLine())), function(e) {
                        return e.parent
                    })
                }
                function Zn(e, t) {
                    for (var n = 0; n < t.length; n++) {
                        var r = t[n]
                          , i = r.find()
                          , o = e.clipPos(i.from)
                          , a = e.clipPos(i.to);
                        if (_o(o, a)) {
                            var l = Vn(e, o, a, r.primary, r.primary.type);
                            r.markers.push(l),
                            l.parent = r
                        }
                    }
                }
                function Jn(e) {
                    for (var t = 0; t < e.length; t++) {
                        var n = e[t]
                          , r = [n.primary.doc];
                        Kr(n.primary.doc, function(e) {
                            r.push(e)
                        });
                        for (var i = 0; i < n.markers.length; i++) {
                            var o = n.markers[i];
                            -1 == Pi(r, o.doc) && (o.parent = null,
                            n.markers.splice(i--, 1))
                        }
                    }
                }
                function Qn(e, t, n) {
                    this.marker = e,
                    this.from = t,
                    this.to = n
                }
                function er(e, t) {
                    if (e)
                        for (var n = 0; n < e.length; ++n) {
                            var r = e[n];
                            if (r.marker == t)
                                return r
                        }
                }
                function tr(e, t) {
                    for (var n, r = 0; r < e.length; ++r)
                        e[r] != t && (n || (n = [])).push(e[r]);
                    return n
                }
                function nr(e, t) {
                    e.markedSpans = e.markedSpans ? e.markedSpans.concat([t]) : [t],
                    t.marker.attachLine(e)
                }
                function rr(e, t, n) {
                    if (e)
                        for (var r, i = 0; i < e.length; ++i) {
                            var o = e[i]
                              , a = o.marker
                              , l = null == o.from || (a.inclusiveLeft ? o.from <= t : o.from < t);
                            if (l || o.from == t && "bookmark" == a.type && (!n || !o.marker.insertLeft)) {
                                var s = null == o.to || (a.inclusiveRight ? o.to >= t : o.to > t);
                                (r || (r = [])).push(new Qn(a,o.from,s ? null : o.to))
                            }
                        }
                    return r
                }
                function ir(e, t, n) {
                    if (e)
                        for (var r, i = 0; i < e.length; ++i) {
                            var o = e[i]
                              , a = o.marker
                              , l = null == o.to || (a.inclusiveRight ? o.to >= t : o.to > t);
                            if (l || o.from == t && "bookmark" == a.type && (!n || o.marker.insertLeft)) {
                                var s = null == o.from || (a.inclusiveLeft ? o.from <= t : o.from < t);
                                (r || (r = [])).push(new Qn(a,s ? null : o.from - t,null == o.to ? null : o.to - t))
                            }
                        }
                    return r
                }
                function or(e, t) {
                    if (t.full)
                        return null;
                    var n = ve(e, t.from.line) && Zr(e, t.from.line).markedSpans
                      , r = ve(e, t.to.line) && Zr(e, t.to.line).markedSpans;
                    if (!n && !r)
                        return null;
                    var i = t.from.ch
                      , o = t.to.ch
                      , a = 0 == _o(t.from, t.to)
                      , l = rr(n, i, a)
                      , s = ir(r, o, a)
                      , c = 1 == t.text.length
                      , u = Ii(t.text).length + (c ? i : 0);
                    if (l)
                        for (var f = 0; f < l.length; ++f) {
                            var h = l[f];
                            if (null == h.to) {
                                var d = er(s, h.marker);
                                d ? c && (h.to = null == d.to ? null : d.to + u) : h.to = i
                            }
                        }
                    if (s)
                        for (var f = 0; f < s.length; ++f) {
                            var h = s[f];
                            if (null != h.to && (h.to += u),
                            null == h.from) {
                                var d = er(l, h.marker);
                                d || (h.from = u,
                                c && (l || (l = [])).push(h))
                            } else
                                h.from += u,
                                c && (l || (l = [])).push(h)
                        }
                    l && (l = ar(l)),
                    s && s != l && (s = ar(s));
                    var p = [l];
                    if (!c) {
                        var m, g = t.text.length - 2;
                        if (g > 0 && l)
                            for (var f = 0; f < l.length; ++f)
                                null == l[f].to && (m || (m = [])).push(new Qn(l[f].marker,null,null));
                        for (var f = 0; g > f; ++f)
                            p.push(m);
                        p.push(s)
                    }
                    return p
                }
                function ar(e) {
                    for (var t = 0; t < e.length; ++t) {
                        var n = e[t];
                        null != n.from && n.from == n.to && n.marker.clearWhenEmpty !== !1 && e.splice(t--, 1)
                    }
                    return e.length ? e : null
                }
                function lr(e, t) {
                    var n = mi(e, t)
                      , r = or(e, t);
                    if (!n)
                        return r;
                    if (!r)
                        return n;
                    for (var i = 0; i < n.length; ++i) {
                        var o = n[i]
                          , a = r[i];
                        if (o && a)
                            e: for (var l = 0; l < a.length; ++l) {
                                for (var s = a[l], c = 0; c < o.length; ++c)
                                    if (o[c].marker == s.marker)
                                        continue e;
                                o.push(s)
                            }
                        else
                            a && (n[i] = a)
                    }
                    return n
                }
                function sr(e, t, n) {
                    var r = null;
                    if (e.iter(t.line, n.line + 1, function(e) {
                        if (e.markedSpans)
                            for (var t = 0; t < e.markedSpans.length; ++t) {
                                var n = e.markedSpans[t].marker;
                                !n.readOnly || r && -1 != Pi(r, n) || (r || (r = [])).push(n)
                            }
                    }),
                    !r)
                        return null;
                    for (var i = [{
                        from: t,
                        to: n
                    }], o = 0; o < r.length; ++o)
                        for (var a = r[o], l = a.find(0), s = 0; s < i.length; ++s) {
                            var c = i[s];
                            if (!(_o(c.to, l.from) < 0 || _o(c.from, l.to) > 0)) {
                                var u = [s, 1]
                                  , f = _o(c.from, l.from)
                                  , h = _o(c.to, l.to);
                                (0 > f || !a.inclusiveLeft && !f) && u.push({
                                    from: c.from,
                                    to: l.from
                                }),
                                (h > 0 || !a.inclusiveRight && !h) && u.push({
                                    from: l.to,
                                    to: c.to
                                }),
                                i.splice.apply(i, u),
                                s += u.length - 1
                            }
                        }
                    return i
                }
                function cr(e) {
                    var t = e.markedSpans;
                    if (t) {
                        for (var n = 0; n < t.length; ++n)
                            t[n].marker.detachLine(e);
                        e.markedSpans = null
                    }
                }
                function ur(e, t) {
                    if (t) {
                        for (var n = 0; n < t.length; ++n)
                            t[n].marker.attachLine(e);
                        e.markedSpans = t
                    }
                }
                function fr(e) {
                    return e.inclusiveLeft ? -1 : 0
                }
                function hr(e) {
                    return e.inclusiveRight ? 1 : 0
                }
                function dr(e, t) {
                    var n = e.lines.length - t.lines.length;
                    if (0 != n)
                        return n;
                    var r = e.find()
                      , i = t.find()
                      , o = _o(r.from, i.from) || fr(e) - fr(t);
                    if (o)
                        return -o;
                    var a = _o(r.to, i.to) || hr(e) - hr(t);
                    return a ? a : t.id - e.id
                }
                function pr(e, t) {
                    var n, r = Wo && e.markedSpans;
                    if (r)
                        for (var i, o = 0; o < r.length; ++o)
                            i = r[o],
                            i.marker.collapsed && null == (t ? i.from : i.to) && (!n || dr(n, i.marker) < 0) && (n = i.marker);
                    return n
                }
                function mr(e) {
                    return pr(e, !0)
                }
                function gr(e) {
                    return pr(e, !1)
                }
                function vr(e, t, n, r, i) {
                    var o = Zr(e, t)
                      , a = Wo && o.markedSpans;
                    if (a)
                        for (var l = 0; l < a.length; ++l) {
                            var s = a[l];
                            if (s.marker.collapsed) {
                                var c = s.marker.find(0)
                                  , u = _o(c.from, n) || fr(s.marker) - fr(i)
                                  , f = _o(c.to, r) || hr(s.marker) - hr(i);
                                if (!(u >= 0 && 0 >= f || 0 >= u && f >= 0) && (0 >= u && (s.marker.inclusiveRight && i.inclusiveLeft ? _o(c.to, n) >= 0 : _o(c.to, n) > 0) || u >= 0 && (s.marker.inclusiveRight && i.inclusiveLeft ? _o(c.from, r) <= 0 : _o(c.from, r) < 0)))
                                    return !0
                            }
                        }
                }
                function yr(e) {
                    for (var t; t = mr(e); )
                        e = t.find(-1, !0).line;
                    return e
                }
                function xr(e) {
                    for (var t, n; t = gr(e); )
                        e = t.find(1, !0).line,
                        (n || (n = [])).push(e);
                    return n
                }
                function br(e, t) {
                    var n = Zr(e, t)
                      , r = yr(n);
                    return n == r ? t : ti(r)
                }
                function wr(e, t) {
                    if (t > e.lastLine())
                        return t;
                    var n, r = Zr(e, t);
                    if (!kr(e, r))
                        return t;
                    for (; n = gr(r); )
                        r = n.find(1, !0).line;
                    return ti(r) + 1
                }
                function kr(e, t) {
                    var n = Wo && t.markedSpans;
                    if (n)
                        for (var r, i = 0; i < n.length; ++i)
                            if (r = n[i],
                            r.marker.collapsed) {
                                if (null == r.from)
                                    return !0;
                                if (!r.marker.widgetNode && 0 == r.from && r.marker.inclusiveLeft && Sr(e, t, r))
                                    return !0
                            }
                }
                function Sr(e, t, n) {
                    if (null == n.to) {
                        var r = n.marker.find(1, !0);
                        return Sr(e, r.line, er(r.line.markedSpans, n.marker))
                    }
                    if (n.marker.inclusiveRight && n.to == t.text.length)
                        return !0;
                    for (var i, o = 0; o < t.markedSpans.length; ++o)
                        if (i = t.markedSpans[o],
                        i.marker.collapsed && !i.marker.widgetNode && i.from == n.to && (null == i.to || i.to != n.from) && (i.marker.inclusiveLeft || n.marker.inclusiveRight) && Sr(e, t, i))
                            return !0
                }
                function Cr(e, t, n) {
                    ri(t) < (e.curOp && e.curOp.scrollTop || e.doc.scrollTop) && Wn(e, null, n)
                }
                function Lr(e) {
                    if (null != e.height)
                        return e.height;
                    var t = e.doc.cm;
                    if (!t)
                        return 0;
                    if (!Va(document.body, e.node)) {
                        var n = "position: relative;";
                        e.coverGutter && (n += "margin-left: -" + t.display.gutters.offsetWidth + "px;"),
                        e.noHScroll && (n += "width: " + t.display.wrapper.clientWidth + "px;"),
                        qi(t.display.measure, ji("div", [e.node], null, n))
                    }
                    return e.height = e.node.parentNode.offsetHeight
                }
                function Tr(e, t, n, r) {
                    var i = new xa(e,n,r)
                      , o = e.cm;
                    return o && i.noHScroll && (o.display.alignWidgets = !0),
                    zn(e, t, "widget", function(t) {
                        var n = t.widgets || (t.widgets = []);
                        if (null == i.insertAt ? n.push(i) : n.splice(Math.min(n.length - 1, Math.max(0, i.insertAt)), 0, i),
                        i.line = t,
                        o && !kr(e, t)) {
                            var r = ri(t) < e.scrollTop;
                            ei(t, t.height + Lr(i)),
                            r && Wn(o, null, i.height),
                            o.curOp.forceUpdate = !0
                        }
                        return !0
                    }),
                    i
                }
                function Mr(e, t, n, r) {
                    e.text = t,
                    e.stateAfter && (e.stateAfter = null),
                    e.styles && (e.styles = null),
                    null != e.order && (e.order = null),
                    cr(e),
                    ur(e, n);
                    var i = r ? r(e) : 1;
                    i != e.height && ei(e, i)
                }
                function Nr(e) {
                    e.parent = null,
                    cr(e)
                }
                function Ar(e, t) {
                    if (e)
                        for (; ; ) {
                            var n = e.match(/(?:^|\s+)line-(background-)?(\S+)/);
                            if (!n)
                                break;
                            e = e.slice(0, n.index) + e.slice(n.index + n[0].length);
                            var r = n[1] ? "bgClass" : "textClass";
                            null == t[r] ? t[r] = n[2] : new RegExp("(?:^|s)" + n[2] + "(?:$|s)").test(t[r]) || (t[r] += " " + n[2])
                        }
                    return e
                }
                function Er(t, n) {
                    if (t.blankLine)
                        return t.blankLine(n);
                    if (t.innerMode) {
                        var r = e.innerMode(t, n);
                        return r.mode.blankLine ? r.mode.blankLine(r.state) : void 0
                    }
                }
                function Or(t, n, r, i) {
                    for (var o = 0; 10 > o; o++) {
                        i && (i[0] = e.innerMode(t, r).mode);
                        var a = t.token(n, r);
                        if (n.pos > n.start)
                            return a
                    }
                    throw new Error("Mode " + t.name + " failed to advance stream.")
                }
                function Ir(e, t, n, r) {
                    function i(e) {
                        return {
                            start: f.start,
                            end: f.pos,
                            string: f.current(),
                            type: o || null,
                            state: e ? sa(a.mode, u) : u
                        }
                    }
                    var o, a = e.doc, l = a.mode;
                    t = me(a, t);
                    var s, c = Zr(a, t.line), u = je(e, t.line, n), f = new ma(c.text,e.options.tabSize);
                    for (r && (s = []); (r || f.pos < t.ch) && !f.eol(); )
                        f.start = f.pos,
                        o = Or(l, f, u),
                        r && s.push(i(!0));
                    return r ? s : i()
                }
                function Pr(e, t, n, r, i, o, a) {
                    var l = n.flattenSpans;
                    null == l && (l = e.options.flattenSpans);
                    var s, c = 0, u = null, f = new ma(t,e.options.tabSize), h = e.options.addModeClass && [null];
                    for ("" == t && Ar(Er(n, r), o); !f.eol(); ) {
                        if (f.pos > e.options.maxHighlightLength ? (l = !1,
                        a && Hr(e, t, r, f.pos),
                        f.pos = t.length,
                        s = null) : s = Ar(Or(n, f, r, h), o),
                        h) {
                            var d = h[0].name;
                            d && (s = "m-" + (s ? d + " " + s : d))
                        }
                        if (!l || u != s) {
                            for (; c < f.start; )
                                c = Math.min(f.start, c + 5e4),
                                i(c, u);
                            u = s
                        }
                        f.start = f.pos
                    }
                    for (; c < f.pos; ) {
                        var p = Math.min(f.pos, c + 5e4);
                        i(p, u),
                        c = p
                    }
                }
                function Rr(e, t, n, r) {
                    var i = [e.state.modeGen]
                      , o = {};
                    Pr(e, t.text, e.doc.mode, n, function(e, t) {
                        i.push(e, t)
                    }, o, r);
                    for (var a = 0; a < e.state.overlays.length; ++a) {
                        var l = e.state.overlays[a]
                          , s = 1
                          , c = 0;
                        Pr(e, t.text, l.mode, !0, function(e, t) {
                            for (var n = s; e > c; ) {
                                var r = i[s];
                                r > e && i.splice(s, 1, e, i[s + 1], r),
                                s += 2,
                                c = Math.min(e, r)
                            }
                            if (t)
                                if (l.opaque)
                                    i.splice(n, s - n, e, "cm-overlay " + t),
                                    s = n + 2;
                                else
                                    for (; s > n; n += 2) {
                                        var o = i[n + 1];
                                        i[n + 1] = (o ? o + " " : "") + "cm-overlay " + t
                                    }
                        }, o)
                    }
                    return {
                        styles: i,
                        classes: o.bgClass || o.textClass ? o : null
                    }
                }
                function Dr(e, t, n) {
                    if (!t.styles || t.styles[0] != e.state.modeGen) {
                        var r = je(e, ti(t))
                          , i = Rr(e, t, t.text.length > e.options.maxHighlightLength ? sa(e.doc.mode, r) : r);
                        t.stateAfter = r,
                        t.styles = i.styles,
                        i.classes ? t.styleClasses = i.classes : t.styleClasses && (t.styleClasses = null),
                        n === e.doc.frontier && e.doc.frontier++
                    }
                    return t.styles
                }
                function Hr(e, t, n, r) {
                    var i = e.doc.mode
                      , o = new ma(t,e.options.tabSize);
                    for (o.start = o.pos = r || 0,
                    "" == t && Er(i, n); !o.eol(); )
                        Or(i, o, n),
                        o.start = o.pos
                }
                function Wr(e, t) {
                    if (!e || /^\s*$/.test(e))
                        return null;
                    var n = t.addModeClass ? ka : wa;
                    return n[e] || (n[e] = e.replace(/\S+/g, "cm-$&"))
                }
                function Br(e, t) {
                    var n = ji("span", null, null, wo ? "padding-right: .1px" : null)
                      , r = {
                        pre: ji("pre", [n], "CodeMirror-line"),
                        content: n,
                        col: 0,
                        pos: 0,
                        cm: e,
                        splitSpaces: (xo || wo) && e.getOption("lineWrapping")
                    };
                    t.measure = {};
                    for (var i = 0; i <= (t.rest ? t.rest.length : 0); i++) {
                        var o, a = i ? t.rest[i - 1] : t.line;
                        r.pos = 0,
                        r.addToken = Fr,
                        Ji(e.display.measure) && (o = ii(a)) && (r.addToken = jr(r.addToken, o)),
                        r.map = [];
                        var l = t != e.display.externalMeasured && ti(a);
                        qr(a, r, Dr(e, a, l)),
                        a.styleClasses && (a.styleClasses.bgClass && (r.bgClass = $i(a.styleClasses.bgClass, r.bgClass || "")),
                        a.styleClasses.textClass && (r.textClass = $i(a.styleClasses.textClass, r.textClass || ""))),
                        0 == r.map.length && r.map.push(0, 0, r.content.appendChild(Zi(e.display.measure))),
                        0 == i ? (t.measure.map = r.map,
                        t.measure.cache = {}) : ((t.measure.maps || (t.measure.maps = [])).push(r.map),
                        (t.measure.caches || (t.measure.caches = [])).push({}))
                    }
                    if (wo) {
                        var s = r.content.lastChild;
                        (/\bcm-tab\b/.test(s.className) || s.querySelector && s.querySelector(".cm-tab")) && (r.content.className = "cm-tab-wrap-hack")
                    }
                    return Pa(e, "renderLine", e, t.line, r.pre),
                    r.pre.className && (r.textClass = $i(r.pre.className, r.textClass || "")),
                    r
                }
                function _r(e) {
                    var t = ji("span", "\u2022", "cm-invalidchar");
                    return t.title = "\\u" + e.charCodeAt(0).toString(16),
                    t.setAttribute("aria-label", t.title),
                    t
                }
                function Fr(e, t, n, r, i, o, a) {
                    if (t) {
                        var l = e.splitSpaces ? t.replace(/ {3,}/g, zr) : t
                          , s = e.cm.state.specialChars
                          , c = !1;
                        if (s.test(t))
                            for (var u = document.createDocumentFragment(), f = 0; ; ) {
                                s.lastIndex = f;
                                var h = s.exec(t)
                                  , d = h ? h.index - f : t.length - f;
                                if (d) {
                                    var p = document.createTextNode(l.slice(f, f + d));
                                    xo && 9 > bo ? u.appendChild(ji("span", [p])) : u.appendChild(p),
                                    e.map.push(e.pos, e.pos + d, p),
                                    e.col += d,
                                    e.pos += d
                                }
                                if (!h)
                                    break;
                                if (f += d + 1,
                                "	" == h[0]) {
                                    var m = e.cm.options.tabSize
                                      , g = m - e.col % m
                                      , p = u.appendChild(ji("span", Oi(g), "cm-tab"));
                                    p.setAttribute("role", "presentation"),
                                    p.setAttribute("cm-text", "	"),
                                    e.col += g
                                } else if ("\r" == h[0] || "\n" == h[0]) {
                                    var p = u.appendChild(ji("span", "\r" == h[0] ? "\u240d" : "\u2424", "cm-invalidchar"));
                                    p.setAttribute("cm-text", h[0]),
                                    e.col += 1
                                } else {
                                    var p = e.cm.options.specialCharPlaceholder(h[0]);
                                    p.setAttribute("cm-text", h[0]),
                                    xo && 9 > bo ? u.appendChild(ji("span", [p])) : u.appendChild(p),
                                    e.col += 1
                                }
                                e.map.push(e.pos, e.pos + 1, p),
                                e.pos++
                            }
                        else {
                            e.col += t.length;
                            var u = document.createTextNode(l);
                            e.map.push(e.pos, e.pos + t.length, u),
                            xo && 9 > bo && (c = !0),
                            e.pos += t.length
                        }
                        if (n || r || i || c || a) {
                            var v = n || "";
                            r && (v += r),
                            i && (v += i);
                            var y = ji("span", [u], v, a);
                            return o && (y.title = o),
                            e.content.appendChild(y)
                        }
                        e.content.appendChild(u)
                    }
                }
                function zr(e) {
                    for (var t = " ", n = 0; n < e.length - 2; ++n)
                        t += n % 2 ? " " : "\xa0";
                    return t += " "
                }
                function jr(e, t) {
                    return function(n, r, i, o, a, l, s) {
                        i = i ? i + " cm-force-border" : "cm-force-border";
                        for (var c = n.pos, u = c + r.length; ; ) {
                            for (var f = 0; f < t.length; f++) {
                                var h = t[f];
                                if (h.to > c && h.from <= c)
                                    break
                            }
                            if (h.to >= u)
                                return e(n, r, i, o, a, l, s);
                            e(n, r.slice(0, h.to - c), i, o, null, l, s),
                            o = null,
                            r = r.slice(h.to - c),
                            c = h.to
                        }
                    }
                }
                function Ur(e, t, n, r) {
                    var i = !r && n.widgetNode;
                    i && e.map.push(e.pos, e.pos + t, i),
                    !r && e.cm.display.input.needsContentAttribute && (i || (i = e.content.appendChild(document.createElement("span"))),
                    i.setAttribute("cm-marker", n.id)),
                    i && (e.cm.display.input.setUneditable(i),
                    e.content.appendChild(i)),
                    e.pos += t
                }
                function qr(e, t, n) {
                    var r = e.markedSpans
                      , i = e.text
                      , o = 0;
                    if (r)
                        for (var a, l, s, c, u, f, h, d = i.length, p = 0, m = 1, g = "", v = 0; ; ) {
                            if (v == p) {
                                s = c = u = f = l = "",
                                h = null,
                                v = 1 / 0;
                                for (var y, x = [], b = 0; b < r.length; ++b) {
                                    var w = r[b]
                                      , k = w.marker;
                                    "bookmark" == k.type && w.from == p && k.widgetNode ? x.push(k) : w.from <= p && (null == w.to || w.to > p || k.collapsed && w.to == p && w.from == p) ? (null != w.to && w.to != p && v > w.to && (v = w.to,
                                    c = ""),
                                    k.className && (s += " " + k.className),
                                    k.css && (l = (l ? l + ";" : "") + k.css),
                                    k.startStyle && w.from == p && (u += " " + k.startStyle),
                                    k.endStyle && w.to == v && (y || (y = [])).push(k.endStyle, w.to),
                                    k.title && !f && (f = k.title),
                                    k.collapsed && (!h || dr(h.marker, k) < 0) && (h = w)) : w.from > p && v > w.from && (v = w.from)
                                }
                                if (y)
                                    for (var b = 0; b < y.length; b += 2)
                                        y[b + 1] == v && (c += " " + y[b]);
                                if (!h || h.from == p)
                                    for (var b = 0; b < x.length; ++b)
                                        Ur(t, 0, x[b]);
                                if (h && (h.from || 0) == p) {
                                    if (Ur(t, (null == h.to ? d + 1 : h.to) - p, h.marker, null == h.from),
                                    null == h.to)
                                        return;
                                    h.to == p && (h = !1)
                                }
                            }
                            if (p >= d)
                                break;
                            for (var S = Math.min(d, v); ; ) {
                                if (g) {
                                    var C = p + g.length;
                                    if (!h) {
                                        var L = C > S ? g.slice(0, S - p) : g;
                                        t.addToken(t, L, a ? a + s : s, u, p + L.length == v ? c : "", f, l)
                                    }
                                    if (C >= S) {
                                        g = g.slice(S - p),
                                        p = S;
                                        break
                                    }
                                    p = C,
                                    u = ""
                                }
                                g = i.slice(o, o = n[m++]),
                                a = Wr(n[m++], t.cm.options)
                            }
                        }
                    else
                        for (var m = 1; m < n.length; m += 2)
                            t.addToken(t, i.slice(o, o = n[m]), Wr(n[m + 1], t.cm.options))
                }
                function Gr(e, t) {
                    return 0 == t.from.ch && 0 == t.to.ch && "" == Ii(t.text) && (!e.cm || e.cm.options.wholeLineUpdateBefore)
                }
                function Yr(e, t, n, r) {
                    function i(e) {
                        return n ? n[e] : null
                    }
                    function o(e, n, i) {
                        Mr(e, n, i, r),
                        Ci(e, "change", e, t)
                    }
                    function a(e, t) {
                        for (var n = e, o = []; t > n; ++n)
                            o.push(new ba(c[n],i(n),r));
                        return o
                    }
                    var l = t.from
                      , s = t.to
                      , c = t.text
                      , u = Zr(e, l.line)
                      , f = Zr(e, s.line)
                      , h = Ii(c)
                      , d = i(c.length - 1)
                      , p = s.line - l.line;
                    if (t.full)
                        e.insert(0, a(0, c.length)),
                        e.remove(c.length, e.size - c.length);
                    else if (Gr(e, t)) {
                        var m = a(0, c.length - 1);
                        o(f, f.text, d),
                        p && e.remove(l.line, p),
                        m.length && e.insert(l.line, m)
                    } else if (u == f)
                        if (1 == c.length)
                            o(u, u.text.slice(0, l.ch) + h + u.text.slice(s.ch), d);
                        else {
                            var m = a(1, c.length - 1);
                            m.push(new ba(h + u.text.slice(s.ch),d,r)),
                            o(u, u.text.slice(0, l.ch) + c[0], i(0)),
                            e.insert(l.line + 1, m)
                        }
                    else if (1 == c.length)
                        o(u, u.text.slice(0, l.ch) + c[0] + f.text.slice(s.ch), i(0)),
                        e.remove(l.line + 1, p);
                    else {
                        o(u, u.text.slice(0, l.ch) + c[0], i(0)),
                        o(f, h + f.text.slice(s.ch), d);
                        var m = a(1, c.length - 1);
                        p > 1 && e.remove(l.line + 1, p - 1),
                        e.insert(l.line + 1, m)
                    }
                    Ci(e, "change", e, t)
                }
                function $r(e) {
                    this.lines = e,
                    this.parent = null;
                    for (var t = 0, n = 0; t < e.length; ++t)
                        e[t].parent = this,
                        n += e[t].height;
                    this.height = n
                }
                function Vr(e) {
                    this.children = e;
                    for (var t = 0, n = 0, r = 0; r < e.length; ++r) {
                        var i = e[r];
                        t += i.chunkSize(),
                        n += i.height,
                        i.parent = this
                    }
                    this.size = t,
                    this.height = n,
                    this.parent = null
                }
                function Kr(e, t, n) {
                    function r(e, i, o) {
                        if (e.linked)
                            for (var a = 0; a < e.linked.length; ++a) {
                                var l = e.linked[a];
                                if (l.doc != i) {
                                    var s = o && l.sharedHist;
                                    n && !s || (t(l.doc, s),
                                    r(l.doc, e, s))
                                }
                            }
                    }
                    r(e, null, !0)
                }
                function Xr(e, t) {
                    if (t.cm)
                        throw new Error("This document is already in use.");
                    e.doc = t,
                    t.cm = e,
                    a(e),
                    n(e),
                    e.options.lineWrapping || h(e),
                    e.options.mode = t.modeOption,
                    Dt(e)
                }
                function Zr(e, t) {
                    if (t -= e.first,
                    0 > t || t >= e.size)
                        throw new Error("There is no line " + (t + e.first) + " in the document.");
                    for (var n = e; !n.lines; )
                        for (var r = 0; ; ++r) {
                            var i = n.children[r]
                              , o = i.chunkSize();
                            if (o > t) {
                                n = i;
                                break
                            }
                            t -= o
                        }
                    return n.lines[t]
                }
                function Jr(e, t, n) {
                    var r = []
                      , i = t.line;
                    return e.iter(t.line, n.line + 1, function(e) {
                        var o = e.text;
                        i == n.line && (o = o.slice(0, n.ch)),
                        i == t.line && (o = o.slice(t.ch)),
                        r.push(o),
                        ++i
                    }),
                    r
                }
                function Qr(e, t, n) {
                    var r = [];
                    return e.iter(t, n, function(e) {
                        r.push(e.text)
                    }),
                    r
                }
                function ei(e, t) {
                    var n = t - e.height;
                    if (n)
                        for (var r = e; r; r = r.parent)
                            r.height += n
                }
                function ti(e) {
                    if (null == e.parent)
                        return null;
                    for (var t = e.parent, n = Pi(t.lines, e), r = t.parent; r; t = r,
                    r = r.parent)
                        for (var i = 0; r.children[i] != t; ++i)
                            n += r.children[i].chunkSize();
                    return n + t.first
                }
                function ni(e, t) {
                    var n = e.first;
                    e: do {
                        for (var r = 0; r < e.children.length; ++r) {
                            var i = e.children[r]
                              , o = i.height;
                            if (o > t) {
                                e = i;
                                continue e
                            }
                            t -= o,
                            n += i.chunkSize()
                        }
                        return n
                    } while (!e.lines);
                    for (var r = 0; r < e.lines.length; ++r) {
                        var a = e.lines[r]
                          , l = a.height;
                        if (l > t)
                            break;
                        t -= l
                    }
                    return n + r
                }
                function ri(e) {
                    e = yr(e);
                    for (var t = 0, n = e.parent, r = 0; r < n.lines.length; ++r) {
                        var i = n.lines[r];
                        if (i == e)
                            break;
                        t += i.height
                    }
                    for (var o = n.parent; o; n = o,
                    o = n.parent)
                        for (var r = 0; r < o.children.length; ++r) {
                            var a = o.children[r];
                            if (a == n)
                                break;
                            t += a.height
                        }
                    return t
                }
                function ii(e) {
                    var t = e.order;
                    return null == t && (t = e.order = ll(e.text)),
                    t
                }
                function oi(e) {
                    this.done = [],
                    this.undone = [],
                    this.undoDepth = 1 / 0,
                    this.lastModTime = this.lastSelTime = 0,
                    this.lastOp = this.lastSelOp = null,
                    this.lastOrigin = this.lastSelOrigin = null,
                    this.generation = this.maxGeneration = e || 1
                }
                function ai(e, t) {
                    var n = {
                        from: $(t.from),
                        to: Qo(t),
                        text: Jr(e, t.from, t.to)
                    };
                    return di(e, n, t.from.line, t.to.line + 1),
                    Kr(e, function(e) {
                        di(e, n, t.from.line, t.to.line + 1)
                    }, !0),
                    n
                }
                function li(e) {
                    for (; e.length; ) {
                        var t = Ii(e);
                        if (!t.ranges)
                            break;
                        e.pop()
                    }
                }
                function si(e, t) {
                    return t ? (li(e.done),
                    Ii(e.done)) : e.done.length && !Ii(e.done).ranges ? Ii(e.done) : e.done.length > 1 && !e.done[e.done.length - 2].ranges ? (e.done.pop(),
                    Ii(e.done)) : void 0
                }
                function ci(e, t, n, r) {
                    var i = e.history;
                    i.undone.length = 0;
                    var o, a = +new Date;
                    if ((i.lastOp == r || i.lastOrigin == t.origin && t.origin && ("+" == t.origin.charAt(0) && e.cm && i.lastModTime > a - e.cm.options.historyEventDelay || "*" == t.origin.charAt(0))) && (o = si(i, i.lastOp == r))) {
                        var l = Ii(o.changes);
                        0 == _o(t.from, t.to) && 0 == _o(t.from, l.to) ? l.to = Qo(t) : o.changes.push(ai(e, t))
                    } else {
                        var s = Ii(i.done);
                        for (s && s.ranges || hi(e.sel, i.done),
                        o = {
                            changes: [ai(e, t)],
                            generation: i.generation
                        },
                        i.done.push(o); i.done.length > i.undoDepth; )
                            i.done.shift(),
                            i.done[0].ranges || i.done.shift()
                    }
                    i.done.push(n),
                    i.generation = ++i.maxGeneration,
                    i.lastModTime = i.lastSelTime = a,
                    i.lastOp = i.lastSelOp = r,
                    i.lastOrigin = i.lastSelOrigin = t.origin,
                    l || Pa(e, "historyAdded")
                }
                function ui(e, t, n, r) {
                    var i = t.charAt(0);
                    return "*" == i || "+" == i && n.ranges.length == r.ranges.length && n.somethingSelected() == r.somethingSelected() && new Date - e.history.lastSelTime <= (e.cm ? e.cm.options.historyEventDelay : 500)
                }
                function fi(e, t, n, r) {
                    var i = e.history
                      , o = r && r.origin;
                    n == i.lastSelOp || o && i.lastSelOrigin == o && (i.lastModTime == i.lastSelTime && i.lastOrigin == o || ui(e, o, Ii(i.done), t)) ? i.done[i.done.length - 1] = t : hi(t, i.done),
                    i.lastSelTime = +new Date,
                    i.lastSelOrigin = o,
                    i.lastSelOp = n,
                    r && r.clearRedo !== !1 && li(i.undone)
                }
                function hi(e, t) {
                    var n = Ii(t);
                    n && n.ranges && n.equals(e) || t.push(e)
                }
                function di(e, t, n, r) {
                    var i = t["spans_" + e.id]
                      , o = 0;
                    e.iter(Math.max(e.first, n), Math.min(e.first + e.size, r), function(n) {
                        n.markedSpans && ((i || (i = t["spans_" + e.id] = {}))[o] = n.markedSpans),
                        ++o
                    })
                }
                function pi(e) {
                    if (!e)
                        return null;
                    for (var t, n = 0; n < e.length; ++n)
                        e[n].marker.explicitlyCleared ? t || (t = e.slice(0, n)) : t && t.push(e[n]);
                    return t ? t.length ? t : null : e
                }
                function mi(e, t) {
                    var n = t["spans_" + e.id];
                    if (!n)
                        return null;
                    for (var r = 0, i = []; r < t.text.length; ++r)
                        i.push(pi(n[r]));
                    return i
                }
                function gi(e, t, n) {
                    for (var r = 0, i = []; r < e.length; ++r) {
                        var o = e[r];
                        if (o.ranges)
                            i.push(n ? ue.prototype.deepCopy.call(o) : o);
                        else {
                            var a = o.changes
                              , l = [];
                            i.push({
                                changes: l
                            });
                            for (var s = 0; s < a.length; ++s) {
                                var c, u = a[s];
                                if (l.push({
                                    from: u.from,
                                    to: u.to,
                                    text: u.text
                                }),
                                t)
                                    for (var f in u)
                                        (c = f.match(/^spans_(\d+)$/)) && Pi(t, Number(c[1])) > -1 && (Ii(l)[f] = u[f],
                                        delete u[f])
                            }
                        }
                    }
                    return i
                }
                function vi(e, t, n, r) {
                    n < e.line ? e.line += r : t < e.line && (e.line = t,
                    e.ch = 0)
                }
                function yi(e, t, n, r) {
                    for (var i = 0; i < e.length; ++i) {
                        var o = e[i]
                          , a = !0;
                        if (o.ranges) {
                            o.copied || (o = e[i] = o.deepCopy(),
                            o.copied = !0);
                            for (var l = 0; l < o.ranges.length; l++)
                                vi(o.ranges[l].anchor, t, n, r),
                                vi(o.ranges[l].head, t, n, r)
                        } else {
                            for (var l = 0; l < o.changes.length; ++l) {
                                var s = o.changes[l];
                                if (n < s.from.line)
                                    s.from = Bo(s.from.line + r, s.from.ch),
                                    s.to = Bo(s.to.line + r, s.to.ch);
                                else if (t <= s.to.line) {
                                    a = !1;
                                    break
                                }
                            }
                            a || (e.splice(0, i + 1),
                            i = 0)
                        }
                    }
                }
                function xi(e, t) {
                    var n = t.from.line
                      , r = t.to.line
                      , i = t.text.length - (r - n) - 1;
                    yi(e.done, n, r, i),
                    yi(e.undone, n, r, i)
                }
                function bi(e) {
                    return null != e.defaultPrevented ? e.defaultPrevented : 0 == e.returnValue
                }
                function wi(e) {
                    return e.target || e.srcElement
                }
                function ki(e) {
                    var t = e.which;
                    return null == t && (1 & e.button ? t = 1 : 2 & e.button ? t = 3 : 4 & e.button && (t = 2)),
                    Eo && e.ctrlKey && 1 == t && (t = 3),
                    t
                }
                function Si(e, t, n) {
                    var r = e._handlers && e._handlers[t];
                    return n ? r && r.length > 0 ? r.slice() : Oa : r || Oa
                }
                function Ci(e, t) {
                    function n(e) {
                        return function() {
                            e.apply(null, o)
                        }
                    }
                    var r = Si(e, t, !1);
                    if (r.length) {
                        var i, o = Array.prototype.slice.call(arguments, 2);
                        Go ? i = Go.delayedCallbacks : Ra ? i = Ra : (i = Ra = [],
                        setTimeout(Li, 0));
                        for (var a = 0; a < r.length; ++a)
                            i.push(n(r[a]))
                    }
                }
                function Li() {
                    var e = Ra;
                    Ra = null;
                    for (var t = 0; t < e.length; ++t)
                        e[t]()
                }
                function Ti(e, t, n) {
                    return "string" == typeof t && (t = {
                        type: t,
                        preventDefault: function() {
                            this.defaultPrevented = !0
                        }
                    }),
                    Pa(e, n || t.type, e, t),
                    bi(t) || t.codemirrorIgnore
                }
                function Mi(e) {
                    var t = e._handlers && e._handlers.cursorActivity;
                    if (t)
                        for (var n = e.curOp.cursorActivityHandlers || (e.curOp.cursorActivityHandlers = []), r = 0; r < t.length; ++r)
                            -1 == Pi(n, t[r]) && n.push(t[r])
                }
                function Ni(e, t) {
                    return Si(e, t).length > 0
                }
                function Ai(e) {
                    e.prototype.on = function(e, t) {
                        Ea(this, e, t)
                    }
                    ,
                    e.prototype.off = function(e, t) {
                        Ia(this, e, t)
                    }
                }
                function Ei() {
                    this.id = null
                }
                function Oi(e) {
                    for (; ja.length <= e; )
                        ja.push(Ii(ja) + " ");
                    return ja[e]
                }
                function Ii(e) {
                    return e[e.length - 1]
                }
                function Pi(e, t) {
                    for (var n = 0; n < e.length; ++n)
                        if (e[n] == t)
                            return n;
                    return -1
                }
                function Ri(e, t) {
                    for (var n = [], r = 0; r < e.length; r++)
                        n[r] = t(e[r], r);
                    return n
                }
                function Di() {}
                function Hi(e, t) {
                    var n;
                    return Object.create ? n = Object.create(e) : (Di.prototype = e,
                    n = new Di),
                    t && Wi(t, n),
                    n
                }
                function Wi(e, t, n) {
                    t || (t = {});
                    for (var r in e)
                        !e.hasOwnProperty(r) || n === !1 && t.hasOwnProperty(r) || (t[r] = e[r]);
                    return t
                }
                function Bi(e) {
                    var t = Array.prototype.slice.call(arguments, 1);
                    return function() {
                        return e.apply(null, t)
                    }
                }
                function _i(e, t) {
                    return t ? t.source.indexOf("\\w") > -1 && Ya(e) ? !0 : t.test(e) : Ya(e)
                }
                function Fi(e) {
                    for (var t in e)
                        if (e.hasOwnProperty(t) && e[t])
                            return !1;
                    return !0
                }
                function zi(e) {
                    return e.charCodeAt(0) >= 768 && $a.test(e)
                }
                function ji(e, t, n, r) {
                    var i = document.createElement(e);
                    if (n && (i.className = n),
                    r && (i.style.cssText = r),
                    "string" == typeof t)
                        i.appendChild(document.createTextNode(t));
                    else if (t)
                        for (var o = 0; o < t.length; ++o)
                            i.appendChild(t[o]);
                    return i
                }
                function Ui(e) {
                    for (var t = e.childNodes.length; t > 0; --t)
                        e.removeChild(e.firstChild);
                    return e
                }
                function qi(e, t) {
                    return Ui(e).appendChild(t)
                }
                function Gi() {
                    for (var e = document.activeElement; e && e.root && e.root.activeElement; )
                        e = e.root.activeElement;
                    return e
                }
                function Yi(e) {
                    return new RegExp("(^|\\s)" + e + "(?:$|\\s)\\s*")
                }
                function $i(e, t) {
                    for (var n = e.split(" "), r = 0; r < n.length; r++)
                        n[r] && !Yi(n[r]).test(t) && (t += " " + n[r]);
                    return t
                }
                function Vi(e) {
                    if (document.body.getElementsByClassName)
                        for (var t = document.body.getElementsByClassName("CodeMirror"), n = 0; n < t.length; n++) {
                            var r = t[n].CodeMirror;
                            r && e(r)
                        }
                }
                function Ki() {
                    Qa || (Xi(),
                    Qa = !0)
                }
                function Xi() {
                    var e;
                    Ea(window, "resize", function() {
                        null == e && (e = setTimeout(function() {
                            e = null,
                            Vi(qt)
                        }, 100))
                    }),
                    Ea(window, "blur", function() {
                        Vi(yn)
                    })
                }
                function Zi(e) {
                    if (null == Ka) {
                        var t = ji("span", "\u200b");
                        qi(e, ji("span", [t, document.createTextNode("x")])),
                        0 != e.firstChild.offsetHeight && (Ka = t.offsetWidth <= 1 && t.offsetHeight > 2 && !(xo && 8 > bo))
                    }
                    var n = Ka ? ji("span", "\u200b") : ji("span", "\xa0", null, "display: inline-block; width: 1px; margin-right: -1px");
                    return n.setAttribute("cm-text", ""),
                    n
                }
                function Ji(e) {
                    if (null != Xa)
                        return Xa;
                    var t = qi(e, document.createTextNode("A\u062eA"))
                      , n = qa(t, 0, 1).getBoundingClientRect();
                    if (!n || n.left == n.right)
                        return !1;
                    var r = qa(t, 1, 2).getBoundingClientRect();
                    return Xa = r.right - n.right < 3
                }
                function Qi(e) {
                    if (null != il)
                        return il;
                    var t = qi(e, ji("span", "x"))
                      , n = t.getBoundingClientRect()
                      , r = qa(t, 0, 1).getBoundingClientRect();
                    return il = Math.abs(n.left - r.left) > 1
                }
                function eo(e, t, n, r) {
                    if (!e)
                        return r(t, n, "ltr");
                    for (var i = !1, o = 0; o < e.length; ++o) {
                        var a = e[o];
                        (a.from < n && a.to > t || t == n && a.to == t) && (r(Math.max(a.from, t), Math.min(a.to, n), 1 == a.level ? "rtl" : "ltr"),
                        i = !0)
                    }
                    i || r(t, n, "ltr")
                }
                function to(e) {
                    return e.level % 2 ? e.to : e.from
                }
                function no(e) {
                    return e.level % 2 ? e.from : e.to
                }
                function ro(e) {
                    var t = ii(e);
                    return t ? to(t[0]) : 0
                }
                function io(e) {
                    var t = ii(e);
                    return t ? no(Ii(t)) : e.text.length
                }
                function oo(e, t) {
                    var n = Zr(e.doc, t)
                      , r = yr(n);
                    r != n && (t = ti(r));
                    var i = ii(r)
                      , o = i ? i[0].level % 2 ? io(r) : ro(r) : 0;
                    return Bo(t, o)
                }
                function ao(e, t) {
                    for (var n, r = Zr(e.doc, t); n = gr(r); )
                        r = n.find(1, !0).line,
                        t = null;
                    var i = ii(r)
                      , o = i ? i[0].level % 2 ? ro(r) : io(r) : r.text.length;
                    return Bo(null == t ? ti(r) : t, o)
                }
                function lo(e, t) {
                    var n = oo(e, t.line)
                      , r = Zr(e.doc, n.line)
                      , i = ii(r);
                    if (!i || 0 == i[0].level) {
                        var o = Math.max(0, r.text.search(/\S/))
                          , a = t.line == n.line && t.ch <= o && t.ch;
                        return Bo(n.line, a ? 0 : o)
                    }
                    return n
                }
                function so(e, t, n) {
                    var r = e[0].level;
                    return t == r ? !0 : n == r ? !1 : n > t
                }
                function co(e, t) {
                    al = null;
                    for (var n, r = 0; r < e.length; ++r) {
                        var i = e[r];
                        if (i.from < t && i.to > t)
                            return r;
                        if (i.from == t || i.to == t) {
                            if (null != n)
                                return so(e, i.level, e[n].level) ? (i.from != i.to && (al = n),
                                r) : (i.from != i.to && (al = r),
                                n);
                            n = r
                        }
                    }
                    return n
                }
                function uo(e, t, n, r) {
                    if (!r)
                        return t + n;
                    do
                        t += n;
                    while (t > 0 && zi(e.text.charAt(t)));
                    return t
                }
                function fo(e, t, n, r) {
                    var i = ii(e);
                    if (!i)
                        return ho(e, t, n, r);
                    for (var o = co(i, t), a = i[o], l = uo(e, t, a.level % 2 ? -n : n, r); ; ) {
                        if (l > a.from && l < a.to)
                            return l;
                        if (l == a.from || l == a.to)
                            return co(i, l) == o ? l : (a = i[o += n],
                            n > 0 == a.level % 2 ? a.to : a.from);
                        if (a = i[o += n],
                        !a)
                            return null;
                        l = n > 0 == a.level % 2 ? uo(e, a.to, -1, r) : uo(e, a.from, 1, r)
                    }
                }
                function ho(e, t, n, r) {
                    var i = t + n;
                    if (r)
                        for (; i > 0 && zi(e.text.charAt(i)); )
                            i += n;
                    return 0 > i || i > e.text.length ? null : i
                }
                var po = navigator.userAgent
                  , mo = navigator.platform
                  , go = /gecko\/\d/i.test(po)
                  , vo = /MSIE \d/.test(po)
                  , yo = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(po)
                  , xo = vo || yo
                  , bo = xo && (vo ? document.documentMode || 6 : yo[1])
                  , wo = /WebKit\//.test(po)
                  , ko = wo && /Qt\/\d+\.\d+/.test(po)
                  , So = /Chrome\//.test(po)
                  , Co = /Opera\//.test(po)
                  , Lo = /Apple Computer/.test(navigator.vendor)
                  , To = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(po)
                  , Mo = /PhantomJS/.test(po)
                  , No = /AppleWebKit/.test(po) && /Mobile\/\w+/.test(po)
                  , Ao = No || /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(po)
                  , Eo = No || /Mac/.test(mo)
                  , Oo = /\bCrOS\b/.test(po)
                  , Io = /win/i.test(mo)
                  , Po = Co && po.match(/Version\/(\d*\.\d*)/);
                Po && (Po = Number(Po[1])),
                Po && Po >= 15 && (Co = !1,
                wo = !0);
                var Ro = Eo && (ko || Co && (null == Po || 12.11 > Po))
                  , Do = go || xo && bo >= 9
                  , Ho = !1
                  , Wo = !1;
                m.prototype = Wi({
                    update: function(e) {
                        var t = e.scrollWidth > e.clientWidth + 1
                          , n = e.scrollHeight > e.clientHeight + 1
                          , r = e.nativeBarWidth;
                        if (n) {
                            this.vert.style.display = "block",
                            this.vert.style.bottom = t ? r + "px" : "0";
                            var i = e.viewHeight - (t ? r : 0);
                            this.vert.firstChild.style.height = Math.max(0, e.scrollHeight - e.clientHeight + i) + "px"
                        } else
                            this.vert.style.display = "",
                            this.vert.firstChild.style.height = "0";
                        if (t) {
                            this.horiz.style.display = "block",
                            this.horiz.style.right = n ? r + "px" : "0",
                            this.horiz.style.left = e.barLeft + "px";
                            var o = e.viewWidth - e.barLeft - (n ? r : 0);
                            this.horiz.firstChild.style.width = e.scrollWidth - e.clientWidth + o + "px"
                        } else
                            this.horiz.style.display = "",
                            this.horiz.firstChild.style.width = "0";
                        return !this.checkedZeroWidth && e.clientHeight > 0 && (0 == r && this.zeroWidthHack(),
                        this.checkedZeroWidth = !0),
                        {
                            right: n ? r : 0,
                            bottom: t ? r : 0
                        }
                    },
                    setScrollLeft: function(e) {
                        this.horiz.scrollLeft != e && (this.horiz.scrollLeft = e),
                        this.disableHoriz && this.enableZeroWidthBar(this.horiz, this.disableHoriz)
                    },
                    setScrollTop: function(e) {
                        this.vert.scrollTop != e && (this.vert.scrollTop = e),
                        this.disableVert && this.enableZeroWidthBar(this.vert, this.disableVert)
                    },
                    zeroWidthHack: function() {
                        var e = Eo && !To ? "12px" : "18px";
                        this.horiz.style.height = this.vert.style.width = e,
                        this.horiz.style.pointerEvents = this.vert.style.pointerEvents = "none",
                        this.disableHoriz = new Ei,
                        this.disableVert = new Ei
                    },
                    enableZeroWidthBar: function(e, t) {
                        function n() {
                            var r = e.getBoundingClientRect()
                              , i = document.elementFromPoint(r.left + 1, r.bottom - 1);
                            i != e ? e.style.pointerEvents = "none" : t.set(1e3, n)
                        }
                        e.style.pointerEvents = "auto",
                        t.set(1e3, n)
                    },
                    clear: function() {
                        var e = this.horiz.parentNode;
                        e.removeChild(this.horiz),
                        e.removeChild(this.vert)
                    }
                }, m.prototype),
                g.prototype = Wi({
                    update: function() {
                        return {
                            bottom: 0,
                            right: 0
                        }
                    },
                    setScrollLeft: function() {},
                    setScrollTop: function() {},
                    clear: function() {}
                }, g.prototype),
                e.scrollbarModel = {
                    "native": m,
                    "null": g
                },
                L.prototype.signal = function(e, t) {
                    Ni(e, t) && this.events.push(arguments)
                }
                ,
                L.prototype.finish = function() {
                    for (var e = 0; e < this.events.length; e++)
                        Pa.apply(null, this.events[e])
                }
                ;
                var Bo = e.Pos = function(e, t) {
                    return this instanceof Bo ? (this.line = e,
                    void (this.ch = t)) : new Bo(e,t)
                }
                  , _o = e.cmpPos = function(e, t) {
                    return e.line - t.line || e.ch - t.ch
                }
                  , Fo = null;
                ne.prototype = Wi({
                    init: function(e) {
                        function t(e) {
                            if (!Ti(r, e)) {
                                if (r.somethingSelected())
                                    Fo = {
                                        lineWise: !1,
                                        text: r.getSelections()
                                    },
                                    n.inaccurateSelection && (n.prevInput = "",
                                    n.inaccurateSelection = !1,
                                    o.value = Fo.text.join("\n"),
                                    Ua(o));
                                else {
                                    if (!r.options.lineWiseCopyCut)
                                        return;
                                    var t = ee(r);
                                    Fo = {
                                        lineWise: !0,
                                        text: t.text
                                    },
                                    "cut" == e.type ? r.setSelections(t.ranges, null, Wa) : (n.prevInput = "",
                                    o.value = t.text.join("\n"),
                                    Ua(o))
                                }
                                "cut" == e.type && (r.state.cutIncoming = !0)
                            }
                        }
                        var n = this
                          , r = this.cm
                          , i = this.wrapper = re()
                          , o = this.textarea = i.firstChild;
                        e.wrapper.insertBefore(i, e.wrapper.firstChild),
                        No && (o.style.width = "0px"),
                        Ea(o, "input", function() {
                            xo && bo >= 9 && n.hasSelection && (n.hasSelection = null),
                            n.poll()
                        }),
                        Ea(o, "paste", function(e) {
                            Ti(r, e) || J(e, r) || (r.state.pasteIncoming = !0,
                            n.fastPoll())
                        }),
                        Ea(o, "cut", t),
                        Ea(o, "copy", t),
                        Ea(e.scroller, "paste", function(t) {
                            Gt(e, t) || Ti(r, t) || (r.state.pasteIncoming = !0,
                            n.focus())
                        }),
                        Ea(e.lineSpace, "selectstart", function(t) {
                            Gt(e, t) || Ma(t)
                        }),
                        Ea(o, "compositionstart", function() {
                            var e = r.getCursor("from");
                            n.composing && n.composing.range.clear(),
                            n.composing = {
                                start: e,
                                range: r.markText(e, r.getCursor("to"), {
                                    className: "CodeMirror-composing"
                                })
                            }
                        }),
                        Ea(o, "compositionend", function() {
                            n.composing && (n.poll(),
                            n.composing.range.clear(),
                            n.composing = null)
                        })
                    },
                    prepareSelection: function() {
                        var e = this.cm
                          , t = e.display
                          , n = e.doc
                          , r = De(e);
                        if (e.options.moveInputWithCursor) {
                            var i = dt(e, n.sel.primary().head, "div")
                              , o = t.wrapper.getBoundingClientRect()
                              , a = t.lineDiv.getBoundingClientRect();
                            r.teTop = Math.max(0, Math.min(t.wrapper.clientHeight - 10, i.top + a.top - o.top)),
                            r.teLeft = Math.max(0, Math.min(t.wrapper.clientWidth - 10, i.left + a.left - o.left))
                        }
                        return r
                    },
                    showSelection: function(e) {
                        var t = this.cm
                          , n = t.display;
                        qi(n.cursorDiv, e.cursors),
                        qi(n.selectionDiv, e.selection),
                        null != e.teTop && (this.wrapper.style.top = e.teTop + "px",
                        this.wrapper.style.left = e.teLeft + "px")
                    },
                    reset: function(e) {
                        if (!this.contextMenuPending) {
                            var t, n, r = this.cm, i = r.doc;
                            if (r.somethingSelected()) {
                                this.prevInput = "";
                                var o = i.sel.primary();
                                t = rl && (o.to().line - o.from().line > 100 || (n = r.getSelection()).length > 1e3);
                                var a = t ? "-" : n || r.getSelection();
                                this.textarea.value = a,
                                r.state.focused && Ua(this.textarea),
                                xo && bo >= 9 && (this.hasSelection = a)
                            } else
                                e || (this.prevInput = this.textarea.value = "",
                                xo && bo >= 9 && (this.hasSelection = null));
                            this.inaccurateSelection = t
                        }
                    },
                    getField: function() {
                        return this.textarea
                    },
                    supportsTouch: function() {
                        return !1
                    },
                    focus: function() {
                        if ("nocursor" != this.cm.options.readOnly && (!Ao || Gi() != this.textarea))
                            try {
                                this.textarea.focus()
                            } catch (e) {}
                    },
                    blur: function() {
                        this.textarea.blur()
                    },
                    resetPosition: function() {
                        this.wrapper.style.top = this.wrapper.style.left = 0
                    },
                    receivedFocus: function() {
                        this.slowPoll()
                    },
                    slowPoll: function() {
                        var e = this;
                        e.pollingFast || e.polling.set(this.cm.options.pollInterval, function() {
                            e.poll(),
                            e.cm.state.focused && e.slowPoll()
                        })
                    },
                    fastPoll: function() {
                        function e() {
                            var r = n.poll();
                            r || t ? (n.pollingFast = !1,
                            n.slowPoll()) : (t = !0,
                            n.polling.set(60, e))
                        }
                        var t = !1
                          , n = this;
                        n.pollingFast = !0,
                        n.polling.set(20, e)
                    },
                    poll: function() {
                        var e = this.cm
                          , t = this.textarea
                          , n = this.prevInput;
                        if (this.contextMenuPending || !e.state.focused || nl(t) && !n && !this.composing || e.isReadOnly() || e.options.disableInput || e.state.keySeq)
                            return !1;
                        var r = t.value;
                        if (r == n && !e.somethingSelected())
                            return !1;
                        if (xo && bo >= 9 && this.hasSelection === r || Eo && /[\uf700-\uf7ff]/.test(r))
                            return e.display.input.reset(),
                            !1;
                        if (e.doc.sel == e.display.selForContextMenu) {
                            var i = r.charCodeAt(0);
                            if (8203 != i || n || (n = "\u200b"),
                            8666 == i)
                                return this.reset(),
                                this.cm.execCommand("undo")
                        }
                        for (var o = 0, a = Math.min(n.length, r.length); a > o && n.charCodeAt(o) == r.charCodeAt(o); )
                            ++o;
                        var l = this;
                        return At(e, function() {
                            Z(e, r.slice(o), n.length - o, null, l.composing ? "*compose" : null),
                            r.length > 1e3 || r.indexOf("\n") > -1 ? t.value = l.prevInput = "" : l.prevInput = r,
                            l.composing && (l.composing.range.clear(),
                            l.composing.range = e.markText(l.composing.start, e.getCursor("to"), {
                                className: "CodeMirror-composing"
                            }))
                        }),
                        !0
                    },
                    ensurePolled: function() {
                        this.pollingFast && this.poll() && (this.pollingFast = !1)
                    },
                    onKeyPress: function() {
                        xo && bo >= 9 && (this.hasSelection = null),
                        this.fastPoll()
                    },
                    onContextMenu: function(e) {
                        function t() {
                            if (null != a.selectionStart) {
                                var e = i.somethingSelected()
                                  , t = "\u200b" + (e ? a.value : "");
                                a.value = "\u21da",
                                a.value = t,
                                r.prevInput = e ? "" : "\u200b",
                                a.selectionStart = 1,
                                a.selectionEnd = t.length,
                                o.selForContextMenu = i.doc.sel
                            }
                        }
                        function n() {
                            if (r.contextMenuPending = !1,
                            r.wrapper.style.cssText = f,
                            a.style.cssText = u,
                            xo && 9 > bo && o.scrollbars.setScrollTop(o.scroller.scrollTop = s),
                            null != a.selectionStart) {
                                (!xo || xo && 9 > bo) && t();
                                var e = 0
                                  , n = function() {
                                    o.selForContextMenu == i.doc.sel && 0 == a.selectionStart && a.selectionEnd > 0 && "\u200b" == r.prevInput ? Et(i, ua.selectAll)(i) : e++ < 10 ? o.detectingSelectAll = setTimeout(n, 500) : o.input.reset()
                                };
                                o.detectingSelectAll = setTimeout(n, 200)
                            }
                        }
                        var r = this
                          , i = r.cm
                          , o = i.display
                          , a = r.textarea
                          , l = Yt(i, e)
                          , s = o.scroller.scrollTop;
                        if (l && !Co) {
                            var c = i.options.resetSelectionOnContextMenu;
                            c && -1 == i.doc.sel.contains(l) && Et(i, Te)(i.doc, de(l), Wa);
                            var u = a.style.cssText
                              , f = r.wrapper.style.cssText;
                            r.wrapper.style.cssText = "position: absolute";
                            var h = r.wrapper.getBoundingClientRect();
                            if (a.style.cssText = "position: absolute; width: 30px; height: 30px; top: " + (e.clientY - h.top - 5) + "px; left: " + (e.clientX - h.left - 5) + "px; z-index: 1000; background: " + (xo ? "rgba(255, 255, 255, .05)" : "transparent") + "; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",
                            wo)
                                var d = window.scrollY;
                            if (o.input.focus(),
                            wo && window.scrollTo(null, d),
                            o.input.reset(),
                            i.somethingSelected() || (a.value = r.prevInput = " "),
                            r.contextMenuPending = !0,
                            o.selForContextMenu = i.doc.sel,
                            clearTimeout(o.detectingSelectAll),
                            xo && bo >= 9 && t(),
                            Do) {
                                Aa(e);
                                var p = function() {
                                    Ia(window, "mouseup", p),
                                    setTimeout(n, 20)
                                };
                                Ea(window, "mouseup", p)
                            } else
                                setTimeout(n, 50)
                        }
                    },
                    readOnlyChanged: function(e) {
                        e || this.reset()
                    },
                    setUneditable: Di,
                    needsContentAttribute: !1
                }, ne.prototype),
                ie.prototype = Wi({
                    init: function(e) {
                        function t(e) {
                            if (!Ti(r, e)) {
                                if (r.somethingSelected())
                                    Fo = {
                                        lineWise: !1,
                                        text: r.getSelections()
                                    },
                                    "cut" == e.type && r.replaceSelection("", null, "cut");
                                else {
                                    if (!r.options.lineWiseCopyCut)
                                        return;
                                    var t = ee(r);
                                    Fo = {
                                        lineWise: !0,
                                        text: t.text
                                    },
                                    "cut" == e.type && r.operation(function() {
                                        r.setSelections(t.ranges, 0, Wa),
                                        r.replaceSelection("", null, "cut")
                                    })
                                }
                                if (e.clipboardData && !No)
                                    e.preventDefault(),
                                    e.clipboardData.clearData(),
                                    e.clipboardData.setData("text/plain", Fo.text.join("\n"));
                                else {
                                    var n = re()
                                      , i = n.firstChild;
                                    r.display.lineSpace.insertBefore(n, r.display.lineSpace.firstChild),
                                    i.value = Fo.text.join("\n");
                                    var o = document.activeElement;
                                    Ua(i),
                                    setTimeout(function() {
                                        r.display.lineSpace.removeChild(n),
                                        o.focus()
                                    }, 50)
                                }
                            }
                        }
                        var n = this
                          , r = n.cm
                          , i = n.div = e.lineDiv;
                        te(i),
                        Ea(i, "paste", function(e) {
                            Ti(r, e) || J(e, r)
                        }),
                        Ea(i, "compositionstart", function(e) {
                            var t = e.data;
                            if (n.composing = {
                                sel: r.doc.sel,
                                data: t,
                                startData: t
                            },
                            t) {
                                var i = r.doc.sel.primary()
                                  , o = r.getLine(i.head.line)
                                  , a = o.indexOf(t, Math.max(0, i.head.ch - t.length));
                                a > -1 && a <= i.head.ch && (n.composing.sel = de(Bo(i.head.line, a), Bo(i.head.line, a + t.length)))
                            }
                        }),
                        Ea(i, "compositionupdate", function(e) {
                            n.composing.data = e.data
                        }),
                        Ea(i, "compositionend", function(e) {
                            var t = n.composing;
                            t && (e.data == t.startData || /\u200b/.test(e.data) || (t.data = e.data),
                            setTimeout(function() {
                                t.handled || n.applyComposition(t),
                                n.composing == t && (n.composing = null)
                            }, 50))
                        }),
                        Ea(i, "touchstart", function() {
                            n.forceCompositionEnd()
                        }),
                        Ea(i, "input", function() {
                            n.composing || !r.isReadOnly() && n.pollContent() || At(n.cm, function() {
                                Dt(r)
                            })
                        }),
                        Ea(i, "copy", t),
                        Ea(i, "cut", t)
                    },
                    prepareSelection: function() {
                        var e = De(this.cm, !1);
                        return e.focus = this.cm.state.focused,
                        e
                    },
                    showSelection: function(e, t) {
                        e && this.cm.display.view.length && ((e.focus || t) && this.showPrimarySelection(),
                        this.showMultipleSelections(e))
                    },
                    showPrimarySelection: function() {
                        var e = window.getSelection()
                          , t = this.cm.doc.sel.primary()
                          , n = le(this.cm, e.anchorNode, e.anchorOffset)
                          , r = le(this.cm, e.focusNode, e.focusOffset);
                        if (!n || n.bad || !r || r.bad || 0 != _o(K(n, r), t.from()) || 0 != _o(V(n, r), t.to())) {
                            var i = oe(this.cm, t.from())
                              , o = oe(this.cm, t.to());
                            if (i || o) {
                                var a = this.cm.display.view
                                  , l = e.rangeCount && e.getRangeAt(0);
                                if (i) {
                                    if (!o) {
                                        var s = a[a.length - 1].measure
                                          , c = s.maps ? s.maps[s.maps.length - 1] : s.map;
                                        o = {
                                            node: c[c.length - 1],
                                            offset: c[c.length - 2] - c[c.length - 3]
                                        }
                                    }
                                } else
                                    i = {
                                        node: a[0].measure.map[2],
                                        offset: 0
                                    };
                                try {
                                    var u = qa(i.node, i.offset, o.offset, o.node)
                                } catch (f) {}
                                u && (!go && this.cm.state.focused ? (e.collapse(i.node, i.offset),
                                u.collapsed || e.addRange(u)) : (e.removeAllRanges(),
                                e.addRange(u)),
                                l && null == e.anchorNode ? e.addRange(l) : go && this.startGracePeriod()),
                                this.rememberSelection()
                            }
                        }
                    },
                    startGracePeriod: function() {
                        var e = this;
                        clearTimeout(this.gracePeriod),
                        this.gracePeriod = setTimeout(function() {
                            e.gracePeriod = !1,
                            e.selectionChanged() && e.cm.operation(function() {
                                e.cm.curOp.selectionChanged = !0
                            })
                        }, 20)
                    },
                    showMultipleSelections: function(e) {
                        qi(this.cm.display.cursorDiv, e.cursors),
                        qi(this.cm.display.selectionDiv, e.selection)
                    },
                    rememberSelection: function() {
                        var e = window.getSelection();
                        this.lastAnchorNode = e.anchorNode,
                        this.lastAnchorOffset = e.anchorOffset,
                        this.lastFocusNode = e.focusNode,
                        this.lastFocusOffset = e.focusOffset
                    },
                    selectionInEditor: function() {
                        var e = window.getSelection();
                        if (!e.rangeCount)
                            return !1;
                        var t = e.getRangeAt(0).commonAncestorContainer;
                        return Va(this.div, t)
                    },
                    focus: function() {
                        "nocursor" != this.cm.options.readOnly && this.div.focus()
                    },
                    blur: function() {
                        this.div.blur()
                    },
                    getField: function() {
                        return this.div
                    },
                    supportsTouch: function() {
                        return !0
                    },
                    receivedFocus: function() {
                        function e() {
                            t.cm.state.focused && (t.pollSelection(),
                            t.polling.set(t.cm.options.pollInterval, e))
                        }
                        var t = this;
                        this.selectionInEditor() ? this.pollSelection() : At(this.cm, function() {
                            t.cm.curOp.selectionChanged = !0
                        }),
                        this.polling.set(this.cm.options.pollInterval, e)
                    },
                    selectionChanged: function() {
                        var e = window.getSelection();
                        return e.anchorNode != this.lastAnchorNode || e.anchorOffset != this.lastAnchorOffset || e.focusNode != this.lastFocusNode || e.focusOffset != this.lastFocusOffset
                    },
                    pollSelection: function() {
                        if (!this.composing && !this.gracePeriod && this.selectionChanged()) {
                            var e = window.getSelection()
                              , t = this.cm;
                            this.rememberSelection();
                            var n = le(t, e.anchorNode, e.anchorOffset)
                              , r = le(t, e.focusNode, e.focusOffset);
                            n && r && At(t, function() {
                                Te(t.doc, de(n, r), Wa),
                                (n.bad || r.bad) && (t.curOp.selectionChanged = !0)
                            })
                        }
                    },
                    pollContent: function() {
                        var e = this.cm
                          , t = e.display
                          , n = e.doc.sel.primary()
                          , r = n.from()
                          , i = n.to();
                        if (r.line < t.viewFrom || i.line > t.viewTo - 1)
                            return !1;
                        var o;
                        if (r.line == t.viewFrom || 0 == (o = Bt(e, r.line)))
                            var a = ti(t.view[0].line)
                              , l = t.view[0].node;
                        else
                            var a = ti(t.view[o].line)
                              , l = t.view[o - 1].node.nextSibling;
                        var s = Bt(e, i.line);
                        if (s == t.view.length - 1)
                            var c = t.viewTo - 1
                              , u = t.lineDiv.lastChild;
                        else
                            var c = ti(t.view[s + 1].line) - 1
                              , u = t.view[s + 1].node.previousSibling;
                        for (var f = e.doc.splitLines(ce(e, l, u, a, c)), h = Jr(e.doc, Bo(a, 0), Bo(c, Zr(e.doc, c).text.length)); f.length > 1 && h.length > 1; )
                            if (Ii(f) == Ii(h))
                                f.pop(),
                                h.pop(),
                                c--;
                            else {
                                if (f[0] != h[0])
                                    break;
                                f.shift(),
                                h.shift(),
                                a++
                            }
                        for (var d = 0, p = 0, m = f[0], g = h[0], v = Math.min(m.length, g.length); v > d && m.charCodeAt(d) == g.charCodeAt(d); )
                            ++d;
                        for (var y = Ii(f), x = Ii(h), b = Math.min(y.length - (1 == f.length ? d : 0), x.length - (1 == h.length ? d : 0)); b > p && y.charCodeAt(y.length - p - 1) == x.charCodeAt(x.length - p - 1); )
                            ++p;
                        f[f.length - 1] = y.slice(0, y.length - p),
                        f[0] = f[0].slice(d);
                        var w = Bo(a, d)
                          , k = Bo(c, h.length ? Ii(h).length - p : 0);
                        return f.length > 1 || f[0] || _o(w, k) ? (In(e.doc, f, w, k, "+input"),
                        !0) : void 0
                    },
                    ensurePolled: function() {
                        this.forceCompositionEnd()
                    },
                    reset: function() {
                        this.forceCompositionEnd()
                    },
                    forceCompositionEnd: function() {
                        this.composing && !this.composing.handled && (this.applyComposition(this.composing),
                        this.composing.handled = !0,
                        this.div.blur(),
                        this.div.focus())
                    },
                    applyComposition: function(e) {
                        this.cm.isReadOnly() ? Et(this.cm, Dt)(this.cm) : e.data && e.data != e.startData && Et(this.cm, Z)(this.cm, e.data, 0, e.sel)
                    },
                    setUneditable: function(e) {
                        e.contentEditable = "false"
                    },
                    onKeyPress: function(e) {
                        e.preventDefault(),
                        this.cm.isReadOnly() || Et(this.cm, Z)(this.cm, String.fromCharCode(null == e.charCode ? e.keyCode : e.charCode), 0)
                    },
                    readOnlyChanged: function(e) {
                        this.div.contentEditable = String("nocursor" != e)
                    },
                    onContextMenu: Di,
                    resetPosition: Di,
                    needsContentAttribute: !0
                }, ie.prototype),
                e.inputStyles = {
                    textarea: ne,
                    contenteditable: ie
                },
                ue.prototype = {
                    primary: function() {
                        return this.ranges[this.primIndex]
                    },
                    equals: function(e) {
                        if (e == this)
                            return !0;
                        if (e.primIndex != this.primIndex || e.ranges.length != this.ranges.length)
                            return !1;
                        for (var t = 0; t < this.ranges.length; t++) {
                            var n = this.ranges[t]
                              , r = e.ranges[t];
                            if (0 != _o(n.anchor, r.anchor) || 0 != _o(n.head, r.head))
                                return !1
                        }
                        return !0
                    },
                    deepCopy: function() {
                        for (var e = [], t = 0; t < this.ranges.length; t++)
                            e[t] = new fe($(this.ranges[t].anchor),$(this.ranges[t].head));
                        return new ue(e,this.primIndex)
                    },
                    somethingSelected: function() {
                        for (var e = 0; e < this.ranges.length; e++)
                            if (!this.ranges[e].empty())
                                return !0;
                        return !1
                    },
                    contains: function(e, t) {
                        t || (t = e);
                        for (var n = 0; n < this.ranges.length; n++) {
                            var r = this.ranges[n];
                            if (_o(t, r.from()) >= 0 && _o(e, r.to()) <= 0)
                                return n
                        }
                        return -1
                    }
                },
                fe.prototype = {
                    from: function() {
                        return K(this.anchor, this.head)
                    },
                    to: function() {
                        return V(this.anchor, this.head)
                    },
                    empty: function() {
                        return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch
                    }
                };
                var zo, jo, Uo, qo = {
                    left: 0,
                    right: 0,
                    top: 0,
                    bottom: 0
                }, Go = null, Yo = 0, $o = 0, Vo = 0, Ko = null;
                xo ? Ko = -.53 : go ? Ko = 15 : So ? Ko = -.7 : Lo && (Ko = -1 / 3);
                var Xo = function(e) {
                    var t = e.wheelDeltaX
                      , n = e.wheelDeltaY;
                    return null == t && e.detail && e.axis == e.HORIZONTAL_AXIS && (t = e.detail),
                    null == n && e.detail && e.axis == e.VERTICAL_AXIS ? n = e.detail : null == n && (n = e.wheelDelta),
                    {
                        x: t,
                        y: n
                    }
                };
                e.wheelEventPixels = function(e) {
                    var t = Xo(e);
                    return t.x *= Ko,
                    t.y *= Ko,
                    t
                }
                ;
                var Zo = new Ei
                  , Jo = null
                  , Qo = e.changeEnd = function(e) {
                    return e.text ? Bo(e.from.line + e.text.length - 1, Ii(e.text).length + (1 == e.text.length ? e.from.ch : 0)) : e.to
                }
                ;
                e.prototype = {
                    constructor: e,
                    focus: function() {
                        window.focus(),
                        this.display.input.focus()
                    },
                    setOption: function(e, t) {
                        var n = this.options
                          , r = n[e];
                        n[e] == t && "mode" != e || (n[e] = t,
                        ta.hasOwnProperty(e) && Et(this, ta[e])(this, t, r))
                    },
                    getOption: function(e) {
                        return this.options[e]
                    },
                    getDoc: function() {
                        return this.doc
                    },
                    addKeyMap: function(e, t) {
                        this.state.keyMaps[t ? "push" : "unshift"]($n(e))
                    },
                    removeKeyMap: function(e) {
                        for (var t = this.state.keyMaps, n = 0; n < t.length; ++n)
                            if (t[n] == e || t[n].name == e)
                                return t.splice(n, 1),
                                !0
                    },
                    addOverlay: Ot(function(t, n) {
                        var r = t.token ? t : e.getMode(this.options, t);
                        if (r.startState)
                            throw new Error("Overlays may not be stateful.");
                        this.state.overlays.push({
                            mode: r,
                            modeSpec: t,
                            opaque: n && n.opaque
                        }),
                        this.state.modeGen++,
                        Dt(this)
                    }),
                    removeOverlay: Ot(function(e) {
                        for (var t = this.state.overlays, n = 0; n < t.length; ++n) {
                            var r = t[n].modeSpec;
                            if (r == e || "string" == typeof e && r.name == e)
                                return t.splice(n, 1),
                                this.state.modeGen++,
                                void Dt(this)
                        }
                    }),
                    indentLine: Ot(function(e, t, n) {
                        "string" != typeof t && "number" != typeof t && (t = null == t ? this.options.smartIndent ? "smart" : "prev" : t ? "add" : "subtract"),
                        ve(this.doc, e) && Fn(this, e, t, n)
                    }),
                    indentSelection: Ot(function(e) {
                        for (var t = this.doc.sel.ranges, n = -1, r = 0; r < t.length; r++) {
                            var i = t[r];
                            if (i.empty())
                                i.head.line > n && (Fn(this, i.head.line, e, !0),
                                n = i.head.line,
                                r == this.doc.sel.primIndex && Bn(this));
                            else {
                                var o = i.from()
                                  , a = i.to()
                                  , l = Math.max(n, o.line);
                                n = Math.min(this.lastLine(), a.line - (a.ch ? 0 : 1)) + 1;
                                for (var s = l; n > s; ++s)
                                    Fn(this, s, e);
                                var c = this.doc.sel.ranges;
                                0 == o.ch && t.length == c.length && c[r].from().ch > 0 && ke(this.doc, r, new fe(o,c[r].to()), Wa)
                            }
                        }
                    }),
                    getTokenAt: function(e, t) {
                        return Ir(this, e, t)
                    },
                    getLineTokens: function(e, t) {
                        return Ir(this, Bo(e), t, !0)
                    },
                    getTokenTypeAt: function(e) {
                        e = me(this.doc, e);
                        var t, n = Dr(this, Zr(this.doc, e.line)), r = 0, i = (n.length - 1) / 2, o = e.ch;
                        if (0 == o)
                            t = n[2];
                        else
                            for (; ; ) {
                                var a = r + i >> 1;
                                if ((a ? n[2 * a - 1] : 0) >= o)
                                    i = a;
                                else {
                                    if (!(n[2 * a + 1] < o)) {
                                        t = n[2 * a + 2];
                                        break
                                    }
                                    r = a + 1
                                }
                            }
                        var l = t ? t.indexOf("cm-overlay ") : -1;
                        return 0 > l ? t : 0 == l ? null : t.slice(0, l - 1)
                    },
                    getModeAt: function(t) {
                        var n = this.doc.mode;
                        return n.innerMode ? e.innerMode(n, this.getTokenAt(t).state).mode : n
                    },
                    getHelper: function(e, t) {
                        return this.getHelpers(e, t)[0]
                    },
                    getHelpers: function(e, t) {
                        var n = [];
                        if (!la.hasOwnProperty(t))
                            return n;
                        var r = la[t]
                          , i = this.getModeAt(e);
                        if ("string" == typeof i[t])
                            r[i[t]] && n.push(r[i[t]]);
                        else if (i[t])
                            for (var o = 0; o < i[t].length; o++) {
                                var a = r[i[t][o]];
                                a && n.push(a)
                            }
                        else
                            i.helperType && r[i.helperType] ? n.push(r[i.helperType]) : r[i.name] && n.push(r[i.name]);
                        for (var o = 0; o < r._global.length; o++) {
                            var l = r._global[o];
                            l.pred(i, this) && -1 == Pi(n, l.val) && n.push(l.val)
                        }
                        return n
                    },
                    getStateAfter: function(e, t) {
                        var n = this.doc;
                        return e = pe(n, null == e ? n.first + n.size - 1 : e),
                        je(this, e + 1, t)
                    },
                    cursorCoords: function(e, t) {
                        var n, r = this.doc.sel.primary();
                        return n = null == e ? r.head : "object" == typeof e ? me(this.doc, e) : e ? r.from() : r.to(),
                        dt(this, n, t || "page")
                    },
                    charCoords: function(e, t) {
                        return ht(this, me(this.doc, e), t || "page")
                    },
                    coordsChar: function(e, t) {
                        return e = ft(this, e, t || "page"),
                        gt(this, e.left, e.top)
                    },
                    lineAtHeight: function(e, t) {
                        return e = ft(this, {
                            top: e,
                            left: 0
                        }, t || "page").top,
                        ni(this.doc, e + this.display.viewOffset)
                    },
                    heightAtLine: function(e, t) {
                        var n, r = !1;
                        if ("number" == typeof e) {
                            var i = this.doc.first + this.doc.size - 1;
                            e < this.doc.first ? e = this.doc.first : e > i && (e = i,
                            r = !0),
                            n = Zr(this.doc, e)
                        } else
                            n = e;
                        return ut(this, n, {
                            top: 0,
                            left: 0
                        }, t || "page").top + (r ? this.doc.height - ri(n) : 0)
                    },
                    defaultTextHeight: function() {
                        return yt(this.display)
                    },
                    defaultCharWidth: function() {
                        return xt(this.display)
                    },
                    setGutterMarker: Ot(function(e, t, n) {
                        return zn(this.doc, e, "gutter", function(e) {
                            var r = e.gutterMarkers || (e.gutterMarkers = {});
                            return r[t] = n,
                            !n && Fi(r) && (e.gutterMarkers = null),
                            !0
                        })
                    }),
                    clearGutter: Ot(function(e) {
                        var t = this
                          , n = t.doc
                          , r = n.first;
                        n.iter(function(n) {
                            n.gutterMarkers && n.gutterMarkers[e] && (n.gutterMarkers[e] = null,
                            Ht(t, r, "gutter"),
                            Fi(n.gutterMarkers) && (n.gutterMarkers = null)),
                            ++r
                        })
                    }),
                    lineInfo: function(e) {
                        if ("number" == typeof e) {
                            if (!ve(this.doc, e))
                                return null;
                            var t = e;
                            if (e = Zr(this.doc, e),
                            !e)
                                return null
                        } else {
                            var t = ti(e);
                            if (null == t)
                                return null
                        }
                        return {
                            line: t,
                            handle: e,
                            text: e.text,
                            gutterMarkers: e.gutterMarkers,
                            textClass: e.textClass,
                            bgClass: e.bgClass,
                            wrapClass: e.wrapClass,
                            widgets: e.widgets
                        }
                    },
                    getViewport: function() {
                        return {
                            from: this.display.viewFrom,
                            to: this.display.viewTo
                        }
                    },
                    addWidget: function(e, t, n, r, i) {
                        var o = this.display;
                        e = dt(this, me(this.doc, e));
                        var a = e.bottom
                          , l = e.left;
                        if (t.style.position = "absolute",
                        t.setAttribute("cm-ignore-events", "true"),
                        this.display.input.setUneditable(t),
                        o.sizer.appendChild(t),
                        "over" == r)
                            a = e.top;
                        else if ("above" == r || "near" == r) {
                            var s = Math.max(o.wrapper.clientHeight, this.doc.height)
                              , c = Math.max(o.sizer.clientWidth, o.lineSpace.clientWidth);
                            ("above" == r || e.bottom + t.offsetHeight > s) && e.top > t.offsetHeight ? a = e.top - t.offsetHeight : e.bottom + t.offsetHeight <= s && (a = e.bottom),
                            l + t.offsetWidth > c && (l = c - t.offsetWidth)
                        }
                        t.style.top = a + "px",
                        t.style.left = t.style.right = "",
                        "right" == i ? (l = o.sizer.clientWidth - t.offsetWidth,
                        t.style.right = "0px") : ("left" == i ? l = 0 : "middle" == i && (l = (o.sizer.clientWidth - t.offsetWidth) / 2),
                        t.style.left = l + "px"),
                        n && Dn(this, l, a, l + t.offsetWidth, a + t.offsetHeight)
                    },
                    triggerOnKeyDown: Ot(hn),
                    triggerOnKeyPress: Ot(mn),
                    triggerOnKeyUp: pn,
                    execCommand: function(e) {
                        return ua.hasOwnProperty(e) ? ua[e].call(null, this) : void 0
                    },
                    triggerElectric: Ot(function(e) {
                        Q(this, e)
                    }),
                    findPosH: function(e, t, n, r) {
                        var i = 1;
                        0 > t && (i = -1,
                        t = -t);
                        for (var o = 0, a = me(this.doc, e); t > o && (a = Un(this.doc, a, i, n, r),
                        !a.hitSide); ++o)
                            ;
                        return a
                    },
                    moveH: Ot(function(e, t) {
                        var n = this;
                        n.extendSelectionsBy(function(r) {
                            return n.display.shift || n.doc.extend || r.empty() ? Un(n.doc, r.head, e, t, n.options.rtlMoveVisually) : 0 > e ? r.from() : r.to()
                        }, _a)
                    }),
                    deleteH: Ot(function(e, t) {
                        var n = this.doc.sel
                          , r = this.doc;
                        n.somethingSelected() ? r.replaceSelection("", null, "+delete") : jn(this, function(n) {
                            var i = Un(r, n.head, e, t, !1);
                            return 0 > e ? {
                                from: i,
                                to: n.head
                            } : {
                                from: n.head,
                                to: i
                            }
                        })
                    }),
                    findPosV: function(e, t, n, r) {
                        var i = 1
                          , o = r;
                        0 > t && (i = -1,
                        t = -t);
                        for (var a = 0, l = me(this.doc, e); t > a; ++a) {
                            var s = dt(this, l, "div");
                            if (null == o ? o = s.left : s.left = o,
                            l = qn(this, s, i, n),
                            l.hitSide)
                                break
                        }
                        return l
                    },
                    moveV: Ot(function(e, t) {
                        var n = this
                          , r = this.doc
                          , i = []
                          , o = !n.display.shift && !r.extend && r.sel.somethingSelected();
                        if (r.extendSelectionsBy(function(a) {
                            if (o)
                                return 0 > e ? a.from() : a.to();
                            var l = dt(n, a.head, "div");
                            null != a.goalColumn && (l.left = a.goalColumn),
                            i.push(l.left);
                            var s = qn(n, l, e, t);
                            return "page" == t && a == r.sel.primary() && Wn(n, null, ht(n, s, "div").top - l.top),
                            s
                        }, _a),
                        i.length)
                            for (var a = 0; a < r.sel.ranges.length; a++)
                                r.sel.ranges[a].goalColumn = i[a]
                    }),
                    findWordAt: function(e) {
                        var t = this.doc
                          , n = Zr(t, e.line).text
                          , r = e.ch
                          , i = e.ch;
                        if (n) {
                            var o = this.getHelper(e, "wordChars");
                            (e.xRel < 0 || i == n.length) && r ? --r : ++i;
                            for (var a = n.charAt(r), l = _i(a, o) ? function(e) {
                                return _i(e, o)
                            }
                            : /\s/.test(a) ? function(e) {
                                return /\s/.test(e)
                            }
                            : function(e) {
                                return !/\s/.test(e) && !_i(e)
                            }
                            ; r > 0 && l(n.charAt(r - 1)); )
                                --r;
                            for (; i < n.length && l(n.charAt(i)); )
                                ++i
                        }
                        return new fe(Bo(e.line, r),Bo(e.line, i))
                    },
                    toggleOverwrite: function(e) {
                        null != e && e == this.state.overwrite || ((this.state.overwrite = !this.state.overwrite) ? Ja(this.display.cursorDiv, "CodeMirror-overwrite") : Za(this.display.cursorDiv, "CodeMirror-overwrite"),
                        Pa(this, "overwriteToggle", this, this.state.overwrite))
                    },
                    hasFocus: function() {
                        return this.display.input.getField() == Gi()
                    },
                    isReadOnly: function() {
                        return !(!this.options.readOnly && !this.doc.cantEdit)
                    },
                    scrollTo: Ot(function(e, t) {
                        null == e && null == t || _n(this),
                        null != e && (this.curOp.scrollLeft = e),
                        null != t && (this.curOp.scrollTop = t)
                    }),
                    getScrollInfo: function() {
                        var e = this.display.scroller;
                        return {
                            left: e.scrollLeft,
                            top: e.scrollTop,
                            height: e.scrollHeight - Ye(this) - this.display.barHeight,
                            width: e.scrollWidth - Ye(this) - this.display.barWidth,
                            clientHeight: Ve(this),
                            clientWidth: $e(this)
                        }
                    },
                    scrollIntoView: Ot(function(e, t) {
                        if (null == e ? (e = {
                            from: this.doc.sel.primary().head,
                            to: null
                        },
                        null == t && (t = this.options.cursorScrollMargin)) : "number" == typeof e ? e = {
                            from: Bo(e, 0),
                            to: null
                        } : null == e.from && (e = {
                            from: e,
                            to: null
                        }),
                        e.to || (e.to = e.from),
                        e.margin = t || 0,
                        null != e.from.line)
                            _n(this),
                            this.curOp.scrollToPos = e;
                        else {
                            var n = Hn(this, Math.min(e.from.left, e.to.left), Math.min(e.from.top, e.to.top) - e.margin, Math.max(e.from.right, e.to.right), Math.max(e.from.bottom, e.to.bottom) + e.margin);
                            this.scrollTo(n.scrollLeft, n.scrollTop)
                        }
                    }),
                    setSize: Ot(function(e, t) {
                        function n(e) {
                            return "number" == typeof e || /^\d+$/.test(String(e)) ? e + "px" : e
                        }
                        var r = this;
                        null != e && (r.display.wrapper.style.width = n(e)),
                        null != t && (r.display.wrapper.style.height = n(t)),
                        r.options.lineWrapping && at(this);
                        var i = r.display.viewFrom;
                        r.doc.iter(i, r.display.viewTo, function(e) {
                            if (e.widgets)
                                for (var t = 0; t < e.widgets.length; t++)
                                    if (e.widgets[t].noHScroll) {
                                        Ht(r, i, "widget");
                                        break
                                    }
                            ++i
                        }),
                        r.curOp.forceUpdate = !0,
                        Pa(r, "refresh", this)
                    }),
                    operation: function(e) {
                        return At(this, e)
                    },
                    refresh: Ot(function() {
                        var e = this.display.cachedTextHeight;
                        Dt(this),
                        this.curOp.forceUpdate = !0,
                        lt(this),
                        this.scrollTo(this.doc.scrollLeft, this.doc.scrollTop),
                        u(this),
                        (null == e || Math.abs(e - yt(this.display)) > .5) && a(this),
                        Pa(this, "refresh", this)
                    }),
                    swapDoc: Ot(function(e) {
                        var t = this.doc;
                        return t.cm = null,
                        Xr(this, e),
                        lt(this),
                        this.display.input.reset(),
                        this.scrollTo(e.scrollLeft, e.scrollTop),
                        this.curOp.forceScroll = !0,
                        Ci(this, "swapDoc", this, t),
                        t
                    }),
                    getInputField: function() {
                        return this.display.input.getField()
                    },
                    getWrapperElement: function() {
                        return this.display.wrapper
                    },
                    getScrollerElement: function() {
                        return this.display.scroller
                    },
                    getGutterElement: function() {
                        return this.display.gutters
                    }
                },
                Ai(e);
                var ea = e.defaults = {}
                  , ta = e.optionHandlers = {}
                  , na = e.Init = {
                    toString: function() {
                        return "CodeMirror.Init"
                    }
                };
                Gn("value", "", function(e, t) {
                    e.setValue(t)
                }, !0),
                Gn("mode", null, function(e, t) {
                    e.doc.modeOption = t,
                    n(e)
                }, !0),
                Gn("indentUnit", 2, n, !0),
                Gn("indentWithTabs", !1),
                Gn("smartIndent", !0),
                Gn("tabSize", 4, function(e) {
                    r(e),
                    lt(e),
                    Dt(e)
                }, !0),
                Gn("lineSeparator", null, function(e, t) {
                    if (e.doc.lineSep = t,
                    t) {
                        var n = []
                          , r = e.doc.first;
                        e.doc.iter(function(e) {
                            for (var i = 0; ; ) {
                                var o = e.text.indexOf(t, i);
                                if (-1 == o)
                                    break;
                                i = o + t.length,
                                n.push(Bo(r, o))
                            }
                            r++
                        });
                        for (var i = n.length - 1; i >= 0; i--)
                            In(e.doc, t, n[i], Bo(n[i].line, n[i].ch + t.length))
                    }
                }),
                Gn("specialChars", /[\u0000-\u001f\u007f\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g, function(t, n, r) {
                    t.state.specialChars = new RegExp(n.source + (n.test("	") ? "" : "|	"),"g"),
                    r != e.Init && t.refresh()
                }),
                Gn("specialCharPlaceholder", _r, function(e) {
                    e.refresh()
                }, !0),
                Gn("electricChars", !0),
                Gn("inputStyle", Ao ? "contenteditable" : "textarea", function() {
                    throw new Error("inputStyle can not (yet) be changed in a running editor")
                }, !0),
                Gn("rtlMoveVisually", !Io),
                Gn("wholeLineUpdateBefore", !0),
                Gn("theme", "default", function(e) {
                    l(e),
                    s(e)
                }, !0),
                Gn("keyMap", "default", function(t, n, r) {
                    var i = $n(n)
                      , o = r != e.Init && $n(r);
                    o && o.detach && o.detach(t, i),
                    i.attach && i.attach(t, o || null)
                }),
                Gn("extraKeys", null),
                Gn("lineWrapping", !1, i, !0),
                Gn("gutters", [], function(e) {
                    d(e.options),
                    s(e)
                }, !0),
                Gn("fixedGutter", !0, function(e, t) {
                    e.display.gutters.style.left = t ? C(e.display) + "px" : "0",
                    e.refresh()
                }, !0),
                Gn("coverGutterNextToScrollbar", !1, function(e) {
                    y(e)
                }, !0),
                Gn("scrollbarStyle", "native", function(e) {
                    v(e),
                    y(e),
                    e.display.scrollbars.setScrollTop(e.doc.scrollTop),
                    e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)
                }, !0),
                Gn("lineNumbers", !1, function(e) {
                    d(e.options),
                    s(e)
                }, !0),
                Gn("firstLineNumber", 1, s, !0),
                Gn("lineNumberFormatter", function(e) {
                    return e
                }, s, !0),
                Gn("showCursorWhenSelecting", !1, Re, !0),
                Gn("resetSelectionOnContextMenu", !0),
                Gn("lineWiseCopyCut", !0),
                Gn("readOnly", !1, function(e, t) {
                    "nocursor" == t ? (yn(e),
                    e.display.input.blur(),
                    e.display.disabled = !0) : e.display.disabled = !1,
                    e.display.input.readOnlyChanged(t)
                }),
                Gn("disableInput", !1, function(e, t) {
                    t || e.display.input.reset()
                }, !0),
                Gn("dragDrop", !0, Ut),
                Gn("allowDropFileTypes", null),
                Gn("cursorBlinkRate", 530),
                Gn("cursorScrollMargin", 0),
                Gn("cursorHeight", 1, Re, !0),
                Gn("singleCursorHeightPerLine", !0, Re, !0),
                Gn("workTime", 100),
                Gn("workDelay", 100),
                Gn("flattenSpans", !0, r, !0),
                Gn("addModeClass", !1, r, !0),
                Gn("pollInterval", 100),
                Gn("undoDepth", 200, function(e, t) {
                    e.doc.history.undoDepth = t
                }),
                Gn("historyEventDelay", 1250),
                Gn("viewportMargin", 10, function(e) {
                    e.refresh()
                }, !0),
                Gn("maxHighlightLength", 1e4, r, !0),
                Gn("moveInputWithCursor", !0, function(e, t) {
                    t || e.display.input.resetPosition()
                }),
                Gn("tabindex", null, function(e, t) {
                    e.display.input.getField().tabIndex = t || ""
                }),
                Gn("autofocus", null);
                var ra = e.modes = {}
                  , ia = e.mimeModes = {};
                e.defineMode = function(t, n) {
                    e.defaults.mode || "null" == t || (e.defaults.mode = t),
                    arguments.length > 2 && (n.dependencies = Array.prototype.slice.call(arguments, 2)),
                    ra[t] = n
                }
                ,
                e.defineMIME = function(e, t) {
                    ia[e] = t
                }
                ,
                e.resolveMode = function(t) {
                    if ("string" == typeof t && ia.hasOwnProperty(t))
                        t = ia[t];
                    else if (t && "string" == typeof t.name && ia.hasOwnProperty(t.name)) {
                        var n = ia[t.name];
                        "string" == typeof n && (n = {
                            name: n
                        }),
                        t = Hi(n, t),
                        t.name = n.name
                    } else if ("string" == typeof t && /^[\w\-]+\/[\w\-]+\+xml$/.test(t))
                        return e.resolveMode("application/xml");
                    return "string" == typeof t ? {
                        name: t
                    } : t || {
                        name: "null"
                    }
                }
                ,
                e.getMode = function(t, n) {
                    var n = e.resolveMode(n)
                      , r = ra[n.name];
                    if (!r)
                        return e.getMode(t, "text/plain");
                    var i = r(t, n);
                    if (oa.hasOwnProperty(n.name)) {
                        var o = oa[n.name];
                        for (var a in o)
                            o.hasOwnProperty(a) && (i.hasOwnProperty(a) && (i["_" + a] = i[a]),
                            i[a] = o[a])
                    }
                    if (i.name = n.name,
                    n.helperType && (i.helperType = n.helperType),
                    n.modeProps)
                        for (var a in n.modeProps)
                            i[a] = n.modeProps[a];
                    return i
                }
                ,
                e.defineMode("null", function() {
                    return {
                        token: function(e) {
                            e.skipToEnd()
                        }
                    }
                }),
                e.defineMIME("text/plain", "null");
                var oa = e.modeExtensions = {};
                e.extendMode = function(e, t) {
                    var n = oa.hasOwnProperty(e) ? oa[e] : oa[e] = {};
                    Wi(t, n)
                }
                ,
                e.defineExtension = function(t, n) {
                    e.prototype[t] = n
                }
                ,
                e.defineDocExtension = function(e, t) {
                    Ca.prototype[e] = t
                }
                ,
                e.defineOption = Gn;
                var aa = [];
                e.defineInitHook = function(e) {
                    aa.push(e)
                }
                ;
                var la = e.helpers = {};
                e.registerHelper = function(t, n, r) {
                    la.hasOwnProperty(t) || (la[t] = e[t] = {
                        _global: []
                    }),
                    la[t][n] = r
                }
                ,
                e.registerGlobalHelper = function(t, n, r, i) {
                    e.registerHelper(t, n, i),
                    la[t]._global.push({
                        pred: r,
                        val: i
                    })
                }
                ;
                var sa = e.copyState = function(e, t) {
                    if (t === !0)
                        return t;
                    if (e.copyState)
                        return e.copyState(t);
                    var n = {};
                    for (var r in t) {
                        var i = t[r];
                        i instanceof Array && (i = i.concat([])),
                        n[r] = i
                    }
                    return n
                }
                  , ca = e.startState = function(e, t, n) {
                    return e.startState ? e.startState(t, n) : !0
                }
                ;
                e.innerMode = function(e, t) {
                    for (; e.innerMode; ) {
                        var n = e.innerMode(t);
                        if (!n || n.mode == e)
                            break;
                        t = n.state,
                        e = n.mode
                    }
                    return n || {
                        mode: e,
                        state: t
                    }
                }
                ;
                var ua = e.commands = {
                    selectAll: function(e) {
                        e.setSelection(Bo(e.firstLine(), 0), Bo(e.lastLine()), Wa)
                    },
                    singleSelection: function(e) {
                        e.setSelection(e.getCursor("anchor"), e.getCursor("head"), Wa)
                    },
                    killLine: function(e) {
                        jn(e, function(t) {
                            if (t.empty()) {
                                var n = Zr(e.doc, t.head.line).text.length;
                                return t.head.ch == n && t.head.line < e.lastLine() ? {
                                    from: t.head,
                                    to: Bo(t.head.line + 1, 0)
                                } : {
                                    from: t.head,
                                    to: Bo(t.head.line, n)
                                }
                            }
                            return {
                                from: t.from(),
                                to: t.to()
                            }
                        })
                    },
                    deleteLine: function(e) {
                        jn(e, function(t) {
                            return {
                                from: Bo(t.from().line, 0),
                                to: me(e.doc, Bo(t.to().line + 1, 0))
                            }
                        })
                    },
                    delLineLeft: function(e) {
                        jn(e, function(e) {
                            return {
                                from: Bo(e.from().line, 0),
                                to: e.from()
                            }
                        })
                    },
                    delWrappedLineLeft: function(e) {
                        jn(e, function(t) {
                            var n = e.charCoords(t.head, "div").top + 5
                              , r = e.coordsChar({
                                left: 0,
                                top: n
                            }, "div");
                            return {
                                from: r,
                                to: t.from()
                            }
                        })
                    },
                    delWrappedLineRight: function(e) {
                        jn(e, function(t) {
                            var n = e.charCoords(t.head, "div").top + 5
                              , r = e.coordsChar({
                                left: e.display.lineDiv.offsetWidth + 100,
                                top: n
                            }, "div");
                            return {
                                from: t.from(),
                                to: r
                            }
                        })
                    },
                    undo: function(e) {
                        e.undo()
                    },
                    redo: function(e) {
                        e.redo()
                    },
                    undoSelection: function(e) {
                        e.undoSelection()
                    },
                    redoSelection: function(e) {
                        e.redoSelection()
                    },
                    goDocStart: function(e) {
                        e.extendSelection(Bo(e.firstLine(), 0))
                    },
                    goDocEnd: function(e) {
                        e.extendSelection(Bo(e.lastLine()))
                    },
                    goLineStart: function(e) {
                        e.extendSelectionsBy(function(t) {
                            return oo(e, t.head.line)
                        }, {
                            origin: "+move",
                            bias: 1
                        })
                    },
                    goLineStartSmart: function(e) {
                        e.extendSelectionsBy(function(t) {
                            return lo(e, t.head)
                        }, {
                            origin: "+move",
                            bias: 1
                        })
                    },
                    goLineEnd: function(e) {
                        e.extendSelectionsBy(function(t) {
                            return ao(e, t.head.line)
                        }, {
                            origin: "+move",
                            bias: -1
                        })
                    },
                    goLineRight: function(e) {
                        e.extendSelectionsBy(function(t) {
                            var n = e.charCoords(t.head, "div").top + 5;
                            return e.coordsChar({
                                left: e.display.lineDiv.offsetWidth + 100,
                                top: n
                            }, "div")
                        }, _a)
                    },
                    goLineLeft: function(e) {
                        e.extendSelectionsBy(function(t) {
                            var n = e.charCoords(t.head, "div").top + 5;
                            return e.coordsChar({
                                left: 0,
                                top: n
                            }, "div")
                        }, _a)
                    },
                    goLineLeftSmart: function(e) {
                        e.extendSelectionsBy(function(t) {
                            var n = e.charCoords(t.head, "div").top + 5
                              , r = e.coordsChar({
                                left: 0,
                                top: n
                            }, "div");
                            return r.ch < e.getLine(r.line).search(/\S/) ? lo(e, t.head) : r
                        }, _a)
                    },
                    goLineUp: function(e) {
                        e.moveV(-1, "line")
                    },
                    goLineDown: function(e) {
                        e.moveV(1, "line")
                    },
                    goPageUp: function(e) {
                        e.moveV(-1, "page")
                    },
                    goPageDown: function(e) {
                        e.moveV(1, "page")
                    },
                    goCharLeft: function(e) {
                        e.moveH(-1, "char")
                    },
                    goCharRight: function(e) {
                        e.moveH(1, "char")
                    },
                    goColumnLeft: function(e) {
                        e.moveH(-1, "column")
                    },
                    goColumnRight: function(e) {
                        e.moveH(1, "column")
                    },
                    goWordLeft: function(e) {
                        e.moveH(-1, "word")
                    },
                    goGroupRight: function(e) {
                        e.moveH(1, "group")
                    },
                    goGroupLeft: function(e) {
                        e.moveH(-1, "group")
                    },
                    goWordRight: function(e) {
                        e.moveH(1, "word")
                    },
                    delCharBefore: function(e) {
                        e.deleteH(-1, "char")
                    },
                    delCharAfter: function(e) {
                        e.deleteH(1, "char")
                    },
                    delWordBefore: function(e) {
                        e.deleteH(-1, "word")
                    },
                    delWordAfter: function(e) {
                        e.deleteH(1, "word")
                    },
                    delGroupBefore: function(e) {
                        e.deleteH(-1, "group")
                    },
                    delGroupAfter: function(e) {
                        e.deleteH(1, "group")
                    },
                    indentAuto: function(e) {
                        e.indentSelection("smart")
                    },
                    indentMore: function(e) {
                        e.indentSelection("add")
                    },
                    indentLess: function(e) {
                        e.indentSelection("subtract")
                    },
                    insertTab: function(e) {
                        e.replaceSelection("	")
                    },
                    insertSoftTab: function(e) {
                        for (var t = [], n = e.listSelections(), r = e.options.tabSize, i = 0; i < n.length; i++) {
                            var o = n[i].from()
                              , a = Fa(e.getLine(o.line), o.ch, r);
                            t.push(Oi(r - a % r))
                        }
                        e.replaceSelections(t)
                    },
                    defaultTab: function(e) {
                        e.somethingSelected() ? e.indentSelection("add") : e.execCommand("insertTab")
                    },
                    transposeChars: function(e) {
                        At(e, function() {
                            for (var t = e.listSelections(), n = [], r = 0; r < t.length; r++) {
                                var i = t[r].head
                                  , o = Zr(e.doc, i.line).text;
                                if (o)
                                    if (i.ch == o.length && (i = new Bo(i.line,i.ch - 1)),
                                    i.ch > 0)
                                        i = new Bo(i.line,i.ch + 1),
                                        e.replaceRange(o.charAt(i.ch - 1) + o.charAt(i.ch - 2), Bo(i.line, i.ch - 2), i, "+transpose");
                                    else if (i.line > e.doc.first) {
                                        var a = Zr(e.doc, i.line - 1).text;
                                        a && e.replaceRange(o.charAt(0) + e.doc.lineSeparator() + a.charAt(a.length - 1), Bo(i.line - 1, a.length - 1), Bo(i.line, 1), "+transpose")
                                    }
                                n.push(new fe(i,i))
                            }
                            e.setSelections(n)
                        })
                    },
                    newlineAndIndent: function(e) {
                        At(e, function() {
                            for (var t = e.listSelections().length, n = 0; t > n; n++) {
                                var r = e.listSelections()[n];
                                e.replaceRange(e.doc.lineSeparator(), r.anchor, r.head, "+input"),
                                e.indentLine(r.from().line + 1, null, !0)
                            }
                            Bn(e)
                        })
                    },
                    openLine: function(e) {
                        e.replaceSelection("\n", "start")
                    },
                    toggleOverwrite: function(e) {
                        e.toggleOverwrite()
                    }
                }
                  , fa = e.keyMap = {};
                fa.basic = {
                    Left: "goCharLeft",
                    Right: "goCharRight",
                    Up: "goLineUp",
                    Down: "goLineDown",
                    End: "goLineEnd",
                    Home: "goLineStartSmart",
                    PageUp: "goPageUp",
                    PageDown: "goPageDown",
                    Delete: "delCharAfter",
                    Backspace: "delCharBefore",
                    "Shift-Backspace": "delCharBefore",
                    Tab: "defaultTab",
                    "Shift-Tab": "indentAuto",
                    Enter: "newlineAndIndent",
                    Insert: "toggleOverwrite",
                    Esc: "singleSelection"
                },
                fa.pcDefault = {
                    "Ctrl-A": "selectAll",
                    "Ctrl-D": "deleteLine",
                    "Ctrl-Z": "undo",
                    "Shift-Ctrl-Z": "redo",
                    "Ctrl-Y": "redo",
                    "Ctrl-Home": "goDocStart",
                    "Ctrl-End": "goDocEnd",
                    "Ctrl-Up": "goLineUp",
                    "Ctrl-Down": "goLineDown",
                    "Ctrl-Left": "goGroupLeft",
                    "Ctrl-Right": "goGroupRight",
                    "Alt-Left": "goLineStart",
                    "Alt-Right": "goLineEnd",
                    "Ctrl-Backspace": "delGroupBefore",
                    "Ctrl-Delete": "delGroupAfter",
                    "Ctrl-S": "save",
                    "Ctrl-F": "find",
                    "Ctrl-G": "findNext",
                    "Shift-Ctrl-G": "findPrev",
                    "Shift-Ctrl-F": "replace",
                    "Shift-Ctrl-R": "replaceAll",
                    "Ctrl-[": "indentLess",
                    "Ctrl-]": "indentMore",
                    "Ctrl-U": "undoSelection",
                    "Shift-Ctrl-U": "redoSelection",
                    "Alt-U": "redoSelection",
                    fallthrough: "basic"
                },
                fa.emacsy = {
                    "Ctrl-F": "goCharRight",
                    "Ctrl-B": "goCharLeft",
                    "Ctrl-P": "goLineUp",
                    "Ctrl-N": "goLineDown",
                    "Alt-F": "goWordRight",
                    "Alt-B": "goWordLeft",
                    "Ctrl-A": "goLineStart",
                    "Ctrl-E": "goLineEnd",
                    "Ctrl-V": "goPageDown",
                    "Shift-Ctrl-V": "goPageUp",
                    "Ctrl-D": "delCharAfter",
                    "Ctrl-H": "delCharBefore",
                    "Alt-D": "delWordAfter",
                    "Alt-Backspace": "delWordBefore",
                    "Ctrl-K": "killLine",
                    "Ctrl-T": "transposeChars",
                    "Ctrl-O": "openLine"
                },
                fa.macDefault = {
                    "Cmd-A": "selectAll",
                    "Cmd-D": "deleteLine",
                    "Cmd-Z": "undo",
                    "Shift-Cmd-Z": "redo",
                    "Cmd-Y": "redo",
                    "Cmd-Home": "goDocStart",
                    "Cmd-Up": "goDocStart",
                    "Cmd-End": "goDocEnd",
                    "Cmd-Down": "goDocEnd",
                    "Alt-Left": "goGroupLeft",
                    "Alt-Right": "goGroupRight",
                    "Cmd-Left": "goLineLeft",
                    "Cmd-Right": "goLineRight",
                    "Alt-Backspace": "delGroupBefore",
                    "Ctrl-Alt-Backspace": "delGroupAfter",
                    "Alt-Delete": "delGroupAfter",
                    "Cmd-S": "save",
                    "Cmd-F": "find",
                    "Cmd-G": "findNext",
                    "Shift-Cmd-G": "findPrev",
                    "Cmd-Alt-F": "replace",
                    "Shift-Cmd-Alt-F": "replaceAll",
                    "Cmd-[": "indentLess",
                    "Cmd-]": "indentMore",
                    "Cmd-Backspace": "delWrappedLineLeft",
                    "Cmd-Delete": "delWrappedLineRight",
                    "Cmd-U": "undoSelection",
                    "Shift-Cmd-U": "redoSelection",
                    "Ctrl-Up": "goDocStart",
                    "Ctrl-Down": "goDocEnd",
                    fallthrough: ["basic", "emacsy"]
                },
                fa["default"] = Eo ? fa.macDefault : fa.pcDefault,
                e.normalizeKeyMap = function(e) {
                    var t = {};
                    for (var n in e)
                        if (e.hasOwnProperty(n)) {
                            var r = e[n];
                            if (/^(name|fallthrough|(de|at)tach)$/.test(n))
                                continue;
                            if ("..." == r) {
                                delete e[n];
                                continue
                            }
                            for (var i = Ri(n.split(" "), Yn), o = 0; o < i.length; o++) {
                                var a, l;
                                o == i.length - 1 ? (l = i.join(" "),
                                a = r) : (l = i.slice(0, o + 1).join(" "),
                                a = "...");
                                var s = t[l];
                                if (s) {
                                    if (s != a)
                                        throw new Error("Inconsistent bindings for " + l)
                                } else
                                    t[l] = a
                            }
                            delete e[n]
                        }
                    for (var c in t)
                        e[c] = t[c];
                    return e
                }
                ;
                var ha = e.lookupKey = function(e, t, n, r) {
                    t = $n(t);
                    var i = t.call ? t.call(e, r) : t[e];
                    if (i === !1)
                        return "nothing";
                    if ("..." === i)
                        return "multi";
                    if (null != i && n(i))
                        return "handled";
                    if (t.fallthrough) {
                        if ("[object Array]" != Object.prototype.toString.call(t.fallthrough))
                            return ha(e, t.fallthrough, n, r);
                        for (var o = 0; o < t.fallthrough.length; o++) {
                            var a = ha(e, t.fallthrough[o], n, r);
                            if (a)
                                return a
                        }
                    }
                }
                  , da = e.isModifierKey = function(e) {
                    var t = "string" == typeof e ? e : ol[e.keyCode];
                    return "Ctrl" == t || "Alt" == t || "Shift" == t || "Mod" == t
                }
                  , pa = e.keyName = function(e, t) {
                    if (Co && 34 == e.keyCode && e["char"])
                        return !1;
                    var n = ol[e.keyCode]
                      , r = n;
                    return null == r || e.altGraphKey ? !1 : (e.altKey && "Alt" != n && (r = "Alt-" + r),
                    (Ro ? e.metaKey : e.ctrlKey) && "Ctrl" != n && (r = "Ctrl-" + r),
                    (Ro ? e.ctrlKey : e.metaKey) && "Cmd" != n && (r = "Cmd-" + r),
                    !t && e.shiftKey && "Shift" != n && (r = "Shift-" + r),
                    r)
                }
                ;
                e.fromTextArea = function(t, n) {
                    function r() {
                        t.value = c.getValue()
                    }
                    if (n = n ? Wi(n) : {},
                    n.value = t.value,
                    !n.tabindex && t.tabIndex && (n.tabindex = t.tabIndex),
                    !n.placeholder && t.placeholder && (n.placeholder = t.placeholder),
                    null == n.autofocus) {
                        var i = Gi();
                        n.autofocus = i == t || null != t.getAttribute("autofocus") && i == document.body
                    }
                    if (t.form && (Ea(t.form, "submit", r),
                    !n.leaveSubmitMethodAlone)) {
                        var o = t.form
                          , a = o.submit;
                        try {
                            var l = o.submit = function() {
                                r(),
                                o.submit = a,
                                o.submit(),
                                o.submit = l
                            }
                        } catch (s) {}
                    }
                    n.finishInit = function(e) {
                        e.save = r,
                        e.getTextArea = function() {
                            return t
                        }
                        ,
                        e.toTextArea = function() {
                            e.toTextArea = isNaN,
                            r(),
                            t.parentNode.removeChild(e.getWrapperElement()),
                            t.style.display = "",
                            t.form && (Ia(t.form, "submit", r),
                            "function" == typeof t.form.submit && (t.form.submit = a))
                        }
                    }
                    ,
                    t.style.display = "none";
                    var c = e(function(e) {
                        t.parentNode.insertBefore(e, t.nextSibling)
                    }, n);
                    return c
                }
                ;
                var ma = e.StringStream = function(e, t) {
                    this.pos = this.start = 0,
                    this.string = e,
                    this.tabSize = t || 8,
                    this.lastColumnPos = this.lastColumnValue = 0,
                    this.lineStart = 0
                }
                ;
                ma.prototype = {
                    eol: function() {
                        return this.pos >= this.string.length
                    },
                    sol: function() {
                        return this.pos == this.lineStart
                    },
                    peek: function() {
                        return this.string.charAt(this.pos) || void 0
                    },
                    next: function() {
                        return this.pos < this.string.length ? this.string.charAt(this.pos++) : void 0
                    },
                    eat: function(e) {
                        var t = this.string.charAt(this.pos);
                        if ("string" == typeof e)
                            var n = t == e;
                        else
                            var n = t && (e.test ? e.test(t) : e(t));
                        return n ? (++this.pos,
                        t) : void 0
                    },
                    eatWhile: function(e) {
                        for (var t = this.pos; this.eat(e); )
                            ;
                        return this.pos > t
                    },
                    eatSpace: function() {
                        for (var e = this.pos; /[\s\u00a0]/.test(this.string.charAt(this.pos)); )
                            ++this.pos;
                        return this.pos > e
                    },
                    skipToEnd: function() {
                        this.pos = this.string.length
                    },
                    skipTo: function(e) {
                        var t = this.string.indexOf(e, this.pos);
                        return t > -1 ? (this.pos = t,
                        !0) : void 0
                    },
                    backUp: function(e) {
                        this.pos -= e
                    },
                    column: function() {
                        return this.lastColumnPos < this.start && (this.lastColumnValue = Fa(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue),
                        this.lastColumnPos = this.start),
                        this.lastColumnValue - (this.lineStart ? Fa(this.string, this.lineStart, this.tabSize) : 0)
                    },
                    indentation: function() {
                        return Fa(this.string, null, this.tabSize) - (this.lineStart ? Fa(this.string, this.lineStart, this.tabSize) : 0);
                    },
                    match: function(e, t, n) {
                        if ("string" != typeof e) {
                            var r = this.string.slice(this.pos).match(e);
                            return r && r.index > 0 ? null : (r && t !== !1 && (this.pos += r[0].length),
                            r)
                        }
                        var i = function(e) {
                            return n ? e.toLowerCase() : e
                        }
                          , o = this.string.substr(this.pos, e.length);
                        return i(o) == i(e) ? (t !== !1 && (this.pos += e.length),
                        !0) : void 0
                    },
                    current: function() {
                        return this.string.slice(this.start, this.pos)
                    },
                    hideFirstChars: function(e, t) {
                        this.lineStart += e;
                        try {
                            return t()
                        } finally {
                            this.lineStart -= e
                        }
                    }
                };
                var ga = 0
                  , va = e.TextMarker = function(e, t) {
                    this.lines = [],
                    this.type = t,
                    this.doc = e,
                    this.id = ++ga
                }
                ;
                Ai(va),
                va.prototype.clear = function() {
                    if (!this.explicitlyCleared) {
                        var e = this.doc.cm
                          , t = e && !e.curOp;
                        if (t && bt(e),
                        Ni(this, "clear")) {
                            var n = this.find();
                            n && Ci(this, "clear", n.from, n.to)
                        }
                        for (var r = null, i = null, o = 0; o < this.lines.length; ++o) {
                            var a = this.lines[o]
                              , l = er(a.markedSpans, this);
                            e && !this.collapsed ? Ht(e, ti(a), "text") : e && (null != l.to && (i = ti(a)),
                            null != l.from && (r = ti(a))),
                            a.markedSpans = tr(a.markedSpans, l),
                            null == l.from && this.collapsed && !kr(this.doc, a) && e && ei(a, yt(e.display))
                        }
                        if (e && this.collapsed && !e.options.lineWrapping)
                            for (var o = 0; o < this.lines.length; ++o) {
                                var s = yr(this.lines[o])
                                  , c = f(s);
                                c > e.display.maxLineLength && (e.display.maxLine = s,
                                e.display.maxLineLength = c,
                                e.display.maxLineChanged = !0)
                            }
                        null != r && e && this.collapsed && Dt(e, r, i + 1),
                        this.lines.length = 0,
                        this.explicitlyCleared = !0,
                        this.atomic && this.doc.cantEdit && (this.doc.cantEdit = !1,
                        e && Ae(e.doc)),
                        e && Ci(e, "markerCleared", e, this),
                        t && kt(e),
                        this.parent && this.parent.clear()
                    }
                }
                ,
                va.prototype.find = function(e, t) {
                    null == e && "bookmark" == this.type && (e = 1);
                    for (var n, r, i = 0; i < this.lines.length; ++i) {
                        var o = this.lines[i]
                          , a = er(o.markedSpans, this);
                        if (null != a.from && (n = Bo(t ? o : ti(o), a.from),
                        -1 == e))
                            return n;
                        if (null != a.to && (r = Bo(t ? o : ti(o), a.to),
                        1 == e))
                            return r
                    }
                    return n && {
                        from: n,
                        to: r
                    }
                }
                ,
                va.prototype.changed = function() {
                    var e = this.find(-1, !0)
                      , t = this
                      , n = this.doc.cm;
                    e && n && At(n, function() {
                        var r = e.line
                          , i = ti(e.line)
                          , o = Qe(n, i);
                        if (o && (ot(o),
                        n.curOp.selectionChanged = n.curOp.forceUpdate = !0),
                        n.curOp.updateMaxLine = !0,
                        !kr(t.doc, r) && null != t.height) {
                            var a = t.height;
                            t.height = null;
                            var l = Lr(t) - a;
                            l && ei(r, r.height + l)
                        }
                    })
                }
                ,
                va.prototype.attachLine = function(e) {
                    if (!this.lines.length && this.doc.cm) {
                        var t = this.doc.cm.curOp;
                        t.maybeHiddenMarkers && -1 != Pi(t.maybeHiddenMarkers, this) || (t.maybeUnhiddenMarkers || (t.maybeUnhiddenMarkers = [])).push(this)
                    }
                    this.lines.push(e)
                }
                ,
                va.prototype.detachLine = function(e) {
                    if (this.lines.splice(Pi(this.lines, e), 1),
                    !this.lines.length && this.doc.cm) {
                        var t = this.doc.cm.curOp;
                        (t.maybeHiddenMarkers || (t.maybeHiddenMarkers = [])).push(this)
                    }
                }
                ;
                var ga = 0
                  , ya = e.SharedTextMarker = function(e, t) {
                    this.markers = e,
                    this.primary = t;
                    for (var n = 0; n < e.length; ++n)
                        e[n].parent = this
                }
                ;
                Ai(ya),
                ya.prototype.clear = function() {
                    if (!this.explicitlyCleared) {
                        this.explicitlyCleared = !0;
                        for (var e = 0; e < this.markers.length; ++e)
                            this.markers[e].clear();
                        Ci(this, "clear")
                    }
                }
                ,
                ya.prototype.find = function(e, t) {
                    return this.primary.find(e, t)
                }
                ;
                var xa = e.LineWidget = function(e, t, n) {
                    if (n)
                        for (var r in n)
                            n.hasOwnProperty(r) && (this[r] = n[r]);
                    this.doc = e,
                    this.node = t
                }
                ;
                Ai(xa),
                xa.prototype.clear = function() {
                    var e = this.doc.cm
                      , t = this.line.widgets
                      , n = this.line
                      , r = ti(n);
                    if (null != r && t) {
                        for (var i = 0; i < t.length; ++i)
                            t[i] == this && t.splice(i--, 1);
                        t.length || (n.widgets = null);
                        var o = Lr(this);
                        ei(n, Math.max(0, n.height - o)),
                        e && At(e, function() {
                            Cr(e, n, -o),
                            Ht(e, r, "widget")
                        })
                    }
                }
                ,
                xa.prototype.changed = function() {
                    var e = this.height
                      , t = this.doc.cm
                      , n = this.line;
                    this.height = null;
                    var r = Lr(this) - e;
                    r && (ei(n, n.height + r),
                    t && At(t, function() {
                        t.curOp.forceUpdate = !0,
                        Cr(t, n, r)
                    }))
                }
                ;
                var ba = e.Line = function(e, t, n) {
                    this.text = e,
                    ur(this, t),
                    this.height = n ? n(this) : 1
                }
                ;
                Ai(ba),
                ba.prototype.lineNo = function() {
                    return ti(this)
                }
                ;
                var wa = {}
                  , ka = {};
                $r.prototype = {
                    chunkSize: function() {
                        return this.lines.length
                    },
                    removeInner: function(e, t) {
                        for (var n = e, r = e + t; r > n; ++n) {
                            var i = this.lines[n];
                            this.height -= i.height,
                            Nr(i),
                            Ci(i, "delete")
                        }
                        this.lines.splice(e, t)
                    },
                    collapse: function(e) {
                        e.push.apply(e, this.lines)
                    },
                    insertInner: function(e, t, n) {
                        this.height += n,
                        this.lines = this.lines.slice(0, e).concat(t).concat(this.lines.slice(e));
                        for (var r = 0; r < t.length; ++r)
                            t[r].parent = this
                    },
                    iterN: function(e, t, n) {
                        for (var r = e + t; r > e; ++e)
                            if (n(this.lines[e]))
                                return !0
                    }
                },
                Vr.prototype = {
                    chunkSize: function() {
                        return this.size
                    },
                    removeInner: function(e, t) {
                        this.size -= t;
                        for (var n = 0; n < this.children.length; ++n) {
                            var r = this.children[n]
                              , i = r.chunkSize();
                            if (i > e) {
                                var o = Math.min(t, i - e)
                                  , a = r.height;
                                if (r.removeInner(e, o),
                                this.height -= a - r.height,
                                i == o && (this.children.splice(n--, 1),
                                r.parent = null),
                                0 == (t -= o))
                                    break;
                                e = 0
                            } else
                                e -= i
                        }
                        if (this.size - t < 25 && (this.children.length > 1 || !(this.children[0]instanceof $r))) {
                            var l = [];
                            this.collapse(l),
                            this.children = [new $r(l)],
                            this.children[0].parent = this
                        }
                    },
                    collapse: function(e) {
                        for (var t = 0; t < this.children.length; ++t)
                            this.children[t].collapse(e)
                    },
                    insertInner: function(e, t, n) {
                        this.size += t.length,
                        this.height += n;
                        for (var r = 0; r < this.children.length; ++r) {
                            var i = this.children[r]
                              , o = i.chunkSize();
                            if (o >= e) {
                                if (i.insertInner(e, t, n),
                                i.lines && i.lines.length > 50) {
                                    for (var a = i.lines.length % 25 + 25, l = a; l < i.lines.length; ) {
                                        var s = new $r(i.lines.slice(l, l += 25));
                                        i.height -= s.height,
                                        this.children.splice(++r, 0, s),
                                        s.parent = this
                                    }
                                    i.lines = i.lines.slice(0, a),
                                    this.maybeSpill()
                                }
                                break
                            }
                            e -= o
                        }
                    },
                    maybeSpill: function() {
                        if (!(this.children.length <= 10)) {
                            var e = this;
                            do {
                                var t = e.children.splice(e.children.length - 5, 5)
                                  , n = new Vr(t);
                                if (e.parent) {
                                    e.size -= n.size,
                                    e.height -= n.height;
                                    var r = Pi(e.parent.children, e);
                                    e.parent.children.splice(r + 1, 0, n)
                                } else {
                                    var i = new Vr(e.children);
                                    i.parent = e,
                                    e.children = [i, n],
                                    e = i
                                }
                                n.parent = e.parent
                            } while (e.children.length > 10);
                            e.parent.maybeSpill()
                        }
                    },
                    iterN: function(e, t, n) {
                        for (var r = 0; r < this.children.length; ++r) {
                            var i = this.children[r]
                              , o = i.chunkSize();
                            if (o > e) {
                                var a = Math.min(t, o - e);
                                if (i.iterN(e, a, n))
                                    return !0;
                                if (0 == (t -= a))
                                    break;
                                e = 0
                            } else
                                e -= o
                        }
                    }
                };
                var Sa = 0
                  , Ca = e.Doc = function(e, t, n, r) {
                    if (!(this instanceof Ca))
                        return new Ca(e,t,n,r);
                    null == n && (n = 0),
                    Vr.call(this, [new $r([new ba("",null)])]),
                    this.first = n,
                    this.scrollTop = this.scrollLeft = 0,
                    this.cantEdit = !1,
                    this.cleanGeneration = 1,
                    this.frontier = n;
                    var i = Bo(n, 0);
                    this.sel = de(i),
                    this.history = new oi(null),
                    this.id = ++Sa,
                    this.modeOption = t,
                    this.lineSep = r,
                    this.extend = !1,
                    "string" == typeof e && (e = this.splitLines(e)),
                    Yr(this, {
                        from: i,
                        to: i,
                        text: e
                    }),
                    Te(this, de(i), Wa)
                }
                ;
                Ca.prototype = Hi(Vr.prototype, {
                    constructor: Ca,
                    iter: function(e, t, n) {
                        n ? this.iterN(e - this.first, t - e, n) : this.iterN(this.first, this.first + this.size, e)
                    },
                    insert: function(e, t) {
                        for (var n = 0, r = 0; r < t.length; ++r)
                            n += t[r].height;
                        this.insertInner(e - this.first, t, n)
                    },
                    remove: function(e, t) {
                        this.removeInner(e - this.first, t)
                    },
                    getValue: function(e) {
                        var t = Qr(this, this.first, this.first + this.size);
                        return e === !1 ? t : t.join(e || this.lineSeparator())
                    },
                    setValue: It(function(e) {
                        var t = Bo(this.first, 0)
                          , n = this.first + this.size - 1;
                        Tn(this, {
                            from: t,
                            to: Bo(n, Zr(this, n).text.length),
                            text: this.splitLines(e),
                            origin: "setValue",
                            full: !0
                        }, !0),
                        Te(this, de(t))
                    }),
                    replaceRange: function(e, t, n, r) {
                        t = me(this, t),
                        n = n ? me(this, n) : t,
                        In(this, e, t, n, r)
                    },
                    getRange: function(e, t, n) {
                        var r = Jr(this, me(this, e), me(this, t));
                        return n === !1 ? r : r.join(n || this.lineSeparator())
                    },
                    getLine: function(e) {
                        var t = this.getLineHandle(e);
                        return t && t.text
                    },
                    getLineHandle: function(e) {
                        return ve(this, e) ? Zr(this, e) : void 0
                    },
                    getLineNumber: function(e) {
                        return ti(e)
                    },
                    getLineHandleVisualStart: function(e) {
                        return "number" == typeof e && (e = Zr(this, e)),
                        yr(e)
                    },
                    lineCount: function() {
                        return this.size
                    },
                    firstLine: function() {
                        return this.first
                    },
                    lastLine: function() {
                        return this.first + this.size - 1
                    },
                    clipPos: function(e) {
                        return me(this, e)
                    },
                    getCursor: function(e) {
                        var t, n = this.sel.primary();
                        return t = null == e || "head" == e ? n.head : "anchor" == e ? n.anchor : "end" == e || "to" == e || e === !1 ? n.to() : n.from()
                    },
                    listSelections: function() {
                        return this.sel.ranges
                    },
                    somethingSelected: function() {
                        return this.sel.somethingSelected()
                    },
                    setCursor: It(function(e, t, n) {
                        Se(this, me(this, "number" == typeof e ? Bo(e, t || 0) : e), null, n)
                    }),
                    setSelection: It(function(e, t, n) {
                        Se(this, me(this, e), me(this, t || e), n)
                    }),
                    extendSelection: It(function(e, t, n) {
                        be(this, me(this, e), t && me(this, t), n)
                    }),
                    extendSelections: It(function(e, t) {
                        we(this, ye(this, e), t)
                    }),
                    extendSelectionsBy: It(function(e, t) {
                        var n = Ri(this.sel.ranges, e);
                        we(this, ye(this, n), t)
                    }),
                    setSelections: It(function(e, t, n) {
                        if (e.length) {
                            for (var r = 0, i = []; r < e.length; r++)
                                i[r] = new fe(me(this, e[r].anchor),me(this, e[r].head));
                            null == t && (t = Math.min(e.length - 1, this.sel.primIndex)),
                            Te(this, he(i, t), n)
                        }
                    }),
                    addSelection: It(function(e, t, n) {
                        var r = this.sel.ranges.slice(0);
                        r.push(new fe(me(this, e),me(this, t || e))),
                        Te(this, he(r, r.length - 1), n)
                    }),
                    getSelection: function(e) {
                        for (var t, n = this.sel.ranges, r = 0; r < n.length; r++) {
                            var i = Jr(this, n[r].from(), n[r].to());
                            t = t ? t.concat(i) : i
                        }
                        return e === !1 ? t : t.join(e || this.lineSeparator())
                    },
                    getSelections: function(e) {
                        for (var t = [], n = this.sel.ranges, r = 0; r < n.length; r++) {
                            var i = Jr(this, n[r].from(), n[r].to());
                            e !== !1 && (i = i.join(e || this.lineSeparator())),
                            t[r] = i
                        }
                        return t
                    },
                    replaceSelection: function(e, t, n) {
                        for (var r = [], i = 0; i < this.sel.ranges.length; i++)
                            r[i] = e;
                        this.replaceSelections(r, t, n || "+input")
                    },
                    replaceSelections: It(function(e, t, n) {
                        for (var r = [], i = this.sel, o = 0; o < i.ranges.length; o++) {
                            var a = i.ranges[o];
                            r[o] = {
                                from: a.from(),
                                to: a.to(),
                                text: this.splitLines(e[o]),
                                origin: n
                            }
                        }
                        for (var l = t && "end" != t && Cn(this, r, t), o = r.length - 1; o >= 0; o--)
                            Tn(this, r[o]);
                        l ? Le(this, l) : this.cm && Bn(this.cm)
                    }),
                    undo: It(function() {
                        Nn(this, "undo")
                    }),
                    redo: It(function() {
                        Nn(this, "redo")
                    }),
                    undoSelection: It(function() {
                        Nn(this, "undo", !0)
                    }),
                    redoSelection: It(function() {
                        Nn(this, "redo", !0)
                    }),
                    setExtending: function(e) {
                        this.extend = e
                    },
                    getExtending: function() {
                        return this.extend
                    },
                    historySize: function() {
                        for (var e = this.history, t = 0, n = 0, r = 0; r < e.done.length; r++)
                            e.done[r].ranges || ++t;
                        for (var r = 0; r < e.undone.length; r++)
                            e.undone[r].ranges || ++n;
                        return {
                            undo: t,
                            redo: n
                        }
                    },
                    clearHistory: function() {
                        this.history = new oi(this.history.maxGeneration)
                    },
                    markClean: function() {
                        this.cleanGeneration = this.changeGeneration(!0)
                    },
                    changeGeneration: function(e) {
                        return e && (this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null),
                        this.history.generation
                    },
                    isClean: function(e) {
                        return this.history.generation == (e || this.cleanGeneration)
                    },
                    getHistory: function() {
                        return {
                            done: gi(this.history.done),
                            undone: gi(this.history.undone)
                        }
                    },
                    setHistory: function(e) {
                        var t = this.history = new oi(this.history.maxGeneration);
                        t.done = gi(e.done.slice(0), null, !0),
                        t.undone = gi(e.undone.slice(0), null, !0)
                    },
                    addLineClass: It(function(e, t, n) {
                        return zn(this, e, "gutter" == t ? "gutter" : "class", function(e) {
                            var r = "text" == t ? "textClass" : "background" == t ? "bgClass" : "gutter" == t ? "gutterClass" : "wrapClass";
                            if (e[r]) {
                                if (Yi(n).test(e[r]))
                                    return !1;
                                e[r] += " " + n
                            } else
                                e[r] = n;
                            return !0
                        })
                    }),
                    removeLineClass: It(function(e, t, n) {
                        return zn(this, e, "gutter" == t ? "gutter" : "class", function(e) {
                            var r = "text" == t ? "textClass" : "background" == t ? "bgClass" : "gutter" == t ? "gutterClass" : "wrapClass"
                              , i = e[r];
                            if (!i)
                                return !1;
                            if (null == n)
                                e[r] = null;
                            else {
                                var o = i.match(Yi(n));
                                if (!o)
                                    return !1;
                                var a = o.index + o[0].length;
                                e[r] = i.slice(0, o.index) + (o.index && a != i.length ? " " : "") + i.slice(a) || null
                            }
                            return !0
                        })
                    }),
                    addLineWidget: It(function(e, t, n) {
                        return Tr(this, e, t, n)
                    }),
                    removeLineWidget: function(e) {
                        e.clear()
                    },
                    markText: function(e, t, n) {
                        return Vn(this, me(this, e), me(this, t), n, n && n.type || "range")
                    },
                    setBookmark: function(e, t) {
                        var n = {
                            replacedWith: t && (null == t.nodeType ? t.widget : t),
                            insertLeft: t && t.insertLeft,
                            clearWhenEmpty: !1,
                            shared: t && t.shared,
                            handleMouseEvents: t && t.handleMouseEvents
                        };
                        return e = me(this, e),
                        Vn(this, e, e, n, "bookmark")
                    },
                    findMarksAt: function(e) {
                        e = me(this, e);
                        var t = []
                          , n = Zr(this, e.line).markedSpans;
                        if (n)
                            for (var r = 0; r < n.length; ++r) {
                                var i = n[r];
                                (null == i.from || i.from <= e.ch) && (null == i.to || i.to >= e.ch) && t.push(i.marker.parent || i.marker)
                            }
                        return t
                    },
                    findMarks: function(e, t, n) {
                        e = me(this, e),
                        t = me(this, t);
                        var r = []
                          , i = e.line;
                        return this.iter(e.line, t.line + 1, function(o) {
                            var a = o.markedSpans;
                            if (a)
                                for (var l = 0; l < a.length; l++) {
                                    var s = a[l];
                                    null != s.to && i == e.line && e.ch >= s.to || null == s.from && i != e.line || null != s.from && i == t.line && s.from >= t.ch || n && !n(s.marker) || r.push(s.marker.parent || s.marker)
                                }
                            ++i
                        }),
                        r
                    },
                    getAllMarks: function() {
                        var e = [];
                        return this.iter(function(t) {
                            var n = t.markedSpans;
                            if (n)
                                for (var r = 0; r < n.length; ++r)
                                    null != n[r].from && e.push(n[r].marker)
                        }),
                        e
                    },
                    posFromIndex: function(e) {
                        var t, n = this.first, r = this.lineSeparator().length;
                        return this.iter(function(i) {
                            var o = i.text.length + r;
                            return o > e ? (t = e,
                            !0) : (e -= o,
                            void ++n)
                        }),
                        me(this, Bo(n, t))
                    },
                    indexFromPos: function(e) {
                        e = me(this, e);
                        var t = e.ch;
                        if (e.line < this.first || e.ch < 0)
                            return 0;
                        var n = this.lineSeparator().length;
                        return this.iter(this.first, e.line, function(e) {
                            t += e.text.length + n
                        }),
                        t
                    },
                    copy: function(e) {
                        var t = new Ca(Qr(this, this.first, this.first + this.size),this.modeOption,this.first,this.lineSep);
                        return t.scrollTop = this.scrollTop,
                        t.scrollLeft = this.scrollLeft,
                        t.sel = this.sel,
                        t.extend = !1,
                        e && (t.history.undoDepth = this.history.undoDepth,
                        t.setHistory(this.getHistory())),
                        t
                    },
                    linkedDoc: function(e) {
                        e || (e = {});
                        var t = this.first
                          , n = this.first + this.size;
                        null != e.from && e.from > t && (t = e.from),
                        null != e.to && e.to < n && (n = e.to);
                        var r = new Ca(Qr(this, t, n),e.mode || this.modeOption,t,this.lineSep);
                        return e.sharedHist && (r.history = this.history),
                        (this.linked || (this.linked = [])).push({
                            doc: r,
                            sharedHist: e.sharedHist
                        }),
                        r.linked = [{
                            doc: this,
                            isParent: !0,
                            sharedHist: e.sharedHist
                        }],
                        Zn(r, Xn(this)),
                        r
                    },
                    unlinkDoc: function(t) {
                        if (t instanceof e && (t = t.doc),
                        this.linked)
                            for (var n = 0; n < this.linked.length; ++n) {
                                var r = this.linked[n];
                                if (r.doc == t) {
                                    this.linked.splice(n, 1),
                                    t.unlinkDoc(this),
                                    Jn(Xn(this));
                                    break
                                }
                            }
                        if (t.history == this.history) {
                            var i = [t.id];
                            Kr(t, function(e) {
                                i.push(e.id)
                            }, !0),
                            t.history = new oi(null),
                            t.history.done = gi(this.history.done, i),
                            t.history.undone = gi(this.history.undone, i)
                        }
                    },
                    iterLinkedDocs: function(e) {
                        Kr(this, e)
                    },
                    getMode: function() {
                        return this.mode
                    },
                    getEditor: function() {
                        return this.cm
                    },
                    splitLines: function(e) {
                        return this.lineSep ? e.split(this.lineSep) : tl(e)
                    },
                    lineSeparator: function() {
                        return this.lineSep || "\n"
                    }
                }),
                Ca.prototype.eachLine = Ca.prototype.iter;
                var La = "iter insert remove copy getEditor constructor".split(" ");
                for (var Ta in Ca.prototype)
                    Ca.prototype.hasOwnProperty(Ta) && Pi(La, Ta) < 0 && (e.prototype[Ta] = function(e) {
                        return function() {
                            return e.apply(this.doc, arguments)
                        }
                    }(Ca.prototype[Ta]));
                Ai(Ca);
                var Ma = e.e_preventDefault = function(e) {
                    e.preventDefault ? e.preventDefault() : e.returnValue = !1
                }
                  , Na = e.e_stopPropagation = function(e) {
                    e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0
                }
                  , Aa = e.e_stop = function(e) {
                    Ma(e),
                    Na(e)
                }
                  , Ea = e.on = function(e, t, n) {
                    if (e.addEventListener)
                        e.addEventListener(t, n, !1);
                    else if (e.attachEvent)
                        e.attachEvent("on" + t, n);
                    else {
                        var r = e._handlers || (e._handlers = {})
                          , i = r[t] || (r[t] = []);
                        i.push(n)
                    }
                }
                  , Oa = []
                  , Ia = e.off = function(e, t, n) {
                    if (e.removeEventListener)
                        e.removeEventListener(t, n, !1);
                    else if (e.detachEvent)
                        e.detachEvent("on" + t, n);
                    else
                        for (var r = Si(e, t, !1), i = 0; i < r.length; ++i)
                            if (r[i] == n) {
                                r.splice(i, 1);
                                break
                            }
                }
                  , Pa = e.signal = function(e, t) {
                    var n = Si(e, t, !0);
                    if (n.length)
                        for (var r = Array.prototype.slice.call(arguments, 2), i = 0; i < n.length; ++i)
                            n[i].apply(null, r)
                }
                  , Ra = null
                  , Da = 30
                  , Ha = e.Pass = {
                    toString: function() {
                        return "CodeMirror.Pass"
                    }
                }
                  , Wa = {
                    scroll: !1
                }
                  , Ba = {
                    origin: "*mouse"
                }
                  , _a = {
                    origin: "+move"
                };
                Ei.prototype.set = function(e, t) {
                    clearTimeout(this.id),
                    this.id = setTimeout(t, e)
                }
                ;
                var Fa = e.countColumn = function(e, t, n, r, i) {
                    null == t && (t = e.search(/[^\s\u00a0]/),
                    -1 == t && (t = e.length));
                    for (var o = r || 0, a = i || 0; ; ) {
                        var l = e.indexOf("	", o);
                        if (0 > l || l >= t)
                            return a + (t - o);
                        a += l - o,
                        a += n - a % n,
                        o = l + 1
                    }
                }
                  , za = e.findColumn = function(e, t, n) {
                    for (var r = 0, i = 0; ; ) {
                        var o = e.indexOf("	", r);
                        -1 == o && (o = e.length);
                        var a = o - r;
                        if (o == e.length || i + a >= t)
                            return r + Math.min(a, t - i);
                        if (i += o - r,
                        i += n - i % n,
                        r = o + 1,
                        i >= t)
                            return r
                    }
                }
                  , ja = [""]
                  , Ua = function(e) {
                    e.select()
                };
                No ? Ua = function(e) {
                    e.selectionStart = 0,
                    e.selectionEnd = e.value.length
                }
                : xo && (Ua = function(e) {
                    try {
                        e.select()
                    } catch (t) {}
                }
                );
                var qa, Ga = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/, Ya = e.isWordChar = function(e) {
                    return /\w/.test(e) || e > "\x80" && (e.toUpperCase() != e.toLowerCase() || Ga.test(e))
                }
                , $a = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
                qa = document.createRange ? function(e, t, n, r) {
                    var i = document.createRange();
                    return i.setEnd(r || e, n),
                    i.setStart(e, t),
                    i
                }
                : function(e, t, n) {
                    var r = document.body.createTextRange();
                    try {
                        r.moveToElementText(e.parentNode)
                    } catch (i) {
                        return r
                    }
                    return r.collapse(!0),
                    r.moveEnd("character", n),
                    r.moveStart("character", t),
                    r
                }
                ;
                var Va = e.contains = function(e, t) {
                    if (3 == t.nodeType && (t = t.parentNode),
                    e.contains)
                        return e.contains(t);
                    do
                        if (11 == t.nodeType && (t = t.host),
                        t == e)
                            return !0;
                    while (t = t.parentNode)
                }
                ;
                xo && 11 > bo && (Gi = function() {
                    try {
                        return document.activeElement
                    } catch (e) {
                        return document.body
                    }
                }
                );
                var Ka, Xa, Za = e.rmClass = function(e, t) {
                    var n = e.className
                      , r = Yi(t).exec(n);
                    if (r) {
                        var i = n.slice(r.index + r[0].length);
                        e.className = n.slice(0, r.index) + (i ? r[1] + i : "")
                    }
                }
                , Ja = e.addClass = function(e, t) {
                    var n = e.className;
                    Yi(t).test(n) || (e.className += (n ? " " : "") + t)
                }
                , Qa = !1, el = function() {
                    if (xo && 9 > bo)
                        return !1;
                    var e = ji("div");
                    return "draggable"in e || "dragDrop"in e
                }(), tl = e.splitLines = 3 != "\n\nb".split(/\n/).length ? function(e) {
                    for (var t = 0, n = [], r = e.length; r >= t; ) {
                        var i = e.indexOf("\n", t);
                        -1 == i && (i = e.length);
                        var o = e.slice(t, "\r" == e.charAt(i - 1) ? i - 1 : i)
                          , a = o.indexOf("\r");
                        -1 != a ? (n.push(o.slice(0, a)),
                        t += a + 1) : (n.push(o),
                        t = i + 1)
                    }
                    return n
                }
                : function(e) {
                    return e.split(/\r\n?|\n/)
                }
                , nl = window.getSelection ? function(e) {
                    try {
                        return e.selectionStart != e.selectionEnd
                    } catch (t) {
                        return !1
                    }
                }
                : function(e) {
                    try {
                        var t = e.ownerDocument.selection.createRange()
                    } catch (n) {}
                    return t && t.parentElement() == e ? 0 != t.compareEndPoints("StartToEnd", t) : !1
                }
                , rl = function() {
                    var e = ji("div");
                    return "oncopy"in e ? !0 : (e.setAttribute("oncopy", "return;"),
                    "function" == typeof e.oncopy)
                }(), il = null, ol = e.keyNames = {
                    3: "Enter",
                    8: "Backspace",
                    9: "Tab",
                    13: "Enter",
                    16: "Shift",
                    17: "Ctrl",
                    18: "Alt",
                    19: "Pause",
                    20: "CapsLock",
                    27: "Esc",
                    32: "Space",
                    33: "PageUp",
                    34: "PageDown",
                    35: "End",
                    36: "Home",
                    37: "Left",
                    38: "Up",
                    39: "Right",
                    40: "Down",
                    44: "PrintScrn",
                    45: "Insert",
                    46: "Delete",
                    59: ";",
                    61: "=",
                    91: "Mod",
                    92: "Mod",
                    93: "Mod",
                    106: "*",
                    107: "=",
                    109: "-",
                    110: ".",
                    111: "/",
                    127: "Delete",
                    173: "-",
                    186: ";",
                    187: "=",
                    188: ",",
                    189: "-",
                    190: ".",
                    191: "/",
                    192: "`",
                    219: "[",
                    220: "\\",
                    221: "]",
                    222: "'",
                    63232: "Up",
                    63233: "Down",
                    63234: "Left",
                    63235: "Right",
                    63272: "Delete",
                    63273: "Home",
                    63275: "End",
                    63276: "PageUp",
                    63277: "PageDown",
                    63302: "Insert"
                };
                !function() {
                    for (var e = 0; 10 > e; e++)
                        ol[e + 48] = ol[e + 96] = String(e);
                    for (var e = 65; 90 >= e; e++)
                        ol[e] = String.fromCharCode(e);
                    for (var e = 1; 12 >= e; e++)
                        ol[e + 111] = ol[e + 63235] = "F" + e
                }();
                var al, ll = function() {
                    function e(e) {
                        return 247 >= e ? n.charAt(e) : e >= 1424 && 1524 >= e ? "R" : e >= 1536 && 1773 >= e ? r.charAt(e - 1536) : e >= 1774 && 2220 >= e ? "r" : e >= 8192 && 8203 >= e ? "w" : 8204 == e ? "b" : "L"
                    }
                    function t(e, t, n) {
                        this.level = e,
                        this.from = t,
                        this.to = n
                    }
                    var n = "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN"
                      , r = "rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm"
                      , i = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/
                      , o = /[stwN]/
                      , a = /[LRr]/
                      , l = /[Lb1n]/
                      , s = /[1n]/
                      , c = "L";
                    return function(n) {
                        if (!i.test(n))
                            return !1;
                        for (var r, u = n.length, f = [], h = 0; u > h; ++h)
                            f.push(r = e(n.charCodeAt(h)));
                        for (var h = 0, d = c; u > h; ++h) {
                            var r = f[h];
                            "m" == r ? f[h] = d : d = r
                        }
                        for (var h = 0, p = c; u > h; ++h) {
                            var r = f[h];
                            "1" == r && "r" == p ? f[h] = "n" : a.test(r) && (p = r,
                            "r" == r && (f[h] = "R"))
                        }
                        for (var h = 1, d = f[0]; u - 1 > h; ++h) {
                            var r = f[h];
                            "+" == r && "1" == d && "1" == f[h + 1] ? f[h] = "1" : "," != r || d != f[h + 1] || "1" != d && "n" != d || (f[h] = d),
                            d = r
                        }
                        for (var h = 0; u > h; ++h) {
                            var r = f[h];
                            if ("," == r)
                                f[h] = "N";
                            else if ("%" == r) {
                                for (var m = h + 1; u > m && "%" == f[m]; ++m)
                                    ;
                                for (var g = h && "!" == f[h - 1] || u > m && "1" == f[m] ? "1" : "N", v = h; m > v; ++v)
                                    f[v] = g;
                                h = m - 1
                            }
                        }
                        for (var h = 0, p = c; u > h; ++h) {
                            var r = f[h];
                            "L" == p && "1" == r ? f[h] = "L" : a.test(r) && (p = r)
                        }
                        for (var h = 0; u > h; ++h)
                            if (o.test(f[h])) {
                                for (var m = h + 1; u > m && o.test(f[m]); ++m)
                                    ;
                                for (var y = "L" == (h ? f[h - 1] : c), x = "L" == (u > m ? f[m] : c), g = y || x ? "L" : "R", v = h; m > v; ++v)
                                    f[v] = g;
                                h = m - 1
                            }
                        for (var b, w = [], h = 0; u > h; )
                            if (l.test(f[h])) {
                                var k = h;
                                for (++h; u > h && l.test(f[h]); ++h)
                                    ;
                                w.push(new t(0,k,h))
                            } else {
                                var S = h
                                  , C = w.length;
                                for (++h; u > h && "L" != f[h]; ++h)
                                    ;
                                for (var v = S; h > v; )
                                    if (s.test(f[v])) {
                                        v > S && w.splice(C, 0, new t(1,S,v));
                                        var L = v;
                                        for (++v; h > v && s.test(f[v]); ++v)
                                            ;
                                        w.splice(C, 0, new t(2,L,v)),
                                        S = v
                                    } else
                                        ++v;
                                h > S && w.splice(C, 0, new t(1,S,h))
                            }
                        return 1 == w[0].level && (b = n.match(/^\s+/)) && (w[0].from = b[0].length,
                        w.unshift(new t(0,0,b[0].length))),
                        1 == Ii(w).level && (b = n.match(/\s+$/)) && (Ii(w).to -= b[0].length,
                        w.push(new t(0,u - b[0].length,u))),
                        2 == w[0].level && w.unshift(new t(1,w[0].to,w[0].to)),
                        w[0].level != Ii(w).level && w.push(new t(w[0].level,u,u)),
                        w
                    }
                }();
                return e.version = "5.15.2",
                e
            })
        }
        , {}],
        11: [function(t, n, r) {
            !function(i) {
                "object" == typeof r && "object" == typeof n ? i(t("../../lib/codemirror"), t("../markdown/markdown"), t("../../addon/mode/overlay")) : "function" == typeof e && e.amd ? e(["../../lib/codemirror", "../markdown/markdown", "../../addon/mode/overlay"], i) : i(CodeMirror)
            }(function(e) {
                "use strict";
                var t = /^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/i;
                e.defineMode("gfm", function(n, r) {
                    function i(e) {
                        return e.code = !1,
                        null
                    }
                    var o = 0
                      , a = {
                        startState: function() {
                            return {
                                code: !1,
                                codeBlock: !1,
                                ateSpace: !1
                            }
                        },
                        copyState: function(e) {
                            return {
                                code: e.code,
                                codeBlock: e.codeBlock,
                                ateSpace: e.ateSpace
                            }
                        },
                        token: function(e, n) {
                            if (n.combineTokens = null,
                            n.codeBlock)
                                return e.match(/^```+/) ? (n.codeBlock = !1,
                                null) : (e.skipToEnd(),
                                null);
                            if (e.sol() && (n.code = !1),
                            e.sol() && e.match(/^```+/))
                                return e.skipToEnd(),
                                n.codeBlock = !0,
                                null;
                            if ("`" === e.peek()) {
                                e.next();
                                var i = e.pos;
                                e.eatWhile("`");
                                var a = 1 + e.pos - i;
                                return n.code ? a === o && (n.code = !1) : (o = a,
                                n.code = !0),
                                null
                            }
                            if (n.code)
                                return e.next(),
                                null;
                            if (e.eatSpace())
                                return n.ateSpace = !0,
                                null;
                            if ((e.sol() || n.ateSpace) && (n.ateSpace = !1,
                            r.gitHubSpice !== !1)) {
                                if (e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?:[a-f0-9]{7,40}\b)/))
                                    return n.combineTokens = !0,
                                    "link";
                                if (e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))
                                    return n.combineTokens = !0,
                                    "link"
                            }
                            return e.match(t) && "](" != e.string.slice(e.start - 2, e.start) && (0 == e.start || /\W/.test(e.string.charAt(e.start - 1))) ? (n.combineTokens = !0,
                            "link") : (e.next(),
                            null)
                        },
                        blankLine: i
                    }
                      , l = {
                        underscoresBreakWords: !1,
                        taskLists: !0,
                        fencedCodeBlocks: "```",
                        strikethrough: !0
                    };
                    for (var s in r)
                        l[s] = r[s];
                    return l.name = "markdown",
                    e.overlayMode(e.getMode(n, l), a)
                }, "markdown"),
                e.defineMIME("text/x-gfm", "gfm")
            })
        }
        , {
            "../../addon/mode/overlay": 8,
            "../../lib/codemirror": 10,
            "../markdown/markdown": 12
        }],
        12: [function(t, n, r) {
            !function(i) {
                "object" == typeof r && "object" == typeof n ? i(t("../../lib/codemirror"), t("../xml/xml"), t("../meta")) : "function" == typeof e && e.amd ? e(["../../lib/codemirror", "../xml/xml", "../meta"], i) : i(CodeMirror)
            }(function(e) {
                "use strict";
                e.defineMode("markdown", function(t, n) {
                    function r(n) {
                        if (e.findModeByName) {
                            var r = e.findModeByName(n);
                            r && (n = r.mime || r.mimes[0])
                        }
                        var i = e.getMode(t, n);
                        return "null" == i.name ? null : i
                    }
                    function i(e, t, n) {
                        return t.f = t.inline = n,
                        n(e, t)
                    }
                    function o(e, t, n) {
                        return t.f = t.block = n,
                        n(e, t)
                    }
                    function a(e) {
                        return !e || !/\S/.test(e.string)
                    }
                    function l(e) {
                        return e.linkTitle = !1,
                        e.em = !1,
                        e.strong = !1,
                        e.strikethrough = !1,
                        e.quote = 0,
                        e.indentedCode = !1,
                        k && e.f == c && (e.f = p,
                        e.block = s),
                        e.trailingSpace = 0,
                        e.trailingSpaceNewLine = !1,
                        e.prevLine = e.thisLine,
                        e.thisLine = null,
                        null
                    }
                    function s(t, o) {
                        var l = t.sol()
                          , s = o.list !== !1
                          , c = o.indentedCode;
                        o.indentedCode = !1,
                        s && (o.indentationDiff >= 0 ? (o.indentationDiff < 4 && (o.indentation -= o.indentationDiff),
                        o.list = null) : o.indentation > 0 ? o.list = null : o.list = !1);
                        var f = null;
                        if (o.indentationDiff >= 4)
                            return t.skipToEnd(),
                            c || a(o.prevLine) ? (o.indentation -= 4,
                            o.indentedCode = !0,
                            S.code) : null;
                        if (t.eatSpace())
                            return null;
                        if ((f = t.match(A)) && f[1].length <= 6)
                            return o.header = f[1].length,
                            n.highlightFormatting && (o.formatting = "header"),
                            o.f = o.inline,
                            h(o);
                        if (!(a(o.prevLine) || o.quote || s || c) && (f = t.match(E)))
                            return o.header = "=" == f[0].charAt(0) ? 1 : 2,
                            n.highlightFormatting && (o.formatting = "header"),
                            o.f = o.inline,
                            h(o);
                        if (t.eat(">"))
                            return o.quote = l ? 1 : o.quote + 1,
                            n.highlightFormatting && (o.formatting = "quote"),
                            t.eatSpace(),
                            h(o);
                        if ("[" === t.peek())
                            return i(t, o, y);
                        if (t.match(L, !0))
                            return o.hr = !0,
                            S.hr;
                        if ((a(o.prevLine) || s) && (t.match(T, !1) || t.match(M, !1))) {
                            var d = null;
                            for (t.match(T, !0) ? d = "ul" : (t.match(M, !0),
                            d = "ol"),
                            o.indentation = t.column() + t.current().length,
                            o.list = !0; o.listStack && t.column() < o.listStack[o.listStack.length - 1]; )
                                o.listStack.pop();
                            return o.listStack.push(o.indentation),
                            n.taskLists && t.match(N, !1) && (o.taskList = !0),
                            o.f = o.inline,
                            n.highlightFormatting && (o.formatting = ["list", "list-" + d]),
                            h(o)
                        }
                        return n.fencedCodeBlocks && (f = t.match(I, !0)) ? (o.fencedChars = f[1],
                        o.localMode = r(f[2]),
                        o.localMode && (o.localState = e.startState(o.localMode)),
                        o.f = o.block = u,
                        n.highlightFormatting && (o.formatting = "code-block"),
                        o.code = -1,
                        h(o)) : i(t, o, o.inline)
                    }
                    function c(t, n) {
                        var r = w.token(t, n.htmlState);
                        if (!k) {
                            var i = e.innerMode(w, n.htmlState);
                            ("xml" == i.mode.name && null === i.state.tagStart && !i.state.context && i.state.tokenize.isInText || n.md_inside && t.current().indexOf(">") > -1) && (n.f = p,
                            n.block = s,
                            n.htmlState = null)
                        }
                        return r
                    }
                    function u(e, t) {
                        return t.fencedChars && e.match(t.fencedChars, !1) ? (t.localMode = t.localState = null,
                        t.f = t.block = f,
                        null) : t.localMode ? t.localMode.token(e, t.localState) : (e.skipToEnd(),
                        S.code)
                    }
                    function f(e, t) {
                        e.match(t.fencedChars),
                        t.block = s,
                        t.f = p,
                        t.fencedChars = null,
                        n.highlightFormatting && (t.formatting = "code-block"),
                        t.code = 1;
                        var r = h(t);
                        return t.code = 0,
                        r
                    }
                    function h(e) {
                        var t = [];
                        if (e.formatting) {
                            t.push(S.formatting),
                            "string" == typeof e.formatting && (e.formatting = [e.formatting]);
                            for (var r = 0; r < e.formatting.length; r++)
                                t.push(S.formatting + "-" + e.formatting[r]),
                                "header" === e.formatting[r] && t.push(S.formatting + "-" + e.formatting[r] + "-" + e.header),
                                "quote" === e.formatting[r] && (!n.maxBlockquoteDepth || n.maxBlockquoteDepth >= e.quote ? t.push(S.formatting + "-" + e.formatting[r] + "-" + e.quote) : t.push("error"))
                        }
                        if (e.taskOpen)
                            return t.push("meta"),
                            t.length ? t.join(" ") : null;
                        if (e.taskClosed)
                            return t.push("property"),
                            t.length ? t.join(" ") : null;
                        if (e.linkHref ? t.push(S.linkHref, "url") : (e.strong && t.push(S.strong),
                        e.em && t.push(S.em),
                        e.strikethrough && t.push(S.strikethrough),
                        e.linkText && t.push(S.linkText),
                        e.code && t.push(S.code)),
                        e.header && t.push(S.header, S.header + "-" + e.header),
                        e.quote && (t.push(S.quote),
                        !n.maxBlockquoteDepth || n.maxBlockquoteDepth >= e.quote ? t.push(S.quote + "-" + e.quote) : t.push(S.quote + "-" + n.maxBlockquoteDepth)),
                        e.list !== !1) {
                            var i = (e.listStack.length - 1) % 3;
                            i ? 1 === i ? t.push(S.list2) : t.push(S.list3) : t.push(S.list1)
                        }
                        return e.trailingSpaceNewLine ? t.push("trailing-space-new-line") : e.trailingSpace && t.push("trailing-space-" + (e.trailingSpace % 2 ? "a" : "b")),
                        t.length ? t.join(" ") : null
                    }
                    function d(e, t) {
                        return e.match(O, !0) ? h(t) : void 0
                    }
                    function p(t, r) {
                        var i = r.text(t, r);
                        if ("undefined" != typeof i)
                            return i;
                        if (r.list)
                            return r.list = null,
                            h(r);
                        if (r.taskList) {
                            var a = "x" !== t.match(N, !0)[1];
                            return a ? r.taskOpen = !0 : r.taskClosed = !0,
                            n.highlightFormatting && (r.formatting = "task"),
                            r.taskList = !1,
                            h(r)
                        }
                        if (r.taskOpen = !1,
                        r.taskClosed = !1,
                        r.header && t.match(/^#+$/, !0))
                            return n.highlightFormatting && (r.formatting = "header"),
                            h(r);
                        var l = t.sol()
                          , s = t.next();
                        if (r.linkTitle) {
                            r.linkTitle = !1;
                            var u = s;
                            "(" === s && (u = ")"),
                            u = (u + "").replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1");
                            var f = "^\\s*(?:[^" + u + "\\\\]+|\\\\\\\\|\\\\.)" + u;
                            if (t.match(new RegExp(f), !0))
                                return S.linkHref
                        }
                        if ("`" === s) {
                            var d = r.formatting;
                            n.highlightFormatting && (r.formatting = "code"),
                            t.eatWhile("`");
                            var p = t.current().length;
                            if (0 == r.code)
                                return r.code = p,
                                h(r);
                            if (p == r.code) {
                                var v = h(r);
                                return r.code = 0,
                                v
                            }
                            return r.formatting = d,
                            h(r)
                        }
                        if (r.code)
                            return h(r);
                        if ("\\" === s && (t.next(),
                        n.highlightFormatting)) {
                            var y = h(r)
                              , x = S.formatting + "-escape";
                            return y ? y + " " + x : x
                        }
                        if ("!" === s && t.match(/\[[^\]]*\] ?(?:\(|\[)/, !1))
                            return t.match(/\[[^\]]*\]/),
                            r.inline = r.f = g,
                            S.image;
                        if ("[" === s && t.match(/[^\]]*\](\(.*\)| ?\[.*?\])/, !1))
                            return r.linkText = !0,
                            n.highlightFormatting && (r.formatting = "link"),
                            h(r);
                        if ("]" === s && r.linkText && t.match(/\(.*?\)| ?\[.*?\]/, !1)) {
                            n.highlightFormatting && (r.formatting = "link");
                            var y = h(r);
                            return r.linkText = !1,
                            r.inline = r.f = g,
                            y
                        }
                        if ("<" === s && t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/, !1)) {
                            r.f = r.inline = m,
                            n.highlightFormatting && (r.formatting = "link");
                            var y = h(r);
                            return y ? y += " " : y = "",
                            y + S.linkInline
                        }
                        if ("<" === s && t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/, !1)) {
                            r.f = r.inline = m,
                            n.highlightFormatting && (r.formatting = "link");
                            var y = h(r);
                            return y ? y += " " : y = "",
                            y + S.linkEmail
                        }
                        if ("<" === s && t.match(/^(!--|\w)/, !1)) {
                            var b = t.string.indexOf(">", t.pos);
                            if (-1 != b) {
                                var k = t.string.substring(t.start, b);
                                /markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(k) && (r.md_inside = !0)
                            }
                            return t.backUp(1),
                            r.htmlState = e.startState(w),
                            o(t, r, c)
                        }
                        if ("<" === s && t.match(/^\/\w*?>/))
                            return r.md_inside = !1,
                            "tag";
                        var C = !1;
                        if (!n.underscoresBreakWords && "_" === s && "_" !== t.peek() && t.match(/(\w)/, !1)) {
                            var L = t.pos - 2;
                            if (L >= 0) {
                                var T = t.string.charAt(L);
                                "_" !== T && T.match(/(\w)/, !1) && (C = !0)
                            }
                        }
                        if ("*" === s || "_" === s && !C)
                            if (l && " " === t.peek())
                                ;
                            else {
                                if (r.strong === s && t.eat(s)) {
                                    n.highlightFormatting && (r.formatting = "strong");
                                    var v = h(r);
                                    return r.strong = !1,
                                    v
                                }
                                if (!r.strong && t.eat(s))
                                    return r.strong = s,
                                    n.highlightFormatting && (r.formatting = "strong"),
                                    h(r);
                                if (r.em === s) {
                                    n.highlightFormatting && (r.formatting = "em");
                                    var v = h(r);
                                    return r.em = !1,
                                    v
                                }
                                if (!r.em)
                                    return r.em = s,
                                    n.highlightFormatting && (r.formatting = "em"),
                                    h(r)
                            }
                        else if (" " === s && (t.eat("*") || t.eat("_"))) {
                            if (" " === t.peek())
                                return h(r);
                            t.backUp(1)
                        }
                        if (n.strikethrough)
                            if ("~" === s && t.eatWhile(s)) {
                                if (r.strikethrough) {
                                    n.highlightFormatting && (r.formatting = "strikethrough");
                                    var v = h(r);
                                    return r.strikethrough = !1,
                                    v
                                }
                                if (t.match(/^[^\s]/, !1))
                                    return r.strikethrough = !0,
                                    n.highlightFormatting && (r.formatting = "strikethrough"),
                                    h(r)
                            } else if (" " === s && t.match(/^~~/, !0)) {
                                if (" " === t.peek())
                                    return h(r);
                                t.backUp(2)
                            }
                        return " " === s && (t.match(/ +$/, !1) ? r.trailingSpace++ : r.trailingSpace && (r.trailingSpaceNewLine = !0)),
                        h(r)
                    }
                    function m(e, t) {
                        var r = e.next();
                        if (">" === r) {
                            t.f = t.inline = p,
                            n.highlightFormatting && (t.formatting = "link");
                            var i = h(t);
                            return i ? i += " " : i = "",
                            i + S.linkInline
                        }
                        return e.match(/^[^>]+/, !0),
                        S.linkInline
                    }
                    function g(e, t) {
                        if (e.eatSpace())
                            return null;
                        var r = e.next();
                        return "(" === r || "[" === r ? (t.f = t.inline = v("(" === r ? ")" : "]", 0),
                        n.highlightFormatting && (t.formatting = "link-string"),
                        t.linkHref = !0,
                        h(t)) : "error"
                    }
                    function v(e) {
                        return function(t, r) {
                            var i = t.next();
                            if (i === e) {
                                r.f = r.inline = p,
                                n.highlightFormatting && (r.formatting = "link-string");
                                var o = h(r);
                                return r.linkHref = !1,
                                o
                            }
                            return t.match(P[e]),
                            r.linkHref = !0,
                            h(r)
                        }
                    }
                    function y(e, t) {
                        return e.match(/^([^\]\\]|\\.)*\]:/, !1) ? (t.f = x,
                        e.next(),
                        n.highlightFormatting && (t.formatting = "link"),
                        t.linkText = !0,
                        h(t)) : i(e, t, p)
                    }
                    function x(e, t) {
                        if (e.match(/^\]:/, !0)) {
                            t.f = t.inline = b,
                            n.highlightFormatting && (t.formatting = "link");
                            var r = h(t);
                            return t.linkText = !1,
                            r
                        }
                        return e.match(/^([^\]\\]|\\.)+/, !0),
                        S.linkText
                    }
                    function b(e, t) {
                        return e.eatSpace() ? null : (e.match(/^[^\s]+/, !0),
                        void 0 === e.peek() ? t.linkTitle = !0 : e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/, !0),
                        t.f = t.inline = p,
                        S.linkHref + " url")
                    }
                    var w = e.getMode(t, "text/html")
                      , k = "null" == w.name;
                    void 0 === n.highlightFormatting && (n.highlightFormatting = !1),
                    void 0 === n.maxBlockquoteDepth && (n.maxBlockquoteDepth = 0),
                    void 0 === n.underscoresBreakWords && (n.underscoresBreakWords = !0),
                    void 0 === n.taskLists && (n.taskLists = !1),
                    void 0 === n.strikethrough && (n.strikethrough = !1),
                    void 0 === n.tokenTypeOverrides && (n.tokenTypeOverrides = {});
                    var S = {
                        header: "header",
                        code: "comment",
                        quote: "quote",
                        list1: "variable-2",
                        list2: "variable-3",
                        list3: "keyword",
                        hr: "hr",
                        image: "tag",
                        formatting: "formatting",
                        linkInline: "link",
                        linkEmail: "link",
                        linkText: "link",
                        linkHref: "string",
                        em: "em",
                        strong: "strong",
                        strikethrough: "strikethrough"
                    };
                    for (var C in S)
                        S.hasOwnProperty(C) && n.tokenTypeOverrides[C] && (S[C] = n.tokenTypeOverrides[C]);
                    var L = /^([*\-_])(?:\s*\1){2,}\s*$/
                      , T = /^[*\-+]\s+/
                      , M = /^[0-9]+([.)])\s+/
                      , N = /^\[(x| )\](?=\s)/
                      , A = n.allowAtxHeaderWithoutSpace ? /^(#+)/ : /^(#+)(?: |$)/
                      , E = /^ *(?:\={1,}|-{1,})\s*$/
                      , O = /^[^#!\[\]*_\\<>` "'(~]+/
                      , I = new RegExp("^(" + (n.fencedCodeBlocks === !0 ? "~~~+|```+" : n.fencedCodeBlocks) + ")[ \\t]*([\\w+#-]*)")
                      , P = {
                        ")": /^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,
                        "]": /^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\\]]|\\.)*\])*?(?=\])/
                    }
                      , R = {
                        startState: function() {
                            return {
                                f: s,
                                prevLine: null,
                                thisLine: null,
                                block: s,
                                htmlState: null,
                                indentation: 0,
                                inline: p,
                                text: d,
                                formatting: !1,
                                linkText: !1,
                                linkHref: !1,
                                linkTitle: !1,
                                code: 0,
                                em: !1,
                                strong: !1,
                                header: 0,
                                hr: !1,
                                taskList: !1,
                                list: !1,
                                listStack: [],
                                quote: 0,
                                trailingSpace: 0,
                                trailingSpaceNewLine: !1,
                                strikethrough: !1,
                                fencedChars: null
                            }
                        },
                        copyState: function(t) {
                            return {
                                f: t.f,
                                prevLine: t.prevLine,
                                thisLine: t.thisLine,
                                block: t.block,
                                htmlState: t.htmlState && e.copyState(w, t.htmlState),
                                indentation: t.indentation,
                                localMode: t.localMode,
                                localState: t.localMode ? e.copyState(t.localMode, t.localState) : null,
                                inline: t.inline,
                                text: t.text,
                                formatting: !1,
                                linkTitle: t.linkTitle,
                                code: t.code,
                                em: t.em,
                                strong: t.strong,
                                strikethrough: t.strikethrough,
                                header: t.header,
                                hr: t.hr,
                                taskList: t.taskList,
                                list: t.list,
                                listStack: t.listStack.slice(0),
                                quote: t.quote,
                                indentedCode: t.indentedCode,
                                trailingSpace: t.trailingSpace,
                                trailingSpaceNewLine: t.trailingSpaceNewLine,
                                md_inside: t.md_inside,
                                fencedChars: t.fencedChars
                            }
                        },
                        token: function(e, t) {
                            if (t.formatting = !1,
                            e != t.thisLine) {
                                var n = t.header || t.hr;
                                if (t.header = 0,
                                t.hr = !1,
                                e.match(/^\s*$/, !0) || n) {
                                    if (l(t),
                                    !n)
                                        return null;
                                    t.prevLine = null
                                }
                                t.prevLine = t.thisLine,
                                t.thisLine = e,
                                t.taskList = !1,
                                t.trailingSpace = 0,
                                t.trailingSpaceNewLine = !1,
                                t.f = t.block;
                                var r = e.match(/^\s*/, !0)[0].replace(/\t/g, "    ").length;
                                if (t.indentationDiff = Math.min(r - t.indentation, 4),
                                t.indentation = t.indentation + t.indentationDiff,
                                r > 0)
                                    return null
                            }
                            return t.f(e, t)
                        },
                        innerMode: function(e) {
                            return e.block == c ? {
                                state: e.htmlState,
                                mode: w
                            } : e.localState ? {
                                state: e.localState,
                                mode: e.localMode
                            } : {
                                state: e,
                                mode: R
                            }
                        },
                        blankLine: l,
                        getType: h,
                        fold: "markdown"
                    };
                    return R
                }, "xml"),
                e.defineMIME("text/x-markdown", "markdown")
            })
        }
        , {
            "../../lib/codemirror": 10,
            "../meta": 13,
            "../xml/xml": 14
        }],
        13: [function(t, n, r) {
            !function(i) {
                "object" == typeof r && "object" == typeof n ? i(t("../lib/codemirror")) : "function" == typeof e && e.amd ? e(["../lib/codemirror"], i) : i(CodeMirror)
            }(function(e) {
                "use strict";
                e.modeInfo = [{
                    name: "APL",
                    mime: "text/apl",
                    mode: "apl",
                    ext: ["dyalog", "apl"]
                }, {
                    name: "PGP",
                    mimes: ["application/pgp", "application/pgp-keys", "application/pgp-signature"],
                    mode: "asciiarmor",
                    ext: ["pgp"]
                }, {
                    name: "ASN.1",
                    mime: "text/x-ttcn-asn",
                    mode: "asn.1",
                    ext: ["asn", "asn1"]
                }, {
                    name: "Asterisk",
                    mime: "text/x-asterisk",
                    mode: "asterisk",
                    file: /^extensions\.conf$/i
                }, {
                    name: "Brainfuck",
                    mime: "text/x-brainfuck",
                    mode: "brainfuck",
                    ext: ["b", "bf"]
                }, {
                    name: "C",
                    mime: "text/x-csrc",
                    mode: "clike",
                    ext: ["c", "h"]
                }, {
                    name: "C++",
                    mime: "text/x-c++src",
                    mode: "clike",
                    ext: ["cpp", "c++", "cc", "cxx", "hpp", "h++", "hh", "hxx"],
                    alias: ["cpp"]
                }, {
                    name: "Cobol",
                    mime: "text/x-cobol",
                    mode: "cobol",
                    ext: ["cob", "cpy"]
                }, {
                    name: "C#",
                    mime: "text/x-csharp",
                    mode: "clike",
                    ext: ["cs"],
                    alias: ["csharp"]
                }, {
                    name: "Clojure",
                    mime: "text/x-clojure",
                    mode: "clojure",
                    ext: ["clj", "cljc", "cljx"]
                }, {
                    name: "ClojureScript",
                    mime: "text/x-clojurescript",
                    mode: "clojure",
                    ext: ["cljs"]
                }, {
                    name: "Closure Stylesheets (GSS)",
                    mime: "text/x-gss",
                    mode: "css",
                    ext: ["gss"]
                }, {
                    name: "CMake",
                    mime: "text/x-cmake",
                    mode: "cmake",
                    ext: ["cmake", "cmake.in"],
                    file: /^CMakeLists.txt$/
                }, {
                    name: "CoffeeScript",
                    mime: "text/x-coffeescript",
                    mode: "coffeescript",
                    ext: ["coffee"],
                    alias: ["coffee", "coffee-script"]
                }, {
                    name: "Common Lisp",
                    mime: "text/x-common-lisp",
                    mode: "commonlisp",
                    ext: ["cl", "lisp", "el"],
                    alias: ["lisp"]
                }, {
                    name: "Cypher",
                    mime: "application/x-cypher-query",
                    mode: "cypher",
                    ext: ["cyp", "cypher"]
                }, {
                    name: "Cython",
                    mime: "text/x-cython",
                    mode: "python",
                    ext: ["pyx", "pxd", "pxi"]
                }, {
                    name: "Crystal",
                    mime: "text/x-crystal",
                    mode: "crystal",
                    ext: ["cr"]
                }, {
                    name: "CSS",
                    mime: "text/css",
                    mode: "css",
                    ext: ["css"]
                }, {
                    name: "CQL",
                    mime: "text/x-cassandra",
                    mode: "sql",
                    ext: ["cql"]
                }, {
                    name: "D",
                    mime: "text/x-d",
                    mode: "d",
                    ext: ["d"]
                }, {
                    name: "Dart",
                    mimes: ["application/dart", "text/x-dart"],
                    mode: "dart",
                    ext: ["dart"]
                }, {
                    name: "diff",
                    mime: "text/x-diff",
                    mode: "diff",
                    ext: ["diff", "patch"]
                }, {
                    name: "Django",
                    mime: "text/x-django",
                    mode: "django"
                }, {
                    name: "Dockerfile",
                    mime: "text/x-dockerfile",
                    mode: "dockerfile",
                    file: /^Dockerfile$/
                }, {
                    name: "DTD",
                    mime: "application/xml-dtd",
                    mode: "dtd",
                    ext: ["dtd"]
                }, {
                    name: "Dylan",
                    mime: "text/x-dylan",
                    mode: "dylan",
                    ext: ["dylan", "dyl", "intr"]
                }, {
                    name: "EBNF",
                    mime: "text/x-ebnf",
                    mode: "ebnf"
                }, {
                    name: "ECL",
                    mime: "text/x-ecl",
                    mode: "ecl",
                    ext: ["ecl"]
                }, {
                    name: "edn",
                    mime: "application/edn",
                    mode: "clojure",
                    ext: ["edn"]
                }, {
                    name: "Eiffel",
                    mime: "text/x-eiffel",
                    mode: "eiffel",
                    ext: ["e"]
                }, {
                    name: "Elm",
                    mime: "text/x-elm",
                    mode: "elm",
                    ext: ["elm"]
                }, {
                    name: "Embedded Javascript",
                    mime: "application/x-ejs",
                    mode: "htmlembedded",
                    ext: ["ejs"]
                }, {
                    name: "Embedded Ruby",
                    mime: "application/x-erb",
                    mode: "htmlembedded",
                    ext: ["erb"]
                }, {
                    name: "Erlang",
                    mime: "text/x-erlang",
                    mode: "erlang",
                    ext: ["erl"]
                }, {
                    name: "Factor",
                    mime: "text/x-factor",
                    mode: "factor",
                    ext: ["factor"]
                }, {
                    name: "FCL",
                    mime: "text/x-fcl",
                    mode: "fcl"
                }, {
                    name: "Forth",
                    mime: "text/x-forth",
                    mode: "forth",
                    ext: ["forth", "fth", "4th"]
                }, {
                    name: "Fortran",
                    mime: "text/x-fortran",
                    mode: "fortran",
                    ext: ["f", "for", "f77", "f90"]
                }, {
                    name: "F#",
                    mime: "text/x-fsharp",
                    mode: "mllike",
                    ext: ["fs"],
                    alias: ["fsharp"]
                }, {
                    name: "Gas",
                    mime: "text/x-gas",
                    mode: "gas",
                    ext: ["s"]
                }, {
                    name: "Gherkin",
                    mime: "text/x-feature",
                    mode: "gherkin",
                    ext: ["feature"]
                }, {
                    name: "GitHub Flavored Markdown",
                    mime: "text/x-gfm",
                    mode: "gfm",
                    file: /^(readme|contributing|history).md$/i
                }, {
                    name: "Go",
                    mime: "text/x-go",
                    mode: "go",
                    ext: ["go"]
                }, {
                    name: "Groovy",
                    mime: "text/x-groovy",
                    mode: "groovy",
                    ext: ["groovy", "gradle"]
                }, {
                    name: "HAML",
                    mime: "text/x-haml",
                    mode: "haml",
                    ext: ["haml"]
                }, {
                    name: "Haskell",
                    mime: "text/x-haskell",
                    mode: "haskell",
                    ext: ["hs"]
                }, {
                    name: "Haskell (Literate)",
                    mime: "text/x-literate-haskell",
                    mode: "haskell-literate",
                    ext: ["lhs"]
                }, {
                    name: "Haxe",
                    mime: "text/x-haxe",
                    mode: "haxe",
                    ext: ["hx"]
                }, {
                    name: "HXML",
                    mime: "text/x-hxml",
                    mode: "haxe",
                    ext: ["hxml"]
                }, {
                    name: "ASP.NET",
                    mime: "application/x-aspx",
                    mode: "htmlembedded",
                    ext: ["aspx"],
                    alias: ["asp", "aspx"]
                }, {
                    name: "HTML",
                    mime: "text/html",
                    mode: "htmlmixed",
                    ext: ["html", "htm"],
                    alias: ["xhtml"]
                }, {
                    name: "HTTP",
                    mime: "message/http",
                    mode: "http"
                }, {
                    name: "IDL",
                    mime: "text/x-idl",
                    mode: "idl",
                    ext: ["pro"]
                }, {
                    name: "Jade",
                    mime: "text/x-jade",
                    mode: "jade",
                    ext: ["jade"]
                }, {
                    name: "Java",
                    mime: "text/x-java",
                    mode: "clike",
                    ext: ["java"]
                }, {
                    name: "Java Server Pages",
                    mime: "application/x-jsp",
                    mode: "htmlembedded",
                    ext: ["jsp"],
                    alias: ["jsp"]
                }, {
                    name: "JavaScript",
                    mimes: ["text/javascript", "text/ecmascript", "application/javascript", "application/x-javascript", "application/ecmascript"],
                    mode: "javascript",
                    ext: ["js"],
                    alias: ["ecmascript", "js", "node"]
                }, {
                    name: "JSON",
                    mimes: ["application/json", "application/x-json"],
                    mode: "javascript",
                    ext: ["json", "map"],
                    alias: ["json5"]
                }, {
                    name: "JSON-LD",
                    mime: "application/ld+json",
                    mode: "javascript",
                    ext: ["jsonld"],
                    alias: ["jsonld"]
                }, {
                    name: "JSX",
                    mime: "text/jsx",
                    mode: "jsx",
                    ext: ["jsx"]
                }, {
                    name: "Jinja2",
                    mime: "null",
                    mode: "jinja2"
                }, {
                    name: "Julia",
                    mime: "text/x-julia",
                    mode: "julia",
                    ext: ["jl"]
                }, {
                    name: "Kotlin",
                    mime: "text/x-kotlin",
                    mode: "clike",
                    ext: ["kt"]
                }, {
                    name: "LESS",
                    mime: "text/x-less",
                    mode: "css",
                    ext: ["less"]
                }, {
                    name: "LiveScript",
                    mime: "text/x-livescript",
                    mode: "livescript",
                    ext: ["ls"],
                    alias: ["ls"]
                }, {
                    name: "Lua",
                    mime: "text/x-lua",
                    mode: "lua",
                    ext: ["lua"]
                }, {
                    name: "Markdown",
                    mime: "text/x-markdown",
                    mode: "markdown",
                    ext: ["markdown", "md", "mkd"]
                }, {
                    name: "mIRC",
                    mime: "text/mirc",
                    mode: "mirc"
                }, {
                    name: "MariaDB SQL",
                    mime: "text/x-mariadb",
                    mode: "sql"
                }, {
                    name: "Mathematica",
                    mime: "text/x-mathematica",
                    mode: "mathematica",
                    ext: ["m", "nb"]
                }, {
                    name: "Modelica",
                    mime: "text/x-modelica",
                    mode: "modelica",
                    ext: ["mo"]
                }, {
                    name: "MUMPS",
                    mime: "text/x-mumps",
                    mode: "mumps",
                    ext: ["mps"]
                }, {
                    name: "MS SQL",
                    mime: "text/x-mssql",
                    mode: "sql"
                }, {
                    name: "mbox",
                    mime: "application/mbox",
                    mode: "mbox",
                    ext: ["mbox"]
                }, {
                    name: "MySQL",
                    mime: "text/x-mysql",
                    mode: "sql"
                }, {
                    name: "Nginx",
                    mime: "text/x-nginx-conf",
                    mode: "nginx",
                    file: /nginx.*\.conf$/i
                }, {
                    name: "NSIS",
                    mime: "text/x-nsis",
                    mode: "nsis",
                    ext: ["nsh", "nsi"]
                }, {
                    name: "NTriples",
                    mime: "text/n-triples",
                    mode: "ntriples",
                    ext: ["nt"]
                }, {
                    name: "Objective C",
                    mime: "text/x-objectivec",
                    mode: "clike",
                    ext: ["m", "mm"],
                    alias: ["objective-c", "objc"]
                }, {
                    name: "OCaml",
                    mime: "text/x-ocaml",
                    mode: "mllike",
                    ext: ["ml", "mli", "mll", "mly"]
                }, {
                    name: "Octave",
                    mime: "text/x-octave",
                    mode: "octave",
                    ext: ["m"]
                }, {
                    name: "Oz",
                    mime: "text/x-oz",
                    mode: "oz",
                    ext: ["oz"]
                }, {
                    name: "Pascal",
                    mime: "text/x-pascal",
                    mode: "pascal",
                    ext: ["p", "pas"]
                }, {
                    name: "PEG.js",
                    mime: "null",
                    mode: "pegjs",
                    ext: ["jsonld"]
                }, {
                    name: "Perl",
                    mime: "text/x-perl",
                    mode: "perl",
                    ext: ["pl", "pm"]
                }, {
                    name: "PHP",
                    mime: "application/x-httpd-php",
                    mode: "php",
                    ext: ["php", "php3", "php4", "php5", "phtml"]
                }, {
                    name: "Pig",
                    mime: "text/x-pig",
                    mode: "pig",
                    ext: ["pig"]
                }, {
                    name: "Plain Text",
                    mime: "text/plain",
                    mode: "null",
                    ext: ["txt", "text", "conf", "def", "list", "log"]
                }, {
                    name: "PLSQL",
                    mime: "text/x-plsql",
                    mode: "sql",
                    ext: ["pls"]
                }, {
                    name: "PowerShell",
                    mime: "application/x-powershell",
                    mode: "powershell",
                    ext: ["ps1", "psd1", "psm1"]
                }, {
                    name: "Properties files",
                    mime: "text/x-properties",
                    mode: "properties",
                    ext: ["properties", "ini", "in"],
                    alias: ["ini", "properties"]
                }, {
                    name: "ProtoBuf",
                    mime: "text/x-protobuf",
                    mode: "protobuf",
                    ext: ["proto"]
                }, {
                    name: "Python",
                    mime: "text/x-python",
                    mode: "python",
                    ext: ["BUILD", "bzl", "py", "pyw"],
                    file: /^(BUCK|BUILD)$/
                }, {
                    name: "Puppet",
                    mime: "text/x-puppet",
                    mode: "puppet",
                    ext: ["pp"]
                }, {
                    name: "Q",
                    mime: "text/x-q",
                    mode: "q",
                    ext: ["q"]
                }, {
                    name: "R",
                    mime: "text/x-rsrc",
                    mode: "r",
                    ext: ["r"],
                    alias: ["rscript"]
                }, {
                    name: "reStructuredText",
                    mime: "text/x-rst",
                    mode: "rst",
                    ext: ["rst"],
                    alias: ["rst"]
                }, {
                    name: "RPM Changes",
                    mime: "text/x-rpm-changes",
                    mode: "rpm"
                }, {
                    name: "RPM Spec",
                    mime: "text/x-rpm-spec",
                    mode: "rpm",
                    ext: ["spec"]
                }, {
                    name: "Ruby",
                    mime: "text/x-ruby",
                    mode: "ruby",
                    ext: ["rb"],
                    alias: ["jruby", "macruby", "rake", "rb", "rbx"]
                }, {
                    name: "Rust",
                    mime: "text/x-rustsrc",
                    mode: "rust",
                    ext: ["rs"]
                }, {
                    name: "SAS",
                    mime: "text/x-sas",
                    mode: "sas",
                    ext: ["sas"]
                }, {
                    name: "Sass",
                    mime: "text/x-sass",
                    mode: "sass",
                    ext: ["sass"]
                }, {
                    name: "Scala",
                    mime: "text/x-scala",
                    mode: "clike",
                    ext: ["scala"]
                }, {
                    name: "Scheme",
                    mime: "text/x-scheme",
                    mode: "scheme",
                    ext: ["scm", "ss"]
                }, {
                    name: "SCSS",
                    mime: "text/x-scss",
                    mode: "css",
                    ext: ["scss"]
                }, {
                    name: "Shell",
                    mime: "text/x-sh",
                    mode: "shell",
                    ext: ["sh", "ksh", "bash"],
                    alias: ["bash", "sh", "zsh"],
                    file: /^PKGBUILD$/
                }, {
                    name: "Sieve",
                    mime: "application/sieve",
                    mode: "sieve",
                    ext: ["siv", "sieve"]
                }, {
                    name: "Slim",
                    mimes: ["text/x-slim", "application/x-slim"],
                    mode: "slim",
                    ext: ["slim"]
                }, {
                    name: "Smalltalk",
                    mime: "text/x-stsrc",
                    mode: "smalltalk",
                    ext: ["st"]
                }, {
                    name: "Smarty",
                    mime: "text/x-smarty",
                    mode: "smarty",
                    ext: ["tpl"]
                }, {
                    name: "Solr",
                    mime: "text/x-solr",
                    mode: "solr"
                }, {
                    name: "Soy",
                    mime: "text/x-soy",
                    mode: "soy",
                    ext: ["soy"],
                    alias: ["closure template"]
                }, {
                    name: "SPARQL",
                    mime: "application/sparql-query",
                    mode: "sparql",
                    ext: ["rq", "sparql"],
                    alias: ["sparul"]
                }, {
                    name: "Spreadsheet",
                    mime: "text/x-spreadsheet",
                    mode: "spreadsheet",
                    alias: ["excel", "formula"]
                }, {
                    name: "SQL",
                    mime: "text/x-sql",
                    mode: "sql",
                    ext: ["sql"]
                }, {
                    name: "Squirrel",
                    mime: "text/x-squirrel",
                    mode: "clike",
                    ext: ["nut"]
                }, {
                    name: "Swift",
                    mime: "text/x-swift",
                    mode: "swift",
                    ext: ["swift"]
                }, {
                    name: "sTeX",
                    mime: "text/x-stex",
                    mode: "stex"
                }, {
                    name: "LaTeX",
                    mime: "text/x-latex",
                    mode: "stex",
                    ext: ["text", "ltx"],
                    alias: ["tex"]
                }, {
                    name: "SystemVerilog",
                    mime: "text/x-systemverilog",
                    mode: "verilog",
                    ext: ["v"]
                }, {
                    name: "Tcl",
                    mime: "text/x-tcl",
                    mode: "tcl",
                    ext: ["tcl"]
                }, {
                    name: "Textile",
                    mime: "text/x-textile",
                    mode: "textile",
                    ext: ["textile"]
                }, {
                    name: "TiddlyWiki ",
                    mime: "text/x-tiddlywiki",
                    mode: "tiddlywiki"
                }, {
                    name: "Tiki wiki",
                    mime: "text/tiki",
                    mode: "tiki"
                }, {
                    name: "TOML",
                    mime: "text/x-toml",
                    mode: "toml",
                    ext: ["toml"]
                }, {
                    name: "Tornado",
                    mime: "text/x-tornado",
                    mode: "tornado"
                }, {
                    name: "troff",
                    mime: "text/troff",
                    mode: "troff",
                    ext: ["1", "2", "3", "4", "5", "6", "7", "8", "9"]
                }, {
                    name: "TTCN",
                    mime: "text/x-ttcn",
                    mode: "ttcn",
                    ext: ["ttcn", "ttcn3", "ttcnpp"]
                }, {
                    name: "TTCN_CFG",
                    mime: "text/x-ttcn-cfg",
                    mode: "ttcn-cfg",
                    ext: ["cfg"]
                }, {
                    name: "Turtle",
                    mime: "text/turtle",
                    mode: "turtle",
                    ext: ["ttl"]
                }, {
                    name: "TypeScript",
                    mime: "application/typescript",
                    mode: "javascript",
                    ext: ["ts"],
                    alias: ["ts"]
                }, {
                    name: "Twig",
                    mime: "text/x-twig",
                    mode: "twig"
                }, {
                    name: "Web IDL",
                    mime: "text/x-webidl",
                    mode: "webidl",
                    ext: ["webidl"]
                }, {
                    name: "VB.NET",
                    mime: "text/x-vb",
                    mode: "vb",
                    ext: ["vb"]
                }, {
                    name: "VBScript",
                    mime: "text/vbscript",
                    mode: "vbscript",
                    ext: ["vbs"]
                }, {
                    name: "Velocity",
                    mime: "text/velocity",
                    mode: "velocity",
                    ext: ["vtl"]
                }, {
                    name: "Verilog",
                    mime: "text/x-verilog",
                    mode: "verilog",
                    ext: ["v"]
                }, {
                    name: "VHDL",
                    mime: "text/x-vhdl",
                    mode: "vhdl",
                    ext: ["vhd", "vhdl"]
                }, {
                    name: "XML",
                    mimes: ["application/xml", "text/xml"],
                    mode: "xml",
                    ext: ["xml", "xsl", "xsd"],
                    alias: ["rss", "wsdl", "xsd"]
                }, {
                    name: "XQuery",
                    mime: "application/xquery",
                    mode: "xquery",
                    ext: ["xy", "xquery"]
                }, {
                    name: "Yacas",
                    mime: "text/x-yacas",
                    mode: "yacas",
                    ext: ["ys"]
                }, {
                    name: "YAML",
                    mime: "text/x-yaml",
                    mode: "yaml",
                    ext: ["yaml", "yml"],
                    alias: ["yml"]
                }, {
                    name: "Z80",
                    mime: "text/x-z80",
                    mode: "z80",
                    ext: ["z80"]
                }, {
                    name: "mscgen",
                    mime: "text/x-mscgen",
                    mode: "mscgen",
                    ext: ["mscgen", "mscin", "msc"]
                }, {
                    name: "xu",
                    mime: "text/x-xu",
                    mode: "mscgen",
                    ext: ["xu"]
                }, {
                    name: "msgenny",
                    mime: "text/x-msgenny",
                    mode: "mscgen",
                    ext: ["msgenny"]
                }];
                for (var t = 0; t < e.modeInfo.length; t++) {
                    var n = e.modeInfo[t];
                    n.mimes && (n.mime = n.mimes[0])
                }
                e.findModeByMIME = function(t) {
                    t = t.toLowerCase();
                    for (var n = 0; n < e.modeInfo.length; n++) {
                        var r = e.modeInfo[n];
                        if (r.mime == t)
                            return r;
                        if (r.mimes)
                            for (var i = 0; i < r.mimes.length; i++)
                                if (r.mimes[i] == t)
                                    return r
                    }
                }
                ,
                e.findModeByExtension = function(t) {
                    for (var n = 0; n < e.modeInfo.length; n++) {
                        var r = e.modeInfo[n];
                        if (r.ext)
                            for (var i = 0; i < r.ext.length; i++)
                                if (r.ext[i] == t)
                                    return r
                    }
                }
                ,
                e.findModeByFileName = function(t) {
                    for (var n = 0; n < e.modeInfo.length; n++) {
                        var r = e.modeInfo[n];
                        if (r.file && r.file.test(t))
                            return r
                    }
                    var i = t.lastIndexOf(".")
                      , o = i > -1 && t.substring(i + 1, t.length);
                    return o ? e.findModeByExtension(o) : void 0
                }
                ,
                e.findModeByName = function(t) {
                    t = t.toLowerCase();
                    for (var n = 0; n < e.modeInfo.length; n++) {
                        var r = e.modeInfo[n];
                        if (r.name.toLowerCase() == t)
                            return r;
                        if (r.alias)
                            for (var i = 0; i < r.alias.length; i++)
                                if (r.alias[i].toLowerCase() == t)
                                    return r
                    }
                }
            })
        }
        , {
            "../lib/codemirror": 10
        }],
        14: [function(t, n, r) {
            !function(i) {
                "object" == typeof r && "object" == typeof n ? i(t("../../lib/codemirror")) : "function" == typeof e && e.amd ? e(["../../lib/codemirror"], i) : i(CodeMirror)
            }(function(e) {
                "use strict";
                var t = {
                    autoSelfClosers: {
                        area: !0,
                        base: !0,
                        br: !0,
                        col: !0,
                        command: !0,
                        embed: !0,
                        frame: !0,
                        hr: !0,
                        img: !0,
                        input: !0,
                        keygen: !0,
                        link: !0,
                        meta: !0,
                        param: !0,
                        source: !0,
                        track: !0,
                        wbr: !0,
                        menuitem: !0
                    },
                    implicitlyClosed: {
                        dd: !0,
                        li: !0,
                        optgroup: !0,
                        option: !0,
                        p: !0,
                        rp: !0,
                        rt: !0,
                        tbody: !0,
                        td: !0,
                        tfoot: !0,
                        th: !0,
                        tr: !0
                    },
                    contextGrabbers: {
                        dd: {
                            dd: !0,
                            dt: !0
                        },
                        dt: {
                            dd: !0,
                            dt: !0
                        },
                        li: {
                            li: !0
                        },
                        option: {
                            option: !0,
                            optgroup: !0
                        },
                        optgroup: {
                            optgroup: !0
                        },
                        p: {
                            address: !0,
                            article: !0,
                            aside: !0,
                            blockquote: !0,
                            dir: !0,
                            div: !0,
                            dl: !0,
                            fieldset: !0,
                            footer: !0,
                            form: !0,
                            h1: !0,
                            h2: !0,
                            h3: !0,
                            h4: !0,
                            h5: !0,
                            h6: !0,
                            header: !0,
                            hgroup: !0,
                            hr: !0,
                            menu: !0,
                            nav: !0,
                            ol: !0,
                            p: !0,
                            pre: !0,
                            section: !0,
                            table: !0,
                            ul: !0
                        },
                        rp: {
                            rp: !0,
                            rt: !0
                        },
                        rt: {
                            rp: !0,
                            rt: !0
                        },
                        tbody: {
                            tbody: !0,
                            tfoot: !0
                        },
                        td: {
                            td: !0,
                            th: !0
                        },
                        tfoot: {
                            tbody: !0
                        },
                        th: {
                            td: !0,
                            th: !0
                        },
                        thead: {
                            tbody: !0,
                            tfoot: !0
                        },
                        tr: {
                            tr: !0
                        }
                    },
                    doNotIndent: {
                        pre: !0
                    },
                    allowUnquoted: !0,
                    allowMissing: !0,
                    caseFold: !0
                }
                  , n = {
                    autoSelfClosers: {},
                    implicitlyClosed: {},
                    contextGrabbers: {},
                    doNotIndent: {},
                    allowUnquoted: !1,
                    allowMissing: !1,
                    caseFold: !1
                };
                e.defineMode("xml", function(r, i) {
                    function o(e, t) {
                        function n(n) {
                            return t.tokenize = n,
                            n(e, t)
                        }
                        var r = e.next();
                        if ("<" == r)
                            return e.eat("!") ? e.eat("[") ? e.match("CDATA[") ? n(s("atom", "]]>")) : null : e.match("--") ? n(s("comment", "-->")) : e.match("DOCTYPE", !0, !0) ? (e.eatWhile(/[\w\._\-]/),
                            n(c(1))) : null : e.eat("?") ? (e.eatWhile(/[\w\._\-]/),
                            t.tokenize = s("meta", "?>"),
                            "meta") : (T = e.eat("/") ? "closeTag" : "openTag",
                            t.tokenize = a,
                            "tag bracket");
                        if ("&" == r) {
                            var i;
                            return i = e.eat("#") ? e.eat("x") ? e.eatWhile(/[a-fA-F\d]/) && e.eat(";") : e.eatWhile(/[\d]/) && e.eat(";") : e.eatWhile(/[\w\.\-:]/) && e.eat(";"),
                            i ? "atom" : "error"
                        }
                        return e.eatWhile(/[^&<]/),
                        null
                    }
                    function a(e, t) {
                        var n = e.next();
                        if (">" == n || "/" == n && e.eat(">"))
                            return t.tokenize = o,
                            T = ">" == n ? "endTag" : "selfcloseTag",
                            "tag bracket";
                        if ("=" == n)
                            return T = "equals",
                            null;
                        if ("<" == n) {
                            t.tokenize = o,
                            t.state = d,
                            t.tagName = t.tagStart = null;
                            var r = t.tokenize(e, t);
                            return r ? r + " tag error" : "tag error"
                        }
                        return /[\'\"]/.test(n) ? (t.tokenize = l(n),
                        t.stringStartCol = e.column(),
                        t.tokenize(e, t)) : (e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),
                        "word")
                    }
                    function l(e) {
                        var t = function(t, n) {
                            for (; !t.eol(); )
                                if (t.next() == e) {
                                    n.tokenize = a;
                                    break
                                }
                            return "string"
                        };
                        return t.isInAttribute = !0,
                        t
                    }
                    function s(e, t) {
                        return function(n, r) {
                            for (; !n.eol(); ) {
                                if (n.match(t)) {
                                    r.tokenize = o;
                                    break
                                }
                                n.next()
                            }
                            return e
                        }
                    }
                    function c(e) {
                        return function(t, n) {
                            for (var r; null != (r = t.next()); ) {
                                if ("<" == r)
                                    return n.tokenize = c(e + 1),
                                    n.tokenize(t, n);
                                if (">" == r) {
                                    if (1 == e) {
                                        n.tokenize = o;
                                        break
                                    }
                                    return n.tokenize = c(e - 1),
                                    n.tokenize(t, n)
                                }
                            }
                            return "meta"
                        }
                    }
                    function u(e, t, n) {
                        this.prev = e.context,
                        this.tagName = t,
                        this.indent = e.indented,
                        this.startOfLine = n,
                        (S.doNotIndent.hasOwnProperty(t) || e.context && e.context.noIndent) && (this.noIndent = !0)
                    }
                    function f(e) {
                        e.context && (e.context = e.context.prev)
                    }
                    function h(e, t) {
                        for (var n; ; ) {
                            if (!e.context)
                                return;
                            if (n = e.context.tagName,
                            !S.contextGrabbers.hasOwnProperty(n) || !S.contextGrabbers[n].hasOwnProperty(t))
                                return;
                            f(e)
                        }
                    }
                    function d(e, t, n) {
                        return "openTag" == e ? (n.tagStart = t.column(),
                        p) : "closeTag" == e ? m : d
                    }
                    function p(e, t, n) {
                        return "word" == e ? (n.tagName = t.current(),
                        M = "tag",
                        y) : (M = "error",
                        p)
                    }
                    function m(e, t, n) {
                        if ("word" == e) {
                            var r = t.current();
                            return n.context && n.context.tagName != r && S.implicitlyClosed.hasOwnProperty(n.context.tagName) && f(n),
                            n.context && n.context.tagName == r || S.matchClosing === !1 ? (M = "tag",
                            g) : (M = "tag error",
                            v)
                        }
                        return M = "error",
                        v
                    }
                    function g(e, t, n) {
                        return "endTag" != e ? (M = "error",
                        g) : (f(n),
                        d)
                    }
                    function v(e, t, n) {
                        return M = "error",
                        g(e, t, n)
                    }
                    function y(e, t, n) {
                        if ("word" == e)
                            return M = "attribute",
                            x;
                        if ("endTag" == e || "selfcloseTag" == e) {
                            var r = n.tagName
                              , i = n.tagStart;
                            return n.tagName = n.tagStart = null,
                            "selfcloseTag" == e || S.autoSelfClosers.hasOwnProperty(r) ? h(n, r) : (h(n, r),
                            n.context = new u(n,r,i == n.indented)),
                            d
                        }
                        return M = "error",
                        y
                    }
                    function x(e, t, n) {
                        return "equals" == e ? b : (S.allowMissing || (M = "error"),
                        y(e, t, n))
                    }
                    function b(e, t, n) {
                        return "string" == e ? w : "word" == e && S.allowUnquoted ? (M = "string",
                        y) : (M = "error",
                        y(e, t, n))
                    }
                    function w(e, t, n) {
                        return "string" == e ? w : y(e, t, n)
                    }
                    var k = r.indentUnit
                      , S = {}
                      , C = i.htmlMode ? t : n;
                    for (var L in C)
                        S[L] = C[L];
                    for (var L in i)
                        S[L] = i[L];
                    var T, M;
                    return o.isInText = !0,
                    {
                        startState: function(e) {
                            var t = {
                                tokenize: o,
                                state: d,
                                indented: e || 0,
                                tagName: null,
                                tagStart: null,
                                context: null
                            };
                            return null != e && (t.baseIndent = e),
                            t
                        },
                        token: function(e, t) {
                            if (!t.tagName && e.sol() && (t.indented = e.indentation()),
                            e.eatSpace())
                                return null;
                            T = null;
                            var n = t.tokenize(e, t);
                            return (n || T) && "comment" != n && (M = null,
                            t.state = t.state(T || n, e, t),
                            M && (n = "error" == M ? n + " error" : M)),
                            n
                        },
                        indent: function(t, n, r) {
                            var i = t.context;
                            if (t.tokenize.isInAttribute)
                                return t.tagStart == t.indented ? t.stringStartCol + 1 : t.indented + k;
                            if (i && i.noIndent)
                                return e.Pass;
                            if (t.tokenize != a && t.tokenize != o)
                                return r ? r.match(/^(\s*)/)[0].length : 0;
                            if (t.tagName)
                                return S.multilineTagIndentPastTag !== !1 ? t.tagStart + t.tagName.length + 2 : t.tagStart + k * (S.multilineTagIndentFactor || 1);
                            if (S.alignCDATA && /<!\[CDATA\[/.test(n))
                                return 0;
                            var l = n && /^<(\/)?([\w_:\.-]*)/.exec(n);
                            if (l && l[1])
                                for (; i; ) {
                                    if (i.tagName == l[2]) {
                                        i = i.prev;
                                        break
                                    }
                                    if (!S.implicitlyClosed.hasOwnProperty(i.tagName))
                                        break;
                                    i = i.prev
                                }
                            else if (l)
                                for (; i; ) {
                                    var s = S.contextGrabbers[i.tagName];
                                    if (!s || !s.hasOwnProperty(l[2]))
                                        break;
                                    i = i.prev
                                }
                            for (; i && i.prev && !i.startOfLine; )
                                i = i.prev;
                            return i ? i.indent + k : t.baseIndent || 0
                        },
                        electricInput: /<\/[\s\w:]+>$/,
                        blockCommentStart: "<!--",
                        blockCommentEnd: "-->",
                        configuration: S.htmlMode ? "html" : "xml",
                        helperType: S.htmlMode ? "html" : "xml",
                        skipAttribute: function(e) {
                            e.state == b && (e.state = y)
                        }
                    }
                }),
                e.defineMIME("text/xml", "xml"),
                e.defineMIME("application/xml", "xml"),
                e.mimeModes.hasOwnProperty("text/html") || e.defineMIME("text/html", {
                    name: "xml",
                    htmlMode: !0
                })
            })
        }
        , {
            "../../lib/codemirror": 10
        }],
        15: [function(e, t, n) {
            n.read = function(e, t, n, r, i) {
                var o, a, l = 8 * i - r - 1, s = (1 << l) - 1, c = s >> 1, u = -7, f = n ? i - 1 : 0, h = n ? -1 : 1, d = e[t + f];
                for (f += h,
                o = d & (1 << -u) - 1,
                d >>= -u,
                u += l; u > 0; o = 256 * o + e[t + f],
                f += h,
                u -= 8)
                    ;
                for (a = o & (1 << -u) - 1,
                o >>= -u,
                u += r; u > 0; a = 256 * a + e[t + f],
                f += h,
                u -= 8)
                    ;
                if (0 === o)
                    o = 1 - c;
                else {
                    if (o === s)
                        return a ? NaN : (d ? -1 : 1) * (1 / 0);
                    a += Math.pow(2, r),
                    o -= c
                }
                return (d ? -1 : 1) * a * Math.pow(2, o - r)
            }
            ,
            n.write = function(e, t, n, r, i, o) {
                var a, l, s, c = 8 * o - i - 1, u = (1 << c) - 1, f = u >> 1, h = 23 === i ? Math.pow(2, -24) - Math.pow(2, -77) : 0, d = r ? 0 : o - 1, p = r ? 1 : -1, m = 0 > t || 0 === t && 0 > 1 / t ? 1 : 0;
                for (t = Math.abs(t),
                isNaN(t) || t === 1 / 0 ? (l = isNaN(t) ? 1 : 0,
                a = u) : (a = Math.floor(Math.log(t) / Math.LN2),
                t * (s = Math.pow(2, -a)) < 1 && (a--,
                s *= 2),
                t += a + f >= 1 ? h / s : h * Math.pow(2, 1 - f),
                t * s >= 2 && (a++,
                s /= 2),
                a + f >= u ? (l = 0,
                a = u) : a + f >= 1 ? (l = (t * s - 1) * Math.pow(2, i),
                a += f) : (l = t * Math.pow(2, f - 1) * Math.pow(2, i),
                a = 0)); i >= 8; e[n + d] = 255 & l,
                d += p,
                l /= 256,
                i -= 8)
                    ;
                for (a = a << i | l,
                c += i; c > 0; e[n + d] = 255 & a,
                d += p,
                a /= 256,
                c -= 8)
                    ;
                e[n + d - p] |= 128 * m
            }
        }
        , {}],
        16: [function(e, t) {
            var r = {}.toString;
            t.exports = Array.isArray || function(e) {
                return "[object Array]" == r.call(e)
            }
        }
        , {}],
        17: [function(t, n, r) {
            (function(t) {
                (function() {
                    function t(e) {
                        this.tokens = [],
                        this.tokens.links = {},
                        this.options = e || h.defaults,
                        this.rules = d.normal,
                        this.options.gfm && (this.options.tables ? this.rules = d.tables : this.rules = d.gfm)
                    }
                    function i(e, t) {
                        if (this.options = t || h.defaults,
                        this.links = e,
                        this.rules = p.normal,
                        this.renderer = this.options.renderer || new o,
                        this.renderer.options = this.options,
                        !this.links)
                            throw new Error("Tokens array requires a `links` property.");
                        this.options.gfm ? this.options.breaks ? this.rules = p.breaks : this.rules = p.gfm : this.options.pedantic && (this.rules = p.pedantic)
                    }
                    function o(e) {
                        this.options = e || {}
                    }
                    function a(e) {
                        this.tokens = [],
                        this.token = null,
                        this.options = e || h.defaults,
                        this.options.renderer = this.options.renderer || new o,
                        this.renderer = this.options.renderer,
                        this.renderer.options = this.options
                    }
                    function l(e, t) {
                        return e.replace(t ? /&/g : /&(?!#?\w+;)/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#39;")
                    }
                    function s(e) {
                        return e.replace(/&([#\w]+);/g, function(e, t) {
                            return t = t.toLowerCase(),
                            "colon" === t ? ":" : "#" === t.charAt(0) ? "x" === t.charAt(1) ? String.fromCharCode(parseInt(t.substring(2), 16)) : String.fromCharCode(+t.substring(1)) : ""
                        })
                    }
                    function c(e, t) {
                        return e = e.source,
                        t = t || "",
                        function n(r, i) {
                            return r ? (i = i.source || i,
                            i = i.replace(/(^|[^\[])\^/g, "$1"),
                            e = e.replace(r, i),
                            n) : new RegExp(e,t)
                        }
                    }
                    function u() {}
                    function f(e) {
                        for (var t, n, r = 1; r < arguments.length; r++) {
                            t = arguments[r];
                            for (n in t)
                                Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n])
                        }
                        return e
                    }
                    function h(e, n, r) {
                        if (r || "function" == typeof n) {
                            r || (r = n,
                            n = null),
                            n = f({}, h.defaults, n || {});
                            var i, o, s = n.highlight, c = 0;
                            try {
                                i = t.lex(e, n)
                            } catch (u) {
                                return r(u)
                            }
                            o = i.length;
                            var d = function(e) {
                                if (e)
                                    return n.highlight = s,
                                    r(e);
                                var t;
                                try {
                                    t = a.parse(i, n)
                                } catch (o) {
                                    e = o
                                }
                                return n.highlight = s,
                                e ? r(e) : r(null, t)
                            };
                            if (!s || s.length < 3)
                                return d();
                            if (delete n.highlight,
                            !o)
                                return d();
                            for (; c < i.length; c++)
                                !function(e) {
                                    return "code" !== e.type ? --o || d() : s(e.text, e.lang, function(t, n) {
                                        return t ? d(t) : null == n || n === e.text ? --o || d() : (e.text = n,
                                        e.escaped = !0,
                                        void (--o || d()))
                                    })
                                }(i[c])
                        } else
                            try {
                                return n && (n = f({}, h.defaults, n)),
                                a.parse(t.lex(e, n), n)
                            } catch (u) {
                                if (u.message += "\nPlease report this to https://github.com/chjj/marked.",
                                (n || h.defaults).silent)
                                    return "<p>An error occured:</p><pre>" + l(u.message + "", !0) + "</pre>";
                                throw u
                            }
                    }
                    var d = {
                        newline: /^\n+/,
                        code: /^( {4}[^\n]+\n*)+/,
                        fences: u,
                        hr: /^( *[-*_]){3,} *(?:\n+|$)/,
                        heading: /^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,
                        nptable: u,
                        lheading: /^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,
                        blockquote: /^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,
                        list: /^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,
                        html: /^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,
                        def: /^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,
                        table: u,
                        paragraph: /^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,
                        text: /^[^\n]+/
                    };
                    d.bullet = /(?:[*+-]|\d+\.)/,
                    d.item = /^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,
                    d.item = c(d.item, "gm")(/bull/g, d.bullet)(),
                    d.list = c(d.list)(/bull/g, d.bullet)("hr", "\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def", "\\n+(?=" + d.def.source + ")")(),
                    d.blockquote = c(d.blockquote)("def", d.def)(),
                    d._tag = "(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",
                    d.html = c(d.html)("comment", /<!--[\s\S]*?-->/)("closed", /<(tag)[\s\S]+?<\/\1>/)("closing", /<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g, d._tag)(),
                    d.paragraph = c(d.paragraph)("hr", d.hr)("heading", d.heading)("lheading", d.lheading)("blockquote", d.blockquote)("tag", "<" + d._tag)("def", d.def)(),
                    d.normal = f({}, d),
                    d.gfm = f({}, d.normal, {
                        fences: /^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,
                        paragraph: /^/,
                        heading: /^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/
                    }),
                    d.gfm.paragraph = c(d.paragraph)("(?!", "(?!" + d.gfm.fences.source.replace("\\1", "\\2") + "|" + d.list.source.replace("\\1", "\\3") + "|")(),
                    d.tables = f({}, d.gfm, {
                        nptable: /^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,
                        table: /^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/
                    }),
                    t.rules = d,
                    t.lex = function(e, n) {
                        var r = new t(n);
                        return r.lex(e)
                    }
                    ,
                    t.prototype.lex = function(e) {
                        return e = e.replace(/\r\n|\r/g, "\n").replace(/\t/g, "    ").replace(/\u00a0/g, " ").replace(/\u2424/g, "\n"),
                        this.token(e, !0)
                    }
                    ,
                    t.prototype.token = function(e, t, n) {
                        for (var r, i, o, a, l, s, c, u, f, e = e.replace(/^ +$/gm, ""); e; )
                            if ((o = this.rules.newline.exec(e)) && (e = e.substring(o[0].length),
                            o[0].length > 1 && this.tokens.push({
                                type: "space"
                            })),
                            o = this.rules.code.exec(e))
                                e = e.substring(o[0].length),
                                o = o[0].replace(/^ {4}/gm, ""),
                                this.tokens.push({
                                    type: "code",
                                    text: this.options.pedantic ? o : o.replace(/\n+$/, "")
                                });
                            else if (o = this.rules.fences.exec(e))
                                e = e.substring(o[0].length),
                                this.tokens.push({
                                    type: "code",
                                    lang: o[2],
                                    text: o[3] || ""
                                });
                            else if (o = this.rules.heading.exec(e))
                                e = e.substring(o[0].length),
                                this.tokens.push({
                                    type: "heading",
                                    depth: o[1].length,
                                    text: o[2]
                                });
                            else if (t && (o = this.rules.nptable.exec(e))) {
                                for (e = e.substring(o[0].length),
                                s = {
                                    type: "table",
                                    header: o[1].replace(/^ *| *\| *$/g, "").split(/ *\| */),
                                    align: o[2].replace(/^ *|\| *$/g, "").split(/ *\| */),
                                    cells: o[3].replace(/\n$/, "").split("\n")
                                },
                                u = 0; u < s.align.length; u++)
                                    /^ *-+: *$/.test(s.align[u]) ? s.align[u] = "right" : /^ *:-+: *$/.test(s.align[u]) ? s.align[u] = "center" : /^ *:-+ *$/.test(s.align[u]) ? s.align[u] = "left" : s.align[u] = null;
                                for (u = 0; u < s.cells.length; u++)
                                    s.cells[u] = s.cells[u].split(/ *\| */);
                                this.tokens.push(s)
                            } else if (o = this.rules.lheading.exec(e))
                                e = e.substring(o[0].length),
                                this.tokens.push({
                                    type: "heading",
                                    depth: "=" === o[2] ? 1 : 2,
                                    text: o[1]
                                });
                            else if (o = this.rules.hr.exec(e))
                                e = e.substring(o[0].length),
                                this.tokens.push({
                                    type: "hr"
                                });
                            else if (o = this.rules.blockquote.exec(e))
                                e = e.substring(o[0].length),
                                this.tokens.push({
                                    type: "blockquote_start"
                                }),
                                o = o[0].replace(/^ *> ?/gm, ""),
                                this.token(o, t, !0),
                                this.tokens.push({
                                    type: "blockquote_end"
                                });
                            else if (o = this.rules.list.exec(e)) {
                                for (e = e.substring(o[0].length),
                                a = o[2],
                                this.tokens.push({
                                    type: "list_start",
                                    ordered: a.length > 1
                                }),
                                o = o[0].match(this.rules.item),
                                r = !1,
                                f = o.length,
                                u = 0; f > u; u++)
                                    s = o[u],
                                    c = s.length,
                                    s = s.replace(/^ *([*+-]|\d+\.) +/, ""),
                                    ~s.indexOf("\n ") && (c -= s.length,
                                    s = this.options.pedantic ? s.replace(/^ {1,4}/gm, "") : s.replace(new RegExp("^ {1," + c + "}","gm"), "")),
                                    this.options.smartLists && u !== f - 1 && (l = d.bullet.exec(o[u + 1])[0],
                                    a === l || a.length > 1 && l.length > 1 || (e = o.slice(u + 1).join("\n") + e,
                                    u = f - 1)),
                                    i = r || /\n\n(?!\s*$)/.test(s),
                                    u !== f - 1 && (r = "\n" === s.charAt(s.length - 1),
                                    i || (i = r)),
                                    this.tokens.push({
                                        type: i ? "loose_item_start" : "list_item_start"
                                    }),
                                    this.token(s, !1, n),
                                    this.tokens.push({
                                        type: "list_item_end"
                                    });
                                this.tokens.push({
                                    type: "list_end"
                                })
                            } else if (o = this.rules.html.exec(e))
                                e = e.substring(o[0].length),
                                this.tokens.push({
                                    type: this.options.sanitize ? "paragraph" : "html",
                                    pre: !this.options.sanitizer && ("pre" === o[1] || "script" === o[1] || "style" === o[1]),
                                    text: o[0]
                                });
                            else if (!n && t && (o = this.rules.def.exec(e)))
                                e = e.substring(o[0].length),
                                this.tokens.links[o[1].toLowerCase()] = {
                                    href: o[2],
                                    title: o[3]
                                };
                            else if (t && (o = this.rules.table.exec(e))) {
                                for (e = e.substring(o[0].length),
                                s = {
                                    type: "table",
                                    header: o[1].replace(/^ *| *\| *$/g, "").split(/ *\| */),
                                    align: o[2].replace(/^ *|\| *$/g, "").split(/ *\| */),
                                    cells: o[3].replace(/(?: *\| *)?\n$/, "").split("\n")
                                },
                                u = 0; u < s.align.length; u++)
                                    /^ *-+: *$/.test(s.align[u]) ? s.align[u] = "right" : /^ *:-+: *$/.test(s.align[u]) ? s.align[u] = "center" : /^ *:-+ *$/.test(s.align[u]) ? s.align[u] = "left" : s.align[u] = null;
                                for (u = 0; u < s.cells.length; u++)
                                    s.cells[u] = s.cells[u].replace(/^ *\| *| *\| *$/g, "").split(/ *\| */);
                                this.tokens.push(s)
                            } else if (t && (o = this.rules.paragraph.exec(e)))
                                e = e.substring(o[0].length),
                                this.tokens.push({
                                    type: "paragraph",
                                    text: "\n" === o[1].charAt(o[1].length - 1) ? o[1].slice(0, -1) : o[1]
                                });
                            else if (o = this.rules.text.exec(e))
                                e = e.substring(o[0].length),
                                this.tokens.push({
                                    type: "text",
                                    text: o[0]
                                });
                            else if (e)
                                throw new Error("Infinite loop on byte: " + e.charCodeAt(0));
                        return this.tokens
                    }
                    ;
                    var p = {
                        escape: /^\\([\\`*{}\[\]()#+\-.!_>])/,
                        autolink: /^<([^ >]+(@|:\/)[^ >]+)>/,
                        url: u,
                        tag: /^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,
                        link: /^!?\[(inside)\]\(href\)/,
                        reflink: /^!?\[(inside)\]\s*\[([^\]]*)\]/,
                        nolink: /^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,
                        strong: /^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,
                        em: /^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,
                        code: /^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,
                        br: /^ {2,}\n(?!\s*$)/,
                        del: u,
                        text: /^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/
                    };
                    p._inside = /(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,
                    p._href = /\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,
                    p.link = c(p.link)("inside", p._inside)("href", p._href)(),
                    p.reflink = c(p.reflink)("inside", p._inside)(),
                    p.normal = f({}, p),
                    p.pedantic = f({}, p.normal, {
                        strong: /^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,
                        em: /^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/
                    }),
                    p.gfm = f({}, p.normal, {
                        escape: c(p.escape)("])", "~|])")(),
                        url: /^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,
                        del: /^~~(?=\S)([\s\S]*?\S)~~/,
                        text: c(p.text)("]|", "~]|")("|", "|https?://|")()
                    }),
                    p.breaks = f({}, p.gfm, {
                        br: c(p.br)("{2,}", "*")(),
                        text: c(p.gfm.text)("{2,}", "*")()
                    }),
                    i.rules = p,
                    i.output = function(e, t, n) {
                        var r = new i(t,n);
                        return r.output(e)
                    }
                    ,
                    i.prototype.output = function(e) {
                        for (var t, n, r, i, o = ""; e; )
                            if (i = this.rules.escape.exec(e))
                                e = e.substring(i[0].length),
                                o += i[1];
                            else if (i = this.rules.autolink.exec(e))
                                e = e.substring(i[0].length),
                                "@" === i[2] ? (n = ":" === i[1].charAt(6) ? this.mangle(i[1].substring(7)) : this.mangle(i[1]),
                                r = this.mangle("mailto:") + n) : (n = l(i[1]),
                                r = n),
                                o += this.renderer.link(r, null, n);
                            else if (this.inLink || !(i = this.rules.url.exec(e))) {
                                if (i = this.rules.tag.exec(e))
                                    !this.inLink && /^<a /i.test(i[0]) ? this.inLink = !0 : this.inLink && /^<\/a>/i.test(i[0]) && (this.inLink = !1),
                                    e = e.substring(i[0].length),
                                    o += this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(i[0]) : l(i[0]) : i[0];
                                else if (i = this.rules.link.exec(e))
                                    e = e.substring(i[0].length),
                                    this.inLink = !0,
                                    o += this.outputLink(i, {
                                        href: i[2],
                                        title: i[3]
                                    }),
                                    this.inLink = !1;
                                else if ((i = this.rules.reflink.exec(e)) || (i = this.rules.nolink.exec(e))) {
                                    if (e = e.substring(i[0].length),
                                    t = (i[2] || i[1]).replace(/\s+/g, " "),
                                    t = this.links[t.toLowerCase()],
                                    !t || !t.href) {
                                        o += i[0].charAt(0),
                                        e = i[0].substring(1) + e;
                                        continue
                                    }
                                    this.inLink = !0,
                                    o += this.outputLink(i, t),
                                    this.inLink = !1
                                } else if (i = this.rules.strong.exec(e))
                                    e = e.substring(i[0].length),
                                    o += this.renderer.strong(this.output(i[2] || i[1]));
                                else if (i = this.rules.em.exec(e))
                                    e = e.substring(i[0].length),
                                    o += this.renderer.em(this.output(i[2] || i[1]));
                                else if (i = this.rules.code.exec(e))
                                    e = e.substring(i[0].length),
                                    o += this.renderer.codespan(l(i[2], !0));
                                else if (i = this.rules.br.exec(e))
                                    e = e.substring(i[0].length),
                                    o += this.renderer.br();
                                else if (i = this.rules.del.exec(e))
                                    e = e.substring(i[0].length),
                                    o += this.renderer.del(this.output(i[1]));
                                else if (i = this.rules.text.exec(e))
                                    e = e.substring(i[0].length),
                                    o += this.renderer.text(l(this.smartypants(i[0])));
                                else if (e)
                                    throw new Error("Infinite loop on byte: " + e.charCodeAt(0))
                            } else
                                e = e.substring(i[0].length),
                                n = l(i[1]),
                                r = n,
                                o += this.renderer.link(r, null, n);
                        return o
                    }
                    ,
                    i.prototype.outputLink = function(e, t) {
                        var n = l(t.href)
                          , r = t.title ? l(t.title) : null;
                        return "!" !== e[0].charAt(0) ? this.renderer.link(n, r, this.output(e[1])) : this.renderer.image(n, r, l(e[1]))
                    }
                    ,
                    i.prototype.smartypants = function(e) {
                        return this.options.smartypants ? e.replace(/---/g, "\u2014").replace(/--/g, "\u2013").replace(/(^|[-\u2014\/(\[{"\s])'/g, "$1\u2018").replace(/'/g, "\u2019").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g, "$1\u201c").replace(/"/g, "\u201d").replace(/\.{3}/g, "\u2026") : e;
                    }
                    ,
                    i.prototype.mangle = function(e) {
                        if (!this.options.mangle)
                            return e;
                        for (var t, n = "", r = e.length, i = 0; r > i; i++)
                            t = e.charCodeAt(i),
                            Math.random() > .5 && (t = "x" + t.toString(16)),
                            n += "&#" + t + ";";
                        return n
                    }
                    ,
                    o.prototype.code = function(e, t, n) {
                        if (this.options.highlight) {
                            var r = this.options.highlight(e, t);
                            null != r && r !== e && (n = !0,
                            e = r)
                        }
                        return t ? '<pre><code class="' + this.options.langPrefix + l(t, !0) + '">' + (n ? e : l(e, !0)) + "\n</code></pre>\n" : "<pre><code>" + (n ? e : l(e, !0)) + "\n</code></pre>"
                    }
                    ,
                    o.prototype.blockquote = function(e) {
                        return "<blockquote>\n" + e + "</blockquote>\n"
                    }
                    ,
                    o.prototype.html = function(e) {
                        return e
                    }
                    ,
                    o.prototype.heading = function(e, t, n) {
                        return "<h" + t + ' id="' + this.options.headerPrefix + n.toLowerCase().replace(/[^\w]+/g, "-") + '">' + e + "</h" + t + ">\n"
                    }
                    ,
                    o.prototype.hr = function() {
                        return this.options.xhtml ? "<hr/>\n" : "<hr>\n"
                    }
                    ,
                    o.prototype.list = function(e, t) {
                        var n = t ? "ol" : "ul";
                        return "<" + n + ">\n" + e + "</" + n + ">\n"
                    }
                    ,
                    o.prototype.listitem = function(e) {
                        return "<li>" + e + "</li>\n"
                    }
                    ,
                    o.prototype.paragraph = function(e) {
                        return "<p>" + e + "</p>\n"
                    }
                    ,
                    o.prototype.table = function(e, t) {
                        return "<table>\n<thead>\n" + e + "</thead>\n<tbody>\n" + t + "</tbody>\n</table>\n"
                    }
                    ,
                    o.prototype.tablerow = function(e) {
                        return "<tr>\n" + e + "</tr>\n"
                    }
                    ,
                    o.prototype.tablecell = function(e, t) {
                        var n = t.header ? "th" : "td"
                          , r = t.align ? "<" + n + ' style="text-align:' + t.align + '">' : "<" + n + ">";
                        return r + e + "</" + n + ">\n"
                    }
                    ,
                    o.prototype.strong = function(e) {
                        return "<strong>" + e + "</strong>"
                    }
                    ,
                    o.prototype.em = function(e) {
                        return "<em>" + e + "</em>"
                    }
                    ,
                    o.prototype.codespan = function(e) {
                        return "<code>" + e + "</code>"
                    }
                    ,
                    o.prototype.br = function() {
                        return this.options.xhtml ? "<br/>" : "<br>"
                    }
                    ,
                    o.prototype.del = function(e) {
                        return "<del>" + e + "</del>"
                    }
                    ,
                    o.prototype.link = function(e, t, n) {
                        if (this.options.sanitize) {
                            try {
                                var r = decodeURIComponent(s(e)).replace(/[^\w:]/g, "").toLowerCase()
                            } catch (i) {
                                return ""
                            }
                            if (0 === r.indexOf("javascript:") || 0 === r.indexOf("vbscript:"))
                                return ""
                        }
                        var o = '<a href="' + e + '"';
                        return t && (o += ' title="' + t + '"'),
                        o += ">" + n + "</a>"
                    }
                    ,
                    o.prototype.image = function(e, t, n) {
                        var r = '<img src="' + e + '" alt="' + n + '"';
                        return t && (r += ' title="' + t + '"'),
                        r += this.options.xhtml ? "/>" : ">"
                    }
                    ,
                    o.prototype.text = function(e) {
                        return e
                    }
                    ,
                    a.parse = function(e, t, n) {
                        var r = new a(t,n);
                        return r.parse(e)
                    }
                    ,
                    a.prototype.parse = function(e) {
                        this.inline = new i(e.links,this.options,this.renderer),
                        this.tokens = e.reverse();
                        for (var t = ""; this.next(); )
                            t += this.tok();
                        return t
                    }
                    ,
                    a.prototype.next = function() {
                        return this.token = this.tokens.pop()
                    }
                    ,
                    a.prototype.peek = function() {
                        return this.tokens[this.tokens.length - 1] || 0
                    }
                    ,
                    a.prototype.parseText = function() {
                        for (var e = this.token.text; "text" === this.peek().type; )
                            e += "\n" + this.next().text;
                        return this.inline.output(e)
                    }
                    ,
                    a.prototype.tok = function() {
                        switch (this.token.type) {
                        case "space":
                            return "";
                        case "hr":
                            return this.renderer.hr();
                        case "heading":
                            return this.renderer.heading(this.inline.output(this.token.text), this.token.depth, this.token.text);
                        case "code":
                            return this.renderer.code(this.token.text, this.token.lang, this.token.escaped);
                        case "table":
                            var e, t, n, r, i, o = "", a = "";
                            for (n = "",
                            e = 0; e < this.token.header.length; e++)
                                r = {
                                    header: !0,
                                    align: this.token.align[e]
                                },
                                n += this.renderer.tablecell(this.inline.output(this.token.header[e]), {
                                    header: !0,
                                    align: this.token.align[e]
                                });
                            for (o += this.renderer.tablerow(n),
                            e = 0; e < this.token.cells.length; e++) {
                                for (t = this.token.cells[e],
                                n = "",
                                i = 0; i < t.length; i++)
                                    n += this.renderer.tablecell(this.inline.output(t[i]), {
                                        header: !1,
                                        align: this.token.align[i]
                                    });
                                a += this.renderer.tablerow(n)
                            }
                            return this.renderer.table(o, a);
                        case "blockquote_start":
                            for (var a = ""; "blockquote_end" !== this.next().type; )
                                a += this.tok();
                            return this.renderer.blockquote(a);
                        case "list_start":
                            for (var a = "", l = this.token.ordered; "list_end" !== this.next().type; )
                                a += this.tok();
                            return this.renderer.list(a, l);
                        case "list_item_start":
                            for (var a = ""; "list_item_end" !== this.next().type; )
                                a += "text" === this.token.type ? this.parseText() : this.tok();
                            return this.renderer.listitem(a);
                        case "loose_item_start":
                            for (var a = ""; "list_item_end" !== this.next().type; )
                                a += this.tok();
                            return this.renderer.listitem(a);
                        case "html":
                            var s = this.token.pre || this.options.pedantic ? this.token.text : this.inline.output(this.token.text);
                            return this.renderer.html(s);
                        case "paragraph":
                            return this.renderer.paragraph(this.inline.output(this.token.text));
                        case "text":
                            return this.renderer.paragraph(this.parseText())
                        }
                    }
                    ,
                    u.exec = u,
                    h.options = h.setOptions = function(e) {
                        return f(h.defaults, e),
                        h
                    }
                    ,
                    h.defaults = {
                        gfm: !0,
                        tables: !0,
                        breaks: !1,
                        pedantic: !1,
                        sanitize: !1,
                        sanitizer: null,
                        mangle: !0,
                        smartLists: !1,
                        silent: !1,
                        highlight: null,
                        langPrefix: "lang-",
                        smartypants: !1,
                        headerPrefix: "",
                        renderer: new o,
                        xhtml: !1
                    },
                    h.Parser = a,
                    h.parser = a.parse,
                    h.Renderer = o,
                    h.Lexer = t,
                    h.lexer = t.lex,
                    h.InlineLexer = i,
                    h.inlineLexer = i.output,
                    h.parse = h,
                    "undefined" != typeof n && "object" == typeof r ? n.exports = h : "function" == typeof e && e.amd ? e(function() {
                        return h
                    }) : this.marked = h
                }
                ).call(function() {
                    return this || ("undefined" != typeof window ? window : t)
                }())
            }
            ).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }
        , {}],
        18: [function(e, t) {
            (function(n, r) {
                "use strict";
                var i = function(e, t, n, i) {
                    if (i = i || {},
                    this.dictionary = null,
                    this.rules = {},
                    this.dictionaryTable = {},
                    this.compoundRules = [],
                    this.compoundRuleCodes = {},
                    this.replacementTable = [],
                    this.flags = i.flags || {},
                    e) {
                        if (this.dictionary = e,
                        "undefined" != typeof window && "chrome"in window && "extension"in window.chrome && "getURL"in window.chrome.extension)
                            t || (t = this._readFile(chrome.extension.getURL("lib/typo/dictionaries/" + e + "/" + e + ".aff"))),
                            n || (n = this._readFile(chrome.extension.getURL("lib/typo/dictionaries/" + e + "/" + e + ".dic")));
                        else {
                            if (i.dictionaryPath)
                                var o = i.dictionaryPath;
                            else if ("undefined" != typeof r)
                                var o = r + "/dictionaries";
                            else
                                var o = "./dictionaries";
                            t || (t = this._readFile(o + "/" + e + "/" + e + ".aff")),
                            n || (n = this._readFile(o + "/" + e + "/" + e + ".dic"))
                        }
                        this.rules = this._parseAFF(t),
                        this.compoundRuleCodes = {};
                        for (var a = 0, l = this.compoundRules.length; l > a; a++)
                            for (var s = this.compoundRules[a], c = 0, u = s.length; u > c; c++)
                                this.compoundRuleCodes[s[c]] = [];
                        "ONLYINCOMPOUND"in this.flags && (this.compoundRuleCodes[this.flags.ONLYINCOMPOUND] = []),
                        this.dictionaryTable = this._parseDIC(n);
                        for (var a in this.compoundRuleCodes)
                            0 == this.compoundRuleCodes[a].length && delete this.compoundRuleCodes[a];
                        for (var a = 0, l = this.compoundRules.length; l > a; a++) {
                            for (var f = this.compoundRules[a], h = "", c = 0, u = f.length; u > c; c++) {
                                var d = f[c];
                                h += d in this.compoundRuleCodes ? "(" + this.compoundRuleCodes[d].join("|") + ")" : d
                            }
                            this.compoundRules[a] = new RegExp(h,"i")
                        }
                    }
                    return this
                };
                i.prototype = {
                    load: function(e) {
                        for (var t in e)
                            this[t] = e[t];
                        return this
                    },
                    _readFile: function(t, r) {
                        if (r || (r = "utf8"),
                        "undefined" != typeof XMLHttpRequest) {
                            var i = new XMLHttpRequest;
                            return i.open("GET", t, !1),
                            i.overrideMimeType && i.overrideMimeType("text/plain; charset=" + r),
                            i.send(null),
                            i.responseText
                        }
                        if ("undefined" != typeof e) {
                            var o = e("fs");
                            try {
                                if (o.existsSync(t)) {
                                    var a = o.statSync(t)
                                      , l = o.openSync(t, "r")
                                      , s = new n(a.size);
                                    return o.readSync(l, s, 0, s.length, null),
                                    s.toString(r, 0, s.length)
                                }
                                console.log("Path " + t + " does not exist.")
                            } catch (c) {
                                return console.log(c),
                                ""
                            }
                        }
                    },
                    _parseAFF: function(e) {
                        var t = {};
                        e = this._removeAffixComments(e);
                        for (var n = e.split("\n"), r = 0, i = n.length; i > r; r++) {
                            var o = n[r]
                              , a = o.split(/\s+/)
                              , l = a[0];
                            if ("PFX" == l || "SFX" == l) {
                                for (var s = a[1], c = a[2], u = parseInt(a[3], 10), f = [], h = r + 1, d = r + 1 + u; d > h; h++) {
                                    var o = n[h]
                                      , p = o.split(/\s+/)
                                      , m = p[2]
                                      , g = p[3].split("/")
                                      , v = g[0];
                                    "0" === v && (v = "");
                                    var y = this.parseRuleCodes(g[1])
                                      , x = p[4]
                                      , b = {};
                                    b.add = v,
                                    y.length > 0 && (b.continuationClasses = y),
                                    "." !== x && ("SFX" === l ? b.match = new RegExp(x + "$") : b.match = new RegExp("^" + x)),
                                    "0" != m && ("SFX" === l ? b.remove = new RegExp(m + "$") : b.remove = m),
                                    f.push(b)
                                }
                                t[s] = {
                                    type: l,
                                    combineable: "Y" == c,
                                    entries: f
                                },
                                r += u
                            } else if ("COMPOUNDRULE" === l) {
                                for (var u = parseInt(a[1], 10), h = r + 1, d = r + 1 + u; d > h; h++) {
                                    var o = n[h]
                                      , p = o.split(/\s+/);
                                    this.compoundRules.push(p[1])
                                }
                                r += u
                            } else if ("REP" === l) {
                                var p = o.split(/\s+/);
                                3 === p.length && this.replacementTable.push([p[1], p[2]])
                            } else
                                this.flags[l] = a[1]
                        }
                        return t
                    },
                    _removeAffixComments: function(e) {
                        return e = e.replace(/#.*$/gm, ""),
                        e = e.replace(/^\s\s*/m, "").replace(/\s\s*$/m, ""),
                        e = e.replace(/\n{2,}/g, "\n"),
                        e = e.replace(/^\s\s*/, "").replace(/\s\s*$/, "")
                    },
                    _parseDIC: function(e) {
                        function t(e, t) {
                            e in r && "object" == typeof r[e] || (r[e] = []),
                            r[e].push(t)
                        }
                        e = this._removeDicComments(e);
                        for (var n = e.split("\n"), r = {}, i = 1, o = n.length; o > i; i++) {
                            var a = n[i]
                              , l = a.split("/", 2)
                              , s = l[0];
                            if (l.length > 1) {
                                var c = this.parseRuleCodes(l[1]);
                                "NEEDAFFIX"in this.flags && -1 != c.indexOf(this.flags.NEEDAFFIX) || t(s, c);
                                for (var u = 0, f = c.length; f > u; u++) {
                                    var h = c[u]
                                      , d = this.rules[h];
                                    if (d)
                                        for (var p = this._applyRule(s, d), m = 0, g = p.length; g > m; m++) {
                                            var v = p[m];
                                            if (t(v, []),
                                            d.combineable)
                                                for (var y = u + 1; f > y; y++) {
                                                    var x = c[y]
                                                      , b = this.rules[x];
                                                    if (b && b.combineable && d.type != b.type)
                                                        for (var w = this._applyRule(v, b), k = 0, S = w.length; S > k; k++) {
                                                            var C = w[k];
                                                            t(C, [])
                                                        }
                                                }
                                        }
                                    h in this.compoundRuleCodes && this.compoundRuleCodes[h].push(s)
                                }
                            } else
                                t(s.trim(), [])
                        }
                        return r
                    },
                    _removeDicComments: function(e) {
                        return e = e.replace(/^\t.*$/gm, "")
                    },
                    parseRuleCodes: function(e) {
                        if (!e)
                            return [];
                        if (!("FLAG"in this.flags))
                            return e.split("");
                        if ("long" === this.flags.FLAG) {
                            for (var t = [], n = 0, r = e.length; r > n; n += 2)
                                t.push(e.substr(n, 2));
                            return t
                        }
                        return "num" === this.flags.FLAG ? textCode.split(",") : void 0
                    },
                    _applyRule: function(e, t) {
                        for (var n = t.entries, r = [], i = 0, o = n.length; o > i; i++) {
                            var a = n[i];
                            if (!a.match || e.match(a.match)) {
                                var l = e;
                                if (a.remove && (l = l.replace(a.remove, "")),
                                "SFX" === t.type ? l += a.add : l = a.add + l,
                                r.push(l),
                                "continuationClasses"in a)
                                    for (var s = 0, c = a.continuationClasses.length; c > s; s++) {
                                        var u = this.rules[a.continuationClasses[s]];
                                        u && (r = r.concat(this._applyRule(l, u)))
                                    }
                            }
                        }
                        return r
                    },
                    check: function(e) {
                        var t = e.replace(/^\s\s*/, "").replace(/\s\s*$/, "");
                        if (this.checkExact(t))
                            return !0;
                        if (t.toUpperCase() === t) {
                            var n = t[0] + t.substring(1).toLowerCase();
                            if (this.hasFlag(n, "KEEPCASE"))
                                return !1;
                            if (this.checkExact(n))
                                return !0
                        }
                        var r = t.toLowerCase();
                        if (r !== t) {
                            if (this.hasFlag(r, "KEEPCASE"))
                                return !1;
                            if (this.checkExact(r))
                                return !0
                        }
                        return !1
                    },
                    checkExact: function(e) {
                        var t = this.dictionaryTable[e];
                        if ("undefined" == typeof t) {
                            if ("COMPOUNDMIN"in this.flags && e.length >= this.flags.COMPOUNDMIN)
                                for (var n = 0, r = this.compoundRules.length; r > n; n++)
                                    if (e.match(this.compoundRules[n]))
                                        return !0;
                            return !1
                        }
                        if ("object" == typeof t) {
                            for (var n = 0, r = t.length; r > n; n++)
                                if (!this.hasFlag(e, "ONLYINCOMPOUND", t[n]))
                                    return !0;
                            return !1
                        }
                    },
                    hasFlag: function(e, t, n) {
                        if (t in this.flags) {
                            if ("undefined" == typeof n)
                                var n = Array.prototype.concat.apply([], this.dictionaryTable[e]);
                            if (n && -1 !== n.indexOf(this.flags[t]))
                                return !0
                        }
                        return !1
                    },
                    alphabet: "",
                    suggest: function(e, t) {
                        function n(e) {
                            for (var t = [], n = 0, r = e.length; r > n; n++) {
                                for (var i = e[n], o = [], a = 0, l = i.length + 1; l > a; a++)
                                    o.push([i.substring(0, a), i.substring(a, i.length)]);
                                for (var s = [], a = 0, l = o.length; l > a; a++) {
                                    var u = o[a];
                                    u[1] && s.push(u[0] + u[1].substring(1))
                                }
                                for (var f = [], a = 0, l = o.length; l > a; a++) {
                                    var u = o[a];
                                    u[1].length > 1 && f.push(u[0] + u[1][1] + u[1][0] + u[1].substring(2))
                                }
                                for (var h = [], a = 0, l = o.length; l > a; a++) {
                                    var u = o[a];
                                    if (u[1])
                                        for (var d = 0, p = c.alphabet.length; p > d; d++)
                                            h.push(u[0] + c.alphabet[d] + u[1].substring(1))
                                }
                                for (var m = [], a = 0, l = o.length; l > a; a++) {
                                    var u = o[a];
                                    if (u[1])
                                        for (var d = 0, p = c.alphabet.length; p > d; d++)
                                            h.push(u[0] + c.alphabet[d] + u[1])
                                }
                                t = t.concat(s),
                                t = t.concat(f),
                                t = t.concat(h),
                                t = t.concat(m)
                            }
                            return t
                        }
                        function r(e) {
                            for (var t = [], n = 0; n < e.length; n++)
                                c.check(e[n]) && t.push(e[n]);
                            return t
                        }
                        function i(e) {
                            function i(e, t) {
                                return e[1] < t[1] ? -1 : 1
                            }
                            for (var o = n([e]), a = n(o), l = r(o).concat(r(a)), s = {}, u = 0, f = l.length; f > u; u++)
                                l[u]in s ? s[l[u]] += 1 : s[l[u]] = 1;
                            var h = [];
                            for (var u in s)
                                h.push([u, s[u]]);
                            h.sort(i).reverse();
                            for (var d = [], u = 0, f = Math.min(t, h.length); f > u; u++)
                                c.hasFlag(h[u][0], "NOSUGGEST") || d.push(h[u][0]);
                            return d
                        }
                        if (t || (t = 5),
                        this.check(e))
                            return [];
                        for (var o = 0, a = this.replacementTable.length; a > o; o++) {
                            var l = this.replacementTable[o];
                            if (-1 !== e.indexOf(l[0])) {
                                var s = e.replace(l[0], l[1]);
                                if (this.check(s))
                                    return [s]
                            }
                        }
                        var c = this;
                        return c.alphabet = "abcdefghijklmnopqrstuvwxyz",
                        i(e)
                    }
                },
                "undefined" != typeof t && (t.exports = i)
            }
            ).call(this, e("buffer").Buffer, "/node_modules/typo-js")
        }
        , {
            buffer: 3,
            fs: 2
        }],
        19: [function(e) {
            var r = e("codemirror");
            r.commands.tabAndIndentMarkdownList = function(e) {
                var t = e.listSelections()
                  , n = t[0].head
                  , r = e.getStateAfter(n.line)
                  , i = r.list !== !1;
                if (i)
                    return void e.execCommand("indentMore");
                if (e.options.indentWithTabs)
                    e.execCommand("insertTab");
                else {
                    var o = Array(e.options.tabSize + 1).join(" ");
                    e.replaceSelection(o)
                }
            }
            ,
            r.commands.shiftTabAndUnindentMarkdownList = function(e) {
                var t = e.listSelections()
                  , n = t[0].head
                  , r = e.getStateAfter(n.line)
                  , i = r.list !== !1;
                if (i)
                    return void e.execCommand("indentLess");
                if (e.options.indentWithTabs)
                    e.execCommand("insertTab");
                else {
                    var o = Array(e.options.tabSize + 1).join(" ");
                    e.replaceSelection(o)
                }
            }
        }
        , {
            codemirror: 10
        }],
        20: [function(e, t) {
            "use strict";
            function r(e) {
                return e = U ? e.replace("Ctrl", "Cmd") : e.replace("Cmd", "Ctrl")
            }
            function i(e, t, n) {
                e = e || {};
                var r = document.createElement("a");
                return t = void 0 == t ? !0 : t,
                e.title && t && (r.title = a(e.title, e.action, n),
                U && (r.title = r.title.replace("Ctrl", "\u2318"),
                r.title = r.title.replace("Alt", "\u2325"))),
                r.tabIndex = -1,
                r.className = e.className,
                r
            }
            function o() {
                var e = document.createElement("i");
                return e.className = "separator",
                e.innerHTML = "|",
                e
            }
            function a(e, t, n) {
                var i, o = e;
                return t && (i = Y(t),
                n[i] && (o += " (" + r(n[i]) + ")")),
                o
            }
            function l(e, t) {
                t = t || e.getCursor("start");
                var n = e.getTokenAt(t);
                if (!n.type)
                    return {};
                for (var r, i, o = n.type.split(" "), a = {}, l = 0; l < o.length; l++)
                    r = o[l],
                    "strong" === r ? a.bold = !0 : "variable-2" === r ? (i = e.getLine(t.line),
                    /^\s*\d+\.\s/.test(i) ? a["ordered-list"] = !0 : a["unordered-list"] = !0) : "atom" === r ? a.quote = !0 : "em" === r ? a.italic = !0 : "quote" === r ? a.quote = !0 : "strikethrough" === r ? a.strikethrough = !0 : "comment" === r ? a.code = !0 : "link" === r ? a.link = !0 : "tag" === r ? a.image = !0 : r.match(/^header(\-[1-6])?$/) && (a[r.replace("header", "heading")] = !0);
                return a
            }
            function s(e) {
                var t = e.codemirror;
                t.setOption("fullScreen", !t.getOption("fullScreen")),
                t.getOption("fullScreen") ? (V = document.body.style.overflow,
                document.body.style.overflow = "hidden") : document.body.style.overflow = V;
                var n = t.getWrapperElement();
                /fullscreen/.test(n.previousSibling.className) ? n.previousSibling.className = n.previousSibling.className.replace(/\s*fullscreen\b/, "") : n.previousSibling.className += " fullscreen";
                var r = e.toolbarElements.fullscreen;
                /active/.test(r.className) ? r.className = r.className.replace(/\s*active\s*/g, "") : r.className += " active";
                var i = t.getWrapperElement().nextSibling;
                /editor-preview-active-side/.test(i.className) && N(e)
            }
            function c(e) {
                P(e, "bold", e.options.blockStyles.bold)
            }
            function u(e) {
                P(e, "italic", e.options.blockStyles.italic)
            }
            function f(e) {
                P(e, "strikethrough", "~~")
            }
            function h(e) {
                function t(e) {
                    if ("object" != typeof e)
                        throw "fencing_line() takes a 'line' object (not a line number, or line text).  Got: " + typeof e + ": " + e;
                    return e.styles && e.styles[2] && -1 !== e.styles[2].indexOf("formatting-code-block")
                }
                function n(e) {
                    return e.state.base.base || e.state.base
                }
                function r(e, r, i, o, a) {
                    i = i || e.getLineHandle(r),
                    o = o || e.getTokenAt({
                        line: r,
                        ch: 1
                    }),
                    a = a || !!i.text && e.getTokenAt({
                        line: r,
                        ch: i.text.length - 1
                    });
                    var l = o.type ? o.type.split(" ") : [];
                    return a && n(a).indentedCode ? "indented" : -1 === l.indexOf("comment") ? !1 : n(o).fencedChars || n(a).fencedChars || t(i) ? "fenced" : "single"
                }
                function i(e, t, n, r) {
                    var i = t.line + 1
                      , o = n.line + 1
                      , a = t.line !== n.line
                      , l = r + "\n"
                      , s = "\n" + r;
                    a && o++,
                    a && 0 === n.ch && (s = r + "\n",
                    o--),
                    E(e, !1, [l, s]),
                    e.setSelection({
                        line: i,
                        ch: 0
                    }, {
                        line: o,
                        ch: 0
                    })
                }
                var o, a, l, s = e.options.blockStyles.code, c = e.codemirror, u = c.getCursor("start"), f = c.getCursor("end"), h = c.getTokenAt({
                    line: u.line,
                    ch: u.ch || 1
                }), d = c.getLineHandle(u.line), p = r(c, u.line, d, h);
                if ("single" === p) {
                    var m = d.text.slice(0, u.ch).replace("`", "")
                      , g = d.text.slice(u.ch).replace("`", "");
                    c.replaceRange(m + g, {
                        line: u.line,
                        ch: 0
                    }, {
                        line: u.line,
                        ch: 99999999999999
                    }),
                    u.ch--,
                    u !== f && f.ch--,
                    c.setSelection(u, f),
                    c.focus()
                } else if ("fenced" === p)
                    if (u.line !== f.line || u.ch !== f.ch) {
                        for (o = u.line; o >= 0 && (d = c.getLineHandle(o),
                        !t(d)); o--)
                            ;
                        var v, y, x, b, w = c.getTokenAt({
                            line: o,
                            ch: 1
                        }), k = n(w).fencedChars;
                        t(c.getLineHandle(u.line)) ? (v = "",
                        y = u.line) : t(c.getLineHandle(u.line - 1)) ? (v = "",
                        y = u.line - 1) : (v = k + "\n",
                        y = u.line),
                        t(c.getLineHandle(f.line)) ? (x = "",
                        b = f.line,
                        0 === f.ch && (b += 1)) : 0 !== f.ch && t(c.getLineHandle(f.line + 1)) ? (x = "",
                        b = f.line + 1) : (x = k + "\n",
                        b = f.line + 1),
                        0 === f.ch && (b -= 1),
                        c.operation(function() {
                            c.replaceRange(x, {
                                line: b,
                                ch: 0
                            }, {
                                line: b + (x ? 0 : 1),
                                ch: 0
                            }),
                            c.replaceRange(v, {
                                line: y,
                                ch: 0
                            }, {
                                line: y + (v ? 0 : 1),
                                ch: 0
                            })
                        }),
                        c.setSelection({
                            line: y + (v ? 1 : 0),
                            ch: 0
                        }, {
                            line: b + (v ? 1 : -1),
                            ch: 0
                        }),
                        c.focus()
                    } else {
                        var S = u.line;
                        if (t(c.getLineHandle(u.line)) && ("fenced" === r(c, u.line + 1) ? (o = u.line,
                        S = u.line + 1) : (a = u.line,
                        S = u.line - 1)),
                        void 0 === o)
                            for (o = S; o >= 0 && (d = c.getLineHandle(o),
                            !t(d)); o--)
                                ;
                        if (void 0 === a)
                            for (l = c.lineCount(),
                            a = S; l > a && (d = c.getLineHandle(a),
                            !t(d)); a++)
                                ;
                        c.operation(function() {
                            c.replaceRange("", {
                                line: o,
                                ch: 0
                            }, {
                                line: o + 1,
                                ch: 0
                            }),
                            c.replaceRange("", {
                                line: a - 1,
                                ch: 0
                            }, {
                                line: a,
                                ch: 0
                            })
                        }),
                        c.focus()
                    }
                else if ("indented" === p) {
                    if (u.line !== f.line || u.ch !== f.ch)
                        o = u.line,
                        a = f.line,
                        0 === f.ch && a--;
                    else {
                        for (o = u.line; o >= 0; o--)
                            if (d = c.getLineHandle(o),
                            !d.text.match(/^\s*$/) && "indented" !== r(c, o, d)) {
                                o += 1;
                                break
                            }
                        for (l = c.lineCount(),
                        a = u.line; l > a; a++)
                            if (d = c.getLineHandle(a),
                            !d.text.match(/^\s*$/) && "indented" !== r(c, a, d)) {
                                a -= 1;
                                break
                            }
                    }
                    var C = c.getLineHandle(a + 1)
                      , L = C && c.getTokenAt({
                        line: a + 1,
                        ch: C.text.length - 1
                    })
                      , T = L && n(L).indentedCode;
                    T && c.replaceRange("\n", {
                        line: a + 1,
                        ch: 0
                    });
                    for (var M = o; a >= M; M++)
                        c.indentLine(M, "subtract");
                    c.focus()
                } else {
                    var N = u.line === f.line && u.ch === f.ch && 0 === u.ch
                      , A = u.line !== f.line;
                    N || A ? i(c, u, f, s) : E(c, !1, ["`", "`"])
                }
            }
            function d(e) {
                var t = e.codemirror;
                I(t, "quote")
            }
            function p(e) {
                var t = e.codemirror;
                O(t, "smaller")
            }
            function m(e) {
                var t = e.codemirror;
                O(t, "bigger")
            }
            function g(e) {
                var t = e.codemirror;
                O(t, void 0, 1)
            }
            function v(e) {
                var t = e.codemirror;
                O(t, void 0, 2)
            }
            function y(e) {
                var t = e.codemirror;
                O(t, void 0, 3)
            }
            function x(e) {
                var t = e.codemirror;
                I(t, "unordered-list")
            }
            function b(e) {
                var t = e.codemirror;
                I(t, "ordered-list")
            }
            function w(e) {
                var t = e.codemirror;
                R(t)
            }
            function k(e) {
                var t = e.codemirror
                  , n = l(t)
                  , r = e.options
                  , i = "http://";
                return r.promptURLs && (i = prompt(r.promptTexts.link),
                !i) ? !1 : void E(t, n.link, r.insertTexts.link, i)
            }
            function S(e) {
                var t = e.codemirror
                  , n = l(t)
                  , r = e.options
                  , i = "http://";
                return r.promptURLs && (i = prompt(r.promptTexts.image),
                !i) ? !1 : void E(t, n.image, r.insertTexts.image, i)
            }
            function C(e) {
                var t = e.codemirror
                  , n = l(t)
                  , r = e.options;
                E(t, n.table, r.insertTexts.table)
            }
            function L(e) {
                var t = e.codemirror
                  , n = l(t)
                  , r = e.options;
                E(t, n.image, r.insertTexts.horizontalRule)
            }
            function T(e) {
                var t = e.codemirror;
                t.undo(),
                t.focus()
            }
            function M(e) {
                var t = e.codemirror;
                t.redo(),
                t.focus()
            }
            function N(e) {
                var t = e.codemirror
                  , n = t.getWrapperElement()
                  , r = n.nextSibling
                  , i = e.toolbarElements["side-by-side"]
                  , o = !1;
                /editor-preview-active-side/.test(r.className) ? (r.className = r.className.replace(/\s*editor-preview-active-side\s*/g, ""),
                i.className = i.className.replace(/\s*active\s*/g, ""),
                n.className = n.className.replace(/\s*CodeMirror-sided\s*/g, " ")) : (setTimeout(function() {
                    t.getOption("fullScreen") || s(e),
                    r.className += " editor-preview-active-side"
                }, 1),
                i.className += " active",
                n.className += " CodeMirror-sided",
                o = !0);
                var a = n.lastChild;
                if (/editor-preview-active/.test(a.className)) {
                    a.className = a.className.replace(/\s*editor-preview-active\s*/g, "");
                    var l = e.toolbarElements.preview
                      , c = n.previousSibling;
                    l.className = l.className.replace(/\s*active\s*/g, ""),
                    c.className = c.className.replace(/\s*disabled-for-preview*/g, "")
                }
                var u = function() {
                    r.innerHTML = e.options.previewRender(e.value(), r)
                };
                t.sideBySideRenderingFunction || (t.sideBySideRenderingFunction = u),
                o ? (r.innerHTML = e.options.previewRender(e.value(), r),
                t.on("update", t.sideBySideRenderingFunction)) : t.off("update", t.sideBySideRenderingFunction),
                t.refresh()
            }
            function A(e) {
                var t = e.codemirror
                  , n = t.getWrapperElement()
                  , r = n.previousSibling
                  , i = e.options.toolbar ? e.toolbarElements.preview : !1
                  , o = n.lastChild;
                o && /editor-preview/.test(o.className) || (o = document.createElement("div"),
                o.className = "editor-preview",
                n.appendChild(o)),
                /editor-preview-active/.test(o.className) ? (o.className = o.className.replace(/\s*editor-preview-active\s*/g, ""),
                i && (i.className = i.className.replace(/\s*active\s*/g, ""),
                r.className = r.className.replace(/\s*disabled-for-preview*/g, ""))) : (setTimeout(function() {
                    o.className += " editor-preview-active"
                }, 1),
                i && (i.className += " active",
                r.className += " disabled-for-preview")),
                o.innerHTML = e.options.previewRender(e.value(), o);
                var a = t.getWrapperElement().nextSibling;
                /editor-preview-active-side/.test(a.className) && N(e)
            }
            function E(e, t, n, r) {
                if (!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)) {
                    var i, o = n[0], a = n[1], l = e.getCursor("start"), s = e.getCursor("end");
                    r && (a = a.replace("#url#", r)),
                    t ? (i = e.getLine(l.line),
                    o = i.slice(0, l.ch),
                    a = i.slice(l.ch),
                    e.replaceRange(o + a, {
                        line: l.line,
                        ch: 0
                    })) : (i = e.getSelection(),
                    e.replaceSelection(o + i + a),
                    l.ch += o.length,
                    l !== s && (s.ch += o.length)),
                    e.setSelection(l, s),
                    e.focus()
                }
            }
            function O(e, t, n) {
                if (!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)) {
                    for (var r = e.getCursor("start"), i = e.getCursor("end"), o = r.line; o <= i.line; o++)
                        !function(r) {
                            var i = e.getLine(r)
                              , o = i.search(/[^#]/);
                            i = void 0 !== t ? 0 >= o ? "bigger" == t ? "###### " + i : "# " + i : 6 == o && "smaller" == t ? i.substr(7) : 1 == o && "bigger" == t ? i.substr(2) : "bigger" == t ? i.substr(1) : "#" + i : 1 == n ? 0 >= o ? "# " + i : o == n ? i.substr(o + 1) : "# " + i.substr(o + 1) : 2 == n ? 0 >= o ? "## " + i : o == n ? i.substr(o + 1) : "## " + i.substr(o + 1) : 0 >= o ? "### " + i : o == n ? i.substr(o + 1) : "### " + i.substr(o + 1),
                            e.replaceRange(i, {
                                line: r,
                                ch: 0
                            }, {
                                line: r,
                                ch: 99999999999999
                            })
                        }(o);
                    e.focus()
                }
            }
            function I(e, t) {
                if (!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)) {
                    for (var n = l(e), r = e.getCursor("start"), i = e.getCursor("end"), o = {
                        quote: /^(\s*)\>\s+/,
                        "unordered-list": /^(\s*)(\*|\-|\+)\s+/,
                        "ordered-list": /^(\s*)\d+\.\s+/
                    }, a = {
                        quote: "> ",
                        "unordered-list": "* ",
                        "ordered-list": "1. "
                    }, s = r.line; s <= i.line; s++)
                        !function(r) {
                            var i = e.getLine(r);
                            i = n[t] ? i.replace(o[t], "$1") : a[t] + i,
                            e.replaceRange(i, {
                                line: r,
                                ch: 0
                            }, {
                                line: r,
                                ch: 99999999999999
                            })
                        }(s);
                    e.focus()
                }
            }
            function P(e, t, n, r) {
                if (!/editor-preview-active/.test(e.codemirror.getWrapperElement().lastChild.className)) {
                    r = "undefined" == typeof r ? n : r;
                    var i, o = e.codemirror, a = l(o), s = n, c = r, u = o.getCursor("start"), f = o.getCursor("end");
                    a[t] ? (i = o.getLine(u.line),
                    s = i.slice(0, u.ch),
                    c = i.slice(u.ch),
                    "bold" == t ? (s = s.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/, ""),
                    c = c.replace(/(\*\*|__)/, "")) : "italic" == t ? (s = s.replace(/(\*|_)(?![\s\S]*(\*|_))/, ""),
                    c = c.replace(/(\*|_)/, "")) : "strikethrough" == t && (s = s.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/, ""),
                    c = c.replace(/(\*\*|~~)/, "")),
                    o.replaceRange(s + c, {
                        line: u.line,
                        ch: 0
                    }, {
                        line: u.line,
                        ch: 99999999999999
                    }),
                    "bold" == t || "strikethrough" == t ? (u.ch -= 2,
                    u !== f && (f.ch -= 2)) : "italic" == t && (u.ch -= 1,
                    u !== f && (f.ch -= 1))) : (i = o.getSelection(),
                    "bold" == t ? (i = i.split("**").join(""),
                    i = i.split("__").join("")) : "italic" == t ? (i = i.split("*").join(""),
                    i = i.split("_").join("")) : "strikethrough" == t && (i = i.split("~~").join("")),
                    o.replaceSelection(s + i + c),
                    u.ch += n.length,
                    f.ch = u.ch + i.length),
                    o.setSelection(u, f),
                    o.focus()
                }
            }
            function R(e) {
                if (!/editor-preview-active/.test(e.getWrapperElement().lastChild.className))
                    for (var t, n = e.getCursor("start"), r = e.getCursor("end"), i = n.line; i <= r.line; i++)
                        t = e.getLine(i),
                        t = t.replace(/^[ ]*([# ]+|\*|\-|[> ]+|[0-9]+(.|\)))[ ]*/, ""),
                        e.replaceRange(t, {
                            line: i,
                            ch: 0
                        }, {
                            line: i,
                            ch: 99999999999999
                        })
            }
            function D(e, t) {
                for (var n in t)
                    t.hasOwnProperty(n) && (t[n]instanceof Array ? e[n] = t[n].concat(e[n]instanceof Array ? e[n] : []) : null !== t[n] && "object" == typeof t[n] && t[n].constructor === Object ? e[n] = D(e[n] || {}, t[n]) : e[n] = t[n]);
                return e
            }
            function H(e) {
                for (var t = 1; t < arguments.length; t++)
                    e = D(e, arguments[t]);
                return e
            }
            function W(e) {
                var t = /[a-zA-Z0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g
                  , n = e.match(t)
                  , r = 0;
                if (null === n)
                    return r;
                for (var i = 0; i < n.length; i++)
                    r += n[i].charCodeAt(0) >= 19968 ? n[i].length : 1;
                return r
            }
            function B(e) {
                e = e || {},
                e.parent = this;
                var t = !0;
                if (e.autoDownloadFontAwesome === !1 && (t = !1),
                e.autoDownloadFontAwesome !== !0)
                    for (var n = document.styleSheets, r = 0; r < n.length; r++)
                        n[r].href && n[r].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/") > -1 && (t = !1);
                if (t) {
                    var i = document.createElement("link");
                    i.rel = "stylesheet",
                    i.href = "https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",
                    document.getElementsByTagName("head")[0].appendChild(i)
                }
                if (e.element)
                    this.element = e.element;
                else if (null === e.element)
                    return void console.log("SimpleMDE: Error. No element was found.");
                if (void 0 === e.toolbar) {
                    e.toolbar = [];
                    for (var o in K)
                        K.hasOwnProperty(o) && (-1 != o.indexOf("separator-") && e.toolbar.push("|"),
                        (K[o]["default"] === !0 || e.showIcons && e.showIcons.constructor === Array && -1 != e.showIcons.indexOf(o)) && e.toolbar.push(o))
                }
                e.hasOwnProperty("status") || (e.status = ["autosave", "lines", "words", "cursor"]),
                e.previewRender || (e.previewRender = function(e) {
                    return this.parent.markdown(e)
                }
                ),
                e.parsingConfig = H({
                    highlightFormatting: !0
                }, e.parsingConfig || {}),
                e.insertTexts = H({}, X, e.insertTexts || {}),
                e.promptTexts = Z,
                e.blockStyles = H({}, J, e.blockStyles || {}),
                e.shortcuts = H({}, G, e.shortcuts || {}),
                void 0 != e.autosave && void 0 != e.autosave.unique_id && "" != e.autosave.unique_id && (e.autosave.uniqueId = e.autosave.unique_id),
                this.options = e,
                this.render(),
                !e.initialValue || this.options.autosave && this.options.autosave.foundSavedValue === !0 || this.value(e.initialValue)
            }
            function _() {
                if ("object" != typeof localStorage)
                    return !1;
                try {
                    localStorage.setItem("smde_localStorage", 1),
                    localStorage.removeItem("smde_localStorage")
                } catch (e) {
                    return !1
                }
                return !0
            }
            var F = e("codemirror");
            e("codemirror/addon/edit/continuelist.js"),
            e("./codemirror/tablist"),
            e("codemirror/addon/display/fullscreen.js"),
            e("codemirror/mode/markdown/markdown.js"),
            e("codemirror/addon/mode/overlay.js"),
            e("codemirror/addon/display/placeholder.js"),
            e("codemirror/addon/selection/mark-selection.js"),
            e("codemirror/mode/gfm/gfm.js"),
            e("codemirror/mode/xml/xml.js");
            var z = e("codemirror-spell-checker")
              , j = e("marked")
              , U = /Mac/.test(navigator.platform)
              , q = {
                toggleBold: c,
                toggleItalic: u,
                drawLink: k,
                toggleHeadingSmaller: p,
                toggleHeadingBigger: m,
                drawImage: S,
                toggleBlockquote: d,
                toggleOrderedList: b,
                toggleUnorderedList: x,
                toggleCodeBlock: h,
                togglePreview: A,
                toggleStrikethrough: f,
                toggleHeading1: g,
                toggleHeading2: v,
                toggleHeading3: y,
                cleanBlock: w,
                drawTable: C,
                drawHorizontalRule: L,
                undo: T,
                redo: M,
                toggleSideBySide: N,
                toggleFullScreen: s
            }
              , G = {
                toggleBold: "Cmd-B",
                toggleItalic: "Cmd-I",
                drawLink: "Cmd-K",
                toggleHeadingSmaller: "Cmd-H",
                toggleHeadingBigger: "Shift-Cmd-H",
                cleanBlock: "Cmd-E",
                drawImage: "Cmd-Alt-I",
                toggleBlockquote: "Cmd-'",
                toggleOrderedList: "Cmd-Alt-L",
                toggleUnorderedList: "Cmd-L",
                toggleCodeBlock: "Cmd-Alt-C",
                togglePreview: "Cmd-P",
                toggleSideBySide: "F9",
                toggleFullScreen: "F11"
            }
              , Y = function(e) {
                for (var t in q)
                    if (q[t] === e)
                        return t;
                return null
            }
              , $ = function() {
                var e = !1;
                return function(t) {
                    (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0, 4))) && (e = !0)
                }(navigator.userAgent || navigator.vendor || window.opera),
                e
            }
              , V = ""
              , K = {
                bold: {
                    name: "bold",
                    action: c,
                    className: "fa fa-bold",
                    title: "Bold",
                    "default": !0
                },
                italic: {
                    name: "italic",
                    action: u,
                    className: "fa fa-italic",
                    title: "Italic",
                    "default": !0
                },
                strikethrough: {
                    name: "strikethrough",
                    action: f,
                    className: "fa fa-strikethrough",
                    title: "Strikethrough"
                },
                heading: {
                    name: "heading",
                    action: p,
                    className: "fa fa-header",
                    title: "Heading",
                    "default": !0
                },
                "heading-smaller": {
                    name: "heading-smaller",
                    action: p,
                    className: "fa fa-header fa-header-x fa-header-smaller",
                    title: "Smaller Heading"
                },
                "heading-bigger": {
                    name: "heading-bigger",
                    action: m,
                    className: "fa fa-header fa-header-x fa-header-bigger",
                    title: "Bigger Heading"
                },
                "heading-1": {
                    name: "heading-1",
                    action: g,
                    className: "fa fa-header fa-header-x fa-header-1",
                    title: "Big Heading"
                },
                "heading-2": {
                    name: "heading-2",
                    action: v,
                    className: "fa fa-header fa-header-x fa-header-2",
                    title: "Medium Heading"
                },
                "heading-3": {
                    name: "heading-3",
                    action: y,
                    className: "fa fa-header fa-header-x fa-header-3",
                    title: "Small Heading"
                },
                "separator-1": {
                    name: "separator-1"
                },
                code: {
                    name: "code",
                    action: h,
                    className: "fa fa-code",
                    title: "Code"
                },
                quote: {
                    name: "quote",
                    action: d,
                    className: "fa fa-quote-left",
                    title: "Quote",
                    "default": !0
                },
                "unordered-list": {
                    name: "unordered-list",
                    action: x,
                    className: "fa fa-list-ul",
                    title: "Generic List",
                    "default": !0
                },
                "ordered-list": {
                    name: "ordered-list",
                    action: b,
                    className: "fa fa-list-ol",
                    title: "Numbered List",
                    "default": !0
                },
                "clean-block": {
                    name: "clean-block",
                    action: w,
                    className: "fa fa-eraser fa-clean-block",
                    title: "Clean block"
                },
                "separator-2": {
                    name: "separator-2"
                },
                link: {
                    name: "link",
                    action: k,
                    className: "fa fa-link",
                    title: "Create Link",
                    "default": !0
                },
                image: {
                    name: "image",
                    action: S,
                    className: "fa fa-picture-o",
                    title: "Insert Image",
                    "default": !0
                },
                table: {
                    name: "table",
                    action: C,
                    className: "fa fa-table",
                    title: "Insert Table"
                },
                "horizontal-rule": {
                    name: "horizontal-rule",
                    action: L,
                    className: "fa fa-minus",
                    title: "Insert Horizontal Line"
                },
                "separator-3": {
                    name: "separator-3"
                },
                preview: {
                    name: "preview",
                    action: A,
                    className: "fa fa-eye no-disable",
                    title: "Toggle Preview",
                    "default": !0
                },
                "side-by-side": {
                    name: "side-by-side",
                    action: N,
                    className: "fa fa-columns no-disable no-mobile",
                    title: "Toggle Side by Side",
                    "default": !0
                },
                fullscreen: {
                    name: "fullscreen",
                    action: s,
                    className: "fa fa-arrows-alt no-disable no-mobile",
                    title: "Toggle Fullscreen",
                    "default": !0
                },
                "separator-4": {
                    name: "separator-4"
                },
                guide: {
                    name: "guide",
                    action: "https://simplemde.com/markdown-guide",
                    className: "fa fa-question-circle",
                    title: "Markdown Guide",
                    "default": !0
                },
                "separator-5": {
                    name: "separator-5"
                },
                undo: {
                    name: "undo",
                    action: T,
                    className: "fa fa-undo no-disable",
                    title: "Undo"
                },
                redo: {
                    name: "redo",
                    action: M,
                    className: "fa fa-repeat no-disable",
                    title: "Redo"
                }
            }
              , X = {
                link: ["[", "](#url#)"],
                image: ["![](", "#url#)"],
                table: ["", "\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text     | Text     |\n\n"],
                horizontalRule: ["", "\n\n-----\n\n"]
            }
              , Z = {
                link: "URL for the link:",
                image: "URL of the image:"
            }
              , J = {
                bold: "**",
                code: "```",
                italic: "*"
            };
            B.prototype.markdown = function(e) {
                if (j) {
                    var t = {};
                    return this.options && this.options.renderingConfig && this.options.renderingConfig.singleLineBreaks === !1 ? t.breaks = !1 : t.breaks = !0,
                    this.options && this.options.renderingConfig && this.options.renderingConfig.codeSyntaxHighlighting === !0 && window.hljs && (t.highlight = function(e) {
                        return window.hljs.highlightAuto(e).value
                    }
                    ),
                    j.setOptions(t),
                    j(e)
                }
            }
            ,
            B.prototype.render = function(e) {
                if (e || (e = this.element || document.getElementsByTagName("textarea")[0]),
                !this._rendered || this._rendered !== e) {
                    this.element = e;
                    var t = this.options
                      , n = this
                      , i = {};
                    for (var o in t.shortcuts)
                        null !== t.shortcuts[o] && null !== q[o] && !function(e) {
                            i[r(t.shortcuts[e])] = function() {
                                q[e](n)
                            }
                        }(o);
                    i.Enter = "newlineAndIndentContinueMarkdownList",
                    i.Tab = "tabAndIndentMarkdownList",
                    i["Shift-Tab"] = "shiftTabAndUnindentMarkdownList",
                    i.Esc = function(e) {
                        e.getOption("fullScreen") && s(n)
                    }
                    ,
                    document.addEventListener("keydown", function(e) {
                        e = e || window.event,
                        27 == e.keyCode && n.codemirror.getOption("fullScreen") && s(n)
                    }, !1);
                    var a, l;
                    if (t.spellChecker !== !1 ? (a = "spell-checker",
                    l = t.parsingConfig,
                    l.name = "gfm",
                    l.gitHubSpice = !1,
                    z({
                        codeMirrorInstance: F
                    })) : (a = t.parsingConfig,
                    a.name = "gfm",
                    a.gitHubSpice = !1),
                    this.codemirror = F.fromTextArea(e, {
                        mode: a,
                        backdrop: l,
                        theme: "paper",
                        tabSize: void 0 != t.tabSize ? t.tabSize : 2,
                        indentUnit: void 0 != t.tabSize ? t.tabSize : 2,
                        indentWithTabs: t.indentWithTabs !== !1,
                        lineNumbers: !1,
                        autofocus: t.autofocus === !0,
                        extraKeys: i,
                        lineWrapping: t.lineWrapping !== !1,
                        allowDropFileTypes: ["text/plain"],
                        placeholder: t.placeholder || e.getAttribute("placeholder") || "",
                        styleSelectedText: void 0 != t.styleSelectedText ? t.styleSelectedText : !0
                    }),
                    t.forceSync === !0) {
                        var c = this.codemirror;
                        c.on("change", function() {
                            c.save();
                        })
                    }
                    this.gui = {},
                    t.toolbar !== !1 && (this.gui.toolbar = this.createToolbar()),
                    t.status !== !1 && (this.gui.statusbar = this.createStatusbar()),
                    void 0 != t.autosave && t.autosave.enabled === !0 && this.autosave(),
                    this.gui.sideBySide = this.createSideBySide(),
                    this._rendered = this.element;
                    var u = this.codemirror;
                    setTimeout(function() {
                        u.refresh()
                    }
                    .bind(u), 0)
                }
            }
            ,
            B.prototype.autosave = function() {
                if (_()) {
                    var e = this;
                    if (void 0 == this.options.autosave.uniqueId || "" == this.options.autosave.uniqueId)
                        return void console.log("SimpleMDE: You must set a uniqueId to use the autosave feature");
                    null != e.element.form && void 0 != e.element.form && e.element.form.addEventListener("submit", function() {
                        localStorage.removeItem("smde_" + e.options.autosave.uniqueId)
                    }),
                    this.options.autosave.loaded !== !0 && ("string" == typeof localStorage.getItem("smde_" + this.options.autosave.uniqueId) && "" != localStorage.getItem("smde_" + this.options.autosave.uniqueId) && (this.codemirror.setValue(localStorage.getItem("smde_" + this.options.autosave.uniqueId)),
                    this.options.autosave.foundSavedValue = !0),
                    this.options.autosave.loaded = !0),
                    localStorage.setItem("smde_" + this.options.autosave.uniqueId, e.value());
                    var t = document.getElementById("autosaved");
                    if (null != t && void 0 != t && "" != t) {
                        var n = new Date
                          , r = n.getHours()
                          , i = n.getMinutes()
                          , o = "am"
                          , a = r;
                        a >= 12 && (a = r - 12,
                        o = "pm"),
                        0 == a && (a = 12),
                        i = 10 > i ? "0" + i : i,
                        t.innerHTML = "Autosaved: " + a + ":" + i + " " + o
                    }
                    this.autosaveTimeoutId = setTimeout(function() {
                        e.autosave()
                    }, this.options.autosave.delay || 1e4)
                } else
                    console.log("SimpleMDE: localStorage not available, cannot autosave")
            }
            ,
            B.prototype.clearAutosavedValue = function() {
                if (_()) {
                    if (void 0 == this.options.autosave || void 0 == this.options.autosave.uniqueId || "" == this.options.autosave.uniqueId)
                        return void console.log("SimpleMDE: You must set a uniqueId to clear the autosave value");
                    localStorage.removeItem("smde_" + this.options.autosave.uniqueId)
                } else
                    console.log("SimpleMDE: localStorage not available, cannot autosave")
            }
            ,
            B.prototype.createSideBySide = function() {
                var e = this.codemirror
                  , t = e.getWrapperElement()
                  , n = t.nextSibling;
                n && /editor-preview-side/.test(n.className) || (n = document.createElement("div"),
                n.className = "editor-preview-side",
                t.parentNode.insertBefore(n, t.nextSibling));
                var r = !1
                  , i = !1;
                return e.on("scroll", function(e) {
                    if (r)
                        return void (r = !1);
                    i = !0;
                    var t = e.getScrollInfo().height - e.getScrollInfo().clientHeight
                      , o = parseFloat(e.getScrollInfo().top) / t
                      , a = (n.scrollHeight - n.clientHeight) * o;
                    n.scrollTop = a
                }),
                n.onscroll = function() {
                    if (i)
                        return void (i = !1);
                    r = !0;
                    var t = n.scrollHeight - n.clientHeight
                      , o = parseFloat(n.scrollTop) / t
                      , a = (e.getScrollInfo().height - e.getScrollInfo().clientHeight) * o;
                    e.scrollTo(0, a)
                }
                ,
                n
            }
            ,
            B.prototype.createToolbar = function(e) {
                if (e = e || this.options.toolbar,
                e && 0 !== e.length) {
                    var t;
                    for (t = 0; t < e.length; t++)
                        void 0 != K[e[t]] && (e[t] = K[e[t]]);
                    var n = document.createElement("div");
                    n.className = "editor-toolbar";
                    var r = this
                      , a = {};
                    for (r.toolbar = e,
                    t = 0; t < e.length; t++)
                        if (("guide" != e[t].name || r.options.toolbarGuideIcon !== !1) && !(r.options.hideIcons && -1 != r.options.hideIcons.indexOf(e[t].name) || ("fullscreen" == e[t].name || "side-by-side" == e[t].name) && $())) {
                            if ("|" === e[t]) {
                                for (var s = !1, c = t + 1; c < e.length; c++)
                                    "|" === e[c] || r.options.hideIcons && -1 != r.options.hideIcons.indexOf(e[c].name) || (s = !0);
                                if (!s)
                                    continue
                            }
                            !function(e) {
                                var t;
                                t = "|" === e ? o() : i(e, r.options.toolbarTips, r.options.shortcuts),
                                e.action && ("function" == typeof e.action ? t.onclick = function(t) {
                                    t.preventDefault(),
                                    e.action(r)
                                }
                                : "string" == typeof e.action && (t.href = e.action,
                                t.target = "_blank")),
                                a[e.name || e] = t,
                                n.appendChild(t)
                            }(e[t])
                        }
                    r.toolbarElements = a;
                    var u = this.codemirror;
                    u.on("cursorActivity", function() {
                        var e = l(u);
                        for (var t in a)
                            !function(t) {
                                var n = a[t];
                                e[t] ? n.className += " active" : "fullscreen" != t && "side-by-side" != t && (n.className = n.className.replace(/\s*active\s*/g, ""))
                            }(t)
                    });
                    var f = u.getWrapperElement();
                    return f.parentNode.insertBefore(n, f),
                    n
                }
            }
            ,
            B.prototype.createStatusbar = function(e) {
                e = e || this.options.status;
                var t = this.options
                  , n = this.codemirror;
                if (e && 0 !== e.length) {
                    var r, i, o, a = [];
                    for (r = 0; r < e.length; r++)
                        if (i = void 0,
                        o = void 0,
                        "object" == typeof e[r])
                            a.push({
                                className: e[r].className,
                                defaultValue: e[r].defaultValue,
                                onUpdate: e[r].onUpdate
                            });
                        else {
                            var l = e[r];
                            "words" === l ? (o = function(e) {
                                e.innerHTML = W(n.getValue())
                            }
                            ,
                            i = function(e) {
                                e.innerHTML = W(n.getValue())
                            }
                            ) : "lines" === l ? (o = function(e) {
                                e.innerHTML = n.lineCount()
                            }
                            ,
                            i = function(e) {
                                e.innerHTML = n.lineCount()
                            }
                            ) : "cursor" === l ? (o = function(e) {
                                e.innerHTML = "0:0"
                            }
                            ,
                            i = function(e) {
                                var t = n.getCursor();
                                e.innerHTML = t.line + ":" + t.ch
                            }
                            ) : "autosave" === l && (o = function(e) {
                                void 0 != t.autosave && t.autosave.enabled === !0 && e.setAttribute("id", "autosaved")
                            }
                            ),
                            a.push({
                                className: l,
                                defaultValue: o,
                                onUpdate: i
                            })
                        }
                    var s = document.createElement("div");
                    for (s.className = "editor-statusbar",
                    r = 0; r < a.length; r++) {
                        var c = a[r]
                          , u = document.createElement("span");
                        u.className = c.className,
                        "function" == typeof c.defaultValue && c.defaultValue(u),
                        "function" == typeof c.onUpdate && this.codemirror.on("update", function(e, t) {
                            return function() {
                                t.onUpdate(e)
                            }
                        }(u, c)),
                        s.appendChild(u)
                    }
                    var f = this.codemirror.getWrapperElement();
                    return f.parentNode.insertBefore(s, f.nextSibling),
                    s
                }
            }
            ,
            B.prototype.value = function(e) {
                return void 0 === e ? this.codemirror.getValue() : (this.codemirror.getDoc().setValue(e),
                this)
            }
            ,
            B.toggleBold = c,
            B.toggleItalic = u,
            B.toggleStrikethrough = f,
            B.toggleBlockquote = d,
            B.toggleHeadingSmaller = p,
            B.toggleHeadingBigger = m,
            B.toggleHeading1 = g,
            B.toggleHeading2 = v,
            B.toggleHeading3 = y,
            B.toggleCodeBlock = h,
            B.toggleUnorderedList = x,
            B.toggleOrderedList = b,
            B.cleanBlock = w,
            B.drawLink = k,
            B.drawImage = S,
            B.drawTable = C,
            B.drawHorizontalRule = L,
            B.undo = T,
            B.redo = M,
            B.togglePreview = A,
            B.toggleSideBySide = N,
            B.toggleFullScreen = s,
            B.prototype.toggleBold = function() {
                c(this)
            }
            ,
            B.prototype.toggleItalic = function() {
                u(this)
            }
            ,
            B.prototype.toggleStrikethrough = function() {
                f(this)
            }
            ,
            B.prototype.toggleBlockquote = function() {
                d(this)
            }
            ,
            B.prototype.toggleHeadingSmaller = function() {
                p(this)
            }
            ,
            B.prototype.toggleHeadingBigger = function() {
                m(this)
            }
            ,
            B.prototype.toggleHeading1 = function() {
                g(this)
            }
            ,
            B.prototype.toggleHeading2 = function() {
                v(this)
            }
            ,
            B.prototype.toggleHeading3 = function() {
                y(this)
            }
            ,
            B.prototype.toggleCodeBlock = function() {
                h(this)
            }
            ,
            B.prototype.toggleUnorderedList = function() {
                x(this)
            }
            ,
            B.prototype.toggleOrderedList = function() {
                b(this)
            }
            ,
            B.prototype.cleanBlock = function() {
                w(this)
            }
            ,
            B.prototype.drawLink = function() {
                k(this)
            }
            ,
            B.prototype.drawImage = function() {
                S(this)
            }
            ,
            B.prototype.drawTable = function() {
                C(this)
            }
            ,
            B.prototype.drawHorizontalRule = function() {
                L(this)
            }
            ,
            B.prototype.undo = function() {
                T(this)
            }
            ,
            B.prototype.redo = function() {
                M(this)
            }
            ,
            B.prototype.togglePreview = function() {
                A(this)
            }
            ,
            B.prototype.toggleSideBySide = function() {
                N(this)
            }
            ,
            B.prototype.toggleFullScreen = function() {
                s(this)
            }
            ,
            B.prototype.isPreviewActive = function() {
                var e = this.codemirror
                  , t = e.getWrapperElement()
                  , n = t.lastChild;
                return /editor-preview-active/.test(n.className)
            }
            ,
            B.prototype.isSideBySideActive = function() {
                var e = this.codemirror
                  , t = e.getWrapperElement()
                  , n = t.nextSibling;
                return /editor-preview-active-side/.test(n.className)
            }
            ,
            B.prototype.isFullscreenActive = function() {
                var e = this.codemirror;
                return e.getOption("fullScreen")
            }
            ,
            B.prototype.getState = function() {
                var e = this.codemirror;
                return l(e)
            }
            ,
            B.prototype.toTextArea = function() {
                var e = this.codemirror
                  , t = e.getWrapperElement();
                t.parentNode && (this.gui.toolbar && t.parentNode.removeChild(this.gui.toolbar),
                this.gui.statusbar && t.parentNode.removeChild(this.gui.statusbar),
                this.gui.sideBySide && t.parentNode.removeChild(this.gui.sideBySide)),
                e.toTextArea(),
                this.autosaveTimeoutId && (clearTimeout(this.autosaveTimeoutId),
                this.autosaveTimeoutId = void 0,
                this.clearAutosavedValue())
            }
            ,
            t.exports = B
        }
        , {
            "./codemirror/tablist": 19,
            codemirror: 10,
            "codemirror-spell-checker": 4,
            "codemirror/addon/display/fullscreen.js": 5,
            "codemirror/addon/display/placeholder.js": 6,
            "codemirror/addon/edit/continuelist.js": 7,
            "codemirror/addon/mode/overlay.js": 8,
            "codemirror/addon/selection/mark-selection.js": 9,
            "codemirror/mode/gfm/gfm.js": 11,
            "codemirror/mode/markdown/markdown.js": 12,
            "codemirror/mode/xml/xml.js": 14,
            marked: 17
        }]
    }, {}, [20])(20)
}),
function() {
    var $, BorderDropHint, DragAndDropHandler, DragElement, FolderElement, GhostDropHint, JqTreeWidget, MouseWidget, Node, NodeElement, Position, SaveStateHandler, SelectNodeHandler, SimpleWidget, TRIANGLE_DOWN, TRIANGLE_RIGHT, Tree, html_escape, indexOf, json_escapable, json_meta, json_quote, json_str, __slice = [].slice, __hasProp = {}.hasOwnProperty, __extends = function(child, parent) {
        function ctor() {
            this.constructor = child
        }
        for (var key in parent)
            __hasProp.call(parent, key) && (child[key] = parent[key]);
        return ctor.prototype = parent.prototype,
        child.prototype = new ctor,
        child.__super__ = parent.prototype,
        child
    };
    $ = this.jQuery,
    SimpleWidget = function() {
        function SimpleWidget(el, options) {
            this.$el = $(el),
            this.options = $.extend({}, this.defaults, options)
        }
        return SimpleWidget.prototype.defaults = {},
        SimpleWidget.prototype.destroy = function() {
            return this._deinit()
        }
        ,
        SimpleWidget.prototype._init = function() {
            return null
        }
        ,
        SimpleWidget.prototype._deinit = function() {
            return null
        }
        ,
        SimpleWidget.register = function(widget_class, widget_name) {
            var callFunction, createWidget, destroyWidget, getDataKey;
            return getDataKey = function() {
                return "simple_widget_" + widget_name
            }
            ,
            createWidget = function($el, options) {
                var data_key, el, widget, _i, _len;
                for (data_key = getDataKey(),
                _i = 0,
                _len = $el.length; _len > _i; _i++)
                    el = $el[_i],
                    widget = new widget_class(el,options),
                    $.data(el, data_key) || $.data(el, data_key, widget),
                    widget._init();
                return $el
            }
            ,
            destroyWidget = function($el) {
                var data_key, el, widget, _i, _len, _results;
                for (data_key = getDataKey(),
                _results = [],
                _i = 0,
                _len = $el.length; _len > _i; _i++)
                    el = $el[_i],
                    widget = $.data(el, data_key),
                    widget && widget instanceof SimpleWidget && widget.destroy(),
                    _results.push($.removeData(el, data_key));
                return _results
            }
            ,
            callFunction = function($el, function_name, args) {
                var el, result, widget, widget_function, _i, _len;
                for (result = null,
                _i = 0,
                _len = $el.length; _len > _i; _i++)
                    el = $el[_i],
                    widget = $.data(el, getDataKey()),
                    widget && widget instanceof SimpleWidget && (widget_function = widget[function_name],
                    widget_function && "function" == typeof widget_function && (result = widget_function.apply(widget, args)));
                return result
            }
            ,
            $.fn[widget_name] = function() {
                var $el, args, argument1, function_name, options;
                return argument1 = arguments[0],
                args = 2 <= arguments.length ? __slice.call(arguments, 1) : [],
                $el = this,
                void 0 === argument1 || "object" == typeof argument1 ? (options = argument1,
                createWidget($el, options)) : "string" == typeof argument1 && "_" !== argument1[0] ? (function_name = argument1,
                "destroy" === function_name ? destroyWidget($el) : callFunction($el, function_name, args)) : void 0
            }
        }
        ,
        SimpleWidget
    }(),
    this.SimpleWidget = SimpleWidget,
    MouseWidget = function(_super) {
        function MouseWidget() {
            return MouseWidget.__super__.constructor.apply(this, arguments)
        }
        return __extends(MouseWidget, _super),
        MouseWidget.is_mouse_handled = !1,
        MouseWidget.prototype._init = function() {
            return this.$el.bind("mousedown.mousewidget", $.proxy(this._mouseDown, this)),
            this.is_mouse_started = !1,
            this.mouse_delay = 0,
            this._mouse_delay_timer = null,
            this._is_mouse_delay_met = !0
        }
        ,
        MouseWidget.prototype._deinit = function() {
            var $document;
            return this.$el.unbind("mousedown.mousewidget"),
            $document = $(document),
            $document.unbind("mousemove.mousewidget"),
            $document.unbind("mouseup.mousewidget")
        }
        ,
        MouseWidget.prototype._mouseDown = function(e) {
            var $document;
            if (!MouseWidget.is_mouse_handled && (this.is_mouse_started || this._mouseUp(e),
            1 === e.which && this._mouseCapture(e)))
                return this.mouse_down_event = e,
                $document = $(document),
                $document.bind("mousemove.mousewidget", $.proxy(this._mouseMove, this)),
                $document.bind("mouseup.mousewidget", $.proxy(this._mouseUp, this)),
                this.mouse_delay && this._startMouseDelayTimer(),
                e.preventDefault(),
                this.is_mouse_handled = !0,
                !0
        }
        ,
        MouseWidget.prototype._startMouseDelayTimer = function() {
            var _this = this;
            return this._mouse_delay_timer && clearTimeout(this._mouse_delay_timer),
            this._mouse_delay_timer = setTimeout(function() {
                return _this._is_mouse_delay_met = !0
            }, this.mouse_delay),
            this._is_mouse_delay_met = !1
        }
        ,
        MouseWidget.prototype._mouseMove = function(e) {
            return this.is_mouse_started ? (this._mouseDrag(e),
            e.preventDefault()) : this.mouse_delay && !this._is_mouse_delay_met ? !0 : (this.is_mouse_started = this._mouseStart(this.mouse_down_event) !== !1,
            this.is_mouse_started ? this._mouseDrag(e) : this._mouseUp(e),
            !this.is_mouse_started)
        }
        ,
        MouseWidget.prototype._mouseUp = function(e) {
            var $document;
            return $document = $(document),
            $document.unbind("mousemove.mousewidget"),
            $document.unbind("mouseup.mousewidget"),
            this.is_mouse_started && (this.is_mouse_started = !1,
            this._mouseStop(e)),
            !1
        }
        ,
        MouseWidget.prototype._mouseCapture = function() {
            return !0
        }
        ,
        MouseWidget.prototype._mouseStart = function() {
            return null
        }
        ,
        MouseWidget.prototype._mouseDrag = function() {
            return null
        }
        ,
        MouseWidget.prototype._mouseStop = function() {
            return null
        }
        ,
        MouseWidget
    }(SimpleWidget),
    this.Tree = {},
    $ = this.jQuery,
    indexOf = function(array, item) {
        var i, value, _i, _len;
        if (array.indexOf)
            return array.indexOf(item);
        for (i = _i = 0,
        _len = array.length; _len > _i; i = ++_i)
            if (value = array[i],
            value === item)
                return i;
        return -1
    }
    ,
    this.Tree.indexOf = indexOf,
    null != this.JSON && null != this.JSON.stringify && "function" == typeof this.JSON.stringify || (json_escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
    json_meta = {
        "\b": "\\b",
        "	": "\\t",
        "\n": "\\n",
        "\f": "\\f",
        "\r": "\\r",
        '"': '\\"',
        "\\": "\\\\"
    },
    json_quote = function(string) {
        return json_escapable.lastIndex = 0,
        json_escapable.test(string) ? '"' + string.replace(json_escapable, function(a) {
            var c;
            return c = json_meta[a],
            "string" == typeof c ? c : "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
        }) + '"' : '"' + string + '"'
    }
    ,
    json_str = function(key, holder) {
        var i, k, partial, v, value, _i, _len;
        switch (value = holder[key],
        typeof value) {
        case "string":
            return json_quote(value);
        case "number":
            return isFinite(value) ? String(value) : "null";
        case "boolean":
        case "null":
            return String(value);
        case "object":
            if (!value)
                return "null";
            if (partial = [],
            "[object Array]" === Object.prototype.toString.apply(value)) {
                for (i = _i = 0,
                _len = value.length; _len > _i; i = ++_i)
                    v = value[i],
                    partial[i] = json_str(i, value) || "null";
                return 0 === partial.length ? "[]" : "[" + partial.join(",") + "]"
            }
            for (k in value)
                Object.prototype.hasOwnProperty.call(value, k) && (v = json_str(k, value),
                v && partial.push(json_quote(k) + ":" + v));
            return 0 === partial.length ? "{}" : "{" + partial.join(",") + "}"
        }
    }
    ,
    null == this.JSON && (this.JSON = {}),
    this.JSON.stringify = function(value) {
        return json_str("", {
            "": value
        })
    }
    ),
    html_escape = function(string) {
        return ("" + string).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#x27;").replace(/\//g, "&#x2F;")
    }
    ,
    Position = {
        getName: function(position) {
            return Position.strings[position - 1]
        },
        nameToIndex: function(name) {
            var i, _i, _ref;
            for (i = _i = 1,
            _ref = Position.strings.length; _ref >= 1 ? _ref >= _i : _i >= _ref; i = _ref >= 1 ? ++_i : --_i)
                if (Position.strings[i - 1] === name)
                    return i;
            return 0
        }
    },
    Position.BEFORE = 1,
    Position.AFTER = 2,
    Position.INSIDE = 3,
    Position.NONE = 4,
    Position.strings = ["before", "after", "inside", "none"],
    this.Tree.Position = Position,
    Node = function() {
        function Node(o) {
            this.setData(o),
            this.children = [],
            this.parent = null
        }
        return Node.prototype.setData = function(o) {
            var key, value, _results;
            if ("object" != typeof o)
                return this.name = o;
            _results = [];
            for (key in o)
                value = o[key],
                "label" === key ? _results.push(this.name = value) : _results.push(this[key] = value);
            return _results
        }
        ,
        Node.prototype.initFromData = function(data) {
            var addChildren, addNode, _this = this;
            return addNode = function(node_data) {
                return _this.setData(node_data),
                node_data.children ? addChildren(node_data.children) : void 0
            }
            ,
            addChildren = function(children_data) {
                var child, node, _i, _len;
                for (_i = 0,
                _len = children_data.length; _len > _i; _i++)
                    child = children_data[_i],
                    node = new Node(""),
                    node.initFromData(child),
                    _this.addChild(node);
                return null
            }
            ,
            addNode(data),
            null
        }
        ,
        Node.prototype.loadFromData = function(data) {
            var node, o, _i, _len;
            for (this.children = [],
            _i = 0,
            _len = data.length; _len > _i; _i++)
                o = data[_i],
                node = new Node(o),
                this.addChild(node),
                "object" == typeof o && o.children && node.loadFromData(o.children);
            return null
        }
        ,
        Node.prototype.addChild = function(node) {
            return this.children.push(node),
            node._setParent(this)
        }
        ,
        Node.prototype.addChildAtPosition = function(node, index) {
            return this.children.splice(index, 0, node),
            node._setParent(this)
        }
        ,
        Node.prototype._setParent = function(parent) {
            return this.parent = parent,
            this.tree = parent.tree,
            this.tree.addNodeToIndex(this)
        }
        ,
        Node.prototype.removeChild = function(node) {
            return this.children.splice(this.getChildIndex(node), 1),
            this.tree.removeNodeFromIndex(node)
        }
        ,
        Node.prototype.getChildIndex = function(node) {
            return $.inArray(node, this.children)
        }
        ,
        Node.prototype.hasChildren = function() {
            return 0 !== this.children.length
        }
        ,
        Node.prototype.isFolder = function() {
            return this.hasChildren() || this.load_on_demand
        }
        ,
        Node.prototype.iterate = function(callback) {
            var _iterate, _this = this;
            return _iterate = function(node, level) {
                var child, result, _i, _len, _ref;
                if (node.children) {
                    for (_ref = node.children,
                    _i = 0,
                    _len = _ref.length; _len > _i; _i++)
                        child = _ref[_i],
                        result = callback(child, level),
                        _this.hasChildren() && result && _iterate(child, level + 1);
                    return null
                }
            }
            ,
            _iterate(this, 0),
            null
        }
        ,
        Node.prototype.moveNode = function(moved_node, target_node, position) {
            return moved_node.isParentOf(target_node) ? void 0 : (moved_node.parent.removeChild(moved_node),
            position === Position.AFTER ? target_node.parent.addChildAtPosition(moved_node, target_node.parent.getChildIndex(target_node) + 1) : position === Position.BEFORE ? target_node.parent.addChildAtPosition(moved_node, target_node.parent.getChildIndex(target_node)) : position === Position.INSIDE ? target_node.addChildAtPosition(moved_node, 0) : void 0)
        }
        ,
        Node.prototype.getData = function() {
            var getDataFromNodes;
            return (getDataFromNodes = function(nodes) {
                var data, k, node, tmp_node, v, _i, _len;
                for (data = [],
                _i = 0,
                _len = nodes.length; _len > _i; _i++) {
                    node = nodes[_i],
                    tmp_node = {};
                    for (k in node)
                        v = node[k],
                        "parent" !== k && "children" !== k && "element" !== k && "tree" !== k && Object.prototype.hasOwnProperty.call(node, k) && (tmp_node[k] = v);
                    node.hasChildren() && (tmp_node.children = getDataFromNodes(node.children)),
                    data.push(tmp_node)
                }
                return data
            }
            )(this.children)
        }
        ,
        Node.prototype.getNodeByName = function(name) {
            var result;
            return result = null,
            this.iterate(function(node) {
                return node.name === name ? (result = node,
                !1) : !0
            }),
            result
        }
        ,
        Node.prototype.addAfter = function(node_info) {
            var child_index, node;
            return this.parent ? (node = new Node(node_info),
            child_index = this.parent.getChildIndex(this),
            this.parent.addChildAtPosition(node, child_index + 1),
            node) : null
        }
        ,
        Node.prototype.addBefore = function(node_info) {
            var child_index, node;
            return this.parent ? (node = new Node(node_info),
            child_index = this.parent.getChildIndex(this),
            this.parent.addChildAtPosition(node, child_index)) : null
        }
        ,
        Node.prototype.addParent = function(node_info) {
            var child, new_parent, original_parent, _i, _len, _ref;
            if (this.parent) {
                for (new_parent = new Node(node_info),
                new_parent._setParent(this.tree),
                original_parent = this.parent,
                _ref = original_parent.children,
                _i = 0,
                _len = _ref.length; _len > _i; _i++)
                    child = _ref[_i],
                    new_parent.addChild(child);
                return original_parent.children = [],
                original_parent.addChild(new_parent),
                new_parent
            }
            return null
        }
        ,
        Node.prototype.remove = function() {
            return this.parent ? (this.parent.removeChild(this),
            this.parent = null) : void 0
        }
        ,
        Node.prototype.append = function(node_info) {
            var node;
            return node = new Node(node_info),
            this.addChild(node),
            node
        }
        ,
        Node.prototype.prepend = function(node_info) {
            var node;
            return node = new Node(node_info),
            this.addChildAtPosition(node, 0),
            node
        }
        ,
        Node.prototype.isParentOf = function(node) {
            var parent;
            for (parent = node.parent; parent; ) {
                if (parent === this)
                    return !0;
                parent = parent.parent
            }
            return !1
        }
        ,
        Node
    }(),
    Tree = function(_super) {
        function Tree(o) {
            Tree.__super__.constructor.call(this, o, null, !0),
            this.id_mapping = {},
            this.tree = this
        }
        return __extends(Tree, _super),
        Tree.prototype.getNodeById = function(node_id) {
            return this.id_mapping[node_id]
        }
        ,
        Tree.prototype.addNodeToIndex = function(node) {
            return node.id ? this.id_mapping[node.id] = node : void 0
        }
        ,
        Tree.prototype.removeNodeFromIndex = function(node) {
            return node.id ? delete this.id_mapping[node.id] : void 0
        }
        ,
        Tree
    }(Node),
    this.Tree.Tree = Tree,
    TRIANGLE_RIGHT = "&#x25ba;",
    TRIANGLE_DOWN = "&#x25bc;",
    JqTreeWidget = function(_super) {
        function JqTreeWidget() {
            return JqTreeWidget.__super__.constructor.apply(this, arguments)
        }
        return __extends(JqTreeWidget, _super),
        JqTreeWidget.prototype.defaults = {
            autoOpen: !1,
            saveState: !1,
            dragAndDrop: !1,
            selectable: !1,
            onCanSelectNode: null,
            onSetStateFromStorage: null,
            onGetStateFromStorage: null,
            onCreateLi: null,
            onIsMoveHandle: null,
            onCanMove: null,
            onCanMoveTo: null,
            autoEscape: !0,
            dataUrl: null
        },
        JqTreeWidget.prototype.toggle = function(node) {
            return node.is_open ? this.closeNode(node) : this.openNode(node)
        }
        ,
        JqTreeWidget.prototype.getTree = function() {
            return this.tree
        }
        ,
        JqTreeWidget.prototype.selectNode = function(node, must_open_parents) {
            return this.select_node_handler.selectNode(node, must_open_parents)
        }
        ,
        JqTreeWidget.prototype.getSelectedNode = function() {
            return this.selected_node || !1
        }
        ,
        JqTreeWidget.prototype.toJson = function() {
            return JSON.stringify(this.tree.getData())
        }
        ,
        JqTreeWidget.prototype.loadData = function(data_or_url, parent_node, on_finished) {
            var data, data_url;
            return "string" == typeof data_or_url ? (data_url = data_or_url,
            this._loadDataFromServer(data_url, parent_node, on_finished)) : (data = data_or_url,
            this._loadData(data, parent_node),
            on_finished ? on_finished() : void 0)
        }
        ,
        JqTreeWidget.prototype._loadData = function(data, parent_node) {
            var child, subtree, _i, _len, _ref;
            if (this._triggerEvent("tree.load_data", {
                tree_data: data
            }),
            parent_node) {
                for (subtree = new Node(""),
                subtree._setParent(parent_node.tree),
                subtree.loadFromData(data),
                _ref = subtree.children,
                _i = 0,
                _len = _ref.length; _len > _i; _i++)
                    child = _ref[_i],
                    parent_node.addChild(child);
                this._refreshElements(parent_node.parent)
            } else
                this._initTree(data);
            return this.is_dragging ? this.dnd_handler.refreshHitAreas() : void 0
        }
        ,
        JqTreeWidget.prototype._loadDataFromServer = function(data_url, parent_node, on_finished) {
            var $li, folder_element, _this = this;
            if (data_url)
                return parent_node ? (folder_element = new FolderElement(parent_node,this),
                $li = folder_element.getLi(),
                $li.addClass("jqtree-loading")) : $li = null,
                $.ajax({
                    url: data_url,
                    cache: !1,
                    success: function(response) {
                        var data;
                        return data = $.isArray(response) || "object" == typeof response ? response : $.parseJSON(response),
                        $li && $li.removeClass("loading"),
                        _this._loadData(data, parent_node),
                        on_finished ? on_finished() : void 0
                    }
                })
        }
        ,
        JqTreeWidget.prototype.getNodeById = function(node_id) {
            return this.tree.getNodeById(node_id)
        }
        ,
        JqTreeWidget.prototype.getNodeByName = function(name) {
            return this.tree.getNodeByName(name)
        }
        ,
        JqTreeWidget.prototype.openNode = function(node, skip_slide) {
            return this._openNode(node, skip_slide)
        }
        ,
        JqTreeWidget.prototype._openNode = function(node, skip_slide, on_finished) {
            var folder_element;
            return node.isFolder() ? node.load_on_demand ? this._loadFolderOnDemand(node, skip_slide, on_finished) : (folder_element = new FolderElement(node,this),
            folder_element.open(on_finished, skip_slide),
            this._saveState()) : void 0
        }
        ,
        JqTreeWidget.prototype._loadFolderOnDemand = function(node, skip_slide, on_finished) {
            var _this = this;
            return node.load_on_demand = !1,
            this.loadData(this._getDataUrl(node), node, function() {
                return _this._openNode(node, skip_slide, on_finished)
            })
        }
        ,
        JqTreeWidget.prototype.closeNode = function(node, skip_slide) {
            return node.isFolder() ? (new FolderElement(node,this).close(skip_slide),
            this._saveState()) : void 0
        }
        ,
        JqTreeWidget.prototype.isDragging = function() {
            return this.is_dragging
        }
        ,
        JqTreeWidget.prototype.refreshHitAreas = function() {
            return this.dnd_handler.refreshHitAreas()
        }
        ,
        JqTreeWidget.prototype.addNodeAfter = function(new_node_info, existing_node) {
            var new_node;
            return new_node = existing_node.addAfter(new_node_info),
            this._refreshElements(existing_node.parent),
            new_node
        }
        ,
        JqTreeWidget.prototype.addNodeBefore = function(new_node_info, existing_node) {
            var new_node;
            return new_node = existing_node.addBefore(new_node_info),
            this._refreshElements(existing_node.parent),
            new_node
        }
        ,
        JqTreeWidget.prototype.addParentNode = function(new_node_info, existing_node) {
            var new_node;
            return new_node = existing_node.addParent(new_node_info),
            this._refreshElements(new_node.parent),
            new_node
        }
        ,
        JqTreeWidget.prototype.removeNode = function(node) {
            var parent;
            return parent = node.parent,
            parent ? (node.remove(),
            this._refreshElements(parent.parent)) : void 0
        }
        ,
        JqTreeWidget.prototype.appendNode = function(new_node_info, parent_node) {
            var is_already_root_node, node;
            return parent_node || (parent_node = this.tree),
            is_already_root_node = parent_node.isFolder(),
            node = parent_node.append(new_node_info),
            is_already_root_node ? this._refreshElements(parent_node) : this._refreshElements(parent_node.parent),
            node
        }
        ,
        JqTreeWidget.prototype.prependNode = function(new_node_info, parent_node) {
            var node;
            return parent_node || (parent_node = this.tree),
            node = parent_node.prepend(new_node_info),
            this._refreshElements(parent_node),
            node
        }
        ,
        JqTreeWidget.prototype.updateNode = function(node, data) {
            return node.setData(data),
            this._refreshElements(node.parent),
            this.select_node_handler.selectCurrentNode()
        }
        ,
        JqTreeWidget.prototype.moveNode = function(node, target_node, position) {
            var position_index;
            return position_index = Position.nameToIndex(position),
            this.tree.moveNode(node, target_node, position_index),
            this._refreshElements()
        }
        ,
        JqTreeWidget.prototype.getStateFromStorage = function() {
            return this.save_state_handler.getStateFromStorage()
        }
        ,
        JqTreeWidget.prototype._init = function() {
            return JqTreeWidget.__super__._init.call(this),
            this.element = this.$el,
            this.selected_node = null,
            this.mouse_delay = 300,
            this.save_state_handler = new SaveStateHandler(this),
            this.select_node_handler = new SelectNodeHandler(this),
            this.dnd_handler = new DragAndDropHandler(this),
            this._initData(),
            this.element.click($.proxy(this._click, this)),
            this.element.bind("contextmenu", $.proxy(this._contextmenu, this))
        }
        ,
        JqTreeWidget.prototype._deinit = function() {
            return this.element.empty(),
            this.element.unbind(),
            this.tree = null,
            JqTreeWidget.__super__._deinit.call(this)
        }
        ,
        JqTreeWidget.prototype._initData = function() {
            return this.options.data ? this.loadData(this.options.data) : this.loadData(this._getDataUrl())
        }
        ,
        JqTreeWidget.prototype._getDataUrl = function(node) {
            var data_url;
            return data_url = this.options.dataUrl || this.element.data("url"),
            $.isFunction(data_url) ? data_url(node) : (node && (data_url += "?node=" + node.id),
            data_url)
        }
        ,
        JqTreeWidget.prototype._initTree = function(data) {
            return this.tree = new Tree,
            this.tree.loadFromData(data),
            this._openNodes(),
            this._refreshElements(),
            this.select_node_handler.selectCurrentNode(),
            this._triggerEvent("tree.init")
        }
        ,
        JqTreeWidget.prototype._openNodes = function() {
            var max_level;
            if (!(this.options.saveState && this.save_state_handler.restoreState() || this.options.autoOpen === !1))
                return max_level = this.options.autoOpen === !0 ? -1 : parseInt(this.options.autoOpen),
                this.tree.iterate(function(node, level) {
                    return node.is_open = !0,
                    level !== max_level
                })
        }
        ,
        JqTreeWidget.prototype._refreshElements = function(from_node) {
            var $element, createFolderLi, createLi, createNodeLi, createUl, doCreateDomElements, escapeIfNecessary, is_root_node, node_element, _this = this;
            return null == from_node && (from_node = null),
            escapeIfNecessary = function(value) {
                return _this.options.autoEscape ? html_escape(value) : value
            }
            ,
            createUl = function(is_root_node) {
                var class_string;
                return class_string = is_root_node ? "jqtree-tree" : "",
                $('<ul class="jqtree_common ' + class_string + '"></ul>')
            }
            ,
            createLi = function(node) {
                var $li;
                return $li = node.isFolder() ? createFolderLi(node) : createNodeLi(node),
                _this.options.onCreateLi && _this.options.onCreateLi(node, $li),
                $li
            }
            ,
            createNodeLi = function(node) {
                var escaped_name;
                return escaped_name = escapeIfNecessary(node.name),
                $('<li class="jqtree_common"><div><span class="jqtree-title jqtree_common">' + escaped_name + "</span></div></li>")
            }
            ,
            createFolderLi = function(node) {
                var button_char, button_classes, escaped_name, folder_classes, getButtonClasses, getFolderClasses;
                return getButtonClasses = function() {
                    var classes;
                    return classes = ["jqtree-toggler"],
                    node.is_open || classes.push("jqtree-closed"),
                    classes.join(" ")
                }
                ,
                getFolderClasses = function() {
                    var classes;
                    return classes = ["jqtree-folder"],
                    node.is_open || classes.push("jqtree-closed"),
                    classes.join(" ")
                }
                ,
                button_classes = getButtonClasses(),
                folder_classes = getFolderClasses(),
                escaped_name = escapeIfNecessary(node.name),
                button_char = node.is_open ? TRIANGLE_DOWN : TRIANGLE_RIGHT,
                $('<li class="jqtree_common ' + folder_classes + '"><div><a class="jqtree_common ' + button_classes + '">' + button_char + '</a><span class="jqtree_common jqtree-title">' + escaped_name + "</span></div></li>")
            }
            ,
            doCreateDomElements = function($element, children, is_root_node) {
                var $li, $ul, child, _i, _len;
                for ($ul = createUl(is_root_node),
                $element.append($ul),
                _i = 0,
                _len = children.length; _len > _i; _i++)
                    child = children[_i],
                    $li = createLi(child),
                    $ul.append($li),
                    child.element = $li[0],
                    $li.data("node", child),
                    child.hasChildren() && doCreateDomElements($li, child.children, !1, child.is_open);
                return null
            }
            ,
            from_node && from_node.parent ? (is_root_node = !1,
            node_element = this._getNodeElementForNode(from_node),
            node_element.getUl().remove(),
            $element = node_element.$element) : (from_node = this.tree,
            $element = this.element,
            $element.empty(),
            is_root_node = !0),
            doCreateDomElements($element, from_node.children, is_root_node, is_root_node),
            this._triggerEvent("tree.refresh")
        }
        ,
        JqTreeWidget.prototype._click = function(e) {
            var $target, node;
            if (!e.ctrlKey)
                if ($target = $(e.target),
                $target.is(".jqtree-toggler")) {
                    if (node = this._getNode($target))
                        return this.toggle(node),
                        e.preventDefault(),
                        e.stopPropagation()
                } else if (($target.is("div") || $target.is("span")) && (node = this._getNode($target)))
                    return this._triggerEvent("tree.click", {
                        node: node
                    }),
                    this.selectNode(node)
        }
        ,
        JqTreeWidget.prototype._getNode = function($element) {
            var $li;
            return $li = $element.closest("li"),
            0 === $li.length ? null : $li.data("node")
        }
        ,
        JqTreeWidget.prototype._getNodeElementForNode = function(node) {
            return node.isFolder() ? new FolderElement(node,this) : new NodeElement(node,this)
        }
        ,
        JqTreeWidget.prototype._getNodeElement = function($element) {
            var node;
            return node = this._getNode($element),
            node ? this._getNodeElementForNode(node) : null
        }
        ,
        JqTreeWidget.prototype._contextmenu = function(e) {
            var $div, node;
            return $div = $(e.target).closest("ul.jqtree-tree div"),
            $div.length && (node = this._getNode($div)) ? (e.preventDefault(),
            e.stopPropagation(),
            this._triggerEvent("tree.contextmenu", {
                node: node,
                click_event: e
            }),
            !1) : void 0
        }
        ,
        JqTreeWidget.prototype._saveState = function() {
            return this.options.saveState ? this.save_state_handler.saveState() : void 0
        }
        ,
        JqTreeWidget.prototype._mouseCapture = function(event) {
            return this.options.dragAndDrop ? this.dnd_handler.mouseCapture(event) : !1
        }
        ,
        JqTreeWidget.prototype._mouseStart = function(event) {
            return this.options.dragAndDrop ? this.dnd_handler.mouseStart(event) : !1
        }
        ,
        JqTreeWidget.prototype._mouseDrag = function(event) {
            return this.options.dragAndDrop ? this.dnd_handler.mouseDrag(event) : !1
        }
        ,
        JqTreeWidget.prototype._mouseStop = function() {
            return this.options.dragAndDrop ? this.dnd_handler.mouseStop() : !1
        }
        ,
        JqTreeWidget.prototype._triggerEvent = function(event_name, values) {
            var event;
            return event = $.Event(event_name),
            $.extend(event, values),
            this.element.trigger(event),
            event
        }
        ,
        JqTreeWidget.prototype.testGenerateHitAreas = function(moving_node) {
            return this.dnd_handler.current_item = this._getNodeElementForNode(moving_node),
            this.dnd_handler.generateHitAreas(),
            this.dnd_handler.hit_areas
        }
        ,
        JqTreeWidget
    }(MouseWidget),
    SimpleWidget.register(JqTreeWidget, "tree"),
    GhostDropHint = function() {
        function GhostDropHint(node, $element, position) {
            this.$element = $element,
            this.node = node,
            this.$ghost = $('<li class="jqtree_common jqtree-ghost"><span class="jqtree_common jqtree-circle"></span><span class="jqtree_common jqtree-line"></span></li>'),
            position === Position.AFTER ? this.moveAfter() : position === Position.BEFORE ? this.moveBefore() : position === Position.INSIDE && (node.isFolder() && node.is_open ? this.moveInsideOpenFolder() : this.moveInside())
        }
        return GhostDropHint.prototype.remove = function() {
            return this.$ghost.remove()
        }
        ,
        GhostDropHint.prototype.moveAfter = function() {
            return this.$element.after(this.$ghost)
        }
        ,
        GhostDropHint.prototype.moveBefore = function() {
            return this.$element.before(this.$ghost)
        }
        ,
        GhostDropHint.prototype.moveInsideOpenFolder = function() {
            return $(this.node.children[0].element).before(this.$ghost)
        }
        ,
        GhostDropHint.prototype.moveInside = function() {
            return this.$element.after(this.$ghost),
            this.$ghost.addClass("jqtree-inside")
        }
        ,
        GhostDropHint
    }(),
    BorderDropHint = function() {
        function BorderDropHint($element) {
            var $div, width;
            $div = $element.children("div"),
            width = $element.width() - 4,
            this.$hint = $('<span class="jqtree-border"></span>'),
            $div.append(this.$hint),
            this.$hint.css({
                width: width,
                height: $div.height() - 4
            })
        }
        return BorderDropHint.prototype.remove = function() {
            return this.$hint.remove()
        }
        ,
        BorderDropHint
    }(),
    NodeElement = function() {
        function NodeElement(node, tree_widget) {
            this.init(node, tree_widget)
        }
        return NodeElement.prototype.init = function(node, tree_widget) {
            return this.node = node,
            this.tree_widget = tree_widget,
            this.$element = $(node.element)
        }
        ,
        NodeElement.prototype.getUl = function() {
            return this.$element.children("ul:first")
        }
        ,
        NodeElement.prototype.getSpan = function() {
            return this.$element.children("div").find("span.jqtree-title")
        }
        ,
        NodeElement.prototype.getLi = function() {
            return this.$element
        }
        ,
        NodeElement.prototype.addDropHint = function(position) {
            return position === Position.INSIDE ? new BorderDropHint(this.$element) : new GhostDropHint(this.node,this.$element,position)
        }
        ,
        NodeElement.prototype.select = function() {
            return this.getLi().addClass("jqtree-selected")
        }
        ,
        NodeElement.prototype.deselect = function() {
            return this.getLi().removeClass("jqtree-selected")
        }
        ,
        NodeElement
    }(),
    FolderElement = function(_super) {
        function FolderElement() {
            return FolderElement.__super__.constructor.apply(this, arguments)
        }
        return __extends(FolderElement, _super),
        FolderElement.prototype.open = function(on_finished, skip_slide) {
            var $button, doOpen, _this = this;
            return this.node.is_open ? void 0 : (this.node.is_open = !0,
            $button = this.getButton(),
            $button.removeClass("jqtree-closed"),
            $button.html(TRIANGLE_DOWN),
            doOpen = function() {
                return _this.getLi().removeClass("jqtree-closed"),
                on_finished && on_finished(),
                _this.tree_widget._triggerEvent("tree.open", {
                    node: _this.node
                })
            }
            ,
            skip_slide ? (this.getUl().show(),
            doOpen()) : this.getUl().slideDown("fast", doOpen))
        }
        ,
        FolderElement.prototype.close = function(skip_slide) {
            var $button, doClose, _this = this;
            return this.node.is_open ? (this.node.is_open = !1,
            $button = this.getButton(),
            $button.addClass("jqtree-closed"),
            $button.html(TRIANGLE_RIGHT),
            doClose = function() {
                return _this.getLi().addClass("jqtree-closed"),
                _this.tree_widget._triggerEvent("tree.close", {
                    node: _this.node
                })
            }
            ,
            skip_slide ? (this.getUl().hide(),
            doClose()) : this.getUl().slideUp("fast", doClose)) : void 0
        }
        ,
        FolderElement.prototype.getButton = function() {
            return this.$element.children("div").find("a.jqtree-toggler")
        }
        ,
        FolderElement.prototype.addDropHint = function(position) {
            return this.node.is_open || position !== Position.INSIDE ? new GhostDropHint(this.node,this.$element,position) : new BorderDropHint(this.$element)
        }
        ,
        FolderElement
    }(NodeElement),
    DragElement = function() {
        function DragElement(node, offset_x, offset_y, $tree) {
            this.offset_x = offset_x,
            this.offset_y = offset_y,
            this.$element = $('<span class="jqtree-title jqtree-dragging">' + node.name + "</span>"),
            this.$element.css("position", "absolute"),
            $tree.append(this.$element)
        }
        return DragElement.prototype.move = function(page_x, page_y) {
            return this.$element.offset({
                left: page_x - this.offset_x,
                top: page_y - this.offset_y
            })
        }
        ,
        DragElement.prototype.remove = function() {
            return this.$element.remove()
        }
        ,
        DragElement
    }(),
    SaveStateHandler = function() {
        function SaveStateHandler(tree_widget) {
            this.tree_widget = tree_widget
        }
        return SaveStateHandler.prototype.saveState = function() {
            return this.tree_widget.options.onSetStateFromStorage ? this.tree_widget.options.onSetStateFromStorage(this.getState()) : "undefined" != typeof localStorage && null !== localStorage ? localStorage.setItem(this.getCookieName(), this.getState()) : $.cookie ? $.cookie(this.getCookieName(), this.getState(), {
                path: "/"
            }) : void 0
        }
        ,
        SaveStateHandler.prototype.restoreState = function() {
            var state;
            return state = this.getStateFromStorage(),
            state ? (this.setState(state),
            !0) : !1
        }
        ,
        SaveStateHandler.prototype.getStateFromStorage = function() {
            return this.tree_widget.options.onGetStateFromStorage ? this.tree_widget.options.onGetStateFromStorage() : "undefined" != typeof localStorage && null !== localStorage ? localStorage.getItem(this.getCookieName()) : $.cookie ? $.cookie(this.getCookieName(), {
                path: "/"
            }) : null
        }
        ,
        SaveStateHandler.prototype.getState = function() {
            var open_nodes, selected_node;
            return open_nodes = [],
            this.tree_widget.tree.iterate(function(node) {
                return node.is_open && node.id && node.hasChildren() && open_nodes.push(node.id),
                !0
            }),
            selected_node = "",
            this.tree_widget.selected_node && (selected_node = this.tree_widget.selected_node.id),
            JSON.stringify({
                open_nodes: open_nodes,
                selected_node: selected_node
            })
        }
        ,
        SaveStateHandler.prototype.setState = function(state) {
            var data, open_nodes, selected_node_id, _this = this;
            return data = $.parseJSON(state),
            data ? (open_nodes = data.open_nodes,
            selected_node_id = data.selected_node,
            this.tree_widget.tree.iterate(function(node) {
                return node.id && node.hasChildren() && indexOf(open_nodes, node.id) >= 0 && (node.is_open = !0),
                selected_node_id && node.id === selected_node_id && (_this.tree_widget.selected_node = node),
                !0
            })) : void 0
        }
        ,
        SaveStateHandler.prototype.getCookieName = function() {
            return "string" == typeof this.tree_widget.options.saveState ? this.tree_widget.options.saveState : "tree"
        }
        ,
        SaveStateHandler
    }(),
    SelectNodeHandler = function() {
        function SelectNodeHandler(tree_widget) {
            this.tree_widget = tree_widget
        }
        return SelectNodeHandler.prototype.selectNode = function(node, must_open_parents) {
            var canSelect, parent, _this = this;
            if ((canSelect = function() {
                return _this.tree_widget.options.selectable ? _this.tree_widget.options.onCanSelectNode ? _this.tree_widget.options.onCanSelectNode(node) : !0 : !1
            }
            )()) {
                if (this.tree_widget.selected_node && (this.tree_widget._getNodeElementForNode(this.tree_widget.selected_node).deselect(),
                this.tree_widget.selected_node = null),
                node && (this.tree_widget._getNodeElementForNode(node).select(),
                this.tree_widget.selected_node = node,
                this.tree_widget._triggerEvent("tree.select", {
                    node: node
                }),
                must_open_parents))
                    for (parent = this.tree_widget.selected_node.parent; parent; )
                        parent.is_open || this.tree_widget.openNode(parent, !0),
                        parent = parent.parent;
                if (this.tree_widget.options.saveState)
                    return this.tree_widget.save_state_handler.saveState()
            }
        }
        ,
        SelectNodeHandler.prototype.selectCurrentNode = function() {
            var node_element;
            return this.tree_widget.selected_node && (node_element = this.tree_widget._getNodeElementForNode(this.tree_widget.selected_node)) ? node_element.select() : void 0
        }
        ,
        SelectNodeHandler
    }(),
    DragAndDropHandler = function() {
        function DragAndDropHandler(tree_widget) {
            this.tree_widget = tree_widget,
            this.hovered_area = null,
            this.$ghost = null,
            this.hit_areas = [],
            this.is_dragging = !1
        }
        return DragAndDropHandler.prototype.mouseCapture = function(event) {
            var $element, node_element;
            return $element = $(event.target),
            this.tree_widget.options.onIsMoveHandle && !this.tree_widget.options.onIsMoveHandle($element) ? null : (node_element = this.tree_widget._getNodeElement($element),
            node_element && this.tree_widget.options.onCanMove && (this.tree_widget.options.onCanMove(node_element.node) || (node_element = null)),
            this.current_item = node_element,
            null !== this.current_item)
        }
        ,
        DragAndDropHandler.prototype.mouseStart = function(event) {
            var offsetX, offsetY, _ref;
            return this.refreshHitAreas(),
            _ref = this.getOffsetFromEvent(event),
            offsetX = _ref[0],
            offsetY = _ref[1],
            this.drag_element = new DragElement(this.current_item.node,offsetX,offsetY,this.tree_widget.element),
            this.is_dragging = !0,
            this.current_item.$element.addClass("jqtree-moving"),
            !0
        }
        ,
        DragAndDropHandler.prototype.mouseDrag = function(event) {
            var area, position_name;
            return this.drag_element.move(event.pageX, event.pageY),
            area = this.findHoveredArea(event.pageX, event.pageY),
            area && this.tree_widget.options.onCanMoveTo && (position_name = Position.getName(area.position),
            this.tree_widget.options.onCanMoveTo(this.current_item.node, area.node, position_name) || (area = null)),
            area ? this.hovered_area !== area && (this.hovered_area = area,
            this.updateDropHint()) : (this.removeDropHint(),
            this.removeHover(),
            this.stopOpenFolderTimer()),
            !0
        }
        ,
        DragAndDropHandler.prototype.mouseStop = function() {
            return this.moveItem(),
            this.clear(),
            this.removeHover(),
            this.removeDropHint(),
            this.removeHitAreas(),
            this.current_item.$element.removeClass("jqtree-moving"),
            this.is_dragging = !1,
            !1
        }
        ,
        DragAndDropHandler.prototype.getOffsetFromEvent = function(event) {
            var element_offset;
            return element_offset = $(event.target).offset(),
            [event.pageX - element_offset.left, event.pageY - element_offset.top]
        }
        ,
        DragAndDropHandler.prototype.refreshHitAreas = function() {
            return this.removeHitAreas(),
            this.generateHitAreas()
        }
        ,
        DragAndDropHandler.prototype.removeHitAreas = function() {
            return this.hit_areas = []
        }
        ,
        DragAndDropHandler.prototype.clear = function() {
            return this.drag_element.remove(),
            this.drag_element = null
        }
        ,
        DragAndDropHandler.prototype.removeDropHint = function() {
            return this.previous_ghost ? this.previous_ghost.remove() : void 0
        }
        ,
        DragAndDropHandler.prototype.removeHover = function() {
            return this.hovered_area = null
        }
        ,
        DragAndDropHandler.prototype.generateHitAreas = function() {
            var addPosition, getTop, groupPositions, handleAfterOpenFolder, handleClosedFolder, handleFirstNode, handleNode, handleOpenFolder, hit_areas, last_top, positions, _this = this;
            return positions = [],
            last_top = 0,
            getTop = function($element) {
                return $element.offset().top
            }
            ,
            addPosition = function(node, position, top) {
                return positions.push({
                    top: top,
                    node: node,
                    position: position
                }),
                last_top = top
            }
            ,
            groupPositions = function(handle_group) {
                var group, position, previous_top, _i, _len;
                for (previous_top = -1,
                group = [],
                _i = 0,
                _len = positions.length; _len > _i; _i++)
                    position = positions[_i],
                    position.top !== previous_top && (group.length && handle_group(group, previous_top, position.top),
                    previous_top = position.top,
                    group = []),
                    group.push(position);
                return handle_group(group, previous_top, _this.tree_widget.element.offset().top + _this.tree_widget.element.height())
            }
            ,
            handleNode = function(node, next_node, $element) {
                var top;
                return top = getTop($element),
                node === _this.current_item.node ? addPosition(node, Position.NONE, top) : addPosition(node, Position.INSIDE, top),
                next_node === _this.current_item.node || node === _this.current_item.node ? addPosition(node, Position.NONE, top) : addPosition(node, Position.AFTER, top)
            }
            ,
            handleOpenFolder = function(node, $element) {
                return node === _this.current_item.node ? !1 : (node.children[0] !== _this.current_item.node && addPosition(node, Position.INSIDE, getTop($element)),
                !0)
            }
            ,
            handleAfterOpenFolder = function(node, next_node) {
                return node === _this.current_item.node || next_node === _this.current_item.node ? addPosition(node, Position.NONE, last_top) : addPosition(node, Position.AFTER, last_top)
            }
            ,
            handleClosedFolder = function(node, next_node, $element) {
                var top;
                return top = getTop($element),
                node === _this.current_item.node ? addPosition(node, Position.NONE, top) : (addPosition(node, Position.INSIDE, top),
                next_node !== _this.current_item.node ? addPosition(node, Position.AFTER, top) : void 0)
            }
            ,
            handleFirstNode = function(node) {
                return node !== _this.current_item.node ? addPosition(node, Position.BEFORE, getTop($(node.element))) : void 0
            }
            ,
            this.iterateVisibleNodes(handleNode, handleOpenFolder, handleClosedFolder, handleAfterOpenFolder, handleFirstNode),
            hit_areas = [],
            groupPositions(function(positions_in_group, top, bottom) {
                var area_height, area_top, position, _i, _len;
                for (area_height = (bottom - top) / positions_in_group.length,
                area_top = top,
                _i = 0,
                _len = positions_in_group.length; _len > _i; _i++)
                    position = positions_in_group[_i],
                    hit_areas.push({
                        top: area_top,
                        bottom: area_top + area_height,
                        node: position.node,
                        position: position.position
                    }),
                    area_top += area_height;
                return null
            }),
            this.hit_areas = hit_areas
        }
        ,
        DragAndDropHandler.prototype.iterateVisibleNodes = function(handle_node, handle_open_folder, handle_closed_folder, handle_after_open_folder, handle_first_node) {
            var is_first_node, iterate;
            return is_first_node = !0,
            (iterate = function(node, next_node) {
                var $element, child, children_length, i, must_iterate_inside, _i, _len, _ref;
                if (must_iterate_inside = (node.is_open || !node.element) && node.hasChildren(),
                node.element) {
                    if ($element = $(node.element),
                    !$element.is(":visible"))
                        return;
                    is_first_node && (handle_first_node(node, $element),
                    is_first_node = !1),
                    node.hasChildren() ? node.is_open ? handle_open_folder(node, $element) || (must_iterate_inside = !1) : handle_closed_folder(node, next_node, $element) : handle_node(node, next_node, $element)
                }
                if (must_iterate_inside) {
                    for (children_length = node.children.length,
                    _ref = node.children,
                    i = _i = 0,
                    _len = _ref.length; _len > _i; i = ++_i)
                        child = _ref[i],
                        i === children_length - 1 ? iterate(node.children[i], null) : iterate(node.children[i], node.children[i + 1]);
                    if (node.is_open)
                        return handle_after_open_folder(node, next_node, $element)
                }
            }
            )(this.tree_widget.tree)
        }
        ,
        DragAndDropHandler.prototype.findHoveredArea = function(x, y) {
            var area, high, low, mid, tree_offset;
            if (tree_offset = this.tree_widget.element.offset(),
            x < tree_offset.left || y < tree_offset.top || x > tree_offset.left + this.tree_widget.element.width() || y > tree_offset.top + this.tree_widget.element.height())
                return null;
            for (low = 0,
            high = this.hit_areas.length; high > low; )
                if (mid = low + high >> 1,
                area = this.hit_areas[mid],
                y < area.top)
                    high = mid;
                else {
                    if (!(y > area.bottom))
                        return area;
                    low = mid + 1
                }
            return null
        }
        ,
        DragAndDropHandler.prototype.updateDropHint = function() {
            var node, node_element;
            return this.stopOpenFolderTimer(),
            this.hovered_area ? (node = this.hovered_area.node,
            node.isFolder() && !node.is_open && this.hovered_area.position === Position.INSIDE && this.startOpenFolderTimer(node),
            this.removeDropHint(),
            node_element = this.tree_widget._getNodeElementForNode(this.hovered_area.node),
            this.previous_ghost = node_element.addDropHint(this.hovered_area.position)) : void 0
        }
        ,
        DragAndDropHandler.prototype.startOpenFolderTimer = function(folder) {
            var openFolder, _this = this;
            return openFolder = function() {
                return _this.tree_widget._openNode(folder, !1, function() {
                    return _this.refreshHitAreas(),
                    _this.updateDropHint()
                })
            }
            ,
            this.open_folder_timer = setTimeout(openFolder, 500)
        }
        ,
        DragAndDropHandler.prototype.stopOpenFolderTimer = function() {
            return this.open_folder_timer ? (clearTimeout(this.open_folder_timer),
            this.open_folder_timer = null) : void 0
        }
        ,
        DragAndDropHandler.prototype.moveItem = function() {
            var doMove, event, moved_node, position, previous_parent, target_node, _this = this;
            return this.hovered_area && this.hovered_area.position !== Position.NONE && (moved_node = this.current_item.node,
            target_node = this.hovered_area.node,
            position = this.hovered_area.position,
            previous_parent = moved_node.parent,
            position === Position.INSIDE && (this.hovered_area.node.is_open = !0),
            doMove = function() {
                return _this.tree_widget.tree.moveNode(moved_node, target_node, position),
                _this.tree_widget.element.empty(),
                _this.tree_widget._refreshElements()
            }
            ,
            event = this.tree_widget._triggerEvent("tree.move", {
                move_info: {
                    moved_node: moved_node,
                    target_node: target_node,
                    position: Position.getName(position),
                    previous_parent: previous_parent,
                    do_move: doMove
                }
            }),
            !event.isDefaultPrevented()) ? doMove() : void 0
        }
        ,
        DragAndDropHandler
    }(),
    this.Tree.Node = Node
}
.call(this),
"undefined" != typeof module && "undefined" != typeof exports && module.exports === exports && (module.exports = "ui.router"),
function(a, b, c) {
    "use strict";
    function d(a, b) {
        return M(new (M(function() {}, {
            prototype: a
        })), b)
    }
    function e(a) {
        return L(arguments, function(b) {
            b !== a && L(b, function(b, c) {
                a.hasOwnProperty(c) || (a[c] = b)
            })
        }),
        a
    }
    function f(a, b) {
        var c = [];
        for (var d in a.path) {
            if (a.path[d] !== b.path[d])
                break;
            c.push(a.path[d])
        }
        return c
    }
    function g(a) {
        if (Object.keys)
            return Object.keys(a);
        var c = [];
        return b.forEach(a, function(a, b) {
            c.push(b)
        }),
        c
    }
    function h(a, b) {
        if (Array.prototype.indexOf)
            return a.indexOf(b, Number(arguments[2]) || 0);
        var c = a.length >>> 0
          , d = Number(arguments[2]) || 0;
        for (d = 0 > d ? Math.ceil(d) : Math.floor(d),
        0 > d && (d += c); c > d; d++)
            if (d in a && a[d] === b)
                return d;
        return -1
    }
    function i(a, b, c, d) {
        var e, i = f(c, d), j = {}, k = [];
        for (var l in i)
            if (i[l].params && (e = g(i[l].params),
            e.length))
                for (var m in e)
                    h(k, e[m]) >= 0 || (k.push(e[m]),
                    j[e[m]] = a[e[m]]);
        return M({}, j, b)
    }
    function j(a, b, c) {
        if (!c) {
            c = [];
            for (var d in a)
                c.push(d)
        }
        for (var e = 0; e < c.length; e++) {
            var f = c[e];
            if (a[f] != b[f])
                return !1
        }
        return !0
    }
    function k(a, b) {
        var c = {};
        return L(a, function(a) {
            c[a] = b[a]
        }),
        c
    }
    function l(a) {
        var b = {}
          , c = Array.prototype.concat.apply(Array.prototype, Array.prototype.slice.call(arguments, 1));
        for (var d in a)
            -1 == h(c, d) && (b[d] = a[d]);
        return b
    }
    function m(a, b) {
        var c = K(a)
          , d = c ? [] : {};
        return L(a, function(a, e) {
            b(a, e) && (d[c ? d.length : e] = a)
        }),
        d
    }
    function n(a, b) {
        var c = K(a) ? [] : {};
        return L(a, function(a, d) {
            c[d] = b(a, d)
        }),
        c
    }
    function o(a, b) {
        var d = 1
          , f = 2
          , i = {}
          , j = []
          , k = i
          , m = M(a.when(i), {
            $$promises: i,
            $$values: i
        });
        this.study = function(i) {
            function n(a, c) {
                if (s[c] !== f) {
                    if (r.push(c),
                    s[c] === d)
                        throw r.splice(0, h(r, c)),
                        new Error("Cyclic dependency: " + r.join(" -> "));
                    if (s[c] = d,
                    I(a))
                        q.push(c, [function() {
                            return b.get(a)
                        }
                        ], j);
                    else {
                        var e = b.annotate(a);
                        L(e, function(a) {
                            a !== c && i.hasOwnProperty(a) && n(i[a], a)
                        }),
                        q.push(c, a, e)
                    }
                    r.pop(),
                    s[c] = f
                }
            }
            function o(a) {
                return J(a) && a.then && a.$$promises
            }
            if (!J(i))
                throw new Error("'invocables' must be an object");
            var p = g(i || {})
              , q = []
              , r = []
              , s = {};
            return L(i, n),
            i = r = s = null,
            function(d, f, g) {
                function h() {
                    --u || (v || e(t, f.$$values),
                    r.$$values = t,
                    r.$$promises = r.$$promises || !0,
                    delete r.$$inheritedValues,
                    n.resolve(t))
                }
                function i(a) {
                    r.$$failure = a,
                    n.reject(a)
                }
                function j(c, e, f) {
                    function j(a) {
                        l.reject(a),
                        i(a)
                    }
                    function k() {
                        if (!G(r.$$failure))
                            try {
                                l.resolve(b.invoke(e, g, t)),
                                l.promise.then(function(a) {
                                    t[c] = a,
                                    h()
                                }, j)
                            } catch (a) {
                                j(a)
                            }
                    }
                    var l = a.defer()
                      , m = 0;
                    L(f, function(a) {
                        s.hasOwnProperty(a) && !d.hasOwnProperty(a) && (m++,
                        s[a].then(function(b) {
                            t[a] = b,
                            --m || k()
                        }, j))
                    }),
                    m || k(),
                    s[c] = l.promise
                }
                if (o(d) && g === c && (g = f,
                f = d,
                d = null),
                d) {
                    if (!J(d))
                        throw new Error("'locals' must be an object")
                } else
                    d = k;
                if (f) {
                    if (!o(f))
                        throw new Error("'parent' must be a promise returned by $resolve.resolve()")
                } else
                    f = m;
                var n = a.defer()
                  , r = n.promise
                  , s = r.$$promises = {}
                  , t = M({}, d)
                  , u = 1 + q.length / 3
                  , v = !1;
                if (G(f.$$failure))
                    return i(f.$$failure),
                    r;
                f.$$inheritedValues && e(t, l(f.$$inheritedValues, p)),
                M(s, f.$$promises),
                f.$$values ? (v = e(t, l(f.$$values, p)),
                r.$$inheritedValues = l(f.$$values, p),
                h()) : (f.$$inheritedValues && (r.$$inheritedValues = l(f.$$inheritedValues, p)),
                f.then(h, i));
                for (var w = 0, x = q.length; x > w; w += 3)
                    d.hasOwnProperty(q[w]) ? h() : j(q[w], q[w + 1], q[w + 2]);
                return r
            }
        }
        ,
        this.resolve = function(a, b, c, d) {
            return this.study(a)(b, c, d)
        }
    }
    function p(a, b, c) {
        this.fromConfig = function(a, b, c) {
            return G(a.template) ? this.fromString(a.template, b) : G(a.templateUrl) ? this.fromUrl(a.templateUrl, b) : G(a.templateProvider) ? this.fromProvider(a.templateProvider, b, c) : null
        }
        ,
        this.fromString = function(a, b) {
            return H(a) ? a(b) : a
        }
        ,
        this.fromUrl = function(c, d) {
            return H(c) && (c = c(d)),
            null == c ? null : a.get(c, {
                cache: b,
                headers: {
                    Accept: "text/html"
                }
            }).then(function(a) {
                return a.data
            })
        }
        ,
        this.fromProvider = function(a, b, d) {
            return c.invoke(a, null, d || {
                params: b
            })
        }
    }
    function q(a, b, e) {
        function f(b, c, d, e) {
            if (q.push(b),
            o[b])
                return o[b];
            if (!/^\w+(-+\w+)*(?:\[\])?$/.test(b))
                throw new Error("Invalid parameter name '" + b + "' in pattern '" + a + "'");
            if (p[b])
                throw new Error("Duplicate parameter name '" + b + "' in pattern '" + a + "'");
            return p[b] = new O.Param(b,c,d,e),
            p[b]
        }
        function g(a, b, c) {
            var d = ["", ""]
              , e = a.replace(/[\\\[\]\^$*+?.()|{}]/g, "\\$&");
            if (!b)
                return e;
            switch (c) {
            case !1:
                d = ["(", ")"];
                break;
            case !0:
                d = ["?(", ")?"];
                break;
            default:
                d = ["(" + c + "|", ")?"]
            }
            return e + d[0] + b + d[1]
        }
        function h(c, e) {
            var f, g, h, i, j;
            return f = c[2] || c[3],
            j = b.params[f],
            h = a.substring(m, c.index),
            g = e ? c[4] : c[4] || ("*" == c[1] ? ".*" : null),
            i = O.type(g || "string") || d(O.type("string"), {
                pattern: new RegExp(g)
            }),
            {
                id: f,
                regexp: g,
                segment: h,
                type: i,
                cfg: j
            }
        }
        b = M({
            params: {}
        }, J(b) ? b : {});
        var i, j = /([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g, k = /([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g, l = "^", m = 0, n = this.segments = [], o = e ? e.params : {}, p = this.params = e ? e.params.$$new() : new O.ParamSet, q = [];
        this.source = a;
        for (var r, s, t; (i = j.exec(a)) && (r = h(i, !1),
        !(r.segment.indexOf("?") >= 0)); )
            s = f(r.id, r.type, r.cfg, "path"),
            l += g(r.segment, s.type.pattern.source, s.squash),
            n.push(r.segment),
            m = j.lastIndex;
        t = a.substring(m);
        var u = t.indexOf("?");
        if (u >= 0) {
            var v = this.sourceSearch = t.substring(u);
            if (t = t.substring(0, u),
            this.sourcePath = a.substring(0, m + u),
            v.length > 0)
                for (m = 0; i = k.exec(v); )
                    r = h(i, !0),
                    s = f(r.id, r.type, r.cfg, "search"),
                    m = j.lastIndex
        } else
            this.sourcePath = a,
            this.sourceSearch = "";
        l += g(t) + (b.strict === !1 ? "/?" : "") + "$",
        n.push(t),
        this.regexp = new RegExp(l,b.caseInsensitive ? "i" : c),
        this.prefix = n[0],
        this.$$paramNames = q
    }
    function r(a) {
        M(this, a)
    }
    function s() {
        function a(a) {
            return null != a ? a.toString().replace(/\//g, "%2F") : a
        }
        function e(a) {
            return null != a ? a.toString().replace(/%2F/g, "/") : a
        }
        function f(a) {
            return this.pattern.test(a)
        }
        function i() {
            return {
                strict: t,
                caseInsensitive: p
            }
        }
        function j(a) {
            return H(a) || K(a) && H(a[a.length - 1])
        }
        function k() {
            for (; x.length; ) {
                var a = x.shift();
                if (a.pattern)
                    throw new Error("You cannot override a type's .pattern at runtime.");
                b.extend(v[a.name], o.invoke(a.def))
            }
        }
        function l(a) {
            M(this, a || {})
        }
        O = this;
        var o, p = !1, t = !0, u = !1, v = {}, w = !0, x = [], y = {
            string: {
                encode: a,
                decode: e,
                is: f,
                pattern: /[^\/]*/
            },
            "int": {
                encode: a,
                decode: function(a) {
                    return parseInt(a, 10)
                },
                is: function(a) {
                    return G(a) && this.decode(a.toString()) === a
                },
                pattern: /\d+/
            },
            bool: {
                encode: function(a) {
                    return a ? 1 : 0
                },
                decode: function(a) {
                    return 0 !== parseInt(a, 10)
                },
                is: function(a) {
                    return a === !0 || a === !1
                },
                pattern: /0|1/
            },
            date: {
                encode: function(a) {
                    return this.is(a) ? [a.getFullYear(), ("0" + (a.getMonth() + 1)).slice(-2), ("0" + a.getDate()).slice(-2)].join("-") : c
                },
                decode: function(a) {
                    if (this.is(a))
                        return a;
                    var b = this.capture.exec(a);
                    return b ? new Date(b[1],b[2] - 1,b[3]) : c
                },
                is: function(a) {
                    return a instanceof Date && !isNaN(a.valueOf())
                },
                equals: function(a, b) {
                    return this.is(a) && this.is(b) && a.toISOString() === b.toISOString()
                },
                pattern: /[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,
                capture: /([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/
            },
            json: {
                encode: b.toJson,
                decode: b.fromJson,
                is: b.isObject,
                equals: b.equals,
                pattern: /[^\/]*/
            },
            any: {
                encode: b.identity,
                decode: b.identity,
                is: b.identity,
                equals: b.equals,
                pattern: /.*/
            }
        };
        s.$$getDefaultValue = function(a) {
            if (!j(a.value))
                return a.value;
            if (!o)
                throw new Error("Injectable functions cannot be called at configuration time");
            return o.invoke(a.value)
        }
        ,
        this.caseInsensitive = function(a) {
            return G(a) && (p = a),
            p
        }
        ,
        this.strictMode = function(a) {
            return G(a) && (t = a),
            t
        }
        ,
        this.defaultSquashPolicy = function(a) {
            if (!G(a))
                return u;
            if (a !== !0 && a !== !1 && !I(a))
                throw new Error("Invalid squash policy: " + a + ". Valid policies: false, true, arbitrary-string");
            return u = a,
            a
        }
        ,
        this.compile = function(a, b) {
            return new q(a,M(i(), b))
        }
        ,
        this.isMatcher = function(a) {
            if (!J(a))
                return !1;
            var b = !0;
            return L(q.prototype, function(c, d) {
                H(c) && (b = b && G(a[d]) && H(a[d]))
            }),
            b
        }
        ,
        this.type = function(a, b, c) {
            if (!G(b))
                return v[a];
            if (v.hasOwnProperty(a))
                throw new Error("A type named '" + a + "' has already been defined.");
            return v[a] = new r(M({
                name: a
            }, b)),
            c && (x.push({
                name: a,
                def: c
            }),
            w || k()),
            this
        }
        ,
        L(y, function(a, b) {
            v[b] = new r(M({
                name: b
            }, a))
        }),
        v = d(v, {}),
        this.$get = ["$injector", function(a) {
            return o = a,
            w = !1,
            k(),
            L(y, function(a, b) {
                v[b] || (v[b] = new r(a))
            }),
            this
        }
        ],
        this.Param = function(a, b, d, e) {
            function f(a) {
                var b = J(a) ? g(a) : []
                  , c = -1 === h(b, "value") && -1 === h(b, "type") && -1 === h(b, "squash") && -1 === h(b, "array");
                return c && (a = {
                    value: a
                }),
                a.$$fn = j(a.value) ? a.value : function() {
                    return a.value
                }
                ,
                a
            }
            function i(b, c, d) {
                if (b.type && c)
                    throw new Error("Param '" + a + "' has two type configurations.");
                return c ? c : b.type ? b.type instanceof r ? b.type : new r(b.type) : "config" === d ? v.any : v.string
            }
            function k() {
                var b = {
                    array: "search" === e ? "auto" : !1
                }
                  , c = a.match(/\[\]$/) ? {
                    array: !0
                } : {};
                return M(b, c, d).array
            }
            function l(a, b) {
                var c = a.squash;
                if (!b || c === !1)
                    return !1;
                if (!G(c) || null == c)
                    return u;
                if (c === !0 || I(c))
                    return c;
                throw new Error("Invalid squash policy: '" + c + "'. Valid policies: false, true, or arbitrary string")
            }
            function p(a, b, d, e) {
                var f, g, i = [{
                    from: "",
                    to: d || b ? c : ""
                }, {
                    from: null,
                    to: d || b ? c : ""
                }];
                return f = K(a.replace) ? a.replace : [],
                I(e) && f.push({
                    from: e,
                    to: c
                }),
                g = n(f, function(a) {
                    return a.from
                }),
                m(i, function(a) {
                    return -1 === h(g, a.from)
                }).concat(f)
            }
            function q() {
                if (!o)
                    throw new Error("Injectable functions cannot be called at configuration time");
                return o.invoke(d.$$fn)
            }
            function s(a) {
                function b(a) {
                    return function(b) {
                        return b.from === a
                    }
                }
                function c(a) {
                    var c = n(m(w.replace, b(a)), function(a) {
                        return a.to
                    });
                    return c.length ? c[0] : a
                }
                return a = c(a),
                G(a) ? w.type.decode(a) : q()
            }
            function t() {
                return "{Param:" + a + " " + b + " squash: '" + z + "' optional: " + y + "}"
            }
            var w = this;
            d = f(d),
            b = i(d, b, e);
            var x = k();
            b = x ? b.$asArray(x, "search" === e) : b,
            "string" !== b.name || x || "path" !== e || d.value !== c || (d.value = "");
            var y = d.value !== c
              , z = l(d, y)
              , A = p(d, x, y, z);
            M(this, {
                id: a,
                type: b,
                location: e,
                array: x,
                squash: z,
                replace: A,
                isOptional: y,
                value: s,
                dynamic: c,
                config: d,
                toString: t
            })
        }
        ,
        l.prototype = {
            $$new: function() {
                return d(this, M(new l, {
                    $$parent: this
                }))
            },
            $$keys: function() {
                for (var a = [], b = [], c = this, d = g(l.prototype); c; )
                    b.push(c),
                    c = c.$$parent;
                return b.reverse(),
                L(b, function(b) {
                    L(g(b), function(b) {
                        -1 === h(a, b) && -1 === h(d, b) && a.push(b)
                    })
                }),
                a
            },
            $$values: function(a) {
                var b = {}
                  , c = this;
                return L(c.$$keys(), function(d) {
                    b[d] = c[d].value(a && a[d])
                }),
                b
            },
            $$equals: function(a, b) {
                var c = !0
                  , d = this;
                return L(d.$$keys(), function(e) {
                    var f = a && a[e]
                      , g = b && b[e];
                    d[e].type.equals(f, g) || (c = !1)
                }),
                c
            },
            $$validates: function(a) {
                var b, c, d, e = !0, f = this;
                return L(this.$$keys(), function(g) {
                    d = f[g],
                    c = a[g],
                    b = !c && d.isOptional,
                    e = e && (b || !!d.type.is(c))
                }),
                e
            },
            $$parent: c
        },
        this.ParamSet = l
    }
    function t(a, d) {
        function e(a) {
            var b = /^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);
            return null != b ? b[1].replace(/\\(.)/g, "$1") : ""
        }
        function f(a, b) {
            return a.replace(/\$(\$|\d{1,2})/, function(a, c) {
                return b["$" === c ? 0 : Number(c)]
            })
        }
        function g(a, b, c) {
            if (!c)
                return !1;
            var d = a.invoke(b, b, {
                $match: c
            });
            return G(d) ? d : !0
        }
        function h(d, e, f, g) {
            function h(a, b, c) {
                return "/" === p ? a : b ? p.slice(0, -1) + a : c ? p.slice(1) + a : a
            }
            function m(a) {
                function b(a) {
                    var b = a(f, d);
                    return b ? (I(b) && d.replace().url(b),
                    !0) : !1
                }
                if (!a || !a.defaultPrevented) {
                    var e = o && d.url() === o;
                    if (o = c,
                    e)
                        return !0;
                    var g, h = j.length;
                    for (g = 0; h > g; g++)
                        if (b(j[g]))
                            return;
                    k && b(k)
                }
            }
            function n() {
                return i = i || e.$on("$locationChangeSuccess", m)
            }
            var o, p = g.baseHref(), q = d.url();
            return l || n(),
            {
                sync: function() {
                    m()
                },
                listen: function() {
                    return n()
                },
                update: function(a) {
                    return a ? void (q = d.url()) : void (d.url() !== q && (d.url(q),
                    d.replace()))
                },
                push: function(a, b, e) {
                    d.url(a.format(b || {})),
                    o = e && e.$$avoidResync ? d.url() : c,
                    e && e.replace && d.replace()
                },
                href: function(c, e, f) {
                    if (!c.validates(e))
                        return null;
                    var g = a.html5Mode();
                    b.isObject(g) && (g = g.enabled);
                    var i = c.format(e);
                    if (f = f || {},
                    g || null === i || (i = "#" + a.hashPrefix() + i),
                    i = h(i, g, f.absolute),
                    !f.absolute || !i)
                        return i;
                    var j = !g && i ? "/" : ""
                      , k = d.port();
                    return k = 80 === k || 443 === k ? "" : ":" + k,
                    [d.protocol(), "://", d.host(), k, j, i].join("")
                }
            }
        }
        var i, j = [], k = null, l = !1;
        this.rule = function(a) {
            if (!H(a))
                throw new Error("'rule' must be a function");
            return j.push(a),
            this
        }
        ,
        this.otherwise = function(a) {
            if (I(a)) {
                var b = a;
                a = function() {
                    return b
                }
            } else if (!H(a))
                throw new Error("'rule' must be a function");
            return k = a,
            this
        }
        ,
        this.when = function(a, b) {
            var c, h = I(b);
            if (I(a) && (a = d.compile(a)),
            !h && !H(b) && !K(b))
                throw new Error("invalid 'handler' in when()");
            var i = {
                matcher: function(a, b) {
                    return h && (c = d.compile(b),
                    b = ["$match", function(a) {
                        return c.format(a)
                    }
                    ]),
                    M(function(c, d) {
                        return g(c, b, a.exec(d.path(), d.search()))
                    }, {
                        prefix: I(a.prefix) ? a.prefix : ""
                    })
                },
                regex: function(a, b) {
                    if (a.global || a.sticky)
                        throw new Error("when() RegExp must not be global or sticky");
                    return h && (c = b,
                    b = ["$match", function(a) {
                        return f(c, a)
                    }
                    ]),
                    M(function(c, d) {
                        return g(c, b, a.exec(d.path()))
                    }, {
                        prefix: e(a)
                    })
                }
            }
              , j = {
                matcher: d.isMatcher(a),
                regex: a instanceof RegExp
            };
            for (var k in j)
                if (j[k])
                    return this.rule(i[k](a, b));
            throw new Error("invalid 'what' in when()")
        }
        ,
        this.deferIntercept = function(a) {
            a === c && (a = !0),
            l = a
        }
        ,
        this.$get = h,
        h.$inject = ["$location", "$rootScope", "$injector", "$browser"]
    }
    function u(a, e) {
        function f(a) {
            return 0 === a.indexOf(".") || 0 === a.indexOf("^")
        }
        function l(a, b) {
            if (!a)
                return c;
            var d = I(a)
              , e = d ? a : a.name
              , g = f(e);
            if (g) {
                if (!b)
                    throw new Error("No reference point given for path '" + e + "'");
                b = l(b);
                for (var h = e.split("."), i = 0, j = h.length, k = b; j > i; i++)
                    if ("" !== h[i] || 0 !== i) {
                        if ("^" !== h[i])
                            break;
                        if (!k.parent)
                            throw new Error("Path '" + e + "' not valid for state '" + b.name + "'");
                        k = k.parent
                    } else
                        k = b;
                h = h.slice(i).join("."),
                e = k.name + (k.name && h ? "." : "") + h
            }
            var m = y[e];
            return !m || !d && (d || m !== a && m.self !== a) ? c : m
        }
        function m(a, b) {
            z[a] || (z[a] = []),
            z[a].push(b)
        }
        function o(a) {
            for (var b = z[a] || []; b.length; )
                p(b.shift())
        }
        function p(b) {
            b = d(b, {
                self: b,
                resolve: b.resolve || {},
                toString: function() {
                    return this.name
                }
            });
            var c = b.name;
            if (!I(c) || c.indexOf("@") >= 0)
                throw new Error("State must have a valid name");
            if (y.hasOwnProperty(c))
                throw new Error("State '" + c + "'' is already defined");
            var e = -1 !== c.indexOf(".") ? c.substring(0, c.lastIndexOf(".")) : I(b.parent) ? b.parent : J(b.parent) && I(b.parent.name) ? b.parent.name : "";
            if (e && !y[e])
                return m(e, b.self);
            for (var f in B)
                H(B[f]) && (b[f] = B[f](b, B.$delegates[f]));
            return y[c] = b,
            !b[A] && b.url && a.when(b.url, ["$match", "$stateParams", function(a, c) {
                x.$current.navigable == b && j(a, c) || x.transitionTo(b, a, {
                    inherit: !0,
                    location: !1
                })
            }
            ]),
            o(c),
            b
        }
        function q(a) {
            return a.indexOf("*") > -1
        }
        function r(a) {
            var b = a.split(".")
              , c = x.$current.name.split(".");
            if ("**" === b[0] && (c = c.slice(h(c, b[1])),
            c.unshift("**")),
            "**" === b[b.length - 1] && (c.splice(h(c, b[b.length - 2]) + 1, Number.MAX_VALUE),
            c.push("**")),
            b.length != c.length)
                return !1;
            for (var d = 0, e = b.length; e > d; d++)
                "*" === b[d] && (c[d] = "*");
            return c.join("") === b.join("")
        }
        function s(a, b) {
            return I(a) && !G(b) ? B[a] : H(b) && I(a) ? (B[a] && !B.$delegates[a] && (B.$delegates[a] = B[a]),
            B[a] = b,
            this) : this
        }
        function t(a, b) {
            return J(a) ? b = a : b.name = a,
            p(b),
            this
        }
        function u(a, e, f, h, m, o, p) {
            function s(b, c, d, f) {
                var g = a.$broadcast("$stateNotFound", b, c, d);
                if (g.defaultPrevented)
                    return p.update(),
                    B;
                if (!g.retry)
                    return null;
                if (f.$retry)
                    return p.update(),
                    C;
                var h = x.transition = e.when(g.retry);
                return h.then(function() {
                    return h !== x.transition ? u : (b.options.$retry = !0,
                    x.transitionTo(b.to, b.toParams, b.options))
                }, function() {
                    return B
                }),
                p.update(),
                h
            }
            function t(a, c, d, g, i, j) {
                var l = d ? c : k(a.params.$$keys(), c)
                  , n = {
                    $stateParams: l
                };
                i.resolve = m.resolve(a.resolve, n, i.resolve, a);
                var o = [i.resolve.then(function(a) {
                    i.globals = a
                })];
                return g && o.push(g),
                L(a.views, function(c, d) {
                    var e = c.resolve && c.resolve !== a.resolve ? c.resolve : {};
                    e.$template = [function() {
                        return f.load(d, {
                            view: c,
                            locals: n,
                            params: l,
                            notify: j.notify
                        }) || ""
                    }
                    ],
                    o.push(m.resolve(e, n, i.resolve, a).then(function(f) {
                        if (H(c.controllerProvider) || K(c.controllerProvider)) {
                            var g = b.extend({}, e, n);
                            f.$$controller = h.invoke(c.controllerProvider, null, g)
                        } else
                            f.$$controller = c.controller;
                        f.$$state = a,
                        f.$$controllerAs = c.controllerAs,
                        i[d] = f
                    }))
                }),
                e.all(o).then(function() {
                    return i
                })
            }
            var u = e.reject(new Error("transition superseded"))
              , z = e.reject(new Error("transition prevented"))
              , B = e.reject(new Error("transition aborted"))
              , C = e.reject(new Error("transition failed"));
            return w.locals = {
                resolve: null,
                globals: {
                    $stateParams: {}
                }
            },
            x = {
                params: {},
                current: w.self,
                $current: w,
                transition: null
            },
            x.reload = function() {
                return x.transitionTo(x.current, o, {
                    reload: !0,
                    inherit: !1,
                    notify: !0
                })
            }
            ,
            x.go = function(a, b, c) {
                return x.transitionTo(a, b, M({
                    inherit: !0,
                    relative: x.$current
                }, c))
            }
            ,
            x.transitionTo = function(b, c, f) {
                c = c || {},
                f = M({
                    location: !0,
                    inherit: !1,
                    relative: null,
                    notify: !0,
                    reload: !1,
                    $retry: !1
                }, f || {});
                var g, j = x.$current, m = x.params, n = j.path, q = l(b, f.relative);
                if (!G(q)) {
                    var r = {
                        to: b,
                        toParams: c,
                        options: f
                    }
                      , y = s(r, j.self, m, f);
                    if (y)
                        return y;
                    if (b = r.to,
                    c = r.toParams,
                    f = r.options,
                    q = l(b, f.relative),
                    !G(q)) {
                        if (!f.relative)
                            throw new Error("No such state '" + b + "'");
                        throw new Error("Could not resolve '" + b + "' from state '" + f.relative + "'")
                    }
                }
                if (q[A])
                    throw new Error("Cannot transition to abstract state '" + b + "'");
                if (f.inherit && (c = i(o, c || {}, x.$current, q)),
                !q.params.$$validates(c))
                    return C;
                c = q.params.$$values(c),
                b = q;
                var B = b.path
                  , D = 0
                  , E = B[D]
                  , F = w.locals
                  , H = [];
                if (!f.reload)
                    for (; E && E === n[D] && E.ownParams.$$equals(c, m); )
                        F = H[D] = E.locals,
                        D++,
                        E = B[D];
                if (v(b, j, F, f))
                    return b.self.reloadOnSearch !== !1 && p.update(),
                    x.transition = null,
                    e.when(x.current);
                if (c = k(b.params.$$keys(), c || {}),
                f.notify && a.$broadcast("$stateChangeStart", b.self, c, j.self, m).defaultPrevented)
                    return p.update(),
                    z;
                for (var I = e.when(F), J = D; J < B.length; J++,
                E = B[J])
                    F = H[J] = d(F),
                    I = t(E, c, E === b, I, F, f);
                var K = x.transition = I.then(function() {
                    var d, e, g;
                    if (x.transition !== K)
                        return u;
                    for (d = n.length - 1; d >= D; d--)
                        g = n[d],
                        g.self.onExit && h.invoke(g.self.onExit, g.self, g.locals.globals),
                        g.locals = null;
                    for (d = D; d < B.length; d++)
                        e = B[d],
                        e.locals = H[d],
                        e.self.onEnter && h.invoke(e.self.onEnter, e.self, e.locals.globals);
                    return x.transition !== K ? u : (x.$current = b,
                    x.current = b.self,
                    x.params = c,
                    N(x.params, o),
                    x.transition = null,
                    f.location && b.navigable && p.push(b.navigable.url, b.navigable.locals.globals.$stateParams, {
                        $$avoidResync: !0,
                        replace: "replace" === f.location
                    }),
                    f.notify && a.$broadcast("$stateChangeSuccess", b.self, c, j.self, m),
                    p.update(!0),
                    x.current)
                }, function(d) {
                    return x.transition !== K ? u : (x.transition = null,
                    g = a.$broadcast("$stateChangeError", b.self, c, j.self, m, d),
                    g.defaultPrevented || p.update(),
                    e.reject(d))
                });
                return K
            }
            ,
            x.is = function(a, b, d) {
                d = M({
                    relative: x.$current
                }, d || {});
                var e = l(a, d.relative);
                return G(e) ? x.$current !== e ? !1 : b ? j(e.params.$$values(b), o) : !0 : c
            }
            ,
            x.includes = function(a, b, d) {
                if (d = M({
                    relative: x.$current
                }, d || {}),
                I(a) && q(a)) {
                    if (!r(a))
                        return !1;
                    a = x.$current.name
                }
                var e = l(a, d.relative);
                return G(e) ? G(x.$current.includes[e.name]) ? b ? j(e.params.$$values(b), o, g(b)) : !0 : !1 : c
            }
            ,
            x.href = function(a, b, d) {
                d = M({
                    lossy: !0,
                    inherit: !0,
                    absolute: !1,
                    relative: x.$current
                }, d || {});
                var e = l(a, d.relative);
                if (!G(e))
                    return null;
                d.inherit && (b = i(o, b || {}, x.$current, e));
                var f = e && d.lossy ? e.navigable : e;
                return f && f.url !== c && null !== f.url ? p.href(f.url, k(e.params.$$keys(), b || {}), {
                    absolute: d.absolute
                }) : null
            }
            ,
            x.get = function(a, b) {
                if (0 === arguments.length)
                    return n(g(y), function(a) {
                        return y[a].self
                    });
                var c = l(a, b || x.$current);
                return c && c.self ? c.self : null
            }
            ,
            x
        }
        function v(a, b, c, d) {
            return a !== b || (c !== b.locals || d.reload) && a.self.reloadOnSearch !== !1 ? void 0 : !0
        }
        var w, x, y = {}, z = {}, A = "abstract", B = {
            parent: function(a) {
                if (G(a.parent) && a.parent)
                    return l(a.parent);
                var b = /^(.+)\.[^.]+$/.exec(a.name);
                return b ? l(b[1]) : w
            },
            data: function(a) {
                return a.parent && a.parent.data && (a.data = a.self.data = M({}, a.parent.data, a.data)),
                a.data
            },
            url: function(a) {
                var b = a.url
                  , c = {
                    params: a.params || {}
                };
                if (I(b))
                    return "^" == b.charAt(0) ? e.compile(b.substring(1), c) : (a.parent.navigable || w).url.concat(b, c);
                if (!b || e.isMatcher(b))
                    return b;
                throw new Error("Invalid url '" + b + "' in state '" + a + "'")
            },
            navigable: function(a) {
                return a.url ? a : a.parent ? a.parent.navigable : null
            },
            ownParams: function(a) {
                var b = a.url && a.url.params || new O.ParamSet;
                return L(a.params || {}, function(a, c) {
                    b[c] || (b[c] = new O.Param(c,null,a,"config"))
                }),
                b
            },
            params: function(a) {
                return a.parent && a.parent.params ? M(a.parent.params.$$new(), a.ownParams) : new O.ParamSet
            },
            views: function(a) {
                var b = {};
                return L(G(a.views) ? a.views : {
                    "": a
                }, function(c, d) {
                    d.indexOf("@") < 0 && (d += "@" + a.parent.name),
                    b[d] = c
                }),
                b
            },
            path: function(a) {
                return a.parent ? a.parent.path.concat(a) : []
            },
            includes: function(a) {
                var b = a.parent ? M({}, a.parent.includes) : {};
                return b[a.name] = !0,
                b
            },
            $delegates: {}
        };
        w = p({
            name: "",
            url: "^",
            views: null,
            "abstract": !0
        }),
        w.navigable = null,
        this.decorator = s,
        this.state = t,
        this.$get = u,
        u.$inject = ["$rootScope", "$q", "$view", "$injector", "$resolve", "$stateParams", "$urlRouter", "$location", "$urlMatcherFactory"]
    }
    function v() {
        function a(a, b) {
            return {
                load: function(c, d) {
                    var e, f = {
                        template: null,
                        controller: null,
                        view: null,
                        locals: null,
                        notify: !0,
                        async: !0,
                        params: {}
                    };
                    return d = M(f, d),
                    d.view && (e = b.fromConfig(d.view, d.params, d.locals)),
                    e && d.notify && a.$broadcast("$viewContentLoading", d),
                    e
                }
            }
        }
        this.$get = a,
        a.$inject = ["$rootScope", "$templateFactory"]
    }
    function w() {
        var a = !1;
        this.useAnchorScroll = function() {
            a = !0
        }
        ,
        this.$get = ["$anchorScroll", "$timeout", function(b, c) {
            return a ? b : function(a) {
                c(function() {
                    a[0].scrollIntoView()
                }, 0, !1)
            }
        }
        ]
    }
    function x(a, c, d, e) {
        function f() {
            return c.has ? function(a) {
                return c.has(a) ? c.get(a) : null
            }
            : function(a) {
                try {
                    return c.get(a)
                } catch (b) {
                    return null
                }
            }
        }
        function g(a, b) {
            var c = function() {
                return {
                    enter: function(a, b, c) {
                        b.after(a),
                        c()
                    },
                    leave: function(a, b) {
                        a.remove(),
                        b()
                    }
                }
            };
            if (j)
                return {
                    enter: function(a, b, c) {
                        var d = j.enter(a, null, b, c);
                        d && d.then && d.then(c)
                    },
                    leave: function(a, b) {
                        var c = j.leave(a, b);
                        c && c.then && c.then(b)
                    }
                };
            if (i) {
                var d = i && i(b, a);
                return {
                    enter: function(a, b, c) {
                        d.enter(a, null, b),
                        c()
                    },
                    leave: function(a, b) {
                        d.leave(a),
                        b()
                    }
                }
            }
            return c()
        }
        var h = f()
          , i = h("$animator")
          , j = h("$animate")
          , k = {
            restrict: "ECA",
            terminal: !0,
            priority: 400,
            transclude: "element",
            compile: function(c, f, h) {
                return function(c, f, i) {
                    function j() {
                        l && (l.remove(),
                        l = null),
                        n && (n.$destroy(),
                        n = null),
                        m && (r.leave(m, function() {
                            l = null
                        }),
                        l = m,
                        m = null)
                    }
                    function k(g) {
                        var k, l = z(c, i, f, e), s = l && a.$current && a.$current.locals[l];
                        if (g || s !== o) {
                            k = c.$new(),
                            o = a.$current.locals[l];
                            var t = h(k, function(a) {
                                r.enter(a, f, function() {
                                    n && n.$emit("$viewContentAnimationEnded"),
                                    (b.isDefined(q) && !q || c.$eval(q)) && d(a)
                                }),
                                j()
                            });
                            m = t,
                            n = k,
                            n.$emit("$viewContentLoaded"),
                            n.$eval(p)
                        }
                    }
                    var l, m, n, o, p = i.onload || "", q = i.autoscroll, r = g(i, c);
                    c.$on("$stateChangeSuccess", function() {
                        k(!1)
                    }),
                    c.$on("$viewContentLoading", function() {
                        k(!1)
                    }),
                    k(!0)
                }
            }
        };
        return k
    }
    function y(a, b, c, d) {
        return {
            restrict: "ECA",
            priority: -400,
            compile: function(e) {
                var f = e.html();
                return function(e, g, h) {
                    var i = c.$current
                      , j = z(e, h, g, d)
                      , k = i && i.locals[j];
                    if (k) {
                        g.data("$uiView", {
                            name: j,
                            state: k.$$state
                        }),
                        g.html(k.$template ? k.$template : f);
                        var l = a(g.contents());
                        if (k.$$controller) {
                            k.$scope = e;
                            var m = b(k.$$controller, k);
                            k.$$controllerAs && (e[k.$$controllerAs] = m),
                            g.data("$ngControllerController", m),
                            g.children().data("$ngControllerController", m)
                        }
                        l(e)
                    }
                }
            }
        }
    }
    function z(a, b, c, d) {
        var e = d(b.uiView || b.name || "")(a)
          , f = c.inheritedData("$uiView");
        return e.indexOf("@") >= 0 ? e : e + "@" + (f ? f.state.name : "")
    }
    function A(a, b) {
        var c, d = a.match(/^\s*({[^}]*})\s*$/);
        if (d && (a = b + "(" + d[1] + ")"),
        c = a.replace(/\n/g, " ").match(/^([^(]+?)\s*(\((.*)\))?$/),
        !c || 4 !== c.length)
            throw new Error("Invalid state ref '" + a + "'");
        return {
            state: c[1],
            paramExpr: c[3] || null
        }
    }
    function B(a) {
        var b = a.parent().inheritedData("$uiView");
        return b && b.state && b.state.name ? b.state : void 0
    }
    function C(a, c) {
        var d = ["location", "inherit", "reload"];
        return {
            restrict: "A",
            require: ["?^uiSrefActive", "?^uiSrefActiveEq"],
            link: function(e, f, g, h) {
                var i = A(g.uiSref, a.current.name)
                  , j = null
                  , k = B(f) || a.$current
                  , l = null
                  , m = "A" === f.prop("tagName")
                  , n = "FORM" === f[0].nodeName
                  , o = n ? "action" : "href"
                  , p = !0
                  , q = {
                    relative: k,
                    inherit: !0
                }
                  , r = e.$eval(g.uiSrefOpts) || {};
                b.forEach(d, function(a) {
                    a in r && (q[a] = r[a])
                });
                var s = function(c) {
                    if (c && (j = b.copy(c)),
                    p) {
                        l = a.href(i.state, j, q);
                        var d = h[1] || h[0];
                        return d && d.$$setStateInfo(i.state, j),
                        null === l ? (p = !1,
                        !1) : void g.$set(o, l)
                    }
                };
                i.paramExpr && (e.$watch(i.paramExpr, function(a) {
                    a !== j && s(a)
                }, !0),
                j = b.copy(e.$eval(i.paramExpr))),
                s(),
                n || f.bind("click", function(b) {
                    var d = b.which || b.button;
                    if (!(d > 1 || b.ctrlKey || b.metaKey || b.shiftKey || f.attr("target"))) {
                        var e = c(function() {
                            a.go(i.state, j, q)
                        });
                        b.preventDefault();
                        var g = m && !l ? 1 : 0;
                        b.preventDefault = function() {
                            g-- <= 0 && c.cancel(e)
                        }
                    }
                })
            }
        }
    }
    function D(a, b, c) {
        return {
            restrict: "A",
            controller: ["$scope", "$element", "$attrs", function(b, d, e) {
                function f() {
                    g() ? d.addClass(j) : d.removeClass(j)
                }
                function g() {
                    return "undefined" != typeof e.uiSrefActiveEq ? h && a.is(h.name, i) : h && a.includes(h.name, i)
                }
                var h, i, j;
                j = c(e.uiSrefActiveEq || e.uiSrefActive || "", !1)(b),
                this.$$setStateInfo = function(b, c) {
                    h = a.get(b, B(d)),
                    i = c,
                    f()
                }
                ,
                b.$on("$stateChangeSuccess", f)
            }
            ]
        }
    }
    function E(a) {
        var b = function(b) {
            return a.is(b)
        };
        return b.$stateful = !0,
        b
    }
    function F(a) {
        var b = function(b) {
            return a.includes(b)
        };
        return b.$stateful = !0,
        b
    }
    var G = b.isDefined
      , H = b.isFunction
      , I = b.isString
      , J = b.isObject
      , K = b.isArray
      , L = b.forEach
      , M = b.extend
      , N = b.copy;
    b.module("ui.router.util", ["ng"]),
    b.module("ui.router.router", ["ui.router.util"]),
    b.module("ui.router.state", ["ui.router.router", "ui.router.util"]),
    b.module("ui.router", ["ui.router.state"]),
    b.module("ui.router.compat", ["ui.router"]),
    o.$inject = ["$q", "$injector"],
    b.module("ui.router.util").service("$resolve", o),
    p.$inject = ["$http", "$templateCache", "$injector"],
    b.module("ui.router.util").service("$templateFactory", p);
    var O;
    q.prototype.concat = function(a, b) {
        var c = {
            caseInsensitive: O.caseInsensitive(),
            strict: O.strictMode(),
            squash: O.defaultSquashPolicy()
        };
        return new q(this.sourcePath + a + this.sourceSearch,M(c, b),this)
    }
    ,
    q.prototype.toString = function() {
        return this.source
    }
    ,
    q.prototype.exec = function(a, b) {
        function c(a) {
            function b(a) {
                return a.split("").reverse().join("")
            }
            function c(a) {
                return a.replace(/\\-/, "-")
            }
            var d = b(a).split(/-(?!\\)/)
              , e = n(d, b);
            return n(e, c).reverse()
        }
        var d = this.regexp.exec(a);
        if (!d)
            return null;
        b = b || {};
        var e, f, g, h = this.parameters(), i = h.length, j = this.segments.length - 1, k = {};
        if (j !== d.length - 1)
            throw new Error("Unbalanced capture group in route '" + this.source + "'");
        for (e = 0; j > e; e++) {
            g = h[e];
            var l = this.params[g]
              , m = d[e + 1];
            for (f = 0; f < l.replace; f++)
                l.replace[f].from === m && (m = l.replace[f].to);
            m && l.array === !0 && (m = c(m)),
            k[g] = l.value(m)
        }
        for (; i > e; e++)
            g = h[e],
            k[g] = this.params[g].value(b[g]);
        return k
    }
    ,
    q.prototype.parameters = function(a) {
        return G(a) ? this.params[a] || null : this.$$paramNames
    }
    ,
    q.prototype.validates = function(a) {
        return this.params.$$validates(a)
    }
    ,
    q.prototype.format = function(a) {
        function b(a) {
            return encodeURIComponent(a).replace(/-/g, function(a) {
                return "%5C%" + a.charCodeAt(0).toString(16).toUpperCase()
            })
        }
        a = a || {};
        var c = this.segments
          , d = this.parameters()
          , e = this.params;
        if (!this.validates(a))
            return null;
        var f, g = !1, h = c.length - 1, i = d.length, j = c[0];
        for (f = 0; i > f; f++) {
            var k = h > f
              , l = d[f]
              , m = e[l]
              , o = m.value(a[l])
              , p = m.isOptional && m.type.equals(m.value(), o)
              , q = p ? m.squash : !1
              , r = m.type.encode(o);
            if (k) {
                var s = c[f + 1];
                if (q === !1)
                    null != r && (j += K(r) ? n(r, b).join("-") : encodeURIComponent(r)),
                    j += s;
                else if (q === !0) {
                    var t = j.match(/\/$/) ? /\/?(.*)/ : /(.*)/;
                    j += s.match(t)[1]
                } else
                    I(q) && (j += q + s)
            } else {
                if (null == r || p && q !== !1)
                    continue;
                K(r) || (r = [r]),
                r = n(r, encodeURIComponent).join("&" + l + "="),
                j += (g ? "&" : "?") + (l + "=" + r),
                g = !0
            }
        }
        return j
    }
    ,
    r.prototype.is = function() {
        return !0
    }
    ,
    r.prototype.encode = function(a) {
        return a
    }
    ,
    r.prototype.decode = function(a) {
        return a
    }
    ,
    r.prototype.equals = function(a, b) {
        return a == b
    }
    ,
    r.prototype.$subPattern = function() {
        var a = this.pattern.toString();
        return a.substr(1, a.length - 2)
    }
    ,
    r.prototype.pattern = /.*/,
    r.prototype.toString = function() {
        return "{Type:" + this.name + "}"
    }
    ,
    r.prototype.$asArray = function(a, b) {
        function d(a, b) {
            function d(a, b) {
                return function() {
                    return a[b].apply(a, arguments)
                }
            }
            function e(a) {
                return K(a) ? a : G(a) ? [a] : []
            }
            function f(a) {
                switch (a.length) {
                case 0:
                    return c;
                case 1:
                    return "auto" === b ? a[0] : a;
                default:
                    return a
                }
            }
            function g(a) {
                return !a
            }
            function h(a, b) {
                return function(c) {
                    c = e(c);
                    var d = n(c, a);
                    return b === !0 ? 0 === m(d, g).length : f(d)
                }
            }
            function i(a) {
                return function(b, c) {
                    var d = e(b)
                      , f = e(c);
                    if (d.length !== f.length)
                        return !1;
                    for (var g = 0; g < d.length; g++)
                        if (!a(d[g], f[g]))
                            return !1;
                    return !0
                }
            }
            this.encode = h(d(a, "encode")),
            this.decode = h(d(a, "decode")),
            this.is = h(d(a, "is"), !0),
            this.equals = i(d(a, "equals")),
            this.pattern = a.pattern,
            this.$arrayMode = b
        }
        if (!a)
            return this;
        if ("auto" === a && !b)
            throw new Error("'auto' array mode is for query parameters only");
        return new d(this,a)
    }
    ,
    b.module("ui.router.util").provider("$urlMatcherFactory", s),
    b.module("ui.router.util").run(["$urlMatcherFactory", function() {}
    ]),
    t.$inject = ["$locationProvider", "$urlMatcherFactoryProvider"],
    b.module("ui.router.router").provider("$urlRouter", t),
    u.$inject = ["$urlRouterProvider", "$urlMatcherFactoryProvider"],
    b.module("ui.router.state").value("$stateParams", {}).provider("$state", u),
    v.$inject = [],
    b.module("ui.router.state").provider("$view", v),
    b.module("ui.router.state").provider("$uiViewScroll", w),
    x.$inject = ["$state", "$injector", "$uiViewScroll", "$interpolate"],
    y.$inject = ["$compile", "$controller", "$state", "$interpolate"],
    b.module("ui.router.state").directive("uiView", x),
    b.module("ui.router.state").directive("uiView", y),
    C.$inject = ["$state", "$timeout"],
    D.$inject = ["$state", "$stateParams", "$interpolate"],
    b.module("ui.router.state").directive("uiSref", C).directive("uiSrefActive", D).directive("uiSrefActiveEq", D),
    E.$inject = ["$state"],
    F.$inject = ["$state"],
    b.module("ui.router.state").filter("isState", E).filter("includedByState", F)
}(window, window.angular),
function() {
    var e = this
      , t = e._
      , n = {}
      , r = Array.prototype
      , i = Object.prototype
      , s = Function.prototype
      , o = r.push
      , u = r.slice
      , a = r.concat
      , l = (r.unshift,
    i.toString)
      , c = i.hasOwnProperty
      , h = r.forEach
      , p = r.map
      , d = r.reduce
      , v = r.reduceRight
      , m = r.filter
      , g = r.every
      , y = r.some
      , b = r.indexOf
      , w = r.lastIndexOf
      , E = Array.isArray
      , S = Object.keys
      , x = s.bind
      , T = function(e) {
        return e instanceof T ? e : this instanceof T ? void (this._wrapped = e) : new T(e)
    };
    "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = T),
    exports._ = T) : e._ = T,
    T.VERSION = "1.4.2";
    var N = T.each = T.forEach = function(e, t, r) {
        if (null != e)
            if (h && e.forEach === h)
                e.forEach(t, r);
            else if (e.length === +e.length) {
                for (var i = 0, s = e.length; s > i; i++)
                    if (t.call(r, e[i], i, e) === n)
                        return
            } else
                for (var o in e)
                    if (T.has(e, o) && t.call(r, e[o], o, e) === n)
                        return
    }
    ;
    T.map = T.collect = function(e, t, n) {
        var r = [];
        return null == e ? r : p && e.map === p ? e.map(t, n) : (N(e, function(e, i, s) {
            r[r.length] = t.call(n, e, i, s)
        }),
        r)
    }
    ,
    T.reduce = T.foldl = T.inject = function(e, t, n, r) {
        var i = arguments.length > 2;
        if (null == e && (e = []),
        d && e.reduce === d)
            return r && (t = T.bind(t, r)),
            i ? e.reduce(t, n) : e.reduce(t);
        if (N(e, function(e, s, o) {
            i ? n = t.call(r, n, e, s, o) : (n = e,
            i = !0)
        }),
        !i)
            throw new TypeError("Reduce of empty array with no initial value");
        return n
    }
    ,
    T.reduceRight = T.foldr = function(e, t, n, r) {
        var i = arguments.length > 2;
        if (null == e && (e = []),
        v && e.reduceRight === v)
            return r && (t = T.bind(t, r)),
            arguments.length > 2 ? e.reduceRight(t, n) : e.reduceRight(t);
        var s = e.length;
        if (s !== +s) {
            var o = T.keys(e);
            s = o.length
        }
        if (N(e, function(u, a, f) {
            a = o ? o[--s] : --s,
            i ? n = t.call(r, n, e[a], a, f) : (n = e[a],
            i = !0)
        }),
        !i)
            throw new TypeError("Reduce of empty array with no initial value");
        return n
    }
    ,
    T.find = T.detect = function(e, t, n) {
        var r;
        return C(e, function(e, i, s) {
            return t.call(n, e, i, s) ? (r = e,
            !0) : void 0
        }),
        r
    }
    ,
    T.filter = T.select = function(e, t, n) {
        var r = [];
        return null == e ? r : m && e.filter === m ? e.filter(t, n) : (N(e, function(e, i, s) {
            t.call(n, e, i, s) && (r[r.length] = e)
        }),
        r)
    }
    ,
    T.reject = function(e, t, n) {
        var r = [];
        return null == e ? r : (N(e, function(e, i, s) {
            t.call(n, e, i, s) || (r[r.length] = e)
        }),
        r)
    }
    ,
    T.every = T.all = function(e, t, r) {
        t || (t = T.identity);
        var i = !0;
        return null == e ? i : g && e.every === g ? e.every(t, r) : (N(e, function(e, s, o) {
            return (i = i && t.call(r, e, s, o)) ? void 0 : n
        }),
        !!i)
    }
    ;
    var C = T.some = T.any = function(e, t, r) {
        t || (t = T.identity);
        var i = !1;
        return null == e ? i : y && e.some === y ? e.some(t, r) : (N(e, function(e, s, o) {
            return i || (i = t.call(r, e, s, o)) ? n : void 0
        }),
        !!i)
    }
    ;
    T.contains = T.include = function(e, t) {
        var n = !1;
        return null == e ? n : b && e.indexOf === b ? -1 != e.indexOf(t) : n = C(e, function(e) {
            return e === t
        })
    }
    ,
    T.invoke = function(e, t) {
        var n = u.call(arguments, 2);
        return T.map(e, function(e) {
            return (T.isFunction(t) ? t : e[t]).apply(e, n)
        })
    }
    ,
    T.pluck = function(e, t) {
        return T.map(e, function(e) {
            return e[t]
        })
    }
    ,
    T.where = function(e, t) {
        return T.isEmpty(t) ? [] : T.filter(e, function(e) {
            for (var n in t)
                if (t[n] !== e[n])
                    return !1;
            return !0
        })
    }
    ,
    T.max = function(e, t, n) {
        if (!t && T.isArray(e) && e[0] === +e[0] && e.length < 65535)
            return Math.max.apply(Math, e);
        if (!t && T.isEmpty(e))
            return -(1 / 0);
        var r = {
            computed: -(1 / 0)
        };
        return N(e, function(e, i, s) {
            var o = t ? t.call(n, e, i, s) : e;
            o >= r.computed && (r = {
                value: e,
                computed: o
            })
        }),
        r.value
    }
    ,
    T.min = function(e, t, n) {
        if (!t && T.isArray(e) && e[0] === +e[0] && e.length < 65535)
            return Math.min.apply(Math, e);
        if (!t && T.isEmpty(e))
            return 1 / 0;
        var r = {
            computed: 1 / 0
        };
        return N(e, function(e, i, s) {
            var o = t ? t.call(n, e, i, s) : e;
            o < r.computed && (r = {
                value: e,
                computed: o
            })
        }),
        r.value
    }
    ,
    T.shuffle = function(e) {
        var t, n = 0, r = [];
        return N(e, function(e) {
            t = T.random(n++),
            r[n - 1] = r[t],
            r[t] = e
        }),
        r
    }
    ;
    var k = function(e) {
        return T.isFunction(e) ? e : function(t) {
            return t[e]
        }
    };
    T.sortBy = function(e, t, n) {
        var r = k(t);
        return T.pluck(T.map(e, function(e, t, i) {
            return {
                value: e,
                index: t,
                criteria: r.call(n, e, t, i)
            }
        }).sort(function(e, t) {
            var n = e.criteria
              , r = t.criteria;
            if (n !== r) {
                if (n > r || void 0 === n)
                    return 1;
                if (r > n || void 0 === r)
                    return -1
            }
            return e.index < t.index ? -1 : 1
        }), "value")
    }
    ;
    var L = function(e, t, n, r) {
        var i = {}
          , s = k(t);
        return N(e, function(t, o) {
            var u = s.call(n, t, o, e);
            r(i, u, t)
        }),
        i
    };
    T.groupBy = function(e, t, n) {
        return L(e, t, n, function(e, t, n) {
            (T.has(e, t) ? e[t] : e[t] = []).push(n)
        })
    }
    ,
    T.countBy = function(e, t, n) {
        return L(e, t, n, function(e, t) {
            T.has(e, t) || (e[t] = 0),
            e[t]++
        })
    }
    ,
    T.sortedIndex = function(e, t, n, r) {
        n = null == n ? T.identity : k(n);
        for (var i = n.call(r, t), s = 0, o = e.length; o > s; ) {
            var u = s + o >>> 1;
            n.call(r, e[u]) < i ? s = u + 1 : o = u
        }
        return s
    }
    ,
    T.toArray = function(e) {
        return e ? e.length === +e.length ? u.call(e) : T.values(e) : []
    }
    ,
    T.size = function(e) {
        return e.length === +e.length ? e.length : T.keys(e).length
    }
    ,
    T.first = T.head = T.take = function(e, t, n) {
        return null == t || n ? e[0] : u.call(e, 0, t)
    }
    ,
    T.initial = function(e, t, n) {
        return u.call(e, 0, e.length - (null == t || n ? 1 : t))
    }
    ,
    T.last = function(e, t, n) {
        return null == t || n ? e[e.length - 1] : u.call(e, Math.max(e.length - t, 0))
    }
    ,
    T.rest = T.tail = T.drop = function(e, t, n) {
        return u.call(e, null == t || n ? 1 : t)
    }
    ,
    T.compact = function(e) {
        return T.filter(e, function(e) {
            return !!e
        })
    }
    ;
    var A = function(e, t, n) {
        return N(e, function(e) {
            T.isArray(e) ? t ? o.apply(n, e) : A(e, t, n) : n.push(e)
        }),
        n
    };
    T.flatten = function(e, t) {
        return A(e, t, [])
    }
    ,
    T.without = function(e) {
        return T.difference(e, u.call(arguments, 1))
    }
    ,
    T.uniq = T.unique = function(e, t, n, r) {
        var i = n ? T.map(e, n, r) : e
          , s = []
          , o = [];
        return N(i, function(n, r) {
            (t ? r && o[o.length - 1] === n : T.contains(o, n)) || (o.push(n),
            s.push(e[r]))
        }),
        s
    }
    ,
    T.union = function() {
        return T.uniq(a.apply(r, arguments))
    }
    ,
    T.intersection = function(e) {
        var t = u.call(arguments, 1);
        return T.filter(T.uniq(e), function(e) {
            return T.every(t, function(t) {
                return T.indexOf(t, e) >= 0
            })
        })
    }
    ,
    T.difference = function(e) {
        var t = a.apply(r, u.call(arguments, 1));
        return T.filter(e, function(e) {
            return !T.contains(t, e)
        })
    }
    ,
    T.zip = function() {
        for (var e = u.call(arguments), t = T.max(T.pluck(e, "length")), n = new Array(t), r = 0; t > r; r++)
            n[r] = T.pluck(e, "" + r);
        return n
    }
    ,
    T.object = function(e, t) {
        for (var n = {}, r = 0, i = e.length; i > r; r++)
            t ? n[e[r]] = t[r] : n[e[r][0]] = e[r][1];
        return n
    }
    ,
    T.indexOf = function(e, t, n) {
        if (null == e)
            return -1;
        var r = 0
          , i = e.length;
        if (n) {
            if ("number" != typeof n)
                return r = T.sortedIndex(e, t),
                e[r] === t ? r : -1;
            r = 0 > n ? Math.max(0, i + n) : n
        }
        if (b && e.indexOf === b)
            return e.indexOf(t, n);
        for (; i > r; r++)
            if (e[r] === t)
                return r;
        return -1
    }
    ,
    T.lastIndexOf = function(e, t, n) {
        if (null == e)
            return -1;
        var r = null != n;
        if (w && e.lastIndexOf === w)
            return r ? e.lastIndexOf(t, n) : e.lastIndexOf(t);
        for (var i = r ? n : e.length; i--; )
            if (e[i] === t)
                return i;
        return -1
    }
    ,
    T.range = function(e, t, n) {
        arguments.length <= 1 && (t = e || 0,
        e = 0),
        n = arguments[2] || 1;
        for (var r = Math.max(Math.ceil((t - e) / n), 0), i = 0, s = new Array(r); r > i; )
            s[i++] = e,
            e += n;
        return s
    }
    ;
    var O = function() {};
    T.bind = function(t, n) {
        var r, i;
        if (t.bind === x && x)
            return x.apply(t, u.call(arguments, 1));
        if (!T.isFunction(t))
            throw new TypeError;
        return i = u.call(arguments, 2),
        r = function() {
            if (this instanceof r) {
                O.prototype = t.prototype;
                var e = new O
                  , s = t.apply(e, i.concat(u.call(arguments)));
                return Object(s) === s ? s : e
            }
            return t.apply(n, i.concat(u.call(arguments)))
        }
    }
    ,
    T.bindAll = function(e) {
        var t = u.call(arguments, 1);
        return 0 == t.length && (t = T.functions(e)),
        N(t, function(t) {
            e[t] = T.bind(e[t], e)
        }),
        e
    }
    ,
    T.memoize = function(e, t) {
        var n = {};
        return t || (t = T.identity),
        function() {
            var r = t.apply(this, arguments);
            return T.has(n, r) ? n[r] : n[r] = e.apply(this, arguments)
        }
    }
    ,
    T.delay = function(e, t) {
        var n = u.call(arguments, 2);
        return setTimeout(function() {
            return e.apply(null, n)
        }, t)
    }
    ,
    T.defer = function(e) {
        return T.delay.apply(T, [e, 1].concat(u.call(arguments, 1)))
    }
    ,
    T.throttle = function(e, t) {
        var n, r, i, s, o, u, a = T.debounce(function() {
            o = s = !1
        }, t);
        return function() {
            n = this,
            r = arguments;
            var f = function() {
                i = null,
                o && (u = e.apply(n, r)),
                a()
            };
            return i || (i = setTimeout(f, t)),
            s ? o = !0 : (s = !0,
            u = e.apply(n, r)),
            a(),
            u
        }
    }
    ,
    T.debounce = function(e, t, n) {
        var r, i;
        return function() {
            var s = this
              , o = arguments
              , u = function() {
                r = null,
                n || (i = e.apply(s, o))
            }
              , a = n && !r;
            return clearTimeout(r),
            r = setTimeout(u, t),
            a && (i = e.apply(s, o)),
            i
        }
    }
    ,
    T.once = function(e) {
        var n, t = !1;
        return function() {
            return t ? n : (t = !0,
            n = e.apply(this, arguments),
            e = null,
            n)
        }
    }
    ,
    T.wrap = function(e, t) {
        return function() {
            var n = [e];
            return o.apply(n, arguments),
            t.apply(this, n)
        }
    }
    ,
    T.compose = function() {
        var e = arguments;
        return function() {
            for (var t = arguments, n = e.length - 1; n >= 0; n--)
                t = [e[n].apply(this, t)];
            return t[0]
        }
    }
    ,
    T.after = function(e, t) {
        return 0 >= e ? t() : function() {
            return --e < 1 ? t.apply(this, arguments) : void 0
        }
    }
    ,
    T.keys = S || function(e) {
        if (e !== Object(e))
            throw new TypeError("Invalid object");
        var t = [];
        for (var n in e)
            T.has(e, n) && (t[t.length] = n);
        return t
    }
    ,
    T.values = function(e) {
        var t = [];
        for (var n in e)
            T.has(e, n) && t.push(e[n]);
        return t
    }
    ,
    T.pairs = function(e) {
        var t = [];
        for (var n in e)
            T.has(e, n) && t.push([n, e[n]]);
        return t
    }
    ,
    T.invert = function(e) {
        var t = {};
        for (var n in e)
            T.has(e, n) && (t[e[n]] = n);
        return t
    }
    ,
    T.functions = T.methods = function(e) {
        var t = [];
        for (var n in e)
            T.isFunction(e[n]) && t.push(n);
        return t.sort()
    }
    ,
    T.extend = function(e) {
        return N(u.call(arguments, 1), function(t) {
            for (var n in t)
                e[n] = t[n]
        }),
        e
    }
    ,
    T.pick = function(e) {
        var t = {}
          , n = a.apply(r, u.call(arguments, 1));
        return N(n, function(n) {
            n in e && (t[n] = e[n])
        }),
        t
    }
    ,
    T.omit = function(e) {
        var t = {}
          , n = a.apply(r, u.call(arguments, 1));
        for (var i in e)
            T.contains(n, i) || (t[i] = e[i]);
        return t
    }
    ,
    T.defaults = function(e) {
        return N(u.call(arguments, 1), function(t) {
            for (var n in t)
                null == e[n] && (e[n] = t[n])
        }),
        e
    }
    ,
    T.clone = function(e) {
        return T.isObject(e) ? T.isArray(e) ? e.slice() : T.extend({}, e) : e
    }
    ,
    T.tap = function(e, t) {
        return t(e),
        e
    }
    ;
    var M = function(e, t, n, r) {
        if (e === t)
            return 0 !== e || 1 / e == 1 / t;
        if (null == e || null == t)
            return e === t;
        e instanceof T && (e = e._wrapped),
        t instanceof T && (t = t._wrapped);
        var i = l.call(e);
        if (i != l.call(t))
            return !1;
        switch (i) {
        case "[object String]":
            return e == String(t);
        case "[object Number]":
            return e != +e ? t != +t : 0 == e ? 1 / e == 1 / t : e == +t;
        case "[object Date]":
        case "[object Boolean]":
            return +e == +t;
        case "[object RegExp]":
            return e.source == t.source && e.global == t.global && e.multiline == t.multiline && e.ignoreCase == t.ignoreCase
        }
        if ("object" != typeof e || "object" != typeof t)
            return !1;
        for (var s = n.length; s--; )
            if (n[s] == e)
                return r[s] == t;
        n.push(e),
        r.push(t);
        var o = 0
          , u = !0;
        if ("[object Array]" == i) {
            if (o = e.length,
            u = o == t.length)
                for (; o-- && (u = M(e[o], t[o], n, r)); )
                    ;
        } else {
            var a = e.constructor
              , f = t.constructor;
            if (a !== f && !(T.isFunction(a) && a instanceof a && T.isFunction(f) && f instanceof f))
                return !1;
            for (var c in e)
                if (T.has(e, c) && (o++,
                !(u = T.has(t, c) && M(e[c], t[c], n, r))))
                    break;
            if (u) {
                for (c in t)
                    if (T.has(t, c) && !o--)
                        break;
                u = !o
            }
        }
        return n.pop(),
        r.pop(),
        u
    };
    T.isEqual = function(e, t) {
        return M(e, t, [], [])
    }
    ,
    T.isEmpty = function(e) {
        if (null == e)
            return !0;
        if (T.isArray(e) || T.isString(e))
            return 0 === e.length;
        for (var t in e)
            if (T.has(e, t))
                return !1;
        return !0
    }
    ,
    T.isElement = function(e) {
        return !!e && 1 === e.nodeType
    }
    ,
    T.isArray = E || function(e) {
        return "[object Array]" == l.call(e)
    }
    ,
    T.isObject = function(e) {
        return e === Object(e)
    }
    ,
    N(["Arguments", "Function", "String", "Number", "Date", "RegExp"], function(e) {
        T["is" + e] = function(t) {
            return l.call(t) == "[object " + e + "]"
        }
    }),
    T.isArguments(arguments) || (T.isArguments = function(e) {
        return !!e && !!T.has(e, "callee")
    }
    ),
    "function" != typeof /./ && (T.isFunction = function(e) {
        return "function" == typeof e
    }
    ),
    T.isFinite = function(e) {
        return T.isNumber(e) && isFinite(e)
    }
    ,
    T.isNaN = function(e) {
        return T.isNumber(e) && e != +e
    }
    ,
    T.isBoolean = function(e) {
        return e === !0 || e === !1 || "[object Boolean]" == l.call(e)
    }
    ,
    T.isNull = function(e) {
        return null === e
    }
    ,
    T.isUndefined = function(e) {
        return void 0 === e
    }
    ,
    T.has = function(e, t) {
        return c.call(e, t)
    }
    ,
    T.noConflict = function() {
        return e._ = t,
        this
    }
    ,
    T.identity = function(e) {
        return e
    }
    ,
    T.times = function(e, t, n) {
        for (var r = 0; e > r; r++)
            t.call(n, r)
    }
    ,
    T.random = function(e, t) {
        return null == t && (t = e,
        e = 0),
        e + (0 | Math.random() * (t - e + 1))
    }
    ;
    var _ = {
        escape: {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#x27;",
            "/": "&#x2F;"
        }
    };
    _.unescape = T.invert(_.escape);
    var D = {
        escape: new RegExp("[" + T.keys(_.escape).join("") + "]","g"),
        unescape: new RegExp("(" + T.keys(_.unescape).join("|") + ")","g")
    };
    T.each(["escape", "unescape"], function(e) {
        T[e] = function(t) {
            return null == t ? "" : ("" + t).replace(D[e], function(t) {
                return _[e][t]
            })
        }
    }),
    T.result = function(e, t) {
        if (null == e)
            return null;
        var n = e[t];
        return T.isFunction(n) ? n.call(e) : n
    }
    ,
    T.mixin = function(e) {
        N(T.functions(e), function(t) {
            var n = T[t] = e[t];
            T.prototype[t] = function() {
                var e = [this._wrapped];
                return o.apply(e, arguments),
                F.call(this, n.apply(T, e))
            }
        })
    }
    ;
    var P = 0;
    T.uniqueId = function(e) {
        var t = P++;
        return e ? e + t : t
    }
    ,
    T.templateSettings = {
        evaluate: /<%([\s\S]+?)%>/g,
        interpolate: /<%=([\s\S]+?)%>/g,
        escape: /<%-([\s\S]+?)%>/g
    };
    var H = /(.)^/
      , B = {
        "'": "'",
        "\\": "\\",
        "\r": "r",
        "\n": "n",
        "	": "t",
        "\u2028": "u2028",
        "\u2029": "u2029"
    }
      , j = /\\|'|\r|\n|\t|\u2028|\u2029/g;
    T.template = function(e, t, n) {
        n = T.defaults({}, n, T.templateSettings);
        var r = new RegExp([(n.escape || H).source, (n.interpolate || H).source, (n.evaluate || H).source].join("|") + "|$","g")
          , i = 0
          , s = "__p+='";
        e.replace(r, function(t, n, r, o, u) {
            s += e.slice(i, u).replace(j, function(e) {
                return "\\" + B[e]
            }),
            s += n ? "'+\n((__t=(" + n + "))==null?'':_.escape(__t))+\n'" : r ? "'+\n((__t=(" + r + "))==null?'':__t)+\n'" : o ? "';\n" + o + "\n__p+='" : "",
            i = u + t.length
        }),
        s += "';\n",
        n.variable || (s = "with(obj||{}){\n" + s + "}\n"),
        s = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + s + "return __p;\n";
        try {
            var o = new Function(n.variable || "obj","_",s)
        } catch (u) {
            throw u.source = s,
            u
        }
        if (t)
            return o(t, T);
        var a = function(e) {
            return o.call(this, e, T)
        };
        return a.source = "function(" + (n.variable || "obj") + "){\n" + s + "}",
        a
    }
    ,
    T.chain = function(e) {
        return T(e).chain()
    }
    ;
    var F = function(e) {
        return this._chain ? T(e).chain() : e
    };
    T.mixin(T),
    N(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function(e) {
        var t = r[e];
        T.prototype[e] = function() {
            var n = this._wrapped;
            return t.apply(n, arguments),
            ("shift" == e || "splice" == e) && 0 === n.length && delete n[0],
            F.call(this, n)
        }
    }),
    N(["concat", "join", "slice"], function(e) {
        var t = r[e];
        T.prototype[e] = function() {
            return F.call(this, t.apply(this._wrapped, arguments))
        }
    }),
    T.extend(T.prototype, {
        chain: function() {
            return this._chain = !0,
            this
        },
        value: function() {
            return this._wrapped
        }
    })
}
.call(this);
//# sourceMappingURL=/assets/maps/application-07174819c108e93c2fa5287ea2bbaf7e7f5648f5a113fc5aad9e2cf2c7584727.js.map
